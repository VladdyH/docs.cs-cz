---
title: 'Osvědčené postupy: Správa verzí kontraktů dat'
ms.custom: ''
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: ''
ms.suite: ''
ms.technology:
- dotnet-clr
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- data contracts
- service contracts
- best practices [WCF], data contract versioning
- Windows Communication Foundation, data contracts
ms.assetid: bf0ab338-4d36-4e12-8002-8ebfdeb346cb
caps.latest.revision: 24
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.workload:
- dotnet
ms.openlocfilehash: dfb3d781a570db6a929a7d984aa45c224dda66bd
ms.sourcegitcommit: 03ee570f6f528a7d23a4221dcb26a9498edbdf8c
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 04/28/2018
---
# <a name="best-practices-data-contract-versioning"></a><span data-ttu-id="08473-102">Osvědčené postupy: Správa verzí kontraktů dat</span><span class="sxs-lookup"><span data-stu-id="08473-102">Best Practices: Data Contract Versioning</span></span>
<span data-ttu-id="08473-103">Toto téma obsahuje osvědčené postupy pro vytváření dat smlouvy, které můžete snadno vyvíjet se v čase.</span><span class="sxs-lookup"><span data-stu-id="08473-103">This topic lists the best practices for creating data contracts that can evolve easily over time.</span></span> [!INCLUDE[crabout](../../../includes/crabout-md.md)]<span data-ttu-id="08473-104"> kontrakty dat naleznete v tématech v [pomocí kontrakty dat](../../../docs/framework/wcf/feature-details/using-data-contracts.md).</span><span class="sxs-lookup"><span data-stu-id="08473-104"> data contracts, see the topics in [Using Data Contracts](../../../docs/framework/wcf/feature-details/using-data-contracts.md).</span></span>  
  
## <a name="note-on-schema-validation"></a><span data-ttu-id="08473-105">Poznámka: v ověřování schématu</span><span class="sxs-lookup"><span data-stu-id="08473-105">Note on Schema Validation</span></span>  
 <span data-ttu-id="08473-106">V hovoříte o Správa verzí kontraktů dat, je důležité si uvědomit, že data smlouvy schématu exportované sadou [!INCLUDE[indigo1](../../../includes/indigo1-md.md)] nemá žádné podporu správy verzí, než fakt, že ve výchozím nastavení jsou označená jako volitelná elementy.</span><span class="sxs-lookup"><span data-stu-id="08473-106">In discussing data contract versioning, it is important to note that the data contract schema exported by [!INCLUDE[indigo1](../../../includes/indigo1-md.md)] does not have any versioning support, other than the fact that elements are marked as optional by default.</span></span>  
  
 <span data-ttu-id="08473-107">To znamená, že i nejběžnější Správa verzí scénář, jako je například přidávání nového člena dat, nelze implementovat způsobem, který je bezproblémové s ohledem na daném schématu.</span><span class="sxs-lookup"><span data-stu-id="08473-107">This means that even the most common versioning scenario, such as adding a new data member, cannot be implemented in a way that is seamless with regard to a given schema.</span></span> <span data-ttu-id="08473-108">Novější verze kontraktu dat (s nového datového člena, např.) nelze ověřit pomocí staré schématu.</span><span class="sxs-lookup"><span data-stu-id="08473-108">The newer versions of a data contract (with a new data member, for example) do not validate using the old schema.</span></span>  
  
 <span data-ttu-id="08473-109">Existují však mnoho scénářů, ve kterých není vyžaduje striktní schématu dodržování předpisů.</span><span class="sxs-lookup"><span data-stu-id="08473-109">However, there are many scenarios in which strict schema compliance is not required.</span></span> <span data-ttu-id="08473-110">Mnoho webových služeb platformy, včetně [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] a XML webové služby vytvořené pomocí technologie ASP.NET, není ve výchozím nastavení provádět ověřování schématu a proto tolerovat dodatečné prvky, které nejsou popsané schéma.</span><span class="sxs-lookup"><span data-stu-id="08473-110">Many Web services platforms, including [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] and XML Web services created using ASP.NET, do not perform schema validation by default and therefore tolerate extra elements that are not described by the schema.</span></span> <span data-ttu-id="08473-111">Při práci s takové platformy, jsou usnadňují implementaci mnoho scénářů správy verzí.</span><span class="sxs-lookup"><span data-stu-id="08473-111">When working with such platforms, many versioning scenarios are easier to implement.</span></span>  
  
 <span data-ttu-id="08473-112">Proto existují dvě sady dat smlouvy verze: jeden pro scénáře, kde platnosti striktní schématu je důležité, a další nastavení pro scénáře, když není nastaven.</span><span class="sxs-lookup"><span data-stu-id="08473-112">Thus, there are two sets of data contract versioning guidelines: one set for scenarios where strict schema validity is important, and another set for scenarios when it is not.</span></span>  
  
## <a name="versioning-when-schema-validation-is-required"></a><span data-ttu-id="08473-113">Správa verzí, pokud je nutné použít ověřování schématu</span><span class="sxs-lookup"><span data-stu-id="08473-113">Versioning When Schema Validation Is Required</span></span>  
 <span data-ttu-id="08473-114">Pokud platnosti striktní schématu je nutná všech pokynů (nové starý a starého na nové), kontrakty dat považovat za neměnné.</span><span class="sxs-lookup"><span data-stu-id="08473-114">If strict schema validity is required in all directions (new-to-old and old-to-new), data contracts should be considered immutable.</span></span> <span data-ttu-id="08473-115">Pokud je třeba Správa verzí, se vytvoří nový kontrakt dat, s jiným názvem nebo obor názvů, a kontrakt služby pomocí datový typ musí být verzí odpovídajícím způsobem.</span><span class="sxs-lookup"><span data-stu-id="08473-115">If versioning is required, a new data contract should be created, with a different name or namespace, and the service contract using the data type should be versioned accordingly.</span></span>  
  
 <span data-ttu-id="08473-116">Například nákupní objednávka zpracování kontrakt služby s názvem `PoProcessing` s `PostPurchaseOrder` operace přebírá parametr, který vyhovuje `PurchaseOrder` kontrakt dat.</span><span class="sxs-lookup"><span data-stu-id="08473-116">For example, a purchase order processing service contract named `PoProcessing` with a `PostPurchaseOrder` operation takes a parameter that conforms to a `PurchaseOrder` data contract.</span></span> <span data-ttu-id="08473-117">Pokud `PurchaseOrder` kontrakt musí změnit, je třeba vytvořit nové smlouvy dat, tedy `PurchaseOrder2`, což zahrnuje změny.</span><span class="sxs-lookup"><span data-stu-id="08473-117">If the `PurchaseOrder` contract has to change, you must create a new data contract, that is, `PurchaseOrder2`, which includes the changes.</span></span> <span data-ttu-id="08473-118">Pak je nutné zajistit Správa verzí na úrovni kontrakt služby.</span><span class="sxs-lookup"><span data-stu-id="08473-118">You must then handle the versioning at the service contract level.</span></span> <span data-ttu-id="08473-119">Například tak, že vytvoříte `PostPurchaseOrder2` operaci, která přebírá `PurchaseOrder2` parametr, nebo vytvořením `PoProcessing2` kontrakt služby kde `PostPurchaseOrder` trvá operace `PurchaseOrder2` kontrakt dat.</span><span class="sxs-lookup"><span data-stu-id="08473-119">For example, by creating a `PostPurchaseOrder2` operation that takes the `PurchaseOrder2` parameter, or by creating a `PoProcessing2` service contract where the `PostPurchaseOrder` operation takes a `PurchaseOrder2` data contract.</span></span>  
  
 <span data-ttu-id="08473-120">Všimněte si, že změny v kontraktech dat, které odkazují jiné kontrakty dat také rozšířit vrstva modelu služby.</span><span class="sxs-lookup"><span data-stu-id="08473-120">Note that changes in data contracts that are referenced by other data contracts also extend to the service model layer.</span></span> <span data-ttu-id="08473-121">Například v předchozím scénáři `PurchaseOrder` kontrakt dat není potřeba změnit.</span><span class="sxs-lookup"><span data-stu-id="08473-121">For example, in the previous scenario the `PurchaseOrder` data contract does not need to change.</span></span> <span data-ttu-id="08473-122">Obsahuje však data členem `Customer` kontrakt dat, který naopak obsažená data členem `Address` kontrakt dat, který je třeba změnit.</span><span class="sxs-lookup"><span data-stu-id="08473-122">However, it contains a data member of a `Customer` data contract, which in turn contained a data member of the `Address` data contract, which does need to be changed.</span></span> <span data-ttu-id="08473-123">V takovém případě je potřeba vytvořit `Address2` kontrakt dat s požadované změny `Customer2` kontrakt dat, který obsahuje `Address2` – datový člen a `PurchaseOrder2` kontrakt dat, který obsahuje `Customer2` – datový člen.</span><span class="sxs-lookup"><span data-stu-id="08473-123">In that case, you would need to create an `Address2` data contract with the required changes, a `Customer2` data contract that contains the `Address2` data member, and a `PurchaseOrder2` data contract that contains a `Customer2` data member.</span></span> <span data-ttu-id="08473-124">Jako v předchozím případě by mohl být verzí také kontrakt služby.</span><span class="sxs-lookup"><span data-stu-id="08473-124">As in the previous case, the service contract would have to be versioned as well.</span></span>  
  
 <span data-ttu-id="08473-125">I když v těchto příkladech jsou názvy měnit (přidáním "2"), doporučuje se změnit obory názvů namísto názvů přidáním nové obory názvů s číslem verze nebo datum.</span><span class="sxs-lookup"><span data-stu-id="08473-125">Although in these examples names are changed (by appending a "2"), the recommendation is to change namespaces instead of names by appending new namespaces with a version number or a date.</span></span> <span data-ttu-id="08473-126">Například `http://schemas.contoso.com/2005/05/21/PurchaseOrder` kontrakt dat změní na `http://schemas.contoso.com/2005/10/14/PurchaseOrder` kontrakt dat.</span><span class="sxs-lookup"><span data-stu-id="08473-126">For example, the `http://schemas.contoso.com/2005/05/21/PurchaseOrder` data contract would change to the `http://schemas.contoso.com/2005/10/14/PurchaseOrder` data contract.</span></span>  
  
 <span data-ttu-id="08473-127">Další informace najdete v tématu osvědčené postupy: [verze služby](../../../docs/framework/wcf/service-versioning.md).</span><span class="sxs-lookup"><span data-stu-id="08473-127">For more information, see Best Practices: [Service Versioning](../../../docs/framework/wcf/service-versioning.md).</span></span>  
  
 <span data-ttu-id="08473-128">V některých případech striktní schématu dodržování předpisů pro zprávy odeslané aplikace musí zaručit, ale nelze spoléhat na příchozí zprávy, které mají být úplně schématu kompatibilní.</span><span class="sxs-lookup"><span data-stu-id="08473-128">Occasionally, you must guarantee strict schema compliance for messages sent by your application, but cannot rely on the incoming messages to be strictly schema-compliant.</span></span> <span data-ttu-id="08473-129">V tomto případě je nebezpečí, že příchozí zprávy může obsahovat nadbytečné data.</span><span class="sxs-lookup"><span data-stu-id="08473-129">In this case, there is a danger that an incoming message might contain extraneous data.</span></span> <span data-ttu-id="08473-130">Nadbytečné hodnoty jsou uloženy a vrácený [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] a proto výsledkem odesílány zprávy neplatné schéma.</span><span class="sxs-lookup"><span data-stu-id="08473-130">The extraneous values are stored and returned by [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] and thus results in schema-invalid messages being sent.</span></span> <span data-ttu-id="08473-131">K tomuto problému nedošlo, by měl být vypnuté funkci odezvy.</span><span class="sxs-lookup"><span data-stu-id="08473-131">To avoid this problem, the round-tripping feature should be turned off.</span></span> <span data-ttu-id="08473-132">Chcete-li to provést dvěma způsoby.</span><span class="sxs-lookup"><span data-stu-id="08473-132">There are two ways to do this.</span></span>  
  
-   <span data-ttu-id="08473-133">Neimplementuje <xref:System.Runtime.Serialization.IExtensibleDataObject> rozhraní na žádném z vašich typů.</span><span class="sxs-lookup"><span data-stu-id="08473-133">Do not implement the <xref:System.Runtime.Serialization.IExtensibleDataObject> interface on any of your types.</span></span>  
  
-   <span data-ttu-id="08473-134">Použít <xref:System.ServiceModel.ServiceBehaviorAttribute> atribut vaše kontrakt služby s <xref:System.ServiceModel.ServiceBehaviorAttribute.IgnoreExtensionDataObject%2A> vlastnost nastavena na hodnotu `true`.</span><span class="sxs-lookup"><span data-stu-id="08473-134">Apply a <xref:System.ServiceModel.ServiceBehaviorAttribute> attribute to your service contract with the <xref:System.ServiceModel.ServiceBehaviorAttribute.IgnoreExtensionDataObject%2A> property set to `true`.</span></span>  
  
 [!INCLUDE[crabout](../../../includes/crabout-md.md)]<span data-ttu-id="08473-135"> odezvy, najdete v části [kontrakty dat dopřednou](../../../docs/framework/wcf/feature-details/forward-compatible-data-contracts.md).</span><span class="sxs-lookup"><span data-stu-id="08473-135"> round-tripping, see [Forward-Compatible Data Contracts](../../../docs/framework/wcf/feature-details/forward-compatible-data-contracts.md).</span></span>  
  
## <a name="versioning-when-schema-validation-is-not-required"></a><span data-ttu-id="08473-136">Správa verzí, když se nevyžaduje ověření schématu</span><span class="sxs-lookup"><span data-stu-id="08473-136">Versioning When Schema Validation Is Not Required</span></span>  
 <span data-ttu-id="08473-137">Dodržování předpisů striktní schématu se zřídka vyžaduje.</span><span class="sxs-lookup"><span data-stu-id="08473-137">Strict schema compliance is rarely required.</span></span> <span data-ttu-id="08473-138">Řada platforem tolerovat dodatečné prvky, které nejsou popsané ve schématu.</span><span class="sxs-lookup"><span data-stu-id="08473-138">Many platforms tolerate extra elements not described by a schema.</span></span> <span data-ttu-id="08473-139">Také to je dovoleno, úplnou sadu funkcí popsaných v [Správa verzí kontraktů dat](../../../docs/framework/wcf/feature-details/data-contract-versioning.md) a [kontrakty dat dopřednou](../../../docs/framework/wcf/feature-details/forward-compatible-data-contracts.md) lze použít.</span><span class="sxs-lookup"><span data-stu-id="08473-139">As long as this is tolerated, the full set of features described in [Data Contract Versioning](../../../docs/framework/wcf/feature-details/data-contract-versioning.md) and [Forward-Compatible Data Contracts](../../../docs/framework/wcf/feature-details/forward-compatible-data-contracts.md) can be used.</span></span> <span data-ttu-id="08473-140">Doporučuje se podle následujících pokynů.</span><span class="sxs-lookup"><span data-stu-id="08473-140">The following guidelines are recommended.</span></span>  
  
 <span data-ttu-id="08473-141">Některé z pokynů musí být sledována přesně tak, aby bylo možné odesílat nové verze typu, kde je očekávána starší nebo odeslat starý, kde je očekávána novým.</span><span class="sxs-lookup"><span data-stu-id="08473-141">Some of the guidelines must be followed exactly in order to send new versions of a type where an older one is expected or send an old one where the new one is expected.</span></span> <span data-ttu-id="08473-142">Další pokyny nejsou bezpodmínečně nutné, ale jsou zde uvedeny, protože může být ovlivněno budoucí verze schématu.</span><span class="sxs-lookup"><span data-stu-id="08473-142">Other guidelines are not strictly required, but are listed here because they may be affected by the future of schema versioning.</span></span>  
  
1.  <span data-ttu-id="08473-143">Nepokoušejte se kontrakty verze dat podle typu dědičnosti.</span><span class="sxs-lookup"><span data-stu-id="08473-143">Do not attempt to version data contracts by type inheritance.</span></span> <span data-ttu-id="08473-144">Pokud chcete vytvořit novější verze, změnit kontrakt dat na existující typ nebo vytvořte nový typ nesouvisejícími.</span><span class="sxs-lookup"><span data-stu-id="08473-144">To create later versions, either change the data contract on an existing type or create a new unrelated type.</span></span>  
  
2.  <span data-ttu-id="08473-145">Použití dědičnosti společně s kontrakty dat je povolen, za předpokladu, že dědičnosti není používána jako mechanismus Správa verzí a dodržíte určitá pravidla.</span><span class="sxs-lookup"><span data-stu-id="08473-145">The use of inheritance together with data contracts is allowed, provided that inheritance is not used as a versioning mechanism and that certain rules are followed.</span></span> <span data-ttu-id="08473-146">Pokud je typ odvozena z určité základní typ, neprovádějte je odvozena od různých základní typ v budoucí verzi (Pokud má stejné datové kontrakt).</span><span class="sxs-lookup"><span data-stu-id="08473-146">If a type derives from a certain base type, do not make it derive from a different base type in a future version (unless it has the same data contract).</span></span> <span data-ttu-id="08473-147">Jedinou výjimkou je: typ můžete vložit do hierarchie mezi typ kontraktu dat a jeho základní typ, ale jenom v případě, že neobsahuje datových členů, stejné názvy jako ostatní členové všechny možné verze jiné typy v hierarchii.</span><span class="sxs-lookup"><span data-stu-id="08473-147">There is one exception to this: you can insert a type into the hierarchy between a data contract type and its base type, but only if it does not contain data members with the same names as other members in any possible versions of the other types in the hierarchy.</span></span> <span data-ttu-id="08473-148">Obecně platí pomocí datových členů se stejnými názvy s různou úrovní stejné hierarchie dědičnosti může vést k vážným Správa verzí problémům a je nutno.</span><span class="sxs-lookup"><span data-stu-id="08473-148">In general, using data members with the same names at different levels of the same inheritance hierarchy can lead to serious versioning problems and should be avoided.</span></span>  
  
3.  <span data-ttu-id="08473-149">Počínaje první verze součásti kontraktu dat vždy implementovat <xref:System.Runtime.Serialization.IExtensibleDataObject> povolit odezvy.</span><span class="sxs-lookup"><span data-stu-id="08473-149">Starting with the first version of a data contract, always implement <xref:System.Runtime.Serialization.IExtensibleDataObject> to enable round-tripping.</span></span> <span data-ttu-id="08473-150">Další informace najdete v tématu [kontrakty dat dopřednou](../../../docs/framework/wcf/feature-details/forward-compatible-data-contracts.md).</span><span class="sxs-lookup"><span data-stu-id="08473-150">For more information, see [Forward-Compatible Data Contracts](../../../docs/framework/wcf/feature-details/forward-compatible-data-contracts.md).</span></span> <span data-ttu-id="08473-151">Pokud jeden nebo více verzí typu mít vydání bez implementace tohoto rozhraní, implementaci v příští verzi typu.</span><span class="sxs-lookup"><span data-stu-id="08473-151">If you have released one or more versions of a type without implementing this interface, implement it in the next version of the type.</span></span>  
  
4.  <span data-ttu-id="08473-152">V novějších verzích neměňte název kontraktu dat nebo obor názvů.</span><span class="sxs-lookup"><span data-stu-id="08473-152">In later versions, do not change the data contract name or namespace.</span></span> <span data-ttu-id="08473-153">Pokud změníte název nebo obor názvů typu základní kontrakt dat, je nutné zachovat název kontraktu dat a oboru názvů pomocí příslušné mechanismy, jako <xref:System.Runtime.Serialization.DataContractAttribute.Name%2A> vlastnost <xref:System.Runtime.Serialization.DataContractAttribute>.</span><span class="sxs-lookup"><span data-stu-id="08473-153">If changing the name or namespace of the type underlying the data contract, be sure to preserve the data contract name and namespace by using the appropriate mechanisms, such as the <xref:System.Runtime.Serialization.DataContractAttribute.Name%2A> property of the <xref:System.Runtime.Serialization.DataContractAttribute>.</span></span> [!INCLUDE[crabout](../../../includes/crabout-md.md)]<span data-ttu-id="08473-154"> pojmenování, najdete v části [názvy datových kontraktů](../../../docs/framework/wcf/feature-details/data-contract-names.md).</span><span class="sxs-lookup"><span data-stu-id="08473-154"> naming, see [Data Contract Names](../../../docs/framework/wcf/feature-details/data-contract-names.md).</span></span>  
  
5.  <span data-ttu-id="08473-155">V novějších verzích Neměňte názvy všech datových členů.</span><span class="sxs-lookup"><span data-stu-id="08473-155">In later versions, do not change the names of any data members.</span></span> <span data-ttu-id="08473-156">Pokud změníte název pole, vlastnost nebo událostí základní datový člen, použijte `Name` vlastnost <xref:System.Runtime.Serialization.DataMemberAttribute> zachovat stávající název člena data.</span><span class="sxs-lookup"><span data-stu-id="08473-156">If changing the name of the field, property, or event underlying the data member, use the `Name` property of the <xref:System.Runtime.Serialization.DataMemberAttribute> to preserve the existing data member name.</span></span>  
  
6.  <span data-ttu-id="08473-157">V novějších verzích neměňte typ žádné pole, vlastnost nebo základní datový člen tak, aby smlouvy Výsledná data pro tento člen změny dat událostí.</span><span class="sxs-lookup"><span data-stu-id="08473-157">In later versions, do not change the type of any field, property, or event underlying a data member such that the resulting data contract for that data member changes.</span></span> <span data-ttu-id="08473-158">Mějte na paměti, které typy rozhraní jsou rovnocenná <xref:System.Object> pro účely určení kontrakt očekávaná data.</span><span class="sxs-lookup"><span data-stu-id="08473-158">Keep in mind that interface types are equivalent to <xref:System.Object> for the purposes of determining the expected data contract.</span></span>  
  
7.  <span data-ttu-id="08473-159">V novějších verzích, neměňte pořadí existující data členů úpravou <xref:System.Runtime.Serialization.DataMemberAttribute.Order%2A> vlastnost <xref:System.Runtime.Serialization.DataMemberAttribute> atribut.</span><span class="sxs-lookup"><span data-stu-id="08473-159">In later versions, do not change the order of the existing data members by adjusting the <xref:System.Runtime.Serialization.DataMemberAttribute.Order%2A> property of the <xref:System.Runtime.Serialization.DataMemberAttribute> attribute.</span></span>  
  
8.  <span data-ttu-id="08473-160">V novějších verzích mohou být přidány nové datových členů.</span><span class="sxs-lookup"><span data-stu-id="08473-160">In later versions, new data members can be added.</span></span> <span data-ttu-id="08473-161">Vždy postupujte tato pravidla:</span><span class="sxs-lookup"><span data-stu-id="08473-161">They should always follow these rules:</span></span>  
  
    1.  <span data-ttu-id="08473-162"><xref:System.Runtime.Serialization.DataMemberAttribute.IsRequired%2A> Vlastnost by měla být vždy ponechány na jeho výchozí hodnotu `false`.</span><span class="sxs-lookup"><span data-stu-id="08473-162">The <xref:System.Runtime.Serialization.DataMemberAttribute.IsRequired%2A> property should always be left at its default value of `false`.</span></span>  
  
    2.  <span data-ttu-id="08473-163">Pokud výchozí hodnota je `null` nebo nula pro člena nepřijatelný, metody zpětného volání by je třeba zadat pomocí <xref:System.Runtime.Serialization.OnDeserializingAttribute> zajistit přiměřené výchozí v případě, že člen není k dispozici v příchozím datovém proudu.</span><span class="sxs-lookup"><span data-stu-id="08473-163">If a default value of `null` or zero for the member is unacceptable, a callback method should be provided using the <xref:System.Runtime.Serialization.OnDeserializingAttribute> to provide a reasonable default in case the member is not present in the incoming stream.</span></span> [!INCLUDE[crabout](../../../includes/crabout-md.md)]<span data-ttu-id="08473-164"> zpětné volání, najdete v části [verze proti chybám zpětná volání serializace tolerantní](../../../docs/framework/wcf/feature-details/version-tolerant-serialization-callbacks.md).</span><span class="sxs-lookup"><span data-stu-id="08473-164"> the callback, see [Version-Tolerant Serialization Callbacks](../../../docs/framework/wcf/feature-details/version-tolerant-serialization-callbacks.md).</span></span>  
  
    3.  <span data-ttu-id="08473-165">`Order` Vlastnost `DataMemberAttribute` se má použít k zajištění všech nově přidaných datových členů zobrazení po existující datových členů.</span><span class="sxs-lookup"><span data-stu-id="08473-165">The `Order` property on the `DataMemberAttribute` should be used to make sure that all of the newly added data members appear after the existing data members.</span></span> <span data-ttu-id="08473-166">Doporučený způsob to to vypadá takto: žádná z datových členů v první verzi kontrakt dat by měl mít jejich `Order` sadu vlastností.</span><span class="sxs-lookup"><span data-stu-id="08473-166">The recommended way of doing this is as follows: None of the data members in the first version of the data contract should have their `Order` property set.</span></span> <span data-ttu-id="08473-167">Všechny členy data přidána do verze 2 kontrakt dat by měl mít jejich `Order` vlastnost nastavena na hodnotu 2.</span><span class="sxs-lookup"><span data-stu-id="08473-167">All of the data members added in version 2 of the data contract should have their `Order` property set to 2.</span></span> <span data-ttu-id="08473-168">Všechny členy data přidána do verze 3 kontrakt dat by měl mít jejich `Order` nastavena na hodnotu 3 a tak dále.</span><span class="sxs-lookup"><span data-stu-id="08473-168">All of the data members added in version 3 of the data contract should have their `Order` set to 3, and so on.</span></span> <span data-ttu-id="08473-169">Je přípustné mít více než jednoho člena dat se nastaví na stejnou `Order` číslo.</span><span class="sxs-lookup"><span data-stu-id="08473-169">It is permissible to have more than one data member set to the same `Order` number.</span></span>  
  
9. <span data-ttu-id="08473-170">Neodebírejte datových členů v novějších verzích, i v případě <xref:System.Runtime.Serialization.DataMemberAttribute.IsRequired%2A> vlastnost byla ponechány na jeho výchozí vlastnost `false` v předchozích verzích.</span><span class="sxs-lookup"><span data-stu-id="08473-170">Do not remove data members in later versions, even if the <xref:System.Runtime.Serialization.DataMemberAttribute.IsRequired%2A> property was left at its default property of `false` in prior versions.</span></span>  
  
10. <span data-ttu-id="08473-171">Neměňte `IsRequired` vlastnost v žádné stávající data členy z verze na verzi.</span><span class="sxs-lookup"><span data-stu-id="08473-171">Do not change the `IsRequired` property on any existing data members from version to version.</span></span>  
  
11. <span data-ttu-id="08473-172">Pro členy požadovaná data (kde `IsRequired` je `true`), se nezmění `EmitDefaultValue` vlastnost z verze na verzi.</span><span class="sxs-lookup"><span data-stu-id="08473-172">For required data members (where `IsRequired` is `true`), do not change the `EmitDefaultValue` property from version to version.</span></span>  
  
12. <span data-ttu-id="08473-173">Nepokoušejte se vytváření hierarchií větvenou správy verzí.</span><span class="sxs-lookup"><span data-stu-id="08473-173">Do not attempt to create branched versioning hierarchies.</span></span> <span data-ttu-id="08473-174">To znamená, že by měla být vždy cestu minimálně jeden směr z libovolné verze na jakoukoli jinou verzi pomocí pouze změny, které jsou povolené podle těchto pokynů.</span><span class="sxs-lookup"><span data-stu-id="08473-174">That is, there should always be a path in at least one direction from any version to any other version using only the changes permitted by these guidelines.</span></span>  
  
     <span data-ttu-id="08473-175">Například pokud verze 1 kontraktu dat osoba obsahuje pouze název datového člena, je byste je neměli vytvářet verze 2a kontraktu přidání pouze stáří člen a verze 2b přidání pouze člena adresy.</span><span class="sxs-lookup"><span data-stu-id="08473-175">For example, if version 1 of a Person data contract contains only the Name data member, you should not create version 2a of the contract adding only the Age member and version 2b adding only the Address member.</span></span> <span data-ttu-id="08473-176">Má z 2a 2b zahrnovat stáří odeberete a přidáte adresu; přejdete v opačným směrem by mít za následek odebrání adresy a přidání stáří.</span><span class="sxs-lookup"><span data-stu-id="08473-176">Going from 2a to 2b would involve removing Age and adding Address; going in the other direction would entail removing Address and adding Age.</span></span> <span data-ttu-id="08473-177">Odebrat členy není povolen podle těchto pokynů.</span><span class="sxs-lookup"><span data-stu-id="08473-177">Removing members is not permitted by these guidelines.</span></span>  
  
13. <span data-ttu-id="08473-178">Obecně byste neměli vytvářet nové podtypů existující typy kontraktů dat v nové verzi vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="08473-178">You should generally not create new subtypes of existing data contract types in a new version of your application.</span></span> <span data-ttu-id="08473-179">Podobně byste je neměli vytvářet nové kontrakty dat, které se používají místo data, která členy deklarovaný jako objekt, nebo jako typy rozhraní.</span><span class="sxs-lookup"><span data-stu-id="08473-179">Likewise, you should not create new data contracts that are used in place of data members declared as Object or as interface types.</span></span> <span data-ttu-id="08473-180">Vytvoření tyto nové třídy je povoleno pouze v případě, že znáte, můžete přidat nové typy do seznamu známých typů všech instancí staré aplikace.</span><span class="sxs-lookup"><span data-stu-id="08473-180">Creating these new classes is allowed only when you know that you can add the new types to the known types list of all instances of your old application.</span></span> <span data-ttu-id="08473-181">Ve verzi 1 aplikace může například mít LibraryItem datový typ s knihy kontraktu a data novinách smlouvy podtypů.</span><span class="sxs-lookup"><span data-stu-id="08473-181">For example, in version 1 of your application, you may have the LibraryItem data contract type with the Book and Newspaper data contract subtypes.</span></span> <span data-ttu-id="08473-182">LibraryItem by pak znamenalo, známé typy seznam, který obsahuje knihy a novinách.</span><span class="sxs-lookup"><span data-stu-id="08473-182">LibraryItem would then have a known types list that contains Book and Newspaper.</span></span> <span data-ttu-id="08473-183">Předpokládejme, že přidáte typu časopis nyní ve verzi 2, což je podtypem LibraryItem.</span><span class="sxs-lookup"><span data-stu-id="08473-183">Suppose you now add a Magazine type in version 2 which is a subtype of LibraryItem.</span></span> <span data-ttu-id="08473-184">Pokud odešlete instance časopis z verze 2 verze 1, kontrakt dat časopis nebyl nalezen v seznamu známých typů a je vyvolána výjimka.</span><span class="sxs-lookup"><span data-stu-id="08473-184">If you send a Magazine instance from version 2 to version 1, the Magazine data contract is not found in the list of known types and an exception is thrown.</span></span>  
  
14. <span data-ttu-id="08473-185">Neměli přidat nebo odebrat členy výčtu mezi verzemi.</span><span class="sxs-lookup"><span data-stu-id="08473-185">You should not add or remove enumeration members between versions.</span></span> <span data-ttu-id="08473-186">Členové výčtu by neměl také přejmenovat, pokud použijete vlastnost názvu na `EnumMemberAttribute` atribut zachovat jejich názvy v datovém modelu kontrakt stejné.</span><span class="sxs-lookup"><span data-stu-id="08473-186">You should also not rename enumeration members, unless you use the Name property on the `EnumMemberAttribute` attribute to keep their names in the data contract model the same.</span></span>  
  
15. <span data-ttu-id="08473-187">Kolekce se v datovém modelu kontrakt, jak je popsáno v zaměňovat [typy kolekcí v kontraktech dat](../../../docs/framework/wcf/feature-details/collection-types-in-data-contracts.md).</span><span class="sxs-lookup"><span data-stu-id="08473-187">Collections are interchangeable in the data contract model as described in [Collection Types in Data Contracts](../../../docs/framework/wcf/feature-details/collection-types-in-data-contracts.md).</span></span> <span data-ttu-id="08473-188">To umožňuje vysoký stupeň flexibilitu.</span><span class="sxs-lookup"><span data-stu-id="08473-188">This allows for a great degree of flexibility.</span></span> <span data-ttu-id="08473-189">Ale ujistěte se, že neměnit nechtěně typu kolekce v jiný zaměňovat způsobem v závislosti na verzi.</span><span class="sxs-lookup"><span data-stu-id="08473-189">However, make sure that you do not inadvertently change a collection type in a non-interchangeable way from version to version.</span></span> <span data-ttu-id="08473-190">Například neměňte z kolekce neupravené (tedy bez `CollectionDataContractAttribute` atribut) k přizpůsobené jedné nebo vlastní kolekce neupravené jeden.</span><span class="sxs-lookup"><span data-stu-id="08473-190">For example, do not change from a non-customized collection (that is, without the `CollectionDataContractAttribute` attribute) to a customized one or a customized collection to a non-customized one.</span></span> <span data-ttu-id="08473-191">Navíc neměňte vlastnosti na `CollectionDataContractAttribute` na verzi.</span><span class="sxs-lookup"><span data-stu-id="08473-191">Also, do not change the properties on the `CollectionDataContractAttribute` from version to version.</span></span> <span data-ttu-id="08473-192">Jedinou změnou povolených je přidání vlastnosti Name nebo Namespace, pokud došlo ke změně názvu nebo obor názvů základní typ kolekce a je třeba, aby jeho data smlouvy názvem a oborem názvů stejný jako předchozí verze.</span><span class="sxs-lookup"><span data-stu-id="08473-192">The only allowed change is adding a Name or Namespace property if the underlying collection type's name or namespace has changed and you need to make its data contract name and namespace the same as in a previous version.</span></span>  
  
 <span data-ttu-id="08473-193">Některé zde uvedené pokyny můžete bezpečně ignorovat při použít zvláštní okolnosti.</span><span class="sxs-lookup"><span data-stu-id="08473-193">Some of the guidelines listed here can be safely ignored when special circumstances apply.</span></span> <span data-ttu-id="08473-194">Ujistěte se, že rozumíte plně serializace, deserializace a schéma mechanismy související se situací před odchylují od podle pokynů.</span><span class="sxs-lookup"><span data-stu-id="08473-194">Make sure you fully understand the serialization, deserialization, and schema mechanisms involved before deviating from the guidelines.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="08473-195">Viz také</span><span class="sxs-lookup"><span data-stu-id="08473-195">See Also</span></span>  
 <xref:System.Runtime.Serialization.DataContractAttribute.Name%2A>  
 <xref:System.Runtime.Serialization.DataContractAttribute>  
 <xref:System.Runtime.Serialization.DataMemberAttribute.Order%2A>  
 <xref:System.Runtime.Serialization.DataMemberAttribute.IsRequired%2A>  
 <xref:System.Runtime.Serialization.IExtensibleDataObject>  
 <xref:System.ServiceModel.ServiceBehaviorAttribute>  
 <xref:System.Runtime.Serialization.IExtensibleDataObject.ExtensionData%2A>  
 <xref:System.Runtime.Serialization.ExtensionDataObject>  
 <xref:System.Runtime.Serialization.OnDeserializingAttribute>  
 [<span data-ttu-id="08473-196">Použití kontraktů dat</span><span class="sxs-lookup"><span data-stu-id="08473-196">Using Data Contracts</span></span>](../../../docs/framework/wcf/feature-details/using-data-contracts.md)  
 [<span data-ttu-id="08473-197">Správa verzí kontraktů dat</span><span class="sxs-lookup"><span data-stu-id="08473-197">Data Contract Versioning</span></span>](../../../docs/framework/wcf/feature-details/data-contract-versioning.md)  
 [<span data-ttu-id="08473-198">Názvy kontraktů dat</span><span class="sxs-lookup"><span data-stu-id="08473-198">Data Contract Names</span></span>](../../../docs/framework/wcf/feature-details/data-contract-names.md)  
 [<span data-ttu-id="08473-199">Kontrakty dat s dopřednou kompatibilitou</span><span class="sxs-lookup"><span data-stu-id="08473-199">Forward-Compatible Data Contracts</span></span>](../../../docs/framework/wcf/feature-details/forward-compatible-data-contracts.md)  
 [<span data-ttu-id="08473-200">Zpětná volání serializace tolerantní k verzím</span><span class="sxs-lookup"><span data-stu-id="08473-200">Version-Tolerant Serialization Callbacks</span></span>](../../../docs/framework/wcf/feature-details/version-tolerant-serialization-callbacks.md)
