---
title: "Definice a určení chyb"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
dev_langs:
- csharp
- vb
helpviewer_keywords:
- handling faults [WCF], specifying
- handling faults [WCF], defining
ms.assetid: c00c84f1-962d-46a7-b07f-ebc4f80fbfc1
caps.latest.revision: "13"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.openlocfilehash: 754c938242035549b9deb94a2fe3b975b1384fc0
ms.sourcegitcommit: ce279f2d7fe2220e6ea0a25a8a7a5370ddf8d9f0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 12/02/2017
---
# <a name="defining-and-specifying-faults"></a><span data-ttu-id="e33d0-102">Definice a určení chyb</span><span class="sxs-lookup"><span data-stu-id="e33d0-102">Defining and Specifying Faults</span></span>
<span data-ttu-id="e33d0-103">Chyb SOAP nesou podmínku informace o chybě ze služby pro klienta a v případě duplexní z klienta ke službě umožňuje vzájemnou spolupráci způsobem.</span><span class="sxs-lookup"><span data-stu-id="e33d0-103">SOAP faults convey error condition information from a service to a client and, in the duplex case, from a client to a service in an interoperable way.</span></span> <span data-ttu-id="e33d0-104">Toto téma popisuje, kdy a jak definovat vlastní chyby obsahu a určit, které operace vrátit.</span><span class="sxs-lookup"><span data-stu-id="e33d0-104">This topic discusses when and how to define custom fault content and specify which operations can return them.</span></span> [!INCLUDE[crabout](../../../includes/crabout-md.md)]<span data-ttu-id="e33d0-105">jak služba nebo duplexní klienta, může poslat tyto chyby a jak klienta služby nebo aplikace zpracovává těchto chyb, najdete v části [odesílání a přijímání chyb](../../../docs/framework/wcf/sending-and-receiving-faults.md).</span><span class="sxs-lookup"><span data-stu-id="e33d0-105"> how a service, or duplex client, can send those faults and how a client or service application handles these faults, see [Sending and Receiving Faults](../../../docs/framework/wcf/sending-and-receiving-faults.md).</span></span> <span data-ttu-id="e33d0-106">Přehled zpracování chyb v [!INCLUDE[indigo1](../../../includes/indigo1-md.md)] aplikace, najdete v části [zadání a zpracování chyb v kontraktech a službách](../../../docs/framework/wcf/specifying-and-handling-faults-in-contracts-and-services.md).</span><span class="sxs-lookup"><span data-stu-id="e33d0-106">For an overview of error handling in [!INCLUDE[indigo1](../../../includes/indigo1-md.md)] applications, see [Specifying and Handling Faults in Contracts and Services](../../../docs/framework/wcf/specifying-and-handling-faults-in-contracts-and-services.md).</span></span>  
  
## <a name="overview"></a><span data-ttu-id="e33d0-107">Přehled</span><span class="sxs-lookup"><span data-stu-id="e33d0-107">Overview</span></span>  
 <span data-ttu-id="e33d0-108">Deklarovaný chyb SOAP jsou ty, ve kterých se operace <xref:System.ServiceModel.FaultContractAttribute?displayProperty=nameWithType> určující vlastního typu chybu protokolu SOAP.</span><span class="sxs-lookup"><span data-stu-id="e33d0-108">Declared SOAP faults are those in which an operation has a <xref:System.ServiceModel.FaultContractAttribute?displayProperty=nameWithType> that specifies a custom SOAP fault type.</span></span> <span data-ttu-id="e33d0-109">Nedeklarovaný chyb SOAP jsou ty, které nejsou uvedené ve smlouvě operace.</span><span class="sxs-lookup"><span data-stu-id="e33d0-109">Undeclared SOAP faults are those that are not specified in the contract for an operation.</span></span> <span data-ttu-id="e33d0-110">Toto téma vám pomůže identifikovat tyto chybové stavy a vytvoření kontraktu selhání služby, který můžou klienti používat správně zpracovat tyto chybové stavy při upozornění podle vlastních chyb SOAP.</span><span class="sxs-lookup"><span data-stu-id="e33d0-110">This topic helps you identify those error conditions and create a fault contract for your service that clients can use to properly handle those error conditions when notified by custom SOAP faults.</span></span> <span data-ttu-id="e33d0-111">Základní úlohy jsou v pořadí:</span><span class="sxs-lookup"><span data-stu-id="e33d0-111">The basic tasks are, in order:</span></span>  
  
1.  <span data-ttu-id="e33d0-112">Definujte podmínky chyby, které byste se měli seznámit klienta služby.</span><span class="sxs-lookup"><span data-stu-id="e33d0-112">Define the error conditions that a client of your service should know about.</span></span>  
  
2.  <span data-ttu-id="e33d0-113">Definujte vlastní obsah chyb SOAP pro tyto chybové podmínky.</span><span class="sxs-lookup"><span data-stu-id="e33d0-113">Define the custom content of the SOAP faults for those error conditions.</span></span>  
  
3.  <span data-ttu-id="e33d0-114">Vaše operace označte tak, aby konkrétní SOAP chyb, které vyvolají jsou viditelné na klienty v jazyce WSDL.</span><span class="sxs-lookup"><span data-stu-id="e33d0-114">Mark your operations so that the specific SOAP faults that they throw are exposed to clients in WSDL.</span></span>  
  
### <a name="defining-error-conditions-that-clients-should-know-about"></a><span data-ttu-id="e33d0-115">Definování chybové stavy, které byste se měli seznámit klientů</span><span class="sxs-lookup"><span data-stu-id="e33d0-115">Defining Error Conditions That Clients Should Know About</span></span>  
 <span data-ttu-id="e33d0-116">Chyb SOAP jsou veřejně popsané zprávy, které přenosu informací o selhání určité operace.</span><span class="sxs-lookup"><span data-stu-id="e33d0-116">SOAP faults are publicly described messages that carry fault information for a particular operation.</span></span> <span data-ttu-id="e33d0-117">Vzhledem k tomu, že jsou popsány společně s další operace zprávy WSDL, klienti vědět a proto očekávat zpracovat takové chyby při vyvolání operace.</span><span class="sxs-lookup"><span data-stu-id="e33d0-117">Because they are described along with other operation messages in WSDL, clients know and, therefore, expect to handle such faults when invoking an operation.</span></span> <span data-ttu-id="e33d0-118">Ale protože [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] služby jsou zapsané ve spravovaném kódu, při rozhodování o tom, která chyba se podmínky ve spravovaném kódu se převedou na chyb a vrátí klientovi nabízí možnost oddělit chybové stavy a chyby ve službě z formální chyba konverzace, které máte s klientem.</span><span class="sxs-lookup"><span data-stu-id="e33d0-118">But because [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] services are written in managed code, deciding which error conditions in managed code are to be converted into faults and returned to the client provides you the opportunity to separate error conditions and bugs in your service from the formal error conversation you have with a client.</span></span>  
  
 <span data-ttu-id="e33d0-119">Například následující příklad kódu ukazuje operace, která přebírá dvě celá čísla a vrátí jiné číslo.</span><span class="sxs-lookup"><span data-stu-id="e33d0-119">For example, the following code example shows an operation that takes two integers and returns another integer.</span></span> <span data-ttu-id="e33d0-120">Několik výjimek může být vyvolána tady, proto při navrhování chyba – kontrakt, je třeba určit, které chybové stavy jsou důležité pro vašeho klienta.</span><span class="sxs-lookup"><span data-stu-id="e33d0-120">Several exceptions can be thrown here, so when designing the fault contract, you must determine which error conditions are important for your client.</span></span> <span data-ttu-id="e33d0-121">V tomto případě by měl zjistit službu <xref:System.DivideByZeroException?displayProperty=nameWithType> výjimka.</span><span class="sxs-lookup"><span data-stu-id="e33d0-121">In this case, the service should detect the <xref:System.DivideByZeroException?displayProperty=nameWithType> exception.</span></span>  
  
```csharp  
[ServiceContract]  
public class CalculatorService  
{  
    [OperationContract]   
    int Divide(int a, int b)  
    {  
      if (b==0) throw new Exception("Division by zero!");  
      return a/b;  
    }  
}  
```  
  
```vb  
<ServiceContract> _  
Public Class CalculatorService  
    <OperationContract]> _  
    Public Function Divide(ByVal a As Integer, ByVal b As Integer) _  
       As Integer  
      If (b==0) Then   
            Throw New Exception("Division by zero!")  
      Return a/b  
    End Function  
End Class  
```  
  
 <span data-ttu-id="e33d0-122">V operaci v předchozím příkladu můžete buď vrátit vlastní chybu protokolu SOAP, která je specifická pro dělení nulou, vlastní chyby, která je specifická pro matematické operace, ale který obsahuje informace specifické pro dělení nula, několik chyb pro několik různých Chyba situacích, nebo žádná chyba protokolu SOAP na všechny.</span><span class="sxs-lookup"><span data-stu-id="e33d0-122">In the preceding example the operation can either return a custom SOAP fault that is specific to dividing by zero, a custom fault that is specific to math operations but that contains information specific to dividing by zero, multiple faults for several different error situations, or no SOAP fault at all.</span></span>  
  
### <a name="define-the-content-of-error-conditions"></a><span data-ttu-id="e33d0-123">Definujte obsah chybové stavy</span><span class="sxs-lookup"><span data-stu-id="e33d0-123">Define the Content of Error Conditions</span></span>  
 <span data-ttu-id="e33d0-124">Jakmile jako ten, který může úspěšně vrátit vlastní chybu protokolu SOAP byla zjištěna chybový stav, dalším krokem je zadat obsah této chyby a ujistěte se, zda lze serializovat strukturu obsahu.</span><span class="sxs-lookup"><span data-stu-id="e33d0-124">Once an error condition has been identified as one that can usefully return a custom SOAP fault, the next step is to define the contents of that fault and ensure that the content structure can be serialized.</span></span> <span data-ttu-id="e33d0-125">Příklad kódu v předchozí části ukazuje chybu, specifické pro `Divide` operaci, ale pokud jsou na jiné operace `Calculator` služby, potom jeden vlastní chybu protokolu SOAP může informovat klienta všechny chybové stavy kalkulačky `Divide`zahrnuty.</span><span class="sxs-lookup"><span data-stu-id="e33d0-125">The code example in the preceding section shows an error specific to a `Divide` operation, but if there are other operations on the `Calculator` service, then a single custom SOAP fault can inform the client of all calculator error conditions, `Divide` included.</span></span> <span data-ttu-id="e33d0-126">Následující příklad kódu ukazuje vytvoření vlastní chybu protokolu SOAP, `MathFault`, které můžete zprávy o chybách, které jsou vytvořené pomocí všechny matematické operace, včetně `Divide`.</span><span class="sxs-lookup"><span data-stu-id="e33d0-126">The following code example shows the creation of a custom SOAP fault, `MathFault`, which can report errors made using all math operations, including `Divide`.</span></span> <span data-ttu-id="e33d0-127">Při třídy můžete zadat operace ( `Operation` vlastnosti) a hodnotu, která popisuje problém ( `ProblemType` vlastnost), třídy a tyto vlastnosti musí být serializovatelný přenos klienta do vlastní chybu protokolu SOAP.</span><span class="sxs-lookup"><span data-stu-id="e33d0-127">While the class can specify an operation (the `Operation` property) and a value that describes the problem (the `ProblemType` property), the class and these properties must be serializable to be transferred to the client in a custom SOAP fault.</span></span> <span data-ttu-id="e33d0-128">Proto <xref:System.Runtime.Serialization.DataContractAttribute?displayProperty=nameWithType> a <xref:System.Runtime.Serialization.DataMemberAttribute?displayProperty=nameWithType> atributy se používají k vytvoření typu a jeho vlastnosti, serializable a jako interoperabilních nejvíce.</span><span class="sxs-lookup"><span data-stu-id="e33d0-128">Therefore, the <xref:System.Runtime.Serialization.DataContractAttribute?displayProperty=nameWithType> and <xref:System.Runtime.Serialization.DataMemberAttribute?displayProperty=nameWithType> attributes are used to make the type and its properties serializable and as interoperable as possible.</span></span>  
  
 [!code-csharp[Faults#2](../../../samples/snippets/csharp/VS_Snippets_CFX/faults/cs/service.cs#2)]
 [!code-vb[Faults#2](../../../samples/snippets/visualbasic/VS_Snippets_CFX/faults/vb/service.vb#2)]  
  
 [!INCLUDE[crabout](../../../includes/crabout-md.md)]<span data-ttu-id="e33d0-129">jak ověřit data je serializovatelný naleznete [zadání přenos dat v kontraktech služby](../../../docs/framework/wcf/feature-details/specifying-data-transfer-in-service-contracts.md).</span><span class="sxs-lookup"><span data-stu-id="e33d0-129"> how to ensure your data is serializable, see [Specifying Data Transfer in Service Contracts](../../../docs/framework/wcf/feature-details/specifying-data-transfer-in-service-contracts.md).</span></span> <span data-ttu-id="e33d0-130">Seznam serializaci podpory, který <xref:System.Runtime.Serialization.DataContractSerializer?displayProperty=nameWithType> poskytuje, najdete v části [typy nepodporuje serializátor kontraktu dat](../../../docs/framework/wcf/feature-details/types-supported-by-the-data-contract-serializer.md).</span><span class="sxs-lookup"><span data-stu-id="e33d0-130">For a list of the serialization support that <xref:System.Runtime.Serialization.DataContractSerializer?displayProperty=nameWithType> provides, see [Types Supported by the Data Contract Serializer](../../../docs/framework/wcf/feature-details/types-supported-by-the-data-contract-serializer.md).</span></span>  
  
### <a name="mark-operations-to-establish-the-fault-contract"></a><span data-ttu-id="e33d0-131">Operace označit k navázání chyba – kontrakt</span><span class="sxs-lookup"><span data-stu-id="e33d0-131">Mark Operations to Establish the Fault Contract</span></span>  
 <span data-ttu-id="e33d0-132">Jakmile serializovatelný datová struktura, která je vrácena, jako je definována část vlastní chybu protokolu SOAP, posledním krokem je označit smlouva operace jako byla vrácena chyba protokolu SOAP daného typu.</span><span class="sxs-lookup"><span data-stu-id="e33d0-132">Once a serializable data structure that is returned as part of a custom SOAP fault is defined, the last step is to mark your operation contract as throwing a SOAP fault of that type.</span></span> <span data-ttu-id="e33d0-133">Chcete-li to provést, použijte <xref:System.ServiceModel.FaultContractAttribute?displayProperty=nameWithType> atribut a předejte typ vlastní datový typ, který jste vytvořili.</span><span class="sxs-lookup"><span data-stu-id="e33d0-133">To do this, use the <xref:System.ServiceModel.FaultContractAttribute?displayProperty=nameWithType> attribute and pass the type of the custom data type that you have constructed.</span></span> <span data-ttu-id="e33d0-134">Následující příklad kódu ukazuje, jak používat <xref:System.ServiceModel.FaultContractAttribute> atribut určíte, že `Divide` operace může vrátit chybu protokolu SOAP typu `MathFault`.</span><span class="sxs-lookup"><span data-stu-id="e33d0-134">The following code example shows how to use the <xref:System.ServiceModel.FaultContractAttribute> attribute to specify that the `Divide` operation can return a SOAP fault of type `MathFault`.</span></span> <span data-ttu-id="e33d0-135">Jiné na základě matematické operace nyní můžete také určit, že budou vracet `MathFault`.</span><span class="sxs-lookup"><span data-stu-id="e33d0-135">Other math-based operations can now also specify that they can return a `MathFault`.</span></span>  
  
 [!code-csharp[Faults#1](../../../samples/snippets/csharp/VS_Snippets_CFX/faults/cs/service.cs#1)]
 [!code-vb[Faults#1](../../../samples/snippets/visualbasic/VS_Snippets_CFX/faults/vb/service.vb#1)]  
  
 <span data-ttu-id="e33d0-136">Operace můžete určit, že vrací více než jeden vlastní chyby označením tuto operaci s více než jeden <xref:System.ServiceModel.FaultContractAttribute> atribut.</span><span class="sxs-lookup"><span data-stu-id="e33d0-136">An operation can specify that it returns more than one custom fault by marking that operation with more than one <xref:System.ServiceModel.FaultContractAttribute> attribute.</span></span>  
  
 <span data-ttu-id="e33d0-137">Na další krok, abyste implementaci kontraktu chyby v operaci implementace, je popsaný v tématu [odesílání a přijímání chyb](../../../docs/framework/wcf/sending-and-receiving-faults.md).</span><span class="sxs-lookup"><span data-stu-id="e33d0-137">The next step, to implement the fault contract in your operation implementation, is described in the topic [Sending and Receiving Faults](../../../docs/framework/wcf/sending-and-receiving-faults.md).</span></span>  
  
#### <a name="soap-wsdl-and-interoperability-considerations"></a><span data-ttu-id="e33d0-138">SOAP, WSDL a aspekty Interoperability</span><span class="sxs-lookup"><span data-stu-id="e33d0-138">SOAP, WSDL, and Interoperability Considerations</span></span>  
 <span data-ttu-id="e33d0-139">V některých případech zejména při interoperabilitě se službou jiné platformy, může být důležité pro řízení způsobu, jakým se zobrazí chybu do protokolu SOAP zprávy nebo způsob, jak je popsáno v metadatech WSDL.</span><span class="sxs-lookup"><span data-stu-id="e33d0-139">In some circumstances, especially when interoperating with other platforms, it may be important to control the way a fault appears in a SOAP message or the way it is described in the WSDL metadata.</span></span>  
  
 <span data-ttu-id="e33d0-140"><xref:System.ServiceModel.FaultContractAttribute> Atribut má <xref:System.ServiceModel.FaultContractAttribute.Name%2A> vlastnost, která umožňuje řízení název WSDL selhání element, který se generuje ve metadata pro tuto chybu.</span><span class="sxs-lookup"><span data-stu-id="e33d0-140">The <xref:System.ServiceModel.FaultContractAttribute> attribute has a <xref:System.ServiceModel.FaultContractAttribute.Name%2A> property that allows control of the WSDL fault element name that is generated in the metadata for that fault.</span></span>  
  
 <span data-ttu-id="e33d0-141">Podle protokolu SOAP standard, může mít chybu `Action`, `Code`a `Reason`.</span><span class="sxs-lookup"><span data-stu-id="e33d0-141">According to the SOAP standard, a fault can have an `Action`, a `Code`, and a `Reason`.</span></span> <span data-ttu-id="e33d0-142">`Action` Řídí <xref:System.ServiceModel.FaultContractAttribute.Action%2A> vlastnost.</span><span class="sxs-lookup"><span data-stu-id="e33d0-142">The `Action` is controlled by the <xref:System.ServiceModel.FaultContractAttribute.Action%2A> property.</span></span> <span data-ttu-id="e33d0-143"><xref:System.ServiceModel.FaultException.Code%2A> Vlastnost a <xref:System.ServiceModel.FaultException.Reason%2A> vlastnost jsou obě vlastnosti <xref:System.ServiceModel.FaultException?displayProperty=nameWithType> třída, která je nadřazená třída obecná <xref:System.ServiceModel.FaultException%601?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="e33d0-143">The <xref:System.ServiceModel.FaultException.Code%2A> property and <xref:System.ServiceModel.FaultException.Reason%2A> property are both properties of the <xref:System.ServiceModel.FaultException?displayProperty=nameWithType> class, which is the parent class of the generic <xref:System.ServiceModel.FaultException%601?displayProperty=nameWithType>.</span></span> <span data-ttu-id="e33d0-144">`Code` Zahrnuje vlastnost <xref:System.ServiceModel.FaultCode.SubCode%2A> člen.</span><span class="sxs-lookup"><span data-stu-id="e33d0-144">The `Code` property includes a <xref:System.ServiceModel.FaultCode.SubCode%2A> member.</span></span>  
  
 <span data-ttu-id="e33d0-145">Při přístupu k jiné services generujících chyb, existují určitá omezení.</span><span class="sxs-lookup"><span data-stu-id="e33d0-145">When accessing non-services that generate faults, certain limitations exist.</span></span> [!INCLUDE[indigo2](../../../includes/indigo2-md.md)]<span data-ttu-id="e33d0-146">podporuje pouze chyb s typy podrobností popisující schéma a které jsou kompatibilní s kontrakty dat.</span><span class="sxs-lookup"><span data-stu-id="e33d0-146"> supports only faults with detail types that the schema describes and that are compatible with data contracts.</span></span> <span data-ttu-id="e33d0-147">Například jako uvedených výše [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] nepodporuje chyb, které se používají atributy XML v jejich podrobnosti typy nebo chyb s více než jeden element nejvyšší úrovně v sekci podrobností.</span><span class="sxs-lookup"><span data-stu-id="e33d0-147">For example, as mentioned above, [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] does not support faults that use XML attributes in their detail types, or faults with more than one top-level element in the detail section.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="e33d0-148">Viz také</span><span class="sxs-lookup"><span data-stu-id="e33d0-148">See Also</span></span>  
 <xref:System.ServiceModel.FaultContractAttribute>  
 <xref:System.Runtime.Serialization.DataContractAttribute>  
 <xref:System.Runtime.Serialization.DataMemberAttribute>  
 [<span data-ttu-id="e33d0-149">Určování a zpracování chyb v kontraktech a službách</span><span class="sxs-lookup"><span data-stu-id="e33d0-149">Specifying and Handling Faults in Contracts and Services</span></span>](../../../docs/framework/wcf/specifying-and-handling-faults-in-contracts-and-services.md)  
 [<span data-ttu-id="e33d0-150">Chyby odesílání a přijímání</span><span class="sxs-lookup"><span data-stu-id="e33d0-150">Sending and Receiving Faults</span></span>](../../../docs/framework/wcf/sending-and-receiving-faults.md)  
 [<span data-ttu-id="e33d0-151">Postupy: deklarace chyb v kontraktech služby</span><span class="sxs-lookup"><span data-stu-id="e33d0-151">How to: Declare Faults in Service Contracts</span></span>](../../../docs/framework/wcf/how-to-declare-faults-in-service-contracts.md)  
 [<span data-ttu-id="e33d0-152">Princip úrovně ochrany</span><span class="sxs-lookup"><span data-stu-id="e33d0-152">Understanding Protection Level</span></span>](../../../docs/framework/wcf/understanding-protection-level.md)  
 [<span data-ttu-id="e33d0-153">Postupy: nastavení vlastnosti ProtectionLevel</span><span class="sxs-lookup"><span data-stu-id="e33d0-153">How to: Set the ProtectionLevel Property</span></span>](../../../docs/framework/wcf/how-to-set-the-protectionlevel-property.md)  
 [<span data-ttu-id="e33d0-154">Určování přenosu dat v kontraktech služby</span><span class="sxs-lookup"><span data-stu-id="e33d0-154">Specifying Data Transfer in Service Contracts</span></span>](../../../docs/framework/wcf/feature-details/specifying-data-transfer-in-service-contracts.md)
