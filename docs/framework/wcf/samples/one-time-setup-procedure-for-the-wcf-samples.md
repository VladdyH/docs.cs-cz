---
title: Jednorázový postup nastavení pro ukázky Windows Communication Foundation
ms.date: 03/30/2017
ms.assetid: a5848ffd-3eb5-432d-812e-bd948ccb6bca
ms.openlocfilehash: e3bf4d70217a8231fe4ddc5b9a15afdfe8f0522e
ms.sourcegitcommit: 3d5d33f384eeba41b2dff79d096f47ccc8d8f03d
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 05/04/2018
ms.locfileid: "33506898"
---
# <a name="one-time-setup-procedure-for-the-windows-communication-foundation-samples"></a><span data-ttu-id="24336-102">Jednorázový postup nastavení pro ukázky Windows Communication Foundation</span><span class="sxs-lookup"><span data-stu-id="24336-102">One-Time Setup Procedure for the Windows Communication Foundation Samples</span></span>
<span data-ttu-id="24336-103">Většina ukázek Windows Communication Foundation (WCF) jsou hostované v Internetové informační služby (IIS) a spustit z běžných virtuální adresáře.</span><span class="sxs-lookup"><span data-stu-id="24336-103">Most of the Windows Communication Foundation (WCF) samples are hosted in Internet Information Services (IIS) and run from a common virtual directory.</span></span> <span data-ttu-id="24336-104">Tento postup jednorázové instalační program vytvoří složku na disku; také přidá virtuální adresář pro službu IIS s názvem **ServiceModelSamples**.</span><span class="sxs-lookup"><span data-stu-id="24336-104">This one-time setup procedure creates a folder on the disk; it also adds a virtual directory to IIS named **ServiceModelSamples**.</span></span>  
  
 <span data-ttu-id="24336-105">**ServiceModelSamples** virtuální adresář se používá pro vytváření a spouštění všechny ukázky, které používají služby hostované službou IIS.</span><span class="sxs-lookup"><span data-stu-id="24336-105">The **ServiceModelSamples** virtual directory is used for building and running all samples that use an IIS-hosted service.</span></span> <span data-ttu-id="24336-106">Toto je pouze virtuálního adresáře, který se vyžaduje ke spuštění ukázky.</span><span class="sxs-lookup"><span data-stu-id="24336-106">This is the only virtual directory that is required to run the samples.</span></span> <span data-ttu-id="24336-107">Vytváření ukázku nahradí všechny dříve nasazené služby na tento virtuální adresář; pouze nedávno integrovaný Ukázka bude nasazen a dostupný v tento virtuální adresář.</span><span class="sxs-lookup"><span data-stu-id="24336-107">Building a sample will replace any previously deployed service at this virtual directory; only the most recently built sample will be deployed and available in this virtual directory.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="24336-108">Je nutné spustit všechny příkazy pod účtem místního správce.</span><span class="sxs-lookup"><span data-stu-id="24336-108">You must run all commands under a local administrator account.</span></span> <span data-ttu-id="24336-109">Pokud používáte systém Windows 7, [!INCLUDE[windowsver](../../../../includes/windowsver-md.md)], nebo Windows Server 2008 R2, je nutné spustit také příkazovém řádku se zvýšenými oprávněními.</span><span class="sxs-lookup"><span data-stu-id="24336-109">If you are using Windows 7, [!INCLUDE[windowsver](../../../../includes/windowsver-md.md)], or Windows Server 2008 R2, you must also run the command prompt with elevated privileges.</span></span> <span data-ttu-id="24336-110">Uděláte to tak, klikněte pravým tlačítkem na ikonu Příkazový řádek a pak klikněte na tlačítko **spustit jako správce**.</span><span class="sxs-lookup"><span data-stu-id="24336-110">To do so, right-click the command prompt icon, and then click **Run as administrator**.</span></span> <span data-ttu-id="24336-111">Všechny příkazy v tomto tématu se musí spustit v příkazovém řádku, který má nastavení správnou cestu.</span><span class="sxs-lookup"><span data-stu-id="24336-111">All commands in this topic must be run in a command prompt that has the appropriate path settings.</span></span>  <span data-ttu-id="24336-112">Nejjednodušší způsob, jak toho docílit, je pomocí příkazového řádku Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="24336-112">The easiest way to ensure this is by using the Visual Studio Command Prompt.</span></span> <span data-ttu-id="24336-113">Otevřete tuto výzvu klikněte na **spustit**, vyberte **všechny programy**, přejděte dolů k položce **Visual Studio 2010**, vyberte **nástroje sady Visual Studio**, Klikněte pravým tlačítkem na **Visual Studio – příkazový řádek (2010)** a potom klikněte na **spustit jako správce**.</span><span class="sxs-lookup"><span data-stu-id="24336-113">To open this prompt, click **Start**, select **All Programs**, scroll down to **Visual Studio 2010**, select **Visual Studio Tools**, right-click **Visual Studio Command Prompt (2010)**, and then click **Run as administrator**.</span></span> <span data-ttu-id="24336-114">Pokud nemáte nainstalované v edicích sady Visual Studio Express, tento příkaz není k dispozici a budete muset přidat "C:\Windows\Microsoft.Net\Framework\v4.0" do systémové cesty.</span><span class="sxs-lookup"><span data-stu-id="24336-114">If you have one of the Visual Studio Express editions installed, this command prompt is not available, and you will have to add "C:\Windows\Microsoft.Net\Framework\v4.0" to the system path.</span></span>  
  
### <a name="one-time-setup-procedure-for-wcf-samples"></a><span data-ttu-id="24336-115">Jednorázový postup nastavení pro ukázky WCF</span><span class="sxs-lookup"><span data-stu-id="24336-115">One-time setup procedure for WCF samples</span></span>  
  
1.  <span data-ttu-id="24336-116">Ujistěte se, že [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] je nastavený.</span><span class="sxs-lookup"><span data-stu-id="24336-116">Ensure that [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] is set up.</span></span> <span data-ttu-id="24336-117">Další informace o tom, jak nastavit [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)], najdete v části [Internetu informace o pokyny k hostování služby](../../../../docs/framework/wcf/samples/internet-information-service-hosting-instructions.md).</span><span class="sxs-lookup"><span data-stu-id="24336-117">For more information about how to set up [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)], see [Internet Information Service Hosting Instructions](../../../../docs/framework/wcf/samples/internet-information-service-hosting-instructions.md).</span></span>  
  
2.  <span data-ttu-id="24336-118">Ujistěte se, že [!INCLUDE[netfx40_long](../../../../includes/netfx40-long-md.md)] je nainstalovaná.</span><span class="sxs-lookup"><span data-stu-id="24336-118">Ensure that [!INCLUDE[netfx40_long](../../../../includes/netfx40-long-md.md)] is installed.</span></span> <span data-ttu-id="24336-119">Hledání následující adresář pro v4.0 (nebo novější): **\Windows\Microsoft.NET\Framework**</span><span class="sxs-lookup"><span data-stu-id="24336-119">Search the following directory for v4.0 (or later): **\Windows\Microsoft.NET\Framework**</span></span>  
  
3.  <span data-ttu-id="24336-120">Pokud [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)] není nainstalovaná, a operačního systému není Windows Server 2008 SP2 nebo novější, nainstalujte [251798 opravu Hotfix](http://go.microsoft.com/fwlink/?LinkId=184693).</span><span class="sxs-lookup"><span data-stu-id="24336-120">If [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)] is not installed, and your operating system is not Windows Server 2008 SP2 or later, install [Hotfix 251798](http://go.microsoft.com/fwlink/?LinkId=184693).</span></span>  
  
4.  <span data-ttu-id="24336-121">Spusťte následující příkazy.</span><span class="sxs-lookup"><span data-stu-id="24336-121">Run the following commands.</span></span> <span data-ttu-id="24336-122">Další informace o proč musíte spustit tyto příkazy najdete v tématu [IIS hostované služby nezdaří](http://msdn.microsoft.com/library/ee5499fc-1b10-4cda-a9b1-13dba70f05f8).</span><span class="sxs-lookup"><span data-stu-id="24336-122">For more information about why these commands must be run, see [IIS Hosted Service Fails](http://msdn.microsoft.com/library/ee5499fc-1b10-4cda-a9b1-13dba70f05f8).</span></span>  
  
    > [!WARNING]
    >  <span data-ttu-id="24336-123">Pokud se znovu nainstaluje službu IIS, následující příkazy bude muset znovu spustit.</span><span class="sxs-lookup"><span data-stu-id="24336-123">If IIS is reinstalled, the following commands will need to be run again.</span></span>  
  
    ```  
    "%WINDIR%\Microsoft.Net\Framework\v4.0.30319\aspnet_regiis" –i –enable  
    "%WINDIR%\Microsoft.Net\Framework\v4.0.30319\ServiceModelReg.exe" -r  
    ```  
  
    > [!WARNING]
    >  <span data-ttu-id="24336-124">Spuštěním příkazu `aspnet_regiis –i –enable` bude fond aplikací výchozí spuštění pomocí [!INCLUDE[netfx40_short](../../../../includes/netfx40-short-md.md)], který může vytvořit problémů s nekompatibilitou pro jiné aplikace na stejném počítači.</span><span class="sxs-lookup"><span data-stu-id="24336-124">Running the command `aspnet_regiis –i –enable` will make the Default App Pool run using [!INCLUDE[netfx40_short](../../../../includes/netfx40-short-md.md)], which may produce incompatibility issues for other applications on the same computer.</span></span>  
  
5.  <span data-ttu-id="24336-125">Postupujte podle [pokyny k bráně Firewall](../../../../docs/framework/wcf/samples/firewall-instructions.md) pro povolení porty používané při ukázky.</span><span class="sxs-lookup"><span data-stu-id="24336-125">Follow the [Firewall Instructions](../../../../docs/framework/wcf/samples/firewall-instructions.md) for enabling the ports used by the samples.</span></span>  
  
6.  <span data-ttu-id="24336-126">Zkontrolujte následující výchozí adresář: \<InstallDrive >:**\WF_WCF_Samples**.</span><span class="sxs-lookup"><span data-stu-id="24336-126">Check for the following default directory: \<InstallDrive>:**\WF_WCF_Samples**.</span></span> <span data-ttu-id="24336-127">Pokud již byly nainstalovány ukázky, toto je výchozí adresář.</span><span class="sxs-lookup"><span data-stu-id="24336-127">If the samples were previously installed, this is the default directory.</span></span>  
  
7.  <span data-ttu-id="24336-128">Pokud nejsou nainstalovány ukázky, nainstalujte je z umístění pro stažení ukázky [Visual C#](http://go.microsoft.com/fwlink/?LinkId=190939) nebo [jazyka Visual Basic](http://go.microsoft.com/fwlink/?LinkID=193373).</span><span class="sxs-lookup"><span data-stu-id="24336-128">If the samples are not installed, install them from the samples download location for [Visual C#](http://go.microsoft.com/fwlink/?LinkId=190939) or [Visual Basic](http://go.microsoft.com/fwlink/?LinkID=193373).</span></span>  
  
8.  <span data-ttu-id="24336-129">Po instalaci ukázky, přejděte na: \<InstallDrive >:**\WF_WCF_Samples\WCF\Setup\\**</span><span class="sxs-lookup"><span data-stu-id="24336-129">After installing the samples, go to : \<InstallDrive>:**\WF_WCF_Samples\WCF\Setup\\**</span></span>  
  
9. <span data-ttu-id="24336-130">Spustit **Setupvroot.bat** dávkového souboru.</span><span class="sxs-lookup"><span data-stu-id="24336-130">Run the **Setupvroot.bat** batch file.</span></span> <span data-ttu-id="24336-131">Jsou prováděny následovně:</span><span class="sxs-lookup"><span data-stu-id="24336-131">The following steps are performed:</span></span>  
  
    -   <span data-ttu-id="24336-132">Virtuální adresář vytvořen ve službě IIS s názvem ServiceModelSamples.</span><span class="sxs-lookup"><span data-stu-id="24336-132">A virtual directory is created in IIS named ServiceModelSamples.</span></span>  
  
    -   <span data-ttu-id="24336-133">Pojmenované %SystemDrive%\Inetpub\wwwroot\ServiceModelSamples a % SystemDrive%\Inetpub\wwwroot\ServiceModelSamples\bin jsou vytvořeny nové adresáře disku.</span><span class="sxs-lookup"><span data-stu-id="24336-133">New disk directories are created named %SystemDrive%\Inetpub\wwwroot\ServiceModelSamples and %SystemDrive%\Inetpub\wwwroot\ServiceModelSamples\bin.</span></span>  
  
     <span data-ttu-id="24336-134">Pokud chcete nastavit tyto adresáře ručně, najdete v článku [pokyny k instalaci virtuálního adresáře](../../../../docs/framework/wcf/samples/virtual-directory-setup-instructions.md).</span><span class="sxs-lookup"><span data-stu-id="24336-134">If you prefer to set up these directories manually, see the [Virtual Directory Setup Instructions](../../../../docs/framework/wcf/samples/virtual-directory-setup-instructions.md).</span></span> <span data-ttu-id="24336-135">Chcete-li vraťte zpátky všechny změny provést v tomto kroku, spusťte cleanupvroot.bat po pomocí ukázky.</span><span class="sxs-lookup"><span data-stu-id="24336-135">To revert all changes done in this step, run cleanupvroot.bat after you finish using the samples.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="24336-136">Tento postup je třeba provést pouze jednou v počítači, pokud cleanupvroot.bat běží.</span><span class="sxs-lookup"><span data-stu-id="24336-136">This procedure must be performed only once on a computer, unless cleanupvroot.bat is run.</span></span>  
  
10. <span data-ttu-id="24336-137">Musí udělit oprávnění k úpravám pro %SystemDrive%\inetpub\wwwroot k účtu, pod kterým jsou vytváření ukázky a uživatel síťové služby.</span><span class="sxs-lookup"><span data-stu-id="24336-137">You must grant permission to modify for %SystemDrive%\inetpub\wwwroot to the account under which you are building the samples and the Network Service user.</span></span> <span data-ttu-id="24336-138">Při vytváření, některé webové hostované ukázky může pokus o zkopírování kompilované binární soubory do výše uvedených umístění, a pokud jste nenastavili příslušná oprávnění, se build rozbije.</span><span class="sxs-lookup"><span data-stu-id="24336-138">While building, some Web-hosted samples might attempt to copy the compiled binaries to the previously mentioned location, and if you have not set the appropriate permissions, the build will break.</span></span> <span data-ttu-id="24336-139">Alternativně můžete ponechat oprávnění, jak jsou a spustit příkazový řádek SDK nebo příkazového řádku Visual Studia (2012) jako správce, nebo vytvořit ukázky [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)]také spusťte jako správce.</span><span class="sxs-lookup"><span data-stu-id="24336-139">Alternatively, you can leave the permissions as they are and run the SDK command prompt or Visual Studio Command Prompt (2012) as Administrator, or build the samples in [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)], also run as Administrator.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="24336-140">Pokud není tento krok dokončen, všechny vzorky hostované službou IIS selže při sestavování.</span><span class="sxs-lookup"><span data-stu-id="24336-140">If this step is not completed, all IIS-hosted samples will fail while building.</span></span> <span data-ttu-id="24336-141">Zajistěte správné nastavení oprávnění nebo spustit příkazový řádek sady Visual Studio (2012) i SDK – příkazový řádek jako správce.</span><span class="sxs-lookup"><span data-stu-id="24336-141">Ensure that you set the permissions correctly, or run both the SDK command prompt and Visual Studio Command Prompt (2012) as Administrator.</span></span>  
  
11. <span data-ttu-id="24336-142">Vytvořte adresář C:\logs v počítači. Některé ukázky může být očekávána ho.</span><span class="sxs-lookup"><span data-stu-id="24336-142">Create a C:\logs directory on the computer; some samples might be expecting it.</span></span> <span data-ttu-id="24336-143">Ujistěte se, že odpovídající účet má oprávnění zápisu udělena do této složky.</span><span class="sxs-lookup"><span data-stu-id="24336-143">Make sure that the appropriate account has write access granted to this folder.</span></span> <span data-ttu-id="24336-144">Pro systém Windows 7 [!INCLUDE[wv](../../../../includes/wv-md.md)], a Windows Server 2008 R2, tento účet je **síťové služby**.</span><span class="sxs-lookup"><span data-stu-id="24336-144">For Windows 7, [!INCLUDE[wv](../../../../includes/wv-md.md)], and Windows Server 2008 R2, this account is **Network Service**.</span></span> <span data-ttu-id="24336-145">Pro [!INCLUDE[lserver](../../../../includes/lserver-md.md)], je účet NT Authority\Network Service.</span><span class="sxs-lookup"><span data-stu-id="24336-145">For  [!INCLUDE[lserver](../../../../includes/lserver-md.md)], the account is NT Authority\Network Service.</span></span> <span data-ttu-id="24336-146">Pro [!INCLUDE[wxp](../../../../includes/wxp-md.md)] a [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)], účet je ASPNET.</span><span class="sxs-lookup"><span data-stu-id="24336-146">For [!INCLUDE[wxp](../../../../includes/wxp-md.md)] and [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)], the account is ASPNET.</span></span>  
  
12. <span data-ttu-id="24336-147">Spusťte soubor Setupcerttool.bat.</span><span class="sxs-lookup"><span data-stu-id="24336-147">Run the Setupcerttool.bat file.</span></span> <span data-ttu-id="24336-148">Tento soubor je umístěný v \<InstallPath > \WF_WCF_Samples\WCF\Setup\ složky.</span><span class="sxs-lookup"><span data-stu-id="24336-148">This file is located in the  \<InstallPath>\WF_WCF_Samples\WCF\Setup\  folder.</span></span>  <span data-ttu-id="24336-149">Tento skript provede následující úlohy:</span><span class="sxs-lookup"><span data-stu-id="24336-149">This script will perform the following tasks:</span></span>  
  
    -   <span data-ttu-id="24336-150">Sestavení nástroj FindPrivateKey.</span><span class="sxs-lookup"><span data-stu-id="24336-150">Build the FindPrivateKey tool.</span></span>  
  
    -   <span data-ttu-id="24336-151">Vytvořte adresář s názvem % ProgramFiles%\ServiceModelSampleTools.</span><span class="sxs-lookup"><span data-stu-id="24336-151">Create a directory called %ProgramFiles%\ServiceModelSampleTools.</span></span>  
  
    -   <span data-ttu-id="24336-152">Zkopírujte nový nástroj FindPrivateKey do tohoto adresáře.</span><span class="sxs-lookup"><span data-stu-id="24336-152">Copy the new FindPrivateKey tool to this directory.</span></span>  
  
     <span data-ttu-id="24336-153">Tento nástroj je požadován vzorků, které používají certifikáty a jsou hostované ve službě IIS.</span><span class="sxs-lookup"><span data-stu-id="24336-153">This tool is required by samples that use certificates and are hosted in IIS.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="24336-154">Z bezpečnostních důvodů nezapomeňte odebrat definici virtuální adresář a oprávnění udělená ve výše uvedené kroky instalace spuštěním dávkový soubor s názvem Cleanupvroot.bat po skončení s ukázky.</span><span class="sxs-lookup"><span data-stu-id="24336-154">For security purposes, remember to remove the virtual directory definition and permissions granted in the setup steps above by running the batch file named Cleanupvroot.bat after you are finished with the samples.</span></span>  
  
13. <span data-ttu-id="24336-155">Ukázky, samoobslužných hostovaných (není hostovaný ve službě IIS) vyžadují oprávnění k registraci adresy protokolu HTTP na počítači pro naslouchání.</span><span class="sxs-lookup"><span data-stu-id="24336-155">Samples that are self-hosted (not hosted in IIS) require permission to register HTTP addresses on the computer for listening.</span></span> <span data-ttu-id="24336-156">Oprávnění pro rezervaci oboru názvů HTTP pochází z uživatelský účet použitý ke spuštění ukázky.</span><span class="sxs-lookup"><span data-stu-id="24336-156">The permission for an HTTP namespace reservation comes from the user account used to run the sample.</span></span> <span data-ttu-id="24336-157">Ve výchozím nastavení mají účty správců oprávnění k registraci žádné adresy protokolu HTTP.</span><span class="sxs-lookup"><span data-stu-id="24336-157">By default, administrator accounts have the permission to register any HTTP address.</span></span> <span data-ttu-id="24336-158">Účty správců jiné musí udělit oprávnění pro obory názvů HTTP používaný ukázky.</span><span class="sxs-lookup"><span data-stu-id="24336-158">Non-administrator accounts must be granted permission for the HTTP namespaces used by the samples.</span></span> <span data-ttu-id="24336-159">Další informace o tom, jak nakonfigurovat vyhrazení oboru názvů najdete v tématu [konfigurace HTTP a HTTPS](../../../../docs/framework/wcf/feature-details/configuring-http-and-https.md).</span><span class="sxs-lookup"><span data-stu-id="24336-159">For more information about how to configure namespace reservations, see [Configuring HTTP and HTTPS](../../../../docs/framework/wcf/feature-details/configuring-http-and-https.md).</span></span>  
  
14. <span data-ttu-id="24336-160">Některé ukázky vyžadují služby Řízení front zpráv.</span><span class="sxs-lookup"><span data-stu-id="24336-160">Some samples require Message Queuing.</span></span> <span data-ttu-id="24336-161">V tématu [instalaci řízení front zpráv (MSMQ)](../../../../docs/framework/wcf/samples/installing-message-queuing-msmq.md) pokyny k instalaci.</span><span class="sxs-lookup"><span data-stu-id="24336-161">See [Installing Message Queuing (MSMQ)](../../../../docs/framework/wcf/samples/installing-message-queuing-msmq.md) for installation instructions.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="24336-162">Zajistěte spuštění služby MSMQ, před spuštěním jakékoli vzorků, které vyžadují služby Řízení front zpráv.</span><span class="sxs-lookup"><span data-stu-id="24336-162">Ensure that you start the MSMQ service before you run any samples that require Message Queuing.</span></span>  
  
15. <span data-ttu-id="24336-163">Některé ukázky vyžadují certifikáty.</span><span class="sxs-lookup"><span data-stu-id="24336-163">Some samples require certificates.</span></span> <span data-ttu-id="24336-164">V tématu [Internetová informační služba (IIS) pokyny k instalaci certifikátu serveru](../../../../docs/framework/wcf/samples/iis-server-certificate-installation-instructions.md).</span><span class="sxs-lookup"><span data-stu-id="24336-164">See [Internet Information Services (IIS) Server Certificate Installation Instructions](../../../../docs/framework/wcf/samples/iis-server-certificate-installation-instructions.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="24336-165">Viz také</span><span class="sxs-lookup"><span data-stu-id="24336-165">See Also</span></span>
