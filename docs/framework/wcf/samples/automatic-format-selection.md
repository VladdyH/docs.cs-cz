---
title: Automatický výběr formátu
ms.date: 03/30/2017
ms.assetid: dab51e56-8517-4a6a-bb54-b55b15ab37bb
ms.openlocfilehash: 8c26253bee069bf9bbc009ea219e6c12cab034ef
ms.sourcegitcommit: 15109844229ade1c6449f48f3834db1b26907824
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 05/07/2018
---
# <a name="automatic-format-selection"></a><span data-ttu-id="653b7-102">Automatický výběr formátu</span><span class="sxs-lookup"><span data-stu-id="653b7-102">Automatic Format Selection</span></span>
<span data-ttu-id="653b7-103">Tento příklad ukazuje, jak povolit automatický výběr formátu (XML nebo JSON) se zbytkem Windows Communication Foundation (WCF) programovací model, jakož i explicitně nastavení formátu v kód operace.</span><span class="sxs-lookup"><span data-stu-id="653b7-103">This sample demonstrates how to enable automatic format selection (XML or JSON) with the Windows Communication Foundation (WCF) REST programming model, as well as how to explicitly set the format in the operation code.</span></span>  
  
## <a name="sample-details"></a><span data-ttu-id="653b7-104">Ukázka podrobnosti</span><span class="sxs-lookup"><span data-stu-id="653b7-104">Sample Details</span></span>  
 <span data-ttu-id="653b7-105">Ukázkový soubor obsahuje službu společně s kód klienta, který slouží k žádosti o službu.</span><span class="sxs-lookup"><span data-stu-id="653b7-105">The sample consists of a service along with client code that makes requests to the service.</span></span> <span data-ttu-id="653b7-106">Služba podporuje jeden HTTP `GET` operace (`EchoWithGet`) a jeden HTTP `POST` operace (`EchoWithPost`).</span><span class="sxs-lookup"><span data-stu-id="653b7-106">The service supports a single HTTP `GET` operation (`EchoWithGet`) and a single HTTP `POST` operation (`EchoWithPost`).</span></span> <span data-ttu-id="653b7-107">Obě operace očekávat řetězec a pak se vraťte řetězec v odpovědi.</span><span class="sxs-lookup"><span data-stu-id="653b7-107">Both operations expect a string and then return the string in the response.</span></span> <span data-ttu-id="653b7-108">Pomocí `GET` operace, řetězec je zadaný parametr řetězce dotazu identifikátoru URI.</span><span class="sxs-lookup"><span data-stu-id="653b7-108">With the `GET` operation, the string is provided in a URI query-string parameter.</span></span> <span data-ttu-id="653b7-109">Pomocí `POST` operace, řetězec je k dispozici v textu požadavku na serializovanou ve formátu XML.</span><span class="sxs-lookup"><span data-stu-id="653b7-109">With the `POST` operation, the string is provided in the body of the request, serialized in XML.</span></span> <span data-ttu-id="653b7-110">Služba se bude moct vrátit odpovědi v XML nebo JSON, využívá nové automatický výběr formátu a imperativní formát výběru funkcí [!INCLUDE[netfx40_long](../../../../includes/netfx40-long-md.md)].</span><span class="sxs-lookup"><span data-stu-id="653b7-110">The service is able to return responses in either XML or JSON, utilizing the new automatic format selection and imperative format selection features in [!INCLUDE[netfx40_long](../../../../includes/netfx40-long-md.md)].</span></span>  
  
 <span data-ttu-id="653b7-111">V ukázce je povolen automatický výběr formátu pomocí souboru App.config.</span><span class="sxs-lookup"><span data-stu-id="653b7-111">In the sample, automatic format selection is enabled using the App.config file.</span></span> <span data-ttu-id="653b7-112">Na výchozí koncový bod webové HTTP `automaticFormatSelectionEnabled` atribut nebyla zadána hodnota `true`.</span><span class="sxs-lookup"><span data-stu-id="653b7-112">On the default Web HTTP endpoint, the `automaticFormatSelectionEnabled` attribute has been given a value of `true`.</span></span> <span data-ttu-id="653b7-113">S automatický výběr formátu povoleno vybere infrastruktury WCF nejvhodnější formát odpovědi (XML nebo JSON) zadané přijmout HTTP nebo Content-Type hlavičky žádosti.</span><span class="sxs-lookup"><span data-stu-id="653b7-113">With automatic format selection enabled, the WCF infrastructure selects the most appropriate response format (XML or JSON) given the HTTP Accept or Content-Type headers of the request.</span></span> <span data-ttu-id="653b7-114">Vývojář není potřeba zadat další kód nebo konfigurace než nastavení `automaticFormatSelectionEnabled` atribut `true` k použití této funkce.</span><span class="sxs-lookup"><span data-stu-id="653b7-114">The developer is not required to provide any additional code or configuration other than setting the `automaticFormatSelectionEnabled` attribute to `true` to use this new feature.</span></span> <span data-ttu-id="653b7-115">Kód klienta v souboru Program.cs požadavky se odešlou do obou `GET` a `POST` operace služby s hlavičku HTTP přijmout zadaný jako "application/xml" nebo "application/json" a služby v tom, že vrátí odpověď příslušné formát.</span><span class="sxs-lookup"><span data-stu-id="653b7-115">In the client code in Program.cs, requests are sent to both the `GET` and `POST` operations of the service with the HTTP Accept header specified as either "application/xml" or "application/json" and the service returns a response in that respective format.</span></span>  
  
 <span data-ttu-id="653b7-116">Také v `GET` operace, imperativní formát výběru se používá.</span><span class="sxs-lookup"><span data-stu-id="653b7-116">Also in the `GET` operation, imperative format selection is used.</span></span> <span data-ttu-id="653b7-117">`GET` Operace zjišťuje volitelný `format` parametr s řetězcem dotazu a pokud je k dispozici, nastaví formát odpovědi <xref:System.ServiceModel.Web.WebOperationContext.OutgoingResponse%2A> vlastnost.</span><span class="sxs-lookup"><span data-stu-id="653b7-117">The `GET` operation checks for an optional `format` query-string parameter and if present, sets the response format on the <xref:System.ServiceModel.Web.WebOperationContext.OutgoingResponse%2A> property.</span></span> <span data-ttu-id="653b7-118">Imperativní nastavení formát odpovědi tímto způsobem přepsání automatický výběr formátu provádí infrastruktury WCF.</span><span class="sxs-lookup"><span data-stu-id="653b7-118">Imperatively setting the response format in this way overrides the automatic format selection done by the WCF infrastructure.</span></span>  
  
 <span data-ttu-id="653b7-119">Ukázkový soubor obsahuje služba s vlastním hostováním a klienta, který běží v konzolové aplikaci.</span><span class="sxs-lookup"><span data-stu-id="653b7-119">The sample consists of a self-hosted service and a client that runs within a console application.</span></span> <span data-ttu-id="653b7-120">Konzolové aplikace běží, klient odešle žádosti o službu a zapisuje příslušné informace z odpovědi do okna konzoly.</span><span class="sxs-lookup"><span data-stu-id="653b7-120">As the console application runs, the client makes requests to the service and writes the pertinent information from the responses to the console window.</span></span>  
  
#### <a name="to-use-this-sample"></a><span data-ttu-id="653b7-121">Pro fungování této ukázky</span><span class="sxs-lookup"><span data-stu-id="653b7-121">To use this sample</span></span>  
  
1.  <span data-ttu-id="653b7-122">Otevřete řešení pro automatické vzorovou výběr formátu.</span><span class="sxs-lookup"><span data-stu-id="653b7-122">Open the solution for the Automatic Format Selection Sample.</span></span> <span data-ttu-id="653b7-123">Při spouštění [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)], musíte spustit jako správce pro vzorovou proběhl úspěšně.</span><span class="sxs-lookup"><span data-stu-id="653b7-123">When launching [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)], you must run as an administrator for the sample to execute successfully.</span></span> <span data-ttu-id="653b7-124">To můžete provést kliknutím pravým tlačítkem myši [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)] ikonu a vyberte **spustit jako správce** v místní nabídce.</span><span class="sxs-lookup"><span data-stu-id="653b7-124">Do this by right-clicking the [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)] icon and select **Run as Administrator** from the context menu.</span></span>  
  
2.  <span data-ttu-id="653b7-125">Stisknutím kombinace kláves CTRL + SHIFT + B sestavte řešení a potom stiskněte klávesu Ctrl + F5 a spusťte projekt konzolové aplikace AutomaticFormatSelection.</span><span class="sxs-lookup"><span data-stu-id="653b7-125">Press CTRL+SHIFT+B to build the solution and then press Ctrl+F5 to run the console application AutomaticFormatSelection project.</span></span> <span data-ttu-id="653b7-126">V okně konzoly se zobrazí a poskytuje identifikátor URI spuštěné služby a identifikátor URI HTML stránka pro spuštěnou službu nápovědy.</span><span class="sxs-lookup"><span data-stu-id="653b7-126">The console window appears and provides the URI of the running service and the URI of the HTML help page for the running service.</span></span>  
  
3.  <span data-ttu-id="653b7-127">Ukázka běží, klient odešle požadavky do služby a zapíše odpovědi do okna konzoly.</span><span class="sxs-lookup"><span data-stu-id="653b7-127">As the sample runs, the client sends requests to the service and writes the responses to the console window.</span></span> <span data-ttu-id="653b7-128">Všimněte si různých formátech odpovědí v XML a JSON.</span><span class="sxs-lookup"><span data-stu-id="653b7-128">Notice the different formats of the responses in XML and JSON.</span></span>  
  
4.  <span data-ttu-id="653b7-129">Stisknutím libovolné klávesy ukončit vzorku.</span><span class="sxs-lookup"><span data-stu-id="653b7-129">Press any key to terminate the sample.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="653b7-130">Ukázky může být již nainstalována na váš počítač.</span><span class="sxs-lookup"><span data-stu-id="653b7-130">The samples may already be installed on your machine.</span></span> <span data-ttu-id="653b7-131">Před pokračováním zkontrolovat na následující adresář (výchozí).</span><span class="sxs-lookup"><span data-stu-id="653b7-131">Check for the following (default) directory before continuing.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples`  
>   
>  <span data-ttu-id="653b7-132">Pokud tento adresář neexistuje, přejděte na [Windows Communication Foundation (WCF) a ukázky Windows Workflow Foundation (WF) pro rozhraní .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) ke stažení všechny Windows Communication Foundation (WCF) a [!INCLUDE[wf1](../../../../includes/wf1-md.md)] ukázky.</span><span class="sxs-lookup"><span data-stu-id="653b7-132">If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples.</span></span> <span data-ttu-id="653b7-133">Tato ukázka se nachází v následujícím adresáři.</span><span class="sxs-lookup"><span data-stu-id="653b7-133">This sample is located in the following directory.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples\WCF\Basic\Web\AutomaticFormatSelection`  
  
## <a name="see-also"></a><span data-ttu-id="653b7-134">Viz také</span><span class="sxs-lookup"><span data-stu-id="653b7-134">See Also</span></span>
