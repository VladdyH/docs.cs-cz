---
title: Automatický výběr formátu
ms.date: 03/30/2017
ms.assetid: dab51e56-8517-4a6a-bb54-b55b15ab37bb
ms.openlocfilehash: 4fd695195f5c7c13bc088248a6b3c12388328d37
ms.sourcegitcommit: 64f4baed249341e5bf64d1385bf48e3f2e1a0211
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 09/07/2018
ms.locfileid: "44084024"
---
# <a name="automatic-format-selection"></a><span data-ttu-id="0e8d0-102">Automatický výběr formátu</span><span class="sxs-lookup"><span data-stu-id="0e8d0-102">Automatic Format Selection</span></span>
<span data-ttu-id="0e8d0-103">Tento příklad ukazuje, jak povolit automatický výběr formátu (XML nebo JSON) pomocí služby Windows Communication Foundation (WCF) REST programovací model, jakož i jak explicitně nastavit formát v kódu operace.</span><span class="sxs-lookup"><span data-stu-id="0e8d0-103">This sample demonstrates how to enable automatic format selection (XML or JSON) with the Windows Communication Foundation (WCF) REST programming model, as well as how to explicitly set the format in the operation code.</span></span>  
  
## <a name="sample-details"></a><span data-ttu-id="0e8d0-104">Ukázka podrobnosti</span><span class="sxs-lookup"><span data-stu-id="0e8d0-104">Sample Details</span></span>  
 <span data-ttu-id="0e8d0-105">Ukázka se skládá z služby spolu s klientský kód, který se vytvářejí požadavky na službu.</span><span class="sxs-lookup"><span data-stu-id="0e8d0-105">The sample consists of a service along with client code that makes requests to the service.</span></span> <span data-ttu-id="0e8d0-106">Tato služba podporuje jeden HTTP `GET` operace (`EchoWithGet`) a jeden HTTP `POST` operace (`EchoWithPost`).</span><span class="sxs-lookup"><span data-stu-id="0e8d0-106">The service supports a single HTTP `GET` operation (`EchoWithGet`) and a single HTTP `POST` operation (`EchoWithPost`).</span></span> <span data-ttu-id="0e8d0-107">Operace očekávat řetězec a pak se vraťte řetězec v odpovědi.</span><span class="sxs-lookup"><span data-stu-id="0e8d0-107">Both operations expect a string and then return the string in the response.</span></span> <span data-ttu-id="0e8d0-108">S `GET` operace, řetězec je k dispozici v parametru řetězce dotazu URI.</span><span class="sxs-lookup"><span data-stu-id="0e8d0-108">With the `GET` operation, the string is provided in a URI query-string parameter.</span></span> <span data-ttu-id="0e8d0-109">S `POST` operace, řetězec je k dispozici v textu požadavku, serializovanou ve formátu XML.</span><span class="sxs-lookup"><span data-stu-id="0e8d0-109">With the `POST` operation, the string is provided in the body of the request, serialized in XML.</span></span> <span data-ttu-id="0e8d0-110">Služba se bude moct vrátit odpovědi v XML nebo JSON, využívající novou automatický výběr formátu a imperativního formát výběru funkcí v [!INCLUDE[netfx40_long](../../../../includes/netfx40-long-md.md)].</span><span class="sxs-lookup"><span data-stu-id="0e8d0-110">The service is able to return responses in either XML or JSON, utilizing the new automatic format selection and imperative format selection features in [!INCLUDE[netfx40_long](../../../../includes/netfx40-long-md.md)].</span></span>  
  
 <span data-ttu-id="0e8d0-111">V ukázce je povolen automatický výběr formátu pomocí souboru App.config.</span><span class="sxs-lookup"><span data-stu-id="0e8d0-111">In the sample, automatic format selection is enabled using the App.config file.</span></span> <span data-ttu-id="0e8d0-112">Na výchozí koncový bod webových služeb HTTP `automaticFormatSelectionEnabled` atribut nebyla zadána hodnota `true`.</span><span class="sxs-lookup"><span data-stu-id="0e8d0-112">On the default Web HTTP endpoint, the `automaticFormatSelectionEnabled` attribute has been given a value of `true`.</span></span> <span data-ttu-id="0e8d0-113">Automatický výběr formátu povolené infrastruktura WCF vybrány nejvhodnější formát odpovědi (XML nebo JSON) uvedené hlavičky HTTP přijmout nebo Content-Type žádosti.</span><span class="sxs-lookup"><span data-stu-id="0e8d0-113">With automatic format selection enabled, the WCF infrastructure selects the most appropriate response format (XML or JSON) given the HTTP Accept or Content-Type headers of the request.</span></span> <span data-ttu-id="0e8d0-114">Vývojář se musí provést žádné další kód nebo než nastavení konfigurace `automaticFormatSelectionEnabled` atribut `true` pro použití této nové funkce.</span><span class="sxs-lookup"><span data-stu-id="0e8d0-114">The developer is not required to provide any additional code or configuration other than setting the `automaticFormatSelectionEnabled` attribute to `true` to use this new feature.</span></span> <span data-ttu-id="0e8d0-115">V klientském kódu v souboru Program.cs, odešlou požadavky na obojí `GET` a `POST` operace služby s hlavičku HTTP přijmout zadaný jako "application/xml" nebo "application/json" a vrátí odpověď, která odpovídající formát.</span><span class="sxs-lookup"><span data-stu-id="0e8d0-115">In the client code in Program.cs, requests are sent to both the `GET` and `POST` operations of the service with the HTTP Accept header specified as either "application/xml" or "application/json" and the service returns a response in that respective format.</span></span>  
  
 <span data-ttu-id="0e8d0-116">Také v `GET` operace, imperativní formát výběru se používá.</span><span class="sxs-lookup"><span data-stu-id="0e8d0-116">Also in the `GET` operation, imperative format selection is used.</span></span> <span data-ttu-id="0e8d0-117">`GET` Operace zkontroluje volitelně `format` parametr s řetězcem dotazu a pokud jsou k dispozici, nastaví formát odpovědi na <xref:System.ServiceModel.Web.WebOperationContext.OutgoingResponse%2A> vlastnost.</span><span class="sxs-lookup"><span data-stu-id="0e8d0-117">The `GET` operation checks for an optional `format` query-string parameter and if present, sets the response format on the <xref:System.ServiceModel.Web.WebOperationContext.OutgoingResponse%2A> property.</span></span> <span data-ttu-id="0e8d0-118">Výběr automatického formátu provádí infrastruktura WCF imperativně nastavení formát odpovědi tímto způsobem přepíše.</span><span class="sxs-lookup"><span data-stu-id="0e8d0-118">Imperatively setting the response format in this way overrides the automatic format selection done by the WCF infrastructure.</span></span>  
  
 <span data-ttu-id="0e8d0-119">Ukázka se skládá z služba v místním prostředí a klienta, který běží v rámci konzolové aplikace.</span><span class="sxs-lookup"><span data-stu-id="0e8d0-119">The sample consists of a self-hosted service and a client that runs within a console application.</span></span> <span data-ttu-id="0e8d0-120">Konzolová aplikace běží, klient vytvářejí požadavky na službu a zapíše relevantní informace z odpovědi v okně konzoly.</span><span class="sxs-lookup"><span data-stu-id="0e8d0-120">As the console application runs, the client makes requests to the service and writes the pertinent information from the responses to the console window.</span></span>  
  
#### <a name="to-use-this-sample"></a><span data-ttu-id="0e8d0-121">Pro fungování této ukázky</span><span class="sxs-lookup"><span data-stu-id="0e8d0-121">To use this sample</span></span>  
  
1.  <span data-ttu-id="0e8d0-122">Otevřete řešení pro ukázku výběr automatického formátu.</span><span class="sxs-lookup"><span data-stu-id="0e8d0-122">Open the solution for the Automatic Format Selection Sample.</span></span> <span data-ttu-id="0e8d0-123">Při spuštění [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)], musíte spustit jako správce pro ukázku proběhl úspěšně.</span><span class="sxs-lookup"><span data-stu-id="0e8d0-123">When launching [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)], you must run as an administrator for the sample to execute successfully.</span></span> <span data-ttu-id="0e8d0-124">To můžete provést kliknutím pravým tlačítkem myši [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)] ikonu a vyberte **spustit jako správce** v místní nabídce.</span><span class="sxs-lookup"><span data-stu-id="0e8d0-124">Do this by right-clicking the [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)] icon and select **Run as Administrator** from the context menu.</span></span>  
  
2.  <span data-ttu-id="0e8d0-125">Stiskněte kombinaci kláves CTRL + SHIFT + B, sestavte řešení a pak stisknutím kombinace kláves Ctrl + F5 spusťte AutomaticFormatSelection projekt konzolové aplikace.</span><span class="sxs-lookup"><span data-stu-id="0e8d0-125">Press CTRL+SHIFT+B to build the solution and then press Ctrl+F5 to run the console application AutomaticFormatSelection project.</span></span> <span data-ttu-id="0e8d0-126">V okně konzoly se zobrazí a poskytuje URI spuštěnou službu a stránku pro spuštěnou službu identifikátoru URI HTML s nápovědou.</span><span class="sxs-lookup"><span data-stu-id="0e8d0-126">The console window appears and provides the URI of the running service and the URI of the HTML help page for the running service.</span></span>  
  
3.  <span data-ttu-id="0e8d0-127">Při spuštění ukázky, klient zasílá požadavky službě a zapíše odpovědi v okně konzoly.</span><span class="sxs-lookup"><span data-stu-id="0e8d0-127">As the sample runs, the client sends requests to the service and writes the responses to the console window.</span></span> <span data-ttu-id="0e8d0-128">Všimněte si různých formátech odpovědi v XML a JSON.</span><span class="sxs-lookup"><span data-stu-id="0e8d0-128">Notice the different formats of the responses in XML and JSON.</span></span>  
  
4.  <span data-ttu-id="0e8d0-129">Stisknutím libovolné klávesy ukončete vzorovou.</span><span class="sxs-lookup"><span data-stu-id="0e8d0-129">Press any key to terminate the sample.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="0e8d0-130">Vzorky mohou již být nainstalováno na svém počítači.</span><span class="sxs-lookup"><span data-stu-id="0e8d0-130">The samples may already be installed on your machine.</span></span> <span data-ttu-id="0e8d0-131">Před pokračováním zkontrolujte následující adresář (výchozí).</span><span class="sxs-lookup"><span data-stu-id="0e8d0-131">Check for the following (default) directory before continuing.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples`  
>   
>  <span data-ttu-id="0e8d0-132">Pokud tento adresář neexistuje, přejděte na [Windows Communication Foundation (WCF) a ukázky Windows Workflow Foundation (WF) pro rozhraní .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) stáhnout všechny Windows Communication Foundation (WCF) a [!INCLUDE[wf1](../../../../includes/wf1-md.md)] ukázky.</span><span class="sxs-lookup"><span data-stu-id="0e8d0-132">If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples.</span></span> <span data-ttu-id="0e8d0-133">Tato ukázka se nachází v následujícím adresáři.</span><span class="sxs-lookup"><span data-stu-id="0e8d0-133">This sample is located in the following directory.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples\WCF\Basic\Web\AutomaticFormatSelection`  
  
## <a name="see-also"></a><span data-ttu-id="0e8d0-134">Viz také</span><span class="sxs-lookup"><span data-stu-id="0e8d0-134">See Also</span></span>
