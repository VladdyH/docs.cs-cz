---
title: "Chyby odesílání a přijímání"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology:
- dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
dev_langs:
- csharp
- vb
helpviewer_keywords:
- handling faults [WCF], sending
ms.assetid: 7be6fb96-ce2a-450b-aebe-f932c6a4bc5d
caps.latest.revision: 
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.workload:
- dotnet
ms.openlocfilehash: 248202e07d3b74f5d71b40155ae8f617f7ed15ce
ms.sourcegitcommit: 16186c34a957fdd52e5db7294f291f7530ac9d24
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 12/22/2017
---
# <a name="sending-and-receiving-faults"></a><span data-ttu-id="b9ff4-102">Chyby odesílání a přijímání</span><span class="sxs-lookup"><span data-stu-id="b9ff4-102">Sending and Receiving Faults</span></span>
<span data-ttu-id="b9ff4-103">Chyb SOAP popisným podmínku ze služby pro klienta a v případě duplexní z klienta ke službě umožňuje vzájemnou spolupráci způsobem.</span><span class="sxs-lookup"><span data-stu-id="b9ff4-103">SOAP faults convey error condition information from a service to a client and in the duplex case from a client to a service in an interoperable way.</span></span> <span data-ttu-id="b9ff4-104">Obvykle služby definuje vlastní chyby obsahu a určuje, které operace vrátit.</span><span class="sxs-lookup"><span data-stu-id="b9ff4-104">Typically a service defines custom fault content and specifies which operations can return them.</span></span> <span data-ttu-id="b9ff4-105">(Další informace najdete v tématu [definiční a určení chyb](../../../docs/framework/wcf/defining-and-specifying-faults.md).) Toto téma popisuje, jak služba nebo duplexní klienta může poslat tyto chyby při odpovídající chybový stav a jak klienta nebo aplikace služby zpracovává tyto chyby.</span><span class="sxs-lookup"><span data-stu-id="b9ff4-105">(For more information, see [Defining and Specifying Faults](../../../docs/framework/wcf/defining-and-specifying-faults.md).) This topic discusses how a service or duplex client can send those faults when the corresponding error condition has occurred and how a client or service application handles these faults.</span></span> <span data-ttu-id="b9ff4-106">Přehled zpracování chyb v [!INCLUDE[indigo1](../../../includes/indigo1-md.md)] aplikace, najdete v části [zadání a zpracování chyb v kontraktech a službách](../../../docs/framework/wcf/specifying-and-handling-faults-in-contracts-and-services.md).</span><span class="sxs-lookup"><span data-stu-id="b9ff4-106">For an overview of error handling in [!INCLUDE[indigo1](../../../includes/indigo1-md.md)] applications, see [Specifying and Handling Faults in Contracts and Services](../../../docs/framework/wcf/specifying-and-handling-faults-in-contracts-and-services.md).</span></span>  
  
## <a name="sending-soap-faults"></a><span data-ttu-id="b9ff4-107">Odesílání chyb SOAP</span><span class="sxs-lookup"><span data-stu-id="b9ff4-107">Sending SOAP Faults</span></span>  
 <span data-ttu-id="b9ff4-108">Deklarovaný chyb SOAP jsou ty, ve kterých se operace <xref:System.ServiceModel.FaultContractAttribute?displayProperty=nameWithType> určující vlastního typu chybu protokolu SOAP.</span><span class="sxs-lookup"><span data-stu-id="b9ff4-108">Declared SOAP faults are those in which an operation has a <xref:System.ServiceModel.FaultContractAttribute?displayProperty=nameWithType> that specifies a custom SOAP fault type.</span></span> <span data-ttu-id="b9ff4-109">Nedeklarovaný chyb SOAP jsou ty, které nejsou uvedené ve smlouvě operace.</span><span class="sxs-lookup"><span data-stu-id="b9ff4-109">Undeclared SOAP faults are those that are not specified in the contract for an operation.</span></span>  
  
### <a name="sending-declared-faults"></a><span data-ttu-id="b9ff4-110">Odesílání deklarované chyb</span><span class="sxs-lookup"><span data-stu-id="b9ff4-110">Sending Declared Faults</span></span>  
 <span data-ttu-id="b9ff4-111">Pokud chcete odeslat deklarované chybu protokolu SOAP, zjistit chybový stav, pro které je vhodné chybu protokolu SOAP a throw novou <xref:System.ServiceModel.FaultException%601?displayProperty=nameWithType> kde parametr typu je vytvoření nového objektu s typem zadaným v <xref:System.ServiceModel.FaultContractAttribute> pro tuto operaci.</span><span class="sxs-lookup"><span data-stu-id="b9ff4-111">To send a declared SOAP fault, detect the error condition for which the SOAP fault is appropriate and throw a new <xref:System.ServiceModel.FaultException%601?displayProperty=nameWithType> where the type parameter is a new object of the type specified in the <xref:System.ServiceModel.FaultContractAttribute> for that operation.</span></span> <span data-ttu-id="b9ff4-112">Následující příklad kódu ukazuje použití <xref:System.ServiceModel.FaultContractAttribute> určíte, že `SampleMethod` operace může vrátit chybu protokolu SOAP s typem podrobností `GreetingFault`.</span><span class="sxs-lookup"><span data-stu-id="b9ff4-112">The following code example shows the use of <xref:System.ServiceModel.FaultContractAttribute> to specify that the `SampleMethod` operation can return a SOAP fault with the detail type of `GreetingFault`.</span></span>  
  
 [!code-csharp[FaultContractAttribute#4](../../../samples/snippets/csharp/VS_Snippets_CFX/faultcontractattribute/cs/services.cs#4)]
 [!code-vb[FaultContractAttribute#4](../../../samples/snippets/visualbasic/VS_Snippets_CFX/faultcontractattribute/vb/services.vb#4)]  
  
 <span data-ttu-id="b9ff4-113">Pro vyjádření `GreetingFault` informace o chybě klient zachytit příslušné chybový stav a vyvolat novou <xref:System.ServiceModel.FaultException%601?displayProperty=nameWithType> typu `GreetingFault` s novou `GreetingFault` objektu jako argument, jako v následujícím příkladu kódu.</span><span class="sxs-lookup"><span data-stu-id="b9ff4-113">To convey the `GreetingFault` error information to the client, catch the appropriate error condition and throw a new <xref:System.ServiceModel.FaultException%601?displayProperty=nameWithType> of type `GreetingFault` with a new `GreetingFault` object as the argument, as in the following code example.</span></span> <span data-ttu-id="b9ff4-114">Pokud je klient [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] klientská aplikace ho vyskytne to jako spravované výjimky, kde je typ <xref:System.ServiceModel.FaultException%601?displayProperty=nameWithType> typu `GreetingFault`.</span><span class="sxs-lookup"><span data-stu-id="b9ff4-114">If the client is an [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client application, it experiences this as a managed exception where the type is <xref:System.ServiceModel.FaultException%601?displayProperty=nameWithType> of type `GreetingFault`.</span></span>  
  
 [!code-csharp[FaultContractAttribute#5](../../../samples/snippets/csharp/VS_Snippets_CFX/faultcontractattribute/cs/services.cs#5)]
 [!code-vb[FaultContractAttribute#5](../../../samples/snippets/visualbasic/VS_Snippets_CFX/faultcontractattribute/vb/services.vb#5)]  
  
### <a name="sending-undeclared-faults"></a><span data-ttu-id="b9ff4-115">Odesílání chyb nebyla deklarována</span><span class="sxs-lookup"><span data-stu-id="b9ff4-115">Sending Undeclared Faults</span></span>  
 <span data-ttu-id="b9ff4-116">Odesílání nedeklarované chyb může být velmi užitečná rychle diagnostikovat a ladit problémy v [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] aplikace, ale jeho použití jako ladicí nástroj je omezená.</span><span class="sxs-lookup"><span data-stu-id="b9ff4-116">Sending undeclared faults can be very useful to quickly diagnose and debug problems in [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] applications, but its usefulness as a debugging tool is limited.</span></span> <span data-ttu-id="b9ff4-117">Obecně platí, když ho ladění je doporučeno používat <xref:System.ServiceModel.Description.ServiceDebugBehavior.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> vlastnost.</span><span class="sxs-lookup"><span data-stu-id="b9ff4-117">More generally, when debugging it is recommended that you use the <xref:System.ServiceModel.Description.ServiceDebugBehavior.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="b9ff4-118">Když tuto hodnotu nastavíte na hodnotu true, klienti prostředí takové chyby jako <xref:System.ServiceModel.FaultException%601> výjimky typu <xref:System.ServiceModel.ExceptionDetail>.</span><span class="sxs-lookup"><span data-stu-id="b9ff4-118">When you set this value to true, clients experience such faults as <xref:System.ServiceModel.FaultException%601> exceptions of type <xref:System.ServiceModel.ExceptionDetail>.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="b9ff4-119">Protože spravované výjimky mohou být informace o interní aplikace, nastavení <xref:System.ServiceModel.ServiceBehaviorAttribute.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> nebo <xref:System.ServiceModel.Description.ServiceDebugBehavior.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> k `true` můžete povolit [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] klientům získat informace o operaci výjimky interní služby, včetně osobní osobní a dalších citlivých informací.</span><span class="sxs-lookup"><span data-stu-id="b9ff4-119">Because managed exceptions can expose internal application information, setting <xref:System.ServiceModel.ServiceBehaviorAttribute.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> or <xref:System.ServiceModel.Description.ServiceDebugBehavior.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> to `true` can permit [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] clients to obtain information about internal service operation exceptions, including personally identifiable or other sensitive information.</span></span>  
>   
>  <span data-ttu-id="b9ff4-120">Proto nastavení <xref:System.ServiceModel.ServiceBehaviorAttribute.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> nebo <xref:System.ServiceModel.Description.ServiceDebugBehavior.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> k `true` doporučujeme použít pouze jako způsob dočasně ladění aplikace služby.</span><span class="sxs-lookup"><span data-stu-id="b9ff4-120">Therefore, setting <xref:System.ServiceModel.ServiceBehaviorAttribute.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> or <xref:System.ServiceModel.Description.ServiceDebugBehavior.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> to `true` is only recommended as a way of temporarily debugging a service application.</span></span> <span data-ttu-id="b9ff4-121">Kromě toho schématu WSDL pro metodu, která vrátí neošetřené se spravovanými výjimkami tímto způsobem neobsahuje kontrakt <xref:System.ServiceModel.FaultException%601> typu <xref:System.ServiceModel.ExceptionDetail>.</span><span class="sxs-lookup"><span data-stu-id="b9ff4-121">In addition, the WSDL for a method that returns unhandled managed exceptions in this way does not contain the contract for the <xref:System.ServiceModel.FaultException%601> of type <xref:System.ServiceModel.ExceptionDetail>.</span></span> <span data-ttu-id="b9ff4-122">Klienti měli očekávat možnost neznámé chybě protokolu SOAP (vrátí [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] klientů jako <xref:System.ServiceModel.FaultException?displayProperty=nameWithType> objekty) získat informace o ladění správně.</span><span class="sxs-lookup"><span data-stu-id="b9ff4-122">Clients must expect the possibility of an unknown SOAP fault (returned to [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] clients as <xref:System.ServiceModel.FaultException?displayProperty=nameWithType> objects) to obtain the debugging information properly.</span></span>  
  
 <span data-ttu-id="b9ff4-123">Pokud chcete odeslat nedeklarované chybu protokolu SOAP, throw <xref:System.ServiceModel.FaultException?displayProperty=nameWithType> objektu (tedy ne obecný typ <xref:System.ServiceModel.FaultException%601>) a předejte řetězec do konstruktoru.</span><span class="sxs-lookup"><span data-stu-id="b9ff4-123">To send an undeclared SOAP fault, throw a <xref:System.ServiceModel.FaultException?displayProperty=nameWithType> object (that is, not the generic type <xref:System.ServiceModel.FaultException%601>) and pass the string to the constructor.</span></span> <span data-ttu-id="b9ff4-124">To je vystaven [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] klientské aplikace jako vyvolané <xref:System.ServiceModel.FaultException?displayProperty=nameWithType> výjimky, kde řetězec je k dispozici při volání <xref:System.ServiceModel.FaultException%601.ToString%2A?displayProperty=nameWithType> metoda.</span><span class="sxs-lookup"><span data-stu-id="b9ff4-124">This is exposed to the [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client applications as a thrown <xref:System.ServiceModel.FaultException?displayProperty=nameWithType> exception where the string is available by calling the <xref:System.ServiceModel.FaultException%601.ToString%2A?displayProperty=nameWithType> method.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="b9ff4-125">Pokud deklarace chybu protokolu SOAP typu řetězec a poté to vyvolat ve službě jako <xref:System.ServiceModel.FaultException%601> kde parametr typu je <xref:System.String?displayProperty=nameWithType> je přiřazena hodnota řetězce <xref:System.ServiceModel.FaultException%601.Detail%2A?displayProperty=nameWithType> vlastnost a není k dispozici z <xref:System.ServiceModel.FaultException%601.ToString%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="b9ff4-125">If you declare a SOAP fault of type string, and then throw this in your service as a <xref:System.ServiceModel.FaultException%601> where the type parameter is a <xref:System.String?displayProperty=nameWithType> the string value is assigned to the <xref:System.ServiceModel.FaultException%601.Detail%2A?displayProperty=nameWithType> property, and is not available from <xref:System.ServiceModel.FaultException%601.ToString%2A?displayProperty=nameWithType>.</span></span>  
  
## <a name="handling-faults"></a><span data-ttu-id="b9ff4-126">Zpracování chyb</span><span class="sxs-lookup"><span data-stu-id="b9ff4-126">Handling Faults</span></span>  
 <span data-ttu-id="b9ff4-127">V [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] klientů protokolu SOAP chyb, ke kterým došlo během komunikace, které jsou důležité pro klientské aplikace jsou vyvolány jako spravované výjimky.</span><span class="sxs-lookup"><span data-stu-id="b9ff4-127">In [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] clients, SOAP faults that occur during communication that are of interest to client applications are raised as managed exceptions.</span></span> <span data-ttu-id="b9ff4-128">Existuje mnoho výjimky, které se můžou vyskytnout během provádění žádné program aplikací pomocí [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] očekávat klienta programovací model zpracování výjimek následující dva typy v důsledku komunikace.</span><span class="sxs-lookup"><span data-stu-id="b9ff4-128">While there are many exceptions that can occur during the execution of any program, applications using the [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client programming model can expect to handle exceptions of the following two types as a result of communication.</span></span>  
  
-   <xref:System.TimeoutException>  
  
-   <xref:System.ServiceModel.CommunicationException>  
  
 <span data-ttu-id="b9ff4-129"><xref:System.TimeoutException>objekty jsou vyvolány, když překročí zadaný časový limit operace.</span><span class="sxs-lookup"><span data-stu-id="b9ff4-129"><xref:System.TimeoutException> objects are thrown when an operation exceeds the specified timeout period.</span></span>  
  
 <span data-ttu-id="b9ff4-130"><xref:System.ServiceModel.CommunicationException>objekty jsou vyvolány po nějaké chyby použitelná pro obnovení komunikace na službu nebo klienta.</span><span class="sxs-lookup"><span data-stu-id="b9ff4-130"><xref:System.ServiceModel.CommunicationException> objects are thrown when there is some recoverable communication error condition on either the service or the client.</span></span>  
  
 <span data-ttu-id="b9ff4-131"><xref:System.ServiceModel.CommunicationException> Třída má dva důležité odvozené typy <xref:System.ServiceModel.FaultException> a Obecné <xref:System.ServiceModel.FaultException%601> typu.</span><span class="sxs-lookup"><span data-stu-id="b9ff4-131">The <xref:System.ServiceModel.CommunicationException> class has two important derived types, <xref:System.ServiceModel.FaultException> and the generic <xref:System.ServiceModel.FaultException%601> type.</span></span>  
  
 <span data-ttu-id="b9ff4-132"><xref:System.ServiceModel.FaultException>jsou výjimky vyvolány, když naslouchací proces obdrží chybu, která není očekávané nebo uvedených ve smlouvě operace; obvykle proběhne, když je laděné aplikace a služby má <xref:System.ServiceModel.Description.ServiceDebugBehavior.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> vlastnost nastavena na hodnotu `true`.</span><span class="sxs-lookup"><span data-stu-id="b9ff4-132"><xref:System.ServiceModel.FaultException> exceptions are thrown when a listener receives a fault that is not expected or specified in the operation contract; usually this occurs when the application is being debugged and the service has the <xref:System.ServiceModel.Description.ServiceDebugBehavior.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> property set to `true`.</span></span>  
  
 <span data-ttu-id="b9ff4-133"><xref:System.ServiceModel.FaultException%601>Při obdržení chybu, která je zadána v operaci kontraktu v reakci na obousměrný operace jsou výjimky vyvolány v klientovi (to znamená, metoda s <xref:System.ServiceModel.OperationContractAttribute> atribut s <xref:System.ServiceModel.OperationContractAttribute.IsOneWay%2A> nastavena na `false`).</span><span class="sxs-lookup"><span data-stu-id="b9ff4-133"><xref:System.ServiceModel.FaultException%601> exceptions are thrown on the client when a fault that is specified in the operation contract is received in response to a two-way operation (that is, a method with an <xref:System.ServiceModel.OperationContractAttribute> attribute with <xref:System.ServiceModel.OperationContractAttribute.IsOneWay%2A> set to `false`).</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="b9ff4-134">Když [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] služba má <xref:System.ServiceModel.ServiceBehaviorAttribute.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> nebo <xref:System.ServiceModel.Description.ServiceDebugBehavior.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> vlastnost nastavena na hodnotu `true` klienta vyskytne to jako nedeklarované <xref:System.ServiceModel.FaultException%601> typu <xref:System.ServiceModel.ExceptionDetail>.</span><span class="sxs-lookup"><span data-stu-id="b9ff4-134">When an [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] service has the <xref:System.ServiceModel.ServiceBehaviorAttribute.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> or <xref:System.ServiceModel.Description.ServiceDebugBehavior.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> property set to `true` the client experiences this as an undeclared <xref:System.ServiceModel.FaultException%601> of type <xref:System.ServiceModel.ExceptionDetail>.</span></span> <span data-ttu-id="b9ff4-135">Klienti můžou catch této konkrétní chyby nebo zpracování chyb v bloku catch pro <xref:System.ServiceModel.FaultException>.</span><span class="sxs-lookup"><span data-stu-id="b9ff4-135">Clients can either catch this specific fault or handle the fault in a catch block for <xref:System.ServiceModel.FaultException>.</span></span>  
  
 <span data-ttu-id="b9ff4-136">Obvykle pouze <xref:System.ServiceModel.FaultException%601>, <xref:System.TimeoutException>, a <xref:System.ServiceModel.CommunicationException> výjimky jsou důležité pro klienty a služby.</span><span class="sxs-lookup"><span data-stu-id="b9ff4-136">Typically, only <xref:System.ServiceModel.FaultException%601>, <xref:System.TimeoutException>, and <xref:System.ServiceModel.CommunicationException> exceptions are of interest to clients and services.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="b9ff4-137">Samozřejmě, ostatní výjimky dojít.</span><span class="sxs-lookup"><span data-stu-id="b9ff4-137">Other exceptions, of course, do occur.</span></span> <span data-ttu-id="b9ff4-138">Neočekávané výjimky patří závažné chyby jako <xref:System.OutOfMemoryException?displayProperty=nameWithType>; obvykle aplikace by neměl catch těchto metod.</span><span class="sxs-lookup"><span data-stu-id="b9ff4-138">Unexpected exceptions include catastrophic failures like <xref:System.OutOfMemoryException?displayProperty=nameWithType>; typically applications should not catch such methods.</span></span>  
  
### <a name="catch-fault-exceptions-in-the-correct-order"></a><span data-ttu-id="b9ff4-139">Zachytit výjimky selhání ve správném pořadí</span><span class="sxs-lookup"><span data-stu-id="b9ff4-139">Catch Fault Exceptions in the Correct Order</span></span>  
 <span data-ttu-id="b9ff4-140">Protože <xref:System.ServiceModel.FaultException%601> je odvozena z <xref:System.ServiceModel.FaultException>, a <xref:System.ServiceModel.FaultException> je odvozena z <xref:System.ServiceModel.CommunicationException>, je důležité k zachycení tyto výjimky ve správném pořadí.</span><span class="sxs-lookup"><span data-stu-id="b9ff4-140">Because <xref:System.ServiceModel.FaultException%601> derives from <xref:System.ServiceModel.FaultException>, and <xref:System.ServiceModel.FaultException> derives from <xref:System.ServiceModel.CommunicationException>, it is important to catch these exceptions in the proper order.</span></span> <span data-ttu-id="b9ff4-141">Pokud například máte try/catch – blok, ve kterém jste nejdřív catch <xref:System.ServiceModel.CommunicationException>neurčené chyb SOAP jsou zpracovávány není; všechny bloky catch následné zpracování vlastní, a všechny zadané <xref:System.ServiceModel.FaultException%601> se nikdy vyvolána výjimka.</span><span class="sxs-lookup"><span data-stu-id="b9ff4-141">If, for example, you have a try/catch block in which you first catch <xref:System.ServiceModel.CommunicationException>, all specified and unspecified SOAP faults are handled there; any subsequent catch blocks to handle a custom <xref:System.ServiceModel.FaultException%601> exception are never invoked.</span></span>  
  
 <span data-ttu-id="b9ff4-142">Mějte na paměti, že jednu operaci může vracet libovolný počet zadaný chyb.</span><span class="sxs-lookup"><span data-stu-id="b9ff4-142">Remember that one operation can return any number of specified faults.</span></span> <span data-ttu-id="b9ff4-143">Každý selhání je typu jedinečný a musí být zpracován samostatně.</span><span class="sxs-lookup"><span data-stu-id="b9ff4-143">Each fault is a unique type and must be handled separately.</span></span>  
  
### <a name="handle-exceptions-when-closing-the-channel"></a><span data-ttu-id="b9ff4-144">Při zavření v kanálu zpracování výjimek</span><span class="sxs-lookup"><span data-stu-id="b9ff4-144">Handle Exceptions When Closing the Channel</span></span>  
 <span data-ttu-id="b9ff4-145">Většina výše uvedené informace má dělat s chyb odeslaných v průběhu zpracování zpráv s aplikací, který je zprávy explicitně klientem po klientská aplikace volání operací na [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] objekt klienta.</span><span class="sxs-lookup"><span data-stu-id="b9ff4-145">Most of the preceding discussion has to do with faults sent in the course of processing application messages, that is, messages explicitly sent by the client when the client application calls operations on the [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client object.</span></span>  
  
 <span data-ttu-id="b9ff4-146">I s místní objekty uvolnění objektu můžete zvýšit nebo maskování výjimky, ke kterým došlo během recyklace procesu.</span><span class="sxs-lookup"><span data-stu-id="b9ff4-146">Even with local objects disposing the object can either raise or mask exceptions that occur during the recycling process.</span></span> <span data-ttu-id="b9ff4-147">Něco podobného může dojít, když používáte [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] objekty klienta.</span><span class="sxs-lookup"><span data-stu-id="b9ff4-147">Something similar can occur when you use [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client objects.</span></span> <span data-ttu-id="b9ff4-148">Při volání operací odesíláte zprávy přes navázané připojení.</span><span class="sxs-lookup"><span data-stu-id="b9ff4-148">When you call operations you are sending messages over an established connection.</span></span> <span data-ttu-id="b9ff4-149">Zavření kanálu může vyvolat výjimky Pokud připojení nelze zavřít, řádně nebo již byl uzavřen, i v případě, že všechny operace se vrátila správně.</span><span class="sxs-lookup"><span data-stu-id="b9ff4-149">Closing the channel can throw exceptions if the connection cannot be cleanly closed or is already closed, even if all the operations returned properly.</span></span>  
  
 <span data-ttu-id="b9ff4-150">Kanály objekt klienta jsou obvykle uzavřeny v jednom z následujících způsobů:</span><span class="sxs-lookup"><span data-stu-id="b9ff4-150">Typically, client object channels are closed in one of the following ways:</span></span>  
  
-   <span data-ttu-id="b9ff4-151">Když [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] objekt klienta je recykluje.</span><span class="sxs-lookup"><span data-stu-id="b9ff4-151">When the [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client object is recycled.</span></span>  
  
-   <span data-ttu-id="b9ff4-152">Když klientské aplikace volá <xref:System.ServiceModel.ClientBase%601.Close%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="b9ff4-152">When the client application calls <xref:System.ServiceModel.ClientBase%601.Close%2A?displayProperty=nameWithType>.</span></span>  
  
-   <span data-ttu-id="b9ff4-153">Když klientské aplikace volá <xref:System.ServiceModel.ICommunicationObject.Close%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="b9ff4-153">When the client application calls <xref:System.ServiceModel.ICommunicationObject.Close%2A?displayProperty=nameWithType>.</span></span>  
  
-   <span data-ttu-id="b9ff4-154">Když klientské aplikace volá operaci, je ukončující operace pro relaci.</span><span class="sxs-lookup"><span data-stu-id="b9ff4-154">When the client application calls an operation that is a terminating operation for a session.</span></span>  
  
 <span data-ttu-id="b9ff4-155">Ve všech případech zavření kanálu dá pokyn kanál pro ukončení všechny základní kanály, které může být odesílání zpráv pro podporu komplexní funkcí na úrovni aplikace.</span><span class="sxs-lookup"><span data-stu-id="b9ff4-155">In all cases, closing the channel instructs the channel to begin closing any underlying channels that may be sending messages to support complex functionality at the application level.</span></span> <span data-ttu-id="b9ff4-156">Například pokud kontraktu vyžaduje relací vazbu se pokusí vytvořit relaci výměnou zpráv s kanálem služby, dokud nebude navázáno relaci.</span><span class="sxs-lookup"><span data-stu-id="b9ff4-156">For example, when a contract requires sessions a binding attempts to establish a session by exchanging messages with the service channel until a session is established.</span></span> <span data-ttu-id="b9ff4-157">Při zavření kanálu základní kanál relace upozorní službu a ukončení relace.</span><span class="sxs-lookup"><span data-stu-id="b9ff4-157">When the channel is closed, the underlying session channel notifies the service that the session is terminated.</span></span> <span data-ttu-id="b9ff4-158">V takovém případě pokud kanál již přerušena, zavřená, nebo je jinak nepoužitelná (například když je odpojen síťový kabel), nelze informujte kanálem klienta služby kanálu, který relace je ukončena a může vést k výjimce.</span><span class="sxs-lookup"><span data-stu-id="b9ff4-158">In this case, if the channel has already aborted, closed, or is otherwise unusable (for example, when a network cable is unplugged), the client channel cannot inform the service channel that the session is terminated and an exception can result.</span></span>  
  
### <a name="abort-the-channel-if-necessary"></a><span data-ttu-id="b9ff4-159">Abort kanál v případě potřeby</span><span class="sxs-lookup"><span data-stu-id="b9ff4-159">Abort the Channel If Necessary</span></span>  
 <span data-ttu-id="b9ff4-160">Protože zavření kanálu můžete také vyvolat výjimky, pak se doporučuje, aby kromě zachytávání výjimek chyby ve správném pořadí, je důležité k přerušení kanálu, který byl použitý při vytvoření volání v bloku catch.</span><span class="sxs-lookup"><span data-stu-id="b9ff4-160">Because closing the channel can also throw exceptions, then, it is recommended that in addition to catching fault exceptions in the correct order, it is important to abort the channel that was used in making the call in the catch block.</span></span>  
  
 <span data-ttu-id="b9ff4-161">Pokud selhání přenese tak informace o chybě specifické pro operace a zůstane možné, že jiné můžete použít, není třeba k přerušení kanál (i když tyto případy vyskytují jen vzácně).</span><span class="sxs-lookup"><span data-stu-id="b9ff4-161">If the fault conveys error information specific to an operation and it remains possible that others can use it, there is no need to abort the channel (although these cases are rare).</span></span> <span data-ttu-id="b9ff4-162">Ve všech ostatních případech se doporučuje, že můžete přerušit kanál.</span><span class="sxs-lookup"><span data-stu-id="b9ff4-162">In all other cases, it is recommended that you abort the channel.</span></span> <span data-ttu-id="b9ff4-163">Ukázka, všechny tyto body, najdete v části [očekává výjimky](../../../docs/framework/wcf/samples/expected-exceptions.md).</span><span class="sxs-lookup"><span data-stu-id="b9ff4-163">For a sample that demonstrates all of these points, see [Expected Exceptions](../../../docs/framework/wcf/samples/expected-exceptions.md).</span></span>  
  
 <span data-ttu-id="b9ff4-164">Následující příklad kódu ukazuje, jak zpracování výjimek chybu protokolu SOAP v základní klientskou aplikaci, včetně deklarované chybu a nedeklarované selhání.</span><span class="sxs-lookup"><span data-stu-id="b9ff4-164">The following code example shows how to handle SOAP fault exceptions in a basic client application, including a declared fault and an undeclared fault.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="b9ff4-165">Tento ukázkový kód nepoužívá `using` vytvořit.</span><span class="sxs-lookup"><span data-stu-id="b9ff4-165">This sample code does not use the `using` construct.</span></span> <span data-ttu-id="b9ff4-166">Protože zavřením kanály můžete vyvolat výjimky, doporučuje se, že aplikace vytvořit [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] klienta první a pak otevřete, používání a zavřít [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] klienta do stejného bloku try.</span><span class="sxs-lookup"><span data-stu-id="b9ff4-166">Because closing channels can throw exceptions, it is recommended that applications create a [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client first, and then open, use, and close the [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client in the same try block.</span></span> <span data-ttu-id="b9ff4-167">Podrobnosti najdete v tématu [klienta WCF – přehled](../../../docs/framework/wcf/wcf-client-overview.md) a [vyhnout problémům s příkazem Using](../../../docs/framework/wcf/samples/avoiding-problems-with-the-using-statement.md).</span><span class="sxs-lookup"><span data-stu-id="b9ff4-167">For details, see [WCF Client Overview](../../../docs/framework/wcf/wcf-client-overview.md) and [Avoiding Problems with the Using Statement](../../../docs/framework/wcf/samples/avoiding-problems-with-the-using-statement.md).</span></span>  
  
 [!code-csharp[FaultContractAttribute#3](../../../samples/snippets/csharp/VS_Snippets_CFX/faultcontractattribute/cs/client.cs#3)]
 [!code-vb[FaultContractAttribute#3](../../../samples/snippets/visualbasic/VS_Snippets_CFX/faultcontractattribute/vb/client.vb#3)]  
  
## <a name="see-also"></a><span data-ttu-id="b9ff4-168">Viz také</span><span class="sxs-lookup"><span data-stu-id="b9ff4-168">See Also</span></span>  
 <xref:System.ServiceModel.FaultException>  
 <xref:System.ServiceModel.FaultException%601>  
 <xref:System.ServiceModel.CommunicationException?displayProperty=nameWithType>  
 [<span data-ttu-id="b9ff4-169">Očekávané výjimky</span><span class="sxs-lookup"><span data-stu-id="b9ff4-169">Expected Exceptions</span></span>](../../../docs/framework/wcf/samples/expected-exceptions.md)  
 [<span data-ttu-id="b9ff4-170">Jak se vyhnout problémům s příkazem Using</span><span class="sxs-lookup"><span data-stu-id="b9ff4-170">Avoiding Problems with the Using Statement</span></span>](../../../docs/framework/wcf/samples/avoiding-problems-with-the-using-statement.md)
