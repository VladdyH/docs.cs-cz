---
title: "Princip úrovně ochrany"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
dev_langs:
- csharp
- vb
helpviewer_keywords:
- WCF, security
- ProtectionLevel property
ms.assetid: 0c034608-a1ac-4007-8287-b1382eaa8bf2
caps.latest.revision: "22"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.workload: dotnet
ms.openlocfilehash: c379cf39f30bf7e75907dba5fb06ba4e3862e299
ms.sourcegitcommit: 16186c34a957fdd52e5db7294f291f7530ac9d24
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 12/22/2017
---
# <a name="understanding-protection-level"></a><span data-ttu-id="9d6be-102">Princip úrovně ochrany</span><span class="sxs-lookup"><span data-stu-id="9d6be-102">Understanding Protection Level</span></span>
<span data-ttu-id="9d6be-103">`ProtectionLevel` Vlastnost nachází na mnoha různých tříd, jako <xref:System.ServiceModel.ServiceContractAttribute> a <xref:System.ServiceModel.OperationContractAttribute> třídy.</span><span class="sxs-lookup"><span data-stu-id="9d6be-103">The `ProtectionLevel` property is found on many different classes, such as the <xref:System.ServiceModel.ServiceContractAttribute> and the <xref:System.ServiceModel.OperationContractAttribute> classes.</span></span> <span data-ttu-id="9d6be-104">Vlastnost řídí, jak je chráněný část (nebo celé) zprávy.</span><span class="sxs-lookup"><span data-stu-id="9d6be-104">The property controls how a part (or whole) of a message is protected.</span></span> <span data-ttu-id="9d6be-105">Toto téma vysvětluje [!INCLUDE[indigo1](../../../includes/indigo1-md.md)] funkce a jak to funguje.</span><span class="sxs-lookup"><span data-stu-id="9d6be-105">This topic explains the [!INCLUDE[indigo1](../../../includes/indigo1-md.md)] feature and how it works.</span></span>  
  
 <span data-ttu-id="9d6be-106">Pokyny k nastavení úroveň ochrany, najdete v části [postupy: nastavení vlastnosti ProtectionLevel](../../../docs/framework/wcf/how-to-set-the-protectionlevel-property.md).</span><span class="sxs-lookup"><span data-stu-id="9d6be-106">For instructions on setting the protection level, see [How to: Set the ProtectionLevel Property](../../../docs/framework/wcf/how-to-set-the-protectionlevel-property.md).</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="9d6be-107">Úrovně ochrany lze nastavit pouze v kódu není v konfiguraci.</span><span class="sxs-lookup"><span data-stu-id="9d6be-107">Protection levels can be set only in code, not in configuration.</span></span>  
  
## <a name="basics"></a><span data-ttu-id="9d6be-108">Základy</span><span class="sxs-lookup"><span data-stu-id="9d6be-108">Basics</span></span>  
 <span data-ttu-id="9d6be-109">Pochopit funkce úroveň ochrany, platí následující základní příkazy:</span><span class="sxs-lookup"><span data-stu-id="9d6be-109">To understand the protection level feature, the following basic statements apply:</span></span>  
  
-   <span data-ttu-id="9d6be-110">Existují tři základní úrovně ochrany pro libovolnou část zprávy.</span><span class="sxs-lookup"><span data-stu-id="9d6be-110">Three basic levels of protection exist for any part of a message.</span></span> <span data-ttu-id="9d6be-111">Vlastnost (kdekoli se objeví) je nastavena na jednu z <xref:System.Net.Security.ProtectionLevel> hodnot výčtu.</span><span class="sxs-lookup"><span data-stu-id="9d6be-111">The property (wherever it occurs) is set to one of the <xref:System.Net.Security.ProtectionLevel> enumeration values.</span></span> <span data-ttu-id="9d6be-112">Ve vzestupném pořadí ochrany, patří:</span><span class="sxs-lookup"><span data-stu-id="9d6be-112">In ascending order of protection, they include:</span></span>  
  
    -   <span data-ttu-id="9d6be-113">`None`.</span><span class="sxs-lookup"><span data-stu-id="9d6be-113">`None`.</span></span>  
  
    -   <span data-ttu-id="9d6be-114">`Sign`.</span><span class="sxs-lookup"><span data-stu-id="9d6be-114">`Sign`.</span></span> <span data-ttu-id="9d6be-115">Chráněné část digitálně podepsané.</span><span class="sxs-lookup"><span data-stu-id="9d6be-115">The protected part is digitally signed.</span></span> <span data-ttu-id="9d6be-116">Tím se zajistí zjišťování manipulaci s částí chráněné zprávy.</span><span class="sxs-lookup"><span data-stu-id="9d6be-116">This ensures detection of any tampering with the protected message part.</span></span>  
  
    -   <span data-ttu-id="9d6be-117">`EncryptAndSign`.</span><span class="sxs-lookup"><span data-stu-id="9d6be-117">`EncryptAndSign`.</span></span> <span data-ttu-id="9d6be-118">K zajištění důvěrnosti, než je podepsaný se šifrují část zprávy.</span><span class="sxs-lookup"><span data-stu-id="9d6be-118">The message part is encrypted to ensure confidentiality before it is signed.</span></span>  
  
-   <span data-ttu-id="9d6be-119">Můžete nastavit jenom pro požadavky na ochranu *data aplikací* s touto funkcí.</span><span class="sxs-lookup"><span data-stu-id="9d6be-119">You can set protection requirements only for *application data* with this feature.</span></span> <span data-ttu-id="9d6be-120">Například WS-Addressing hlavičky jsou data infrastruktury a, proto nemá vliv `ProtectionLevel`.</span><span class="sxs-lookup"><span data-stu-id="9d6be-120">For example, WS-Addressing headers are infrastructure data and, therefore, are not affected by the `ProtectionLevel`.</span></span>  
  
-   <span data-ttu-id="9d6be-121">Když je režim zabezpečení nastavená na `Transport`, celé zprávy je chráněný přenosový mechanismus.</span><span class="sxs-lookup"><span data-stu-id="9d6be-121">When the security mode is set to `Transport`, the entire message is protected by the transport mechanism.</span></span> <span data-ttu-id="9d6be-122">Nastavení úrovně ochrany samostatné pro různé části zprávu proto nemá žádný vliv.</span><span class="sxs-lookup"><span data-stu-id="9d6be-122">Therefore, setting a separate protection level for different parts of a message has no effect.</span></span>  
  
-   <span data-ttu-id="9d6be-123">`ProtectionLevel` Je způsob, jak vývojáři nastavit *minimální úroveň stanovenou* které musí dodržovat vazbu.</span><span class="sxs-lookup"><span data-stu-id="9d6be-123">The `ProtectionLevel` is a way for the developer to set the *minimum level* that a binding must comply with.</span></span> <span data-ttu-id="9d6be-124">Po nasazení služby se skutečná vazba zadaný v konfiguraci může nebo nemusí podporovat minimální úroveň.</span><span class="sxs-lookup"><span data-stu-id="9d6be-124">When a service is deployed, the actual binding specified in configuration may or may not support the minimum level.</span></span> <span data-ttu-id="9d6be-125">Ve výchozím nastavení, například <xref:System.ServiceModel.BasicHttpBinding> třída neposkytuje zabezpečení (i když může být povoleno).</span><span class="sxs-lookup"><span data-stu-id="9d6be-125">For example, by default, the <xref:System.ServiceModel.BasicHttpBinding> class does not supply security (although it can be enabled).</span></span> <span data-ttu-id="9d6be-126">Proto pomocí kontrakt, který má jakékoli nastavení jiné než `None` způsobí výjimku, která je vyvolána.</span><span class="sxs-lookup"><span data-stu-id="9d6be-126">Therefore, using it with a contract that has any setting other than `None` will cause an exception to be thrown.</span></span>  
  
-   <span data-ttu-id="9d6be-127">Pokud služba vyžaduje, aby minimální `ProtectionLevel` pro všechny zprávy je `Sign`, klient (možná vytvořené jinou hodnotu než[!INCLUDE[indigo2](../../../includes/indigo2-md.md)] technologie) můžete šifrovat a podepsat všechny zprávy (které je větší než požadované minimum).</span><span class="sxs-lookup"><span data-stu-id="9d6be-127">If the service requires that the minimum `ProtectionLevel` for all messages is `Sign`, a client (perhaps created by a non-[!INCLUDE[indigo2](../../../includes/indigo2-md.md)] technology) can encrypt and sign all messages (which is more than the minimum required).</span></span> <span data-ttu-id="9d6be-128">V takovém případě [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] nebude způsobí výjimku, protože klient má provádějí více než požadované minimum.</span><span class="sxs-lookup"><span data-stu-id="9d6be-128">In this case, [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] will not throw an exception because the client has done more than the minimum.</span></span> <span data-ttu-id="9d6be-129">Upozorňujeme však, který [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] aplikace (služby nebo klientů) nebude přepsání zabezpečeného Pokud je to možné část zprávy, ale bude splňovat minimální úroveň.</span><span class="sxs-lookup"><span data-stu-id="9d6be-129">Note, however, that [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] applications (services or clients) will not over-secure a message part if possible but will comply with the minimum level.</span></span> <span data-ttu-id="9d6be-130">Také Upozorňujeme, že pokud pomocí `Transport` jako režim zabezpečení, přenos může přepsání zabezpečení datového proudu zpráv protože ze své podstaty nelze zabezpečit na podrobnější úrovni.</span><span class="sxs-lookup"><span data-stu-id="9d6be-130">Also note that when using `Transport` as the security mode, the transport may over-secure the message stream because it is inherently unable to secure at a more granular level.</span></span>  
  
-   <span data-ttu-id="9d6be-131">Pokud nastavíte `ProtectionLevel` explicitně buď na kteroukoli `Sign` nebo `EncryptAndSign`, pak musíte použít vazbu s povoleným zabezpečením nebo k výjimce.</span><span class="sxs-lookup"><span data-stu-id="9d6be-131">If you set the `ProtectionLevel` explicitly to either `Sign` or `EncryptAndSign`, then you must use a binding with security enabled or an exception will be thrown.</span></span>  
  
-   <span data-ttu-id="9d6be-132">Pokud vyberete vazbu, která umožňuje zabezpečení a není nastaveno `ProtectionLevel` vlastnost kdekoli v kontrakt, všechny aplikační data budou šifrovaný a podepsaný.</span><span class="sxs-lookup"><span data-stu-id="9d6be-132">If you select a binding that enables security and you do not set the `ProtectionLevel` property anywhere on the contract, all application data will be encrypted and signed.</span></span>  
  
-   <span data-ttu-id="9d6be-133">Pokud vyberete vazbu, která nemá povoleno zabezpečení (například `BasicHttpBinding` třída má ve výchozím nastavení zakázaná zabezpečení) a `ProtectionLevel` není explicitně nastavena, pak žádná data, aplikace budou chráněné.</span><span class="sxs-lookup"><span data-stu-id="9d6be-133">If you select a binding that does not have security enabled (for example, the `BasicHttpBinding` class has security disabled by default), and the `ProtectionLevel` is not explicitly set, then none of the application data will be protected.</span></span>  
  
-   <span data-ttu-id="9d6be-134">Pokud používáte vazbu, která se použije zabezpečení na úrovni přenosu, všechna data aplikace nebude zabezpečené podle možnosti přenosu.</span><span class="sxs-lookup"><span data-stu-id="9d6be-134">If you are using a binding that applies security at the transport level, all application data will be secured according to the capabilities of the transport.</span></span>  
  
-   <span data-ttu-id="9d6be-135">Pokud používáte vazbu, která se použije zabezpečení na úrovni zpráv, bude podle úrovně ochrany nastavte na kontrakt zabezpečená data aplikací.</span><span class="sxs-lookup"><span data-stu-id="9d6be-135">If you use a binding that applies security at the message level, then application data will be secured according to the protection levels set on the contract.</span></span> <span data-ttu-id="9d6be-136">Pokud nezadáte úroveň ochrany, a všechna data aplikací v zprávy budou šifrovaný a podepsaný.</span><span class="sxs-lookup"><span data-stu-id="9d6be-136">If you do not specify a protection level, then all application data in the messages will be encrypted and signed.</span></span>  
  
-   <span data-ttu-id="9d6be-137">`ProtectionLevel` Lze nastavit na různých úrovních oboru.</span><span class="sxs-lookup"><span data-stu-id="9d6be-137">The `ProtectionLevel` can be set at different scoping levels.</span></span> <span data-ttu-id="9d6be-138">Existuje hierarchie přidružená k rozsahu, který je vysvětlen v další části.</span><span class="sxs-lookup"><span data-stu-id="9d6be-138">There is a hierarchy associated with scoping, which is explained in the next section.</span></span>  
  
## <a name="scoping"></a><span data-ttu-id="9d6be-139">Obor</span><span class="sxs-lookup"><span data-stu-id="9d6be-139">Scoping</span></span>  
 <span data-ttu-id="9d6be-140">Nastavení `ProtectionLevel` na volání rozhraní API nejhornější nastaví úroveň pro všechny úrovně pod ním.</span><span class="sxs-lookup"><span data-stu-id="9d6be-140">Setting the `ProtectionLevel` on the topmost API sets the level for all levels below it.</span></span> <span data-ttu-id="9d6be-141">Pokud `ProtectionLevel` nastavena na jinou hodnotu na nižší úrovni, všechna rozhraní API níže že úrovně v hierarchii bude nyní restartován na novou úroveň (rozhraní API výše, ale stále ovlivní nejvyšší úrovni).</span><span class="sxs-lookup"><span data-stu-id="9d6be-141">If the `ProtectionLevel` is set to a different value at a lower level, all APIs below that level in the hierarchy will now be reset to the new level (APIs above it, however, will still be affected by the topmost level).</span></span> <span data-ttu-id="9d6be-142">V hierarchii je následující.</span><span class="sxs-lookup"><span data-stu-id="9d6be-142">The hierarchy is as follows.</span></span> <span data-ttu-id="9d6be-143">Atributy na stejné úrovni jsou partnerské uzly.</span><span class="sxs-lookup"><span data-stu-id="9d6be-143">Attributes at the same level are peers.</span></span>  
  
 <xref:System.ServiceModel.ServiceContractAttribute>  
  
 <xref:System.ServiceModel.OperationContractAttribute>  
  
 <xref:System.ServiceModel.FaultContractAttribute>  
  
 <xref:System.ServiceModel.MessageContractAttribute>  
  
 <xref:System.ServiceModel.MessageHeaderAttribute>  
  
 <xref:System.ServiceModel.MessageBodyMemberAttribute>  
  
## <a name="programming-protectionlevel"></a><span data-ttu-id="9d6be-144">Programování ProtectionLevel</span><span class="sxs-lookup"><span data-stu-id="9d6be-144">Programming ProtectionLevel</span></span>  
 <span data-ttu-id="9d6be-145">Programu `ProtectionLevel` v libovolném bodě v hierarchii, jednoduše nastavte vlastnost na hodnotu odpovídající při použití atributu.</span><span class="sxs-lookup"><span data-stu-id="9d6be-145">To program the `ProtectionLevel` at any point in the hierarchy, simply set the property to an appropriate value when applying the attribute.</span></span> <span data-ttu-id="9d6be-146">Příklady najdete v tématu [postupy: nastavení vlastnosti ProtectionLevel](../../../docs/framework/wcf/how-to-set-the-protectionlevel-property.md).</span><span class="sxs-lookup"><span data-stu-id="9d6be-146">For examples, see [How to: Set the ProtectionLevel Property](../../../docs/framework/wcf/how-to-set-the-protectionlevel-property.md).</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="9d6be-147">Nastavení vlastnosti na chyb a zpráva kontrakty vyžaduje pochopení, jak tyto funkce fungují.</span><span class="sxs-lookup"><span data-stu-id="9d6be-147">Setting the property on faults and message contracts requires understanding how those features work.</span></span> [!INCLUDE[crdefault](../../../includes/crdefault-md.md)]<span data-ttu-id="9d6be-148">[Postupy: nastavení vlastnosti ProtectionLevel](../../../docs/framework/wcf/how-to-set-the-protectionlevel-property.md) a [použití kontraktů zpráv](../../../docs/framework/wcf/feature-details/using-message-contracts.md).</span><span class="sxs-lookup"><span data-stu-id="9d6be-148"> [How to: Set the ProtectionLevel Property](../../../docs/framework/wcf/how-to-set-the-protectionlevel-property.md) and [Using Message Contracts](../../../docs/framework/wcf/feature-details/using-message-contracts.md).</span></span>  
  
## <a name="ws-addressing-dependency"></a><span data-ttu-id="9d6be-149">Adresování WS závislostí</span><span class="sxs-lookup"><span data-stu-id="9d6be-149">WS-Addressing Dependency</span></span>  
 <span data-ttu-id="9d6be-150">Ve většině případů pomocí [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) ke generování klienta zajišťuje, aby byly identické kontrakty klienta a služby.</span><span class="sxs-lookup"><span data-stu-id="9d6be-150">In most cases, using the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) to generate a client ensures that the client and service contracts are identical.</span></span> <span data-ttu-id="9d6be-151">Však zdánlivě identické kontrakty může způsobit, že klient vyvolá výjimku.</span><span class="sxs-lookup"><span data-stu-id="9d6be-151">However, seemingly identical contracts can cause the client to throw an exception.</span></span> <span data-ttu-id="9d6be-152">K tomu dochází vždy, když vazbu nepodporuje specifikaci WS-Addressing a zadávají se na kontrakt několik úrovní ochrany.</span><span class="sxs-lookup"><span data-stu-id="9d6be-152">This occurs whenever a binding does not support the WS-Addressing specification and multiple levels of protection are specified on the contract.</span></span> <span data-ttu-id="9d6be-153">Například <xref:System.ServiceModel.BasicHttpBinding> třída nepodporuje specifikace, nebo pokud vytvoříte vlastní vazby, který nepodporuje adresování WS.</span><span class="sxs-lookup"><span data-stu-id="9d6be-153">For example, the <xref:System.ServiceModel.BasicHttpBinding> class does not support the specification, or if you create a custom binding that does not support WS-Addressing.</span></span> <span data-ttu-id="9d6be-154">`ProtectionLevel` Funkce závisí na specifikaci WS-Addressing povolit různých úrovních ochrany na jeden kontrakt.</span><span class="sxs-lookup"><span data-stu-id="9d6be-154">The `ProtectionLevel` feature relies on the WS-Addressing specification to enable different protection levels on a single contract.</span></span> <span data-ttu-id="9d6be-155">Pokud vazba nepodporuje specifikaci WS-Addressing, všechny úrovně se nastaví na stejnou úroveň ochrany.</span><span class="sxs-lookup"><span data-stu-id="9d6be-155">If the binding does not support the WS-Addressing specification, all levels will be set to the same protection level.</span></span> <span data-ttu-id="9d6be-156">Úroveň účinnou ochranu pro všechny obory ve smlouvě bude nastavena na nejvyšší úroveň ochrany použít na kontrakt.</span><span class="sxs-lookup"><span data-stu-id="9d6be-156">The effective protection level for all scopes on the contract will be set to the strongest protection level used on the contract.</span></span>  
  
 <span data-ttu-id="9d6be-157">Může dojít k problémům, které je obtížné ladění na první pohled.</span><span class="sxs-lookup"><span data-stu-id="9d6be-157">This may cause a problem that is hard to debug at first glance.</span></span> <span data-ttu-id="9d6be-158">Je možné vytvořit kontraktu klienta (rozhraní), která obsahuje metody pro více než jedna služba.</span><span class="sxs-lookup"><span data-stu-id="9d6be-158">It is possible to create a client contract (an interface) that includes methods for more than one service.</span></span> <span data-ttu-id="9d6be-159">To znamená stejné rozhraní se používá k vytvoření klienta, který komunikuje s mnoha služeb a rozhraní jeden obsahuje metody pro všechny služby.</span><span class="sxs-lookup"><span data-stu-id="9d6be-159">That is, the same interface is used to create a client that communicates with many services, and the single interface contains methods for all services.</span></span> <span data-ttu-id="9d6be-160">Vývojář musí postará v tomto scénáři výjimečných volat pouze metody, které platí pro každou konkrétní službu.</span><span class="sxs-lookup"><span data-stu-id="9d6be-160">The developer must take care in this rare scenario to invoke only those methods that are applicable for each particular service.</span></span> <span data-ttu-id="9d6be-161">Pokud je vazba <xref:System.ServiceModel.BasicHttpBinding> třídy, více ochrany úrovně nemůže být podporováno.</span><span class="sxs-lookup"><span data-stu-id="9d6be-161">If the binding is the <xref:System.ServiceModel.BasicHttpBinding> class, multiple protection levels cannot be supported.</span></span> <span data-ttu-id="9d6be-162">Odeslání odpovědi klientovi služby však může odpovídat na klienta s nižší úroveň ochrany, než nezbytné.</span><span class="sxs-lookup"><span data-stu-id="9d6be-162">However, a service replying to the client might respond to a client with a lower protection level than required.</span></span> <span data-ttu-id="9d6be-163">V tomto případě klient vyvolá výjimku, protože se očekává, že vyšší úroveň ochrany.</span><span class="sxs-lookup"><span data-stu-id="9d6be-163">In this case, the client will throw an exception because it expects a higher protection level.</span></span>  
  
 <span data-ttu-id="9d6be-164">Příklad kódu ukazuje tento problém.</span><span class="sxs-lookup"><span data-stu-id="9d6be-164">An example of the code illustrates this problem.</span></span> <span data-ttu-id="9d6be-165">Následující příklad ukazuje, služby a kontraktu klienta.</span><span class="sxs-lookup"><span data-stu-id="9d6be-165">The following example shows a service and a client contract.</span></span> <span data-ttu-id="9d6be-166">Předpokládejme, že je vazba [ \<basicHttpBinding >](../../../docs/framework/configure-apps/file-schema/wcf/basichttpbinding.md) element.</span><span class="sxs-lookup"><span data-stu-id="9d6be-166">Assume that the binding is the [\<basicHttpBinding>](../../../docs/framework/configure-apps/file-schema/wcf/basichttpbinding.md) element.</span></span> <span data-ttu-id="9d6be-167">Všechny operace v kontraktu tedy mít stejnou úroveň ochrany.</span><span class="sxs-lookup"><span data-stu-id="9d6be-167">Therefore, all operations on a contract have the same protection level.</span></span> <span data-ttu-id="9d6be-168">Tato úroveň ochrany uniform je určen jako úroveň maximální ochrany mezi všechny operace.</span><span class="sxs-lookup"><span data-stu-id="9d6be-168">This uniform protection level is determined as the maximum protection level across all operations.</span></span>  
  
 <span data-ttu-id="9d6be-169">Kontrakt služby je:</span><span class="sxs-lookup"><span data-stu-id="9d6be-169">The service contract is:</span></span>  
  
 [!code-csharp[c_ProtectionLevel#7](../../../samples/snippets/csharp/VS_Snippets_CFX/c_protectionlevel/cs/source.cs#7)]
 [!code-vb[c_ProtectionLevel#7](../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_protectionlevel/vb/source.vb#7)]  
  
 <span data-ttu-id="9d6be-170">Následující kód ukazuje klienta rozhraní kontraktu.</span><span class="sxs-lookup"><span data-stu-id="9d6be-170">The following code shows the client contract interface.</span></span> <span data-ttu-id="9d6be-171">Všimněte si, že obsahuje `Tax` metoda, která je určena pro použití s jinou službu:</span><span class="sxs-lookup"><span data-stu-id="9d6be-171">Note that it includes a `Tax` method that is intended to be used with a different service:</span></span>  
  
 [!code-csharp[c_ProtectionLevel#8](../../../samples/snippets/csharp/VS_Snippets_CFX/c_protectionlevel/cs/source.cs#8)]
 [!code-vb[c_ProtectionLevel#8](../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_protectionlevel/vb/source.vb#8)]  
  
 <span data-ttu-id="9d6be-172">Když klient zavolá `Price` metody se vyvolá výjimku, pokud neobdrží odpověď ze služby.</span><span class="sxs-lookup"><span data-stu-id="9d6be-172">When the client calls the `Price` method, it throws an exception when it receives a reply from the service.</span></span> <span data-ttu-id="9d6be-173">K tomu dochází, protože klient neurčuje `ProtectionLevel` na `ServiceContractAttribute`, a proto klient používá výchozí (<xref:System.Net.Security.ProtectionLevel.EncryptAndSign>) pro všechny metody, včetně `Price` metoda.</span><span class="sxs-lookup"><span data-stu-id="9d6be-173">This occurs because the client does not specify a `ProtectionLevel` on the `ServiceContractAttribute`, and therefore the client uses the default (<xref:System.Net.Security.ProtectionLevel.EncryptAndSign>) for all methods, including the `Price` method.</span></span> <span data-ttu-id="9d6be-174">Služba ale vrátí se hodnota pomocí <xref:System.Net.Security.ProtectionLevel.Sign> protože kontrakt služby definuje jednu metodu, kterou má úrovně ochrany nastavena na <xref:System.Net.Security.ProtectionLevel.Sign>.</span><span class="sxs-lookup"><span data-stu-id="9d6be-174">However, the service returns the value using the <xref:System.Net.Security.ProtectionLevel.Sign> level because the service contract defines a single method that has its protection level set to <xref:System.Net.Security.ProtectionLevel.Sign>.</span></span> <span data-ttu-id="9d6be-175">V takovém případě bude klient vyvolá chybu, při ověření odpověď ze služby.</span><span class="sxs-lookup"><span data-stu-id="9d6be-175">In this case, the client will throw an error when validating the response from the service.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="9d6be-176">Viz také</span><span class="sxs-lookup"><span data-stu-id="9d6be-176">See Also</span></span>  
 <xref:System.ServiceModel.ServiceContractAttribute>  
 <xref:System.ServiceModel.OperationContractAttribute>  
 <xref:System.ServiceModel.FaultContractAttribute>  
 <xref:System.ServiceModel.MessageContractAttribute>  
 <xref:System.ServiceModel.MessageHeaderAttribute>  
 <xref:System.ServiceModel.MessageBodyMemberAttribute>  
 <xref:System.Net.Security.ProtectionLevel>  
 [<span data-ttu-id="9d6be-177">Zabezpečení služeb</span><span class="sxs-lookup"><span data-stu-id="9d6be-177">Securing Services</span></span>](../../../docs/framework/wcf/securing-services.md)  
 [<span data-ttu-id="9d6be-178">Postupy: Nastavení vlastnosti ProtectionLevel</span><span class="sxs-lookup"><span data-stu-id="9d6be-178">How to: Set the ProtectionLevel Property</span></span>](../../../docs/framework/wcf/how-to-set-the-protectionlevel-property.md)  
 [<span data-ttu-id="9d6be-179">Určování a zpracování chyb v kontraktech a službách</span><span class="sxs-lookup"><span data-stu-id="9d6be-179">Specifying and Handling Faults in Contracts and Services</span></span>](../../../docs/framework/wcf/specifying-and-handling-faults-in-contracts-and-services.md)  
 [<span data-ttu-id="9d6be-180">Použití kontraktů zpráv</span><span class="sxs-lookup"><span data-stu-id="9d6be-180">Using Message Contracts</span></span>](../../../docs/framework/wcf/feature-details/using-message-contracts.md)
