---
title: Vytváření uživatelem definovaných vazeb
ms.date: 03/30/2017
helpviewer_keywords:
- user-defined bindings [WCF]
ms.assetid: c4960675-d701-4bc9-b400-36a752fdd08b
ms.openlocfilehash: c9d37163770f2fd192a6fd2a03878b28f0237646
ms.sourcegitcommit: 15109844229ade1c6449f48f3834db1b26907824
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 05/07/2018
ms.locfileid: "33806741"
---
# <a name="creating-user-defined-bindings"></a><span data-ttu-id="8c731-102">Vytváření uživatelem definovaných vazeb</span><span class="sxs-lookup"><span data-stu-id="8c731-102">Creating User-Defined Bindings</span></span>
<span data-ttu-id="8c731-103">Chcete-li vytvořit vazby není poskytovaný systému několika způsoby:</span><span class="sxs-lookup"><span data-stu-id="8c731-103">There are several ways to create bindings not provided by the system:</span></span>  
  
-   <span data-ttu-id="8c731-104">Vytvoření vlastní vazby, na základě <xref:System.ServiceModel.Channels.CustomBinding> třídy, která je kontejner, který je vyplnit prvky vazeb.</span><span class="sxs-lookup"><span data-stu-id="8c731-104">Create a custom binding, based on the <xref:System.ServiceModel.Channels.CustomBinding> class, which is a container that you fill with binding elements.</span></span> <span data-ttu-id="8c731-105">Vlastní vazba se pak přidá do koncového bodu služby.</span><span class="sxs-lookup"><span data-stu-id="8c731-105">The custom binding is then added to a service endpoint.</span></span> <span data-ttu-id="8c731-106">Můžete vytvořit vlastní vazby, které buď programově, nebo v konfiguraci aplikace souboru.</span><span class="sxs-lookup"><span data-stu-id="8c731-106">You can create the custom binding either programmatically or in an application configuration file.</span></span> <span data-ttu-id="8c731-107">Pokud chcete použít prvku vazby z konfiguračního souboru aplikace, musíte rozšířit prvku vazby <xref:System.ServiceModel.Configuration.BindingElementExtensionElement>.</span><span class="sxs-lookup"><span data-stu-id="8c731-107">To use a binding element from an application configuration file, the binding element must extend <xref:System.ServiceModel.Configuration.BindingElementExtensionElement>.</span></span> <span data-ttu-id="8c731-108">Další informace o vlastních vazeb najdete v tématu [vlastní vazby](../../../../docs/framework/wcf/extending/custom-bindings.md) a <xref:System.ServiceModel.Channels.CustomBinding>.</span><span class="sxs-lookup"><span data-stu-id="8c731-108">For more information about custom bindings, see [Custom Bindings](../../../../docs/framework/wcf/extending/custom-bindings.md) and <xref:System.ServiceModel.Channels.CustomBinding>.</span></span>  
  
-   <span data-ttu-id="8c731-109">Můžete vytvořit třídu odvozenou od standardní vazby.</span><span class="sxs-lookup"><span data-stu-id="8c731-109">You can create a class that derives from a standard binding.</span></span> <span data-ttu-id="8c731-110">Například můžete odvození třídy z <xref:System.ServiceModel.WSHttpBinding> a přepsání <xref:System.ServiceModel.Channels.CustomBinding.CreateBindingElements%2A> metoda získat prvky vazby a vložit vlastní vazby element nebo vytvořit konkrétní hodnotu pro zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="8c731-110">For example, you can derive a class from <xref:System.ServiceModel.WSHttpBinding> and override <xref:System.ServiceModel.Channels.CustomBinding.CreateBindingElements%2A> method to obtain the binding elements and insert a custom binding element or establish a particular value for security.</span></span>  
  
-   <span data-ttu-id="8c731-111">Můžete vytvořit nový <xref:System.ServiceModel.Channels.Binding> typ zcela řídit implementace celý vazby.</span><span class="sxs-lookup"><span data-stu-id="8c731-111">You can create a new <xref:System.ServiceModel.Channels.Binding> type to completely control the entire binding implementation.</span></span>  
  
## <a name="the-order-of-binding-elements"></a><span data-ttu-id="8c731-112">Pořadí elementů vazby</span><span class="sxs-lookup"><span data-stu-id="8c731-112">The Order of Binding Elements</span></span>  
 <span data-ttu-id="8c731-113">Každý prvek vazby představuje krok zpracování při odesílání nebo přijímání zprávy.</span><span class="sxs-lookup"><span data-stu-id="8c731-113">Each binding element represents a processing step when sending or receiving messages.</span></span> <span data-ttu-id="8c731-114">V době běhu prvky vazeb vytvořit kanály a naslouchací procesy nezbytné k sestavení odchozí a příchozí zásobníky kanálu.</span><span class="sxs-lookup"><span data-stu-id="8c731-114">At runtime, binding elements create the channels and listeners necessary to build outgoing and incoming channel stacks.</span></span>  
  
 <span data-ttu-id="8c731-115">Existují tři hlavní typy elementů vazby: prvky vazeb protokolu, kódování prvky vazeb a elementů přenosové vazby.</span><span class="sxs-lookup"><span data-stu-id="8c731-115">There are three main types of binding elements: Protocol Binding Elements, Encoding Binding Elements and Transport Binding Elements.</span></span>  
  
 <span data-ttu-id="8c731-116">Prvky vazeb protokolu – Tyhle elementy reprezentují vyšší úrovně kroky zpracování, které fungují na zprávy.</span><span class="sxs-lookup"><span data-stu-id="8c731-116">Protocol Binding Elements – These elements represent higher-level processing steps that act on messages.</span></span> <span data-ttu-id="8c731-117">Kanály a naslouchací procesy vytvořené tyto prvky vazeb můžete přidat, odebrat nebo změnit obsah zprávy.</span><span class="sxs-lookup"><span data-stu-id="8c731-117">Channels and listeners created by these binding elements can add, remove, or modify the message content.</span></span> <span data-ttu-id="8c731-118">Danou vazbu může mít libovolný počet elementů vazby protokolu, každý dědění z <xref:System.ServiceModel.Channels.BindingElement>.</span><span class="sxs-lookup"><span data-stu-id="8c731-118">A given binding may have an arbitrary number of protocol binding elements, each inheriting from <xref:System.ServiceModel.Channels.BindingElement>.</span></span> <span data-ttu-id="8c731-119">Windows Communication Foundation (WCF) obsahuje několik prvky vazby protokolu, včetně <xref:System.ServiceModel.Channels.ReliableSessionBindingElement> a <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement>.</span><span class="sxs-lookup"><span data-stu-id="8c731-119">Windows Communication Foundation (WCF) includes several protocol binding elements, including the <xref:System.ServiceModel.Channels.ReliableSessionBindingElement> and the <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement>.</span></span>  
  
 <span data-ttu-id="8c731-120">Kódování prvku vazby – tyto prvky představují transformace mezi zprávu a kódování připraveni k přenosu v drátové síti.</span><span class="sxs-lookup"><span data-stu-id="8c731-120">Encoding Binding Element – These elements represent transformations between a message and an encoding ready for transmission on the wire.</span></span> <span data-ttu-id="8c731-121">Typické vazby WCF obsahovat přesně jeden kódování prvku vazby.</span><span class="sxs-lookup"><span data-stu-id="8c731-121">Typical WCF bindings include exactly one encoding binding element.</span></span> <span data-ttu-id="8c731-122">Příklady kódování prvky vazeb <xref:System.ServiceModel.Channels.MtomMessageEncodingBindingElement>, <xref:System.ServiceModel.Channels.BinaryMessageEncodingBindingElement>a <xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement>.</span><span class="sxs-lookup"><span data-stu-id="8c731-122">Examples of encoding binding elements include the <xref:System.ServiceModel.Channels.MtomMessageEncodingBindingElement>, the <xref:System.ServiceModel.Channels.BinaryMessageEncodingBindingElement>, and the <xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement>.</span></span> <span data-ttu-id="8c731-123">Pokud element kódování vazba není určena pro vazbu, bude použito výchozí kódování.</span><span class="sxs-lookup"><span data-stu-id="8c731-123">If an encoding binding element is not specified for a binding, a default encoding is used.</span></span> <span data-ttu-id="8c731-124">Výchozí hodnota je text při přenosu HTTP a binární jinak.</span><span class="sxs-lookup"><span data-stu-id="8c731-124">The default is text when the transport is HTTP and binary otherwise.</span></span>  
  
 <span data-ttu-id="8c731-125">Element vazby přenosu – Tyhle elementy reprezentují přenosem kódování zprávy v protokolu přenosu.</span><span class="sxs-lookup"><span data-stu-id="8c731-125">Transport Binding Element – These elements represent the transmission of an encoding message on a transport protocol.</span></span> <span data-ttu-id="8c731-126">Typické vazby WCF obsahovat přesně jeden element vazby přenos, který dědí z <xref:System.ServiceModel.Channels.TransportBindingElement>.</span><span class="sxs-lookup"><span data-stu-id="8c731-126">Typical WCF bindings include exactly one transport binding element, which inherits from <xref:System.ServiceModel.Channels.TransportBindingElement>.</span></span> <span data-ttu-id="8c731-127">Příklady přenosu elementů vazby <xref:System.ServiceModel.Channels.TcpTransportBindingElement>, <xref:System.ServiceModel.Channels.HttpTransportBindingElement>a <xref:System.ServiceModel.Channels.NamedPipeTransportBindingElement>.</span><span class="sxs-lookup"><span data-stu-id="8c731-127">Examples of transport binding elements include the <xref:System.ServiceModel.Channels.TcpTransportBindingElement>, the <xref:System.ServiceModel.Channels.HttpTransportBindingElement>, and the <xref:System.ServiceModel.Channels.NamedPipeTransportBindingElement>.</span></span>  
  
 <span data-ttu-id="8c731-128">Při vytváření nové vazby, je důležité pořadí prvků přidané vazby.</span><span class="sxs-lookup"><span data-stu-id="8c731-128">When creating new bindings, the order of the added binding elements is important.</span></span> <span data-ttu-id="8c731-129">Vždy přidáte prvky vazeb v následujícím pořadí:</span><span class="sxs-lookup"><span data-stu-id="8c731-129">Always add binding elements in the following order:</span></span>  
  
|<span data-ttu-id="8c731-130">Vrstva</span><span class="sxs-lookup"><span data-stu-id="8c731-130">Layer</span></span>|<span data-ttu-id="8c731-131">Možnosti</span><span class="sxs-lookup"><span data-stu-id="8c731-131">Options</span></span>|<span data-ttu-id="8c731-132">Požadováno</span><span class="sxs-lookup"><span data-stu-id="8c731-132">Required</span></span>|  
|-----------|-------------|--------------|  
|<span data-ttu-id="8c731-133">Tok transakcí</span><span class="sxs-lookup"><span data-stu-id="8c731-133">Transaction Flow</span></span>|<xref:System.ServiceModel.Channels.TransactionFlowBindingElement?displayProperty=nameWithType>|<span data-ttu-id="8c731-134">Ne</span><span class="sxs-lookup"><span data-stu-id="8c731-134">No</span></span>|  
|<span data-ttu-id="8c731-135">Spolehlivost</span><span class="sxs-lookup"><span data-stu-id="8c731-135">Reliability</span></span>|<xref:System.ServiceModel.Channels.ReliableSessionBindingElement?displayProperty=nameWithType>|<span data-ttu-id="8c731-136">Ne</span><span class="sxs-lookup"><span data-stu-id="8c731-136">No</span></span>|  
|<span data-ttu-id="8c731-137">Zabezpečení</span><span class="sxs-lookup"><span data-stu-id="8c731-137">Security</span></span>|<xref:System.ServiceModel.Channels.SecurityBindingElement?displayProperty=nameWithType>|<span data-ttu-id="8c731-138">Ne</span><span class="sxs-lookup"><span data-stu-id="8c731-138">No</span></span>|  
|<span data-ttu-id="8c731-139">Složené duplexní režim</span><span class="sxs-lookup"><span data-stu-id="8c731-139">Composite Duplex</span></span>|<xref:System.ServiceModel.Channels.CompositeDuplexBindingElement?displayProperty=nameWithType>|<span data-ttu-id="8c731-140">Ne</span><span class="sxs-lookup"><span data-stu-id="8c731-140">No</span></span>|  
|<span data-ttu-id="8c731-141">Kódování</span><span class="sxs-lookup"><span data-stu-id="8c731-141">Encoding</span></span>|<span data-ttu-id="8c731-142">Text, binární, MTOM, vlastní</span><span class="sxs-lookup"><span data-stu-id="8c731-142">Text, Binary, MTOM, Custom</span></span>|<span data-ttu-id="8c731-143">Ano\*</span><span class="sxs-lookup"><span data-stu-id="8c731-143">Yes\*</span></span>|  
|<span data-ttu-id="8c731-144">Přenos</span><span class="sxs-lookup"><span data-stu-id="8c731-144">Transport</span></span>|<span data-ttu-id="8c731-145">TCP, pojmenované kanály, HTTP, HTTPS, služby MSMQ, vlastní</span><span class="sxs-lookup"><span data-stu-id="8c731-145">TCP, Named Pipes, HTTP, HTTPS, MSMQ, Custom</span></span>|<span data-ttu-id="8c731-146">Ano</span><span class="sxs-lookup"><span data-stu-id="8c731-146">Yes</span></span>|  
  
 <span data-ttu-id="8c731-147">\* Protože kódování je vyžadován pro každé vazby, pokud není zadán kódování, WCF přidá výchozí kódování pro vás.</span><span class="sxs-lookup"><span data-stu-id="8c731-147">\*Because an encoding is required for each binding, if an encoding is not specified, WCF adds a default encoding for you.</span></span> <span data-ttu-id="8c731-148">Výchozí hodnota je Text/XML pro přenosy protokolu HTTP a HTTPS a binární jinak.</span><span class="sxs-lookup"><span data-stu-id="8c731-148">The default is Text/XML for the HTTP and HTTPS transports, and Binary otherwise.</span></span>  
  
## <a name="creating-a-new-binding-element"></a><span data-ttu-id="8c731-149">Vytváření nového elementu vazby</span><span class="sxs-lookup"><span data-stu-id="8c731-149">Creating a new Binding Element</span></span>  
 <span data-ttu-id="8c731-150">Kromě typy odvozené z <xref:System.ServiceModel.Channels.BindingElement> , jsou k dispozici WCF, můžete vytvořit vlastní prvky vazeb.</span><span class="sxs-lookup"><span data-stu-id="8c731-150">In addition to the types derived from <xref:System.ServiceModel.Channels.BindingElement> that are provided by WCF, you can create your own binding elements.</span></span> <span data-ttu-id="8c731-151">To umožňuje přizpůsobit způsob, jakým se vytvoří zásobník vazby a součásti, které v ní přejděte tak, že vytvoříte vlastní <xref:System.ServiceModel.Channels.BindingElement> kterou lze sestavit s další poskytované systémem typy v zásobníku.</span><span class="sxs-lookup"><span data-stu-id="8c731-151">This lets you customize the way the stack of bindings is created and the components that go in it by creating your own <xref:System.ServiceModel.Channels.BindingElement> that can be composed with the other system-provided types in the stack.</span></span>  
  
 <span data-ttu-id="8c731-152">Například, pokud budete implementovat `LoggingBindingElement` , který poskytuje schopnost protokolovat zprávy do databáze, je nutné umístit nad kanál přenosu v zásobníku kanálu.</span><span class="sxs-lookup"><span data-stu-id="8c731-152">For example, if you implement a `LoggingBindingElement` that provides the ability to log the message to a database, you must place it above a transport channel in the channel stack.</span></span> <span data-ttu-id="8c731-153">V takovém případě aplikace vytvoří vlastní vazby, která tvoří `LoggingBindingElement` s `TcpTransportBindingElement`, jako v následujícím příkladu.</span><span class="sxs-lookup"><span data-stu-id="8c731-153">In this case, the application creates a custom binding that composed the `LoggingBindingElement` with `TcpTransportBindingElement`, as in the following example.</span></span>  
  
```csharp  
Binding customBinding = new CustomBinding(  
  new LoggingBindingElement(),   
  new TcpTransportBindingElement()  
);  
```  
  
 <span data-ttu-id="8c731-154">Jak psát Vaše nového elementu vazby závisí na jeho přesný funkce.</span><span class="sxs-lookup"><span data-stu-id="8c731-154">How you write your new binding element depends on its exact functionality.</span></span> <span data-ttu-id="8c731-155">Jednou z ukázek, [přenosu: UDP](../../../../docs/framework/wcf/samples/transport-udp.md), poskytuje podrobný popis toho, jak implementovat jednoho druhu prvku vazby.</span><span class="sxs-lookup"><span data-stu-id="8c731-155">One of the samples, [Transport: UDP](../../../../docs/framework/wcf/samples/transport-udp.md), provides a detailed description of how to implement one kind of binding element.</span></span>  
  
## <a name="creating-a-new-binding"></a><span data-ttu-id="8c731-156">Vytvořením vazby</span><span class="sxs-lookup"><span data-stu-id="8c731-156">Creating a New Binding</span></span>  
 <span data-ttu-id="8c731-157">Element uživatele vytvořit vazbu lze použít dvěma způsoby.</span><span class="sxs-lookup"><span data-stu-id="8c731-157">A user-created binding element can be used in two ways.</span></span> <span data-ttu-id="8c731-158">Předchozí část ukazuje první způsob: prostřednictvím vlastní vazby.</span><span class="sxs-lookup"><span data-stu-id="8c731-158">The previous section illustrates the first way: through a custom binding.</span></span> <span data-ttu-id="8c731-159">Vlastní vazby umožňuje uživateli vytvořit své vlastní vazby založené na libovolnou sadu elementů, včetně těch vytvořené uživatelem vazby.</span><span class="sxs-lookup"><span data-stu-id="8c731-159">A custom binding allows the user to create their own binding based on an arbitrary set of binding elements, including user-created ones.</span></span>  
  
 <span data-ttu-id="8c731-160">Pokud používáte vazby ve více než jednu aplikaci, vytvořte vlastní vazbu a rozšířit <xref:System.ServiceModel.Channels.Binding>.</span><span class="sxs-lookup"><span data-stu-id="8c731-160">If you use the binding in more than one application, create your own binding and extend the <xref:System.ServiceModel.Channels.Binding>.</span></span> <span data-ttu-id="8c731-161">Tím je zabráněno ruční vytvoření vlastní vazby pokaždé, když chcete použít.</span><span class="sxs-lookup"><span data-stu-id="8c731-161">This avoids manually creating a custom binding every time you want to use it.</span></span> <span data-ttu-id="8c731-162">Uživatelem definované vazby umožňuje definovat chování vazby a zahrnují prvky uživatelem definované vazby.</span><span class="sxs-lookup"><span data-stu-id="8c731-162">A user-defined binding allows you to define the binding’s behavior and include user-defined binding elements.</span></span> <span data-ttu-id="8c731-163">A je *předem zabalené*: není nutné znovu vytvořit vazbu pokaždé, když ji používáte.</span><span class="sxs-lookup"><span data-stu-id="8c731-163">And it is *pre-packaged*: you do not have to rebuild the binding every time you use it.</span></span>  
  
 <span data-ttu-id="8c731-164">Minimálně musí implementovat uživatelem definované vazby <xref:System.ServiceModel.Channels.Binding.CreateBindingElements%2A> metoda a <xref:System.ServiceModel.Channels.Binding.Scheme%2A> vlastnost.</span><span class="sxs-lookup"><span data-stu-id="8c731-164">At a minimum, a user-defined binding must implement the <xref:System.ServiceModel.Channels.Binding.CreateBindingElements%2A> method and the <xref:System.ServiceModel.Channels.Binding.Scheme%2A> property.</span></span>  
  
 <span data-ttu-id="8c731-165"><xref:System.ServiceModel.Channels.Binding.CreateBindingElements%2A> Metoda vrátí novou <xref:System.ServiceModel.Channels.BindingElementCollection> obsahující prvky vazby pro vazbu.</span><span class="sxs-lookup"><span data-stu-id="8c731-165">The <xref:System.ServiceModel.Channels.Binding.CreateBindingElements%2A> method returns a new <xref:System.ServiceModel.Channels.BindingElementCollection> that contains the binding elements for the binding.</span></span> <span data-ttu-id="8c731-166">Kolekce je seřadit a by měl obsahovat prvky vazby protokolu nejprve, za nímž následuje kódování prvku vazby, za nímž následuje prvku vazby přenosu.</span><span class="sxs-lookup"><span data-stu-id="8c731-166">The collection is ordered, and should contain the protocol binding elements first, followed by the encoding binding element, followed by the transport binding element.</span></span> <span data-ttu-id="8c731-167">Při používání prvky vazby poskytované systémem WCF, je třeba postupovat podle prvku vazby řazení pravidla stanovená dokumentem [vlastní vazby](../../../../docs/framework/wcf/extending/custom-bindings.md).</span><span class="sxs-lookup"><span data-stu-id="8c731-167">When using the WCF system-provided binding elements, you must follow the binding element ordering rules specified in [Custom Bindings](../../../../docs/framework/wcf/extending/custom-bindings.md).</span></span> <span data-ttu-id="8c731-168">Tato kolekce by měla odkazovat nikdy objekty odkazuje v rámci třídy uživatelem definované vazby; v důsledku toho musí vracet vazby autoři `Clone()` z <xref:System.ServiceModel.Channels.BindingElementCollection> při každém volání <xref:System.ServiceModel.Channels.Binding.CreateBindingElements%2A>.</span><span class="sxs-lookup"><span data-stu-id="8c731-168">This collection should never reference objects referenced within the user-defined binding class; consequently, binding authors must return a `Clone()` of the <xref:System.ServiceModel.Channels.BindingElementCollection> on each call to <xref:System.ServiceModel.Channels.Binding.CreateBindingElements%2A>.</span></span>  
  
 <span data-ttu-id="8c731-169"><xref:System.ServiceModel.Channels.Binding.Scheme%2A> Vlastnost představuje schéma identifikátoru URI pro přenosový protokol používána na vazby.</span><span class="sxs-lookup"><span data-stu-id="8c731-169">The <xref:System.ServiceModel.Channels.Binding.Scheme%2A> property represents the URI scheme for the transport protocol in use on the binding.</span></span> <span data-ttu-id="8c731-170">Například *WSHttpBinding* a *NetTcpBinding* vrácení "http" a "net.tcp" z jejich odpovídajících <xref:System.ServiceModel.Channels.Binding.Scheme%2A> vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="8c731-170">For example, the *WSHttpBinding* and the *NetTcpBinding* return "http" and "net.tcp" from their respective <xref:System.ServiceModel.Channels.Binding.Scheme%2A> properties.</span></span>  
  
 <span data-ttu-id="8c731-171">Úplný seznam volitelné metod a vlastností pro uživatelem definované vazby najdete v tématu <xref:System.ServiceModel.Channels.Binding>.</span><span class="sxs-lookup"><span data-stu-id="8c731-171">For a complete list of optional methods and properties for user-defined bindings, see <xref:System.ServiceModel.Channels.Binding>.</span></span>  
  
### <a name="example"></a><span data-ttu-id="8c731-172">Příklad</span><span class="sxs-lookup"><span data-stu-id="8c731-172">Example</span></span>  
 <span data-ttu-id="8c731-173">Implementuje vazba profilu v tomto příkladu `SampleProfileUdpBinding`, která je odvozena z <xref:System.ServiceModel.Channels.Binding>.</span><span class="sxs-lookup"><span data-stu-id="8c731-173">This example implements profile binding in `SampleProfileUdpBinding`, which derives from <xref:System.ServiceModel.Channels.Binding>.</span></span> <span data-ttu-id="8c731-174">`SampleProfileUdpBinding` Obsahuje až čtyři prvky vazeb v něm: jeden uživatel vytvořen `UdpTransportBindingElement`; a tři poskytované systémem: `TextMessageEncodingBindingElement`, `CompositeDuplexBindingElement`, a `ReliableSessionBindingElement`.</span><span class="sxs-lookup"><span data-stu-id="8c731-174">The `SampleProfileUdpBinding` contains up to four binding elements within it: one user-created `UdpTransportBindingElement`; and three system-provided: `TextMessageEncodingBindingElement`, `CompositeDuplexBindingElement`, and `ReliableSessionBindingElement`.</span></span>  
  
```  
public override BindingElementCollection CreateBindingElements()  
{     
    BindingElementCollection bindingElements = new BindingElementCollection();  
    if (ReliableSessionEnabled)  
    {  
        bindingElements.Add(session);  
        bindingElements.Add(compositeDuplex);  
    }  
    bindingElements.Add(encoding);  
    bindingElements.Add(transport);  
    return bindingElements.Clone();  
}  
```  
  
## <a name="security-restrictions-with-duplex-contracts"></a><span data-ttu-id="8c731-175">Omezení zabezpečení s duplexní kontrakty</span><span class="sxs-lookup"><span data-stu-id="8c731-175">Security Restrictions with Duplex Contracts</span></span>  
 <span data-ttu-id="8c731-176">Ne všechny prvky vazby jsou vzájemně kompatibilní.</span><span class="sxs-lookup"><span data-stu-id="8c731-176">Not all binding elements are compatible with each other.</span></span> <span data-ttu-id="8c731-177">Konkrétně existují některá omezení na zabezpečení prvky vazeb při použití s duplexní kontrakty.</span><span class="sxs-lookup"><span data-stu-id="8c731-177">In particular, there are some restrictions on security binding elements when used with duplex contracts.</span></span>  
  
### <a name="one-shot-security"></a><span data-ttu-id="8c731-178">Jednorázové zabezpečení</span><span class="sxs-lookup"><span data-stu-id="8c731-178">One-Shot Security</span></span>  
 <span data-ttu-id="8c731-179">"Jednorázové" zabezpečení, kde jsou všechna potřebná zabezpečovací přihlašovací údaje odeslány do jedné zprávy nastavením můžete implementovat `negotiateServiceCredential` atribut \<zpráva > prvku konfigurace `false`.</span><span class="sxs-lookup"><span data-stu-id="8c731-179">You can implement "one-shot" security, where all the necessary security credentials are sent in a single message, by setting the `negotiateServiceCredential` attribute of the \<message> configuration element to `false`.</span></span>  
  
 <span data-ttu-id="8c731-180">Jednorázové ověřování s duplexní kontrakty nefunguje.</span><span class="sxs-lookup"><span data-stu-id="8c731-180">One-shot authentication does not work with duplex contracts.</span></span>  
  
 <span data-ttu-id="8c731-181">Pro kontraktů požadavek-odpověď jednorázové ověření funguje pouze v případě, že vazba zásobníku pod elementem vazby zabezpečení podporuje vytváření <xref:System.ServiceModel.Channels.IRequestChannel> nebo <xref:System.ServiceModel.Channels.IRequestSessionChannel> instance.</span><span class="sxs-lookup"><span data-stu-id="8c731-181">For Request-Reply contracts, one-shot authentication works only if the binding stack below the security binding element supports creating <xref:System.ServiceModel.Channels.IRequestChannel> or <xref:System.ServiceModel.Channels.IRequestSessionChannel> instances.</span></span>  
  
 <span data-ttu-id="8c731-182">Pro jednosměrné kontrakty jednorázové ověření funguje, pokud vazba zásobníku pod elementem vazby zabezpečení podporuje vytváření <xref:System.ServiceModel.Channels.IRequestChannel>, <xref:System.ServiceModel.Channels.IRequestSessionChannel>, <xref:System.ServiceModel.Channels.IOutputChannel> nebo <xref:System.ServiceModel.Channels.IOutputSessionChannel> instance.</span><span class="sxs-lookup"><span data-stu-id="8c731-182">For one-way contracts, one-shot authentication works if the binding stack below the security binding element supports creating <xref:System.ServiceModel.Channels.IRequestChannel>, <xref:System.ServiceModel.Channels.IRequestSessionChannel>, <xref:System.ServiceModel.Channels.IOutputChannel> or <xref:System.ServiceModel.Channels.IOutputSessionChannel> instances.</span></span>  
  
### <a name="cookie-mode-security-context-tokens"></a><span data-ttu-id="8c731-183">Tokeny kontextu zabezpečení režim souboru cookie</span><span class="sxs-lookup"><span data-stu-id="8c731-183">Cookie-mode Security Context Tokens</span></span>  
 <span data-ttu-id="8c731-184">Tokeny kontextu zabezpečení režim souboru cookie nelze použít s duplexní kontrakty.</span><span class="sxs-lookup"><span data-stu-id="8c731-184">Cookie mode security context tokens cannot be used with duplex contracts.</span></span>  
  
 <span data-ttu-id="8c731-185">Pro kontraktů požadavek-odpověď kontextu zabezpečení režim souboru cookie tokeny pracovní pouze v případě vazby zásobníku pod elementem vazby zabezpečení podporuje vytváření <xref:System.ServiceModel.Channels.IRequestChannel> nebo <xref:System.ServiceModel.Channels.IRequestSessionChannel> instance.</span><span class="sxs-lookup"><span data-stu-id="8c731-185">For Request-Reply contracts, cookie-mode security context tokens work only if the binding stack below the security binding element supports creating <xref:System.ServiceModel.Channels.IRequestChannel> or <xref:System.ServiceModel.Channels.IRequestSessionChannel> instances.</span></span>  
  
 <span data-ttu-id="8c731-186">Kontext zabezpečení režim souboru cookie pro jednosměrné kontrakty tokeny funguje, pokud vazba zásobníku pod elementem vazby zabezpečení podporuje vytváření <xref:System.ServiceModel.Channels.IRequestChannel> nebo <xref:System.ServiceModel.Channels.IRequestSessionChannel> instance.</span><span class="sxs-lookup"><span data-stu-id="8c731-186">For one-way contracts, cookie-mode security context tokens works if the binding stack below the security binding element supports creating <xref:System.ServiceModel.Channels.IRequestChannel> or <xref:System.ServiceModel.Channels.IRequestSessionChannel> instances.</span></span>  
  
### <a name="session-mode-security-context-tokens"></a><span data-ttu-id="8c731-187">Režim relace tokenů kontextu zabezpečení</span><span class="sxs-lookup"><span data-stu-id="8c731-187">Session-mode Security Context Tokens</span></span>  
 <span data-ttu-id="8c731-188">Režim relace SCT funguje pro duplexní kontrakty, pokud vazba zásobníku pod elementem vazby zabezpečení podporuje vytváření <xref:System.ServiceModel.Channels.IDuplexChannel> nebo <xref:System.ServiceModel.Channels.IDuplexSessionChannel> instance.</span><span class="sxs-lookup"><span data-stu-id="8c731-188">Session mode SCT works for duplex contracts if the binding stack below the security binding element supports creating <xref:System.ServiceModel.Channels.IDuplexChannel> or <xref:System.ServiceModel.Channels.IDuplexSessionChannel> instances.</span></span>  
  
 <span data-ttu-id="8c731-189">Režim relace SCT funguje pro požadavek-odpověď smlouvy, pokud vazba zásobníku pod elementem vazby zabezpečení podporuje vytváření <xref:System.ServiceModel.Channels.IDuplexChannel>, <xref:System.ServiceModel.Channels.IDuplexSessionChannel>, <xref:System.ServiceModel.Channels.IRequestChannel> nebo <xref:System.ServiceModel.Channels.IRequestSessionChannel>, instancí.</span><span class="sxs-lookup"><span data-stu-id="8c731-189">Session mode SCT works for Request-Reply contracts if the binding stack below the security binding element supports creating <xref:System.ServiceModel.Channels.IDuplexChannel>, <xref:System.ServiceModel.Channels.IDuplexSessionChannel>, <xref:System.ServiceModel.Channels.IRequestChannel> or <xref:System.ServiceModel.Channels.IRequestSessionChannel>, instances.</span></span>  
  
 <span data-ttu-id="8c731-190">Režim relace SCT funguje pro kontrakty 1 způsob, pokud vazba zásobníku pod elementem vazby zabezpečení podporuje vytváření <xref:System.ServiceModel.Channels.IDuplexChannel>, <xref:System.ServiceModel.Channels.IDuplexSessionChannel>, <xref:System.ServiceModel.Channels.IRequestChannel> nebo <xref:System.ServiceModel.Channels.IRequestSessionChannel> instance.</span><span class="sxs-lookup"><span data-stu-id="8c731-190">Session mode SCT works for 1-way contracts if the binding stack below the security binding element supports creating <xref:System.ServiceModel.Channels.IDuplexChannel>, <xref:System.ServiceModel.Channels.IDuplexSessionChannel>, <xref:System.ServiceModel.Channels.IRequestChannel> or <xref:System.ServiceModel.Channels.IRequestSessionChannel> instances.</span></span>  
  
## <a name="deriving-from-a-standard-binding"></a><span data-ttu-id="8c731-191">Odvozování z standardní vazby</span><span class="sxs-lookup"><span data-stu-id="8c731-191">Deriving from a Standard Binding</span></span>  
 <span data-ttu-id="8c731-192">Místo vytvoření zcela nové třídy vazba, je možné rozšířit jednu z existujících vazby poskytované systémem.</span><span class="sxs-lookup"><span data-stu-id="8c731-192">Instead of creating an entirely new binding class, it may be possible for you to extend one of the existing system-provided bindings.</span></span> <span data-ttu-id="8c731-193">Podobně jako v předchozím případě je nutné přepsat <xref:System.ServiceModel.Channels.Binding.CreateBindingElements%2A> metoda a <xref:System.ServiceModel.Channels.Binding.Scheme%2A> vlastnost.</span><span class="sxs-lookup"><span data-stu-id="8c731-193">Much like the preceding case, you must override the <xref:System.ServiceModel.Channels.Binding.CreateBindingElements%2A> method and the <xref:System.ServiceModel.Channels.Binding.Scheme%2A> property.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="8c731-194">Viz také</span><span class="sxs-lookup"><span data-stu-id="8c731-194">See Also</span></span>  
 <xref:System.ServiceModel.Channels.Binding>  
 [<span data-ttu-id="8c731-195">Vlastní vazby</span><span class="sxs-lookup"><span data-stu-id="8c731-195">Custom Bindings</span></span>](../../../../docs/framework/wcf/extending/custom-bindings.md)
