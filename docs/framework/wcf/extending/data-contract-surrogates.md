---
title: "Náhrady kontraktů dat"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology:
- dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- data contracts [WCF], surrogates
ms.assetid: 8c31134c-46c5-4ed7-94af-bab0ac0dfce5
caps.latest.revision: 
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.workload:
- dotnet
ms.openlocfilehash: f6fcae1989b75a668fd6ff38596b06feca7be9e8
ms.sourcegitcommit: 16186c34a957fdd52e5db7294f291f7530ac9d24
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 12/22/2017
---
# <a name="data-contract-surrogates"></a><span data-ttu-id="236f1-102">Náhrady kontraktů dat</span><span class="sxs-lookup"><span data-stu-id="236f1-102">Data Contract Surrogates</span></span>
<span data-ttu-id="236f1-103">Kontrakt dat *náhradní* je pokročilá funkce založena na kontrakt dat modelu.</span><span class="sxs-lookup"><span data-stu-id="236f1-103">The data contract *surrogate* is an advanced feature built upon the Data Contract model.</span></span> <span data-ttu-id="236f1-104">Tato funkce je určena pro typ přizpůsobení a nahrazování v situacích, kde chcete změnit, jak je serializováno typu, deserializovat nebo předpokládané do metadata uživatele.</span><span class="sxs-lookup"><span data-stu-id="236f1-104">This feature is designed to be used for type customization and substitution in situations where users want to change how a type is serialized, deserialized or projected into metadata.</span></span> <span data-ttu-id="236f1-105">Některé scénáře, kde lze použít náhradní je při kontraktu dat nebyl zadán pro typ, pole a vlastnosti nejsou označené jako <xref:System.Runtime.Serialization.DataMemberAttribute> atribut nebo uživatele chcete dynamicky vytvořte variace schématu.</span><span class="sxs-lookup"><span data-stu-id="236f1-105">Some scenarios where a surrogate may be used is when a data contract has not been specified for the type, fields and properties are not marked with the <xref:System.Runtime.Serialization.DataMemberAttribute> attribute or users wish to dynamically create schema variations.</span></span>  
  
 <span data-ttu-id="236f1-106">Serializace a deserializace jsou provést pomocí náhradní kontraktu dat při použití <xref:System.Runtime.Serialization.DataContractSerializer> převést z rozhraní .NET Framework na vhodný formátu, například XML.</span><span class="sxs-lookup"><span data-stu-id="236f1-106">Serialization and deserialization are accomplished with the data contract surrogate when using <xref:System.Runtime.Serialization.DataContractSerializer> to convert from .NET Framework to a suitable format, such as XML.</span></span> <span data-ttu-id="236f1-107">Náhradní kontraktu dat lze také upravit metadata exportovat za účelem typů, při vytváření reprezentace metadata, jako jsou dokumenty schématu XML (XSD).</span><span class="sxs-lookup"><span data-stu-id="236f1-107">Data contract surrogate can also be used to modify the metadata exported for types, when producing metadata representations such as XML Schema Documents (XSD).</span></span> <span data-ttu-id="236f1-108">Po importu kód je vytvořený z metadat a náhradní můžete použít v tomto případě k přizpůsobení bude vygenerovaný kód.</span><span class="sxs-lookup"><span data-stu-id="236f1-108">Upon import, code is created from metadata and the surrogate can be used in this case to customize the generated code as well.</span></span>  
  
## <a name="how-the-surrogate-works"></a><span data-ttu-id="236f1-109">Jak funguje náhradní</span><span class="sxs-lookup"><span data-stu-id="236f1-109">How the Surrogate Works</span></span>  
 <span data-ttu-id="236f1-110">Náhradní funguje tak, že jeden typ mapování (typ "původní") na jiný typ (typ "surrogated").</span><span class="sxs-lookup"><span data-stu-id="236f1-110">A surrogate works by mapping one type (the "original" type) to another type (the "surrogated" type).</span></span> <span data-ttu-id="236f1-111">Následující příklad ukazuje původní typ `Inventory` a nové náhradní `InventorySurrogated` typu.</span><span class="sxs-lookup"><span data-stu-id="236f1-111">The following example shows the original type `Inventory` and a new surrogate `InventorySurrogated` type.</span></span> <span data-ttu-id="236f1-112">`Inventory` Typ není serializovatelný ale `InventorySurrogated` je typu:</span><span class="sxs-lookup"><span data-stu-id="236f1-112">The `Inventory` type is not serializable but the `InventorySurrogated` type is:</span></span>  
  
 [!code-csharp[C_IDataContractSurrogate#1](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_idatacontractsurrogate/cs/source.cs#1)]  
  
 <span data-ttu-id="236f1-113">Protože kontrakt dat nebyla definována pro tuto třídu, převeďte na třídu náhradní s kontraktu dat třídy.</span><span class="sxs-lookup"><span data-stu-id="236f1-113">Because a data contract has not been defined for this class, convert the class to a surrogate class with a data contract.</span></span> <span data-ttu-id="236f1-114">Surrogated třída je znázorněno v následujícím příkladu:</span><span class="sxs-lookup"><span data-stu-id="236f1-114">The surrogated class is shown in the following example:</span></span>  
  
 [!code-csharp[C_IDataContractSurrogate#2](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_idatacontractsurrogate/cs/source.cs#2)]  
  
## <a name="implementing-the-idatacontractsurrogate"></a><span data-ttu-id="236f1-115">Implementace IDataContractSurrogate</span><span class="sxs-lookup"><span data-stu-id="236f1-115">Implementing the IDataContractSurrogate</span></span>  
 <span data-ttu-id="236f1-116">Pokud chcete použít náhradní kontraktu dat, implementovat <xref:System.Runtime.Serialization.IDataContractSurrogate> rozhraní.</span><span class="sxs-lookup"><span data-stu-id="236f1-116">To use the data contract surrogate, implement the <xref:System.Runtime.Serialization.IDataContractSurrogate> interface.</span></span>  
  
 <span data-ttu-id="236f1-117">Následuje přehled každé metody <xref:System.Runtime.Serialization.IDataContractSurrogate> s možnou implementaci.</span><span class="sxs-lookup"><span data-stu-id="236f1-117">The following is an overview of each method of <xref:System.Runtime.Serialization.IDataContractSurrogate> with a possible implementation.</span></span>  
  
### <a name="getdatacontracttype"></a><span data-ttu-id="236f1-118">GetDataContractType</span><span class="sxs-lookup"><span data-stu-id="236f1-118">GetDataContractType</span></span>  
 <span data-ttu-id="236f1-119"><xref:System.Runtime.Serialization.IDataContractSurrogate.GetDataContractType%2A> Metoda mapuje jeden typ do jiného.</span><span class="sxs-lookup"><span data-stu-id="236f1-119">The <xref:System.Runtime.Serialization.IDataContractSurrogate.GetDataContractType%2A> method maps one type to another.</span></span> <span data-ttu-id="236f1-120">Tato metoda je vyžadována pro serializaci, deserializace, import a export.</span><span class="sxs-lookup"><span data-stu-id="236f1-120">This method is required for serialization, deserialization, import, and export.</span></span>  
  
 <span data-ttu-id="236f1-121">První úlohou je definovat, jaké typy budou namapované na jiné typy.</span><span class="sxs-lookup"><span data-stu-id="236f1-121">The first task is defining what types will be mapped to other types.</span></span> <span data-ttu-id="236f1-122">Příklad:</span><span class="sxs-lookup"><span data-stu-id="236f1-122">For example:</span></span>  
  
 [!code-csharp[C_IDataContractSurrogate#3](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_idatacontractsurrogate/cs/source.cs#3)]  
  
-   <span data-ttu-id="236f1-123">V serializaci, tato metoda vrátí mapování následně použitá k transformaci na původní instanci surrogated instanci voláním <xref:System.Runtime.Serialization.IDataContractSurrogate.GetObjectToSerialize%2A> metoda.</span><span class="sxs-lookup"><span data-stu-id="236f1-123">On serialization, the mapping returned by this method is subsequently used to transform the original instance to a surrogated instance by calling the <xref:System.Runtime.Serialization.IDataContractSurrogate.GetObjectToSerialize%2A> method.</span></span>  
  
-   <span data-ttu-id="236f1-124">U deserializace je k deserializaci do instance typu náhradní mapování vrácená touto metodou používán serializátor.</span><span class="sxs-lookup"><span data-stu-id="236f1-124">On deserialization, the mapping returned by this method is used by the serializer to deserialize into an instance of the surrogate type.</span></span> <span data-ttu-id="236f1-125">Následně volá <xref:System.Runtime.Serialization.IDataContractSurrogate.GetDeserializedObject%2A> k transformaci surrogated instance do instance původní typu.</span><span class="sxs-lookup"><span data-stu-id="236f1-125">It subsequently calls <xref:System.Runtime.Serialization.IDataContractSurrogate.GetDeserializedObject%2A> to transform the surrogated instance into an instance of the original type.</span></span>  
  
-   <span data-ttu-id="236f1-126">Na exportu se projeví náhradní typ tato metoda vrátí získat kontrakt dat sloužící ke generování metadat.</span><span class="sxs-lookup"><span data-stu-id="236f1-126">On export, the surrogate type returned by this method is reflected to get the data contract to use for generating metadata.</span></span>  
  
-   <span data-ttu-id="236f1-127">Při importu počáteční typ se změní na náhradní typ, který se projeví získat kontrakt dat pro účely jako odkazující na podporu.</span><span class="sxs-lookup"><span data-stu-id="236f1-127">On import, the initial type is changed to a surrogate type that is reflected to get the data contract to use for purposes like referencing support.</span></span>  
  
 <span data-ttu-id="236f1-128"><xref:System.Type> Parametr je typ objektu, který probíhá serializace, deserializovat, importu nebo exportu.</span><span class="sxs-lookup"><span data-stu-id="236f1-128">The <xref:System.Type> parameter is the type of the object that is being serialized, deserialized, imported, or exported.</span></span> <span data-ttu-id="236f1-129"><xref:System.Runtime.Serialization.IDataContractSurrogate.GetDataContractType%2A> Metoda musí vracet typ vstupu, pokud náhradní nezpracovává typu.</span><span class="sxs-lookup"><span data-stu-id="236f1-129">The <xref:System.Runtime.Serialization.IDataContractSurrogate.GetDataContractType%2A> method must return the input type if the surrogate does not handle the type.</span></span> <span data-ttu-id="236f1-130">Jinak vrátí surrogated příslušného typu.</span><span class="sxs-lookup"><span data-stu-id="236f1-130">Otherwise, return the appropriate surrogated type.</span></span> <span data-ttu-id="236f1-131">Pokud existuje několik typů náhradní, množství mapování lze definovat v této metodě.</span><span class="sxs-lookup"><span data-stu-id="236f1-131">If several surrogate types exist, numerous mappings can be defined in this method.</span></span>  
  
 <span data-ttu-id="236f1-132"><xref:System.Runtime.Serialization.IDataContractSurrogate.GetDataContractType%2A> Metoda není volána pro předdefinované data primitiv kontrakt, jako <xref:System.Int32> nebo <xref:System.String>.</span><span class="sxs-lookup"><span data-stu-id="236f1-132">The <xref:System.Runtime.Serialization.IDataContractSurrogate.GetDataContractType%2A> method is not called for built-in data contract primitives, such as <xref:System.Int32> or <xref:System.String>.</span></span> <span data-ttu-id="236f1-133">Pro ostatní typy, jako je například pole, uživatelem definované typy a jiné datové struktury bude se tato metoda volána pro každý typ.</span><span class="sxs-lookup"><span data-stu-id="236f1-133">For other types, such as arrays, user-defined types, and other data structures, this method will be called for each type.</span></span>  
  
 <span data-ttu-id="236f1-134">V předchozím příkladu metoda ověří, zda `type` parametr a `Inventory` jsou porovnatelný.</span><span class="sxs-lookup"><span data-stu-id="236f1-134">In the previous example, the method checks if the `type` parameter and `Inventory` are comparable.</span></span> <span data-ttu-id="236f1-135">Pokud ano, metoda mapuje jej do `InventorySurrogated`.</span><span class="sxs-lookup"><span data-stu-id="236f1-135">If so, the method maps it to `InventorySurrogated`.</span></span> <span data-ttu-id="236f1-136">Vždy, když serializace, se nazývá deserializace, schéma import nebo export schématu, tato funkce je volána nejprve pro určení mapování mezi typy.</span><span class="sxs-lookup"><span data-stu-id="236f1-136">Whenever a serialization, deserialization, import schema, or export schema is called, this function is called first to determine the mapping between types.</span></span>  
  
### <a name="getobjecttoserialize-method"></a><span data-ttu-id="236f1-137">GetObjectToSerialize – metoda</span><span class="sxs-lookup"><span data-stu-id="236f1-137">GetObjectToSerialize Method</span></span>  
 <span data-ttu-id="236f1-138"><xref:System.Runtime.Serialization.IDataContractSurrogate.GetObjectToSerialize%2A> Metoda převede na původní instanci typu k instanci surrogated typu.</span><span class="sxs-lookup"><span data-stu-id="236f1-138">The <xref:System.Runtime.Serialization.IDataContractSurrogate.GetObjectToSerialize%2A> method converts the original type instance to the surrogated type instance.</span></span> <span data-ttu-id="236f1-139">Metoda je vyžadována pro serializaci.</span><span class="sxs-lookup"><span data-stu-id="236f1-139">The method is required for serialization.</span></span>  
  
 <span data-ttu-id="236f1-140">Dalším krokem je určit způsob, jakým fyzické data budou mapována z původní instance na náhradní implementací <xref:System.Runtime.Serialization.IDataContractSurrogate.GetObjectToSerialize%2A> metoda.</span><span class="sxs-lookup"><span data-stu-id="236f1-140">The next step is to define the way the physical data will be mapped from the original instance to the surrogate by implementing the <xref:System.Runtime.Serialization.IDataContractSurrogate.GetObjectToSerialize%2A> method.</span></span> <span data-ttu-id="236f1-141">Příklad:</span><span class="sxs-lookup"><span data-stu-id="236f1-141">For example:</span></span>  
  
 [!code-csharp[C_IDataContractSurrogate#4](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_idatacontractsurrogate/cs/source.cs#4)]  
  
 <span data-ttu-id="236f1-142"><xref:System.Runtime.Serialization.IDataContractSurrogate.GetObjectToSerialize%2A> Metoda je volána, když je objekt serializován.</span><span class="sxs-lookup"><span data-stu-id="236f1-142">The <xref:System.Runtime.Serialization.IDataContractSurrogate.GetObjectToSerialize%2A> method is called when an object is serialized.</span></span> <span data-ttu-id="236f1-143">Tato metoda přenosu dat z původní typ na pole surrogated typu.</span><span class="sxs-lookup"><span data-stu-id="236f1-143">This method transfers data from the original type to the fields of the surrogated type.</span></span> <span data-ttu-id="236f1-144">Pole může být přímo mapována na náhradní baterie pole nebo manipulace původní data mohou být uloženy do náhradní.</span><span class="sxs-lookup"><span data-stu-id="236f1-144">Fields can be directly mapped to surrogate fields, or manipulations of the original data may be stored in the surrogate.</span></span> <span data-ttu-id="236f1-145">Některé možné způsoby využití patří: přímého mapování polí, provádění operací na data, která mají být uložené v polích surrogated nebo ukládání XML původní typ v poli surrogated.</span><span class="sxs-lookup"><span data-stu-id="236f1-145">Some possible uses include: directly mapping the fields, performing operations on the data to be stored in the surrogated fields, or storing the XML of the original type in the surrogated field.</span></span>  
  
 <span data-ttu-id="236f1-146">`targetType` Parametr odkazuje na deklarovaný typ člena.</span><span class="sxs-lookup"><span data-stu-id="236f1-146">The `targetType` parameter refers to the declared type of the member.</span></span> <span data-ttu-id="236f1-147">Tento parametr je surrogated typ vrácený <xref:System.Runtime.Serialization.IDataContractSurrogate.GetDataContractType%2A> metoda.</span><span class="sxs-lookup"><span data-stu-id="236f1-147">This parameter is the surrogated type returned by the <xref:System.Runtime.Serialization.IDataContractSurrogate.GetDataContractType%2A> method.</span></span> <span data-ttu-id="236f1-148">Serializátor nevynucuje, zda je objekt vrácený přiřadit k tomuto typu.</span><span class="sxs-lookup"><span data-stu-id="236f1-148">The serializer does not enforce that the object returned is assignable to this type.</span></span> <span data-ttu-id="236f1-149">`obj` Parametr je objekt k serializaci a bude převeden na jeho náhradní v případě potřeby.</span><span class="sxs-lookup"><span data-stu-id="236f1-149">The `obj` parameter is the object to serialize, and will be converted to its surrogate if necessary.</span></span> <span data-ttu-id="236f1-150">Tato metoda musí vrátit vstupního objektu, pokud surrogated nezpracovává objektu.</span><span class="sxs-lookup"><span data-stu-id="236f1-150">This method must return the input object if the surrogated does not handle the object.</span></span> <span data-ttu-id="236f1-151">Nový objekt náhradní, jinak bude vrácen.</span><span class="sxs-lookup"><span data-stu-id="236f1-151">Otherwise, the new surrogate object will be returned.</span></span> <span data-ttu-id="236f1-152">Náhradní není volána, pokud objekt má hodnotu null.</span><span class="sxs-lookup"><span data-stu-id="236f1-152">The surrogate is not called if the object is null.</span></span> <span data-ttu-id="236f1-153">Řada náhradní mapování pro různé instance může být definován v rámci této metody.</span><span class="sxs-lookup"><span data-stu-id="236f1-153">Numerous surrogate mappings for different instances may be defined within this method.</span></span>  
  
 <span data-ttu-id="236f1-154">Při vytváření <xref:System.Runtime.Serialization.DataContractSerializer>, můžete určit, aby ho chcete zachovat odkazy na objekty.</span><span class="sxs-lookup"><span data-stu-id="236f1-154">When creating a <xref:System.Runtime.Serialization.DataContractSerializer>, you can instruct it to preserve object references.</span></span> <span data-ttu-id="236f1-155">([!INCLUDE[crdefault](../../../../includes/crdefault-md.md)] [Serializace a deserializace](../../../../docs/framework/wcf/feature-details/serialization-and-deserialization.md).) To se provádí nastavením `preserveObjectReferences` parametr v jeho konstruktor `true`.</span><span class="sxs-lookup"><span data-stu-id="236f1-155">([!INCLUDE[crdefault](../../../../includes/crdefault-md.md)] [Serialization and Deserialization](../../../../docs/framework/wcf/feature-details/serialization-and-deserialization.md).) This is done by setting the `preserveObjectReferences` parameter in its constructor to `true`.</span></span> <span data-ttu-id="236f1-156">V takovém případě náhradní je volat pouze jednou pro objekt vzhledem k tomu, že odkaz na všechny následné serializations právě zápisu do datového proudu.</span><span class="sxs-lookup"><span data-stu-id="236f1-156">In that case, the surrogate is called only once for an object since all subsequent serializations just write the reference into the stream.</span></span> <span data-ttu-id="236f1-157">Pokud `preserveObjectReferences` je nastaven na `false`, pak náhradní nazývá pokaždé, když je zjištěna instance.</span><span class="sxs-lookup"><span data-stu-id="236f1-157">If `preserveObjectReferences` is set to `false`, then the surrogate is called every time an instance is encountered.</span></span>  
  
 <span data-ttu-id="236f1-158">Pokud typ serializovat instance se liší od deklarovaný typ, jsou informace o typu zapsána do datového proudu, například `xsi:type` umožňující instance rekonstrukce na druhém konci.</span><span class="sxs-lookup"><span data-stu-id="236f1-158">If the type of the instance serialized differs from the declared type, type information is written into the stream, for example, `xsi:type` to allow the instance to be deserialized at the other end.</span></span> <span data-ttu-id="236f1-159">Tento proces probíhá, zda je objekt surrogated nebo ne.</span><span class="sxs-lookup"><span data-stu-id="236f1-159">This process occurs whether the object is surrogated or not.</span></span>  
  
 <span data-ttu-id="236f1-160">V předchozím příkladu převede k datům `Inventory` instance tohoto `InventorySurrogated`.</span><span class="sxs-lookup"><span data-stu-id="236f1-160">The example above converts the data of the `Inventory` instance to that of `InventorySurrogated`.</span></span> <span data-ttu-id="236f1-161">Kterou kontroluje typ objektu a provede nezbytné manipulace převést na typ surrogated.</span><span class="sxs-lookup"><span data-stu-id="236f1-161">It checks the type of the object and performs the necessary manipulations to convert to the surrogated type.</span></span> <span data-ttu-id="236f1-162">V tomto případě pole `Inventory` třídy se přímo překopírují na `InventorySurrogated` třídy pole.</span><span class="sxs-lookup"><span data-stu-id="236f1-162">In this case, the fields of the `Inventory` class are directly copied over to the `InventorySurrogated` class fields.</span></span>  
  
### <a name="getdeserializedobject-method"></a><span data-ttu-id="236f1-163">GetDeserializedObject – metoda</span><span class="sxs-lookup"><span data-stu-id="236f1-163">GetDeserializedObject Method</span></span>  
 <span data-ttu-id="236f1-164"><xref:System.Runtime.Serialization.IDataContractSurrogate.GetDeserializedObject%2A> Metoda převede surrogated typu instance na původní instanci typu.</span><span class="sxs-lookup"><span data-stu-id="236f1-164">The <xref:System.Runtime.Serialization.IDataContractSurrogate.GetDeserializedObject%2A> method converts the surrogated type instance to the original type instance.</span></span> <span data-ttu-id="236f1-165">Je vyžadována pro deserializaci.</span><span class="sxs-lookup"><span data-stu-id="236f1-165">It is required for deserialization.</span></span>  
  
 <span data-ttu-id="236f1-166">Dalším krokem je určit způsob, jakým fyzické data budou mapována z instance náhradní do původního.</span><span class="sxs-lookup"><span data-stu-id="236f1-166">The next task is to define the way the physical data will be mapped from the surrogate instance to the original.</span></span> <span data-ttu-id="236f1-167">Příklad:</span><span class="sxs-lookup"><span data-stu-id="236f1-167">For example:</span></span>  
  
 [!code-csharp[C_IDataContractSurrogate#5](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_idatacontractsurrogate/cs/source.cs#5)]  
  
 <span data-ttu-id="236f1-168">Tato metoda je volána pouze během deserializace objektu.</span><span class="sxs-lookup"><span data-stu-id="236f1-168">This method is called only during the deserialization of an object.</span></span> <span data-ttu-id="236f1-169">Poskytuje data zpětné mapování pro deserializace z typu náhradní zpět na původní.</span><span class="sxs-lookup"><span data-stu-id="236f1-169">It provides reverse data mapping for the deserialization from the surrogate type back to its original type.</span></span> <span data-ttu-id="236f1-170">Podobně jako `GetObjectToSerialize` metoda, některé možné používá může být přímo výměnu pole dat, provádět operace s daty a ukládat XML data.</span><span class="sxs-lookup"><span data-stu-id="236f1-170">Similar to the `GetObjectToSerialize` method, some possible uses may be to directly exchange field data, perform operations on the data, and store XML data.</span></span> <span data-ttu-id="236f1-171">Při deserializaci, nemusí vždy získat přesné datové hodnoty z původní kvůli manipulace během převodu dat.</span><span class="sxs-lookup"><span data-stu-id="236f1-171">When  deserializing, you may not always obtain the exact data values from original due to manipulations in the data conversion.</span></span>  
  
 <span data-ttu-id="236f1-172">`targetType` Parametr odkazuje na deklarovaný typ člena.</span><span class="sxs-lookup"><span data-stu-id="236f1-172">The `targetType` parameter refers to the declared type of the member.</span></span> <span data-ttu-id="236f1-173">Tento parametr je surrogated typ vrácený `GetDataContractType` metoda.</span><span class="sxs-lookup"><span data-stu-id="236f1-173">This parameter is the surrogated type returned by the `GetDataContractType` method.</span></span> <span data-ttu-id="236f1-174">`obj` Parametr odkazuje na objekt, který má byla deserializovat.</span><span class="sxs-lookup"><span data-stu-id="236f1-174">The `obj` parameter refers to the object that has been deserialized.</span></span> <span data-ttu-id="236f1-175">Objekt můžete převést zpět na původní, pokud je surrogated.</span><span class="sxs-lookup"><span data-stu-id="236f1-175">The object can be converted back to its original type if it is surrogated.</span></span> <span data-ttu-id="236f1-176">Tato metoda vrátí vstupního objektu, pokud náhradní nezpracovává objektu.</span><span class="sxs-lookup"><span data-stu-id="236f1-176">This method returns the input object if the surrogate does not handle the object.</span></span> <span data-ttu-id="236f1-177">Deserializovaný objekt, jinak bude vrácen, po dokončení jeho převodu.</span><span class="sxs-lookup"><span data-stu-id="236f1-177">Otherwise, the deserialized object will be returned once its conversion has been completed.</span></span> <span data-ttu-id="236f1-178">Pokud existuje několik typů náhradní, může poskytovat převod dat z náhradní na primární pro každou tak, že zadáte každý typ a jeho převodu.</span><span class="sxs-lookup"><span data-stu-id="236f1-178">If several surrogate types exist, you may provide data conversion from surrogate to primary type for each by indicating each type and its conversion.</span></span>  
  
 <span data-ttu-id="236f1-179">Když se vrátí objekt, jsou aktualizované pro objekt vrácený rutinou tento náhradní vnitřní objekt tabulky.</span><span class="sxs-lookup"><span data-stu-id="236f1-179">When returning an object, the internal object tables are updated with the object returned by this surrogate.</span></span> <span data-ttu-id="236f1-180">Všechny následné odkazy na instanci obdrží surrogated instance z tabulky objektu.</span><span class="sxs-lookup"><span data-stu-id="236f1-180">Any subsequent references to an instance will obtain the surrogated instance from the object tables.</span></span>  
  
 <span data-ttu-id="236f1-181">Předchozí příklad převede objekty typu `InventorySurrogated` zpět na počáteční typ `Inventory`.</span><span class="sxs-lookup"><span data-stu-id="236f1-181">The previous example converts objects of type `InventorySurrogated` back to the initial type `Inventory`.</span></span> <span data-ttu-id="236f1-182">V takovém případě přímo přenosu dat zpět z `InventorySurrogated` jeho odpovídající pole v `Inventory`.</span><span class="sxs-lookup"><span data-stu-id="236f1-182">In this case, data is directly transferred back from `InventorySurrogated` to its corresponding fields in `Inventory`.</span></span> <span data-ttu-id="236f1-183">Protože nejsou k dispozici žádné manipulace dat, každý člen pole bude obsahovat stejné hodnoty jako před serializaci.</span><span class="sxs-lookup"><span data-stu-id="236f1-183">Because there are no data manipulations, the each of the member fields will contain the same values as before the serialization.</span></span>  
  
### <a name="getcustomdatatoexport-method"></a><span data-ttu-id="236f1-184">GetCustomDataToExport – metoda</span><span class="sxs-lookup"><span data-stu-id="236f1-184">GetCustomDataToExport Method</span></span>  
 <span data-ttu-id="236f1-185">Při exportu schéma, <xref:System.Runtime.Serialization.IDataContractSurrogate.GetCustomDataToExport%2A> metoda je volitelná.</span><span class="sxs-lookup"><span data-stu-id="236f1-185">When exporting a schema, the <xref:System.Runtime.Serialization.IDataContractSurrogate.GetCustomDataToExport%2A> method is optional.</span></span> <span data-ttu-id="236f1-186">Umožňuje vložit další data nebo pomocné parametry do exportovaný schématu.</span><span class="sxs-lookup"><span data-stu-id="236f1-186">It is used to insert additional data or hints into the exported schema.</span></span> <span data-ttu-id="236f1-187">Na úrovni typ nebo člen úrovně jde vložit další data.</span><span class="sxs-lookup"><span data-stu-id="236f1-187">Additional data can be inserted at the member level or type level.</span></span> <span data-ttu-id="236f1-188">Příklad:</span><span class="sxs-lookup"><span data-stu-id="236f1-188">For example:</span></span>  
  
 [!code-csharp[C_IDataContractSurrogate#6](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_idatacontractsurrogate/cs/source.cs#6)]  
  
 <span data-ttu-id="236f1-189">Tato metoda (se dvěma přetížení) umožňuje zahrnutí doplňující informace do metadat buď na úrovni člena nebo typu.</span><span class="sxs-lookup"><span data-stu-id="236f1-189">This method (with two overloads) enables the inclusion of extra information into the metadata either at the member or type level.</span></span> <span data-ttu-id="236f1-190">Je možné zahrnout pomocné parametry o tom, zda člen veřejné nebo soukromé a komentáře, které by zachovaná v průběhu exportu a importu schématu.</span><span class="sxs-lookup"><span data-stu-id="236f1-190">It is possible to include hints about whether a member is public or private, and comments which would be preserved throughout the export and import of the schema.</span></span> <span data-ttu-id="236f1-191">Tyto informace by dojít ke ztrátě bez této metody.</span><span class="sxs-lookup"><span data-stu-id="236f1-191">Such information would be lost without this method.</span></span> <span data-ttu-id="236f1-192">Tato metoda nezpůsobí vložení nebo odstranění typů nebo členy, ale spíš přidá další data schémata na kteroukoli z těchto úrovní.</span><span class="sxs-lookup"><span data-stu-id="236f1-192">This method does not cause the insertion or deletion of members or types, but rather adds additional data to the schemas at either of these levels.</span></span>  
  
 <span data-ttu-id="236f1-193">Metoda je přetížena a může trvat buď `Type` (`clrtype` parametr) nebo <xref:System.Reflection.MemberInfo> (`memberInfo` parametr).</span><span class="sxs-lookup"><span data-stu-id="236f1-193">The method is overloaded and can take either a `Type` (`clrtype` parameter) or <xref:System.Reflection.MemberInfo> (`memberInfo` parameter).</span></span> <span data-ttu-id="236f1-194">Druhý parametr je vždy `Type` (`dataContractType` parametr).</span><span class="sxs-lookup"><span data-stu-id="236f1-194">The second parameter is always a `Type` (`dataContractType` parameter).</span></span> <span data-ttu-id="236f1-195">Tato metoda je volána pro každý člen a typ surrogated `dataContractType` typu.</span><span class="sxs-lookup"><span data-stu-id="236f1-195">This method is called for every member and type of the surrogated `dataContractType` type.</span></span>  
  
 <span data-ttu-id="236f1-196">Některé z těchto přetížení musí vracet buď `null` nebo serializovatelný objekt.</span><span class="sxs-lookup"><span data-stu-id="236f1-196">Either of these overloads must return either `null` or a serializable object.</span></span> <span data-ttu-id="236f1-197">Poznámky na exportovaný schéma bude serializovat objekt nesmí být nulová.</span><span class="sxs-lookup"><span data-stu-id="236f1-197">A non-null object will be serialized as annotation into the exported schema.</span></span> <span data-ttu-id="236f1-198">Pro `Type` přetížení, každý typ, který je exportován do schématu posílá tuto metodu v společně s surrogated typ jako první parametr `dataContractType` parametr.</span><span class="sxs-lookup"><span data-stu-id="236f1-198">For the `Type` overload, each type that is exported to schema is sent to this method in the first parameter along with the surrogated type as the `dataContractType` parameter.</span></span> <span data-ttu-id="236f1-199">Pro `MemberInfo` přetížení, každý člen, který je exportován do schématu odešle její informace, jako `memberInfo` parametr s surrogated typu v druhý parametr.</span><span class="sxs-lookup"><span data-stu-id="236f1-199">For the `MemberInfo` overload, each member that is exported to schema sends its information as the `memberInfo` parameter with the surrogated type in the second parameter.</span></span>  
  
#### <a name="getcustomdatatoexport-method-type-type"></a><span data-ttu-id="236f1-200">Metoda GetCustomDataToExport (typ, typ)</span><span class="sxs-lookup"><span data-stu-id="236f1-200">GetCustomDataToExport Method (Type, Type)</span></span>  
 <span data-ttu-id="236f1-201"><xref:System.Runtime.Serialization.IDataContractSurrogate.GetCustomDataToExport%28System.Type%2CSystem.Type%29?displayProperty=nameWithType> Metoda je volána při exportu schématu pro každý typ definici.</span><span class="sxs-lookup"><span data-stu-id="236f1-201">The <xref:System.Runtime.Serialization.IDataContractSurrogate.GetCustomDataToExport%28System.Type%2CSystem.Type%29?displayProperty=nameWithType> method is called during schema export for every type definition.</span></span> <span data-ttu-id="236f1-202">Při exportu metodu přidá informace do typů v rámci schématu.</span><span class="sxs-lookup"><span data-stu-id="236f1-202">The method adds information to the types within the schema when exporting.</span></span> <span data-ttu-id="236f1-203">Každý typ definované posílá této metodě určit, jestli je žádná další data, která musí být součástí ve schématu.</span><span class="sxs-lookup"><span data-stu-id="236f1-203">Each type defined is sent to this method to determine whether there is any additional data that needs to be included in the schema.</span></span>  
  
#### <a name="getcustomdatatoexport-method-memberinfo-type"></a><span data-ttu-id="236f1-204">Metoda GetCustomDataToExport (MemberInfo –, typ).</span><span class="sxs-lookup"><span data-stu-id="236f1-204">GetCustomDataToExport Method (MemberInfo, Type)</span></span>  
 <span data-ttu-id="236f1-205"><xref:System.Runtime.Serialization.IDataContractSurrogate.GetCustomDataToExport%28System.Reflection.MemberInfo%2CSystem.Type%29?displayProperty=nameWithType> Je volána v průběhu exportu pro každý člen v typy, které jsou exportovány.</span><span class="sxs-lookup"><span data-stu-id="236f1-205">The <xref:System.Runtime.Serialization.IDataContractSurrogate.GetCustomDataToExport%28System.Reflection.MemberInfo%2CSystem.Type%29?displayProperty=nameWithType> is called during export for every member in the types that are exported.</span></span> <span data-ttu-id="236f1-206">Tato funkce umožňuje přizpůsobit jakékoli komentáře pro členy, které budou zahrnuty ve schématu při exportu.</span><span class="sxs-lookup"><span data-stu-id="236f1-206">This function enables you to customize any comments for the members that will be included in the schema upon export.</span></span> <span data-ttu-id="236f1-207">Informace o všech členů v rámci třídy posílá této metody zkontrolujte, zda žádná další data je třeba přidat ve schématu.</span><span class="sxs-lookup"><span data-stu-id="236f1-207">The information for every member within the class is sent to this method to check whether any additional data need to be added in the schema.</span></span>  
  
 <span data-ttu-id="236f1-208">V příkladu výše hledání prostřednictvím `dataContractType` pro každého člena náhradního.</span><span class="sxs-lookup"><span data-stu-id="236f1-208">The example above searches through the `dataContractType` for each member of the surrogate.</span></span> <span data-ttu-id="236f1-209">Pak vrátí modifikátor odpovídající přístup pro každé pole.</span><span class="sxs-lookup"><span data-stu-id="236f1-209">It then returns the appropriate access modifier for each field.</span></span> <span data-ttu-id="236f1-210">Bez této přizpůsobení je výchozí hodnota pro modifikátory přístupu veřejné.</span><span class="sxs-lookup"><span data-stu-id="236f1-210">Without this customization, the default value for access modifiers is public.</span></span> <span data-ttu-id="236f1-211">Všichni členové proto by být definován jako veřejné v kód, který vygenerovala pomocí exportovaný schématu bez ohledu na to, jaké jsou jejich omezení skutečné přístupu.</span><span class="sxs-lookup"><span data-stu-id="236f1-211">Therefore, all members would be defined as public in the code generated using the exported schema no matter what their actual access restrictions are.</span></span> <span data-ttu-id="236f1-212">Pokud nepoužíváte Tato implementace člen `numpens` by být veřejné v exportovaném schématu, i když byl definován v náhradní jako privátní.</span><span class="sxs-lookup"><span data-stu-id="236f1-212">When not using this implementation, the member `numpens` would be public in the exported schema even though it was defined in the surrogate as private.</span></span> <span data-ttu-id="236f1-213">Prostřednictvím této metody v exportovaném schématu mohou být generována – modifikátor přístupu jako soukromé.</span><span class="sxs-lookup"><span data-stu-id="236f1-213">Through the use of this method, in the exported schema, the access modifier can be generated as private.</span></span>  
  
### <a name="getreferencedtypeonimport-method"></a><span data-ttu-id="236f1-214">GetReferencedTypeOnImport – metoda</span><span class="sxs-lookup"><span data-stu-id="236f1-214">GetReferencedTypeOnImport Method</span></span>  
 <span data-ttu-id="236f1-215">Tato metoda se mapuje <xref:System.Type> náhradního původní typu.</span><span class="sxs-lookup"><span data-stu-id="236f1-215">This method maps the <xref:System.Type> of the surrogate to the original type.</span></span> <span data-ttu-id="236f1-216">Tato metoda je volitelné pro import schématu.</span><span class="sxs-lookup"><span data-stu-id="236f1-216">This method is optional for schema importation.</span></span>  
  
 <span data-ttu-id="236f1-217">Při vytváření náhradní, který importuje schéma a vygeneruje pro ni kód, je dalším krokem k definování typu náhradní instance na původní.</span><span class="sxs-lookup"><span data-stu-id="236f1-217">When creating a surrogate that imports a schema and generates code for it, the next task is to define the type of a surrogate instance to its original type.</span></span>  
  
 <span data-ttu-id="236f1-218">Pokud generovaný kód musí odkazovat na existující typ uživatele, k tomu je potřeba implementace <xref:System.Runtime.Serialization.IDataContractSurrogate.GetReferencedTypeOnImport%2A> metoda.</span><span class="sxs-lookup"><span data-stu-id="236f1-218">If the generated code needs to reference an existing user type, this is done by implementing the <xref:System.Runtime.Serialization.IDataContractSurrogate.GetReferencedTypeOnImport%2A> method.</span></span>  
  
 <span data-ttu-id="236f1-219">Při importu schéma, tato metoda je volána pro každý typ deklarace k mapování kontrakt surrogated dat na typ.</span><span class="sxs-lookup"><span data-stu-id="236f1-219">When importing a schema, this method is called for every type declaration to map the surrogated data contract to a type.</span></span> <span data-ttu-id="236f1-220">Parametry řetězce `typeName` a `typeNamespace` zadat název a obor názvů surrogated typu.</span><span class="sxs-lookup"><span data-stu-id="236f1-220">The string parameters `typeName` and `typeNamespace` define the name and namespace of the surrogated type.</span></span> <span data-ttu-id="236f1-221">Návratovou hodnotu pro <xref:System.Runtime.Serialization.IDataContractSurrogate.GetReferencedTypeOnImport%2A> slouží k určení, zda je třeba vytvořit nový typ.</span><span class="sxs-lookup"><span data-stu-id="236f1-221">The return value for <xref:System.Runtime.Serialization.IDataContractSurrogate.GetReferencedTypeOnImport%2A> is used to determine whether a new type needs to be generated.</span></span> <span data-ttu-id="236f1-222">Tato metoda musí vrátit platný typ nebo hodnotu null.</span><span class="sxs-lookup"><span data-stu-id="236f1-222">This method must return either a valid type or null.</span></span> <span data-ttu-id="236f1-223">Typ vrácený se použije pro platné typy jako odkazovaný typ generovaného kódu.</span><span class="sxs-lookup"><span data-stu-id="236f1-223">For valid types, the type returned will be used as a referenced type in the generated code.</span></span> <span data-ttu-id="236f1-224">Pokud vrátí se hodnota null, se bude odkazovat žádný typ a nový typ musí být vytvořen.</span><span class="sxs-lookup"><span data-stu-id="236f1-224">If null is returned, no type will be referenced and a new type must be created.</span></span> <span data-ttu-id="236f1-225">Pokud existuje několik náhrady, je možné provést pro každý typ náhradní zpět na typ počáteční mapování.</span><span class="sxs-lookup"><span data-stu-id="236f1-225">If several surrogates exist, it is possible to perform the mapping for each surrogate type back to its initial type.</span></span>  
  
 <span data-ttu-id="236f1-226">`customData` Parametr je objekt původně vrácený <xref:System.Runtime.Serialization.IDataContractSurrogate.GetCustomDataToExport%2A>.</span><span class="sxs-lookup"><span data-stu-id="236f1-226">The `customData` parameter is the object originally returned from <xref:System.Runtime.Serialization.IDataContractSurrogate.GetCustomDataToExport%2A>.</span></span> <span data-ttu-id="236f1-227">To `customData` se používá při náhradní autoři chcete vložit další data nebo pomocné parametry do metadat, které mají být použita ke generování kódu.</span><span class="sxs-lookup"><span data-stu-id="236f1-227">This `customData` is used when surrogate authors want to insert extra data/hints into the metadata to use during import to generate code.</span></span>  
  
### <a name="processimportedtype-method"></a><span data-ttu-id="236f1-228">ProcessImportedType – metoda</span><span class="sxs-lookup"><span data-stu-id="236f1-228">ProcessImportedType Method</span></span>  
 <span data-ttu-id="236f1-229"><xref:System.Runtime.Serialization.IDataContractSurrogate.ProcessImportedType%2A> Metoda přizpůsobí jakýkoli typ vytvořené z import schématu.</span><span class="sxs-lookup"><span data-stu-id="236f1-229">The <xref:System.Runtime.Serialization.IDataContractSurrogate.ProcessImportedType%2A> method customizes any type created from schema importation.</span></span> <span data-ttu-id="236f1-230">Tato metoda je volitelné.</span><span class="sxs-lookup"><span data-stu-id="236f1-230">This method is optional.</span></span>  
  
 <span data-ttu-id="236f1-231">Při importu schéma, tato metoda umožňuje pro importovaný typ a kompilace informace k přizpůsobení.</span><span class="sxs-lookup"><span data-stu-id="236f1-231">When importing a schema, this method allows for any imported type and compilation information to be customized.</span></span> <span data-ttu-id="236f1-232">Příklad:</span><span class="sxs-lookup"><span data-stu-id="236f1-232">For example:</span></span>  
  
 [!code-csharp[C_IDataContractSurrogate#7](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_idatacontractsurrogate/cs/source.cs#7)]  
  
 <span data-ttu-id="236f1-233">Během importu tato metoda je volána pro každý typ vygenerovat.</span><span class="sxs-lookup"><span data-stu-id="236f1-233">During import, this method is called for every type generated.</span></span> <span data-ttu-id="236f1-234">Změnit zadaný <xref:System.CodeDom.CodeTypeDeclaration> nebo upravit <xref:System.CodeDom.CodeCompileUnit>.</span><span class="sxs-lookup"><span data-stu-id="236f1-234">Change the specified <xref:System.CodeDom.CodeTypeDeclaration> or modify the <xref:System.CodeDom.CodeCompileUnit>.</span></span> <span data-ttu-id="236f1-235">To zahrnuje změnu názvu, členy, atributy a mnoho dalších vlastností `CodeTypeDeclaration`.</span><span class="sxs-lookup"><span data-stu-id="236f1-235">This includes changing the name, members, attributes, and many other properties of the `CodeTypeDeclaration`.</span></span> <span data-ttu-id="236f1-236">Zpracováním `CodeCompileUnit`, je možné upravit direktivy, obory názvů, odkazovaná sestavení a několik dalších aspektů.</span><span class="sxs-lookup"><span data-stu-id="236f1-236">By processing the `CodeCompileUnit`, it is possible to modify the directives, namespaces, referenced assemblies, and several other aspects.</span></span>  
  
 <span data-ttu-id="236f1-237">`CodeTypeDeclaration` Parametr obsahuje deklaraci typu DOM kódu.</span><span class="sxs-lookup"><span data-stu-id="236f1-237">The `CodeTypeDeclaration` parameter contains the code DOM type declaration.</span></span> <span data-ttu-id="236f1-238">`CodeCompileUnit` Parametr umožňuje upravovat pro zpracování kód.</span><span class="sxs-lookup"><span data-stu-id="236f1-238">The `CodeCompileUnit` parameter allows for modification for processing the code.</span></span>  <span data-ttu-id="236f1-239">Vrácení `null` výsledkem deklarace typu, budou odstraněny.</span><span class="sxs-lookup"><span data-stu-id="236f1-239">Returning `null` results in the type declaration being discarded.</span></span> <span data-ttu-id="236f1-240">Naopak při vrácení `CodeTypeDeclaration`, změny se zachovají.</span><span class="sxs-lookup"><span data-stu-id="236f1-240">Conversely, when returning a `CodeTypeDeclaration`, the modifications are preserved.</span></span>  
  
 <span data-ttu-id="236f1-241">Při exportu metadat je vložit vlastní data, musí být uživateli poskytnutý při importu, aby ho bylo možné použít.</span><span class="sxs-lookup"><span data-stu-id="236f1-241">If custom data is inserted during metadata export, it needs to be provided to the user during import so that it can be used.</span></span> <span data-ttu-id="236f1-242">Tato vlastní data lze pro programování pomocné parametry modelu nebo jiných komentáře.</span><span class="sxs-lookup"><span data-stu-id="236f1-242">This custom data can be used for programming model hints, or other comments.</span></span> <span data-ttu-id="236f1-243">Každý `CodeTypeDeclaration` a <xref:System.CodeDom.CodeTypeMember> instance zahrnuje vlastní data jako <xref:System.CodeDom.CodeObject.UserData%2A> vlastnost přetypovat `IDataContractSurrogate` typu.</span><span class="sxs-lookup"><span data-stu-id="236f1-243">Each `CodeTypeDeclaration` and <xref:System.CodeDom.CodeTypeMember> instance includes custom data as the <xref:System.CodeDom.CodeObject.UserData%2A> property, cast to the `IDataContractSurrogate` type.</span></span>  
  
 <span data-ttu-id="236f1-244">V předchozím příkladu provádí některé změny schématu naimportovány.</span><span class="sxs-lookup"><span data-stu-id="236f1-244">The example above performs some changes on the schema imported.</span></span> <span data-ttu-id="236f1-245">Kód zachová soukromé členy původní typu pomocí náhradní.</span><span class="sxs-lookup"><span data-stu-id="236f1-245">The code preserves private members of the original type by using a surrogate.</span></span> <span data-ttu-id="236f1-246">Výchozí modifikátor přístupu při importu schématu je `public`.</span><span class="sxs-lookup"><span data-stu-id="236f1-246">The default access modifier when importing a schema is `public`.</span></span> <span data-ttu-id="236f1-247">Proto bude všichni členové náhradní schéma veřejné, pokud nezměnil, jako v následujícím příkladu.</span><span class="sxs-lookup"><span data-stu-id="236f1-247">Therefore, all members of the surrogate schema will be public unless modified, as in this example.</span></span> <span data-ttu-id="236f1-248">Během exportu vloží se do metadata o tom, které jsou členy soukromá vlastní data.</span><span class="sxs-lookup"><span data-stu-id="236f1-248">During export, custom data is inserted into the metadata about which members are private.</span></span> <span data-ttu-id="236f1-249">V příkladu vlastní data pro vyhledávání, ověří, zda je privátní – modifikátor přístupu a pak upravením příslušného člena na privátní, a nastavení jeho atributy.</span><span class="sxs-lookup"><span data-stu-id="236f1-249">The example looks up the custom data, checks whether the access modifier is private, and then modifies the appropriate member to be private by setting its attributes.</span></span> <span data-ttu-id="236f1-250">Bez této přizpůsobení `numpens` člen je definován jako veřejné místo soukromé.</span><span class="sxs-lookup"><span data-stu-id="236f1-250">Without this customization, the `numpens` member would be defined as public instead of private.</span></span>  
  
### <a name="getknowncustomdatatypes-method"></a><span data-ttu-id="236f1-251">GetKnownCustomDataTypes – metoda</span><span class="sxs-lookup"><span data-stu-id="236f1-251">GetKnownCustomDataTypes Method</span></span>  
 <span data-ttu-id="236f1-252">Tato metoda získá z schéma definované vlastní datové typy.</span><span class="sxs-lookup"><span data-stu-id="236f1-252">This method obtains custom data types defined from the schema.</span></span> <span data-ttu-id="236f1-253">Metoda je volitelné pro import schématu.</span><span class="sxs-lookup"><span data-stu-id="236f1-253">The method is optional for schema importation.</span></span>  
  
 <span data-ttu-id="236f1-254">Metoda je volána na začátku schématu exportu a importu.</span><span class="sxs-lookup"><span data-stu-id="236f1-254">The method is called at the beginning of schema export and import.</span></span> <span data-ttu-id="236f1-255">Metoda vrátí vlastní datové typy používá ve schématu exportovat nebo importovat.</span><span class="sxs-lookup"><span data-stu-id="236f1-255">The method returns the custom data types used in the schema exported or imported.</span></span> <span data-ttu-id="236f1-256">Byla předána metodě <xref:System.Collections.ObjectModel.Collection%601> ( `customDataTypes` parametr), což je kolekci typů.</span><span class="sxs-lookup"><span data-stu-id="236f1-256">The method is passed a <xref:System.Collections.ObjectModel.Collection%601> (the `customDataTypes` parameter), which is a collection of types.</span></span> <span data-ttu-id="236f1-257">Metoda měli přidat další známé typy k této kolekci.</span><span class="sxs-lookup"><span data-stu-id="236f1-257">The method should add additional known types to this collection.</span></span> <span data-ttu-id="236f1-258">Známé vlastní datové typy jsou potřebná k povolení serializace a deserializace pomocí vlastních dat <xref:System.Runtime.Serialization.DataContractSerializer>.</span><span class="sxs-lookup"><span data-stu-id="236f1-258">The known custom data types are needed to enable serialization and deserialization of custom data using the <xref:System.Runtime.Serialization.DataContractSerializer>.</span></span> [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)]<span data-ttu-id="236f1-259">[Známé typy kontraktů dat](../../../../docs/framework/wcf/feature-details/data-contract-known-types.md).</span><span class="sxs-lookup"><span data-stu-id="236f1-259"> [Data Contract Known Types](../../../../docs/framework/wcf/feature-details/data-contract-known-types.md).</span></span>  
  
## <a name="implementing-a-surrogate"></a><span data-ttu-id="236f1-260">Implementace náhradní</span><span class="sxs-lookup"><span data-stu-id="236f1-260">Implementing a Surrogate</span></span>  
 <span data-ttu-id="236f1-261">Chcete-li použít náhradní kontraktu dat v rámci [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)], je třeba provést několik zvláštní postupy.</span><span class="sxs-lookup"><span data-stu-id="236f1-261">To use the data contract surrogate within [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)], you must follow a few special procedures.</span></span>  
  
### <a name="to-use-a-surrogate-for-serialization-and-deserialization"></a><span data-ttu-id="236f1-262">Použít náhradní serializace a deserializace</span><span class="sxs-lookup"><span data-stu-id="236f1-262">To Use a Surrogate for Serialization and Deserialization</span></span>  
 <span data-ttu-id="236f1-263">Použití <xref:System.Runtime.Serialization.DataContractSerializer> k provedení serializace a deserializace dat pomocí náhradní.</span><span class="sxs-lookup"><span data-stu-id="236f1-263">Use the <xref:System.Runtime.Serialization.DataContractSerializer> to perform serialization and deserialization of data with the surrogate.</span></span> <span data-ttu-id="236f1-264"><xref:System.Runtime.Serialization.DataContractSerializer> Je vytvořené <xref:System.ServiceModel.Description.DataContractSerializerOperationBehavior>.</span><span class="sxs-lookup"><span data-stu-id="236f1-264">The <xref:System.Runtime.Serialization.DataContractSerializer> is created by the <xref:System.ServiceModel.Description.DataContractSerializerOperationBehavior>.</span></span> <span data-ttu-id="236f1-265">Musí být zadaná také náhradní.</span><span class="sxs-lookup"><span data-stu-id="236f1-265">The surrogate must also be specified.</span></span>  
  
##### <a name="to-implement-serialization-and-deserialization"></a><span data-ttu-id="236f1-266">K implementaci serializace a deserializace</span><span class="sxs-lookup"><span data-stu-id="236f1-266">To implement serialization and deserialization</span></span>  
  
1.  <span data-ttu-id="236f1-267">Vytvoření instance <xref:System.ServiceModel.ServiceHost> pro vaši službu.</span><span class="sxs-lookup"><span data-stu-id="236f1-267">Create an instance of the <xref:System.ServiceModel.ServiceHost> for your service.</span></span> <span data-ttu-id="236f1-268">Úplné pokyny naleznete v části [základní programování WCF](../../../../docs/framework/wcf/basic-wcf-programming.md).</span><span class="sxs-lookup"><span data-stu-id="236f1-268">For complete instructions, see [Basic WCF Programming](../../../../docs/framework/wcf/basic-wcf-programming.md).</span></span>  
  
2.  <span data-ttu-id="236f1-269">Pro každý <xref:System.ServiceModel.Description.ServiceEndpoint> hostitele určenou službu najít jeho <xref:System.ServiceModel.Description.OperationDescription>.</span><span class="sxs-lookup"><span data-stu-id="236f1-269">For every <xref:System.ServiceModel.Description.ServiceEndpoint> of the specified service host, find its <xref:System.ServiceModel.Description.OperationDescription>.</span></span>  
  
3.  <span data-ttu-id="236f1-270">Vyhledávání pomocí operace chování k určení, zda instanci <xref:System.ServiceModel.Description.DataContractSerializerOperationBehavior> nalezen.</span><span class="sxs-lookup"><span data-stu-id="236f1-270">Search through the operation behaviors to determine if an instance of the <xref:System.ServiceModel.Description.DataContractSerializerOperationBehavior> is found.</span></span>  
  
4.  <span data-ttu-id="236f1-271">Pokud <xref:System.ServiceModel.Description.DataContractSerializerOperationBehavior> je najít, nastavte jeho <xref:System.ServiceModel.Description.DataContractSerializerOperationBehavior.DataContractSurrogate%2A> vlastnost do nové instance náhradního.</span><span class="sxs-lookup"><span data-stu-id="236f1-271">If a <xref:System.ServiceModel.Description.DataContractSerializerOperationBehavior> is found, set its <xref:System.ServiceModel.Description.DataContractSerializerOperationBehavior.DataContractSurrogate%2A> property to a new instance of the surrogate.</span></span> <span data-ttu-id="236f1-272">Pokud žádné <xref:System.ServiceModel.Description.DataContractSerializerOperationBehavior> je najít, vytvořte novou instanci a nastavte <xref:System.ServiceModel.Description.DataContractSerializerOperationBehavior.DataContractSurrogate%2A> členem do nové instance náhradního nové chování.</span><span class="sxs-lookup"><span data-stu-id="236f1-272">If no <xref:System.ServiceModel.Description.DataContractSerializerOperationBehavior> is found, then create a new instance and set the <xref:System.ServiceModel.Description.DataContractSerializerOperationBehavior.DataContractSurrogate%2A> member of the new behavior to a new instance of the surrogate.</span></span>  
  
5.  <span data-ttu-id="236f1-273">Nakonec přidejte toto nové chování pro aktuální operaci chování, jak je znázorněno v následujícím příkladu:</span><span class="sxs-lookup"><span data-stu-id="236f1-273">Finally, add this new behavior to the current operation behaviors, as shown in the following example:</span></span>  
  
     [!code-csharp[C_IDataContractSurrogate#8](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_idatacontractsurrogate/cs/source.cs#8)]  
  
### <a name="to-use-a-surrogate-for-metadata-import"></a><span data-ttu-id="236f1-274">Použít náhradní pro Import metadat</span><span class="sxs-lookup"><span data-stu-id="236f1-274">To Use a Surrogate for Metadata Import</span></span>  
 <span data-ttu-id="236f1-275">Při importu metadat jako WSDL a XSD ke generování kódu na straně klienta, musí být přidán do komponentu starost generování kódu z schématu XSD náhradní <xref:System.Runtime.Serialization.XsdDataContractImporter>.</span><span class="sxs-lookup"><span data-stu-id="236f1-275">When importing metadata like WSDL and XSD to generate client-side code, the surrogate needs to be added to the component responsible for generating code from XSD schema, <xref:System.Runtime.Serialization.XsdDataContractImporter>.</span></span> <span data-ttu-id="236f1-276">Chcete-li to provést přímo upravit <xref:System.ServiceModel.Description.WsdlImporter> používá pro import metadat.</span><span class="sxs-lookup"><span data-stu-id="236f1-276">To do this, directly modify the <xref:System.ServiceModel.Description.WsdlImporter> used to import metadata.</span></span>  
  
##### <a name="to-implement-a-surrogate-for-metadata-importation"></a><span data-ttu-id="236f1-277">K implementaci náhradní pro import metadat</span><span class="sxs-lookup"><span data-stu-id="236f1-277">To implement a surrogate for metadata importation</span></span>  
  
1.  <span data-ttu-id="236f1-278">Import metadat pomocí <xref:System.ServiceModel.Description.WsdlImporter> třídy.</span><span class="sxs-lookup"><span data-stu-id="236f1-278">Import the metadata using the <xref:System.ServiceModel.Description.WsdlImporter> class.</span></span>  
  
2.  <span data-ttu-id="236f1-279">Použití <xref:System.Collections.Generic.Dictionary%602.TryGetValue%2A> metody zkontrolujte, zda <xref:System.Runtime.Serialization.XsdDataContractImporter> byla definována.</span><span class="sxs-lookup"><span data-stu-id="236f1-279">Use the <xref:System.Collections.Generic.Dictionary%602.TryGetValue%2A> method to check whether an <xref:System.Runtime.Serialization.XsdDataContractImporter> has been defined.</span></span>  
  
3.  <span data-ttu-id="236f1-280">Pokud <xref:System.Collections.Generic.Dictionary%602.TryGetValue%2A> metoda vrátí `false`, vytvořte novou <xref:System.Runtime.Serialization.XsdDataContractImporter> a nastavit jeho <xref:System.Runtime.Serialization.XsdDataContractImporter.Options%2A> vlastnost novou instanci třídy <xref:System.Runtime.Serialization.ImportOptions> – třída.</span><span class="sxs-lookup"><span data-stu-id="236f1-280">If the <xref:System.Collections.Generic.Dictionary%602.TryGetValue%2A> method returns `false`, create a new <xref:System.Runtime.Serialization.XsdDataContractImporter> and set its <xref:System.Runtime.Serialization.XsdDataContractImporter.Options%2A> property to a new instance of the <xref:System.Runtime.Serialization.ImportOptions> class.</span></span> <span data-ttu-id="236f1-281">Jinak použijte – Importér vrácený `out` parametr <xref:System.Collections.Generic.Dictionary%602.TryGetValue%2A> metoda.</span><span class="sxs-lookup"><span data-stu-id="236f1-281">Otherwise, use the importer returned by the `out` parameter of the <xref:System.Collections.Generic.Dictionary%602.TryGetValue%2A> method.</span></span>  
  
4.  <span data-ttu-id="236f1-282">Pokud <xref:System.Runtime.Serialization.XsdDataContractImporter> neobsahuje žádné <xref:System.Runtime.Serialization.ImportOptions> definované, pak nastavte vlastnost, která má být novou instanci třídy <xref:System.Runtime.Serialization.ImportOptions> třídy.</span><span class="sxs-lookup"><span data-stu-id="236f1-282">If the <xref:System.Runtime.Serialization.XsdDataContractImporter> has no <xref:System.Runtime.Serialization.ImportOptions> defined, then set the property to be a new instance of the <xref:System.Runtime.Serialization.ImportOptions> class.</span></span>  
  
5.  <span data-ttu-id="236f1-283">Nastavte <xref:System.Runtime.Serialization.ImportOptions.DataContractSurrogate%2A> vlastnost <xref:System.Runtime.Serialization.ImportOptions> z <xref:System.Runtime.Serialization.XsdDataContractImporter> do nové instance náhradního.</span><span class="sxs-lookup"><span data-stu-id="236f1-283">Set the <xref:System.Runtime.Serialization.ImportOptions.DataContractSurrogate%2A> property of the <xref:System.Runtime.Serialization.ImportOptions> of the <xref:System.Runtime.Serialization.XsdDataContractImporter> to a new instance of the surrogate.</span></span>  
  
6.  <span data-ttu-id="236f1-284">Přidat <xref:System.Runtime.Serialization.XsdDataContractImporter> ke kolekci vrácené <xref:System.ServiceModel.Description.MetadataExporter.State%2A> vlastnost <xref:System.ServiceModel.Description.WsdlImporter> (zděděno z <xref:System.ServiceModel.Description.MetadataExporter> třídy.)</span><span class="sxs-lookup"><span data-stu-id="236f1-284">Add the <xref:System.Runtime.Serialization.XsdDataContractImporter> to the collection returned by the <xref:System.ServiceModel.Description.MetadataExporter.State%2A> property of the <xref:System.ServiceModel.Description.WsdlImporter> (inherited from the <xref:System.ServiceModel.Description.MetadataExporter> class.)</span></span>  
  
7.  <span data-ttu-id="236f1-285">Použití <xref:System.ServiceModel.Description.WsdlImporter.ImportAllContracts%2A> metodu <xref:System.ServiceModel.Description.WsdlImporter> pro import všech kontraktů dat ve schématu.</span><span class="sxs-lookup"><span data-stu-id="236f1-285">Use the <xref:System.ServiceModel.Description.WsdlImporter.ImportAllContracts%2A> method of the <xref:System.ServiceModel.Description.WsdlImporter> to import all of the data contracts within the schema.</span></span> <span data-ttu-id="236f1-286">Při posledním kroku z schémata načíst voláním náhradní generování kódu.</span><span class="sxs-lookup"><span data-stu-id="236f1-286">During the last step, code is generated from the schemas loaded by calling into the surrogate.</span></span>  
  
     [!code-csharp[C_IDataContractSurrogate#9](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_idatacontractsurrogate/cs/source.cs#9)]  
  
### <a name="to-use-a-surrogate-for-metadata-export"></a><span data-ttu-id="236f1-287">Chcete-li použít náhradní pro Export metadat</span><span class="sxs-lookup"><span data-stu-id="236f1-287">To Use a surrogate for Metadata Export</span></span>  
 <span data-ttu-id="236f1-288">Ve výchozím nastavení, pokud Export metadat z [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] pro službu, je třeba vytvořit WSDL i XSD schématu.</span><span class="sxs-lookup"><span data-stu-id="236f1-288">By default, when exporting metadata from [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] for a service, both WSDL and XSD schema needs to be generated.</span></span> <span data-ttu-id="236f1-289">Náhradní musí být přidán do komponentu starost generování schématu XSD pro typy kontraktů dat, <xref:System.Runtime.Serialization.XsdDataContractExporter>.</span><span class="sxs-lookup"><span data-stu-id="236f1-289">The surrogate needs to be added to the component responsible for generating XSD schema for data contract types, <xref:System.Runtime.Serialization.XsdDataContractExporter>.</span></span> <span data-ttu-id="236f1-290">K tomuto účelu použijte chování, který implementuje <xref:System.ServiceModel.Description.IWsdlExportExtension> změnit <xref:System.ServiceModel.Description.WsdlExporter>, nebo přímo upravit <xref:System.ServiceModel.Description.WsdlExporter> používá pro export metadat.</span><span class="sxs-lookup"><span data-stu-id="236f1-290">To do this, either use a behavior that implements <xref:System.ServiceModel.Description.IWsdlExportExtension> to modify the <xref:System.ServiceModel.Description.WsdlExporter>, or directly modify the <xref:System.ServiceModel.Description.WsdlExporter> used to export metadata.</span></span>  
  
##### <a name="to-use-a-surrogate-for-metadata-export"></a><span data-ttu-id="236f1-291">Chcete-li použít náhradní pro export metadat</span><span class="sxs-lookup"><span data-stu-id="236f1-291">To use a surrogate for metadata export</span></span>  
  
1.  <span data-ttu-id="236f1-292">Vytvořte novou <xref:System.ServiceModel.Description.WsdlExporter> nebo použít `wsdlExporter` byl předán parametr <xref:System.ServiceModel.Description.IWsdlExportExtension.ExportContract%2A> metoda.</span><span class="sxs-lookup"><span data-stu-id="236f1-292">Create a new <xref:System.ServiceModel.Description.WsdlExporter> or use the `wsdlExporter` parameter passed to the <xref:System.ServiceModel.Description.IWsdlExportExtension.ExportContract%2A> method.</span></span>  
  
2.  <span data-ttu-id="236f1-293">Použití <xref:System.Collections.Generic.Dictionary%602.TryGetValue%2A> funkce lze zjistit, jestli <xref:System.Runtime.Serialization.XsdDataContractExporter> byla definována.</span><span class="sxs-lookup"><span data-stu-id="236f1-293">Use the <xref:System.Collections.Generic.Dictionary%602.TryGetValue%2A> function to check whether an <xref:System.Runtime.Serialization.XsdDataContractExporter> has been defined.</span></span>  
  
3.  <span data-ttu-id="236f1-294">Pokud <xref:System.Collections.Generic.Dictionary%602.TryGetValue%2A> vrátí `false`, vytvořte novou <xref:System.Runtime.Serialization.XsdDataContractExporter> s generovaného schémat XML z <xref:System.ServiceModel.Description.WsdlExporter>a přidejte ji do kolekce vrácené <xref:System.ServiceModel.Description.MetadataExporter.State%2A> vlastnost <xref:System.ServiceModel.Description.WsdlExporter>.</span><span class="sxs-lookup"><span data-stu-id="236f1-294">If <xref:System.Collections.Generic.Dictionary%602.TryGetValue%2A> returns `false`, create a new <xref:System.Runtime.Serialization.XsdDataContractExporter> with the generated XML schemas from the <xref:System.ServiceModel.Description.WsdlExporter>, and add it to the collection returned by the <xref:System.ServiceModel.Description.MetadataExporter.State%2A> property of the <xref:System.ServiceModel.Description.WsdlExporter>.</span></span> <span data-ttu-id="236f1-295">Jinak použijte exportu vrácený `out` parametr <xref:System.Collections.Generic.Dictionary%602.TryGetValue%2A> metoda.</span><span class="sxs-lookup"><span data-stu-id="236f1-295">Otherwise, use the exporter returned by the `out` parameter of the <xref:System.Collections.Generic.Dictionary%602.TryGetValue%2A> method.</span></span>  
  
4.  <span data-ttu-id="236f1-296">Pokud <xref:System.Runtime.Serialization.XsdDataContractExporter> neobsahuje žádné <xref:System.Runtime.Serialization.ExportOptions> definované, pak nastavte <xref:System.Runtime.Serialization.XsdDataContractExporter.Options%2A> vlastnost novou instanci třídy <xref:System.Runtime.Serialization.ExportOptions> – třída.</span><span class="sxs-lookup"><span data-stu-id="236f1-296">If the <xref:System.Runtime.Serialization.XsdDataContractExporter> has no <xref:System.Runtime.Serialization.ExportOptions> defined, then set the <xref:System.Runtime.Serialization.XsdDataContractExporter.Options%2A> property to a new instance of the <xref:System.Runtime.Serialization.ExportOptions> class.</span></span>  
  
5.  <span data-ttu-id="236f1-297">Nastavte <xref:System.Runtime.Serialization.ExportOptions.DataContractSurrogate%2A> vlastnost <xref:System.Runtime.Serialization.ExportOptions> z <xref:System.Runtime.Serialization.XsdDataContractExporter> do nové instance náhradního.</span><span class="sxs-lookup"><span data-stu-id="236f1-297">Set the <xref:System.Runtime.Serialization.ExportOptions.DataContractSurrogate%2A> property of the <xref:System.Runtime.Serialization.ExportOptions> of the <xref:System.Runtime.Serialization.XsdDataContractExporter> to a new instance of the surrogate.</span></span> <span data-ttu-id="236f1-298">Následné kroky pro export metadat nevyžadují žádné změny.</span><span class="sxs-lookup"><span data-stu-id="236f1-298">Subsequent steps for exporting metadata do not require any changes.</span></span>  
  
     [!code-csharp[C_IDataContractSurrogate#10](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_idatacontractsurrogate/cs/source.cs#10)]  
  
## <a name="see-also"></a><span data-ttu-id="236f1-299">Viz také</span><span class="sxs-lookup"><span data-stu-id="236f1-299">See Also</span></span>  
 <xref:System.Runtime.Serialization.DataContractSerializer>  
 <xref:System.Runtime.Serialization.IDataContractSurrogate>  
 <xref:System.ServiceModel.Description.DataContractSerializerOperationBehavior>  
 <xref:System.Runtime.Serialization.ImportOptions>  
 <xref:System.Runtime.Serialization.ExportOptions>  
 [<span data-ttu-id="236f1-300">Použití kontraktů dat</span><span class="sxs-lookup"><span data-stu-id="236f1-300">Using Data Contracts</span></span>](../../../../docs/framework/wcf/feature-details/using-data-contracts.md)
