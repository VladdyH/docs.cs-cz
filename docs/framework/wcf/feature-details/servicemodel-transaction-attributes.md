---
title: Atributy transakce ServiceModel
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords: transactions [WCF], ServiceModel attributes
ms.assetid: 1e0d2436-6ae5-439b-9765-a448d6f60000
caps.latest.revision: "18"
author: Erikre
ms.author: erikre
manager: erikre
ms.openlocfilehash: 4857c6e9f77e8cf201c47814405e4db9f08ae2d8
ms.sourcegitcommit: bd1ef61f4bb794b25383d3d72e71041a5ced172e
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/18/2017
---
# <a name="servicemodel-transaction-attributes"></a><span data-ttu-id="2e1e4-102">Atributy transakce ServiceModel</span><span class="sxs-lookup"><span data-stu-id="2e1e4-102">ServiceModel Transaction Attributes</span></span>
[!INCLUDE[indigo1](../../../../includes/indigo1-md.md)]<span data-ttu-id="2e1e4-103">poskytne vlastnosti, na tři standard <xref:System.ServiceModel> atributy, které vám umožní nakonfigurovat chování transakce [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] služby:</span><span class="sxs-lookup"><span data-stu-id="2e1e4-103"> provides properties on three standard <xref:System.ServiceModel> attributes that enable you to configure the behavior of transactions for a [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] service:</span></span>  
  
-   <xref:System.ServiceModel.TransactionFlowAttribute>  
  
-   <xref:System.ServiceModel.ServiceBehaviorAttribute>  
  
-   <xref:System.ServiceModel.OperationBehaviorAttribute>  
  
## <a name="transactionflowattribute"></a><span data-ttu-id="2e1e4-104">TransactionFlowAttribute</span><span class="sxs-lookup"><span data-stu-id="2e1e4-104">TransactionFlowAttribute</span></span>  
 <span data-ttu-id="2e1e4-105"><xref:System.ServiceModel.TransactionFlowAttribute> Atribut určuje ochoty operace v kontraktu služby tak, aby přijímal příchozí transakce z klienta.</span><span class="sxs-lookup"><span data-stu-id="2e1e4-105">The <xref:System.ServiceModel.TransactionFlowAttribute> attribute specifies the willingness of an operation in a service contract to accept incoming transactions from a client.</span></span> <span data-ttu-id="2e1e4-106">Atribut obsahuje tento ovládací prvek s následující vlastnost: použijte transakce <xref:System.ServiceModel.TransactionFlowOption> výčtu k určení, zda je příchozí transakce <xref:System.ServiceModel.TransactionFlowOption.Mandatory>, <xref:System.ServiceModel.TransactionFlowOption.Allowed>, nebo <xref:System.ServiceModel.TransactionFlowOption.NotAllowed>.</span><span class="sxs-lookup"><span data-stu-id="2e1e4-106">The attribute provides this control with the following property: Transactions use the <xref:System.ServiceModel.TransactionFlowOption> enumeration to specify whether an incoming transaction is <xref:System.ServiceModel.TransactionFlowOption.Mandatory>, <xref:System.ServiceModel.TransactionFlowOption.Allowed>, or <xref:System.ServiceModel.TransactionFlowOption.NotAllowed>.</span></span>  
  
 <span data-ttu-id="2e1e4-107">Toto je pouze atribut, který se vztahuje na externí interakce s klientem služby operací.</span><span class="sxs-lookup"><span data-stu-id="2e1e4-107">This is the only attribute that relates service operations to external interactions with a client.</span></span> <span data-ttu-id="2e1e4-108">Atributy popsané v následujících částech se týkají použití transakce v rámci provedení operace.</span><span class="sxs-lookup"><span data-stu-id="2e1e4-108">The attributes described in the following sections relate to the use of transactions within the execution of the operation.</span></span>  
  
## <a name="servicebehaviorattribute"></a><span data-ttu-id="2e1e4-109">ServiceBehaviorAttribute</span><span class="sxs-lookup"><span data-stu-id="2e1e4-109">ServiceBehaviorAttribute</span></span>  
 <span data-ttu-id="2e1e4-110"><xref:System.ServiceModel.ServiceBehaviorAttribute> Atribut určuje chování vnitřní spuštění implementaci kontraktu služby.</span><span class="sxs-lookup"><span data-stu-id="2e1e4-110">The <xref:System.ServiceModel.ServiceBehaviorAttribute> attribute specifies the internal execution behavior of a service contract implementation.</span></span> <span data-ttu-id="2e1e4-111">Vlastnosti specifické pro transakci tohoto atributu:</span><span class="sxs-lookup"><span data-stu-id="2e1e4-111">Transaction-specific properties of this attribute include:</span></span>  
  
-   <span data-ttu-id="2e1e4-112"><xref:System.ServiceModel.ServiceBehaviorAttribute.TransactionAutoCompleteOnSessionClose%2A>Určuje, zda chcete provést nedokončené transakci po ukončení relace.</span><span class="sxs-lookup"><span data-stu-id="2e1e4-112"><xref:System.ServiceModel.ServiceBehaviorAttribute.TransactionAutoCompleteOnSessionClose%2A> specifies whether to complete an uncompleted transaction when the session closes.</span></span> <span data-ttu-id="2e1e4-113">Výchozí hodnota pro tuto vlastnost je `false`.</span><span class="sxs-lookup"><span data-stu-id="2e1e4-113">The default value for this property is `false`.</span></span> <span data-ttu-id="2e1e4-114">Pokud je tato vlastnost `true`a příchozí relace byla korektně vypnout místo ukončování z důvodu sítě nebo klienta chyb, jakékoli nedokončené transakce je úspěšně dokončen.</span><span class="sxs-lookup"><span data-stu-id="2e1e4-114">If this property is `true`, and the incoming session was gracefully shut down instead of closing due to network or client faults, any uncompleted transaction is successfully completed.</span></span> <span data-ttu-id="2e1e4-115">Jinak, pokud je tato vlastnost `false` nebo pokud relace nebyl řádně uzavřen, všechny nedokončené transakce je vrácena zpět při ukončení relace.</span><span class="sxs-lookup"><span data-stu-id="2e1e4-115">Otherwise, if this property is `false` or if the session was not gracefully closed, any uncompleted transaction is rolled back when the session closes.</span></span> <span data-ttu-id="2e1e4-116">Pokud je tato vlastnost `true`, příchozí kanál musí být na bázi relací.</span><span class="sxs-lookup"><span data-stu-id="2e1e4-116">If this property is `true`, the incoming channel must be session-based.</span></span>  
  
-   <span data-ttu-id="2e1e4-117"><xref:System.ServiceModel.ServiceBehaviorAttribute.ReleaseServiceInstanceOnTransactionComplete%2A>Určuje, zda je základní instance služby vydané po dokončení transakce.</span><span class="sxs-lookup"><span data-stu-id="2e1e4-117"><xref:System.ServiceModel.ServiceBehaviorAttribute.ReleaseServiceInstanceOnTransactionComplete%2A> specifies whether the underlying service instance is released when a transaction completes.</span></span> <span data-ttu-id="2e1e4-118">Výchozí hodnota pro tuto vlastnost je `true`.</span><span class="sxs-lookup"><span data-stu-id="2e1e4-118">The default value for this property is `true`.</span></span> <span data-ttu-id="2e1e4-119">Další příchozí zprávy způsobí, že nová instance základní má být vytvořen, zahození všechny jednotlivé transakce stavu, který může mít uchovávat předchozí instanci.</span><span class="sxs-lookup"><span data-stu-id="2e1e4-119">The next inbound message causes a new underlying instance to be created, discarding any per-transaction state that the previous instance might have held.</span></span> <span data-ttu-id="2e1e4-120">Uvolnění instance služby je interní akce služba má a nemá žádný vliv na všechny existující připojení nebo relací, které mohou mít klienti navázat.</span><span class="sxs-lookup"><span data-stu-id="2e1e4-120">Releasing a service instance is an internal action the service takes and has no impact on any existing connections or sessions that clients might have established.</span></span> <span data-ttu-id="2e1e4-121">Tato funkce je ekvivalentní volání funkce aktivace za běhu, kterou poskytuje modelu COM +.</span><span class="sxs-lookup"><span data-stu-id="2e1e4-121">This functionality is equivalent to the just-in-time activation feature COM+ provides.</span></span> <span data-ttu-id="2e1e4-122">Pokud je vlastnost `true`, <xref:System.ServiceModel.ServiceBehaviorAttribute.ConcurrencyMode%2A> musí být roven <xref:System.ServiceModel.ConcurrencyMode.Single>.</span><span class="sxs-lookup"><span data-stu-id="2e1e4-122">If the property is `true`, <xref:System.ServiceModel.ServiceBehaviorAttribute.ConcurrencyMode%2A> must be equal to <xref:System.ServiceModel.ConcurrencyMode.Single>.</span></span> <span data-ttu-id="2e1e4-123">Služba, jinak hodnota vyvolá výjimku neplatná konfigurace ověřování během spouštění.</span><span class="sxs-lookup"><span data-stu-id="2e1e4-123">Otherwise, the service throws an invalid configuration validation exception during startup.</span></span>  
  
-   <span data-ttu-id="2e1e4-124"><xref:System.ServiceModel.ServiceBehaviorAttribute.TransactionIsolationLevel%2A>Určuje úroveň izolace, který chcete použít pro transakce v rámci služby; Tato vlastnost má jeden z <xref:System.Transactions.IsolationLevel> hodnoty.</span><span class="sxs-lookup"><span data-stu-id="2e1e4-124"><xref:System.ServiceModel.ServiceBehaviorAttribute.TransactionIsolationLevel%2A> specifies the isolation level to use for transactions within the service; this property takes one of the <xref:System.Transactions.IsolationLevel> values.</span></span> <span data-ttu-id="2e1e4-125">Pokud vlastnost úroveň izolace místní je jiné než <xref:System.Transactions.IsolationLevel.Unspecified>, úroveň izolace transakce příchozí musí shodovat s nastavením této vlastnosti místní.</span><span class="sxs-lookup"><span data-stu-id="2e1e4-125">If the local isolation level property is anything other than <xref:System.Transactions.IsolationLevel.Unspecified>, the isolation level of an incoming transaction must match the setting of this local property.</span></span> <span data-ttu-id="2e1e4-126">Jinak se odmítne příchozí transakce a chybu budou odeslána zpět do klienta.</span><span class="sxs-lookup"><span data-stu-id="2e1e4-126">Otherwise, the incoming transaction is rejected, and a fault is sent back to the client.</span></span> <span data-ttu-id="2e1e4-127">Pokud <xref:System.ServiceModel.OperationBehaviorAttribute.TransactionScopeRequired%2A> je `true`, a neexistují žádné transakce je naplněn, určuje tato vlastnost <xref:System.Transactions.IsolationLevel> hodnotu pro místně vytvořené transakce.</span><span class="sxs-lookup"><span data-stu-id="2e1e4-127">If <xref:System.ServiceModel.OperationBehaviorAttribute.TransactionScopeRequired%2A> is `true`, and no transaction is flowed, this property determines the <xref:System.Transactions.IsolationLevel> value to use for the locally created transaction.</span></span> <span data-ttu-id="2e1e4-128">Pokud <xref:System.Transactions.IsolationLevel> je nastaven na <xref:System.Transactions.IsolationLevel.Unspecified>, <xref:System.Transactions.IsolationLevel> <xref:System.Transactions.IsolationLevel.Serializable> se používá.</span><span class="sxs-lookup"><span data-stu-id="2e1e4-128">If <xref:System.Transactions.IsolationLevel> is set to <xref:System.Transactions.IsolationLevel.Unspecified>, <xref:System.Transactions.IsolationLevel><xref:System.Transactions.IsolationLevel.Serializable> is used.</span></span>  
  
-   <span data-ttu-id="2e1e4-129"><xref:System.ServiceModel.ServiceBehaviorAttribute.TransactionTimeout%2A>Určuje časové období, ve kterém musí dokončit v službě vytvořit novou transakci.</span><span class="sxs-lookup"><span data-stu-id="2e1e4-129"><xref:System.ServiceModel.ServiceBehaviorAttribute.TransactionTimeout%2A> specifies the time period within which a new transaction created at the service must complete.</span></span> <span data-ttu-id="2e1e4-130">Pokud je dosaženo této doby a transakce nebyla dokončena, bude přerušeno.</span><span class="sxs-lookup"><span data-stu-id="2e1e4-130">If this time is reached and the transaction has not been completed, it will abort.</span></span> <span data-ttu-id="2e1e4-131"><xref:System.TimeSpan> Slouží jako <xref:System.Transactions.TransactionScope> časový limit pro žádné operace, které mají <xref:System.ServiceModel.OperationBehaviorAttribute.TransactionScopeRequired%2A> nastavena na `true` a pro novou transakci byla vytvořena.</span><span class="sxs-lookup"><span data-stu-id="2e1e4-131">The <xref:System.TimeSpan> is used as the <xref:System.Transactions.TransactionScope> time-out for any operations that have <xref:System.ServiceModel.OperationBehaviorAttribute.TransactionScopeRequired%2A> set to `true` and for which a new transaction was created.</span></span> <span data-ttu-id="2e1e4-132">Časový limit je maximální povolená doba od vytvoření transakce pro dokončení fáze 1 dvoufázového protokolu.</span><span class="sxs-lookup"><span data-stu-id="2e1e4-132">The time-out is the maximum allowed duration from the creation of the transaction to the completion of phase 1 in the two-phase commit protocol.</span></span> <span data-ttu-id="2e1e4-133">Hodnota časového limitu, používá je vždy nižší hodnota mezi hodnotami <xref:System.ServiceModel.ServiceBehaviorAttribute.TransactionTimeout%2A> vlastnost a `transactionTimeout` nastavení konfigurace.</span><span class="sxs-lookup"><span data-stu-id="2e1e4-133">The time-out value used is always the lower value between the <xref:System.ServiceModel.ServiceBehaviorAttribute.TransactionTimeout%2A> property and the `transactionTimeout` configuration setting.</span></span>  
  
## <a name="operationbehaviorattribute"></a><span data-ttu-id="2e1e4-134">OperationBehaviorAttribute</span><span class="sxs-lookup"><span data-stu-id="2e1e4-134">OperationBehaviorAttribute</span></span>  
 <span data-ttu-id="2e1e4-135"><xref:System.ServiceModel.OperationBehaviorAttribute> Atribut určuje chování metody k implementaci služby.</span><span class="sxs-lookup"><span data-stu-id="2e1e4-135">The <xref:System.ServiceModel.OperationBehaviorAttribute> attribute specifies the behaviors of the methods in the service implementation.</span></span> <span data-ttu-id="2e1e4-136">Můžete se k označení chování při spuštění konkrétní operace.</span><span class="sxs-lookup"><span data-stu-id="2e1e4-136">You can use it to indicate the operation's specific execution behavior.</span></span> <span data-ttu-id="2e1e4-137">Vlastnosti tohoto atributu neovlivní popis webové služby popis Language (WSDL) kontrakt služby a jsou čistě prvky [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] programovací model, který povolit běžné funkce, které vývojáři jinak mají k implementaci sami.</span><span class="sxs-lookup"><span data-stu-id="2e1e4-137">Properties of this attribute do not affect the Web Service Description Language (WSDL) description of the service contract, and are purely elements of the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] programming model that enable common features that developers otherwise have to implement themselves.</span></span>  
  
 <span data-ttu-id="2e1e4-138">Tento atribut má následující vlastnosti specifické pro transakce:</span><span class="sxs-lookup"><span data-stu-id="2e1e4-138">This attribute has the following transaction-specific properties:</span></span>  
  
-   <span data-ttu-id="2e1e4-139"><xref:System.ServiceModel.OperationBehaviorAttribute.TransactionScopeRequired%2A>Určuje, zda metoda musí být spuštěn v rámci rozsahu aktivní transakce.</span><span class="sxs-lookup"><span data-stu-id="2e1e4-139"><xref:System.ServiceModel.OperationBehaviorAttribute.TransactionScopeRequired%2A> specifies whether a method must execute within an active transaction scope.</span></span> <span data-ttu-id="2e1e4-140">Výchozí hodnota je `false`.</span><span class="sxs-lookup"><span data-stu-id="2e1e4-140">The default is `false`.</span></span> <span data-ttu-id="2e1e4-141">Pokud <xref:System.ServiceModel.OperationBehaviorAttribute> atribut není nastaven pro metodu, také znamená, že metoda nebude provést v transakci.</span><span class="sxs-lookup"><span data-stu-id="2e1e4-141">If the <xref:System.ServiceModel.OperationBehaviorAttribute> attribute is not set for a method, it also implies that the method will not execute in a transaction.</span></span> <span data-ttu-id="2e1e4-142">Pokud oboru transakce není potřeba pro operace, všechny transakce, která se nachází v záhlaví zprávy není aktivován a zůstane jako element <xref:System.ServiceModel.OperationContext.IncomingMessageProperties%2A> z <xref:System.ServiceModel.OperationContext>.</span><span class="sxs-lookup"><span data-stu-id="2e1e4-142">If a transaction scope is not required for an operation, any transaction that is present within the message header is not activated and remains as an element of the <xref:System.ServiceModel.OperationContext.IncomingMessageProperties%2A> of the <xref:System.ServiceModel.OperationContext>.</span></span> <span data-ttu-id="2e1e4-143">Pokud oboru transakce je zapotřebí pro operace, zdroj pro transakce je odvozený z jednoho z následujících akcí:</span><span class="sxs-lookup"><span data-stu-id="2e1e4-143">If a transaction scope is required for an operation, the source for the transaction is derived from one of the following:</span></span>  
  
    -   <span data-ttu-id="2e1e4-144">Pokud transakce je plynoucích z klienta, tuto metodu je spustit v oboru transakce vytvořené pomocí této distribuované transakce.</span><span class="sxs-lookup"><span data-stu-id="2e1e4-144">If a transaction is flowed from the client, the method is executed under a transaction scope created using that distributed transaction.</span></span>  
  
    -   <span data-ttu-id="2e1e4-145">S zařazených do fronty přenosu se používá na transakci použité k dequeue – zpráva.</span><span class="sxs-lookup"><span data-stu-id="2e1e4-145">With a queued transport, the transaction used to dequeue the message is used.</span></span> <span data-ttu-id="2e1e4-146">Všimněte si, že používá transakce není sdružení probíhajících transakcí v tom, že nebyl zadán původní odesílatel zprávy.</span><span class="sxs-lookup"><span data-stu-id="2e1e4-146">Note that the transaction used is not a flowed transaction, in that it was not provided by the original sender of the message.</span></span>  
  
    -   <span data-ttu-id="2e1e4-147">Vlastní přenos může poskytnout transakce prostřednictvím `TransportTransactionProperty`.</span><span class="sxs-lookup"><span data-stu-id="2e1e4-147">A custom transport can provide a transaction through the use of the `TransportTransactionProperty`.</span></span>  
  
    -   <span data-ttu-id="2e1e4-148">Pokud žádná z výše uvedeného poskytuje externího zdroje pro transakci, nový <xref:System.Transactions.Transaction> bezprostředně před volání metody se vytvoří instance.</span><span class="sxs-lookup"><span data-stu-id="2e1e4-148">If none of the above provides an external source for a transaction, a new <xref:System.Transactions.Transaction> instance is created immediately prior to calling the method.</span></span>  
  
-   <span data-ttu-id="2e1e4-149"><xref:System.ServiceModel.OperationBehaviorAttribute.TransactionAutoComplete%2A>Určuje, zda je transakce, ve kterém metoda spustí automaticky dokončit, pokud jsou vyvolány žádné neošetřené výjimky.</span><span class="sxs-lookup"><span data-stu-id="2e1e4-149"><xref:System.ServiceModel.OperationBehaviorAttribute.TransactionAutoComplete%2A> specifies whether the transaction in which the method executes is automatically completed if no unhandled exceptions are thrown.</span></span> <span data-ttu-id="2e1e4-150">Pokud je tato vlastnost `true`, volání infrastruktury automaticky označí transakce, jako "dokončeno", pokud uživatel metoda vrátí bez způsobení výjimky.</span><span class="sxs-lookup"><span data-stu-id="2e1e4-150">If this property is `true`, the calling infrastructure automatically marks the transaction as "completed" if the user method returns without throwing an exception.</span></span> <span data-ttu-id="2e1e4-151">Pokud je tato vlastnost `false`, transakce je připojen k instanci a je pouze označena jako "dokončeno", pokud klient volá následné metodu, která je označena tato vlastnost rovna `true`, nebo pokud následné metoda explicitně volá <xref:System.ServiceModel.OperationContext.SetTransactionComplete%2A>.</span><span class="sxs-lookup"><span data-stu-id="2e1e4-151">If this property is `false`, the transaction is attached to the instance, and is only marked as "completed" if the client calls a subsequent method that is marked with this property equal to `true`, or if a subsequent method explicitly calls <xref:System.ServiceModel.OperationContext.SetTransactionComplete%2A>.</span></span> <span data-ttu-id="2e1e4-152">Nepodařilo se provést některý z těchto výsledků v transakci nikdy se "dokončeno" a omezením pracovní není potvrdit, pokud <xref:System.ServiceModel.ServiceBehaviorAttribute.TransactionAutoCompleteOnSessionClose%2A> je nastavena na `true`.</span><span class="sxs-lookup"><span data-stu-id="2e1e4-152">Failure to perform either of these results in the transaction never being "completed," and the contained work is not committed, unless the <xref:System.ServiceModel.ServiceBehaviorAttribute.TransactionAutoCompleteOnSessionClose%2A> property is set to `true`.</span></span> <span data-ttu-id="2e1e4-153">Pokud je tato vlastnost nastavena na `true`, je nutné použít kanál s relací a <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A> musí být nastavena na <xref:System.ServiceModel.InstanceContextMode.PerSession>.</span><span class="sxs-lookup"><span data-stu-id="2e1e4-153">If this property is set to `true`, you must use a channel with a session, and the <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A> must be set to <xref:System.ServiceModel.InstanceContextMode.PerSession>.</span></span>
