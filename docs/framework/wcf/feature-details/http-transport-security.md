---
title: Zabezpečení přenosu HTTP
ms.date: 03/30/2017
ms.assetid: d3439262-c58e-4d30-9f2b-a160170582bb
author: BrucePerlerMS
manager: mbaldwin
ms.openlocfilehash: cc284f82f974d9b34ff1cf6732d2ee7b95528c44
ms.sourcegitcommit: 3d5d33f384eeba41b2dff79d096f47ccc8d8f03d
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 05/04/2018
ms.locfileid: "33495919"
---
# <a name="http-transport-security"></a><span data-ttu-id="8be1b-102">Zabezpečení přenosu HTTP</span><span class="sxs-lookup"><span data-stu-id="8be1b-102">HTTP Transport Security</span></span>
<span data-ttu-id="8be1b-103">Při použití protokolu HTTP jako přenos, je zabezpečení poskytované implementace Secure Sockets Layer (SSL).</span><span class="sxs-lookup"><span data-stu-id="8be1b-103">When using HTTP as the transport, security is provided by a Secure Sockets Layer (SSL) implementation.</span></span> <span data-ttu-id="8be1b-104">SSL je široce používaných na Internetu k ověřování klienta a potom k zajištění důvěrnosti (šifrování) do kanálu.</span><span class="sxs-lookup"><span data-stu-id="8be1b-104">SSL is widely used on the Internet to authenticate a service to a client, and then to provide confidentiality (encryption) to the channel.</span></span> <span data-ttu-id="8be1b-105">Toto téma vysvětluje, jak funguje protokol SSL a jak jsou implementované ve Windows Communication Foundation (WCF).</span><span class="sxs-lookup"><span data-stu-id="8be1b-105">This topic explains how SSL works and how it is implemented in Windows Communication Foundation (WCF).</span></span>  
  
## <a name="basic-ssl"></a><span data-ttu-id="8be1b-106">Základní SSL</span><span class="sxs-lookup"><span data-stu-id="8be1b-106">Basic SSL</span></span>  
 <span data-ttu-id="8be1b-107">Jak funguje SSL je nejlepší vysvětlené prostřednictvím Typický scénář, v takovém případě bank webu.</span><span class="sxs-lookup"><span data-stu-id="8be1b-107">How SSL works is best explained through a typical scenario, in this case, a bank's Web site.</span></span> <span data-ttu-id="8be1b-108">Přihlaste se pomocí uživatelského jména a hesla zákazníkům umožňuje webu.</span><span class="sxs-lookup"><span data-stu-id="8be1b-108">The site allows a customer to log on with a user name and password.</span></span> <span data-ttu-id="8be1b-109">Uživatel můžete po ověřovaného, provádění transakcí, jako je například zůstatky na účtu zobrazení, platit faktur a peníze přesunuty z jednoho účtu do jiného.</span><span class="sxs-lookup"><span data-stu-id="8be1b-109">After being authenticated, the user can perform transactions, such as view account balances, pay bills, and move money from one account to another.</span></span>  
  
 <span data-ttu-id="8be1b-110">Pokud uživatel navštíví nejprve webu, mechanismus SSL zahájí řadu jednání, názvem *metody handshake*, s klientem uživatele (v tomto případě aplikace Internet Explorer).</span><span class="sxs-lookup"><span data-stu-id="8be1b-110">When a user first visits the site, the SSL mechanism begins a series of negotiations, called a *handshake*, with the user's client (in this case, Internet Explorer).</span></span> <span data-ttu-id="8be1b-111">SSL poprvé ověří bank lokality tak, aby zákazník.</span><span class="sxs-lookup"><span data-stu-id="8be1b-111">SSL first authenticates the bank site to the customer.</span></span> <span data-ttu-id="8be1b-112">Je to nezbytné, proto zákazníky musíte nejdřív znát, že komunikují s skutečné lokality a není falešná identita, který se pokouší je přesvědčit do zadáním v jejich uživatelské jméno a heslo.</span><span class="sxs-lookup"><span data-stu-id="8be1b-112">This is an essential step because customers must first know that they are communicating with the actual site, and not a spoof that tries to lure them into typing in their user name and password.</span></span> <span data-ttu-id="8be1b-113">Protokol SSL nebude toto ověřování pomocí certifikátu protokolu SSL poskytované důvěryhodnou autoritou, jako je například VeriSign.</span><span class="sxs-lookup"><span data-stu-id="8be1b-113">SSL does this authentication by using an SSL certificate provided by a trusted authority, such as VeriSign.</span></span> <span data-ttu-id="8be1b-114">Logika přejde takto: VeriSign poskytuje záruku identity webu bank.</span><span class="sxs-lookup"><span data-stu-id="8be1b-114">The logic goes like this: VeriSign vouches for the identity of the bank site.</span></span> <span data-ttu-id="8be1b-115">Protože aplikace Internet Explorer důvěřuje VeriSign, web není důvěryhodný.</span><span class="sxs-lookup"><span data-stu-id="8be1b-115">Because Internet Explorer trusts VeriSign, the site is trusted.</span></span> <span data-ttu-id="8be1b-116">Pokud chcete zkontrolovat s VeriSign, můžete tak taky provést kliknutím na VeriSign logo.</span><span class="sxs-lookup"><span data-stu-id="8be1b-116">If you want to check with VeriSign, you can do so as well by clicking on the VeriSign logo.</span></span> <span data-ttu-id="8be1b-117">Příkaz pravosti, uvede se datum vypršení platnosti a který byl vydán pro (lokalita bank).</span><span class="sxs-lookup"><span data-stu-id="8be1b-117">That presents a statement of authenticity with its expiration date and who it is issued to (the bank site).</span></span>  
  
 <span data-ttu-id="8be1b-118">K zahájení zabezpečené relace, klient odešle serveru spolu s seznam kryptografických algoritmů můžete použít k přihlášení, generování hodnoty hash a šifrování a dešifrování s ekvivalentem "hello".</span><span class="sxs-lookup"><span data-stu-id="8be1b-118">To initiate a secure session, the client sends the equivalent of a "hello" to the server along with a list of cryptographic algorithms it can use to sign, generate hashes, and encrypt and decrypt with.</span></span> <span data-ttu-id="8be1b-119">V odpovědi, tato lokalita odesílá zpět potvrzení a jeho volbou jedné ze sad algoritmy.</span><span class="sxs-lookup"><span data-stu-id="8be1b-119">In response, the site sends back an acknowledgment and its choice of one of the algorithms suites.</span></span> <span data-ttu-id="8be1b-120">Během této počáteční metody handshake obě strany odesílat a přijímat náhodně generované identifikátory.</span><span class="sxs-lookup"><span data-stu-id="8be1b-120">During this initial handshake, both parties send and receive nonces.</span></span> <span data-ttu-id="8be1b-121">A *hodnotu nonce* je náhodně generované část dat, který se používá v kombinaci s veřejný klíč lokality, vytvoření hodnoty hash.</span><span class="sxs-lookup"><span data-stu-id="8be1b-121">A *nonce* is a randomly generated piece of data that is used, in combination with the site's public key, to create a hash.</span></span> <span data-ttu-id="8be1b-122">A *hash* je nové číslo, který je odvozený od dvou čísel pomocí standardních algoritmů, například SHA1.</span><span class="sxs-lookup"><span data-stu-id="8be1b-122">A *hash* is a new number that is derived from the two numbers using a standard algorithm, such as SHA1.</span></span> <span data-ttu-id="8be1b-123">(Klient a webu také výměna zpráv souhlasit který algoritmus hash použít.) Hodnota hash je jedinečný a se používá pouze pro relace mezi klientem a webu k šifrování a dešifrování zprávy.</span><span class="sxs-lookup"><span data-stu-id="8be1b-123">(The client and the site also exchange messages to agree which hash algorithm to use.) The hash is unique and is used only for the session between the client and the site to encrypt and decrypt messages.</span></span> <span data-ttu-id="8be1b-124">Klient a služba mít původní hodnotu nonce a veřejný klíč certifikátu, takže na obou stranách může generovat stejnou hodnotu hash.</span><span class="sxs-lookup"><span data-stu-id="8be1b-124">Both client and service have the original nonce and the certificate's public key, so both sides can generate the same hash.</span></span> <span data-ttu-id="8be1b-125">Proto klient ověří hodnotu hash odeslaných službou (a) pomocí odsouhlaseného při algoritmus vypočítat hodnotu hash z dat, a (b) porovná je s hash odeslaných službou; Pokud se dva shodují, má klient záruku toho, že hodnota hash nikdo neoprávněně nemanipuloval.</span><span class="sxs-lookup"><span data-stu-id="8be1b-125">Therefore, the client validates the hash sent by the service by (a) using the agreed upon algorithm to calculate the hash from the data, and (b) comparing it to the hash sent by the service; if the two match, then the client has assurance that the hash has not been tampered with.</span></span> <span data-ttu-id="8be1b-126">Klient může poté použít tato hodnota hash jako klíč pro šifrování zprávu, která obsahuje další nové hodnoty hash.</span><span class="sxs-lookup"><span data-stu-id="8be1b-126">The client can then use this hash as a key to encrypt a message that contains yet another new hash.</span></span> <span data-ttu-id="8be1b-127">Službu můžete dešifrování zprávy pomocí algoritmu hash a obnovit tato sekundu konečná hodnota hash.</span><span class="sxs-lookup"><span data-stu-id="8be1b-127">The service can decrypt the message using the hash, and recover this second-to-final hash.</span></span> <span data-ttu-id="8be1b-128">Na obou stranách se nyní označuje Akumulovaná informace (náhodně generované identifikátory, veřejný klíč a další data) a nelze vytvořit konečné hash (nebo hlavní klíč).</span><span class="sxs-lookup"><span data-stu-id="8be1b-128">The accumulated information (nonces, public key, and other data) is now known to both sides, and a final hash (or master key) can be created.</span></span> <span data-ttu-id="8be1b-129">Tento poslední klíč je odeslán šifrovaných pomocí algoritmu hash další poslední.</span><span class="sxs-lookup"><span data-stu-id="8be1b-129">This final key is sent encrypted using the next-to-last hash.</span></span> <span data-ttu-id="8be1b-130">Hlavní klíč je poté použít k šifrování a dešifrování zprávy pro resetování relace.</span><span class="sxs-lookup"><span data-stu-id="8be1b-130">The master key is then used to encrypt and decrypt messages for the reset of the session.</span></span> <span data-ttu-id="8be1b-131">Vzhledem k klient a služba používá stejný klíč, to se označuje taky jako *klíč relace*.</span><span class="sxs-lookup"><span data-stu-id="8be1b-131">Because both client and service use the same key, this is also called a *session key*.</span></span>  
  
 <span data-ttu-id="8be1b-132">Klíč relace je taky vyznačují jako symetrický klíč, nebo "sdílený tajný klíč."</span><span class="sxs-lookup"><span data-stu-id="8be1b-132">The session key is also characterized as a symmetric key, or a "shared secret."</span></span> <span data-ttu-id="8be1b-133">Symetrický klíč je důležité, protože snižuje výpočet vyžadovanou obou stranách transakce.</span><span class="sxs-lookup"><span data-stu-id="8be1b-133">Having a symmetric key is important because it reduces the computation required by both sides of the transaction.</span></span> <span data-ttu-id="8be1b-134">Pokud každá zpráva požadováno nové exchange náhodně generované identifikátory a hodnoty hash, by zhoršení výkonu.</span><span class="sxs-lookup"><span data-stu-id="8be1b-134">If every message demanded a new exchange of nonces and hashes, performance would deteriorate.</span></span> <span data-ttu-id="8be1b-135">Konečným cílem protokolu SSL je proto používat symetrický klíč, který umožňuje zprávy volně tok mezi sociálními s vyšší úrovní zabezpečení a efektivitu.</span><span class="sxs-lookup"><span data-stu-id="8be1b-135">Therefore, the ultimate goal of SSL is to use a symmetric key that allows messages to flow freely between the two sides with a greater degree of security and efficiency.</span></span>  
  
 <span data-ttu-id="8be1b-136">Předchozí popis je zjednodušenou verzi co se stane, protože protokol se může lišit od lokalitami.</span><span class="sxs-lookup"><span data-stu-id="8be1b-136">The previous description is a simplified version of what happens, because the protocol may vary from site to site.</span></span> <span data-ttu-id="8be1b-137">Je také možné, že klient i lokality obě generovat náhodně generované identifikátory, které jsou spojené algorithmically během metody handshake přidat další složitosti a proto ochranu pro proces výměny dat.</span><span class="sxs-lookup"><span data-stu-id="8be1b-137">It is also possible that both the client and the site both generate nonces that are algorithmically combined during the handshake to add more complexity, and therefore protection, to the process of exchanging data.</span></span>  
  
### <a name="certificates-and-public-key-infrastructure"></a><span data-ttu-id="8be1b-138">Certifikáty a infrastruktury veřejných klíčů</span><span class="sxs-lookup"><span data-stu-id="8be1b-138">Certificates and Public Key Infrastructure</span></span>  
 <span data-ttu-id="8be1b-139">Během metody handshake služba rovněž odesílá klientovi svůj certifikát SSL.</span><span class="sxs-lookup"><span data-stu-id="8be1b-139">During the handshake, the service also sends its SSL certificate to the client.</span></span> <span data-ttu-id="8be1b-140">Certifikát obsahuje informace, jako je například datum vypršení platnosti vydání autoritě a v lokalitě identifikátor URI (Uniform Resource).</span><span class="sxs-lookup"><span data-stu-id="8be1b-140">The certificate contains information, such as its expiration date, issuing authority, and the site's Uniform Resource Identifier (URI).</span></span> <span data-ttu-id="8be1b-141">Klient porovná identifikátor URI pro identifikátor URI měl původně kontaktovat zajistit shoda a také ověří datum a vydávající autorita.</span><span class="sxs-lookup"><span data-stu-id="8be1b-141">The client compares the URI to the URI it had originally contacted to ensure a match, and also checks the date and issuing authority.</span></span>  
  
 <span data-ttu-id="8be1b-142">Každý certifikát má dva klíče, privátní klíč a veřejný klíč a dva jsou známé jako *exchange pár klíčů*.</span><span class="sxs-lookup"><span data-stu-id="8be1b-142">Every certificate has two keys, a private key and a public key, and the two are known as an *exchange key pair*.</span></span> <span data-ttu-id="8be1b-143">Stručně řečeno privátní klíč je zná pouze vlastník certifikátu při čtení z certifikátu veřejného klíče.</span><span class="sxs-lookup"><span data-stu-id="8be1b-143">In brief, the private key is known only to the owner of the certificate while the public key is readable from the certificate.</span></span> <span data-ttu-id="8be1b-144">Ani jeden klíč slouží k zašifrování a dešifrování ověřování algoritmem digest, hash, nebo jiného klíče, ale pouze rozporu operace.</span><span class="sxs-lookup"><span data-stu-id="8be1b-144">Either key can be used to encrypt or decrypt a digest, hash, or other key, but only as contrary operations.</span></span> <span data-ttu-id="8be1b-145">Například pokud klient zašifruje pomocí veřejného klíče, pouze webu můžete dešifrování zprávy pomocí soukromého klíče.</span><span class="sxs-lookup"><span data-stu-id="8be1b-145">For example, if the client encrypts with the public key, only the site can decrypt the message using the private key.</span></span> <span data-ttu-id="8be1b-146">Podobně pokud webu zašifruje s privátním klíčem, klient může dešifrovat veřejným klíčem.</span><span class="sxs-lookup"><span data-stu-id="8be1b-146">Similarly, if the site encrypts with the private key, the client can decrypt with the public key.</span></span> <span data-ttu-id="8be1b-147">To poskytuje záruku klientovi zprávy jsou během výměny pouze s vlastník privátního klíče, protože je pak možné dešifrovat jenom zprávy zašifrované pomocí privátního klíče pomocí veřejného klíče.</span><span class="sxs-lookup"><span data-stu-id="8be1b-147">This provides assurance to the client that the messages are being exchanged only with the possessor of the private key because only messages encrypted with the private key can be decrypted with the public key.</span></span> <span data-ttu-id="8be1b-148">Lokality je zajištěno, že jej vymění zprávy s klientem, který má šifrované pomocí veřejného klíče.</span><span class="sxs-lookup"><span data-stu-id="8be1b-148">The site is assured that it is exchanging messages with a client that has encrypted using the public key.</span></span> <span data-ttu-id="8be1b-149">Toto exchange je bezpečné pouze pro počáteční handshake, ale, což je důvod, proč mnoho dalších slouží k vytvoření skutečné symetrického klíče.</span><span class="sxs-lookup"><span data-stu-id="8be1b-149">This exchange is secure only for an initial handshake, however, which is why much more is done to create the actual symmetric key.</span></span> <span data-ttu-id="8be1b-150">Nicméně veškerá komunikace závisí na službu s platný certifikát SSL.</span><span class="sxs-lookup"><span data-stu-id="8be1b-150">Nevertheless, all communications depend on the service having a valid SSL certificate.</span></span>  
  
## <a name="implementing-ssl-with-wcf"></a><span data-ttu-id="8be1b-151">Implementace protokolu SSL s použitím technologie WCF</span><span class="sxs-lookup"><span data-stu-id="8be1b-151">Implementing SSL with WCF</span></span>  
 <span data-ttu-id="8be1b-152">Zabezpečení přenosu HTTP (nebo SSL) zajišťuje externě WCF.</span><span class="sxs-lookup"><span data-stu-id="8be1b-152">HTTP transport security (or SSL) is provided externally to WCF.</span></span> <span data-ttu-id="8be1b-153">Můžete implementovat SSL v jednom ze dvou způsobů; rozhodujícím faktorem je, jak je vaše aplikace hostována:</span><span class="sxs-lookup"><span data-stu-id="8be1b-153">You can implement SSL in one of two ways; the deciding factor is how your application is hosted:</span></span>  
  
-   <span data-ttu-id="8be1b-154">Pokud používáte Internetové informační služby (IIS) jako hostitele WCF, nastavit služby SSL pomocí infrastruktury služby IIS.</span><span class="sxs-lookup"><span data-stu-id="8be1b-154">If you are using Internet Information Services (IIS) as your WCF host, use the IIS infrastructure to set up an SSL service.</span></span>  
  
-   <span data-ttu-id="8be1b-155">Pokud vytváříte aplikace WCF vlastním hostováním, můžete vázat na adresu pomocí nástroje HttpCfg.exe certifikát SSL.</span><span class="sxs-lookup"><span data-stu-id="8be1b-155">If you are creating a self-hosted WCF application, you can bind an SSL certificate to the address using the HttpCfg.exe tool.</span></span>  
  
### <a name="using-iis-for-transport-security"></a><span data-ttu-id="8be1b-156">Pomocí služby IIS pro zabezpečení přenosu</span><span class="sxs-lookup"><span data-stu-id="8be1b-156">Using IIS for Transport Security</span></span>  
  
#### <a name="iis-70"></a><span data-ttu-id="8be1b-157">Internetová informační služba 7,0</span><span class="sxs-lookup"><span data-stu-id="8be1b-157">IIS 7.0</span></span>  
 <span data-ttu-id="8be1b-158">Nastavit [!INCLUDE[iisver](../../../../includes/iisver-md.md)] jako zabezpečené hostitele (pomocí protokolu SSL), najdete v části [IIS 7.0 Beta: Konfigurace Secure Sockets Layer ve službě IIS 7.0](http://go.microsoft.com/fwlink/?LinkId=88600).</span><span class="sxs-lookup"><span data-stu-id="8be1b-158">To set up [!INCLUDE[iisver](../../../../includes/iisver-md.md)] as a secure host (using SSL), see [IIS 7.0 Beta: Configuring Secure Sockets Layer in IIS 7.0](http://go.microsoft.com/fwlink/?LinkId=88600).</span></span>  
  
 <span data-ttu-id="8be1b-159">Pro konfiguraci certifikátů pro použití s [!INCLUDE[iisver](../../../../includes/iisver-md.md)], najdete v části [IIS 7.0 Beta: Konfigurace certifikátů serveru ve službě IIS 7.0](http://go.microsoft.com/fwlink/?LinkID=88595).</span><span class="sxs-lookup"><span data-stu-id="8be1b-159">To configure certificates for use with [!INCLUDE[iisver](../../../../includes/iisver-md.md)], see [IIS 7.0 Beta: Configuring Server Certificates in IIS 7.0](http://go.microsoft.com/fwlink/?LinkID=88595).</span></span>  
  
#### <a name="iis-60"></a><span data-ttu-id="8be1b-160">Internetová informační služba 6.0</span><span class="sxs-lookup"><span data-stu-id="8be1b-160">IIS 6.0</span></span>  
 <span data-ttu-id="8be1b-161">Nastavit [!INCLUDE[iis601](../../../../includes/iis601-md.md)] jako zabezpečené hostitele (pomocí protokolu SSL), najdete v části [konfigurace Secure Sockets Layer](http://go.microsoft.com/fwlink/?LinkId=88601).</span><span class="sxs-lookup"><span data-stu-id="8be1b-161">To set up [!INCLUDE[iis601](../../../../includes/iis601-md.md)] as a secure host (using SSL), see [Configuring Secure Sockets Layer](http://go.microsoft.com/fwlink/?LinkId=88601).</span></span>  
  
 <span data-ttu-id="8be1b-162">Pro konfiguraci certifikátů pro použití s [!INCLUDE[iis601](../../../../includes/iis601-md.md)], najdete v části [Certificates_IIS_SP1_Ops](http://go.microsoft.com/fwlink/?LinkId=88602).</span><span class="sxs-lookup"><span data-stu-id="8be1b-162">To configure certificates for use with [!INCLUDE[iis601](../../../../includes/iis601-md.md)], see [Certificates_IIS_SP1_Ops](http://go.microsoft.com/fwlink/?LinkId=88602).</span></span>  
  
### <a name="using-httpcfg-for-ssl"></a><span data-ttu-id="8be1b-163">Pomocí HttpCfg pro protokol SSL</span><span class="sxs-lookup"><span data-stu-id="8be1b-163">Using HttpCfg for SSL</span></span>  
 <span data-ttu-id="8be1b-164">Pokud vytváříte aplikace WCF vlastním hostováním, stáhněte si nástroj HttpCfg.exe k dispozici na [lokality nástrojů podpory systému Windows XP Service Pack 2](http://go.microsoft.com/fwlink/?LinkId=29002).</span><span class="sxs-lookup"><span data-stu-id="8be1b-164">If you are creating a self-hosted WCF application, download the HttpCfg.exe tool, available at the [Windows XP Service Pack 2 Support Tools site](http://go.microsoft.com/fwlink/?LinkId=29002).</span></span>  
  
 <span data-ttu-id="8be1b-165">Další informace o použití nástroje HttpCfg.exe nastavit port společně s certifikátem X.509 najdete v tématu [postup: Nakonfigurujte certifikát protokolu SSL Port](../../../../docs/framework/wcf/feature-details/how-to-configure-a-port-with-an-ssl-certificate.md).</span><span class="sxs-lookup"><span data-stu-id="8be1b-165">For more information about using the HttpCfg.exe tool to set up a port with an X.509 certificate, see [How to: Configure a Port with an SSL Certificate](../../../../docs/framework/wcf/feature-details/how-to-configure-a-port-with-an-ssl-certificate.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="8be1b-166">Viz také</span><span class="sxs-lookup"><span data-stu-id="8be1b-166">See Also</span></span>  
 [<span data-ttu-id="8be1b-167">Zabezpečení přenosu</span><span class="sxs-lookup"><span data-stu-id="8be1b-167">Transport Security</span></span>](../../../../docs/framework/wcf/feature-details/transport-security.md)  
 [<span data-ttu-id="8be1b-168">Zabezpečení zpráv</span><span class="sxs-lookup"><span data-stu-id="8be1b-168">Message Security</span></span>](../../../../docs/framework/wcf/feature-details/message-security-in-wcf.md)
