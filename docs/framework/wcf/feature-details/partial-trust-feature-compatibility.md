---
title: "Kompatibilita funkcí s částečnou důvěryhodností"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: a36a540b-1606-4e63-88e0-b7c59e0e6ab7
caps.latest.revision: "75"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.openlocfilehash: f36d944814adaf4a90a04715c60f2fe732cb544a
ms.sourcegitcommit: ce279f2d7fe2220e6ea0a25a8a7a5370ddf8d9f0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 12/02/2017
---
# <a name="partial-trust-feature-compatibility"></a><span data-ttu-id="ff288-102">Kompatibilita funkcí s částečnou důvěryhodností</span><span class="sxs-lookup"><span data-stu-id="ff288-102">Partial Trust Feature Compatibility</span></span>
[!INCLUDE[indigo1](../../../../includes/indigo1-md.md)]<span data-ttu-id="ff288-103">podporuje omezenou podmnožinou funkce při spuštění v prostředí s částečně důvěryhodné.</span><span class="sxs-lookup"><span data-stu-id="ff288-103"> supports a limited subset of functionality when running in a partially-trusted environment.</span></span> <span data-ttu-id="ff288-104">Funkce podporované v částečné důvěryhodnosti jsou uspořádaná kolem konkrétní sadu scénářů, jak je popsáno v [Podporované scénáře nasazení](../../../../docs/framework/wcf/feature-details/supported-deployment-scenarios.md) tématu.</span><span class="sxs-lookup"><span data-stu-id="ff288-104">The features supported in partial trust are designed around a specific set of scenarios as described in the [Supported Deployment Scenarios](../../../../docs/framework/wcf/feature-details/supported-deployment-scenarios.md) topic.</span></span>  
  
## <a name="minimum-permission-requirements"></a><span data-ttu-id="ff288-105">Požadavky na minimální oprávnění</span><span class="sxs-lookup"><span data-stu-id="ff288-105">Minimum Permission Requirements</span></span>  
 [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]<span data-ttu-id="ff288-106">podporuje podmnožinu funkcí v aplikacích spuštěných v některé z následujících sad standardní pojmenované oprávnění:</span><span class="sxs-lookup"><span data-stu-id="ff288-106"> supports a subset of features in applications running under either of the following standard named permission sets:</span></span>  
  
-   <span data-ttu-id="ff288-107">Střední oprávnění vztahu důvěryhodnosti</span><span class="sxs-lookup"><span data-stu-id="ff288-107">Medium Trust permissions</span></span>  
  
-   <span data-ttu-id="ff288-108">Oprávnění pro zónu Internetu</span><span class="sxs-lookup"><span data-stu-id="ff288-108">Internet Zone permissions</span></span>  
  
 <span data-ttu-id="ff288-109">Pokus o použití [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] v částečně důvěryhodné aplikace s víc omezující oprávnění, které může vést k bezpečnostním výjimkám za běhu.</span><span class="sxs-lookup"><span data-stu-id="ff288-109">Attempting to use [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] in partially-trusted applications with more restrictive permissions may result in security exceptions at runtime.</span></span>  
  
## <a name="contracts"></a><span data-ttu-id="ff288-110">Kontrakty</span><span class="sxs-lookup"><span data-stu-id="ff288-110">Contracts</span></span>  
 <span data-ttu-id="ff288-111">Kontrakty se vztahují následující omezení při spuštění v částečné důvěryhodnosti:</span><span class="sxs-lookup"><span data-stu-id="ff288-111">Contracts are subject to the following restrictions when running under partial trust:</span></span>  
  
-   <span data-ttu-id="ff288-112">Třída služby, který implementuje `[ServiceContract]` rozhraní musí být `public` a mít `public` konstruktor.</span><span class="sxs-lookup"><span data-stu-id="ff288-112">The service class that implements the `[ServiceContract]` interface must be `public` and have a `public` constructor.</span></span> <span data-ttu-id="ff288-113">Pokud ho definuje `[OperationContract]` metod, musí mít `public`.</span><span class="sxs-lookup"><span data-stu-id="ff288-113">If it defines `[OperationContract]` methods, these must be `public`.</span></span> <span data-ttu-id="ff288-114">Pokud místo toho implementuje `[ServiceContract]` rozhraní, tato metoda implementace může být explicitní nebo `private`, za předpokladu, že `[ServiceContract]` rozhraní je `public`.</span><span class="sxs-lookup"><span data-stu-id="ff288-114">If it instead implements a `[ServiceContract]` interface, those method implementations can be explicit or `private`, provided that the `[ServiceContract]` interface is `public`.</span></span>  
  
-   <span data-ttu-id="ff288-115">Při použití `[ServiceKnownType]` atribut, musí být určená metoda `public`.</span><span class="sxs-lookup"><span data-stu-id="ff288-115">When using the `[ServiceKnownType]` attribute, the method specified must be `public`.</span></span>  
  
-   <span data-ttu-id="ff288-116">`[MessageContract]`třídy a jejich členové může být `public`.</span><span class="sxs-lookup"><span data-stu-id="ff288-116">`[MessageContract]` classes and their members can be `public`.</span></span> <span data-ttu-id="ff288-117">Pokud `[MessageContract]` třída je definována v sestavení aplikace může být `internal` a mít `internal` členy.</span><span class="sxs-lookup"><span data-stu-id="ff288-117">If the `[MessageContract]` class is defined in the application assembly it can be `internal` and have `internal` members.</span></span>  
  
## <a name="system-provided-bindings"></a><span data-ttu-id="ff288-118">Vazby poskytované systémem</span><span class="sxs-lookup"><span data-stu-id="ff288-118">System-Provided Bindings</span></span>  
 <span data-ttu-id="ff288-119"><xref:System.ServiceModel.BasicHttpBinding> a <xref:System.ServiceModel.WebHttpBinding> jsou plně podporovaný v prostředí s částečnou důvěryhodností.</span><span class="sxs-lookup"><span data-stu-id="ff288-119">The <xref:System.ServiceModel.BasicHttpBinding> and <xref:System.ServiceModel.WebHttpBinding> are fully supported in a partial trust environment.</span></span> <span data-ttu-id="ff288-120"><xref:System.ServiceModel.WSHttpBinding> Je podporovaná jenom na režim zabezpečení přenosu.</span><span class="sxs-lookup"><span data-stu-id="ff288-120">The <xref:System.ServiceModel.WSHttpBinding> is supported for Transport security mode only.</span></span>  
  
 <span data-ttu-id="ff288-121">Vazby, které používají přenosy než HTTP, například <xref:System.ServiceModel.NetTcpBinding>, <xref:System.ServiceModel.NetNamedPipeBinding>, nebo <xref:System.ServiceModel.NetMsmqBinding>, nejsou podporovány při spuštění v prostředí s částečnou důvěryhodností.</span><span class="sxs-lookup"><span data-stu-id="ff288-121">Bindings that use transports other than HTTP, such as the <xref:System.ServiceModel.NetTcpBinding>, the <xref:System.ServiceModel.NetNamedPipeBinding>, or the <xref:System.ServiceModel.NetMsmqBinding>, are not supported when running in a partial trust environment.</span></span>  
  
## <a name="custom-bindings"></a><span data-ttu-id="ff288-122">Vlastní vazby</span><span class="sxs-lookup"><span data-stu-id="ff288-122">Custom Bindings</span></span>  
 <span data-ttu-id="ff288-123">Vlastní vazby lze vytvořit a použít v prostředí s částečnou důvěryhodností, ale musí následovat omezení zadané v této části.</span><span class="sxs-lookup"><span data-stu-id="ff288-123">Custom bindings can be created and used in a partial trust environment, but must follow the restrictions specified in this section.</span></span>  
  
### <a name="transports"></a><span data-ttu-id="ff288-124">Přenosy</span><span class="sxs-lookup"><span data-stu-id="ff288-124">Transports</span></span>  
 <span data-ttu-id="ff288-125">Jediným povoleny vazby přenosu prvky jsou <xref:System.ServiceModel.Channels.HttpTransportBindingElement> a <xref:System.ServiceModel.Channels.HttpsTransportBindingElement>.</span><span class="sxs-lookup"><span data-stu-id="ff288-125">The only allowed transport binding elements are <xref:System.ServiceModel.Channels.HttpTransportBindingElement> and <xref:System.ServiceModel.Channels.HttpsTransportBindingElement>.</span></span>  
  
### <a name="encoders"></a><span data-ttu-id="ff288-126">Kódovací moduly</span><span class="sxs-lookup"><span data-stu-id="ff288-126">Encoders</span></span>  
 <span data-ttu-id="ff288-127">Jsou povoleny následující kodéry:</span><span class="sxs-lookup"><span data-stu-id="ff288-127">The following encoders are allowed:</span></span>  
  
-   <span data-ttu-id="ff288-128">Kodér textu (<xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement>).</span><span class="sxs-lookup"><span data-stu-id="ff288-128">The text encoder (<xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement>).</span></span>  
  
-   <span data-ttu-id="ff288-129">Binární kodéru (<xref:System.ServiceModel.Channels.BinaryMessageEncodingBindingElement>).</span><span class="sxs-lookup"><span data-stu-id="ff288-129">The binary encoder (<xref:System.ServiceModel.Channels.BinaryMessageEncodingBindingElement>).</span></span>  
  
-   <span data-ttu-id="ff288-130">Kodér zpráv webové (<xref:System.ServiceModel.Channels.WebMessageEncodingBindingElement>).</span><span class="sxs-lookup"><span data-stu-id="ff288-130">The Web Message encoder (<xref:System.ServiceModel.Channels.WebMessageEncodingBindingElement>).</span></span>  
  
 <span data-ttu-id="ff288-131">Kodéry zpráva přenosu optimalizace mechanismus (MTOM) nejsou podporovány.</span><span class="sxs-lookup"><span data-stu-id="ff288-131">The Message Transmission Optimization Mechanism (MTOM) encoders are not supported.</span></span>  
  
### <a name="security"></a><span data-ttu-id="ff288-132">Zabezpečení</span><span class="sxs-lookup"><span data-stu-id="ff288-132">Security</span></span>  
 <span data-ttu-id="ff288-133">Částečně důvěryhodné aplikace můžou používat [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]na úrovni přenosu funkce zabezpečení pro zabezpečení komunikace.</span><span class="sxs-lookup"><span data-stu-id="ff288-133">Partially-trusted applications can use [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]'s transport-level security features for securing their communication.</span></span> <span data-ttu-id="ff288-134">Zabezpečení na úrovni zpráva není podporováno.</span><span class="sxs-lookup"><span data-stu-id="ff288-134">Message-level security is not supported.</span></span> <span data-ttu-id="ff288-135">Konfigurace vazeb pro použití zprávy úroveň zabezpečení za následek výjimku za běhu.</span><span class="sxs-lookup"><span data-stu-id="ff288-135">Configuring a binding to use message-level security results in an exception at runtime.</span></span>  
  
### <a name="unsupported-bindings"></a><span data-ttu-id="ff288-136">Nepodporované vazby</span><span class="sxs-lookup"><span data-stu-id="ff288-136">Unsupported Bindings</span></span>  
 <span data-ttu-id="ff288-137">Vazby, které používají spolehlivé zasílání zpráv, transakce nebo zabezpečení na úrovni zpráv nejsou podporovány.</span><span class="sxs-lookup"><span data-stu-id="ff288-137">Bindings that use reliable messaging, transactions, or message-level security are not supported.</span></span>  
  
## <a name="serialization"></a><span data-ttu-id="ff288-138">Serializace</span><span class="sxs-lookup"><span data-stu-id="ff288-138">Serialization</span></span>  
 <span data-ttu-id="ff288-139">Jak <xref:System.Runtime.Serialization.DataContractSerializer> a <xref:System.Xml.Serialization.XmlSerializer> jsou podporovány v prostředí s částečnou důvěryhodností.</span><span class="sxs-lookup"><span data-stu-id="ff288-139">Both the <xref:System.Runtime.Serialization.DataContractSerializer> and the <xref:System.Xml.Serialization.XmlSerializer> are supported in a partial trust environment.</span></span> <span data-ttu-id="ff288-140">Však použít <xref:System.Runtime.Serialization.DataContractSerializer> se vztahují následující podmínky:</span><span class="sxs-lookup"><span data-stu-id="ff288-140">However, use of the <xref:System.Runtime.Serialization.DataContractSerializer> is subject to the following conditions:</span></span>  
  
-   <span data-ttu-id="ff288-141">Všechny serializovatelný `[DataContract]` typy musí být `public`.</span><span class="sxs-lookup"><span data-stu-id="ff288-141">All serializable `[DataContract]` types must be `public`.</span></span>  
  
-   <span data-ttu-id="ff288-142">Všechny serializovatelný `[DataMember]` polí a vlastností v `[DataContract]` typ musí být veřejné a pro čtení a zápis.</span><span class="sxs-lookup"><span data-stu-id="ff288-142">All serializable `[DataMember]` fields or properties in a `[DataContract]` type must be public and read/write.</span></span> <span data-ttu-id="ff288-143">Serializace a deserializace [jen pro čtení](http://go.microsoft.com/fwlink/?LinkID=98854) polí není podporováno při spuštění [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] v aplikaci částečně důvěryhodné.</span><span class="sxs-lookup"><span data-stu-id="ff288-143">The serialization and deserialization of [readonly](http://go.microsoft.com/fwlink/?LinkID=98854) fields is not supported when running [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] in a partially-trusted application.</span></span>  
  
-   <span data-ttu-id="ff288-144">`[Serializable]` /ISerializable programovací model není podporována v prostředí s částečnou důvěryhodností.</span><span class="sxs-lookup"><span data-stu-id="ff288-144">The `[Serializable]`/ISerializable programming model is not supported in a partial trust environment.</span></span>  
  
-   <span data-ttu-id="ff288-145">Známé typy je třeba zadat v konfiguraci úrovně počítače (machine.config) nebo kódu.</span><span class="sxs-lookup"><span data-stu-id="ff288-145">Known types must be specified in code or machine-level configuration (machine.config).</span></span> <span data-ttu-id="ff288-146">Známé typy nelze zadat v konfiguraci na úrovni aplikace z bezpečnostních důvodů.</span><span class="sxs-lookup"><span data-stu-id="ff288-146">Known types cannot be specified in application-level configuration for security reasons.</span></span>  
  
-   <span data-ttu-id="ff288-147">Typy, které implementují <xref:System.Runtime.Serialization.IObjectReference> výjimku v prostředí částečně důvěryhodné.</span><span class="sxs-lookup"><span data-stu-id="ff288-147">Types that implement <xref:System.Runtime.Serialization.IObjectReference> throw an exception in a partially-trusted environment.</span></span>  
  
 <span data-ttu-id="ff288-148">Najdete v části serializace v [částečné důvěryhodnosti osvědčené postupy](../../../../docs/framework/wcf/feature-details/partial-trust-best-practices.md) Další informace o zabezpečení při použití <xref:System.Runtime.Serialization.DataContractSerializer> bezpečně v aplikaci částečně důvěryhodné.</span><span class="sxs-lookup"><span data-stu-id="ff288-148">See the Serialization section in [Partial Trust Best Practices](../../../../docs/framework/wcf/feature-details/partial-trust-best-practices.md) for more information about security when using <xref:System.Runtime.Serialization.DataContractSerializer> safely in a partially-trusted application.</span></span>  
  
### <a name="collection-types"></a><span data-ttu-id="ff288-149">Typy kolekcí</span><span class="sxs-lookup"><span data-stu-id="ff288-149">Collection Types</span></span>  
 <span data-ttu-id="ff288-150">Některé typy kolekcí obě implementovat <xref:System.Collections.Generic.IEnumerable%601> a <xref:System.Collections.IEnumerable>.</span><span class="sxs-lookup"><span data-stu-id="ff288-150">Some collection types implement both <xref:System.Collections.Generic.IEnumerable%601> and <xref:System.Collections.IEnumerable>.</span></span> <span data-ttu-id="ff288-151">Příklady typů, které implementují <xref:System.Collections.Generic.ICollection%601>.</span><span class="sxs-lookup"><span data-stu-id="ff288-151">Examples include types that implement <xref:System.Collections.Generic.ICollection%601>.</span></span> <span data-ttu-id="ff288-152">Můžete implementovat tyto typy `public` implementace `GetEnumerator()`a explicitní implementaci `GetEnumerator()`.</span><span class="sxs-lookup"><span data-stu-id="ff288-152">Such types can implement a `public` implementation of `GetEnumerator()`, and an explicit implementation of `GetEnumerator()`.</span></span> <span data-ttu-id="ff288-153">V takovém případě <xref:System.Runtime.Serialization.DataContractSerializer> vyvolá `public` implementace `GetEnumerator()`a ne explicitní implementace `GetEnumerator()`.</span><span class="sxs-lookup"><span data-stu-id="ff288-153">In this case, <xref:System.Runtime.Serialization.DataContractSerializer> invokes the `public` implementation of `GetEnumerator()`, and not the explicit implementation of `GetEnumerator()`.</span></span> <span data-ttu-id="ff288-154">Pokud žádná z `GetEnumerator()` implementace jsou `public` a všechny explicitní implementace, jsou pak <xref:System.Runtime.Serialization.DataContractSerializer> vyvolá `IEnumerable.GetEnumerator()`.</span><span class="sxs-lookup"><span data-stu-id="ff288-154">If none of the `GetEnumerator()` implementations are `public` and all are explicit implementations, then <xref:System.Runtime.Serialization.DataContractSerializer> invokes `IEnumerable.GetEnumerator()`.</span></span>  
  
 <span data-ttu-id="ff288-155">Pro kolekci typů při [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] běží v prostředí s částečnou důvěryhodností, pokud žádná z `GetEnumerator()` implementace jsou `public`, nebo žádná z nich jsou explicitní implementace rozhraní a pak je vyvolána výjimka zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="ff288-155">For collection types when [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] is running in a partial trust environment, if none of the `GetEnumerator()` implementations are `public`, or none of them are explicit interface implementations, then a security exception is thrown.</span></span>  
  
### <a name="netdatacontractserializer"></a><span data-ttu-id="ff288-156">NetDataContractSerializer</span><span class="sxs-lookup"><span data-stu-id="ff288-156">NetDataContractSerializer</span></span>  
 <span data-ttu-id="ff288-157">Mnoho typů kolekce rozhraní .NET Framework jako <xref:System.Collections.Generic.List%601>, <xref:System.Collections.ArrayList>, <xref:System.Collections.Generic.Dictionary%602> a <xref:System.Collections.Hashtable> nejsou podporovány <xref:System.Runtime.Serialization.NetDataContractSerializer> v částečné důvěryhodnosti.</span><span class="sxs-lookup"><span data-stu-id="ff288-157">Many .NET Framework collection types such as <xref:System.Collections.Generic.List%601>, <xref:System.Collections.ArrayList>, <xref:System.Collections.Generic.Dictionary%602> and <xref:System.Collections.Hashtable> are not supported by the <xref:System.Runtime.Serialization.NetDataContractSerializer> in partial trust.</span></span> <span data-ttu-id="ff288-158">Tyto typy mají `[Serializable]` atribut nastaven, a jak jsme uvedli dříve v části serializace, tento atribut není podporován v částečné důvěryhodnosti.</span><span class="sxs-lookup"><span data-stu-id="ff288-158">These types have the `[Serializable]` attribute set, and as stated previously in the Serialization section, this attribute is not supported in partial trust.</span></span> <span data-ttu-id="ff288-159"><xref:System.Runtime.Serialization.DataContractSerializer> Zpracovává kolekce zvláštním způsobem a je proto nemůže získat kolem tohoto omezení, ale <xref:System.Runtime.Serialization.NetDataContractSerializer> nemá žádný takový mechanismus pro toto omezení obejít.</span><span class="sxs-lookup"><span data-stu-id="ff288-159">The <xref:System.Runtime.Serialization.DataContractSerializer> treats collections in a special way and is thus able to get around this restriction, but the <xref:System.Runtime.Serialization.NetDataContractSerializer> has no such mechanism to circumvent this restriction.</span></span>  
  
 <span data-ttu-id="ff288-160"><xref:System.DateTimeOffset> Typ není podporován <xref:System.Runtime.Serialization.NetDataContractSerializer> v částečné důvěryhodnosti.</span><span class="sxs-lookup"><span data-stu-id="ff288-160">The <xref:System.DateTimeOffset> type is not supported by the <xref:System.Runtime.Serialization.NetDataContractSerializer> in partial trust.</span></span>  
  
 <span data-ttu-id="ff288-161">Náhradní nelze použít s <xref:System.Runtime.Serialization.NetDataContractSerializer> (pomocí <xref:System.Runtime.Serialization.SurrogateSelector> mechanismus) při spuštění v částečné důvěryhodnosti.</span><span class="sxs-lookup"><span data-stu-id="ff288-161">A surrogate cannot be used with the <xref:System.Runtime.Serialization.NetDataContractSerializer> (using the <xref:System.Runtime.Serialization.SurrogateSelector> mechanism) when running in partial trust.</span></span> <span data-ttu-id="ff288-162">Všimněte si, že toto omezení platí pro použití náhradní, ne na jeho serializace.</span><span class="sxs-lookup"><span data-stu-id="ff288-162">Note that this restriction applies to using a surrogate, not to serializing it.</span></span>  
  
## <a name="enabling-common-behaviors-to-run"></a><span data-ttu-id="ff288-163">Povolení společné chování ke spuštění</span><span class="sxs-lookup"><span data-stu-id="ff288-163">Enabling Common Behaviors to Run</span></span>  
 <span data-ttu-id="ff288-164">Služba nebo koncový bod chování neoznačené <xref:System.Security.AllowPartiallyTrustedCallersAttribute> atribut (APTCA), které jsou přidány do [ \<commonBehaviors >](../../../../docs/framework/configure-apps/file-schema/wcf/commonbehaviors.md) oddílu konfiguračního souboru se nespustí, pokud je aplikace spuštěná v částečné důvěryhodnosti v takovém případě je vyvolána prostředí a žádná výjimka.</span><span class="sxs-lookup"><span data-stu-id="ff288-164">Service or endpoint behaviors not marked with the <xref:System.Security.AllowPartiallyTrustedCallersAttribute> attribute (APTCA) that are added to the [\<commonBehaviors>](../../../../docs/framework/configure-apps/file-schema/wcf/commonbehaviors.md) section of a configuration file are not run when the application runs in a partial trust environment and no exception is thrown when this occurs.</span></span> <span data-ttu-id="ff288-165">Chcete-li vynutit spuštění společné chování, musíte udělat jednu z následujících možností:</span><span class="sxs-lookup"><span data-stu-id="ff288-165">To enforce the running of common behaviors, you must do one of the following options:</span></span>  
  
-   <span data-ttu-id="ff288-166">Označit chování vaší běžné s <xref:System.Security.AllowPartiallyTrustedCallersAttribute> atribut, aby se může spustit při nasazení jako aplikace s částečnou důvěryhodností.</span><span class="sxs-lookup"><span data-stu-id="ff288-166">Mark your common behavior with the <xref:System.Security.AllowPartiallyTrustedCallersAttribute> attribute so that it can run when deployed as a partial trust application.</span></span> <span data-ttu-id="ff288-167">Všimněte si, že položka registru lze nastavit v počítači aby označena APTCA sestavení spuštění.</span><span class="sxs-lookup"><span data-stu-id="ff288-167">Note that a registry entry can be set on the computer to prevent APTCA-marked assemblies from running.</span></span> <span data-ttu-id="ff288-168">.</span><span class="sxs-lookup"><span data-stu-id="ff288-168">.</span></span>  
  
-   <span data-ttu-id="ff288-169">Zajistěte, aby pokud je aplikace nasazená jako plně důvěryhodné aplikace, uživatelé nemohou upravovat nastavení zabezpečení přístupu kódu ke spuštění aplikace v prostředí s částečnou důvěryhodností.</span><span class="sxs-lookup"><span data-stu-id="ff288-169">Ensure that if the application is deployed as a fully-trusted application that users cannot modify the code-access security settings to run the application in a partial trust environment.</span></span> <span data-ttu-id="ff288-170">Pokud se zachovají, chování nespustí a nedojde k výjimce.</span><span class="sxs-lookup"><span data-stu-id="ff288-170">If they can do so, the behavior does not run and no exception is thrown.</span></span> <span data-ttu-id="ff288-171">Aby, najdete v článku **levelfinal** možnost pomocí [Caspol.exe (nástroj zásad zabezpečení přístupu kódu)](../../../../docs/framework/tools/caspol-exe-code-access-security-policy-tool.md).</span><span class="sxs-lookup"><span data-stu-id="ff288-171">To ensure this, see the **levelfinal** option using [Caspol.exe (Code Access Security Policy Tool)](../../../../docs/framework/tools/caspol-exe-code-access-security-policy-tool.md).</span></span>  
  
 [!INCLUDE[crexample](../../../../includes/crexample-md.md)]<span data-ttu-id="ff288-172">společné chování najdete v části [postup: uzamčení mimo provoz koncovými body v podnikové síti](../../../../docs/framework/wcf/extending/how-to-lock-down-endpoints-in-the-enterprise.md).</span><span class="sxs-lookup"><span data-stu-id="ff288-172"> a common behavior, see [How to: Lock Down Endpoints in the Enterprise](../../../../docs/framework/wcf/extending/how-to-lock-down-endpoints-in-the-enterprise.md).</span></span>  
  
## <a name="configuration"></a><span data-ttu-id="ff288-173">Konfigurace</span><span class="sxs-lookup"><span data-stu-id="ff288-173">Configuration</span></span>  
 <span data-ttu-id="ff288-174">S jednou výjimkou mohou načíst pouze částečně důvěryhodného kódu [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] konfigurační oddíly funkce v místní `app.config` souboru.</span><span class="sxs-lookup"><span data-stu-id="ff288-174">With one exception, partially-trusted code can only load [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] configuration sections in the local `app.config` file.</span></span> <span data-ttu-id="ff288-175">Načíst [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] konfigurace částech tento odkaz [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] ConfigurationPermission(Unrestricted) vyžaduje oddílů v souboru machine.config nebo v kořenovém souboru web.config.</span><span class="sxs-lookup"><span data-stu-id="ff288-175">To load [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] configuration sections that reference [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] sections in machine.config or in a root web.config file requires ConfigurationPermission(Unrestricted).</span></span> <span data-ttu-id="ff288-176">Bez tohoto oprávnění, odkazuje na [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] konfigurační oddíly (chování, vazby) mimo místní konfigurační soubor výsledky v výjimku při načtení konfigurace.</span><span class="sxs-lookup"><span data-stu-id="ff288-176">Without this permission, references to [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] configuration sections (behaviors, bindings) outside of the local configuration file results in an exception when the configuration is loaded.</span></span>  
  
 <span data-ttu-id="ff288-177">Jedinou výjimkou je konfigurace známé typ pro serializaci, jak je popsáno v části serializace v tomto tématu.</span><span class="sxs-lookup"><span data-stu-id="ff288-177">The one exception is known-type configuration for serialization, as described in the Serialization section of this topic.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="ff288-178">Konfigurace rozšíření jsou podporovány pouze při spuštění v úplný vztah důvěryhodnosti.</span><span class="sxs-lookup"><span data-stu-id="ff288-178">Configuration extensions are only supported when running under Full Trust.</span></span>  
  
## <a name="diagnostics"></a><span data-ttu-id="ff288-179">Diagnostika</span><span class="sxs-lookup"><span data-stu-id="ff288-179">Diagnostics</span></span>  
  
### <a name="event-logging"></a><span data-ttu-id="ff288-180">Protokolování událostí</span><span class="sxs-lookup"><span data-stu-id="ff288-180">Event Logging</span></span>  
 <span data-ttu-id="ff288-181">Protokolování událostí omezená je podporována v částečné důvěryhodnosti.</span><span class="sxs-lookup"><span data-stu-id="ff288-181">Limited event logging is supported under partial trust.</span></span> <span data-ttu-id="ff288-182">Pouze služby Aktivace chyb a selhání protokolování trasování/zprávy se zaznamenávají do protokolu událostí.</span><span class="sxs-lookup"><span data-stu-id="ff288-182">Only service activation faults and tracing/message logging failures are logged to the Event Log.</span></span> <span data-ttu-id="ff288-183">Maximální počet událostí, které mohou být protokolovány procesem je 5, aby se zabránilo nadměrnému zprávy zápis do protokolu událostí.</span><span class="sxs-lookup"><span data-stu-id="ff288-183">The maximum number of events that can be logged by a process is 5, to avoid writing excessive messages to the Event Log.</span></span>  
  
### <a name="message-logging"></a><span data-ttu-id="ff288-184">Protokolování zpráv</span><span class="sxs-lookup"><span data-stu-id="ff288-184">Message Logging</span></span>  
 <span data-ttu-id="ff288-185">Zpráva protokolování nelze použít v případě [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] běží v prostředí s částečnou důvěryhodností.</span><span class="sxs-lookup"><span data-stu-id="ff288-185">Message logging does not work when [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] is run in a partial trust environment.</span></span> <span data-ttu-id="ff288-186">Pokud je povoleno v částečné důvěryhodnosti, neselže aktivace služby, ale je zaznamenána žádná zpráva.</span><span class="sxs-lookup"><span data-stu-id="ff288-186">If enabled under partial trust, it does not fail service activation, but no message is logged.</span></span>  
  
### <a name="tracing"></a><span data-ttu-id="ff288-187">Trasování</span><span class="sxs-lookup"><span data-stu-id="ff288-187">Tracing</span></span>  
 <span data-ttu-id="ff288-188">Funkce s omezeným přístupem trasování je k dispozici při spuštění v prostředí s částečnou důvěryhodností.</span><span class="sxs-lookup"><span data-stu-id="ff288-188">Restricted tracing functionality is available when running in a partial trust environment.</span></span> <span data-ttu-id="ff288-189">V <`listeners`> elementu v konfiguračním souboru, jsou pouze typy, které můžete přidat <xref:System.Diagnostics.TextWriterTraceListener> a nové <xref:System.Diagnostics.EventSchemaTraceListener>.</span><span class="sxs-lookup"><span data-stu-id="ff288-189">In the <`listeners`> element in the configuration file, the only types that you can add are <xref:System.Diagnostics.TextWriterTraceListener> and the new <xref:System.Diagnostics.EventSchemaTraceListener>.</span></span> <span data-ttu-id="ff288-190">Použijte standardní <xref:System.Diagnostics.XmlWriterTraceListener> může mít za následek protokoly neúplné nebo není správný.</span><span class="sxs-lookup"><span data-stu-id="ff288-190">Use of the standard <xref:System.Diagnostics.XmlWriterTraceListener> may result in incomplete or incorrect logs.</span></span>  
  
 <span data-ttu-id="ff288-191">Podporované trasování zdroje jsou:</span><span class="sxs-lookup"><span data-stu-id="ff288-191">Supported trace sources are:</span></span>  
  
-   <xref:System.ServiceModel>  
  
-   <xref:System.Runtime.Serialization>  
  
-   <span data-ttu-id="ff288-192"><xref:System.IdentityModel.Claims>, <xref:System.IdentityModel.Policy>, <xref:System.IdentityModel.Selectors>, a <xref:System.IdentityModel.Tokens>.</span><span class="sxs-lookup"><span data-stu-id="ff288-192"><xref:System.IdentityModel.Claims>, <xref:System.IdentityModel.Policy>, <xref:System.IdentityModel.Selectors>, and <xref:System.IdentityModel.Tokens>.</span></span>  
  
 <span data-ttu-id="ff288-193">Následující zdroje trasování nejsou podporovány:</span><span class="sxs-lookup"><span data-stu-id="ff288-193">The following trace sources are not supported:</span></span>  
  
-   <span data-ttu-id="ff288-194">CardSpace</span><span class="sxs-lookup"><span data-stu-id="ff288-194">CardSpace</span></span>  
  
-   <xref:System.IO.Log>  

-   <span data-ttu-id="ff288-195">[System.ServiceModel.Internal.TransactionBridge](https://msdn.microsoft.com/library/system.servicemodel.internal.transactionbridge.aspx)]</span><span class="sxs-lookup"><span data-stu-id="ff288-195">[System.ServiceModel.Internal.TransactionBridge](https://msdn.microsoft.com/library/system.servicemodel.internal.transactionbridge.aspx)]</span></span>
  
 <span data-ttu-id="ff288-196">Následující členy <xref:System.Diagnostics.TraceOptions> výčtu by neměl být určen:</span><span class="sxs-lookup"><span data-stu-id="ff288-196">The following members of the <xref:System.Diagnostics.TraceOptions> enumeration should not be specified:</span></span>  
  
-   <xref:System.Diagnostics.TraceOptions.Callstack?displayProperty=nameWithType>  
  
-   <xref:System.Diagnostics.TraceOptions.ProcessId?displayProperty=nameWithType>  
  
 <span data-ttu-id="ff288-197">Při použití trasování v prostředí s částečnou důvěryhodností, ujistěte se, že aplikace má dostatečná oprávnění k uložení výstup naslouchací proces trasování.</span><span class="sxs-lookup"><span data-stu-id="ff288-197">When using tracing in a partial trust environment, ensure that the application has sufficient permissions to store the output of the trace listener.</span></span> <span data-ttu-id="ff288-198">Například při použití <xref:System.Diagnostics.TextWriterTraceListener> k zápisu výstupu trasování do textového souboru, zkontrolujte, zda má aplikace potřebné FileIOPermission potřeba úspěšně zapisovat do souboru trasování.</span><span class="sxs-lookup"><span data-stu-id="ff288-198">For example, when using the <xref:System.Diagnostics.TextWriterTraceListener> to write trace output to a text file, ensure that the application has the necessary FileIOPermission required to successfully write to the trace file.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="ff288-199">Aby nedošlo k zaplavení trasovací soubory s duplicitní chybami [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] zakáže trasování prostředku nebo akce po prvním selhání zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="ff288-199">To avoid flooding the trace files with duplicate errors, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] disables tracing of the resource or action after the first security failure.</span></span> <span data-ttu-id="ff288-200">Prvním je proveden pokus o přístup k prostředku nebo provedení akce není jeden trasování výjimky pro přístup každý prostředek, který selhal.</span><span class="sxs-lookup"><span data-stu-id="ff288-200">There is one exception trace for each failed resource access, the first time an attempt is made to access the resource or perform the action.</span></span>  
  
## <a name="wcf-service-host"></a><span data-ttu-id="ff288-201">Hostitel služby WCF</span><span class="sxs-lookup"><span data-stu-id="ff288-201">WCF Service Host</span></span>  
 [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]<span data-ttu-id="ff288-202">Hostitel služby nepodporuje částečnou důvěryhodností.</span><span class="sxs-lookup"><span data-stu-id="ff288-202"> service host does not support partial trust.</span></span> <span data-ttu-id="ff288-203">Pokud chcete použít [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] služby v částečné důvěryhodnosti, nepoužívejte [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] šablona projektu knihovny služby v [!INCLUDE[vsprvs](../../../../includes/vsprvs-md.md)] k vytvoření služby.</span><span class="sxs-lookup"><span data-stu-id="ff288-203">If you want to use a [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] service in partial trust, do not use the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Service Library Project template in [!INCLUDE[vsprvs](../../../../includes/vsprvs-md.md)] to build your service.</span></span> <span data-ttu-id="ff288-204">Místo toho vytvořte nový web v [!INCLUDE[vsprvs](../../../../includes/vsprvs-md.md)] výběrem [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] webu šablony služby, která může hostovat službu na webovém serveru, na kterém [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] částečné důvěryhodnosti je podporována.</span><span class="sxs-lookup"><span data-stu-id="ff288-204">Instead, create a new Web site in [!INCLUDE[vsprvs](../../../../includes/vsprvs-md.md)] by choosing the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] service Web site template, which can host the service in a Web server on which [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] partial trust is supported.</span></span>  
  
## <a name="other-limitations"></a><span data-ttu-id="ff288-205">Další omezení</span><span class="sxs-lookup"><span data-stu-id="ff288-205">Other Limitations</span></span>  
 [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]<span data-ttu-id="ff288-206">je obecně omezený na aspekty zabezpečení při jeho způsobené hostitelskou aplikaci.</span><span class="sxs-lookup"><span data-stu-id="ff288-206"> is generally limited to the security considerations imposed upon it by the hosting application.</span></span> <span data-ttu-id="ff288-207">Například pokud [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] je hostován v aplikace prohlížeče XAML (XBAP), je předmětem XBAP omezení, jak je popsáno v [zabezpečení systému Windows Presentation Foundation částečné důvěryhodnosti](http://go.microsoft.com/fwlink/?LinkId=89138).</span><span class="sxs-lookup"><span data-stu-id="ff288-207">For example, if [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] is hosted in a XAML Browser Application (XBAP), it is subject to XBAP limitations, as described in [Windows Presentation Foundation Partial Trust Security](http://go.microsoft.com/fwlink/?LinkId=89138).</span></span>  
  
 <span data-ttu-id="ff288-208">Při spuštění indigo2 v prostředí s částečnou důvěryhodností nejsou povoleny tyto další funkce:</span><span class="sxs-lookup"><span data-stu-id="ff288-208">The following additional features are not enabled when running indigo2 in a partial trust environment:</span></span>  
  
-   <span data-ttu-id="ff288-209">Windows Management Instrumentation (WMI)</span><span class="sxs-lookup"><span data-stu-id="ff288-209">Windows Management Instrumentation (WMI)</span></span>  
  
-   <span data-ttu-id="ff288-210">Protokolování událostí je povolená jen částečně (viz popis v **diagnostiky** části).</span><span class="sxs-lookup"><span data-stu-id="ff288-210">Event logging is only partially enabled (see discussion in **Diagnostics** section).</span></span>  
  
-   <span data-ttu-id="ff288-211">Čítače výkonu</span><span class="sxs-lookup"><span data-stu-id="ff288-211">Performance counters</span></span>  
  
 <span data-ttu-id="ff288-212">Použití [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] funkce, které nejsou podporované v prostředí s částečnou důvěryhodností může mít za následek výjimky za běhu.</span><span class="sxs-lookup"><span data-stu-id="ff288-212">Use of [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] features that are not supported in a partial trust environment may result in exceptions at runtime.</span></span>  
  
## <a name="unlisted-features"></a><span data-ttu-id="ff288-213">Neuvedené funkce</span><span class="sxs-lookup"><span data-stu-id="ff288-213">Unlisted Features</span></span>  
 <span data-ttu-id="ff288-214">Nejlepší způsob, jak zjistit, že je část informace nebo akce není dostupná, když je nainstalován v prostředí s částečnou důvěryhodností k pokusu o přístup k prostředku nebo provádět akce uvnitř `try` blok a potom `catch` selhání.</span><span class="sxs-lookup"><span data-stu-id="ff288-214">The best way to discover that a piece of information or action is unavailable when running in a partial trust environment is to try to access the resource or do the action inside of a `try` block, and then `catch` the failure.</span></span> <span data-ttu-id="ff288-215">Aby nedošlo k zaplavení trasovací soubory s duplicitní chybami [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] zakáže trasování prostředku nebo akce po prvním selhání zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="ff288-215">To avoid flooding the trace files with duplicate errors, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] disables tracing of the resource or action after the first security failure.</span></span> <span data-ttu-id="ff288-216">Prvním je proveden pokus o přístup k prostředku nebo provedení akce není jeden trasování výjimky pro přístup každý prostředek, který selhal.</span><span class="sxs-lookup"><span data-stu-id="ff288-216">There is one exception trace for each failed resource access, the first time an attempt is made to access the resource or perform the action.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="ff288-217">Viz také</span><span class="sxs-lookup"><span data-stu-id="ff288-217">See Also</span></span>  
 <xref:System.ServiceModel.Channels.HttpTransportBindingElement>  
 <xref:System.ServiceModel.Channels.HttpsTransportBindingElement>  
 <xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement>  
 <xref:System.ServiceModel.Channels.WebMessageEncodingBindingElement>  
 [<span data-ttu-id="ff288-218">Podporované scénáře nasazení</span><span class="sxs-lookup"><span data-stu-id="ff288-218">Supported Deployment Scenarios</span></span>](../../../../docs/framework/wcf/feature-details/supported-deployment-scenarios.md)  
 [<span data-ttu-id="ff288-219">Doporučené postupy s částečnou důvěryhodností</span><span class="sxs-lookup"><span data-stu-id="ff288-219">Partial Trust Best Practices</span></span>](../../../../docs/framework/wcf/feature-details/partial-trust-best-practices.md)
