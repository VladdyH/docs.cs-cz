---
title: Jednosměrné služby
ms.custom: ''
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: ''
ms.suite: ''
ms.technology:
- dotnet-clr
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- Windows Communication Foundation [WCF], one-way service contracts
- WCF [WCF], one-way service contracts
- service contracts [WCF], defining one-way
ms.assetid: 19053a36-4492-45a3-bfe6-0365ee0205a3
caps.latest.revision: 18
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.workload:
- dotnet
ms.openlocfilehash: 380f6a10994c7eb69f4a59b222aa2d422151f247
ms.sourcegitcommit: 94d33cadc5ff81d2ac389bf5f26422c227832052
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 04/30/2018
---
# <a name="one-way-services"></a><span data-ttu-id="e7c9d-102">Jednosměrné služby</span><span class="sxs-lookup"><span data-stu-id="e7c9d-102">One-Way Services</span></span>
<span data-ttu-id="e7c9d-103">Výchozí chování operace služby je vzor požadavku a odpovědi.</span><span class="sxs-lookup"><span data-stu-id="e7c9d-103">The default behavior of a service operation is the request-reply pattern.</span></span> <span data-ttu-id="e7c9d-104">V požadavku a odpovědi vzor, klient počká zprávy s odpovědí, i když představuje operaci služby v kódu jako `void` metoda.</span><span class="sxs-lookup"><span data-stu-id="e7c9d-104">In a request-reply pattern, the client waits for the reply message, even if the service operation is represented in code as a `void` method.</span></span> <span data-ttu-id="e7c9d-105">S Jednosměrná operace se přenášejí pouze jednu zprávu.</span><span class="sxs-lookup"><span data-stu-id="e7c9d-105">With a one-way operation, only one message is transmitted.</span></span> <span data-ttu-id="e7c9d-106">Příjemce neodesílá zprávu odpovědi, ani nebude odesílatel očekávat jeden.</span><span class="sxs-lookup"><span data-stu-id="e7c9d-106">The receiver does not send a reply message, nor does the sender expect one.</span></span>  
  
 <span data-ttu-id="e7c9d-107">Použití vzoru jednosměrný návrhu:</span><span class="sxs-lookup"><span data-stu-id="e7c9d-107">Use the one-way design pattern:</span></span>  
  
-   <span data-ttu-id="e7c9d-108">Když klient musí volat operace a nemá vliv výsledek operace na úrovni operaci.</span><span class="sxs-lookup"><span data-stu-id="e7c9d-108">When the client must call operations and is not affected by the result of the operation at the operation level.</span></span>  
  
-   <span data-ttu-id="e7c9d-109">Při použití <xref:System.ServiceModel.NetMsmqBinding> nebo <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding> třídy.</span><span class="sxs-lookup"><span data-stu-id="e7c9d-109">When using the <xref:System.ServiceModel.NetMsmqBinding> or the <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding> class.</span></span> <span data-ttu-id="e7c9d-110">(Další informace o tomto scénáři najdete v tématu [fronty ve WCF](../../../../docs/framework/wcf/feature-details/queues-in-wcf.md).)</span><span class="sxs-lookup"><span data-stu-id="e7c9d-110">(For more information about this scenario, see [Queues in WCF](../../../../docs/framework/wcf/feature-details/queues-in-wcf.md).)</span></span>  
  
 <span data-ttu-id="e7c9d-111">Když je jednosměrná operace, neexistuje žádná zpráva odpovědi pro přenos informací o chybách zpět do klienta.</span><span class="sxs-lookup"><span data-stu-id="e7c9d-111">When an operation is one-way, there is no response message to carry error information back to the client.</span></span> <span data-ttu-id="e7c9d-112">Chybové stavy můžete zjistit pomocí funkce základní vazby, jako je například spolehlivé relace, nebo podle návrhu duplexní kontrakt služeb, který používá dvě jednosměrná operace – jednosměrného kontraktu z klienta ke službě volat operace služby a jiné jednosměrné smluvním vztahu mezi službou a klienta tak, aby služba můžete odesílat chyb zpět do klienta pomocí zpětné volání, které implementuje klienta.</span><span class="sxs-lookup"><span data-stu-id="e7c9d-112">You can detect error conditions by using features of the underlying binding, such as reliable sessions, or by designing a duplex service contract that uses two one-way operations—a one-way contract from the client to the service to call service operation and another one-way contract between the service and the client so that the service can send back faults to the client using a callback that the client implements.</span></span>  
  
 <span data-ttu-id="e7c9d-113">K vytvoření kontraktu jednosměrné služby, zadejte své smlouvy, použít <xref:System.ServiceModel.OperationContractAttribute> na každou operaci a nastavit <xref:System.ServiceModel.OperationContractAttribute.IsOneWay%2A> vlastnost `true`, jak je znázorněno v následujícím ukázkovém kódu.</span><span class="sxs-lookup"><span data-stu-id="e7c9d-113">To create a one-way service contract, define your service contract, apply the <xref:System.ServiceModel.OperationContractAttribute> class to each operation, and set the <xref:System.ServiceModel.OperationContractAttribute.IsOneWay%2A> property to `true`, as shown in the following sample code.</span></span>  
  
```  
[ServiceContract(Namespace="http://Microsoft.ServiceModel.Samples")]  
public interface IOneWayCalculator  
{  
    [OperationContract(IsOneWay=true)]  
    void Add(double n1, double n2);  
    [OperationContract(IsOneWay = true)]  
    void Subtract(double n1, double n2);  
    [OperationContract(IsOneWay = true)]  
    void Multiply(double n1, double n2);  
    [OperationContract(IsOneWay = true)]  
    void Divide(double n1, double n2);  
}  
```  
  
 <span data-ttu-id="e7c9d-114">Úplný příklad, najdete v článku [jednosměrný](../../../../docs/framework/wcf/samples/one-way.md) ukázka.</span><span class="sxs-lookup"><span data-stu-id="e7c9d-114">For a complete example, see the [One-Way](../../../../docs/framework/wcf/samples/one-way.md) sample.</span></span>  
  
## <a name="clients-blocking-with-one-way-operations"></a><span data-ttu-id="e7c9d-115">Klienti blokování pomocí Jednosměrná operace</span><span class="sxs-lookup"><span data-stu-id="e7c9d-115">Clients Blocking with One-Way Operations</span></span>  
 <span data-ttu-id="e7c9d-116">Je důležité si uvědomit, že zatímco některé jednosměrné aplikace vrací také odchozí data se zapisují do síťové připojení, v několika scénářích implementaci vazby nebo služby může způsobit [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] klienta blokovat pomocí jednosměrné operace.</span><span class="sxs-lookup"><span data-stu-id="e7c9d-116">It is important to realize that while some one-way applications return as soon as the outbound data is written to the network connection, in several scenarios the implementation of a binding or of a service can cause a [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] client to block using one-way operations.</span></span> <span data-ttu-id="e7c9d-117">V [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] klientské aplikace, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] objekt klienta nevrátí, dokud odchozí data byla zapsána na síťové připojení.</span><span class="sxs-lookup"><span data-stu-id="e7c9d-117">In [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] client applications, the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] client object does not return until the outbound data has been written to the network connection.</span></span> <span data-ttu-id="e7c9d-118">To platí pro všechny zprávy exchange způsoby, včetně Jednosměrná operace; To znamená, že jakýkoli problém s zápis dat do přenosu vrácení, nemůže klient.</span><span class="sxs-lookup"><span data-stu-id="e7c9d-118">This is true for all message exchange patterns, including one-way operations; this means that any problem writing the data to the transport prevents the client from returning.</span></span> <span data-ttu-id="e7c9d-119">V závislosti na problém, může být výsledkem výjimku nebo zpoždění při odesílání zpráv do služby.</span><span class="sxs-lookup"><span data-stu-id="e7c9d-119">Depending upon the problem, the result could be an exception or a delay in sending messages to the service.</span></span>  
  
 <span data-ttu-id="e7c9d-120">Například, pokud přenos nelze najít koncového bodu <xref:System.ServiceModel.EndpointNotFoundException?displayProperty=nameWithType> neprodleně mnohem je vyvolána výjimka.</span><span class="sxs-lookup"><span data-stu-id="e7c9d-120">For example, if the transport cannot find the endpoint, a <xref:System.ServiceModel.EndpointNotFoundException?displayProperty=nameWithType> exception is thrown without much delay.</span></span> <span data-ttu-id="e7c9d-121">Také je však možné, že služba nelze číst data mimo přenosová z nějakého důvodu, což zabraňuje přenos klienta odesilatel operaci vrácení.</span><span class="sxs-lookup"><span data-stu-id="e7c9d-121">However, it is also possible that the service is unable to read the data off the wire for some reason, which prevents the client transport send operation from returning.</span></span> <span data-ttu-id="e7c9d-122">V těchto případech Pokud <xref:System.ServiceModel.Channels.Binding.SendTimeout%2A?displayProperty=nameWithType> období na přenos klienta vazby překročí, <xref:System.TimeoutException?displayProperty=nameWithType> je vyvolána – ale ne dokud byl překročen časový limit.</span><span class="sxs-lookup"><span data-stu-id="e7c9d-122">In these cases, if the <xref:System.ServiceModel.Channels.Binding.SendTimeout%2A?displayProperty=nameWithType> period on the client transport binding is exceeded, a <xref:System.TimeoutException?displayProperty=nameWithType> is thrown—but not until the timeout period has been exceeded.</span></span> <span data-ttu-id="e7c9d-123">Je také možné aktivovat mnoho zprávy na službu, službu nemohl zpracovat za určité míry.</span><span class="sxs-lookup"><span data-stu-id="e7c9d-123">It is also possible to fire so many messages at a service that the service cannot process them past a certain point.</span></span> <span data-ttu-id="e7c9d-124">V takovém případě příliš, jednosměrné klientské bloky dokud služba dokáže zpracovat zprávy, nebo dokud je vyvolána výjimka.</span><span class="sxs-lookup"><span data-stu-id="e7c9d-124">In this case, too, the one-way client blocks until the service can process the messages or until an exception is thrown.</span></span>  
  
 <span data-ttu-id="e7c9d-125">Další variantou je situace, ve kterém služba <xref:System.ServiceModel.ServiceBehaviorAttribute.ConcurrencyMode%2A?displayProperty=nameWithType> je nastavena na <xref:System.ServiceModel.ConcurrencyMode.Single> a vazba používá relací.</span><span class="sxs-lookup"><span data-stu-id="e7c9d-125">Another variation is the situation in which the service <xref:System.ServiceModel.ServiceBehaviorAttribute.ConcurrencyMode%2A?displayProperty=nameWithType> property is set to <xref:System.ServiceModel.ConcurrencyMode.Single> and the binding uses sessions.</span></span> <span data-ttu-id="e7c9d-126">V takovém případě dispečera vynucuje řazení příchozí zprávy (požadavek relace), která brání následné zprávy při čtení mimo síť, dokud služba zpracovala předchozí zpráva dané relace.</span><span class="sxs-lookup"><span data-stu-id="e7c9d-126">In this case, the dispatcher enforces ordering on the incoming messages (a requirement of sessions), which prevents subsequent messages from being read off the network until the service has processed the preceding message for that session.</span></span> <span data-ttu-id="e7c9d-127">Znovu klientské bloky, ale jestli dojde k výjimce závisí na tom, zda služba je schopna zpracovat data čekání před nastavení časový limit na straně klienta.</span><span class="sxs-lookup"><span data-stu-id="e7c9d-127">Again, the client blocks, but whether an exception occurs depends upon whether the service is able to process the waiting data prior to the timeout settings on the client.</span></span>  
  
 <span data-ttu-id="e7c9d-128">Některé tento problém můžete zmírnit tím vložením do vyrovnávací paměti mezi klientského objektu a operaci odeslání přenos klienta.</span><span class="sxs-lookup"><span data-stu-id="e7c9d-128">You can mitigate some of this problem by inserting a buffer between the client object and the client transport's send operation.</span></span> <span data-ttu-id="e7c9d-129">Například pomocí asynchronní volání nebo pomocí frontu v paměti zprávy můžete povolit klientského objektu rychle vrátit.</span><span class="sxs-lookup"><span data-stu-id="e7c9d-129">For example, using asynchronous calls or using an in-memory message queue can enable the client object to return quickly.</span></span> <span data-ttu-id="e7c9d-130">Oba přístupy může zvýšit funkce, ale přesto vynutit omezení velikosti fondu vláken a fronty zpráv.</span><span class="sxs-lookup"><span data-stu-id="e7c9d-130">Both approaches may increase functionality, but the size of the thread pool and the message queue still enforce limits.</span></span>  
  
 <span data-ttu-id="e7c9d-131">Doporučujeme, místo toho zkontrolujte různé ovládací prvky služby, a také na straně klienta a pak scénáře aplikace k určení optimální konfiguraci na obou stranách otestovat.</span><span class="sxs-lookup"><span data-stu-id="e7c9d-131">It is recommended, instead, that you examine the various controls on the service as well as on the client, and then test your application scenarios to determine the best configuration on either side.</span></span> <span data-ttu-id="e7c9d-132">Například pokud použití relací blokuje zpracování zpráv vaší služby, můžete nastavit <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A?displayProperty=nameWithType> vlastnost <xref:System.ServiceModel.InstanceContextMode.PerCall> tak, aby každou zprávu zpracovává instanci různé služby a nastavte <xref:System.ServiceModel.ServiceBehaviorAttribute.ConcurrencyMode%2A> k <xref:System.ServiceModel.ConcurrencyMode.Multiple> Chcete-li povolit více než jedno vlákno k odesílání zpráv v čase.</span><span class="sxs-lookup"><span data-stu-id="e7c9d-132">For example, if the use of sessions is blocking the processing of messages on your service, you can set the <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A?displayProperty=nameWithType> property to <xref:System.ServiceModel.InstanceContextMode.PerCall> so that each message can be processed by a different service instance, and set the <xref:System.ServiceModel.ServiceBehaviorAttribute.ConcurrencyMode%2A> to <xref:System.ServiceModel.ConcurrencyMode.Multiple> in order to allow more than one thread to dispatch messages at a time.</span></span> <span data-ttu-id="e7c9d-133">Další možností je zvýšit čtení kvóty vazeb klienta a služby.</span><span class="sxs-lookup"><span data-stu-id="e7c9d-133">Another approach is to increase the read quotas of the service and client bindings.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="e7c9d-134">Viz také</span><span class="sxs-lookup"><span data-stu-id="e7c9d-134">See Also</span></span>  
 [<span data-ttu-id="e7c9d-135">Jednosměrný</span><span class="sxs-lookup"><span data-stu-id="e7c9d-135">One-Way</span></span>](../../../../docs/framework/wcf/samples/one-way.md)
