---
title: Webhosting frontové aplikace
ms.date: 03/30/2017
ms.assetid: c7a539fa-e442-4c08-a7f1-17b7f5a03e88
ms.openlocfilehash: f396ffadeca81d86d867842b63cad3c63d67ff3a
ms.sourcegitcommit: 3d5d33f384eeba41b2dff79d096f47ccc8d8f03d
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 05/04/2018
ms.locfileid: "33505046"
---
# <a name="web-hosting-a-queued-application"></a><span data-ttu-id="80342-102">Webhosting frontové aplikace</span><span class="sxs-lookup"><span data-stu-id="80342-102">Web Hosting a Queued Application</span></span>
<span data-ttu-id="80342-103">Služba aktivace procesů systému Windows (WAS) spravuje aktivace a dobu života pracovních procesů, které obsahují aplikace služby Windows Communication Foundation (WCF) tohoto hostitele.</span><span class="sxs-lookup"><span data-stu-id="80342-103">The Windows Process Activation Service (WAS) manages the activation and lifetime of the worker processes that contain applications that host Windows Communication Foundation (WCF) services.</span></span> <span data-ttu-id="80342-104">Model procesu WAS umožňuje zobecnit [!INCLUDE[iis601](../../../../includes/iis601-md.md)] model procesu pro server HTTP odebráním závislosti na protokolu HTTP.</span><span class="sxs-lookup"><span data-stu-id="80342-104">The WAS process model generalizes the [!INCLUDE[iis601](../../../../includes/iis601-md.md)] process model for the HTTP server by removing the dependency on HTTP.</span></span> <span data-ttu-id="80342-105">To umožňuje službám WCF pomocí protokolu HTTP a jiných protokolů než HTTP, jako je například net.msmq a msmq.formatname v hostitelské prostředí, které podporuje aktivaci na základě zpráv a nabízí schopnost hostovat velký počet aplikací v daném počítači.</span><span class="sxs-lookup"><span data-stu-id="80342-105">This allows WCF services to use both HTTP and non-HTTP protocols, such as net.msmq and msmq.formatname, in a hosting environment that supports message-based activation and offers the ability to host a large number of applications on a given computer.</span></span>  
  
 <span data-ttu-id="80342-106">BYL zahrnuje služba Aktivace řízení front zpráv (MSMQ), která aktivuje aplikace ve frontě, když jeden nebo více zpráv ukládány v jednom z fronty používá aplikace.</span><span class="sxs-lookup"><span data-stu-id="80342-106">WAS includes a Message Queuing (MSMQ) activation service that activates a queued application when one or more messages are placed in one of the queues used by the application.</span></span> <span data-ttu-id="80342-107">Aktivace služby MSMQ je služby NT, který se automaticky spustí ve výchozím nastavení.</span><span class="sxs-lookup"><span data-stu-id="80342-107">The MSMQ activation service is an NT service that is automatically started by default.</span></span>  
  
 <span data-ttu-id="80342-108">Další informace o WAS a výhod najdete v tématu [hostování v aktivační službě procesů systému Windows](../../../../docs/framework/wcf/feature-details/hosting-in-windows-process-activation-service.md).</span><span class="sxs-lookup"><span data-stu-id="80342-108">For more information about WAS and its benefits, see [Hosting in Windows Process Activation Service](../../../../docs/framework/wcf/feature-details/hosting-in-windows-process-activation-service.md).</span></span> <span data-ttu-id="80342-109">Další informace o MSMQ najdete v tématu [fronty – přehled](../../../../docs/framework/wcf/feature-details/queues-overview.md)</span><span class="sxs-lookup"><span data-stu-id="80342-109">For more information about MSMQ, see [Queues Overview](../../../../docs/framework/wcf/feature-details/queues-overview.md)</span></span>  
  
## <a name="queue-addressing-in-was"></a><span data-ttu-id="80342-110">Fronty adresování ve WAS</span><span class="sxs-lookup"><span data-stu-id="80342-110">Queue Addressing in WAS</span></span>  
 <span data-ttu-id="80342-111">BYLA aplikací mít adresy identifikátor URI (Uniform Resource).</span><span class="sxs-lookup"><span data-stu-id="80342-111">WAS applications have Uniform Resource Identifier (URI) addresses.</span></span> <span data-ttu-id="80342-112">Adresy aplikací mít dvě části: základní předpony identifikátoru URI a specifické pro aplikaci, relativní adresu (cesta).</span><span class="sxs-lookup"><span data-stu-id="80342-112">Application addresses have two parts: a base URI prefix and an application-specific, relative address (path).</span></span> <span data-ttu-id="80342-113">Tyto dvě části zadejte externí adresu pro aplikaci, když propojeny.</span><span class="sxs-lookup"><span data-stu-id="80342-113">These two parts provide the external address for an application when joined together.</span></span> <span data-ttu-id="80342-114">Základní předpony identifikátoru URI je vytvořený z vazby webu a používá se pro všechny aplikace v rámci lokality, například "net.msmq://localhost", "msmq.formatname://localhost" nebo "net.tcp://localhost".</span><span class="sxs-lookup"><span data-stu-id="80342-114">The base URI prefix is constructed from the site binding and is used for all the applications under the site, for example, "net.msmq://localhost", "msmq.formatname://localhost", or "net.tcp://localhost".</span></span> <span data-ttu-id="80342-115">Aplikace adresy se pak vytvářejí provedením fragmenty cesta specifické pro aplikaci (například "/ applicationOne") a jejich připojení k základní identifikátor URI předpona, která přicházejí na úplný identifikátor URI aplikace, například "net.msmq://localhost/applicationOne".</span><span class="sxs-lookup"><span data-stu-id="80342-115">Application addresses are then constructed by taking application-specific path fragments (such as "/applicationOne") and appending them to the base URI prefix to arrive at the full application URI, for example, "net.msmq://localhost/applicationOne".</span></span>  
  
 <span data-ttu-id="80342-116">Aktivace služby MSMQ používá identifikátor URI aplikace tak, aby odpovídaly fronta, kterou je třeba sledovat aktivace služby MSMQ pro zprávy.</span><span class="sxs-lookup"><span data-stu-id="80342-116">The MSMQ activation service uses the application URI to match the queue that the MSMQ activation service must monitor for messages.</span></span> <span data-ttu-id="80342-117">Při spuštění aktivační služby MSMQ, zobrazí všechny veřejné a soukromé fronty v počítači je nakonfigurovaný pro příjem z a monitoruje jejich pro zprávy.</span><span class="sxs-lookup"><span data-stu-id="80342-117">When the MSMQ activation service starts, it enumerates all public and private queues on the computer it is configured to receive from and monitors them for messages.</span></span> <span data-ttu-id="80342-118">Každých 10 minut, aktivace služby MSMQ aktualizuje seznam fronty pro monitorování.</span><span class="sxs-lookup"><span data-stu-id="80342-118">Every 10 minutes, the MSMQ activation service refreshes the list of queues to monitor.</span></span> <span data-ttu-id="80342-119">Když se najde zprávu ve frontě, službu Aktivace odpovídá názvu fronty do aplikace nejdéle odpovídající identifikátor URI pro vazbu net.msmq a aktivuje aplikaci.</span><span class="sxs-lookup"><span data-stu-id="80342-119">When a message is found in a queue, the activation service matches the queue name to the longest matching application URI for the net.msmq binding and activates the application.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="80342-120">Aplikace aktivované musí odpovídat (nejdelší shody) předponu názvu fronty.</span><span class="sxs-lookup"><span data-stu-id="80342-120">The application being activated must match (longest match) the prefix of the queue name.</span></span>  
  
 <span data-ttu-id="80342-121">Je třeba název fronty: msmqWebHost/orderProcessing/service.svc.</span><span class="sxs-lookup"><span data-stu-id="80342-121">For example, a queue name is: msmqWebHost/orderProcessing/service.svc.</span></span> <span data-ttu-id="80342-122">Pokud /msmqWebHost/orderProcessing virtuálního adresáře s service.svc v něm má aplikace 1 a 2 aplikace má /msmqWebHost virtuálního adresáře s orderProcessing.svc v něm, je aktivovaná aplikace 1.</span><span class="sxs-lookup"><span data-stu-id="80342-122">If Application 1 has a virtual directory /msmqWebHost/orderProcessing with a service.svc under it, and Application 2 has a virtual directory /msmqWebHost with an orderProcessing.svc under it, Application 1 is activated.</span></span> <span data-ttu-id="80342-123">Pokud se odstraní aplikaci 1, 2 aplikace je aktivována.</span><span class="sxs-lookup"><span data-stu-id="80342-123">If Application 1 is deleted, Application 2 is activated.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="80342-124">Při vytvoření fronty, všechny zprávy do něj odeslané Neaktivujte aplikace dokud aktivace služby MSMQ aktualizuje seznam fronty, který je maximálně 10 minut od okamžiku, kdy fronta byla vytvořena.</span><span class="sxs-lookup"><span data-stu-id="80342-124">When a queue is created, any messages sent to it do not activate an application until the MSMQ activation service refreshes the queue list, which is, at most, 10 minutes from the time the queue was created.</span></span> <span data-ttu-id="80342-125">Restartování služby Aktivace aktualizuje seznamu fronty.</span><span class="sxs-lookup"><span data-stu-id="80342-125">Restarting the activation service refreshes the queue list as well.</span></span>  
  
### <a name="the-effect-of-private-and-public-queues-on-addressing"></a><span data-ttu-id="80342-126">Účinek privátní a veřejné fronty na adresování</span><span class="sxs-lookup"><span data-stu-id="80342-126">The Effect of Private and Public Queues on Addressing</span></span>  
 <span data-ttu-id="80342-127">Aktivace služby MSMQ nerozlišuje mezi monitorování privátní a veřejné fronty.</span><span class="sxs-lookup"><span data-stu-id="80342-127">The MSMQ activation service does not distinguish between private and public queue monitoring.</span></span> <span data-ttu-id="80342-128">Jako takový nemůže mít veřejné a soukromé fronty se stejným názvem.</span><span class="sxs-lookup"><span data-stu-id="80342-128">As such, you cannot have public and private queues with the same name.</span></span> <span data-ttu-id="80342-129">Pokud tak učiníte, může získat k hostované webové aplikaci aktivovat čtení pomocí kteréhokoli z fronty.</span><span class="sxs-lookup"><span data-stu-id="80342-129">If you do, a Web-hosted application may get activated reading from either of the queues.</span></span>  
  
### <a name="queue-configuration-for-activation"></a><span data-ttu-id="80342-130">Konfigurace fronty pro aktivaci</span><span class="sxs-lookup"><span data-stu-id="80342-130">Queue Configuration for Activation</span></span>  
 <span data-ttu-id="80342-131">Aktivace služby MSMQ spouští jako síťová služba.</span><span class="sxs-lookup"><span data-stu-id="80342-131">The MSMQ activation service runs as NETWORK SERVICE.</span></span> <span data-ttu-id="80342-132">Je služba, která monitoruje fronty k aktivaci aplikace.</span><span class="sxs-lookup"><span data-stu-id="80342-132">It is the service that monitors queues to activate applications.</span></span> <span data-ttu-id="80342-133">Pro něj k aktivaci aplikací z fronty musíte zadat fronty pro SÍŤOVOU službu přístup k prohlížení zpráv ve svém seznamu řízení přístupu (ACL).</span><span class="sxs-lookup"><span data-stu-id="80342-133">For it to activate applications from the queue, the queue must provide for NETWORK SERVICE access to peek for messages in its access control list (ACL).</span></span>  
  
### <a name="poison-messaging"></a><span data-ttu-id="80342-134">Zacházení s nezpracovatelnými zasílání zpráv</span><span class="sxs-lookup"><span data-stu-id="80342-134">Poison Messaging</span></span>  
 <span data-ttu-id="80342-135">Zpracování ve WCF poškozených zpráv se zpracovává souborem kanál, který není pouze zjistí, že zprávy je poškozen, ale vybírá dispozice, v závislosti na konfiguraci uživatele.</span><span class="sxs-lookup"><span data-stu-id="80342-135">Poison message handling in WCF is handled by the channel, which not only detects that a message is poisoned but selects a disposition based on user configuration.</span></span> <span data-ttu-id="80342-136">Ve frontě v důsledku toho není do jedné zprávy.</span><span class="sxs-lookup"><span data-stu-id="80342-136">As a result, there is a single message in the queue.</span></span> <span data-ttu-id="80342-137">Aplikace hostované webové zruší následných časy a zpráva bude přesunuta do fronty opakování.</span><span class="sxs-lookup"><span data-stu-id="80342-137">The Web-hosted application aborts successive times and the message is moved to a retry queue.</span></span> <span data-ttu-id="80342-138">V okamžiku, závisí na zpoždění opakování cyklus zpráva se přesune ze fronty opakování hlavní fronty a zkuste to znovu.</span><span class="sxs-lookup"><span data-stu-id="80342-138">At a point dictated by the retry cycle delay, the message is moved from the retry queue to the main queue to try again.</span></span> <span data-ttu-id="80342-139">Ale vyžaduje zařazených do fronty kanálu jako aktivní.</span><span class="sxs-lookup"><span data-stu-id="80342-139">But this requires the queued channel to be active.</span></span> <span data-ttu-id="80342-140">Pokud je aplikace recyklované službou WAS, pak zpráva zůstane v fronty opakování dokud dorazí další zprávu ve frontě hlavní aktivovat aplikaci ve frontě.</span><span class="sxs-lookup"><span data-stu-id="80342-140">If the application is recycled by WAS, then the message remains in the retry queue until another message arrives in the main queue to activate the queued application.</span></span> <span data-ttu-id="80342-141">Alternativní řešení v tomto případě je přesunout zprávu ručně z fronty opakování zpět do hlavní fronty se znovu aktivovat aplikaci.</span><span class="sxs-lookup"><span data-stu-id="80342-141">The workaround in this case is to move the message manually from the retry queue back to the main queue to reactivate the application.</span></span>  
  
### <a name="subqueue-and-system-queue-caveat"></a><span data-ttu-id="80342-142">Dílčí fronta a přímý přístup fronty paměti systému</span><span class="sxs-lookup"><span data-stu-id="80342-142">Subqueue and System Queue Caveat</span></span>  
 <span data-ttu-id="80342-143">Aplikace hostované WAS nelze aktivovat, na základě zpráv ve frontě systému, jako jsou systémové fronty nedoručených zpráv nebo dílčí fronty, jako je například poškozených dílčí fronty.</span><span class="sxs-lookup"><span data-stu-id="80342-143">A WAS-hosted application cannot be activated based on messages in a system queue, such as the system-wide dead-letter queue, or sub-queues, such as poison sub-queues.</span></span> <span data-ttu-id="80342-144">Jedná se o omezení pro tuto verzi produktu.</span><span class="sxs-lookup"><span data-stu-id="80342-144">This is a limitation for this version of the product.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="80342-145">Viz také</span><span class="sxs-lookup"><span data-stu-id="80342-145">See Also</span></span>  
 [<span data-ttu-id="80342-146">Zpracování škodlivých zpráv</span><span class="sxs-lookup"><span data-stu-id="80342-146">Poison Message Handling</span></span>](../../../../docs/framework/wcf/feature-details/poison-message-handling.md)  
 [<span data-ttu-id="80342-147">Koncové body služby a adresování front</span><span class="sxs-lookup"><span data-stu-id="80342-147">Service Endpoints and Queue Addressing</span></span>](../../../../docs/framework/wcf/feature-details/service-endpoints-and-queue-addressing.md)
