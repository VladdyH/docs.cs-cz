---
title: "Uvnitř CustomPeerResolverService: registrace klienta"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 40236953-a916-4236-84a6-928859e1331a
caps.latest.revision: "7"
author: Erikre
ms.author: erikre
manager: erikre
ms.openlocfilehash: b157d177b238db655e98a4cbe1d5a86ae895afa1
ms.sourcegitcommit: bd1ef61f4bb794b25383d3d72e71041a5ced172e
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/18/2017
---
# <a name="inside-the-custompeerresolverservice-client-registrations"></a><span data-ttu-id="17b09-102">Uvnitř CustomPeerResolverService: registrace klienta</span><span class="sxs-lookup"><span data-stu-id="17b09-102">Inside the CustomPeerResolverService: Client Registrations</span></span>
<span data-ttu-id="17b09-103">Každý uzel v mřížce publikuje informace jeho koncový bod, a překladač služby pomocí `Register` funkce.</span><span class="sxs-lookup"><span data-stu-id="17b09-103">Each node in the mesh publishes its endpoint information to the resolver service through the `Register` function.</span></span> <span data-ttu-id="17b09-104">Službu překladač tyto informace ukládá jako registrační záznam.</span><span class="sxs-lookup"><span data-stu-id="17b09-104">The resolver service stores this information as a registration record.</span></span> <span data-ttu-id="17b09-105">Tento záznam obsahuje jedinečný identifikátor (RegistrationID) a informace o koncovém (PeerNodeAddress) pro uzel.</span><span class="sxs-lookup"><span data-stu-id="17b09-105">This record contains a unique identifier (RegistrationID) and endpoint information (PeerNodeAddress) for the node.</span></span>  
  
## <a name="stale-records-and-expiration-time"></a><span data-ttu-id="17b09-106">Zastaralých záznamů a čas vypršení platnosti</span><span class="sxs-lookup"><span data-stu-id="17b09-106">Stale Records and Expiration Time</span></span>  
 <span data-ttu-id="17b09-107">V ideálním případě Jestliže uzel opustí OK, se bude volat `Unregister` funkce, což způsobí, že služba překladač pro odebrání položky registrace.</span><span class="sxs-lookup"><span data-stu-id="17b09-107">Ideally, when a node leaves the mesh, it will call the `Unregister` function, which causes the resolver service to remove the registration entry.</span></span> <span data-ttu-id="17b09-108">V některých případech uzly vypnutý nebo jsou nedostupná před voláním `Unregister`, výstupu za zastaralé registrační záznam.</span><span class="sxs-lookup"><span data-stu-id="17b09-108">Sometimes, nodes shut down or become inaccessible before calling `Unregister`, leaving behind a stale registration record.</span></span>  
  
 <span data-ttu-id="17b09-109">Zastaralé záznamy ve službě překladač může způsobit selhání připojení.</span><span class="sxs-lookup"><span data-stu-id="17b09-109">Stale records in your resolver service can cause failed connections.</span></span> <span data-ttu-id="17b09-110">Pokud uzel se připojujete k mřížku přijme připojení zastaralé informace z překladače služby, může trvat déle, než se úspěšně připojit OK.</span><span class="sxs-lookup"><span data-stu-id="17b09-110">If a node trying to connect to a mesh receives stale connection information from the resolver service, it can take longer to successfully join the mesh.</span></span> <span data-ttu-id="17b09-111">Zastaralých záznamů také zabírají paměť.</span><span class="sxs-lookup"><span data-stu-id="17b09-111">Stale records also take up memory.</span></span> <span data-ttu-id="17b09-112">Bez efektivní vyčištění procesu může do mezipaměti se používá k ukládání registrace nakonec přetečení a havárií službu překladač.</span><span class="sxs-lookup"><span data-stu-id="17b09-112">Without an efficient clean up process, the cache used to store registrations could eventually overflow and crash the resolver service.</span></span>  
  
 <span data-ttu-id="17b09-113"><xref:System.ServiceModel.PeerResolvers.CustomPeerResolverService> Označí všechny záznamy s vypršení platnosti času (DateTime) a ukládá tyto informace v rámci záznamu.</span><span class="sxs-lookup"><span data-stu-id="17b09-113">The <xref:System.ServiceModel.PeerResolvers.CustomPeerResolverService> marks each record with an expiration time (DateTime), and stores that information as part of the record.</span></span> <span data-ttu-id="17b09-114">Služba používá k identifikaci zastaralých záznamů čas vypršení platnosti.</span><span class="sxs-lookup"><span data-stu-id="17b09-114">The service uses the expiration time to identify stale records.</span></span> <span data-ttu-id="17b09-115">Vlastní implementace musí udělat něco podobného.</span><span class="sxs-lookup"><span data-stu-id="17b09-115">Custom implementations should do something similar.</span></span>  
  
## <a name="refreshinterval-and-cleanupinterval"></a><span data-ttu-id="17b09-116">RefreshInterval a CleanupInterval</span><span class="sxs-lookup"><span data-stu-id="17b09-116">RefreshInterval and CleanupInterval</span></span>  
 <span data-ttu-id="17b09-117">`RefreshInterval` Vlastnost <xref:System.ServiceModel.PeerResolvers.CustomPeerResolverService> definuje, jak dlouho zůstanou platná ve vyhledávací tabulce registrace služby záznamy registrace.</span><span class="sxs-lookup"><span data-stu-id="17b09-117">The `RefreshInterval` property of the <xref:System.ServiceModel.PeerResolvers.CustomPeerResolverService> defines how long registration records remain valid in the service's registration lookup table.</span></span> <span data-ttu-id="17b09-118">Když množství času, který této vlastnosti byla úspěšná pro daný záznam, že záznam se stane zastaralé a je označena pro odstranění.</span><span class="sxs-lookup"><span data-stu-id="17b09-118">When the amount of time supplied to this property has passed for a given record, that record becomes stale and is marked for deletion.</span></span>  
  
 <span data-ttu-id="17b09-119">`CleanupInterval` Vlastnost <xref:System.ServiceModel.PeerResolvers.CustomPeerResolverService> informuje službu jak často k hledání a odstranit záznamy zastaralých registrace.</span><span class="sxs-lookup"><span data-stu-id="17b09-119">The `CleanupInterval` property of the <xref:System.ServiceModel.PeerResolvers.CustomPeerResolverService> tells the service how often to search for and delete stale registration records.</span></span> <span data-ttu-id="17b09-120">`CleanupInterval` Musí být nastavena na čas větší než nebo rovna hodnotě `RefreshInterval` nastavit služby.</span><span class="sxs-lookup"><span data-stu-id="17b09-120">The `CleanupInterval` should be set to a time greater than or equal to the `RefreshInterval` set on the service.</span></span>  
  
 <span data-ttu-id="17b09-121">Chcete-li implementovat vlastní překladač služby, zápis funkce údržby pro odebírání zastaralých registrace záznamů.</span><span class="sxs-lookup"><span data-stu-id="17b09-121">To implement your own resolver service, you need to write a maintenance function to remove stale registration records.</span></span> <span data-ttu-id="17b09-122">Chcete-li to provést několika způsoby:</span><span class="sxs-lookup"><span data-stu-id="17b09-122">There are several ways to do this:</span></span>  
  
-   <span data-ttu-id="17b09-123">**Pravidelná údržba**: nastavit časovač pro přejděte pravidelně vypnout a projít úložiště dat. Chcete-li odstranit staré záznamy.</span><span class="sxs-lookup"><span data-stu-id="17b09-123">**Periodic maintenance**: Set a timer to go off periodically, and go through your data store to delete old records.</span></span> <span data-ttu-id="17b09-124"><xref:System.ServiceModel.PeerResolvers.CustomPeerResolverService> Používá tento přístup.</span><span class="sxs-lookup"><span data-stu-id="17b09-124">The <xref:System.ServiceModel.PeerResolvers.CustomPeerResolverService> uses this approach.</span></span>  
  
-   <span data-ttu-id="17b09-125">**Pasivní odstranění**: místo aktivně hledání zastaralých záznamů v pravidelných intervalech, můžete určit a odstranit zastaralé záznamy, když vaše služba již provádí jinou funkci.</span><span class="sxs-lookup"><span data-stu-id="17b09-125">**Passive deletion**: Instead of actively searching for stale records at regular intervals, you can identify and delete stale records when your service is already performing another function.</span></span> <span data-ttu-id="17b09-126">To může potenciálně prodloužit dobu odezvy na požadavky od klientů překladače, ale eliminuje potřebu časovač a efektivnější, pokud jsou několika uzlů očekávat opustit, aniž volání `Unregister`.</span><span class="sxs-lookup"><span data-stu-id="17b09-126">This may potentially slow down response time to requests from the resolver clients, but it eliminates the need for a timer, and may be more efficient if few nodes are expected to leave without calling `Unregister`.</span></span>  
  
## <a name="registrationlifetime-and-refresh"></a><span data-ttu-id="17b09-127">RegistrationLifetime a aktualizace</span><span class="sxs-lookup"><span data-stu-id="17b09-127">RegistrationLifetime and Refresh</span></span>  
 <span data-ttu-id="17b09-128">Uzel zaregistruje překladač službou, obdrží <xref:System.ServiceModel.PeerResolvers.RegisterResponseInfo> objekt ze služby.</span><span class="sxs-lookup"><span data-stu-id="17b09-128">When a node registers with a resolver service, it receives a <xref:System.ServiceModel.PeerResolvers.RegisterResponseInfo> object from the service.</span></span> <span data-ttu-id="17b09-129">Má tento objekt `RegistrationLifetime` vlastnost, která označuje k uzlu, jak dlouho má před registrace vyprší a je odebrán službou překladač.</span><span class="sxs-lookup"><span data-stu-id="17b09-129">This object has a `RegistrationLifetime` property which indicates to the node how much time it has before the registration expires and is removed by the resolver service.</span></span> <span data-ttu-id="17b09-130">Pokud například `RegistrationLifetime` činí 2 minuty, uzlu potřebuje volat `Refresh` v části 2 minuty zajistit záznam zůstává čerstvé a se neodstraní.</span><span class="sxs-lookup"><span data-stu-id="17b09-130">If, for example, the `RegistrationLifetime` is 2 minutes, the node needs to call `Refresh` in under 2 minutes to ensure the record stays fresh and is not deleted.</span></span> <span data-ttu-id="17b09-131">Když služba překladač obdrží `Refresh` požádat, vyhledá záznam a obnoví čas vypršení platnosti.</span><span class="sxs-lookup"><span data-stu-id="17b09-131">When the resolver service receives a `Refresh` request, it looks up the record and resets the expiration time.</span></span> <span data-ttu-id="17b09-132">Aktualizujte vrátí <xref:System.ServiceModel.PeerResolvers.RefreshResponseInfo> objektu s `RegistrationLifetime` vlastnost.</span><span class="sxs-lookup"><span data-stu-id="17b09-132">Refresh returns a <xref:System.ServiceModel.PeerResolvers.RefreshResponseInfo> object with a `RegistrationLifetime` property.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="17b09-133">Viz také</span><span class="sxs-lookup"><span data-stu-id="17b09-133">See Also</span></span>  
 [<span data-ttu-id="17b09-134">Překladače partnerských uzlů</span><span class="sxs-lookup"><span data-stu-id="17b09-134">Peer Resolvers</span></span>](../../../../docs/framework/wcf/feature-details/peer-resolvers.md)
