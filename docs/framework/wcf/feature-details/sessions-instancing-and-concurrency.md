---
title: "Relace, vytváření instancí a souběžnost"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 50797a3b-7678-44ed-8138-49ac1602f35b
caps.latest.revision: "16"
author: Erikre
ms.author: erikre
manager: erikre
ms.openlocfilehash: f188bc85ae3c2601e98ad29b275c6bb8b698522f
ms.sourcegitcommit: 4f3fef493080a43e70e951223894768d36ce430a
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 11/21/2017
---
# <a name="sessions-instancing-and-concurrency"></a><span data-ttu-id="1320a-102">Relace, vytváření instancí a souběžnost</span><span class="sxs-lookup"><span data-stu-id="1320a-102">Sessions, Instancing, and Concurrency</span></span>
<span data-ttu-id="1320a-103">A *relace* existuje korelace všech zpráv odeslaných mezi dva koncové body.</span><span class="sxs-lookup"><span data-stu-id="1320a-103">A *session* is a correlation of all messages sent between two endpoints.</span></span> <span data-ttu-id="1320a-104">*Vytváření instancí* odkazuje na řízení životnost služby uživatelem definované objekty a jejich související <xref:System.ServiceModel.InstanceContext> objekty.</span><span class="sxs-lookup"><span data-stu-id="1320a-104">*Instancing* refers to controlling the lifetime of user-defined service objects and their related <xref:System.ServiceModel.InstanceContext> objects.</span></span> <span data-ttu-id="1320a-105">*Concurrency* je termín určený k ovládacímu prvku počet vláken, které jsou prováděny v době <xref:System.ServiceModel.InstanceContext> ve stejnou dobu.</span><span class="sxs-lookup"><span data-stu-id="1320a-105">*Concurrency* is the term given to the control of the number of threads executing in an <xref:System.ServiceModel.InstanceContext> at the same time.</span></span>  
  
 <span data-ttu-id="1320a-106">Toto téma popisuje tato nastavení, jak používat a různé interakce mezi nimi.</span><span class="sxs-lookup"><span data-stu-id="1320a-106">This topic describes these settings, how to use them, and the various interactions between them.</span></span>  
  
## <a name="sessions"></a><span data-ttu-id="1320a-107">Relace</span><span class="sxs-lookup"><span data-stu-id="1320a-107">Sessions</span></span>  
 <span data-ttu-id="1320a-108">Když kontraktu služby nastaví <xref:System.ServiceModel.ServiceContractAttribute.SessionMode%2A?displayProperty=nameWithType> vlastnost <xref:System.ServiceModel.SessionMode.Required?displayProperty=nameWithType>, tento kontrakt vlastně říká, že všechna volání (který je základní výměny zpráv podporující volání) musí být součástí stejné konverzaci.</span><span class="sxs-lookup"><span data-stu-id="1320a-108">When a service contract sets the <xref:System.ServiceModel.ServiceContractAttribute.SessionMode%2A?displayProperty=nameWithType> property to <xref:System.ServiceModel.SessionMode.Required?displayProperty=nameWithType>, that contract is saying that all calls (that is, the underlying message exchanges that support the calls) must be part of the same conversation.</span></span> <span data-ttu-id="1320a-109">Pokud kontrakt Určuje, že umožňuje relace, ale nevyžaduje jeden, klienti mohou připojit a buď vytvořit relaci, nebo ne.</span><span class="sxs-lookup"><span data-stu-id="1320a-109">If a contract specifies that it allows sessions but does not require one, clients can connect and either establish a session or not.</span></span> <span data-ttu-id="1320a-110">Pokud relace skončí a a odeslání zprávy pomocí stejných na bázi relací, že se vyvolala výjimku kanálu.</span><span class="sxs-lookup"><span data-stu-id="1320a-110">If the session ends and a message is sent over the same session-based channel an exception is thrown.</span></span>  
  
 [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]<span data-ttu-id="1320a-111">relace mají následující hlavní koncepční funkce:</span><span class="sxs-lookup"><span data-stu-id="1320a-111"> sessions have the following main conceptual features:</span></span>  
  
-   <span data-ttu-id="1320a-112">Jsou explicitně iniciované a ukončila příkazem volající aplikace.</span><span class="sxs-lookup"><span data-stu-id="1320a-112">They are explicitly initiated and terminated by the calling application.</span></span>  
  
-   <span data-ttu-id="1320a-113">Zpráv doručených během relace se zpracovávají v pořadí, ve kterém jsou přijaty.</span><span class="sxs-lookup"><span data-stu-id="1320a-113">Messages delivered during a session are processed in the order in which they are received.</span></span>  
  
-   <span data-ttu-id="1320a-114">Relace korelovat skupinu zpráv k konverzaci.</span><span class="sxs-lookup"><span data-stu-id="1320a-114">Sessions correlate a group of messages into a conversation.</span></span> <span data-ttu-id="1320a-115">Význam této korelace je abstrakcí.</span><span class="sxs-lookup"><span data-stu-id="1320a-115">The meaning of that correlation is an abstraction.</span></span> <span data-ttu-id="1320a-116">Jeden kanál na bázi relace, například mohou souviset zprávy založené na sdílené síťové připojení, zatímco jiné kanál na bázi relací, mohou souviset zprávy založené na značku sdílené v textu zprávy.</span><span class="sxs-lookup"><span data-stu-id="1320a-116">For instance, one session-based channel may correlate messages based on a shared network connection while another session-based channel may correlate messages based on a shared tag in the message body.</span></span> <span data-ttu-id="1320a-117">Funkce, které může být odvozen z relace závisí na povaze korelaci.</span><span class="sxs-lookup"><span data-stu-id="1320a-117">The features that can be derived from the session depend on the nature of the correlation.</span></span>  
  
-   <span data-ttu-id="1320a-118">Neexistuje žádné obecné datové úložiště přidružené [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] relace.</span><span class="sxs-lookup"><span data-stu-id="1320a-118">There is no general data store associated with a [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] session.</span></span>  
  
 <span data-ttu-id="1320a-119">Pokud jste se seznámili s <xref:System.Web.SessionState.HttpSessionState?displayProperty=nameWithType> třídy v [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] aplikace a funkce, poskytuje, můžete si všimnout, následující rozdíly mezi tento druh relace a [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] relace:</span><span class="sxs-lookup"><span data-stu-id="1320a-119">If you are familiar with the <xref:System.Web.SessionState.HttpSessionState?displayProperty=nameWithType> class in [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] applications and the functionality it provides, you might notice the following differences between that kind of session and [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] sessions:</span></span>  
  
-   [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)]<span data-ttu-id="1320a-120">relace jsou vždy iniciovaných serverem.</span><span class="sxs-lookup"><span data-stu-id="1320a-120"> sessions are always server-initiated.</span></span>  
  
-   [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)]<span data-ttu-id="1320a-121">jsou implicitně neuspořádaný relace.</span><span class="sxs-lookup"><span data-stu-id="1320a-121"> sessions are implicitly unordered.</span></span>  
  
-   [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)]<span data-ttu-id="1320a-122">relace poskytují mechanismus obecné datové úložiště napříč požadavky.</span><span class="sxs-lookup"><span data-stu-id="1320a-122"> sessions provide a general data storage mechanism across requests.</span></span>  
  
 <span data-ttu-id="1320a-123">Klientské aplikace a aplikace služby spolupracovat s relací různými způsoby.</span><span class="sxs-lookup"><span data-stu-id="1320a-123">Client applications and service applications interact with sessions in different ways.</span></span> <span data-ttu-id="1320a-124">Klientské aplikace zahájení relace a pak přijímat a zpracování zpráv odeslaných v rámci relace.</span><span class="sxs-lookup"><span data-stu-id="1320a-124">Client applications initiate sessions and then receive and process the messages sent within the session.</span></span> <span data-ttu-id="1320a-125">Aplikace služby můžete použít relace jako bod rozšiřitelnosti, chcete-li přidat další chování.</span><span class="sxs-lookup"><span data-stu-id="1320a-125">Service applications can use sessions as an extensibility point to add additional behavior.</span></span> <span data-ttu-id="1320a-126">K tomu je potřeba pracovat přímo s <xref:System.ServiceModel.InstanceContext> nebo implementaci zprostředkovatele kontextu vlastní instanci.</span><span class="sxs-lookup"><span data-stu-id="1320a-126">This is done by working directly with the <xref:System.ServiceModel.InstanceContext> or implementing a custom instance context provider.</span></span>  
  
## <a name="instancing"></a><span data-ttu-id="1320a-127">Vytváření instancí</span><span class="sxs-lookup"><span data-stu-id="1320a-127">Instancing</span></span>  
 <span data-ttu-id="1320a-128">Zřizování instancí chování (nastavit pomocí <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A?displayProperty=nameWithType> vlastnost) ovládacích prvků jak <xref:System.ServiceModel.InstanceContext> je vytvořen v odpovědi na příchozí zprávy.</span><span class="sxs-lookup"><span data-stu-id="1320a-128">The instancing behavior (set by using the <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A?displayProperty=nameWithType> property) controls how the <xref:System.ServiceModel.InstanceContext> is created in response to incoming messages.</span></span> <span data-ttu-id="1320a-129">Ve výchozím nastavení každý <xref:System.ServiceModel.InstanceContext> je přidružen jeden objekt služby definovaný uživatelem, tak (v případě výchozího) nastavení <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A> vlastnost také určuje, vytváření instancí objektů definovaný uživatelem služeb.</span><span class="sxs-lookup"><span data-stu-id="1320a-129">By default, each <xref:System.ServiceModel.InstanceContext> is associated with one user-defined service object, so (in the default case) setting the <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A> property also controls the instancing of user-defined service objects.</span></span> <span data-ttu-id="1320a-130"><xref:System.ServiceModel.InstanceContextMode> Definuje výčet režimů zřizování instancí.</span><span class="sxs-lookup"><span data-stu-id="1320a-130">The <xref:System.ServiceModel.InstanceContextMode> enumeration defines the instancing modes.</span></span>  
  
 <span data-ttu-id="1320a-131">K dispozici jsou následující režimy zřizování instancí:</span><span class="sxs-lookup"><span data-stu-id="1320a-131">The following instancing modes are available:</span></span>  
  
-   <span data-ttu-id="1320a-132"><xref:System.ServiceModel.InstanceContextMode.PerCall>: Nový <xref:System.ServiceModel.InstanceContext> (a proto služby objektu) se vytvoří pro každý požadavek klienta.</span><span class="sxs-lookup"><span data-stu-id="1320a-132"><xref:System.ServiceModel.InstanceContextMode.PerCall>: A new <xref:System.ServiceModel.InstanceContext> (and therefore service object) is created for each client request.</span></span>  
  
-   <span data-ttu-id="1320a-133"><xref:System.ServiceModel.InstanceContextMode.PerSession>: Nový <xref:System.ServiceModel.InstanceContext> (a proto služby objektu) se vytvoří pro každou novou relaci klienta a udržovat po dobu jeho existence této relace (vyžaduje vazbu, která podporuje relací).</span><span class="sxs-lookup"><span data-stu-id="1320a-133"><xref:System.ServiceModel.InstanceContextMode.PerSession>: A new <xref:System.ServiceModel.InstanceContext> (and therefore service object) is created for each new client session and maintained for the lifetime of that session (this requires a binding that supports sessions).</span></span>  
  
-   <span data-ttu-id="1320a-134"><xref:System.ServiceModel.InstanceContextMode.Single>: Jeden <xref:System.ServiceModel.InstanceContext> (a proto služby objektu) zpracuje všechny žádosti klienta po dobu jeho existence aplikace.</span><span class="sxs-lookup"><span data-stu-id="1320a-134"><xref:System.ServiceModel.InstanceContextMode.Single>: A single <xref:System.ServiceModel.InstanceContext> (and therefore service object) handles all client requests for the lifetime of the application.</span></span>  
  
 <span data-ttu-id="1320a-135">Následující příklad kódu ukazuje výchozí <xref:System.ServiceModel.InstanceContextMode> hodnotu <xref:System.ServiceModel.InstanceContextMode.PerSession> explicitně nastaveno na třídu služby.</span><span class="sxs-lookup"><span data-stu-id="1320a-135">The following code example shows the default <xref:System.ServiceModel.InstanceContextMode> value, <xref:System.ServiceModel.InstanceContextMode.PerSession> being explicitly set on a service class.</span></span>  
  
```  
[ServiceBehavior(InstanceContextMode=InstanceContextMode.PerSession)]   
public class CalculatorService : ICalculatorInstance   
{   
    ...  
}  
```  
  
 <span data-ttu-id="1320a-136">A při <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A?displayProperty=nameWithType> vlastnost určuje, jak často <xref:System.ServiceModel.InstanceContext> vydání, <xref:System.ServiceModel.OperationBehaviorAttribute.ReleaseInstanceMode%2A?displayProperty=nameWithType> a <xref:System.ServiceModel.ServiceBehaviorAttribute.ReleaseServiceInstanceOnTransactionComplete%2A?displayProperty=nameWithType> vlastnosti řízení uvolnění objektu služby.</span><span class="sxs-lookup"><span data-stu-id="1320a-136">And while the <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A?displayProperty=nameWithType> property controls how often the <xref:System.ServiceModel.InstanceContext> is released, the <xref:System.ServiceModel.OperationBehaviorAttribute.ReleaseInstanceMode%2A?displayProperty=nameWithType> and <xref:System.ServiceModel.ServiceBehaviorAttribute.ReleaseServiceInstanceOnTransactionComplete%2A?displayProperty=nameWithType> properties control when the service object is released.</span></span>  
  
### <a name="well-known-singleton-services"></a><span data-ttu-id="1320a-137">Známé Singleton služby</span><span class="sxs-lookup"><span data-stu-id="1320a-137">Well-Known Singleton Services</span></span>  
 <span data-ttu-id="1320a-138">Jednu variaci na objekty jedna instance služby je někdy užitečné: můžete vytvořit objekt služby sami a vytvořte hostitele služby pomocí tohoto objektu.</span><span class="sxs-lookup"><span data-stu-id="1320a-138">One variation on single instance service objects is sometimes useful: you can create a service object yourself and create the service host using that object.</span></span> <span data-ttu-id="1320a-139">To pokud chcete udělat, musíte taky nastavit <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A?displayProperty=nameWithType> vlastnost <xref:System.ServiceModel.InstanceContextMode.Single> nebo po otevření hostitele služby je vyvolána výjimka.</span><span class="sxs-lookup"><span data-stu-id="1320a-139">To do so, you must also set the <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A?displayProperty=nameWithType> property to <xref:System.ServiceModel.InstanceContextMode.Single> or an exception is thrown when the service host is opened.</span></span>  
  
 <span data-ttu-id="1320a-140">Použití <xref:System.ServiceModel.ServiceHost.%23ctor%28System.Object%2CSystem.Uri%5B%5D%29?displayProperty=nameWithType> konstruktor k vytvoření těchto služeb.</span><span class="sxs-lookup"><span data-stu-id="1320a-140">Use the <xref:System.ServiceModel.ServiceHost.%23ctor%28System.Object%2CSystem.Uri%5B%5D%29?displayProperty=nameWithType> constructor to create such a service.</span></span> <span data-ttu-id="1320a-141">Poskytuje alternativu k implementaci vlastní <xref:System.ServiceModel.Dispatcher.IInstanceContextInitializer?displayProperty=nameWithType> když chcete zadejte instanci určitý objekt pro použití službou typu singleton.</span><span class="sxs-lookup"><span data-stu-id="1320a-141">It provides an alternative to implementing a custom <xref:System.ServiceModel.Dispatcher.IInstanceContextInitializer?displayProperty=nameWithType> when you wish to provide a specific object instance for use by a singleton service.</span></span> <span data-ttu-id="1320a-142">Toto přetížení můžete použít, když vaše typem implementace služby je složité vytvořit (například pokud neimplementuje výchozí veřejný konstruktor bez parametrů).</span><span class="sxs-lookup"><span data-stu-id="1320a-142">You can use this overload when your service implementation type is difficult to construct (for example, if it does not implement a default parameterless public constructor).</span></span>  
  
 <span data-ttu-id="1320a-143">Všimněte si, že je-li do tohoto konstruktoru objekt, některé funkce související s [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] vytváření instancí pracovních chování jinak.</span><span class="sxs-lookup"><span data-stu-id="1320a-143">Note that when an object is provided to this constructor, some features related to the [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] instancing behavior work differently.</span></span> <span data-ttu-id="1320a-144">Například volání <xref:System.ServiceModel.InstanceContext.ReleaseServiceInstance%2A?displayProperty=nameWithType> nemá žádný vliv, pokud je k dispozici instance objektu typu singleton.</span><span class="sxs-lookup"><span data-stu-id="1320a-144">For example, calling <xref:System.ServiceModel.InstanceContext.ReleaseServiceInstance%2A?displayProperty=nameWithType> has no effect when a singleton object instance is provided.</span></span> <span data-ttu-id="1320a-145">Podobně se ignoruje jiným mechanismem instance verze.</span><span class="sxs-lookup"><span data-stu-id="1320a-145">Similarly, any other instance-release mechanism is ignored.</span></span> <span data-ttu-id="1320a-146"><xref:System.ServiceModel.ServiceHost> Vždy se chová jako kdyby <xref:System.ServiceModel.OperationBehaviorAttribute.ReleaseInstanceMode%2A?displayProperty=nameWithType> je nastavena na <xref:System.ServiceModel.ReleaseInstanceMode.None?displayProperty=nameWithType> pro všechny operace.</span><span class="sxs-lookup"><span data-stu-id="1320a-146">The <xref:System.ServiceModel.ServiceHost> always behaves as if the <xref:System.ServiceModel.OperationBehaviorAttribute.ReleaseInstanceMode%2A?displayProperty=nameWithType> property is set to <xref:System.ServiceModel.ReleaseInstanceMode.None?displayProperty=nameWithType> for all operations.</span></span>  
  
### <a name="sharing-instancecontext-objects"></a><span data-ttu-id="1320a-147">Sdílení InstanceContext objekty</span><span class="sxs-lookup"><span data-stu-id="1320a-147">Sharing InstanceContext Objects</span></span>  
 <span data-ttu-id="1320a-148">Můžete taky řídit, které kanálu relací nebo volání je přidružen který <xref:System.ServiceModel.InstanceContext> objektu tak, že provedete toto přidružení sami.</span><span class="sxs-lookup"><span data-stu-id="1320a-148">You can also control which sessionful channel or call is associated with which <xref:System.ServiceModel.InstanceContext> object by performing that association yourself.</span></span>  
  
## <a name="concurrency"></a><span data-ttu-id="1320a-149">Souběžnost</span><span class="sxs-lookup"><span data-stu-id="1320a-149">Concurrency</span></span>  
 <span data-ttu-id="1320a-150">Concurrency je ovládací prvek počet vláken v aktivní <xref:System.ServiceModel.InstanceContext> v daném okamžiku.</span><span class="sxs-lookup"><span data-stu-id="1320a-150">Concurrency is the control of the number of threads active in an <xref:System.ServiceModel.InstanceContext> at any one time.</span></span> <span data-ttu-id="1320a-151">Toto se řídí pomocí <xref:System.ServiceModel.ServiceBehaviorAttribute.ConcurrencyMode%2A?displayProperty=nameWithType> s <xref:System.ServiceModel.ConcurrencyMode> výčtu.</span><span class="sxs-lookup"><span data-stu-id="1320a-151">This is controlled by using the <xref:System.ServiceModel.ServiceBehaviorAttribute.ConcurrencyMode%2A?displayProperty=nameWithType> with the <xref:System.ServiceModel.ConcurrencyMode> enumeration.</span></span>  
  
 <span data-ttu-id="1320a-152">K dispozici jsou následující tři režimy souběžnosti:</span><span class="sxs-lookup"><span data-stu-id="1320a-152">The following three concurrency modes are available:</span></span>  
  
-   <span data-ttu-id="1320a-153"><xref:System.ServiceModel.ConcurrencyMode.Single>: Každý kontext instance může mít maximálně jedno vlákno zpracování zpráv v kontextu instance současně.</span><span class="sxs-lookup"><span data-stu-id="1320a-153"><xref:System.ServiceModel.ConcurrencyMode.Single>: Each instance context is allowed to have a maximum of one thread processing messages in the instance context at a time.</span></span> <span data-ttu-id="1320a-154">Jiná vlákna chtějí používají stejný kontext instance musí zablokuje, dokud se původní vlákno ukončí kontext instance.</span><span class="sxs-lookup"><span data-stu-id="1320a-154">Other threads wishing to use the same instance context must block until the original thread exits the instance context.</span></span>  
  
-   <span data-ttu-id="1320a-155"><xref:System.ServiceModel.ConcurrencyMode.Multiple>: Každá instance služby může mít několik vláken zpracování zpráv současně.</span><span class="sxs-lookup"><span data-stu-id="1320a-155"><xref:System.ServiceModel.ConcurrencyMode.Multiple>: Each service instance can have multiple threads processing messages concurrently.</span></span> <span data-ttu-id="1320a-156">Implementace služby musí být vláken pro použití tohoto režimu souběžnosti.</span><span class="sxs-lookup"><span data-stu-id="1320a-156">The service implementation must be thread-safe to use this concurrency mode.</span></span>  
  
-   <span data-ttu-id="1320a-157"><xref:System.ServiceModel.ConcurrencyMode.Reentrant>: Každá instance služby zpracovává jednu zprávu najednou, ale přijímá volání operací vícenásobně.</span><span class="sxs-lookup"><span data-stu-id="1320a-157"><xref:System.ServiceModel.ConcurrencyMode.Reentrant>: Each service instance processes one message at a time, but accepts re-entrant operation calls.</span></span> <span data-ttu-id="1320a-158">Služba přijímá těchto volání pouze, když se volají pomocí [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] objekt klienta.</span><span class="sxs-lookup"><span data-stu-id="1320a-158">The service only accepts these calls when it is calling out through a [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] client object.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="1320a-159">Princip fungování a způsob vývoje kód, který je bezpečně používá více než jedno vlákno, může být obtížné úspěšně zapisovat.</span><span class="sxs-lookup"><span data-stu-id="1320a-159">Understanding and developing code that safely uses more than one thread can be difficult to write successfully.</span></span> <span data-ttu-id="1320a-160">Před použitím <xref:System.ServiceModel.ConcurrencyMode.Multiple> nebo <xref:System.ServiceModel.ConcurrencyMode.Reentrant> hodnoty, ujistěte se, že služby správně navržena pro tyto režimy.</span><span class="sxs-lookup"><span data-stu-id="1320a-160">Before using <xref:System.ServiceModel.ConcurrencyMode.Multiple> or <xref:System.ServiceModel.ConcurrencyMode.Reentrant> values, ensure that your service is properly designed for these modes.</span></span> [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)]<span data-ttu-id="1320a-161"> <xref:System.ServiceModel.ServiceBehaviorAttribute.ConcurrencyMode%2A>.</span><span class="sxs-lookup"><span data-stu-id="1320a-161"> <xref:System.ServiceModel.ServiceBehaviorAttribute.ConcurrencyMode%2A>.</span></span>  
  
 <span data-ttu-id="1320a-162">Použití souběžného zpracování se týká zřizování instancí režimu.</span><span class="sxs-lookup"><span data-stu-id="1320a-162">The use of concurrency is related to the instancing mode.</span></span> <span data-ttu-id="1320a-163">V <xref:System.ServiceModel.InstanceContextMode.PerCall> vytváření instancí, souběžnosti není relevantní, protože každá zpráva se zpracuje pomocí nové <xref:System.ServiceModel.InstanceContext> a proto je aktivní v nikdy více než jedno vlákno <xref:System.ServiceModel.InstanceContext>.</span><span class="sxs-lookup"><span data-stu-id="1320a-163">In <xref:System.ServiceModel.InstanceContextMode.PerCall> instancing, concurrency is not relevant, because each message is processed by a new <xref:System.ServiceModel.InstanceContext> and, therefore, never more than one thread is active in the <xref:System.ServiceModel.InstanceContext>.</span></span>  
  
 <span data-ttu-id="1320a-164">Následující příklad kódu ukazuje nastavení <xref:System.ServiceModel.ServiceBehaviorAttribute.ConcurrencyMode%2A> vlastnost <xref:System.ServiceModel.ConcurrencyMode.Multiple>.</span><span class="sxs-lookup"><span data-stu-id="1320a-164">The following code example demonstrates setting the <xref:System.ServiceModel.ServiceBehaviorAttribute.ConcurrencyMode%2A> property to <xref:System.ServiceModel.ConcurrencyMode.Multiple>.</span></span>  
  
```  
[ServiceBehavior(ConcurrencyMode=ConcurrencyMode.Multiple, InstanceContextMode = InstanceContextMode.Single)]   
public class CalculatorService : ICalculatorConcurrency   
{   
    ...  
}  
```  
  
## <a name="sessions-interact-with-instancecontext-settings"></a><span data-ttu-id="1320a-165">Relace interakci s InstanceContext nastavení</span><span class="sxs-lookup"><span data-stu-id="1320a-165">Sessions Interact with InstanceContext Settings</span></span>  
 <span data-ttu-id="1320a-166">Relace a <xref:System.ServiceModel.InstanceContext> komunikovat, v závislosti na kombinace hodnotu <xref:System.ServiceModel.SessionMode> výčtu ve smlouvě a <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A?displayProperty=nameWithType> na implementaci služby, který řídí přidružení mezi kanály a konkrétní vlastnost objekty služby.</span><span class="sxs-lookup"><span data-stu-id="1320a-166">Sessions and <xref:System.ServiceModel.InstanceContext> interact depending upon the combination of the value of the <xref:System.ServiceModel.SessionMode> enumeration in a contract and the <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A?displayProperty=nameWithType> property on the service implementation, which controls the association between channels and specific service objects.</span></span>  
  
 <span data-ttu-id="1320a-167">V následující tabulce jsou uvedeny výsledek příchozí kanál podpora relací nebo nejsou podporovány relací zadané služby kombinace hodnot <xref:System.ServiceModel.ServiceContractAttribute.SessionMode%2A?displayProperty=nameWithType> vlastnost a <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A?displayProperty=nameWithType> vlastnost.</span><span class="sxs-lookup"><span data-stu-id="1320a-167">The following table shows the result of an incoming channel either supporting sessions or not supporting sessions given a service's combination of the values of the <xref:System.ServiceModel.ServiceContractAttribute.SessionMode%2A?displayProperty=nameWithType> property and the <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A?displayProperty=nameWithType> property.</span></span>  
  
|<span data-ttu-id="1320a-168">Režim InstanceContextMode hodnota</span><span class="sxs-lookup"><span data-stu-id="1320a-168">InstanceContextMode value</span></span>|<xref:System.ServiceModel.SessionMode.Required>|<xref:System.ServiceModel.SessionMode.Allowed>|<xref:System.ServiceModel.SessionMode.NotAllowed>|  
|-------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------|  
|<span data-ttu-id="1320a-169">PerCall</span><span class="sxs-lookup"><span data-stu-id="1320a-169">PerCall</span></span>|<span data-ttu-id="1320a-170">-Chování s kanálu relací: relaci a <xref:System.ServiceModel.InstanceContext> pro každé volání.</span><span class="sxs-lookup"><span data-stu-id="1320a-170">-   Behavior with sessionful channel: A session and <xref:System.ServiceModel.InstanceContext> for each call.</span></span><br /><span data-ttu-id="1320a-171">-Chování s nerelační kanál: je vyvolána výjimka.</span><span class="sxs-lookup"><span data-stu-id="1320a-171">-   Behavior with sessionless channel: An exception is thrown.</span></span>|<span data-ttu-id="1320a-172">-Chování s kanálu relací: relaci a <xref:System.ServiceModel.InstanceContext> pro každé volání.</span><span class="sxs-lookup"><span data-stu-id="1320a-172">-   Behavior with sessionful channel: A session and <xref:System.ServiceModel.InstanceContext> for each call.</span></span><br /><span data-ttu-id="1320a-173">-Chování s nerelační kanál: <xref:System.ServiceModel.InstanceContext> pro každé volání.</span><span class="sxs-lookup"><span data-stu-id="1320a-173">-   Behavior with sessionless channel: An <xref:System.ServiceModel.InstanceContext> for each call.</span></span>|<span data-ttu-id="1320a-174">-Chování s kanálu relací: je vyvolána výjimka.</span><span class="sxs-lookup"><span data-stu-id="1320a-174">-   Behavior with sessionful channel: An exception is thrown.</span></span><br /><span data-ttu-id="1320a-175">-Chování s nerelační kanál: <xref:System.ServiceModel.InstanceContext> pro každé volání.</span><span class="sxs-lookup"><span data-stu-id="1320a-175">-   Behavior with sessionless channel: An <xref:System.ServiceModel.InstanceContext> for each call.</span></span>|  
|<span data-ttu-id="1320a-176">PerSession</span><span class="sxs-lookup"><span data-stu-id="1320a-176">PerSession</span></span>|<span data-ttu-id="1320a-177">-Chování s kanálu relací: relaci a <xref:System.ServiceModel.InstanceContext> pro každý kanál.</span><span class="sxs-lookup"><span data-stu-id="1320a-177">-   Behavior with sessionful channel: A session and <xref:System.ServiceModel.InstanceContext> for each channel.</span></span><br /><span data-ttu-id="1320a-178">-Chování s nerelační kanál: je vyvolána výjimka.</span><span class="sxs-lookup"><span data-stu-id="1320a-178">-   Behavior with sessionless channel: An exception is thrown.</span></span>|<span data-ttu-id="1320a-179">-Chování s kanálu relací: relaci a <xref:System.ServiceModel.InstanceContext> pro každý kanál.</span><span class="sxs-lookup"><span data-stu-id="1320a-179">-   Behavior with sessionful channel: A session and <xref:System.ServiceModel.InstanceContext> for each channel.</span></span><br /><span data-ttu-id="1320a-180">-Chování s nerelační kanál: <xref:System.ServiceModel.InstanceContext> pro každé volání.</span><span class="sxs-lookup"><span data-stu-id="1320a-180">-   Behavior with sessionless channel: An <xref:System.ServiceModel.InstanceContext> for each call.</span></span>|<span data-ttu-id="1320a-181">-Chování s kanálu relací: je vyvolána výjimka.</span><span class="sxs-lookup"><span data-stu-id="1320a-181">-   Behavior with sessionful channel: An exception is thrown.</span></span><br /><span data-ttu-id="1320a-182">-Chování s nerelační kanál: <xref:System.ServiceModel.InstanceContext> pro každé volání.</span><span class="sxs-lookup"><span data-stu-id="1320a-182">-   Behavior with sessionless channel: An <xref:System.ServiceModel.InstanceContext> for each call.</span></span>|  
|<span data-ttu-id="1320a-183">Single</span><span class="sxs-lookup"><span data-stu-id="1320a-183">Single</span></span>|<span data-ttu-id="1320a-184">-Chování s kanálu relací: relaci a jeden <xref:System.ServiceModel.InstanceContext> pro všechna volání.</span><span class="sxs-lookup"><span data-stu-id="1320a-184">-   Behavior with sessionful channel: A session and one <xref:System.ServiceModel.InstanceContext> for all calls.</span></span><br /><span data-ttu-id="1320a-185">-Chování s nerelační kanál: je vyvolána výjimka.</span><span class="sxs-lookup"><span data-stu-id="1320a-185">-   Behavior with sessionless channel: An exception is thrown.</span></span>|<span data-ttu-id="1320a-186">-Chování s kanálu relací: relaci a <xref:System.ServiceModel.InstanceContext> pro jednotlivý prvek vytvořené nebo definované uživatelem.</span><span class="sxs-lookup"><span data-stu-id="1320a-186">-   Behavior with sessionful channel: A session and <xref:System.ServiceModel.InstanceContext> for the created or user-specified singleton.</span></span><br /><span data-ttu-id="1320a-187">-Chování s nerelační kanál: <xref:System.ServiceModel.InstanceContext> pro jednotlivý prvek vytvořené nebo definované uživatelem.</span><span class="sxs-lookup"><span data-stu-id="1320a-187">-   Behavior with sessionless channel: An <xref:System.ServiceModel.InstanceContext> for the created or user-specified singleton.</span></span>|<span data-ttu-id="1320a-188">-Chování s kanálu relací: je vyvolána výjimka.</span><span class="sxs-lookup"><span data-stu-id="1320a-188">-   Behavior with sessionful channel: An exception is thrown.</span></span><br /><span data-ttu-id="1320a-189">-Chování s nerelační kanál: <xref:System.ServiceModel.InstanceContext> pro každý vytvořený singleton nebo pro jednotlivý prvek zadaného uživatelem.</span><span class="sxs-lookup"><span data-stu-id="1320a-189">-   Behavior with sessionless channel: An <xref:System.ServiceModel.InstanceContext> for each created singleton or for the user-specified singleton.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="1320a-190">Viz také</span><span class="sxs-lookup"><span data-stu-id="1320a-190">See Also</span></span>  
 [<span data-ttu-id="1320a-191">Použití relací</span><span class="sxs-lookup"><span data-stu-id="1320a-191">Using Sessions</span></span>](../../../../docs/framework/wcf/using-sessions.md)  
 [<span data-ttu-id="1320a-192">Postupy: vytvoření služby vyžadující relace</span><span class="sxs-lookup"><span data-stu-id="1320a-192">How to: Create a Service That Requires Sessions</span></span>](../../../../docs/framework/wcf/feature-details/how-to-create-a-service-that-requires-sessions.md)  
 [<span data-ttu-id="1320a-193">Postupy: vytváření instancí služby Řízení</span><span class="sxs-lookup"><span data-stu-id="1320a-193">How to: Control Service Instancing</span></span>](../../../../docs/framework/wcf/feature-details/how-to-control-service-instancing.md)  
 [<span data-ttu-id="1320a-194">Souběžnosti</span><span class="sxs-lookup"><span data-stu-id="1320a-194">Concurrency</span></span>](../../../../docs/framework/wcf/samples/concurrency.md)  
 [<span data-ttu-id="1320a-195">Vytváření instancí</span><span class="sxs-lookup"><span data-stu-id="1320a-195">Instancing</span></span>](../../../../docs/framework/wcf/samples/instancing.md)  
 [<span data-ttu-id="1320a-196">Relace</span><span class="sxs-lookup"><span data-stu-id="1320a-196">Session</span></span>](../../../../docs/framework/wcf/samples/session.md)
