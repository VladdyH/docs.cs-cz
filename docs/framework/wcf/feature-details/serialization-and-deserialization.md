---
title: Serializace a deserializace
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
dev_langs:
- csharp
- vb
ms.assetid: 3d71814c-bda7-424b-85b7-15084ff9377a
caps.latest.revision: "13"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.workload: dotnet
ms.openlocfilehash: a73fa30f1ebae805abd6f3e7e397d005d5b7130d
ms.sourcegitcommit: 16186c34a957fdd52e5db7294f291f7530ac9d24
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 12/22/2017
---
# <a name="serialization-and-deserialization"></a><span data-ttu-id="33d65-102">Serializace a deserializace</span><span class="sxs-lookup"><span data-stu-id="33d65-102">Serialization and Deserialization</span></span>
[!INCLUDE[indigo1](../../../../includes/indigo1-md.md)]<span data-ttu-id="33d65-103">zahrnuje nové Serializační stroj <xref:System.Runtime.Serialization.DataContractSerializer>.</span><span class="sxs-lookup"><span data-stu-id="33d65-103"> includes a new serialization engine, the <xref:System.Runtime.Serialization.DataContractSerializer>.</span></span> <span data-ttu-id="33d65-104"><xref:System.Runtime.Serialization.DataContractSerializer> Překládá mezi [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] objekty a XML v obou směrech.</span><span class="sxs-lookup"><span data-stu-id="33d65-104">The <xref:System.Runtime.Serialization.DataContractSerializer> translates between [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] objects and XML, in both directions.</span></span> <span data-ttu-id="33d65-105">Toto téma vysvětluje, jak funguje serializátor.</span><span class="sxs-lookup"><span data-stu-id="33d65-105">This topic explains how the serializer works.</span></span>  
  
 <span data-ttu-id="33d65-106">Při serializaci [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] objekty, serializátor rozumí celou řadu serializace programovací modely, včetně nové *kontrakt dat* modelu.</span><span class="sxs-lookup"><span data-stu-id="33d65-106">When serializing [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] objects, the serializer understands a variety of serialization programming models, including the new *data contract* model.</span></span> <span data-ttu-id="33d65-107">Úplný seznam podporovaných typů najdete v tématu [typy nepodporuje serializátor kontraktu dat](../../../../docs/framework/wcf/feature-details/types-supported-by-the-data-contract-serializer.md).</span><span class="sxs-lookup"><span data-stu-id="33d65-107">For a full list of supported types, see [Types Supported by the Data Contract Serializer](../../../../docs/framework/wcf/feature-details/types-supported-by-the-data-contract-serializer.md).</span></span> <span data-ttu-id="33d65-108">Úvod do kontrakty dat, najdete v části [pomocí kontrakty dat](../../../../docs/framework/wcf/feature-details/using-data-contracts.md).</span><span class="sxs-lookup"><span data-stu-id="33d65-108">For an introduction to data contracts, see [Using Data Contracts](../../../../docs/framework/wcf/feature-details/using-data-contracts.md).</span></span>  
  
 <span data-ttu-id="33d65-109">Při deserializaci XML, používá serializátor <xref:System.Xml.XmlReader> a <xref:System.Xml.XmlWriter> třídy.</span><span class="sxs-lookup"><span data-stu-id="33d65-109">When deserializing XML, the serializer uses the <xref:System.Xml.XmlReader> and <xref:System.Xml.XmlWriter> classes.</span></span> <span data-ttu-id="33d65-110">Podporuje také <xref:System.Xml.XmlDictionaryReader> a <xref:System.Xml.XmlDictionaryWriter> třídy k povolení ji k vytvoření optimalizované XML v některých případech, například při použití [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] binární formát XML.</span><span class="sxs-lookup"><span data-stu-id="33d65-110">It also supports the <xref:System.Xml.XmlDictionaryReader> and <xref:System.Xml.XmlDictionaryWriter> classes to enable it to produce optimized XML in some cases, such as when using the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] binary XML format.</span></span>  
  
 [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]<span data-ttu-id="33d65-111">zahrnuje také doprovodné serializátor, <xref:System.Runtime.Serialization.NetDataContractSerializer>.</span><span class="sxs-lookup"><span data-stu-id="33d65-111"> also includes a companion serializer, the <xref:System.Runtime.Serialization.NetDataContractSerializer>.</span></span> <span data-ttu-id="33d65-112"><xref:System.Runtime.Serialization.NetDataContractSerializer> Je podobná <xref:System.Runtime.Serialization.Formatters.Binary.BinaryFormatter> a <xref:System.Runtime.Serialization.Formatters.Soap.SoapFormatter> serializátorů protože také vysílá [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] zadejte názvy v rámci serializovaná data.</span><span class="sxs-lookup"><span data-stu-id="33d65-112">The <xref:System.Runtime.Serialization.NetDataContractSerializer> is similar to the <xref:System.Runtime.Serialization.Formatters.Binary.BinaryFormatter> and <xref:System.Runtime.Serialization.Formatters.Soap.SoapFormatter> serializers because it also emits [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] type names as part of the serialized data.</span></span> <span data-ttu-id="33d65-113">Používá se při stejné typy jsou sdíleny serializaci a deserializaci elementy end.</span><span class="sxs-lookup"><span data-stu-id="33d65-113">It is used when the same types are shared on the serializing and the deserializing ends.</span></span> <span data-ttu-id="33d65-114">Jak <xref:System.Runtime.Serialization.DataContractSerializer> a <xref:System.Runtime.Serialization.NetDataContractSerializer> odvozena z běžných základní třídy, <xref:System.Runtime.Serialization.XmlObjectSerializer>.</span><span class="sxs-lookup"><span data-stu-id="33d65-114">Both the <xref:System.Runtime.Serialization.DataContractSerializer> and the <xref:System.Runtime.Serialization.NetDataContractSerializer> derive from a common base class, the <xref:System.Runtime.Serialization.XmlObjectSerializer>.</span></span>  
  
> [!WARNING]
>  <span data-ttu-id="33d65-115"><xref:System.Runtime.Serialization.DataContractSerializer> Serializuje řetězců obsahujících řídicí znaky s hexadecimální hodnotu nižší než 20 jako entity XML.</span><span class="sxs-lookup"><span data-stu-id="33d65-115">The <xref:System.Runtime.Serialization.DataContractSerializer> serializes strings containing control characters with a hexadecimal value below 20 as XML entities.</span></span> <span data-ttu-id="33d65-116">Při odesílání těchto dat na službu WCF může dojít k potížím s klienta bez WCF.</span><span class="sxs-lookup"><span data-stu-id="33d65-116">This may cause a problem with a non-WCF client when sending such data to a WCF service.</span></span>  
  
## <a name="creating-a-datacontractserializer-instance"></a><span data-ttu-id="33d65-117">Vytvoření DataContractSerializer Instance</span><span class="sxs-lookup"><span data-stu-id="33d65-117">Creating a DataContractSerializer Instance</span></span>  
 <span data-ttu-id="33d65-118">Vytváření instance <xref:System.Runtime.Serialization.DataContractSerializer> je důležitý krok.</span><span class="sxs-lookup"><span data-stu-id="33d65-118">Constructing an instance of the <xref:System.Runtime.Serialization.DataContractSerializer> is an important step.</span></span> <span data-ttu-id="33d65-119">Po vytváření nelze změnit některé z nastavení.</span><span class="sxs-lookup"><span data-stu-id="33d65-119">After construction, you cannot change any of the settings.</span></span>  
  
### <a name="specifying-the-root-type"></a><span data-ttu-id="33d65-120">Určení kořenové typ</span><span class="sxs-lookup"><span data-stu-id="33d65-120">Specifying the Root Type</span></span>  
 <span data-ttu-id="33d65-121">*Kořenový typ* se o typ, které jsou instancemi serializován nebo deserializován.</span><span class="sxs-lookup"><span data-stu-id="33d65-121">The *root type* is the type of which instances are serialized or deserialized.</span></span> <span data-ttu-id="33d65-122"><xref:System.Runtime.Serialization.DataContractSerializer> Má mnoho přetížení konstruktoru, ale minimálně, je nutné zadat typ kořenového pomocí `type` parametr.</span><span class="sxs-lookup"><span data-stu-id="33d65-122">The <xref:System.Runtime.Serialization.DataContractSerializer> has many constructor overloads, but, at a minimum, a root type must be supplied using the `type` parameter.</span></span>  
  
 <span data-ttu-id="33d65-123">Označuje, že serializátor vytvořené pro určitý typ kořenové nelze použít k serializaci (nebo deserializaci) jiného typu, pokud je typ odvozený od typu root.</span><span class="sxs-lookup"><span data-stu-id="33d65-123">A serializer created for a certain root type cannot be used to serialize (or deserialize) another type, unless the type is derived from the root type.</span></span> <span data-ttu-id="33d65-124">Následující příklad ukazuje dvě třídy.</span><span class="sxs-lookup"><span data-stu-id="33d65-124">The following example shows two classes.</span></span>  
  
 [!code-csharp[c_StandaloneDataContractSerializer#1](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_standalonedatacontractserializer/cs/source.cs#1)]
 [!code-vb[c_StandaloneDataContractSerializer#1](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_standalonedatacontractserializer/vb/source.vb#1)]  
  
 <span data-ttu-id="33d65-125">Tento kód vytvoří instanci objektu `DataContractSerializer` který lze použít pouze k serializaci nebo deserializaci instance `Person` třídy.</span><span class="sxs-lookup"><span data-stu-id="33d65-125">This code constructs an instance of the `DataContractSerializer` that can be used only to serialize or deserialize instances of the `Person` class.</span></span>  
  
 [!code-csharp[c_StandaloneDataContractSerializer#2](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_standalonedatacontractserializer/cs/source.cs#2)]
 [!code-vb[c_StandaloneDataContractSerializer#2](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_standalonedatacontractserializer/vb/source.vb#2)]  
  
### <a name="specifying-known-types"></a><span data-ttu-id="33d65-126">Zadání známé typy</span><span class="sxs-lookup"><span data-stu-id="33d65-126">Specifying Known Types</span></span>  
 <span data-ttu-id="33d65-127">Pokud Polymorfismus je součástí serializována typy, které již nejsou zpracovávány pomocí <xref:System.Runtime.Serialization.KnownTypeAttribute> atribut nebo jinému kontrolnímu mechanismu, musí být seznam možných známé typy předaný konstruktoru serializátor pomocí `knownTypes` parametr.</span><span class="sxs-lookup"><span data-stu-id="33d65-127">If polymorphism is involved in the types being serialized that is not already handled using the <xref:System.Runtime.Serialization.KnownTypeAttribute> attribute or some other mechanism, a list of possible known types must be passed to the serializer’s constructor using the `knownTypes` parameter.</span></span> [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="33d65-128">známé typy, najdete v části [známé typy kontraktů dat](../../../../docs/framework/wcf/feature-details/data-contract-known-types.md).</span><span class="sxs-lookup"><span data-stu-id="33d65-128"> known types, see [Data Contract Known Types](../../../../docs/framework/wcf/feature-details/data-contract-known-types.md).</span></span>  
  
 <span data-ttu-id="33d65-129">Následující příklad ukazuje třídu, `LibraryPatron`, který obsahuje kolekci určitého typu, `LibraryItem`.</span><span class="sxs-lookup"><span data-stu-id="33d65-129">The following example shows a class, `LibraryPatron`, that includes a collection of a specific type, the `LibraryItem`.</span></span> <span data-ttu-id="33d65-130">Definuje třídu sekundu `LibraryItem` typu.</span><span class="sxs-lookup"><span data-stu-id="33d65-130">The second class defines the `LibraryItem` type.</span></span> <span data-ttu-id="33d65-131">Třetí a čtyřmi třídy (`Book` a `Newspaper`) dědí `LibraryItem` třídy.</span><span class="sxs-lookup"><span data-stu-id="33d65-131">The third and four classes (`Book` and `Newspaper`) inherit from the `LibraryItem` class.</span></span>  
  
 [!code-csharp[c_StandaloneDataContractSerializer#3](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_standalonedatacontractserializer/cs/source.cs#3)]  
 [!code-vb[c_StandaloneDataContractSerializer#3](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_standalonedatacontractserializer/vb/source.vb#3)]  
  
 <span data-ttu-id="33d65-132">Následující kód vytvoří instanci objektu serializátor pomocí `knownTypes` parametr.</span><span class="sxs-lookup"><span data-stu-id="33d65-132">The following code constructs an instance of the serializer using the `knownTypes` parameter.</span></span>  
  
 [!code-csharp[c_StandaloneDataContractSerializer#4](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_standalonedatacontractserializer/cs/source.cs#4)]
 [!code-vb[c_StandaloneDataContractSerializer#4](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_standalonedatacontractserializer/vb/source.vb#4)]  
  
### <a name="specifying-the-default-root-name-and-namespace"></a><span data-ttu-id="33d65-133">Výchozí název kořenové a Namespace</span><span class="sxs-lookup"><span data-stu-id="33d65-133">Specifying the Default Root Name and Namespace</span></span>  
 <span data-ttu-id="33d65-134">Za normálních okolností při objekt serializován, výchozí název a oboru názvů nejkrajnější elementu XML se určují podle názvu kontraktu dat a oboru názvů.</span><span class="sxs-lookup"><span data-stu-id="33d65-134">Normally, when an object is serialized, the default name and namespace of the outermost XML element are determined according to the data contract name and namespace.</span></span> <span data-ttu-id="33d65-135">Názvy všech vnitřní prvky jsou určit názvy členů dat a jejich obor názvů je obor názvů kontraktu dat.</span><span class="sxs-lookup"><span data-stu-id="33d65-135">The names of all inner elements are determined from data member names, and their namespace is the data contract’s namespace.</span></span> <span data-ttu-id="33d65-136">Následující příklad sady `Name` a `Namespace` hodnoty v konstruktorech systému <xref:System.Runtime.Serialization.DataContractAttribute> a <xref:System.Runtime.Serialization.DataMemberAttribute> třídy.</span><span class="sxs-lookup"><span data-stu-id="33d65-136">The following example sets `Name` and `Namespace` values in the constructors of the <xref:System.Runtime.Serialization.DataContractAttribute> and <xref:System.Runtime.Serialization.DataMemberAttribute> classes.</span></span>  
  
 [!code-csharp[c_StandaloneDataContractSerializer#5](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_standalonedatacontractserializer/cs/source.cs#5)]
 [!code-vb[c_StandaloneDataContractSerializer#5](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_standalonedatacontractserializer/vb/source.vb#5)]  
  
 <span data-ttu-id="33d65-137">Serializace instance `Person` třída vytváří XML podobný následujícímu.</span><span class="sxs-lookup"><span data-stu-id="33d65-137">Serializing an instance of the `Person` class produces XML similar to the following.</span></span>  
  
```xml  
<PersonContract xmlns="http://schemas.contoso.com">  
  <AddressMember>  
    <StreetMember>123 Main Street</StreetMember>  
   </AddressMember>  
</PersonContract>  
```  
  
 <span data-ttu-id="33d65-138">Ale můžete přizpůsobit výchozí název a obor názvů kořenového prvku předáním hodnoty `rootName` a `rootNamespace` parametry, které <xref:System.Runtime.Serialization.DataContractSerializer> konstruktor.</span><span class="sxs-lookup"><span data-stu-id="33d65-138">However, you can customize the default name and namespace of the root element by passing the values of the `rootName` and `rootNamespace` parameters to the <xref:System.Runtime.Serialization.DataContractSerializer> constructor.</span></span> <span data-ttu-id="33d65-139">Všimněte si, že `rootNamespace` nemá vliv na obor názvů obsažené prvky, které odpovídají datových členů.</span><span class="sxs-lookup"><span data-stu-id="33d65-139">Note that the `rootNamespace` does not affect the namespace of the contained elements that correspond to data members.</span></span> <span data-ttu-id="33d65-140">Ovlivňuje jenom obor názvů nejkrajnější elementu.</span><span class="sxs-lookup"><span data-stu-id="33d65-140">It affects only the namespace of the outermost element.</span></span>  
  
 <span data-ttu-id="33d65-141">Tyto hodnoty lze předat jako řetězce nebo instance <xref:System.Xml.XmlDictionaryString> třídu, která umožňuje jejich optimalizace v binárním formátu XML.</span><span class="sxs-lookup"><span data-stu-id="33d65-141">These values can be passed as strings or instances of the <xref:System.Xml.XmlDictionaryString> class to allow for their optimization using the binary XML format.</span></span>  
  
### <a name="setting-the-maximum-objects-quota"></a><span data-ttu-id="33d65-142">Nastavení kvóty maximální objekty</span><span class="sxs-lookup"><span data-stu-id="33d65-142">Setting the Maximum Objects Quota</span></span>  
 <span data-ttu-id="33d65-143">Některé `DataContractSerializer` mají přetížení konstruktor `maxItemsInObjectGraph` parametr.</span><span class="sxs-lookup"><span data-stu-id="33d65-143">Some `DataContractSerializer` constructor overloads have a `maxItemsInObjectGraph` parameter.</span></span> <span data-ttu-id="33d65-144">Tento parametr určuje maximální počet objektů serializátoru, který serializuje a deserializuje do jedné <xref:System.Runtime.Serialization.XmlObjectSerializer.ReadObject%2A> volání metody.</span><span class="sxs-lookup"><span data-stu-id="33d65-144">This parameter determines the maximum number of objects the serializer serializes or deserializes in a single <xref:System.Runtime.Serialization.XmlObjectSerializer.ReadObject%2A> method call.</span></span> <span data-ttu-id="33d65-145">(Metodu vždy čte jeden kořenový objekt, ale tento objekt může mít jiné objekty v jeho datových členů.</span><span class="sxs-lookup"><span data-stu-id="33d65-145">(The method always reads one root object, but this object may have other objects in its data members.</span></span> <span data-ttu-id="33d65-146">Tyto objekty může mít jiné objekty atd.) Výchozí hodnota je 65536.</span><span class="sxs-lookup"><span data-stu-id="33d65-146">Those objects may have other objects, and so on.) The default is 65536.</span></span> <span data-ttu-id="33d65-147">Všimněte si, že při serializaci nebo deserializaci pole, každá položka pole počítá jako samostatný objekt.</span><span class="sxs-lookup"><span data-stu-id="33d65-147">Note that when serializing or deserializing arrays, every array entry counts as a separate object.</span></span> <span data-ttu-id="33d65-148">Všimněte si také, že některé objekty může mít znázornění velké paměti, a proto nemusí být tato kvóta samostatně dostačující k zabránění útoku DOS.</span><span class="sxs-lookup"><span data-stu-id="33d65-148">Also, note that some objects may have a large memory representation, and so this quota alone may not be sufficient to prevent a denial of service attack.</span></span> [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)]<span data-ttu-id="33d65-149">[Důležité informace o zabezpečení pro Data](../../../../docs/framework/wcf/feature-details/security-considerations-for-data.md).</span><span class="sxs-lookup"><span data-stu-id="33d65-149"> [Security Considerations for Data](../../../../docs/framework/wcf/feature-details/security-considerations-for-data.md).</span></span> <span data-ttu-id="33d65-150">Pokud je potřeba zvýšit tato kvóta nad výchozí hodnotu, je důležité učinit odeslání (serializaci) a obdrželi stranách (deserializaci), protože se vztahuje na obou při čtení a zápis dat.</span><span class="sxs-lookup"><span data-stu-id="33d65-150">If you need to increase this quota beyond the default value, it is important to do so both on the sending (serializing) and receiving (deserializing) sides because it applies to both when reading and writing data.</span></span>  
  
### <a name="round-trips"></a><span data-ttu-id="33d65-151">Odezev</span><span class="sxs-lookup"><span data-stu-id="33d65-151">Round Trips</span></span>  
 <span data-ttu-id="33d65-152">A *odezvy* nastane, když je objekt deserializován a znovu serializovat v rámci jedné operace.</span><span class="sxs-lookup"><span data-stu-id="33d65-152">A *round trip* occurs when an object is deserialized and re-serialized in one operation.</span></span> <span data-ttu-id="33d65-153">Proto přejde ze souboru XML na instanci objektu a zpět znovu do datový proud XML.</span><span class="sxs-lookup"><span data-stu-id="33d65-153">Thus, it goes from XML to an object instance, and back again into an XML stream.</span></span>  
  
 <span data-ttu-id="33d65-154">Některé `DataContractSerializer` mají přetížení konstruktor `ignoreExtensionDataObject` parametr, který je nastaven na `false` ve výchozím nastavení.</span><span class="sxs-lookup"><span data-stu-id="33d65-154">Some `DataContractSerializer` constructor overloads have an `ignoreExtensionDataObject` parameter, which is set to `false` by default.</span></span> <span data-ttu-id="33d65-155">V tomto režimu výchozí odesláním dat na dobu odezvy z novější verze sady kontraktu dat prostřednictvím starší verzi a zpět na novější verzi, bez ztráty, tak dlouho, dokud kontraktu dat implementuje <xref:System.Runtime.Serialization.IExtensibleDataObject> rozhraní.</span><span class="sxs-lookup"><span data-stu-id="33d65-155">In this default mode, data can be sent on a round trip from a newer version of a data contract through an older version and back to the newer version without loss, as long as the data contract implements the <xref:System.Runtime.Serialization.IExtensibleDataObject> interface.</span></span> <span data-ttu-id="33d65-156">Předpokládejme například, že verze 1 `Person` obsahuje kontrakt dat `Name` a `PhoneNumber` přidá datových členů a verze 2 `Nickname` člen.</span><span class="sxs-lookup"><span data-stu-id="33d65-156">For example, suppose version 1 of the `Person` data contract contains the `Name` and `PhoneNumber` data members, and version 2 adds a `Nickname` member.</span></span> <span data-ttu-id="33d65-157">Pokud `IExtensibleDataObject` je implementována, při odesílání informací z verze 2 verze 1, `Nickname` data jsou uložená a pak znovu vygenerované při dat je serializováno znovu; proto je při výměně zpráv ztracena žádná data.</span><span class="sxs-lookup"><span data-stu-id="33d65-157">If `IExtensibleDataObject` is implemented, when sending information from version 2 to version 1, the `Nickname` data is stored, and then re-emitted when the data is serialized again; therefore, no data is lost in the round trip.</span></span> [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)]<span data-ttu-id="33d65-158">[Kontraktů dat s dopřednou](../../../../docs/framework/wcf/feature-details/forward-compatible-data-contracts.md) a [Správa verzí kontraktů dat](../../../../docs/framework/wcf/feature-details/data-contract-versioning.md).</span><span class="sxs-lookup"><span data-stu-id="33d65-158"> [Forward-Compatible Data Contracts](../../../../docs/framework/wcf/feature-details/forward-compatible-data-contracts.md) and [Data Contract Versioning](../../../../docs/framework/wcf/feature-details/data-contract-versioning.md).</span></span>  
  
#### <a name="security-and-schema-validity-concerns-with-round-trips"></a><span data-ttu-id="33d65-159">Zabezpečení a aspekty platnosti schématu s odezev</span><span class="sxs-lookup"><span data-stu-id="33d65-159">Security and Schema Validity Concerns with Round Trips</span></span>  
 <span data-ttu-id="33d65-160">Odezev může mít vliv na zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="33d65-160">Round trips may have security implications.</span></span> <span data-ttu-id="33d65-161">Například při deserializaci a ukládání velkých objemů dat nadbytečné může být bezpečnostní riziko.</span><span class="sxs-lookup"><span data-stu-id="33d65-161">For example, deserializing and storing large amounts of extraneous data may be a security risk.</span></span> <span data-ttu-id="33d65-162">Může být zabezpečení se o opětovné generování tato data se způsob, jak ověřit, zejména v případě, že se jedná o digitální podpisy.</span><span class="sxs-lookup"><span data-stu-id="33d65-162">There may be security concerns about re-emitting this data that there is no way to verify, especially if digital signatures are involved.</span></span> <span data-ttu-id="33d65-163">Například v předchozím scénáři může být podepisování koncový bod verze 1 `Nickname` hodnotu, která obsahuje škodlivá data.</span><span class="sxs-lookup"><span data-stu-id="33d65-163">For example, in the previous scenario, the version 1 endpoint could be signing a `Nickname` value that contains malicious data.</span></span> <span data-ttu-id="33d65-164">Navíc může být ke schématu platnosti obavy: koncový bod může být vhodné vždy emitování data, která výhradně dodržuje její stanovené smlouvy a nejsou žádné další hodnoty.</span><span class="sxs-lookup"><span data-stu-id="33d65-164">Finally, there may be schema validity concerns: an endpoint may want to always emit data that strictly adheres to its stated contract and not any extra values.</span></span> <span data-ttu-id="33d65-165">V předchozím příkladu verze 1 koncového bodu kontraktu říká, že vysílá pouze `Name` a `PhoneNumber`a pokud se používá ověřování schématu, generování nadbytečné `Nickname` hodnota způsobuje selhání ověření.</span><span class="sxs-lookup"><span data-stu-id="33d65-165">In the previous example, the version 1 endpoint’s contract says that it emits only `Name` and `PhoneNumber`, and if schema validation is being used, emitting the extra `Nickname` value causes validation to fail.</span></span>  
  
#### <a name="enabling-and-disabling-round-trips"></a><span data-ttu-id="33d65-166">Povolení a zakázání odezev</span><span class="sxs-lookup"><span data-stu-id="33d65-166">Enabling and Disabling Round Trips</span></span>  
 <span data-ttu-id="33d65-167">Chcete-li vypnout odezev, neimplementuje <xref:System.Runtime.Serialization.IExtensibleDataObject> rozhraní.</span><span class="sxs-lookup"><span data-stu-id="33d65-167">To turn off round trips, do not implement the <xref:System.Runtime.Serialization.IExtensibleDataObject> interface.</span></span> <span data-ttu-id="33d65-168">Pokud nemáte žádnou kontrolu nad typy, nastavte `ignoreExtensionDataObject` parametru `true` k dosažení stejného efektu.</span><span class="sxs-lookup"><span data-stu-id="33d65-168">If you have no control over the types, set the `ignoreExtensionDataObject` parameter to `true` to achieve the same effect.</span></span>  
  
### <a name="object-graph-preservation"></a><span data-ttu-id="33d65-169">Zachování objekt grafu.</span><span class="sxs-lookup"><span data-stu-id="33d65-169">Object Graph Preservation</span></span>  
 <span data-ttu-id="33d65-170">Za normálních okolností serializátor nepotřebujete vědět o identitě objekt, jako v následujícím kódu.</span><span class="sxs-lookup"><span data-stu-id="33d65-170">Normally, the serializer does not care about object identity, as in the following code.</span></span>  
  
 [!code-csharp[c_StandaloneDataContractSerializer#6](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_standalonedatacontractserializer/cs/source.cs#6)]
 [!code-vb[c_StandaloneDataContractSerializer#6](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_standalonedatacontractserializer/vb/source.vb#6)]  
  
 <span data-ttu-id="33d65-171">Následující kód vytvoří nákupní objednávka.</span><span class="sxs-lookup"><span data-stu-id="33d65-171">The following code creates a purchase order.</span></span>  
  
 [!code-csharp[c_StandaloneDataContractSerializer#7](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_standalonedatacontractserializer/cs/source.cs#7)]
 [!code-vb[c_StandaloneDataContractSerializer#7](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_standalonedatacontractserializer/vb/source.vb#7)]  
  
 <span data-ttu-id="33d65-172">Všimněte si, že `billTo` a `shipTo` pole se nastaví na stejnou instanci objektu.</span><span class="sxs-lookup"><span data-stu-id="33d65-172">Notice that `billTo` and `shipTo` fields are set to the same object instance.</span></span> <span data-ttu-id="33d65-173">Vygenerovaný soubor XML však duplikuje informace duplicitní a bude vypadat podobně jako následující kód XML.</span><span class="sxs-lookup"><span data-stu-id="33d65-173">However, the generated XML duplicates the information duplicated, and looks similar to the following XML.</span></span>  
  
```xml  
<PurchaseOrder>  
  <billTo><street>123 Main St.</street></billTo>  
  <shipTo><street>123 Main St.</street></shipTo>  
</PurchaseOrder>  
```  
  
 <span data-ttu-id="33d65-174">Však tento přístup má následující vlastnosti, které může být žádoucí:</span><span class="sxs-lookup"><span data-stu-id="33d65-174">However, this approach has the following characteristics, which may be undesirable:</span></span>  
  
-   <span data-ttu-id="33d65-175">Výkon.</span><span class="sxs-lookup"><span data-stu-id="33d65-175">Performance.</span></span> <span data-ttu-id="33d65-176">Replikace dat je neefektivní.</span><span class="sxs-lookup"><span data-stu-id="33d65-176">Replicating data is inefficient.</span></span>  
  
-   <span data-ttu-id="33d65-177">Cyklické odkazy.</span><span class="sxs-lookup"><span data-stu-id="33d65-177">Circular references.</span></span> <span data-ttu-id="33d65-178">Pokud objekty odkazovat na sebe, klidně i prostřednictvím jiné objekty, serializaci replikací vyústí v nekonečné smyčce.</span><span class="sxs-lookup"><span data-stu-id="33d65-178">If objects refer to themselves, even through other objects, serializing by replication results in an infinite loop.</span></span> <span data-ttu-id="33d65-179">(Serializátor vyvolá <xref:System.Runtime.Serialization.SerializationException> v takovém případě.)</span><span class="sxs-lookup"><span data-stu-id="33d65-179">(The serializer throws a <xref:System.Runtime.Serialization.SerializationException> if this happens.)</span></span>  
  
-   <span data-ttu-id="33d65-180">Sémantika.</span><span class="sxs-lookup"><span data-stu-id="33d65-180">Semantics.</span></span> <span data-ttu-id="33d65-181">Někdy je důležité zachovat skutečnost, že dva odkazy jsou ke stejnému objektu a ne dva objekty stejné.</span><span class="sxs-lookup"><span data-stu-id="33d65-181">Sometimes it is important to preserve the fact that two references are to the same object, and not to two identical objects.</span></span>  
  
 <span data-ttu-id="33d65-182">Pro tyto důvodů, proč, některé `DataContractSerializer` mají přetížení konstruktor `preserveObjectReferences` parametr (výchozí hodnota je `false`).</span><span class="sxs-lookup"><span data-stu-id="33d65-182">For these reasons, some `DataContractSerializer` constructor overloads have a `preserveObjectReferences` parameter (the default is `false`).</span></span> <span data-ttu-id="33d65-183">Pokud tento parametr je nastaven `true`, odkazuje zvláštní metodu kódování objektu, který pouze [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] jste srozuměni s tím, bude použita.</span><span class="sxs-lookup"><span data-stu-id="33d65-183">When this parameter is set to `true`, a special method of encoding object references, which only [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] understands, is used.</span></span> <span data-ttu-id="33d65-184">Pokud nastavíte hodnotu `true`, teď podobá následující zprávě příklad kódu XML.</span><span class="sxs-lookup"><span data-stu-id="33d65-184">When set to `true`, the XML code example now resembles the following.</span></span>  
  
```xml  
<PurchaseOrder ser:id="1">  
  <billTo ser:id="2"><street ser:id="3">123 Main St.</street></billTo>  
  <shipTo ser:ref="2"/>  
</PurchaseOrder>  
```  
  
 <span data-ttu-id="33d65-185">Obor názvů "pož" odkazuje na obor standardní serializace http://schemas.microsoft.com/2003/10/Serialization/.</span><span class="sxs-lookup"><span data-stu-id="33d65-185">The "ser" namespace refers to the standard serialization namespace, http://schemas.microsoft.com/2003/10/Serialization/.</span></span> <span data-ttu-id="33d65-186">Každá položka dat je serializovat pouze jednou a zadané číslo ID a následné používá výsledek v odkazu na již serializovaná data.</span><span class="sxs-lookup"><span data-stu-id="33d65-186">Each piece of data is serialized only once and given an ID number, and subsequent uses result in a reference to the already serialized data.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="33d65-187">Pokud se nacházejí v kontrakt dat atributy "id" a "ref" `XMLElement`, je dodržení atribut "ref" a "id" atribut je ignorován.</span><span class="sxs-lookup"><span data-stu-id="33d65-187">If both "id" and "ref" attributes are present in the data contract `XMLElement`, then the "ref" attribute is honored and the "id" attribute is ignored.</span></span>  
  
 <span data-ttu-id="33d65-188">Je důležité vědět o omezeních tento režim:</span><span class="sxs-lookup"><span data-stu-id="33d65-188">It is important to understand the limitations of this mode:</span></span>  
  
-   <span data-ttu-id="33d65-189">Soubor XML `DataContractSerializer` vytváří s `preserveObjectReferences` nastavena na `true` není umožňuje vzájemnou spolupráci s jinými technologiemi a je přístupný pouze jiným `DataContractSerializer` instance, také s `preserveObjectReferences` nastavena na `true`.</span><span class="sxs-lookup"><span data-stu-id="33d65-189">The XML the `DataContractSerializer` produces with `preserveObjectReferences` set to `true` is not interoperable with any other technologies, and can be accessed only by another `DataContractSerializer` instance, also with `preserveObjectReferences` set to `true`.</span></span>  
  
-   <span data-ttu-id="33d65-190">Neexistuje žádná podpora metadat (schéma) pro tuto funkci.</span><span class="sxs-lookup"><span data-stu-id="33d65-190">There is no metadata (schema) support for this feature.</span></span> <span data-ttu-id="33d65-191">Je platná pouze pro tento případ schématu, která je vytvořena při `preserveObjectReferences` je nastaven na `false`.</span><span class="sxs-lookup"><span data-stu-id="33d65-191">The schema that is produced is valid only for the case when `preserveObjectReferences` is set to `false`.</span></span>  
  
-   <span data-ttu-id="33d65-192">Tato funkce může způsobit serializace a deserializace proces pomaleji.</span><span class="sxs-lookup"><span data-stu-id="33d65-192">This feature may cause the serialization and deserialization process to run slower.</span></span> <span data-ttu-id="33d65-193">I když není nutné replikovat data, je nutné provést porovnání další objekt v tomto režimu.</span><span class="sxs-lookup"><span data-stu-id="33d65-193">Although data does not have to be replicated, extra object comparisons must be performed in this mode.</span></span>  
  
> [!CAUTION]
>  <span data-ttu-id="33d65-194">Při `preserveObjectReferences` režim povolený, je velmi důležité nastavit `maxItemsInObjectGraph` hodnota, která má správné kvótu.</span><span class="sxs-lookup"><span data-stu-id="33d65-194">When the `preserveObjectReferences` mode is enabled, it is especially important to set the `maxItemsInObjectGraph` value to the correct quota.</span></span> <span data-ttu-id="33d65-195">Vzhledem ke způsobu pole jsou zpracovávány v tomto režimu, je snadné pro útočníka vytvořit malé škodlivý zprávu, která má za následek omezený pouze systémem spotřeby velké paměti `maxItemsInObjectGraph` kvóty.</span><span class="sxs-lookup"><span data-stu-id="33d65-195">Due to the way arrays are handled in this mode, it is easy for an attacker to construct a small malicious message that results in large memory consumption limited only by the `maxItemsInObjectGraph` quota.</span></span>  
  
### <a name="specifying-a-data-contract-surrogate"></a><span data-ttu-id="33d65-196">Určení náhradní kontraktu dat</span><span class="sxs-lookup"><span data-stu-id="33d65-196">Specifying a Data Contract Surrogate</span></span>  
 <span data-ttu-id="33d65-197">Některé `DataContractSerializer` mají přetížení konstruktor `dataContractSurrogate` parametr, který může být nastaven na `null`.</span><span class="sxs-lookup"><span data-stu-id="33d65-197">Some `DataContractSerializer` constructor overloads have a `dataContractSurrogate` parameter, which may be set to `null`.</span></span> <span data-ttu-id="33d65-198">Jinak můžete použít k určení *náhradní kontraktu dat*, což je typ, který implementuje <xref:System.Runtime.Serialization.IDataContractSurrogate> rozhraní.</span><span class="sxs-lookup"><span data-stu-id="33d65-198">Otherwise, you can use it to specify a *data contract surrogate*, which is a type that implements the <xref:System.Runtime.Serialization.IDataContractSurrogate> interface.</span></span> <span data-ttu-id="33d65-199">Pak můžete použít rozhraní přizpůsobit serializaci a deserializaci procesu.</span><span class="sxs-lookup"><span data-stu-id="33d65-199">You can then use the interface to customize the serialization and deserialization process.</span></span> [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)]<span data-ttu-id="33d65-200">[Náhrady kontraktů dat](../../../../docs/framework/wcf/extending/data-contract-surrogates.md).</span><span class="sxs-lookup"><span data-stu-id="33d65-200"> [Data Contract Surrogates](../../../../docs/framework/wcf/extending/data-contract-surrogates.md).</span></span>  
  
## <a name="serialization"></a><span data-ttu-id="33d65-201">Serializace</span><span class="sxs-lookup"><span data-stu-id="33d65-201">Serialization</span></span>  
 <span data-ttu-id="33d65-202">Následující informace platí pro všechny třídy, která dědí z <xref:System.Runtime.Serialization.XmlObjectSerializer>, včetně <xref:System.Runtime.Serialization.DataContractSerializer> a <xref:System.Runtime.Serialization.NetDataContractSerializer> třídy.</span><span class="sxs-lookup"><span data-stu-id="33d65-202">The following information applies to any class that inherits from the <xref:System.Runtime.Serialization.XmlObjectSerializer>, including the <xref:System.Runtime.Serialization.DataContractSerializer> and <xref:System.Runtime.Serialization.NetDataContractSerializer> classes.</span></span>  
  
### <a name="simple-serialization"></a><span data-ttu-id="33d65-203">Jednoduché serializace</span><span class="sxs-lookup"><span data-stu-id="33d65-203">Simple Serialization</span></span>  
 <span data-ttu-id="33d65-204">Nejzákladnější způsob o serializaci objektu je předejte jej <xref:System.Runtime.Serialization.XmlObjectSerializer.WriteObject%2A> metoda.</span><span class="sxs-lookup"><span data-stu-id="33d65-204">The most basic way to serialize an object is to pass it to the <xref:System.Runtime.Serialization.XmlObjectSerializer.WriteObject%2A> method.</span></span> <span data-ttu-id="33d65-205">Existují tři přetížení, jeden pro zápis do <xref:System.IO.Stream>, <xref:System.Xml.XmlWriter>, nebo <xref:System.Xml.XmlDictionaryWriter>.</span><span class="sxs-lookup"><span data-stu-id="33d65-205">There are three overloads, one each for writing to a <xref:System.IO.Stream>, an <xref:System.Xml.XmlWriter>, or an <xref:System.Xml.XmlDictionaryWriter>.</span></span> <span data-ttu-id="33d65-206">Pomocí <xref:System.IO.Stream> přetížení, výstup je XML v kódování UTF-8.</span><span class="sxs-lookup"><span data-stu-id="33d65-206">With the <xref:System.IO.Stream> overload, the output is XML in the UTF-8 encoding.</span></span> <span data-ttu-id="33d65-207">Pomocí <xref:System.Xml.XmlDictionaryWriter> přetížení, serializátor optimalizuje její výstup pro binární formát XML.</span><span class="sxs-lookup"><span data-stu-id="33d65-207">With the <xref:System.Xml.XmlDictionaryWriter> overload, the serializer optimizes its output for binary XML.</span></span>  
  
 <span data-ttu-id="33d65-208">Při použití <xref:System.Runtime.Serialization.XmlObjectSerializer.WriteObject%2A> metoda serializátoru, který používá výchozí název a obor názvů pro element obálky a zapíše ho společně s obsahem (viz předchozí části "Určení the výchozí kořenový název a Namespace").</span><span class="sxs-lookup"><span data-stu-id="33d65-208">When using the <xref:System.Runtime.Serialization.XmlObjectSerializer.WriteObject%2A> method, the serializer uses the default name and namespace for the wrapper element and writes it out along with the contents (see the previous "Specifying the Default Root Name and Namespace" section).</span></span>  
  
 <span data-ttu-id="33d65-209">Následující příklad ukazuje zápis s <xref:System.Xml.XmlDictionaryWriter>.</span><span class="sxs-lookup"><span data-stu-id="33d65-209">The following example demonstrates writing with an <xref:System.Xml.XmlDictionaryWriter>.</span></span>  
  
 [!code-csharp[c_StandaloneDataContractSerializer#8](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_standalonedatacontractserializer/cs/source.cs#8)]
 [!code-vb[c_StandaloneDataContractSerializer#8](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_standalonedatacontractserializer/vb/source.vb#8)]  
  
 <span data-ttu-id="33d65-210">To vytváří XML podobný následujícímu.</span><span class="sxs-lookup"><span data-stu-id="33d65-210">This produces XML similar to the following.</span></span>  
  
```xml  
<Person>  
  <Name>Jay Hamlin</Name>  
  <Address>123 Main St.</Address>  
</Person>  
```  
  
### <a name="step-by-step-serialization"></a><span data-ttu-id="33d65-211">Krok za krokem serializace</span><span class="sxs-lookup"><span data-stu-id="33d65-211">Step-By-Step Serialization</span></span>  
 <span data-ttu-id="33d65-212">Použití <xref:System.Runtime.Serialization.XmlObjectSerializer.WriteStartObject%2A>, <xref:System.Runtime.Serialization.XmlObjectSerializer.WriteObjectContent%2A>, a <xref:System.Runtime.Serialization.XmlObjectSerializer.WriteEndObject%2A> metody k zápisu end element zapsat obsah objektu a zavřete element obálky, v uvedeném pořadí.</span><span class="sxs-lookup"><span data-stu-id="33d65-212">Use the <xref:System.Runtime.Serialization.XmlObjectSerializer.WriteStartObject%2A>, <xref:System.Runtime.Serialization.XmlObjectSerializer.WriteObjectContent%2A>, and <xref:System.Runtime.Serialization.XmlObjectSerializer.WriteEndObject%2A> methods to write the end element, write the object contents, and close the wrapper element, respectively.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="33d65-213">Neexistují žádné <xref:System.IO.Stream> přetížení těchto metod.</span><span class="sxs-lookup"><span data-stu-id="33d65-213">There are no <xref:System.IO.Stream> overloads of these methods.</span></span>  
  
 <span data-ttu-id="33d65-214">Tento krok za krokem serializace se dvě běžné způsoby.</span><span class="sxs-lookup"><span data-stu-id="33d65-214">This step-by-step serialization has two common uses.</span></span> <span data-ttu-id="33d65-215">Jeden je vložit obsah, jako je například atributy nebo komentáře mezi `WriteStartObject` a `WriteObjectContent`, jak je znázorněno v následujícím příkladu.</span><span class="sxs-lookup"><span data-stu-id="33d65-215">One is to insert contents such as attributes or comments between `WriteStartObject` and `WriteObjectContent`,  as shown in the following example.</span></span>  
  
 [!code-csharp[c_StandaloneDataContractSerializer#9](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_standalonedatacontractserializer/cs/source.cs#9)]
 [!code-vb[c_StandaloneDataContractSerializer#9](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_standalonedatacontractserializer/vb/source.vb#9)]  
  
 <span data-ttu-id="33d65-216">To vytváří XML podobný následujícímu.</span><span class="sxs-lookup"><span data-stu-id="33d65-216">This produces XML similar to the following.</span></span>  
  
```xml  
<Person serializedBy="myCode">  
  <Name>Jay Hamlin</Name>  
  <Address>123 Main St.</Address>  
</Person>  
```  
  
 <span data-ttu-id="33d65-217">Další běžné použití je vyhýbat se používání <xref:System.Runtime.Serialization.XmlObjectSerializer.WriteStartObject%2A> a <xref:System.Runtime.Serialization.XmlObjectSerializer.WriteEndObject%2A> zcela a k zápisu vlastního vlastní obálky elementu (nebo i Přeskočit zápis obálku zcela), jak je znázorněno v následujícím kódu.</span><span class="sxs-lookup"><span data-stu-id="33d65-217">Another common use is to avoid using <xref:System.Runtime.Serialization.XmlObjectSerializer.WriteStartObject%2A> and <xref:System.Runtime.Serialization.XmlObjectSerializer.WriteEndObject%2A> entirely, and to write your own custom wrapper element (or even skip writing a wrapper altogether), as shown in the following code.</span></span>  
  
 [!code-csharp[c_StandaloneDataContractSerializer#10](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_standalonedatacontractserializer/cs/source.cs#10)]
 [!code-vb[c_StandaloneDataContractSerializer#10](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_standalonedatacontractserializer/vb/source.vb#10)]  
  
 <span data-ttu-id="33d65-218">To vytváří XML podobný následujícímu.</span><span class="sxs-lookup"><span data-stu-id="33d65-218">This produces XML similar to the following.</span></span>  
  
```xml  
<MyCustomWrapper>  
  <Name>Jay Hamlin</Name>  
  <Address>123 Main St.</Address>  
</MyCustomWrapper>  
```  
  
> [!NOTE]
>  <span data-ttu-id="33d65-219">Použití podrobné serializace může mít za následek neplatné schéma XML.</span><span class="sxs-lookup"><span data-stu-id="33d65-219">Using step-by-step serialization may result in schema-invalid XML.</span></span>  
  
## <a name="deserialization"></a><span data-ttu-id="33d65-220">Deserializace</span><span class="sxs-lookup"><span data-stu-id="33d65-220">Deserialization</span></span>  
 <span data-ttu-id="33d65-221">Následující informace platí pro všechny třídy, která dědí z <xref:System.Runtime.Serialization.XmlObjectSerializer>, včetně <xref:System.Runtime.Serialization.DataContractSerializer> a <xref:System.Runtime.Serialization.NetDataContractSerializer> třídy.</span><span class="sxs-lookup"><span data-stu-id="33d65-221">The following information applies to any class that inherits from the <xref:System.Runtime.Serialization.XmlObjectSerializer>, including the <xref:System.Runtime.Serialization.DataContractSerializer> and <xref:System.Runtime.Serialization.NetDataContractSerializer> classes.</span></span>  
  
 <span data-ttu-id="33d65-222">Nejzákladnější možnost k deserializaci objektu je volání jednoho z <xref:System.Runtime.Serialization.XmlObjectSerializer.ReadObject%2A> přetížení metody.</span><span class="sxs-lookup"><span data-stu-id="33d65-222">The most basic way to deserialize an object is to call one of the <xref:System.Runtime.Serialization.XmlObjectSerializer.ReadObject%2A> method overloads.</span></span> <span data-ttu-id="33d65-223">Existují tři přetížení, jeden pro čtení s <xref:System.Xml.XmlDictionaryReader>, `XmlReader`, nebo `Stream`.</span><span class="sxs-lookup"><span data-stu-id="33d65-223">There are three overloads, one each for reading with a <xref:System.Xml.XmlDictionaryReader>, an `XmlReader`, or a `Stream`.</span></span> <span data-ttu-id="33d65-224">Všimněte si, že `Stream` přetížení vytvoří textové <xref:System.Xml.XmlDictionaryReader> který není chráněn žádné kvóty a slouží pouze ke čtení dat důvěryhodné.</span><span class="sxs-lookup"><span data-stu-id="33d65-224">Note that the `Stream` overload creates a textual <xref:System.Xml.XmlDictionaryReader> that is not protected by any quotas, and should be used only to read trusted data.</span></span>  
  
 <span data-ttu-id="33d65-225">Všimněte si také, že objekt `ReadObject` metoda vrátí hodnotu, musí být přetypovat příslušného typu.</span><span class="sxs-lookup"><span data-stu-id="33d65-225">Also note that the object the `ReadObject` method returns must be cast to the appropriate type.</span></span>  
  
 <span data-ttu-id="33d65-226">Následující kód vytvoří instanci objektu <xref:System.Runtime.Serialization.DataContractSerializer> a <xref:System.Xml.XmlDictionaryReader>, pak deserializuje `Person` instance.</span><span class="sxs-lookup"><span data-stu-id="33d65-226">The following code constructs an instance of the <xref:System.Runtime.Serialization.DataContractSerializer> and an <xref:System.Xml.XmlDictionaryReader>, then deserializes a `Person` instance.</span></span>  
  
 [!code-csharp[c_StandaloneDataContractSerializer#11](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_standalonedatacontractserializer/cs/source.cs#11)]
 [!code-vb[c_StandaloneDataContractSerializer#11](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_standalonedatacontractserializer/vb/source.vb#11)]  
  
 <span data-ttu-id="33d65-227">Před voláním <xref:System.Runtime.Serialization.XmlObjectSerializer.ReadObject%2A> metodu, umístěte čtecí modul XML na element obálky nebo na uzel jiný obsah, který předchází element obálky.</span><span class="sxs-lookup"><span data-stu-id="33d65-227">Before calling the <xref:System.Runtime.Serialization.XmlObjectSerializer.ReadObject%2A> method, position the XML reader on the wrapper element or on a non-content node that precedes the wrapper element.</span></span> <span data-ttu-id="33d65-228">To provedete pomocí volání <xref:System.Xml.XmlReader.Read%2A> metodu <xref:System.Xml.XmlReader> nebo jeho odvození a testování <xref:System.Xml.XmlReader.NodeType%2A>, jak je znázorněno v následujícím kódu.</span><span class="sxs-lookup"><span data-stu-id="33d65-228">You can do this by calling the <xref:System.Xml.XmlReader.Read%2A> method of the <xref:System.Xml.XmlReader> or its derivation, and testing the <xref:System.Xml.XmlReader.NodeType%2A>, as shown in the following code.</span></span>  
  
 [!code-csharp[c_StandaloneDataContractSerializer#12](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_standalonedatacontractserializer/cs/source.cs#12)]
 [!code-vb[c_StandaloneDataContractSerializer#12](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_standalonedatacontractserializer/vb/source.vb#12)]  
  
 <span data-ttu-id="33d65-229">Všimněte si, abyste si přečetli atributů na tento element obálky, před blokováním čtenáře `ReadObject`.</span><span class="sxs-lookup"><span data-stu-id="33d65-229">Note that you can read attributes on this wrapper element before handing the reader to `ReadObject`.</span></span>  
  
 <span data-ttu-id="33d65-230">Při použití jednu jednoduchý `ReadObject` přetížení, deserializátor hledá výchozí název a oboru názvů na element obálky (viz předchozí části "Určení the výchozí kořenový název a Namespace") a vyvolá výjimku, pokud najde neznámé element.</span><span class="sxs-lookup"><span data-stu-id="33d65-230">When using one of the simple `ReadObject` overloads, the deserializer looks for the default name and namespace on the wrapper element (see the preceding section, "Specifying the Default Root Name and Namespace") and throws an exception if it finds an unknown element.</span></span> <span data-ttu-id="33d65-231">V předchozím příkladu `<Person>` je očekáván element obálku.</span><span class="sxs-lookup"><span data-stu-id="33d65-231">In the preceding example, the `<Person>` wrapper element is expected.</span></span> <span data-ttu-id="33d65-232"><xref:System.Runtime.Serialization.XmlObjectSerializer.IsStartObject%2A> Metoda je volána k ověření, zda čtečka je umístěn na element, který je pojmenován podle očekávání.</span><span class="sxs-lookup"><span data-stu-id="33d65-232">The <xref:System.Runtime.Serialization.XmlObjectSerializer.IsStartObject%2A> method is called to verify that the reader is positioned on an element that is named as expected.</span></span>  
  
 <span data-ttu-id="33d65-233">Existuje způsob, jak zakázat tuto obálku element název kontrolu; Některé přetížení `ReadObject` metoda trvat logického parametru `verifyObjectName`, který je nastaven na `true` ve výchozím nastavení.</span><span class="sxs-lookup"><span data-stu-id="33d65-233">There is a way to disable this wrapper element name check; some overloads of the `ReadObject` method take the Boolean parameter `verifyObjectName`, which is set to `true` by default.</span></span> <span data-ttu-id="33d65-234">Pokud nastavíte hodnotu `false`, názvem a oborem názvů elementu obálky je ignorován.</span><span class="sxs-lookup"><span data-stu-id="33d65-234">When set to `false`, the name and namespace of the wrapper element is ignored.</span></span> <span data-ttu-id="33d65-235">To je užitečné pro čtení dat XML, která byla zapsána pomocí mechanismu serializace podrobné popsané.</span><span class="sxs-lookup"><span data-stu-id="33d65-235">This is useful for reading XML that was written using the step-by-step serialization mechanism described previously.</span></span>  
  
## <a name="using-the-netdatacontractserializer"></a><span data-ttu-id="33d65-236">Pomocí NetDataContractSerializer</span><span class="sxs-lookup"><span data-stu-id="33d65-236">Using the NetDataContractSerializer</span></span>  
 <span data-ttu-id="33d65-237">Hlavní rozdíl mezi `DataContractSerializer` a <xref:System.Runtime.Serialization.NetDataContractSerializer> je, že `DataContractSerializer` používá názvy kontraktu dat, zatímco `NetDataContractSerializer` výstupy úplné [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] názvy sestavení a typ v serializovaných XML.</span><span class="sxs-lookup"><span data-stu-id="33d65-237">The primary difference between the `DataContractSerializer` and the <xref:System.Runtime.Serialization.NetDataContractSerializer> is that the `DataContractSerializer` uses data contract names, whereas the `NetDataContractSerializer` outputs full [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] assembly and type names in the serialized XML.</span></span> <span data-ttu-id="33d65-238">To znamená, že přesně stejné typy musí být sdílená mezi koncovými body serializace a deserializace.</span><span class="sxs-lookup"><span data-stu-id="33d65-238">This means that the exact same types must be shared between the serialization and deserialization endpoints.</span></span> <span data-ttu-id="33d65-239">To znamená, že mechanismus známé typy není to nutné `NetDataContractSerializer` vzhledem k tomu, že jsou vždy známé přesný typy, které mají být deserializovat.</span><span class="sxs-lookup"><span data-stu-id="33d65-239">This means that the known types mechanism is not required with the `NetDataContractSerializer` because the exact types to be deserialized are always known.</span></span>  
  
 <span data-ttu-id="33d65-240">Mohou však nastat několik problémy:</span><span class="sxs-lookup"><span data-stu-id="33d65-240">However, several problems can occur:</span></span>  
  
-   <span data-ttu-id="33d65-241">Zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="33d65-241">Security.</span></span> <span data-ttu-id="33d65-242">Načtení libovolného typu nalezen v kódu XML deserializován.</span><span class="sxs-lookup"><span data-stu-id="33d65-242">Any type found in the XML being deserialized is loaded.</span></span> <span data-ttu-id="33d65-243">To může zneužít k vynucení načítání škodlivý typy.</span><span class="sxs-lookup"><span data-stu-id="33d65-243">This can be exploited to force the loading of malicious types.</span></span> <span data-ttu-id="33d65-244">Pomocí `NetDataContractSerializer` s nedůvěryhodných dat by mělo být provedeno pouze v případě *vazače serializace* slouží (pomocí <xref:System.Runtime.Serialization.NetDataContractSerializer.Binder%2A> parametr vlastností nebo konstruktor).</span><span class="sxs-lookup"><span data-stu-id="33d65-244">Using the `NetDataContractSerializer` with untrusted data should be done only if a *Serialization Binder* is used (using the <xref:System.Runtime.Serialization.NetDataContractSerializer.Binder%2A> property or constructor parameter).</span></span> <span data-ttu-id="33d65-245">Vazač povoluje pouze bezpečné typy načíst.</span><span class="sxs-lookup"><span data-stu-id="33d65-245">The binder permits only safe types to be loaded.</span></span> <span data-ttu-id="33d65-246">Mechanismus vazač je stejný jako ten, který typy, které do <xref:System.Runtime.Serialization> oboru názvů používají.</span><span class="sxs-lookup"><span data-stu-id="33d65-246">The Binder mechanism is identical to the one that types in the <xref:System.Runtime.Serialization> namespace use.</span></span>  
  
-   <span data-ttu-id="33d65-247">Správa verzí.</span><span class="sxs-lookup"><span data-stu-id="33d65-247">Versioning.</span></span> <span data-ttu-id="33d65-248">Pomocí úplné názvy typů a sestavení v souboru XML vážně omezuje, jak může být typy verzí.</span><span class="sxs-lookup"><span data-stu-id="33d65-248">Using full type and assembly names in the XML severely restricts how types can be versioned.</span></span> <span data-ttu-id="33d65-249">Nelze změnit následující: Zadejte názvy, obory názvů, názvy sestavení a verze sestavení.</span><span class="sxs-lookup"><span data-stu-id="33d65-249">The following cannot be changed: type names, namespaces, assembly names, and assembly versions.</span></span> <span data-ttu-id="33d65-250">Nastavení <xref:System.Runtime.Serialization.NetDataContractSerializer.AssemblyFormat%2A> vlastnost nebo konstruktor parametr <xref:System.Runtime.Serialization.Formatters.FormatterAssemblyStyle.Simple> místo výchozí hodnotu <xref:System.Runtime.Serialization.Formatters.FormatterAssemblyStyle.Full> umožňuje změny verze sestavení, ale ne pro obecný parametr typy.</span><span class="sxs-lookup"><span data-stu-id="33d65-250">Setting the <xref:System.Runtime.Serialization.NetDataContractSerializer.AssemblyFormat%2A> property or constructor parameter to <xref:System.Runtime.Serialization.Formatters.FormatterAssemblyStyle.Simple> instead of the default value of <xref:System.Runtime.Serialization.Formatters.FormatterAssemblyStyle.Full> allows for assembly version changes, but not for generic parameter types.</span></span>  
  
-   <span data-ttu-id="33d65-251">Vzájemná funkční spolupráce.</span><span class="sxs-lookup"><span data-stu-id="33d65-251">Interoperability.</span></span> <span data-ttu-id="33d65-252">Protože [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] názvy typu a sestavení jsou zahrnuty v souboru XML, platformy jiné než [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] nelze získat přístup k datům výsledné.</span><span class="sxs-lookup"><span data-stu-id="33d65-252">Because [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] type and assembly names are included in the XML, platforms other than the [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] cannot access the resulting data.</span></span>  
  
-   <span data-ttu-id="33d65-253">Výkon.</span><span class="sxs-lookup"><span data-stu-id="33d65-253">Performance.</span></span> <span data-ttu-id="33d65-254">Zápis se typ a sestavení názvy výrazně zvyšuje velikost výsledný soubor XML.</span><span class="sxs-lookup"><span data-stu-id="33d65-254">Writing out the type and assembly names significantly increases the size of the resulting XML.</span></span>  
  
 <span data-ttu-id="33d65-255">Tento mechanismus lze přirovnat k binárnímu souboru nebo protokolu SOAP serializace používané [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] vzdálené komunikace (konkrétně <xref:System.Runtime.Serialization.Formatters.Binary.BinaryFormatter> a <xref:System.Runtime.Serialization.Formatters.Soap.SoapFormatter>).</span><span class="sxs-lookup"><span data-stu-id="33d65-255">This mechanism is similar to binary or SOAP serialization used by [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] remoting (specifically, the <xref:System.Runtime.Serialization.Formatters.Binary.BinaryFormatter> and the <xref:System.Runtime.Serialization.Formatters.Soap.SoapFormatter>).</span></span>  
  
 <span data-ttu-id="33d65-256">Pomocí `NetDataContractSerializer` je podobný používání `DataContractSerializer`, s následující rozdíly:</span><span class="sxs-lookup"><span data-stu-id="33d65-256">Using the `NetDataContractSerializer` is similar to using the `DataContractSerializer`, with the following differences:</span></span>  
  
-   <span data-ttu-id="33d65-257">Konstruktory nevyžadují zadejte typ kořenového.</span><span class="sxs-lookup"><span data-stu-id="33d65-257">The constructors do not require you to specify a root type.</span></span> <span data-ttu-id="33d65-258">Může serializovat všech typů stejnou instanci systému `NetDataContractSerializer`.</span><span class="sxs-lookup"><span data-stu-id="33d65-258">You can serialize any type with the same instance of the `NetDataContractSerializer`.</span></span>  
  
-   <span data-ttu-id="33d65-259">Konstruktory nepřijímají seznam známé typy.</span><span class="sxs-lookup"><span data-stu-id="33d65-259">The constructors do not accept a list of known types.</span></span> <span data-ttu-id="33d65-260">Známé typy mechanismus není nutný, pokud jsou názvy typů serializován do souboru XML.</span><span class="sxs-lookup"><span data-stu-id="33d65-260">The known types mechanism is unnecessary if type names are serialized into the XML.</span></span>  
  
-   <span data-ttu-id="33d65-261">Konstruktory nepřijímají náhradní kontraktu data.</span><span class="sxs-lookup"><span data-stu-id="33d65-261">The constructors do not accept a data contract surrogate.</span></span> <span data-ttu-id="33d65-262">Místo toho přijmou <xref:System.Runtime.Serialization.ISurrogateSelector> parametr s názvem `surrogateSelector` (která se mapuje <xref:System.Runtime.Serialization.NetDataContractSerializer.SurrogateSelector%2A> vlastnost).</span><span class="sxs-lookup"><span data-stu-id="33d65-262">Instead, they accept an <xref:System.Runtime.Serialization.ISurrogateSelector> parameter called `surrogateSelector` (which maps to the <xref:System.Runtime.Serialization.NetDataContractSerializer.SurrogateSelector%2A> property).</span></span> <span data-ttu-id="33d65-263">Toto je starší verze náhradní mechanismus.</span><span class="sxs-lookup"><span data-stu-id="33d65-263">This is a legacy surrogate mechanism.</span></span>  
  
-   <span data-ttu-id="33d65-264">Konstruktory přijmout parametr s názvem `assemblyFormat` z <xref:System.Runtime.Serialization.Formatters.FormatterAssemblyStyle> která se mapuje <xref:System.Runtime.Serialization.NetDataContractSerializer.AssemblyFormat%2A> vlastnost.</span><span class="sxs-lookup"><span data-stu-id="33d65-264">The constructors accept a parameter called `assemblyFormat` of the <xref:System.Runtime.Serialization.Formatters.FormatterAssemblyStyle> that maps to the <xref:System.Runtime.Serialization.NetDataContractSerializer.AssemblyFormat%2A> property.</span></span> <span data-ttu-id="33d65-265">Jak je popsáno dříve, to slouží k vylepšení možností správy verzí serializátor.</span><span class="sxs-lookup"><span data-stu-id="33d65-265">As discussed previously, this can be used to enhance the versioning capabilities of the serializer.</span></span> <span data-ttu-id="33d65-266">Toto je stejný jako <xref:System.Runtime.Serialization.Formatters.FormatterAssemblyStyle> mechanismus v binárním nebo SOAP serializace.</span><span class="sxs-lookup"><span data-stu-id="33d65-266">This is identical to the <xref:System.Runtime.Serialization.Formatters.FormatterAssemblyStyle> mechanism in binary or SOAP serialization.</span></span>  
  
-   <span data-ttu-id="33d65-267">Přijměte konstruktorů <xref:System.Runtime.Serialization.StreamingContext> parametr s názvem `context` která se mapuje <xref:System.Runtime.Serialization.NetDataContractSerializer.Context%2A> vlastnost.</span><span class="sxs-lookup"><span data-stu-id="33d65-267">The constructors accept a <xref:System.Runtime.Serialization.StreamingContext> parameter called `context` that maps to the <xref:System.Runtime.Serialization.NetDataContractSerializer.Context%2A> property.</span></span> <span data-ttu-id="33d65-268">Můžete použít k předání informací do typy serializována.</span><span class="sxs-lookup"><span data-stu-id="33d65-268">You can use this to pass information into types being serialized.</span></span> <span data-ttu-id="33d65-269">Toto použití je shodná s <xref:System.Runtime.Serialization.StreamingContext> mechanismus používaný v jiných <xref:System.Runtime.Serialization> třídy.</span><span class="sxs-lookup"><span data-stu-id="33d65-269">This usage is identical to that of the <xref:System.Runtime.Serialization.StreamingContext> mechanism used in other <xref:System.Runtime.Serialization> classes.</span></span>  
  
-   <span data-ttu-id="33d65-270"><xref:System.Runtime.Serialization.NetDataContractSerializer.Serialize%2A> a <xref:System.Runtime.Serialization.NetDataContractSerializer.Deserialize%2A> metody jsou aliasy pro <xref:System.Runtime.Serialization.XmlObjectSerializer.WriteObject%2A> a <xref:System.Runtime.Serialization.XmlObjectSerializer.ReadObject%2A> metody.</span><span class="sxs-lookup"><span data-stu-id="33d65-270">The <xref:System.Runtime.Serialization.NetDataContractSerializer.Serialize%2A> and <xref:System.Runtime.Serialization.NetDataContractSerializer.Deserialize%2A> methods are aliases for the <xref:System.Runtime.Serialization.XmlObjectSerializer.WriteObject%2A> and <xref:System.Runtime.Serialization.XmlObjectSerializer.ReadObject%2A> methods.</span></span> <span data-ttu-id="33d65-271">Tyto existovat více konzistentní programovací model poskytnout binární nebo SOAP serializace.</span><span class="sxs-lookup"><span data-stu-id="33d65-271">These exist to provide a more consistent programming model with binary or SOAP serialization.</span></span>  
  
 [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="33d65-272">Tyto funkce, najdete v části [binární serializace](../../../../docs/standard/serialization/binary-serialization.md).</span><span class="sxs-lookup"><span data-stu-id="33d65-272"> these features, see [Binary Serialization](../../../../docs/standard/serialization/binary-serialization.md).</span></span>  
  
 <span data-ttu-id="33d65-273">Formáty XML, který `NetDataContractSerializer` a `DataContractSerializer` použití obvykle nejsou kompatibilní.</span><span class="sxs-lookup"><span data-stu-id="33d65-273">The XML formats that the `NetDataContractSerializer` and the `DataContractSerializer` use are normally not compatible.</span></span> <span data-ttu-id="33d65-274">To znamená pokus o s jedním z těchto serializátorů serializaci a deserializaci k ostatním není podporováno.</span><span class="sxs-lookup"><span data-stu-id="33d65-274">That is, attempting to serialize with one of these serializers and deserialize with the other is not a supported scenario.</span></span>  
  
 <span data-ttu-id="33d65-275">Rovněž Pamatujte, že `NetDataContractSerializer` výstup není kompletní [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] typ a název sestavení pro každý uzel v grafu objektů.</span><span class="sxs-lookup"><span data-stu-id="33d65-275">Also, note that the `NetDataContractSerializer` does not output the full [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] type and assembly name for each node in the object graph.</span></span> <span data-ttu-id="33d65-276">Vyprodukuje tyto informace jenom tam, kde je nejednoznačný.</span><span class="sxs-lookup"><span data-stu-id="33d65-276">It outputs that information only where it is ambiguous.</span></span> <span data-ttu-id="33d65-277">To znamená výstupy na kořenové úrovni objekt a všechny polymorfní případech.</span><span class="sxs-lookup"><span data-stu-id="33d65-277">That is, it outputs at the root object level and for any polymorphic cases.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="33d65-278">Viz také</span><span class="sxs-lookup"><span data-stu-id="33d65-278">See Also</span></span>  
 <xref:System.Runtime.Serialization.DataContractSerializer>  
 <xref:System.Runtime.Serialization.NetDataContractSerializer>  
 <xref:System.Runtime.Serialization.XmlObjectSerializer>  
 [<span data-ttu-id="33d65-279">Binární serializace</span><span class="sxs-lookup"><span data-stu-id="33d65-279">Binary Serialization</span></span>](../../../../docs/standard/serialization/binary-serialization.md)  
 [<span data-ttu-id="33d65-280">Typy podporované serializátorem kontraktu dat</span><span class="sxs-lookup"><span data-stu-id="33d65-280">Types Supported by the Data Contract Serializer</span></span>](../../../../docs/framework/wcf/feature-details/types-supported-by-the-data-contract-serializer.md)
