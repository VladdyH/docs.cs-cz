---
title: Sdílení portů Net.TCP
ms.custom: ''
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: ''
ms.suite: ''
ms.technology:
- dotnet-clr
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- port activation [WCF]
- port sharing [WCF]
ms.assetid: f13692ee-a179-4439-ae72-50db9534eded
caps.latest.revision: 14
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.workload:
- dotnet
ms.openlocfilehash: c7abf272cb1d069b0fbdcd561256580de5a82c29
ms.sourcegitcommit: 03ee570f6f528a7d23a4221dcb26a9498edbdf8c
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 04/28/2018
---
# <a name="nettcp-port-sharing"></a><span data-ttu-id="7a778-102">Sdílení portů Net.TCP</span><span class="sxs-lookup"><span data-stu-id="7a778-102">Net.TCP Port Sharing</span></span>
[!INCLUDE[indigo1](../../../../includes/indigo1-md.md)]<span data-ttu-id="7a778-103"> poskytuje nový protokol sítě založené na protokolu TCP (net.tcp://) pro komunikaci s vysokým výkonem.</span><span class="sxs-lookup"><span data-stu-id="7a778-103"> provides a new TCP-based network protocol (net.tcp://) for high-performance communication.</span></span> [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]<span data-ttu-id="7a778-104"> také zavádí novou součást systému, služba Net.TCP Port Sharing umožňující portů net.tcp ke sdílení více procesy uživatele.</span><span class="sxs-lookup"><span data-stu-id="7a778-104"> also introduces a new system component, the Net.TCP Port Sharing Service that enables net.tcp ports to be shared across multiple user processes.</span></span>  
  
## <a name="background-and-motivation"></a><span data-ttu-id="7a778-105">Pozadí a motivace</span><span class="sxs-lookup"><span data-stu-id="7a778-105">Background and Motivation</span></span>  
 <span data-ttu-id="7a778-106">Když protokol TCP/IP byla poprvé použita, pouze malý počet aplikací protokoly provedené jeho použití.</span><span class="sxs-lookup"><span data-stu-id="7a778-106">When the TCP/IP protocol was first introduced, only a small number of application protocols made use of it.</span></span> <span data-ttu-id="7a778-107">TCP/IP používá k rozlišení mezi aplikace přidělením jedinečné 16bitové číslo portu pro každý protokol aplikace čísla portů.</span><span class="sxs-lookup"><span data-stu-id="7a778-107">TCP/IP used port numbers to differentiate between applications by assigning a unique 16-bit port number to each application protocol.</span></span> <span data-ttu-id="7a778-108">Například přenos HTTP se ještě dnes standardizované využívá TCP port 80, SMTP používá TCP port 25 a server FTP použije porty TCP 20 a 21.</span><span class="sxs-lookup"><span data-stu-id="7a778-108">For example, HTTP traffic today is standardized to use TCP port 80, SMTP uses TCP port 25, and FTP uses TCP ports 20 and 21.</span></span> <span data-ttu-id="7a778-109">Jiné aplikace pomocí protokolu TCP přenos můžete si vybrat jiný dostupný port číslo podle konvence nebo prostřednictvím formální standardizace.</span><span class="sxs-lookup"><span data-stu-id="7a778-109">Other applications using TCP as a transport can choose another available port number, either by convention or through formal standardization.</span></span>  
  
 <span data-ttu-id="7a778-110">Rozlišovat mezi jednotlivými aplikacemi pomocí čísla portů měly problémy se zabezpečením.</span><span class="sxs-lookup"><span data-stu-id="7a778-110">Using port numbers to distinguish between applications had security problems.</span></span> <span data-ttu-id="7a778-111">Obecně jsou nakonfigurované brány firewall k blokování provozu TCP na všech portech s výjimkou pár dobře známé vstupním bodům, takže nasazení aplikace, která používá nestandardním portu, je často složité nebo dokonce možné z důvodu přítomnosti podnikových a osobní brány firewall.</span><span class="sxs-lookup"><span data-stu-id="7a778-111">Firewalls are generally configured to block TCP traffic on all ports except for a few well-known entry points, so deploying an application that uses a non-standard port is often complicated or even impossible due to the presence of corporate and personal firewalls.</span></span> <span data-ttu-id="7a778-112">Aplikace, které mohou komunikovat přes standardní, dobře známé porty, které jsou již povoleny, redukovat prostor pro útok externí.</span><span class="sxs-lookup"><span data-stu-id="7a778-112">Applications that can communicate over standard, well-known ports that are already permitted, reduce the external attack surface.</span></span> <span data-ttu-id="7a778-113">Mnoho síťových aplikací využívat HTTP protokolu, protože většinu bran firewall jsou nakonfigurované ve výchozím nastavení, aby povolovala přenosy na portu TCP 80.</span><span class="sxs-lookup"><span data-stu-id="7a778-113">Many network applications make use of the HTTP protocol because most firewalls are configured by default to allow traffic on TCP port 80.</span></span>  
  
 <span data-ttu-id="7a778-114">HTTP. SYS modelu, ve kterém je provoz pro mnoho různých aplikací HTTP multiplexní na jediný port TCP se stal standard na platformě Windows.</span><span class="sxs-lookup"><span data-stu-id="7a778-114">The HTTP.SYS model in which traffic for many different HTTP applications is multiplexed onto a single TCP port has become standard on the Windows platform.</span></span> <span data-ttu-id="7a778-115">To poskytuje společný bod ovládacího prvku pro brány firewall správci současně vývojáři aplikace k minimalizovat náklady na nasazení vytváření nové aplikace, které můžete provést pomocí sítě.</span><span class="sxs-lookup"><span data-stu-id="7a778-115">This provides a common point of control for firewall administrators while allowing application developers to minimize the deployment cost of building new applications that can make use of the network.</span></span>  
  
 <span data-ttu-id="7a778-116">Sdílení portů napříč různými aplikacemi HTTP se dlouho funkce Internetové informační služby (IIS).</span><span class="sxs-lookup"><span data-stu-id="7a778-116">The ability to share ports across multiple HTTP applications has long been a feature of Internet Information Services (IIS).</span></span> <span data-ttu-id="7a778-117">Bylo ale pouze se zavedením HTTP. SYS (režimu jádra protokolu naslouchací proces protokolu HTTP) s [!INCLUDE[iis601](../../../../includes/iis601-md.md)] který byla tato infrastruktura plně zobecněn.</span><span class="sxs-lookup"><span data-stu-id="7a778-117">However, it was only with the introduction of HTTP.SYS (the kernel-mode HTTP protocol listener) with [!INCLUDE[iis601](../../../../includes/iis601-md.md)] that this infrastructure was fully generalized.</span></span> <span data-ttu-id="7a778-118">V platit, HTTP. SYS umožní libovolný uživatelský procesy sdílet porty TCP, který je vyhrazený pro provoz protokolu HTTP.</span><span class="sxs-lookup"><span data-stu-id="7a778-118">In effect, HTTP.SYS allows arbitrary user processes to share the TCP ports dedicated to HTTP traffic.</span></span> <span data-ttu-id="7a778-119">Tato funkce umožňuje mnoho aplikací HTTP nacházet na stejný fyzický počítač v samostatné, izolované procesy při sdílení síťové infrastruktury vyžaduje odesílat a přijímat provoz přes TCP port 80.</span><span class="sxs-lookup"><span data-stu-id="7a778-119">This capability allows many HTTP applications to coexist on the same physical machine in separate, isolated processes while sharing the network infrastructure required to send and receive traffic over TCP port 80.</span></span> <span data-ttu-id="7a778-120">Služba Net.TCP Port Sharing umožňuje stejný typ port pro net.tcp aplikace pro sdílení.</span><span class="sxs-lookup"><span data-stu-id="7a778-120">The Net.TCP Port Sharing Service enables the same type of port sharing for net.tcp applications.</span></span>  
  
## <a name="port-sharing-architecture"></a><span data-ttu-id="7a778-121">Architektura sdílení portů</span><span class="sxs-lookup"><span data-stu-id="7a778-121">Port Sharing Architecture</span></span>  
 <span data-ttu-id="7a778-122">Architektura sdílení portů v [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] má tři hlavní komponenty:</span><span class="sxs-lookup"><span data-stu-id="7a778-122">The Port Sharing architecture in [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] has three main components:</span></span>  
  
-   <span data-ttu-id="7a778-123">Pracovní proces: Jakýkoli proces komunikaci přes net.tcp:// pomocí sdíleného portů.</span><span class="sxs-lookup"><span data-stu-id="7a778-123">A Worker Process: Any process communicating over net.tcp:// using shared ports.</span></span>  
  
-   <span data-ttu-id="7a778-124">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Přenos TCP: implementuje protokol net.tcp://.</span><span class="sxs-lookup"><span data-stu-id="7a778-124">The [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] TCP transport: Implements the net.tcp:// protocol.</span></span>  
  
-   <span data-ttu-id="7a778-125">Služba sdílení portů Net.TCP: Umožňuje mnoha pracovních procesů sdílet stejný port TCP.</span><span class="sxs-lookup"><span data-stu-id="7a778-125">The Net.TCP Port Sharing Service: Allows many worker processes to share the same TCP port.</span></span>  
  
 <span data-ttu-id="7a778-126">Služba Net.TCP Port Sharing je služba Windows uživatelského režimu, který přijímá připojení net.tcp:// jménem pracovních procesů, které se připojují přes něj.</span><span class="sxs-lookup"><span data-stu-id="7a778-126">The Net.TCP Port Sharing Service is a user-mode Windows service that accepts net.tcp:// connections on behalf of the worker processes that connect through it.</span></span> <span data-ttu-id="7a778-127">Pokud připojení soketu dorazí, zkontroluje služby Sdílení portů příchozí datový proud zpráv získat jeho cílové adresy.</span><span class="sxs-lookup"><span data-stu-id="7a778-127">When a socket connection arrives, the port sharing service inspects the incoming message stream to obtain its destination address.</span></span> <span data-ttu-id="7a778-128">Na základě na tuto adresu, můžete služby Sdílení portů k aplikaci, která nakonec procesy směrovat datový proud.</span><span class="sxs-lookup"><span data-stu-id="7a778-128">Based on this address, the port sharing service can route the data stream to the application that ultimately processes it.</span></span>  
  
 <span data-ttu-id="7a778-129">Když [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] službu, která používá sdílení, portu net.tcp:// [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] infrastruktury přenosu protokolu TCP v procesu aplikace přímo neotevře TCP soketu.</span><span class="sxs-lookup"><span data-stu-id="7a778-129">When a [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] service that uses net.tcp:// port sharing opens, the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] TCP transport infrastructure does not directly open a TCP socket in the application process.</span></span> <span data-ttu-id="7a778-130">Místo toho infrastruktura přenosu zaregistruje základní adresu identifikátoru URI (Uniform Resource) se služba Net.TCP Port Sharing a čeká na služby přijímat zprávy jeho jménem sdílení portů.</span><span class="sxs-lookup"><span data-stu-id="7a778-130">Instead, the transport infrastructure registers the service’s base address Uniform Resource Identifier (URI) with the Net.TCP Port Sharing Service and waits for the port sharing service to listen for messages on its behalf.</span></span>  <span data-ttu-id="7a778-131">Služby Sdílení portů expeduje zprávy adresované do služba aplikace, když dorazí.</span><span class="sxs-lookup"><span data-stu-id="7a778-131">The port sharing service dispatches messages addressed to the application service as they arrive.</span></span>  
  
## <a name="installing-port-sharing"></a><span data-ttu-id="7a778-132">Instalace sdílení portů</span><span class="sxs-lookup"><span data-stu-id="7a778-132">Installing Port Sharing</span></span>  
 <span data-ttu-id="7a778-133">Služba Net.TCP Port Sharing je k dispozici ve všech operačních systémech, které podporují [!INCLUDE[vstecwinfx](../../../../includes/vstecwinfx-md.md)], ale služba není ve výchozím nastavení povolena.</span><span class="sxs-lookup"><span data-stu-id="7a778-133">The Net.TCP Port Sharing Service is available on all operating systems that support [!INCLUDE[vstecwinfx](../../../../includes/vstecwinfx-md.md)], but the service is not enabled by default.</span></span> <span data-ttu-id="7a778-134">Jako bezpečnostní opatření musí správce ručně povolit službu Net.TCP Port Sharing před první použití.</span><span class="sxs-lookup"><span data-stu-id="7a778-134">As a security precaution, an administrator must manually enable the Net.TCP Port Sharing Service prior to first use.</span></span> <span data-ttu-id="7a778-135">Služba Net.TCP Port Sharing zpřístupní možnosti konfigurace, které umožňují pracovat s několik vlastností sítě soketů, které vlastní služby Sdílení portů.</span><span class="sxs-lookup"><span data-stu-id="7a778-135">The Net.TCP Port Sharing Service exposes configuration options that allow you to manipulate several characteristics of the network sockets owned by the port sharing service.</span></span> <span data-ttu-id="7a778-136">Další informace najdete v tématu [postupy: povolení služby Sdílení portů Net.TCP](../../../../docs/framework/wcf/feature-details/how-to-enable-the-net-tcp-port-sharing-service.md).</span><span class="sxs-lookup"><span data-stu-id="7a778-136">For more information, see [How to: Enable the Net.TCP Port Sharing Service](../../../../docs/framework/wcf/feature-details/how-to-enable-the-net-tcp-port-sharing-service.md).</span></span>  
  
## <a name="using-nettcp-port-sharing-in-an-application"></a><span data-ttu-id="7a778-137">Použití v aplikaci pro sdílení portů Net.tcp</span><span class="sxs-lookup"><span data-stu-id="7a778-137">Using Net.tcp Port Sharing in an Application</span></span>  
 <span data-ttu-id="7a778-138">Nejjednodušší způsob, jak používat port net.tcp:// sdílení v vaše [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] aplikace je vystavit služby pomocí <xref:System.ServiceModel.NetTcpBinding> a potom povolit služby Sdílení portů Net.TCP pomocí <xref:System.ServiceModel.NetTcpBinding.PortSharingEnabled%2A> vlastnost.</span><span class="sxs-lookup"><span data-stu-id="7a778-138">The easiest way to use net.tcp:// port sharing in your [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] application is to expose a service using the <xref:System.ServiceModel.NetTcpBinding> and then to enable Net.TCP Port Sharing Service using the <xref:System.ServiceModel.NetTcpBinding.PortSharingEnabled%2A> property.</span></span>  
  
 [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="7a778-139"> jak to udělat, najdete v části [postupy: Konfigurace používání sdílení portů ve službě WCF](../../../../docs/framework/wcf/feature-details/how-to-configure-a-wcf-service-to-use-port-sharing.md).</span><span class="sxs-lookup"><span data-stu-id="7a778-139"> how to do this, see [How to: Configure a WCF Service to Use Port Sharing](../../../../docs/framework/wcf/feature-details/how-to-configure-a-wcf-service-to-use-port-sharing.md).</span></span>  
  
## <a name="security-implications-of-port-sharing"></a><span data-ttu-id="7a778-140">Sdílení portů vliv na zabezpečení</span><span class="sxs-lookup"><span data-stu-id="7a778-140">Security Implications of Port Sharing</span></span>  
 <span data-ttu-id="7a778-141">I když služba Net.TCP Port Sharing zajišťuje vrstvu zpracování mezi aplikacemi a sítě, musí být aplikace, které používají sdílení portů stále zabezpečený, jako kdyby byly přímo naslouchání v síti.</span><span class="sxs-lookup"><span data-stu-id="7a778-141">Although the Net.TCP Port Sharing Service provides a layer of processing between applications and the network, applications that use port sharing should still be secured as if they were directly listening on the network.</span></span> <span data-ttu-id="7a778-142">Aplikace, které používají sdílení portů konkrétně byste měli zvážit, proces oprávnění, pod kterým poběží.</span><span class="sxs-lookup"><span data-stu-id="7a778-142">Specifically, applications that use port sharing should evaluate the process privileges under which they run.</span></span> <span data-ttu-id="7a778-143">Zvažte spuštění vaší aplikace pomocí vestavěný účet Síťová služba, který se spouští s minimálním počtem proces oprávnění požadovaná pro síťovou komunikaci.</span><span class="sxs-lookup"><span data-stu-id="7a778-143">Consider running your application using the built-in Network Service account, which runs with the minimal set of process privileges required for network communication.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="7a778-144">Viz také</span><span class="sxs-lookup"><span data-stu-id="7a778-144">See Also</span></span>  
 [<span data-ttu-id="7a778-145">Konfigurace služby sdílení portů Net.TCP</span><span class="sxs-lookup"><span data-stu-id="7a778-145">Configuring the Net.TCP Port Sharing Service</span></span>](../../../../docs/framework/wcf/feature-details/configuring-the-net-tcp-port-sharing-service.md)  
 [<span data-ttu-id="7a778-146">Hostování</span><span class="sxs-lookup"><span data-stu-id="7a778-146">Hosting</span></span>](../../../../docs/framework/wcf/feature-details/hosting.md)  
 [<span data-ttu-id="7a778-147">Postupy: Konfigurace používání sdílení portů ve službě WCF</span><span class="sxs-lookup"><span data-stu-id="7a778-147">How to: Configure a WCF Service to Use Port Sharing</span></span>](../../../../docs/framework/wcf/feature-details/how-to-configure-a-wcf-service-to-use-port-sharing.md)  
 [<span data-ttu-id="7a778-148">Postupy: Povolení služby sdílení portů Net.TCP</span><span class="sxs-lookup"><span data-stu-id="7a778-148">How to: Enable the Net.TCP Port Sharing Service</span></span>](../../../../docs/framework/wcf/feature-details/how-to-enable-the-net-tcp-port-sharing-service.md)
