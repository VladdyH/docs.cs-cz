---
title: Hostování v aplikaci služby pro Windows
ms.custom: ''
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: ''
ms.suite: ''
ms.technology:
- dotnet-clr
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: f4199998-27f3-4dd9-aee4-0a4addfa9f24
caps.latest.revision: 12
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.workload:
- dotnet
ms.openlocfilehash: c1f0d2336c2682bd525a66c6e5b12ce2d17ad219
ms.sourcegitcommit: 94d33cadc5ff81d2ac389bf5f26422c227832052
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 04/30/2018
---
# <a name="hosting-in-a-windows-service-application"></a><span data-ttu-id="b9ac3-102">Hostování v aplikaci služby pro Windows</span><span class="sxs-lookup"><span data-stu-id="b9ac3-102">Hosting in a Windows Service Application</span></span>
<span data-ttu-id="b9ac3-103">Služby systému Windows (dříve označované jako služby systému Windows NT) zadejte procesu modelu zvlášť vhodné pro aplikace, které musí za provozu v spustitelný soubor dlouho běžící a nezobrazovat jakoukoli formu uživatelské rozhraní.</span><span class="sxs-lookup"><span data-stu-id="b9ac3-103">Windows services (formerly known as Windows NT services) provide a process model particularly suited to applications that must live in a long-running executable and do not display any form of user interface.</span></span> <span data-ttu-id="b9ac3-104">Doba platnosti procesu systému Windows služby aplikaci spravuje správce řízení služeb (SCM), která umožňuje spustit, zastavit a pozastavit aplikace služby systému Windows.</span><span class="sxs-lookup"><span data-stu-id="b9ac3-104">The process lifetime of a Windows service application is managed by the service control manager (SCM), which allows you to start, stop, and pause Windows service applications.</span></span> <span data-ttu-id="b9ac3-105">Můžete nakonfigurovat službu procesů systému Windows spustit automaticky při spuštění počítače, takže je vhodné hostitelské prostředí pro aplikace "always on".</span><span class="sxs-lookup"><span data-stu-id="b9ac3-105">You can configure a Windows service process to start automatically when the computer starts, making it a suitable hosting environment for "always on" applications.</span></span> <span data-ttu-id="b9ac3-106">Další informace o aplikace služby systému Windows najdete v tématu [aplikace služby systému Windows](http://go.microsoft.com/fwlink/?LinkId=89450).</span><span class="sxs-lookup"><span data-stu-id="b9ac3-106">For more information about Windows service applications, see [Windows Service Applications](http://go.microsoft.com/fwlink/?LinkId=89450).</span></span>  
  
 <span data-ttu-id="b9ac3-107">Aplikace, které jsou hostiteli dlouho běžící [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] služby sdílejí mnoho vlastností službou systému Windows.</span><span class="sxs-lookup"><span data-stu-id="b9ac3-107">Applications that host long-running [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] services share many characteristics with Windows services.</span></span> <span data-ttu-id="b9ac3-108">Konkrétně [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] služby jsou dlouho běžící spustitelné soubory serveru, které není komunikovat přímo s uživatelem a proto neimplementují jakoukoli formu uživatelské rozhraní.</span><span class="sxs-lookup"><span data-stu-id="b9ac3-108">In particular, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services are long-running server executables that do not interact directly with the user and therefore do not implement any form of user interface.</span></span> <span data-ttu-id="b9ac3-109">Jako takový, který je hostitelem [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] služby v rámci aplikace služby systému Windows je jednou z možností pro vytvoření robustní, dlouhotrvajících, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] aplikace.</span><span class="sxs-lookup"><span data-stu-id="b9ac3-109">As such, hosting [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services inside of a Windows service application is one option for building robust, long-running, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] applications.</span></span>  
  
 <span data-ttu-id="b9ac3-110">Často [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] vývojáři rozhodnout, zda hostitel jejich [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] aplikace v rámci aplikace služby systému Windows nebo v rámci Internetové informační služby (IIS) nebo služby Aktivace procesů systému Windows (WAS) hostitelské prostředí.</span><span class="sxs-lookup"><span data-stu-id="b9ac3-110">Often, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] developers must decide whether to host their [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] application inside of a Windows service application or inside of the Internet Information Services (IIS) or Windows Process Activation Service (WAS) hosting environment.</span></span> <span data-ttu-id="b9ac3-111">Měli byste zvážit použití aplikace služby systému Windows za následujících podmínek:</span><span class="sxs-lookup"><span data-stu-id="b9ac3-111">You should consider using Windows service applications under the following conditions:</span></span>  
  
-   <span data-ttu-id="b9ac3-112">Vaše aplikace vyžaduje explicitní aktivace.</span><span class="sxs-lookup"><span data-stu-id="b9ac3-112">Your application requires explicit activation.</span></span> <span data-ttu-id="b9ac3-113">Například byste měli používat služby systému Windows, když vaše aplikace musíte spustit automaticky při spuštění serveru místo dynamicky spuštění v reakci na první příchozí zprávu.</span><span class="sxs-lookup"><span data-stu-id="b9ac3-113">For example, you should use Windows services when your application must start automatically when the server starts instead of being dynamically started in response to the first incoming message.</span></span>  
  
-   <span data-ttu-id="b9ac3-114">Proces, který je hostitelem vaší aplikace musí zůstat spuštěné jednou spustit.</span><span class="sxs-lookup"><span data-stu-id="b9ac3-114">The process that hosts your application must remain running once started.</span></span> <span data-ttu-id="b9ac3-115">Po spuštění procesu služby systému Windows zůstane spuštěný, pokud není výslovně vypnutí dolů správce serveru pomocí Správce řízení služeb.</span><span class="sxs-lookup"><span data-stu-id="b9ac3-115">Once started, a Windows service process remains running unless explicitly shut down by a server administrator using the service control manager.</span></span> <span data-ttu-id="b9ac3-116">Aplikace hostované ve službě IIS nebo WAS může být spuštění a zastavení dynamicky optimální využití systémových prostředků.</span><span class="sxs-lookup"><span data-stu-id="b9ac3-116">Applications hosted in IIS or WAS may be started and stopped dynamically to make optimal use of system resources.</span></span> <span data-ttu-id="b9ac3-117">Aplikace, které vyžadují explicitní kontrolu nad životnost jejich hostitelského procesu použijte místo služby IIS nebo WAS služby systému Windows.</span><span class="sxs-lookup"><span data-stu-id="b9ac3-117">Applications that require explicit control over the lifetime of their hosting process should use Windows services instead of IIS or WAS.</span></span>  
  
-   <span data-ttu-id="b9ac3-118">Vaše [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] služby musíte spustit na Windows Server 2003 a použít přenosy než HTTP.</span><span class="sxs-lookup"><span data-stu-id="b9ac3-118">Your [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] service must run on Windows Server 2003 and use transports other than HTTP.</span></span> <span data-ttu-id="b9ac3-119">V systému Windows Server 2003 [!INCLUDE[iis601](../../../../includes/iis601-md.md)] hostování prostředí je omezen na pouze komunikaci pomocí protokolu HTTP.</span><span class="sxs-lookup"><span data-stu-id="b9ac3-119">On Windows Server 2003, the [!INCLUDE[iis601](../../../../includes/iis601-md.md)] hosting environment is restricted to HTTP communication only.</span></span> <span data-ttu-id="b9ac3-120">Aplikace služby systému Windows toto omezení se nevztahuje a můžete použít všechny přenosu [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] podporuje, včetně net.tcp, net.pipe a net.msmq.</span><span class="sxs-lookup"><span data-stu-id="b9ac3-120">Windows service applications are not subject to this restriction and can use any transport [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] supports, including net.tcp, net.pipe, and net.msmq.</span></span>  
  
### <a name="to-host-wcf-inside-of-a-windows-service-application"></a><span data-ttu-id="b9ac3-121">K hostování WCF v rámci aplikace služby systému Windows</span><span class="sxs-lookup"><span data-stu-id="b9ac3-121">To host WCF inside of a Windows service application</span></span>  
  
1.  <span data-ttu-id="b9ac3-122">Vytvoření aplikace služby systému Windows.</span><span class="sxs-lookup"><span data-stu-id="b9ac3-122">Create a Windows service application.</span></span> <span data-ttu-id="b9ac3-123">Aplikace služby systému Windows může zapisovat do spravovaného kódu pomocí třídy v <xref:System.ServiceProcess> oboru názvů.</span><span class="sxs-lookup"><span data-stu-id="b9ac3-123">You can write Windows service applications in managed code using the classes in the <xref:System.ServiceProcess> namespace.</span></span> <span data-ttu-id="b9ac3-124">Tato aplikace musí obsahovat jednu třídu, která dědí z <xref:System.ServiceProcess.ServiceBase>.</span><span class="sxs-lookup"><span data-stu-id="b9ac3-124">This application must include one class that inherits from <xref:System.ServiceProcess.ServiceBase>.</span></span>  
  
2.  <span data-ttu-id="b9ac3-125">Odkaz životnost [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] aplikace služby služeb životnost systému Windows.</span><span class="sxs-lookup"><span data-stu-id="b9ac3-125">Link the lifetime of the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services to the lifetime of the Windows service application.</span></span> <span data-ttu-id="b9ac3-126">Obvykle je vhodné [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] služby hostované v aplikaci služby pro Windows stane aktivním při spuštění hostování služby, zastavení, naslouchá pro zprávy při zastavení služby hostování a vypnutí, který je hostitelem při zpracování [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Služba dojde k chybě.</span><span class="sxs-lookup"><span data-stu-id="b9ac3-126">Typically, you want [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services hosted in a Windows service application to become active when the hosting service starts, stop listening for messages when the hosting service is stopped, and shut down the hosting process when the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] service encounters an error.</span></span> <span data-ttu-id="b9ac3-127">To lze provést následujícím způsobem:</span><span class="sxs-lookup"><span data-stu-id="b9ac3-127">This can be accomplished as follows:</span></span>  
  
    -   <span data-ttu-id="b9ac3-128">Přepsání <xref:System.ServiceProcess.ServiceBase.OnStart%28System.String%5B%5D%29> otevřete jednu nebo více instancí <xref:System.ServiceModel.ServiceHost>.</span><span class="sxs-lookup"><span data-stu-id="b9ac3-128">Override <xref:System.ServiceProcess.ServiceBase.OnStart%28System.String%5B%5D%29> to open one or more instances of <xref:System.ServiceModel.ServiceHost>.</span></span> <span data-ttu-id="b9ac3-129">Jeden aplikace služby systému Windows může být hostitelem více [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] služby, které spuštění a zastavení jako skupina.</span><span class="sxs-lookup"><span data-stu-id="b9ac3-129">A single Windows service application can host multiple [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services that start and stop as a group.</span></span>  
  
    -   <span data-ttu-id="b9ac3-130">Přepsání <xref:System.ServiceProcess.ServiceBase.OnStop%2A> volat <xref:System.ServiceModel.Channels.CommunicationObject.Closed> na <xref:System.ServiceModel.ServiceHost> žádné spuštěná [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] služby, které byly spuštěny při <xref:System.ServiceProcess.ServiceBase.OnStart%28System.String%5B%5D%29>.</span><span class="sxs-lookup"><span data-stu-id="b9ac3-130">Override <xref:System.ServiceProcess.ServiceBase.OnStop%2A> to call <xref:System.ServiceModel.Channels.CommunicationObject.Closed> on the <xref:System.ServiceModel.ServiceHost> any running [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services that were started during <xref:System.ServiceProcess.ServiceBase.OnStart%28System.String%5B%5D%29>.</span></span>  
  
    -   <span data-ttu-id="b9ac3-131">Přihlášení k odběru <xref:System.ServiceModel.Channels.CommunicationObject.Faulted> události <xref:System.ServiceModel.ServiceHost> a použít <xref:System.ServiceProcess.ServiceController> třída vypnout aplikaci služby pro Windows v případě chyby.</span><span class="sxs-lookup"><span data-stu-id="b9ac3-131">Subscribe to the <xref:System.ServiceModel.Channels.CommunicationObject.Faulted> event of <xref:System.ServiceModel.ServiceHost> and use the <xref:System.ServiceProcess.ServiceController> class to shut down the Windows service application in case of error.</span></span>  
  
     <span data-ttu-id="b9ac3-132">Windows aplikace služeb, které hostují [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] služby jsou nasadit a spravovat stejným způsobem jako aplikace služby systému Windows, které neprovádějte použití [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)].</span><span class="sxs-lookup"><span data-stu-id="b9ac3-132">Windows service applications that host [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services are deployed and managed in the same way as Windows service applications that do not make use of [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)].</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="b9ac3-133">Viz také</span><span class="sxs-lookup"><span data-stu-id="b9ac3-133">See Also</span></span>  
 <xref:System.ServiceProcess>  
 [<span data-ttu-id="b9ac3-134">Návod: Vytvoření aplikace služby systému Windows v návrháři součástí</span><span class="sxs-lookup"><span data-stu-id="b9ac3-134">Walkthrough: Creating a Windows Service Application in the Component Designer</span></span>](http://go.microsoft.com/fwlink/?LinkId=94875)  
 [<span data-ttu-id="b9ac3-135">Postupy: Hostování služby WCF ve spravované službě Windows</span><span class="sxs-lookup"><span data-stu-id="b9ac3-135">How to: Host a WCF Service in a Managed Windows Service</span></span>](../../../../docs/framework/wcf/feature-details/how-to-host-a-wcf-service-in-a-managed-windows-service.md)  
 [<span data-ttu-id="b9ac3-136">Hostitel služby Windows</span><span class="sxs-lookup"><span data-stu-id="b9ac3-136">Windows Service Host</span></span>](../../../../docs/framework/wcf/samples/windows-service-host.md)  
 [<span data-ttu-id="b9ac3-137">Architektura programování aplikace služby</span><span class="sxs-lookup"><span data-stu-id="b9ac3-137">Service Application Programming Architecture</span></span>](http://go.microsoft.com/fwlink/?LinkId=94876)  
 [<span data-ttu-id="b9ac3-138">Hostování funkcí systému Windows Server App Fabric</span><span class="sxs-lookup"><span data-stu-id="b9ac3-138">Windows Server App Fabric Hosting Features</span></span>](http://go.microsoft.com/fwlink/?LinkId=201276)
