---
title: "Práce s certifikáty"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
dev_langs:
- csharp
- vb
helpviewer_keywords: certificates [WCF]
ms.assetid: 6ffb8682-8f07-4a45-afbb-8d2487e9dbc3
caps.latest.revision: "26"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.openlocfilehash: 63f9d22c571a007653fc794dc7638c8221a676aa
ms.sourcegitcommit: ce279f2d7fe2220e6ea0a25a8a7a5370ddf8d9f0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 12/02/2017
---
# <a name="working-with-certificates"></a><span data-ttu-id="e7ab8-102">Práce s certifikáty</span><span class="sxs-lookup"><span data-stu-id="e7ab8-102">Working with Certificates</span></span>
<span data-ttu-id="e7ab8-103">Programu [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] zabezpečení, digitální certifikáty X.509 jsou běžně používá k ověření klientů a serverů, šifrování a digitálnímu podepisování zpráv.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-103">To program [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] security, X.509 digital certificates are commonly used to authenticate clients and servers, encrypt, and digitally sign messages.</span></span> <span data-ttu-id="e7ab8-104">Toto téma vysvětluje stručně funkce digitální certifikát X.509 a jejich v použití [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]a obsahuje odkazy na témata, která popisují tyto další koncepty nebo která ukazují, jak provádět běžné úlohy pomocí [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] a certifikáty.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-104">This topic briefly explains X.509 digital certificate features and how to use them in [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)], and includes links to topics that explain these concepts further or that show how to accomplish common tasks using [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] and certificates.</span></span>  
  
 <span data-ttu-id="e7ab8-105">Stručně řečeno, digitální certifikát je součástí *infrastruktury veřejných klíčů* (PKI), který je systém digitální certifikáty, certifikačních autorit a dalších registračním autoritám, které k ověřování platnosti každé strany zúčastněné v elektronické transakce pomocí kryptografie využívající veřejného klíče.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-105">In brief, a digital certificate is a part of a *public key infrastructure* (PKI), which is a system of digital certificates, certificate authorities, and other registration authorities that verify and authenticate the validity of each party involved in an electronic transaction through the use of public key cryptography.</span></span> <span data-ttu-id="e7ab8-106">Certifikační autorita vydává certifikáty a každý certifikát má sadu pole, které obsahují data, jako například *subjektu* (entit, ke kterému je certifikát vystavený), data platnosti (Pokud je certifikát platný), vystavitele (na Entita, která vydala certifikát) a veřejný klíč.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-106">A certification authority issues certificates and each certificate has a set of fields that contain data, such as *subject* (the entity to which the certificate is issued), validity dates (when the certificate is valid), issuer (the entity that issued the certificate), and a public key.</span></span> <span data-ttu-id="e7ab8-107">V [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)], každý z těchto vlastností zpracovávány jako <xref:System.IdentityModel.Claims.Claim>, a jednotlivých deklarací identity se dále dělí do dvou typů: identity a doprava.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-107">In [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)], each of these properties is processed as a <xref:System.IdentityModel.Claims.Claim>, and each claim is further divided into two types: identity and right.</span></span> [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="e7ab8-108">Certifikáty X.509 [veřejný klíč certifikáty X.509](http://go.microsoft.com/fwlink/?LinkId=209952) [!INCLUDE[crabout](../../../../includes/crabout-md.md)] deklarace identity a autorizace ve WCF najdete v části [správa deklarací a autorizace s modelem Identity](../../../../docs/framework/wcf/feature-details/managing-claims-and-authorization-with-the-identity-model.md).</span><span class="sxs-lookup"><span data-stu-id="e7ab8-108"> X.509 certificates see [X.509 Public Key Certificates](http://go.microsoft.com/fwlink/?LinkId=209952)[!INCLUDE[crabout](../../../../includes/crabout-md.md)] Claims and Authorization in WCF see [Managing Claims and Authorization with the Identity Model](../../../../docs/framework/wcf/feature-details/managing-claims-and-authorization-with-the-identity-model.md).</span></span> [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="e7ab8-109">implementace infrastruktury veřejných KLÍČŮ, najdete v části [Windows Server 2008 R2 - Certificate Services](http://go.microsoft.com/fwlink/?LinkId=209949).</span><span class="sxs-lookup"><span data-stu-id="e7ab8-109"> implementing a PKI, see [Windows Server 2008 R2 - Certificate Services](http://go.microsoft.com/fwlink/?LinkId=209949).</span></span>  
  
 <span data-ttu-id="e7ab8-110">Primární funkce certifikátu je ověřovat identitu vlastníka certifikátu ostatním uživatelům.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-110">A primary function of the certificate is to authenticate the identity of the owner of the certificate to others.</span></span> <span data-ttu-id="e7ab8-111">Obsahuje certifikát *veřejný klíč* vlastníka, zatímco vlastník uchovává privátní klíč.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-111">A certificate contains the *public key* of the owner, while the owner retains the private key.</span></span> <span data-ttu-id="e7ab8-112">Veřejný klíč slouží k šifrování zpráv posílaných vlastník certifikátu.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-112">The public key can be used to encrypt messages sent to the owner of the certificate.</span></span> <span data-ttu-id="e7ab8-113">Pouze vlastník má přístup k privátnímu klíči, takže pouze vlastník může dešifrovat tyto zprávy.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-113">Only the owner has access to the private key, so only the owner can decrypt those messages.</span></span>  
  
 <span data-ttu-id="e7ab8-114">Certifikáty musí být vydaný certifikační autoritou, což se často stává třetích stran vystavitelů certifikátů.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-114">Certificates must be issued by a certification authority, which is often a third-party  issuer of certificates.</span></span> <span data-ttu-id="e7ab8-115">V doméně systému Windows, je součástí certifikační autority, slouží k vydávání certifikátů pro počítače v doméně.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-115">On a Windows domain, a certification authority is included that can be used to issue certificates to computers on the domain.</span></span>  
  
## <a name="viewing-certificates"></a><span data-ttu-id="e7ab8-116">Zobrazení certifikátů</span><span class="sxs-lookup"><span data-stu-id="e7ab8-116">Viewing Certificates</span></span>  
 <span data-ttu-id="e7ab8-117">Pro práci s certifikáty, je často potřeba zobrazit a zkontrolovat jejich vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-117">To work with certificates, it is often necessary to view them and examine their properties.</span></span> <span data-ttu-id="e7ab8-118">Snadno se provádí pomocí modulu snap-in nástroje Microsoft Management Console (MMC).</span><span class="sxs-lookup"><span data-stu-id="e7ab8-118">This is easily done with the Microsoft Management Console (MMC) snap-in tool.</span></span> [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)]<span data-ttu-id="e7ab8-119">[Postupy: zobrazení certifikátů pomocí modulu Snap-in konzoly MMC](../../../../docs/framework/wcf/feature-details/how-to-view-certificates-with-the-mmc-snap-in.md).</span><span class="sxs-lookup"><span data-stu-id="e7ab8-119"> [How to: View Certificates with the MMC Snap-in](../../../../docs/framework/wcf/feature-details/how-to-view-certificates-with-the-mmc-snap-in.md).</span></span>  
  
## <a name="certificate-stores"></a><span data-ttu-id="e7ab8-120">Úložiště certifikátů</span><span class="sxs-lookup"><span data-stu-id="e7ab8-120">Certificate Stores</span></span>  
 <span data-ttu-id="e7ab8-121">Certifikáty se nacházejí v úložištích.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-121">Certificates are found in stores.</span></span> <span data-ttu-id="e7ab8-122">Dva hlavní úložiště umístění zabývajících se dále dělí do dílčí úložiště.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-122">Two major store locations exist that are further divided into sub-stores.</span></span> <span data-ttu-id="e7ab8-123">Pokud jste správce v počítači, můžete zobrazit oba hlavní úložiště pomocí modulu snap-in nástroje konzoly MMC.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-123">If you are the administrator on a computer, you can view both major stores by using the MMC snap-in tool.</span></span> <span data-ttu-id="e7ab8-124">Všichni uživatelé můžete zobrazit pouze aktuální úložiště uživatele.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-124">Non-administrators can view only the current user store.</span></span>  
  
-   <span data-ttu-id="e7ab8-125">**Úložiště místního počítače**.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-125">**The local machine store**.</span></span> <span data-ttu-id="e7ab8-126">Tato položka obsahuje certifikáty přístup procesy, počítače, jako například [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)].</span><span class="sxs-lookup"><span data-stu-id="e7ab8-126">This contains the certificates accessed by machine processes, such as [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)].</span></span> <span data-ttu-id="e7ab8-127">Používá toto umístění pro uložení certifikáty, které ověření serveru vůči klientům.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-127">Use this location to store certificates that authenticate the server to clients.</span></span>  
  
-   <span data-ttu-id="e7ab8-128">**Úložiště aktuálního uživatele**.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-128">**The current user store**.</span></span> <span data-ttu-id="e7ab8-129">Interaktivní aplikace obvykle umístit certifikáty pro aktuálního uživatele počítače.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-129">Interactive applications typically place certificates here for the computer's current user.</span></span> <span data-ttu-id="e7ab8-130">Pokud vytváříte klientskou aplikaci, to je třeba obvykle umístit certifikáty, které ověření uživatele ke službě.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-130">If you are creating a client application, this is where you typically place certificates that authenticate a user to a service.</span></span>  
  
 <span data-ttu-id="e7ab8-131">Tyto dvě úložiště se dále dělí do dílčí úložiště.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-131">These two stores are further divided into sub-stores.</span></span> <span data-ttu-id="e7ab8-132">Nejvíce důležité tyto při programování s [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] zahrnují:</span><span class="sxs-lookup"><span data-stu-id="e7ab8-132">The most important of these when programming with [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] include:</span></span>  
  
-   <span data-ttu-id="e7ab8-133">**Důvěryhodné kořenové certifikační autority**.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-133">**Trusted Root Certification Authorities**.</span></span> <span data-ttu-id="e7ab8-134">Certifikáty v tomto úložišti vám pomůže vytvořit řetěz certifikátů, které lze sledovat zpět k certifikátu certifikačního úřadu v tomto úložišti.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-134">You can use the certificates in this store to create a chain of certificates, which can be traced back to a certification authority certificate in this store.</span></span>  
  
    > [!IMPORTANT]
    >  <span data-ttu-id="e7ab8-135">Místní počítač implicitně důvěřuje některý z certifikátů umístěny v tomto úložišti, i v případě, že certifikát nepochází od důvěryhodné certifikační autority.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-135">The local computer implicitly trusts any certificate placed in this store, even if the certificate does not come from a trusted third-party certification authority.</span></span> <span data-ttu-id="e7ab8-136">Z tohoto důvodu Neumísťujte některý z certifikátů do tohoto úložiště Pokud plně důvěřovat vystavitele a chápu důsledky.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-136">For this reason, do not place any certificate into this store unless you fully trust the issuer and understand the consequences.</span></span>  
  
-   <span data-ttu-id="e7ab8-137">**Osobní**.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-137">**Personal**.</span></span> <span data-ttu-id="e7ab8-138">Toto úložiště se používá pro certifikáty, které jsou přidružené uživateli počítače.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-138">This store is used for certificates associated with a user of a computer.</span></span> <span data-ttu-id="e7ab8-139">Toto úložiště se obvykle používá pro certifikáty vystavené pomocí jedné z certifikátů certifikační autority v úložišti důvěryhodných kořenových certifikačních autorit nalezen.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-139">Typically this store is used for certificates issued by one of the certification authority certificates found in the Trusted Root Certification Authorities store.</span></span> <span data-ttu-id="e7ab8-140">Certifikát je zde uveden Alternativně může samoobslužné vydané a důvěryhodná aplikace.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-140">Alternatively, a certificate found here may be self-issued and trusted by an application.</span></span>  
  
 [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="e7ab8-141">úložiště certifikátů najdete v tématu [úložiště certifikátů](http://go.microsoft.com/fwlink/?LinkId=88912).</span><span class="sxs-lookup"><span data-stu-id="e7ab8-141"> certificate stores, see [Certificate Stores](http://go.microsoft.com/fwlink/?LinkId=88912).</span></span>  
  
### <a name="selecting-a-store"></a><span data-ttu-id="e7ab8-142">Výběr úložiště</span><span class="sxs-lookup"><span data-stu-id="e7ab8-142">Selecting a Store</span></span>  
 <span data-ttu-id="e7ab8-143">Výběr umístění pro uložení certifikátu závisí, jak a kdy běží služba nebo klienta.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-143">Selecting where to store a certificate depends how and when the service or client runs.</span></span> <span data-ttu-id="e7ab8-144">Použít následující obecná pravidla:</span><span class="sxs-lookup"><span data-stu-id="e7ab8-144">The following general rules apply:</span></span>  
  
-   <span data-ttu-id="e7ab8-145">Pokud je služba WCF hostovaná k využívání služby systému Windows **místního počítače** uložit.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-145">If the WCF service is hosted in a Windows service use the **local machine** store.</span></span> <span data-ttu-id="e7ab8-146">Všimněte si, že jsou vyžadována oprávnění správce k instalaci certifikátů do úložiště místního počítače.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-146">Note that administrator privileges are required to install certificates into the local machine store.</span></span>  
  
-   <span data-ttu-id="e7ab8-147">Pokud se služba nebo klienta je aplikace, která běží pod účtem uživatele, použijte **aktuální uživatel** uložit.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-147">If the service or client is an application that runs under a user account, then use the **current user** store.</span></span>  
  
### <a name="accessing-stores"></a><span data-ttu-id="e7ab8-148">Přístup k úložiště</span><span class="sxs-lookup"><span data-stu-id="e7ab8-148">Accessing Stores</span></span>  
 <span data-ttu-id="e7ab8-149">Úložiště jsou chráněné pomocí seznamů řízení přístupu (ACL), stejně jako složky v počítači.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-149">Stores are protected by access control lists (ACLs), just like folders on a computer.</span></span> <span data-ttu-id="e7ab8-150">Při vytváření služby hostované pomocí Internetové informační služby (IIS), [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] proces běží pod [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] účtu.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-150">When creating a service hosted by Internet Information Services (IIS), the [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] process runs under the [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] account.</span></span> <span data-ttu-id="e7ab8-151">Služba se používá, musí mít účet přístup k úložišti, které obsahuje certifikáty.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-151">That account must have access to the store that contains the certificates a service uses.</span></span> <span data-ttu-id="e7ab8-152">Každou z hlavních úložiště je chráněný pomocí seznamu výchozí přístupu, ale mohou být upravena seznamy.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-152">Each of the major stores is protected with a default access list, but the lists can be modified.</span></span> <span data-ttu-id="e7ab8-153">Pokud vytvoříte samostatné role pro přístup úložišti, musí udělit oprávnění k této roli.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-153">If you create a separate role to access a store, you must grant that role access permission.</span></span> <span data-ttu-id="e7ab8-154">Další postupy k úpravě seznamu přístupu pomocí nástroje WinHttpCertConfig.exe najdete v tématu [postupy: vytvoření dočasné certifikáty pro použití při vývoji](../../../../docs/framework/wcf/feature-details/how-to-create-temporary-certificates-for-use-during-development.md).</span><span class="sxs-lookup"><span data-stu-id="e7ab8-154">To learn how to modify the access list using the WinHttpCertConfig.exe tool, see [How to: Create Temporary Certificates for Use During Development](../../../../docs/framework/wcf/feature-details/how-to-create-temporary-certificates-for-use-during-development.md).</span></span> [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="e7ab8-155">pomocí klientských certifikátů služby IIS, najdete v části [postup volání webové služby pomocí klientského certifikátu pro ověřování v aplikaci ASP.NET Web](http://go.microsoft.com/fwlink/?LinkId=88914).</span><span class="sxs-lookup"><span data-stu-id="e7ab8-155"> using client certificates with IIS, see [How to call a Web service by using a client certificate for authentication in an ASP.NET Web application](http://go.microsoft.com/fwlink/?LinkId=88914).</span></span>  
  
## <a name="chain-trust-and-certificate-authorities"></a><span data-ttu-id="e7ab8-156">Řetězec důvěryhodnosti a certifikačních autorit</span><span class="sxs-lookup"><span data-stu-id="e7ab8-156">Chain Trust and Certificate Authorities</span></span>  
 <span data-ttu-id="e7ab8-157">Certifikáty budou vytvořeny v hierarchii, kde je každý jednotlivý certifikát propojený certifikační autoritu, která certifikát vydala.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-157">Certificates are created in a hierarchy where each individual certificate is linked to the CA that issued the certificate.</span></span> <span data-ttu-id="e7ab8-158">Tento odkaz je certifikát Certifikační autority.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-158">This link is to the CA’s certificate.</span></span> <span data-ttu-id="e7ab8-159">Certifikát Certifikační autority a odkazy na certifikační Autoritu, která vydala certifikát originálu Certifikační autority.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-159">The CA’s certificate then links to the CA that issued the orginal CA’s certificate.</span></span> <span data-ttu-id="e7ab8-160">Tento proces se opakuje, dokud je dosaženo certifikát kořenové certifikační Autority.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-160">This process is repeated up until the Root CA’s certificate is reached.</span></span> <span data-ttu-id="e7ab8-161">Certifikát kořenové certifikační Autority je automaticky důvěryhodné.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-161">The Root CA’s certificate is inherently trusted.</span></span>  
  
 <span data-ttu-id="e7ab8-162">Digitální certifikáty se používají k ověřování entity podle tuto hierarchii, označované taky jako *řetěz certifikátů*.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-162">Digital certificates are used to authenticate an entity by relying this hierarchy, also called a *chain of trust*.</span></span> <span data-ttu-id="e7ab8-163">Můžete zobrazit řetěz všech certifikátů pomocí modulu snap-in konzoly MMC dvakrát klikněte na libovolný certifikát a potom klepnutím **cesta k certifikátu** kartě [!INCLUDE[crabout](../../../../includes/crabout-md.md)] import řetězů certifikátů pro certifikační autoritu, najdete v části [Postupy: Zadejte řetězu certifikátů certifikační autority používaného k ověřování podpisů](../../../../docs/framework/wcf/feature-details/specify-the-certificate-authority-chain-verify-signatures-wcf.md).</span><span class="sxs-lookup"><span data-stu-id="e7ab8-163">You can view any certificate's chain using the MMC snap-in by double-clicking any certificate, then clicking the **Certificate Path** tab. [!INCLUDE[crabout](../../../../includes/crabout-md.md)] importing certificate chains for a Certification authority, see [How to: Specify the Certificate Authority Certificate Chain Used to Verify Signatures](../../../../docs/framework/wcf/feature-details/specify-the-certificate-authority-chain-verify-signatures-wcf.md).</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="e7ab8-164">Všechny vystavitele lze označit umístěním vystavitele certifikátu do úložiště důvěryhodných kořenových certifikátů autority důvěryhodnou kořenovou autoritou.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-164">Any issuer can be designated a trusted root authority by placing the issuer's certificate in the trusted root authority certificate store.</span></span>  
  
### <a name="disabling-chain-trust"></a><span data-ttu-id="e7ab8-165">Zakázání řetěz důvěryhodnosti</span><span class="sxs-lookup"><span data-stu-id="e7ab8-165">Disabling Chain Trust</span></span>  
 <span data-ttu-id="e7ab8-166">Při vytváření nové služby, pravděpodobně používáte certifikát, který není vystavený důvěryhodný kořenový certifikát, nebo vlastní certifikát vydávající nemusí být v úložišti Důvěryhodné kořenové certifikační autority.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-166">When creating a new service, you may be using a certificate that is not issued by a trusted root certificate, or the issuing certificate itself may not be in the Trusted Root Certification Authorities store.</span></span> <span data-ttu-id="e7ab8-167">Pro účely vývoje lze dočasně zakázat mechanismus, který kontroluje řetěz certifikátů pro certifikát.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-167">For development purposes only, you can temporarily disable the mechanism that checks the chain of trust for a certificate.</span></span> <span data-ttu-id="e7ab8-168">Chcete-li to provést, nastavte `CertificateValidationMode` vlastnost, která má buď `PeerTrust` nebo `PeerOrChainTrust`.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-168">To do this, set the `CertificateValidationMode` property to either `PeerTrust` or `PeerOrChainTrust`.</span></span> <span data-ttu-id="e7ab8-169">Buď režimu určuje, že certifikát můžete buď samoobslužné vydat (peer vztahu důvěryhodnosti) nebo jeho část řetěz certifikátů.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-169">Either mode specifies that the certificate can either be self-issued (peer trust) or part of a chain of trust.</span></span> <span data-ttu-id="e7ab8-170">Vlastnost můžete nastavit na žádném z následujících tříd.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-170">You can set the property on any of the following classes.</span></span>  
  
|<span data-ttu-id="e7ab8-171">Třída</span><span class="sxs-lookup"><span data-stu-id="e7ab8-171">Class</span></span>|<span data-ttu-id="e7ab8-172">Vlastnost</span><span class="sxs-lookup"><span data-stu-id="e7ab8-172">Property</span></span>|  
|-----------|--------------|  
|<xref:System.ServiceModel.Security.X509ClientCertificateAuthentication>|<xref:System.ServiceModel.Security.X509ClientCertificateAuthentication.CertificateValidationMode%2A?displayProperty=nameWithType>|  
|<xref:System.ServiceModel.Security.X509PeerCertificateAuthentication>|<xref:System.ServiceModel.Security.X509PeerCertificateAuthentication.CertificateValidationMode%2A?displayProperty=nameWithType>|  
|<xref:System.ServiceModel.Security.X509ServiceCertificateAuthentication>|<xref:System.ServiceModel.Security.X509ServiceCertificateAuthentication.CertificateValidationMode%2A?displayProperty=nameWithType>|  
|<xref:System.ServiceModel.Security.IssuedTokenServiceCredential>|<xref:System.ServiceModel.Security.IssuedTokenServiceCredential.CertificateValidationMode%2A?displayProperty=nameWithType>|  
  
 <span data-ttu-id="e7ab8-173">Můžete také nastavit vlastnost pomocí konfigurace.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-173">You can also set the property using configuration.</span></span> <span data-ttu-id="e7ab8-174">K určení režimu ověřování se používají následující prvky:</span><span class="sxs-lookup"><span data-stu-id="e7ab8-174">The following elements are used to specify the validation mode:</span></span>  
  
-   [<span data-ttu-id="e7ab8-175">\<ověřování ></span><span class="sxs-lookup"><span data-stu-id="e7ab8-175">\<authentication></span></span>](../../../../docs/framework/configure-apps/file-schema/wcf/authentication-of-servicecertificate-element.md)  
  
-   [<span data-ttu-id="e7ab8-176">\<peerAuthentication ></span><span class="sxs-lookup"><span data-stu-id="e7ab8-176">\<peerAuthentication></span></span>](../../../../docs/framework/configure-apps/file-schema/wcf/peerauthentication-element.md)  
  
-   [<span data-ttu-id="e7ab8-177">\<messageSenderAuthentication ></span><span class="sxs-lookup"><span data-stu-id="e7ab8-177">\<messageSenderAuthentication></span></span>](../../../../docs/framework/configure-apps/file-schema/wcf/messagesenderauthentication-element.md)  
  
## <a name="custom-authentication"></a><span data-ttu-id="e7ab8-178">Vlastního ověřování</span><span class="sxs-lookup"><span data-stu-id="e7ab8-178">Custom Authentication</span></span>  
 <span data-ttu-id="e7ab8-179">`CertificateValidationMode` Vlastnost také umožňuje přizpůsobit, jak se ověřují certifikáty.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-179">The `CertificateValidationMode` property also enables you to customize how certificates are authenticated.</span></span> <span data-ttu-id="e7ab8-180">Ve výchozím nastavení je úroveň nastavena na `ChainTrust`.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-180">By default, the level is set to `ChainTrust`.</span></span> <span data-ttu-id="e7ab8-181">Použít <xref:System.ServiceModel.Security.X509CertificateValidationMode.Custom> hodnotu, je nutné také nastavit `CustomCertificateValidatorType` atribut sestavení a typ použitý k ověření certifikátu.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-181">To use the <xref:System.ServiceModel.Security.X509CertificateValidationMode.Custom> value, you must also set the `CustomCertificateValidatorType` attribute to an assembly and type used to validate the certificate.</span></span> <span data-ttu-id="e7ab8-182">Pokud chcete vytvořit vlastní validátor, musí dědit z abstraktní <xref:System.IdentityModel.Selectors.X509CertificateValidator> třídy.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-182">To create a custom validator, you must inherit from the abstract <xref:System.IdentityModel.Selectors.X509CertificateValidator> class.</span></span>  
  
 <span data-ttu-id="e7ab8-183">Při vytváření vlastní ověřovací, je nejdůležitější metodu pro přepsání <xref:System.IdentityModel.Selectors.X509CertificateValidator.Validate%2A> metoda.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-183">When creating a custom authenticator, the most important method to override is the <xref:System.IdentityModel.Selectors.X509CertificateValidator.Validate%2A> method.</span></span> <span data-ttu-id="e7ab8-184">Příklad vlastní ověřování, naleznete v části [validátor certifikátu X.509](../../../../docs/framework/wcf/samples/x-509-certificate-validator.md) ukázka.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-184">For an example of custom authentication, see the [X.509 Certificate Validator](../../../../docs/framework/wcf/samples/x-509-certificate-validator.md) sample.</span></span> [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)]<span data-ttu-id="e7ab8-185">[Vlastní pověření a ověřování pověření](../../../../docs/framework/wcf/extending/custom-credential-and-credential-validation.md).</span><span class="sxs-lookup"><span data-stu-id="e7ab8-185"> [Custom Credential and Credential Validation](../../../../docs/framework/wcf/extending/custom-credential-and-credential-validation.md).</span></span>  
  
## <a name="using-makecertexe-to-build-a-certificate-chain"></a><span data-ttu-id="e7ab8-186">Pomocí Makecert.exe vytvořit řetěz certifikátů</span><span class="sxs-lookup"><span data-stu-id="e7ab8-186">Using Makecert.exe to Build a Certificate Chain</span></span>  
 <span data-ttu-id="e7ab8-187">Nástroj pro vytvoření certifikátu (Makecert.exe) vytvoří certifikáty X.509 a privátní klíč a veřejného páry klíčů.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-187">The Certificate Creation Tool (Makecert.exe) creates X.509 certificates and private key/public key pairs.</span></span> <span data-ttu-id="e7ab8-188">Můžete uložit privátní klíč, aby na disku a použít ho k vystavování a podepsat nové certifikáty, proto simulaci hierarchie zřetězené certifikáty.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-188">You can save the private key to disk and then use it to issue and sign new certificates, thus simulating a hierarchy of chained certificates.</span></span> <span data-ttu-id="e7ab8-189">Nástroj je určen pro použití pouze jako pomocný při vývoji služeb a by měl být nikdy použit k vytvoření certifikátů, pro skutečné nasazení.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-189">The tool is intended for use only as an aid when developing services and should never be used to create certificates for actual deployment.</span></span> <span data-ttu-id="e7ab8-190">Při vývoji [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] služby, použijte následující postup k vytvoření řetěz s Makecert.exe.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-190">When developing an [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] service, use the following steps to build a chain of trust with Makecert.exe.</span></span>  
  
#### <a name="to-build-a-chain-of-trust-with-makecertexe"></a><span data-ttu-id="e7ab8-191">Chcete-li vytvořit řetěz vztah důvěryhodnosti s Makecert.exe</span><span class="sxs-lookup"><span data-stu-id="e7ab8-191">To build a chain of trust with Makecert.exe</span></span>  
  
1.  <span data-ttu-id="e7ab8-192">Vytvořte dočasný kořenové autority (certifikát podepsaný svým držitelem) pomocí nástroje MakeCert.exe.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-192">Create a temporary root authority (self-signed) certificate using the MakeCert.exe tool.</span></span> <span data-ttu-id="e7ab8-193">Privátní klíč uložte na disk.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-193">Save the private key to the disk.</span></span>  
  
2.  <span data-ttu-id="e7ab8-194">Použití nového certifikátu k vystavení dalšího certifikátu, který obsahuje veřejný klíč.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-194">Use the new certificate to issue another certificate that contains the public key.</span></span>  
  
3.  <span data-ttu-id="e7ab8-195">Importujte certifikát kořenové autority do úložiště důvěryhodných kořenových certifikačních autorit.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-195">Import the root authority certificate into the Trusted Root Certification Authorities store.</span></span>  
  
4.  <span data-ttu-id="e7ab8-196">Podrobné pokyny najdete v tématu [postupy: vytvoření dočasné certifikáty pro použití při vývoji](../../../../docs/framework/wcf/feature-details/how-to-create-temporary-certificates-for-use-during-development.md).</span><span class="sxs-lookup"><span data-stu-id="e7ab8-196">For step-by-step instructions, see [How to: Create Temporary Certificates for Use During Development](../../../../docs/framework/wcf/feature-details/how-to-create-temporary-certificates-for-use-during-development.md).</span></span>  
  
## <a name="which-certificate-to-use"></a><span data-ttu-id="e7ab8-197">Který certifikát má použít?</span><span class="sxs-lookup"><span data-stu-id="e7ab8-197">Which Certificate to Use?</span></span>  
 <span data-ttu-id="e7ab8-198">Časté otázky týkající se certifikátů jsou který certifikát má použít a proč.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-198">Common questions about certificates are which certificate to use, and why.</span></span> <span data-ttu-id="e7ab8-199">Odpověď závisí na tom, jestli jsou programování klienta nebo služby.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-199">The answer depends on whether you are programming a client or service.</span></span> <span data-ttu-id="e7ab8-200">Následující informace poskytuje obecných pokynů a není vyčerpávající odpověď na tyto otázky.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-200">The following information provides a general guideline and is not an exhaustive answer to these questions.</span></span>  
  
### <a name="service-certificates"></a><span data-ttu-id="e7ab8-201">Certifikáty služby</span><span class="sxs-lookup"><span data-stu-id="e7ab8-201">Service Certificates</span></span>  
 <span data-ttu-id="e7ab8-202">Certifikáty služby mít úlohu primární ověřování serveru vůči klientům.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-202">Service certificates have the primary task of authenticating the server to clients.</span></span> <span data-ttu-id="e7ab8-203">Jeden počáteční kontrol, když se klient ověřuje serveru je k porovnání hodnota **subjektu** pole k identifikátor URI (Uniform Resource) používá ke kontaktování služby: DNS i se musí shodovat.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-203">One of the initial checks when a client authenticates a server is to compare the value of the **Subject** field to the Uniform Resource Identifier (URI) used to contact the service: the DNS of both must match.</span></span> <span data-ttu-id="e7ab8-204">Například pokud je identifikátor URI služby "http://www.contoso.com/endpoint/" potom **subjektu** pole musí obsahovat také hodnotu "www.contoso.com".</span><span class="sxs-lookup"><span data-stu-id="e7ab8-204">For example, if the URI of the service is "http://www.contoso.com/endpoint/" then the **Subject** field must also contain the value "www.contoso.com".</span></span>  
  
 <span data-ttu-id="e7ab8-205">Všimněte si, že pole může obsahovat několik hodnot každou předponu inicializaci označení hodnoty.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-205">Note that the field can contain several values, each prefixed with an initialization to indicate the value.</span></span> <span data-ttu-id="e7ab8-206">Nejčastěji inicializace je "CN" pro běžný název, například "CN = www.contoso.com".</span><span class="sxs-lookup"><span data-stu-id="e7ab8-206">Most commonly, the initialization is "CN" for common name, for example, "CN = www.contoso.com".</span></span> <span data-ttu-id="e7ab8-207">Je také možné, **subjektu** pole jako pole prázdné, v takovém případě **alternativní název subjektu** pole může obsahovat **název DNS** hodnotu.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-207">It is also possible for the **Subject** field to be blank, in which case the **Subject Alternative Name** field can contain the **DNS Name** value.</span></span>  
  
 <span data-ttu-id="e7ab8-208">Všimněte si také hodnotu **zamýšlené účely** pole certifikátu by měla obsahovat odpovídající hodnotu, jako je například "Ověřování serveru" nebo "Ověření klienta".</span><span class="sxs-lookup"><span data-stu-id="e7ab8-208">Also note the value of the **Intended Purposes** field of the certificate should include an appropriate value, such as "Server Authentication" or "Client Authentication".</span></span>  
  
### <a name="client-certificates"></a><span data-ttu-id="e7ab8-209">Klientské certifikáty</span><span class="sxs-lookup"><span data-stu-id="e7ab8-209">Client Certificates</span></span>  
 <span data-ttu-id="e7ab8-210">Klientské certifikáty nejsou obvykle vystavované certifikační autority.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-210">Client certificates are not typically issued by a third-party certification authority.</span></span> <span data-ttu-id="e7ab8-211">Místo toho osobním úložišti aktuální umístění uživatele obvykle obsahuje certifikáty umísťují kořenovou autoritou, s zamýšlený účel "Ověření klienta".</span><span class="sxs-lookup"><span data-stu-id="e7ab8-211">Instead, the Personal store of the current user location typically contains certificates placed there by a root authority, with an intended purpose of "Client Authentication".</span></span> <span data-ttu-id="e7ab8-212">Klienta můžete použít tento certifikát, pokud se vyžaduje vzájemné ověření.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-212">The client can use such a certificate when mutual authentication is required.</span></span>  
  
## <a name="online-revocation-and-offline-revocation"></a><span data-ttu-id="e7ab8-213">Odvolání online a Offline odvolání</span><span class="sxs-lookup"><span data-stu-id="e7ab8-213">Online Revocation and Offline Revocation</span></span>  
  
### <a name="certificate-validity"></a><span data-ttu-id="e7ab8-214">Platnost certifikátu.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-214">Certificate Validity</span></span>  
 <span data-ttu-id="e7ab8-215">Každý certifikát je platný pouze pro danou dobu volat *období platnosti*.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-215">Every certificate is valid only for a given period of time, called the *validity period*.</span></span> <span data-ttu-id="e7ab8-216">Doba platnosti je definována **platné od** a **platné do** pole certifikátu X.509.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-216">The validity period is defined by the **Valid from** and **Valid to** fields of an X.509 certificate.</span></span> <span data-ttu-id="e7ab8-217">Při ověřování certifikátu se kontroluje k určení, zda je certifikát stále v období platnosti.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-217">During authentication, the certificate is checked to determine whether the certificate is still within the validity period.</span></span>  
  
### <a name="certificate-revocation-list"></a><span data-ttu-id="e7ab8-218">Seznam odvolaných certifikátů</span><span class="sxs-lookup"><span data-stu-id="e7ab8-218">Certificate Revocation List</span></span>  
 <span data-ttu-id="e7ab8-219">Kdykoli během doby platnosti certifikační autority můžete odvolat certifikát.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-219">At any time during the validity period, the certification authority can revoke a certificate.</span></span> <span data-ttu-id="e7ab8-220">Tato situace může nastat z mnoha důvodů, jako je například ohrožení privátní klíč certifikátu.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-220">This can occur for many reasons, such as a compromise of the private key of the certificate.</span></span>  
  
 <span data-ttu-id="e7ab8-221">V takovém případě všechny řetězy, které sestup z odvolaný certifikát jsou neplatné a během ověřování postupů nejsou důvěryhodné.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-221">When this occurs, any chains that descend from the revoked certificate are also invalid, and are not trusted during authentication procedures.</span></span> <span data-ttu-id="e7ab8-222">Pokud chcete zjistit, které certifikáty byly odvolány, každý Vystavitel publikuje, a čas a datum označením *seznam odvolaných certifikátů* (CRL).</span><span class="sxs-lookup"><span data-stu-id="e7ab8-222">To find out which certificates are revoked, each issuer publishes a time- and date-stamped *certificate revocation list* (CRL).</span></span> <span data-ttu-id="e7ab8-223">V seznamu můžete zkontrolovat pomocí nastavení odvolání online nebo offline odvolání `RevocationMode` nebo `DefaultRevocationMode` vlastnost na jednu z následujících tříd <xref:System.Security.Cryptography.X509Certificates.X509RevocationMode> hodnot výčtu: <xref:System.ServiceModel.Security.X509ClientCertificateAuthentication>, <xref:System.ServiceModel.Security.X509PeerCertificateAuthentication>, <xref:System.ServiceModel.Security.X509ServiceCertificateAuthentication> a <xref:System.ServiceModel.Security.IssuedTokenServiceCredential> třídy.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-223">The list can be checked using either online revocation or offline revocation by setting the `RevocationMode` or `DefaultRevocationMode` property of the following classes to one of the <xref:System.Security.Cryptography.X509Certificates.X509RevocationMode> enumeration values: <xref:System.ServiceModel.Security.X509ClientCertificateAuthentication>, <xref:System.ServiceModel.Security.X509PeerCertificateAuthentication>, <xref:System.ServiceModel.Security.X509ServiceCertificateAuthentication>, and the <xref:System.ServiceModel.Security.IssuedTokenServiceCredential> classes.</span></span> <span data-ttu-id="e7ab8-224">Výchozí hodnota pro všechny vlastnosti je `Online`.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-224">The default value for all properties is `Online`.</span></span>  
  
 <span data-ttu-id="e7ab8-225">Můžete také nastavit režim do konfigurace pomocí `revocationMode` atribut i [ \<ověřování >](../../../../docs/framework/configure-apps/file-schema/wcf/authentication-of-clientcertificate-element.md) (z [ \<serviceBehaviors >](../../../../docs/framework/configure-apps/file-schema/wcf/servicebehaviors.md)) a [ \<ověřování >](../../../../docs/framework/configure-apps/file-schema/wcf/authentication-of-clientcertificate-element.md) (z [ \<endpointBehaviors >](../../../../docs/framework/configure-apps/file-schema/wcf/endpointbehaviors.md)).</span><span class="sxs-lookup"><span data-stu-id="e7ab8-225">You can also set the mode in configuration using the `revocationMode` attribute of both the [\<authentication>](../../../../docs/framework/configure-apps/file-schema/wcf/authentication-of-clientcertificate-element.md) (of the [\<serviceBehaviors>](../../../../docs/framework/configure-apps/file-schema/wcf/servicebehaviors.md)) and the [\<authentication>](../../../../docs/framework/configure-apps/file-schema/wcf/authentication-of-clientcertificate-element.md) (of the [\<endpointBehaviors>](../../../../docs/framework/configure-apps/file-schema/wcf/endpointbehaviors.md)).</span></span>  
  
## <a name="the-setcertificate-method"></a><span data-ttu-id="e7ab8-226">Metoda SetCertificate</span><span class="sxs-lookup"><span data-stu-id="e7ab8-226">The SetCertificate Method</span></span>  
 <span data-ttu-id="e7ab8-227">V [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)], často musíte zadat certifikát nebo sada certifikáty služby, nebo je klient sloužící k ověření, šifrování nebo digitálně podepsat zprávu.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-227">In [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)], you must often specify a certificate or set of certificates a service or client is to use to authenticate, encrypt, or digitally sign a message.</span></span> <span data-ttu-id="e7ab8-228">To můžete provést programově pomocí `SetCertificate` metoda různých tříd, které představují certifikáty X.509.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-228">You can do this programmatically by using the `SetCertificate` method of various classes that represent X.509 certificates.</span></span> <span data-ttu-id="e7ab8-229">Následující třídy pomocí `SetCertificate` metoda k určení certifikátu.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-229">The following classes use the `SetCertificate` method to specify a certificate.</span></span>  
  
|<span data-ttu-id="e7ab8-230">Třída</span><span class="sxs-lookup"><span data-stu-id="e7ab8-230">Class</span></span>|<span data-ttu-id="e7ab8-231">Metoda</span><span class="sxs-lookup"><span data-stu-id="e7ab8-231">Method</span></span>|  
|-----------|------------|  
|<xref:System.ServiceModel.Security.PeerCredential>|<xref:System.ServiceModel.Security.PeerCredential.SetCertificate%2A>|  
|<xref:System.ServiceModel.Security.X509CertificateInitiatorClientCredential>|<xref:System.ServiceModel.Security.X509CertificateInitiatorClientCredential.SetCertificate%2A>|  
|<xref:System.ServiceModel.Security.X509CertificateRecipientServiceCredential>|<xref:System.ServiceModel.Security.X509CertificateRecipientServiceCredential.SetCertificate%2A>|  
|<xref:System.ServiceModel.Security.X509CertificateInitiatorServiceCredential>|  
|<xref:System.ServiceModel.Security.X509CertificateInitiatorServiceCredential.SetCertificate%2A>|  
  
 <span data-ttu-id="e7ab8-232">`SetCertificate` Metoda funguje tak, že určení umístění úložiště a úložiště, typu "najít" (`x509FindType` parametr) určující pole certifikátu a hodnotu k vyhledání v poli.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-232">The `SetCertificate` method works by designating a store location and store, a "find" type (`x509FindType` parameter) that specifies a field of the certificate, and a value to find in the field.</span></span> <span data-ttu-id="e7ab8-233">Například následující kód vytvoří <xref:System.ServiceModel.ServiceHost> instance a nastaví certifikát služby používaný k ověřování klientů `SetCertificate` metoda.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-233">For example, the following code creates a <xref:System.ServiceModel.ServiceHost> instance and sets the service certificate used to authenticate the service to clients with the `SetCertificate` method.</span></span>  
  
 [!code-csharp[c_WorkingWithCertificates#1](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_workingwithcertificates/cs/source.cs#1)]
 [!code-vb[c_WorkingWithCertificates#1](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_workingwithcertificates/vb/source.vb#1)]  
  
### <a name="multiple-certificates-with-the-same-value"></a><span data-ttu-id="e7ab8-234">Víc certifikátů se stejnou hodnotou</span><span class="sxs-lookup"><span data-stu-id="e7ab8-234">Multiple Certificates with the Same Value</span></span>  
 <span data-ttu-id="e7ab8-235">Úložiště může obsahovat víc certifikátů se stejným názvem subjektu.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-235">A store may contain multiple certificates with the same subject name.</span></span> <span data-ttu-id="e7ab8-236">To znamená, že pokud určíte `x509FindType` je <xref:System.Security.Cryptography.X509Certificates.X509FindType.FindBySubjectName> nebo <xref:System.Security.Cryptography.X509Certificates.X509FindType.FindBySubjectDistinguishedName>a více než jeden certifikát má stejnou hodnotu, je vyvolána výjimka becausethereisno způsob k rozlišení, který certifikát je vyžadován.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-236">This means that if you specify that the `x509FindType` is <xref:System.Security.Cryptography.X509Certificates.X509FindType.FindBySubjectName> or <xref:System.Security.Cryptography.X509Certificates.X509FindType.FindBySubjectDistinguishedName>, and more than one certificate has the same value, an exception is thrown becausethereisno way to distinguish which certificate is required.</span></span> <span data-ttu-id="e7ab8-237">To lze zmírnit nastavením `x509FindType` k <xref:System.Security.Cryptography.X509Certificates.X509FindType.FindByThumbprint>.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-237">You can mitigate this by setting the `x509FindType` to <xref:System.Security.Cryptography.X509Certificates.X509FindType.FindByThumbprint>.</span></span> <span data-ttu-id="e7ab8-238">Kryptografický otisk pole obsahuje jedinečnou hodnotu, která můžete použít k vyhledání konkrétní certifikát v úložišti.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-238">The thumbprint field contains a unique value that can be used to find a specific certificate in a store.</span></span> <span data-ttu-id="e7ab8-239">To má však vlastní nevýhodou: Pokud certifikát je odvolaný nebo obnovit, `SetCertificate` metoda nezdaří, protože je také pryč kryptografický otisk.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-239">However, this has its own disadvantage: if the certificate is revoked or renewed, the `SetCertificate` method fails because the thumbprint is also gone.</span></span> <span data-ttu-id="e7ab8-240">Nebo, pokud již není platný certifikát, se ověřování nezdaří.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-240">Or, if the certificate is no longer valid, authentication fails.</span></span> <span data-ttu-id="e7ab8-241">Způsob, jak toto riziko lze je nastavit `x590FindType` parametru <xref:System.Security.Cryptography.X509Certificates.X509FindType.FindByIssuerName> a zadejte název vystavitele.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-241">The way to mitigate this is to set the `x590FindType` parameter to <xref:System.Security.Cryptography.X509Certificates.X509FindType.FindByIssuerName> and specify the issuer's name.</span></span> <span data-ttu-id="e7ab8-242">Pokud je potřeba žádné konkrétní vystavitele, můžete také nastavit jednu z dalších <xref:System.Security.Cryptography.X509Certificates.X509FindType> hodnot výčtu, například <xref:System.Security.Cryptography.X509Certificates.X509FindType.FindByTimeValid>.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-242">If no particular issuer is required, you can also set one of the other <xref:System.Security.Cryptography.X509Certificates.X509FindType> enumeration values, such as <xref:System.Security.Cryptography.X509Certificates.X509FindType.FindByTimeValid>.</span></span>  
  
## <a name="certificates-in-configuration"></a><span data-ttu-id="e7ab8-243">Certifikáty v konfiguraci</span><span class="sxs-lookup"><span data-stu-id="e7ab8-243">Certificates in Configuration</span></span>  
 <span data-ttu-id="e7ab8-244">Certifikáty můžete vytvořit také pomocí konfigurace.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-244">You can also set certificates by using configuration.</span></span> <span data-ttu-id="e7ab8-245">Pokud vytváříte službu, v části jsou zadané přihlašovací údaje, včetně certifikátů, [ \<serviceBehaviors >](../../../../docs/framework/configure-apps/file-schema/wcf/servicebehaviors.md).</span><span class="sxs-lookup"><span data-stu-id="e7ab8-245">If you are creating a service, credentials, including certificates, are specified under the [\<serviceBehaviors>](../../../../docs/framework/configure-apps/file-schema/wcf/servicebehaviors.md).</span></span> <span data-ttu-id="e7ab8-246">Pokud programujete klienta, jsou v části zadat certifikátů [ \<endpointBehaviors >](../../../../docs/framework/configure-apps/file-schema/wcf/endpointbehaviors.md).</span><span class="sxs-lookup"><span data-stu-id="e7ab8-246">When you are programming a client, certificates are specified under the [\<endpointBehaviors>](../../../../docs/framework/configure-apps/file-schema/wcf/endpointbehaviors.md).</span></span>  
  
## <a name="mapping-a-certificate-to-a-user-account"></a><span data-ttu-id="e7ab8-247">Mapování certifikátu na uživatelský účet</span><span class="sxs-lookup"><span data-stu-id="e7ab8-247">Mapping a Certificate to a User Account</span></span>  
 <span data-ttu-id="e7ab8-248">Funkce služby IIS a služby Active Directory je možnost mapovat certifikát na uživatelský účet systému Windows.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-248">A feature of IIS and Active Directory is the ability to map a certificate to a Windows user account.</span></span> [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="e7ab8-249">Funkce, najdete v části [mapování certifikátů na uživatelské účty](http://go.microsoft.com/fwlink/?LinkId=88917).</span><span class="sxs-lookup"><span data-stu-id="e7ab8-249"> the feature, see [Map certificates to user accounts](http://go.microsoft.com/fwlink/?LinkId=88917).</span></span>  
  
 [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="e7ab8-250">pomocí služby Active Directory mapování, najdete v tématu [mapování klientských certifikátů pomocí mapování adresářových služeb](http://go.microsoft.com/fwlink/?LinkId=88918).</span><span class="sxs-lookup"><span data-stu-id="e7ab8-250"> using Active Directory mapping, see [Mapping Client Certificates with Directory Service Mapping](http://go.microsoft.com/fwlink/?LinkId=88918).</span></span>  
  
 <span data-ttu-id="e7ab8-251">Tato funkce povolená, můžete nastavit <xref:System.ServiceModel.Security.X509ClientCertificateAuthentication.MapClientCertificateToWindowsAccount%2A> vlastnost <xref:System.ServiceModel.Security.X509ClientCertificateAuthentication> třídy k `true`.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-251">With this capability enabled, you can set the <xref:System.ServiceModel.Security.X509ClientCertificateAuthentication.MapClientCertificateToWindowsAccount%2A> property of the <xref:System.ServiceModel.Security.X509ClientCertificateAuthentication> class to `true`.</span></span> <span data-ttu-id="e7ab8-252">V konfiguraci, můžete nastavit `mapClientCertificateToWindowsAccount` atribut [ \<ověřování >](../../../../docs/framework/configure-apps/file-schema/wcf/authentication-of-servicecertificate-element.md) element `true`, jak je znázorněno v následujícím kódu.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-252">In configuration, you can set the `mapClientCertificateToWindowsAccount` attribute of the [\<authentication>](../../../../docs/framework/configure-apps/file-schema/wcf/authentication-of-servicecertificate-element.md) element to `true`, as shown in the following code.</span></span>  
  
```xml  
<serviceBehaviors>  
 <behavior name="MappingBehavior">  
  <serviceCredentials>  
   <clientCertificate>  
    <authentication certificateValidationMode="None" mapClientCertificateToWindowsAccount="true" />  
   </clientCertificate>  
  </serviceCredentials>  
 </behavior>  
</serviceBehaviors>  
```  
  
 <span data-ttu-id="e7ab8-253">Mapování certifikátu X.509. certifikát na token, který představuje uživatelský účet systému Windows se považuje zvýšení úrovně oprávnění, protože po namapované, tokenu systému Windows lze použít k získání přístupu k chráněným prostředkům.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-253">Mapping an X.509 certificate to the token that represents a Windows user account is considered an elevation of privilege because, once mapped, the Windows token can be used to gain access to protected resources.</span></span> <span data-ttu-id="e7ab8-254">Proto zásada domény vyžaduje certifikát X.509 ke splnění svých zásad před mapování.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-254">Therefore, domain policy requires the X.509 certificate to comply with its policy prior to mapping.</span></span> <span data-ttu-id="e7ab8-255">*SChannel* balíček zabezpečení vynucuje tento požadavek.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-255">The *SChannel* security package enforces this requirement.</span></span>  
  
 <span data-ttu-id="e7ab8-256">Při použití [!INCLUDE[netfx35_long](../../../../includes/netfx35-long-md.md)] nebo novější, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] zajišťuje certifikátu odpovídá zásadám domény předtím, než je namapován na účet systému Windows.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-256">When using [!INCLUDE[netfx35_long](../../../../includes/netfx35-long-md.md)] or later, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] ensures the certificate conforms to domain policy before it is mapped to a Windows account.</span></span>  
  
 <span data-ttu-id="e7ab8-257">V první verzi [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)], mapování se provádí bez konzultace ohledně zásad domény.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-257">In the first release of [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)], mapping is done without consulting the domain policy.</span></span> <span data-ttu-id="e7ab8-258">Proto je možné, že starší aplikace, které používají k práci při spuštění v první verzi nepovede, pokud je povoleno mapování a certifikátu X.509 nesplňuje zásady domény.</span><span class="sxs-lookup"><span data-stu-id="e7ab8-258">Therefore it is possible that older applications that used to work when running under the first release, fails if the mapping is enabled and the X.509 certificate does not satisfy the domain policy.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="e7ab8-259">Viz také</span><span class="sxs-lookup"><span data-stu-id="e7ab8-259">See Also</span></span>  
 <xref:System.ServiceModel.Channels>  
 <xref:System.ServiceModel.Security>  
 <xref:System.ServiceModel>  
 <xref:System.Security.Cryptography.X509Certificates.X509FindType>  
 [<span data-ttu-id="e7ab8-260">Zabezpečení služeb a klientů</span><span class="sxs-lookup"><span data-stu-id="e7ab8-260">Securing Services and Clients</span></span>](../../../../docs/framework/wcf/feature-details/securing-services-and-clients.md)
