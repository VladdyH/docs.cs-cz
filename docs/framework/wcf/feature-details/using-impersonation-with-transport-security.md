---
title: Použití zosobnění se zabezpečením přenosu
ms.custom: ''
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: ''
ms.suite: ''
ms.technology:
- dotnet-clr
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 426df8cb-6337-4262-b2c0-b96c2edf21a9
caps.latest.revision: 12
author: BrucePerlerMS
ms.author: bruceper
manager: mbaldwin
ms.workload:
- dotnet
ms.openlocfilehash: d5610a107a198a3d8fd0517dca6ca7e2f4d22cbb
ms.sourcegitcommit: 94d33cadc5ff81d2ac389bf5f26422c227832052
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 04/30/2018
---
# <a name="using-impersonation-with-transport-security"></a><span data-ttu-id="bc865-102">Použití zosobnění se zabezpečením přenosu</span><span class="sxs-lookup"><span data-stu-id="bc865-102">Using Impersonation with Transport Security</span></span>
<span data-ttu-id="bc865-103">*Zosobnění* přístup je schopnost serverová aplikace na identitu klienta.</span><span class="sxs-lookup"><span data-stu-id="bc865-103">*Impersonation* is the ability of a server application to take on the identity of the client.</span></span> <span data-ttu-id="bc865-104">Je běžné pro služby použít zosobnění při ověření přístupu k prostředkům.</span><span class="sxs-lookup"><span data-stu-id="bc865-104">It is common for services to use impersonation when validating access to resources.</span></span> <span data-ttu-id="bc865-105">Aplikace bude spuštěna pomocí účtu služby, ale když server přijme připojení klienta, zosobňuje klienta tak, aby kontroly přístupu se provádí pomocí pověření klienta.</span><span class="sxs-lookup"><span data-stu-id="bc865-105">The server application runs using a service account, but when the server accepts a client connection, it impersonates the client so that access checks are performed using the client's credentials.</span></span> <span data-ttu-id="bc865-106">Zabezpečení přenosu je mechanizmus pro předávání přihlašovacích údajů a zabezpečení komunikace pomocí těchto přihlašovacích údajů.</span><span class="sxs-lookup"><span data-stu-id="bc865-106">Transport security is a mechanism both for passing credentials and securing communication using those credentials.</span></span> <span data-ttu-id="bc865-107">Toto téma popisuje pomocí zabezpečení přenosu v [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] s funkcí zosobnění.</span><span class="sxs-lookup"><span data-stu-id="bc865-107">This topic describes using transport security in [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] with the impersonation feature.</span></span> <span data-ttu-id="bc865-108">Další informace o zosobnění pomocí zabezpečení zpráv najdete v tématu [delegace a zosobnění](../../../../docs/framework/wcf/feature-details/delegation-and-impersonation-with-wcf.md).</span><span class="sxs-lookup"><span data-stu-id="bc865-108">For more information about impersonation using message security, see [Delegation and Impersonation](../../../../docs/framework/wcf/feature-details/delegation-and-impersonation-with-wcf.md).</span></span>  
  
## <a name="five-impersonation-levels"></a><span data-ttu-id="bc865-109">Pět úrovní zosobnění</span><span class="sxs-lookup"><span data-stu-id="bc865-109">Five Impersonation Levels</span></span>  
 <span data-ttu-id="bc865-110">Zabezpečení přenosu využívá pět úrovní zosobnění, jak je popsáno v následující tabulce.</span><span class="sxs-lookup"><span data-stu-id="bc865-110">Transport security makes use of five levels of impersonation, as described in the following table.</span></span>  
  
|<span data-ttu-id="bc865-111">Úroveň zosobnění</span><span class="sxs-lookup"><span data-stu-id="bc865-111">Impersonation level</span></span>|<span data-ttu-id="bc865-112">Popis</span><span class="sxs-lookup"><span data-stu-id="bc865-112">Description</span></span>|  
|-------------------------|-----------------|  
|<span data-ttu-id="bc865-113">Žádné</span><span class="sxs-lookup"><span data-stu-id="bc865-113">None</span></span>|<span data-ttu-id="bc865-114">Aplikace serveru nebude pokoušet o zosobnit klienta.</span><span class="sxs-lookup"><span data-stu-id="bc865-114">The server application does not attempt to impersonate the client.</span></span>|  
|<span data-ttu-id="bc865-115">Anonymní</span><span class="sxs-lookup"><span data-stu-id="bc865-115">Anonymous</span></span>|<span data-ttu-id="bc865-116">Aplikace serveru mohou provádět kontroly přístupu na pověření klienta, ale nepřijímá žádné informace o identitu klienta.</span><span class="sxs-lookup"><span data-stu-id="bc865-116">The server application can perform access checks against the client's credentials, but does not receive any information about the client's identity.</span></span> <span data-ttu-id="bc865-117">Tato úroveň zosobnění má smysl pouze pro komunikaci ve počítače, jako jsou pojmenované kanály.</span><span class="sxs-lookup"><span data-stu-id="bc865-117">This impersonation level is meaningful only for on-machine communication, such as named pipes.</span></span> <span data-ttu-id="bc865-118">Pomocí `Anonymous` s připojení ke vzdálené zvýší úroveň na úroveň zosobnění identifikace.</span><span class="sxs-lookup"><span data-stu-id="bc865-118">Using `Anonymous` with a remote connection promotes the impersonation level to Identify.</span></span>|  
|<span data-ttu-id="bc865-119">Identifikace</span><span class="sxs-lookup"><span data-stu-id="bc865-119">Identify</span></span>|<span data-ttu-id="bc865-120">Serverové aplikace zná identitu klienta a lze provést ověření přístupu na základě pověření klienta, ale nelze zosobnit klienta.</span><span class="sxs-lookup"><span data-stu-id="bc865-120">The server application knows the client's identity and can perform access validation against the client's credentials, but cannot impersonate the client.</span></span> <span data-ttu-id="bc865-121">Identifikovat je výchozí úroveň zosobnění použít s přihlašovacími údaji SSPI v [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Pokud zprostředkovatel tokenu poskytuje různé zosobnění úroveň.</span><span class="sxs-lookup"><span data-stu-id="bc865-121">Identify is the default impersonation level used with SSPI credentials in [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] unless the token provider provides a different impersonation level.</span></span>|  
|<span data-ttu-id="bc865-122">Impersonate</span><span class="sxs-lookup"><span data-stu-id="bc865-122">Impersonate</span></span>|<span data-ttu-id="bc865-123">Serverové aplikace můžete přístup k prostředkům na serveru, jako klient kromě provádění kontroly přístupu.</span><span class="sxs-lookup"><span data-stu-id="bc865-123">The server application can access resources on the server machine as the client in addition to performing access checks.</span></span> <span data-ttu-id="bc865-124">Aplikace serveru nemají přístup k prostředkům na vzdálených počítačích pomocí identity klienta, protože zosobněnou token nemá přihlašovací údaje k síti</span><span class="sxs-lookup"><span data-stu-id="bc865-124">The server application cannot access resources on remote machines using the client's identity because the impersonated token does not have network credentials</span></span>|  
|<span data-ttu-id="bc865-125">Delegát</span><span class="sxs-lookup"><span data-stu-id="bc865-125">Delegate</span></span>|<span data-ttu-id="bc865-126">Kromě nutnosti stejné schopnosti jako `Impersonate`, úroveň zosobnění delegát také umožňuje serveru aplikaci přístup k prostředkům na vzdálených počítačích pomocí identity klienta a předávat identity k ostatním aplikacím.</span><span class="sxs-lookup"><span data-stu-id="bc865-126">In addition to having the same capabilities as `Impersonate`, the Delegate impersonation level also enables the server application to access resources on remote machines using the client's identity and to pass the identity to other applications.</span></span><br /><br /> <span data-ttu-id="bc865-127">**Důležité** účet domény serveru musí být označen jako důvěryhodný pro delegování na řadič domény, který používá tyto další funkce.</span><span class="sxs-lookup"><span data-stu-id="bc865-127">**Important** The server domain account must be marked as trusted for delegation on the domain controller to use these additional features.</span></span> <span data-ttu-id="bc865-128">Tato úroveň zosobnění nelze použít s účty domény klienta označený jako důvěrné.</span><span class="sxs-lookup"><span data-stu-id="bc865-128">This level of impersonation cannot be used with client domain accounts marked as sensitive.</span></span>|  
  
 <span data-ttu-id="bc865-129">Úrovně nejčastěji používaná k zabezpečení přenosu jsou `Identify` a `Impersonate`.</span><span class="sxs-lookup"><span data-stu-id="bc865-129">The levels most commonly used with transport security are `Identify` and `Impersonate`.</span></span> <span data-ttu-id="bc865-130">Úrovně `None` a `Anonymous` typické vhodné používat, a mnoho přenosy nepodporují tyto úrovně pomocí ověřování.</span><span class="sxs-lookup"><span data-stu-id="bc865-130">The levels `None` and `Anonymous` are not recommended for typical use, and many transports do not support using those levels with authentication.</span></span> <span data-ttu-id="bc865-131">`Delegate` Úroveň je výkonné funkce, která by měla být používána opatrně.</span><span class="sxs-lookup"><span data-stu-id="bc865-131">The `Delegate` level is a powerful feature that should be used with care.</span></span> <span data-ttu-id="bc865-132">Jenom důvěryhodných serverů aplikace by měly mít oprávnění k delegování přihlašovacích údajů.</span><span class="sxs-lookup"><span data-stu-id="bc865-132">Only trusted server applications should be given the permission to delegate credentials.</span></span>  
  
 <span data-ttu-id="bc865-133">Použití zosobnění na `Impersonate` nebo `Delegate` úrovně vyžaduje server aplikací mít `SeImpersonatePrivilege` oprávnění.</span><span class="sxs-lookup"><span data-stu-id="bc865-133">Using impersonation at the `Impersonate` or `Delegate` levels requires the server application to have the `SeImpersonatePrivilege` privilege.</span></span> <span data-ttu-id="bc865-134">Pokud je spuštěn na účet členem skupiny Administrators nebo na účet s identifikátor SID Service (síťová služba, místní služba nebo Local System), má aplikace ve výchozím nastavení toto oprávnění.</span><span class="sxs-lookup"><span data-stu-id="bc865-134">An application has this privilege by default if it is running on an account in the Administrators group or on an account with a Service SID (Network Service, Local Service, or Local System).</span></span> <span data-ttu-id="bc865-135">Zosobnění nevyžaduje vzájemné ověřování klienta a serveru.</span><span class="sxs-lookup"><span data-stu-id="bc865-135">Impersonation does not require mutual authentication of the client and server.</span></span> <span data-ttu-id="bc865-136">Některé schémat ověřování, které podporují zosobnění, jako je například protokol NTLM, nelze použít vzájemné ověření.</span><span class="sxs-lookup"><span data-stu-id="bc865-136">Some authentication schemes that support impersonation, such as NTLM, cannot be used with mutual authentication.</span></span>  
  
## <a name="transport-specific-issues-with-impersonation"></a><span data-ttu-id="bc865-137">Přenos specifické problémy s zosobnění</span><span class="sxs-lookup"><span data-stu-id="bc865-137">Transport-Specific Issues with Impersonation</span></span>  
 <span data-ttu-id="bc865-138">Volba přenosu v [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] ovlivňuje možné volby pro zosobnění.</span><span class="sxs-lookup"><span data-stu-id="bc865-138">The choice of a transport in [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] affects the possible choices for impersonation.</span></span> <span data-ttu-id="bc865-139">Tato část popisuje problémy, které mají vliv na standardního protokolu HTTP a s názvem kanálu přenosy v [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)].</span><span class="sxs-lookup"><span data-stu-id="bc865-139">This section describes issues affecting the standard HTTP and named pipe transports in [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)].</span></span> <span data-ttu-id="bc865-140">Vlastní přenosy mají své vlastní omezení na podporu pro zosobnění.</span><span class="sxs-lookup"><span data-stu-id="bc865-140">Custom transports have their own restrictions on support for impersonation.</span></span>  
  
### <a name="named-pipe-transport"></a><span data-ttu-id="bc865-141">S názvem kanálu přenosu</span><span class="sxs-lookup"><span data-stu-id="bc865-141">Named Pipe Transport</span></span>  
 <span data-ttu-id="bc865-142">Následující položky se používají s přenos pojmenovaný kanál:</span><span class="sxs-lookup"><span data-stu-id="bc865-142">The following items are used with the named pipe transport:</span></span>  
  
-   <span data-ttu-id="bc865-143">Pojmenovaný kanál přenosu je určena pro použití pouze v místním počítači.</span><span class="sxs-lookup"><span data-stu-id="bc865-143">The named pipe transport is intended for use only on the local machine.</span></span> <span data-ttu-id="bc865-144">Pojmenovaný kanál přenosu v [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] explicitně zakáže připojení mezi počítači.</span><span class="sxs-lookup"><span data-stu-id="bc865-144">The named pipe transport in [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] explicitly disallows cross-machine connections.</span></span>  
  
-   <span data-ttu-id="bc865-145">Pojmenované kanály nelze použít s `Impersonate` nebo `Delegate` úroveň zosobnění.</span><span class="sxs-lookup"><span data-stu-id="bc865-145">Named pipes cannot be used with the `Impersonate` or `Delegate` impersonation level.</span></span> <span data-ttu-id="bc865-146">Pojmenovaný kanál nelze vynutit záruku na počítače v těchto úrovní zosobnění.</span><span class="sxs-lookup"><span data-stu-id="bc865-146">The named pipe cannot enforce the on-machine guarantee at these impersonation levels.</span></span>  
  
 <span data-ttu-id="bc865-147">Další informace o pojmenované kanály najdete v tématu [volba přenosu](../../../../docs/framework/wcf/feature-details/choosing-a-transport.md).</span><span class="sxs-lookup"><span data-stu-id="bc865-147">For more information about named pipes, see [Choosing a Transport](../../../../docs/framework/wcf/feature-details/choosing-a-transport.md).</span></span>  
  
### <a name="http-transport"></a><span data-ttu-id="bc865-148">Přenos HTTP</span><span class="sxs-lookup"><span data-stu-id="bc865-148">HTTP Transport</span></span>  
 <span data-ttu-id="bc865-149">Vazby, které používají přenos HTTP (<xref:System.ServiceModel.WSHttpBinding> a <xref:System.ServiceModel.BasicHttpBinding>) podporují několik schémat ověřování, jak je popsáno v [ověřování protokolu HTTP Principy](../../../../docs/framework/wcf/feature-details/understanding-http-authentication.md).</span><span class="sxs-lookup"><span data-stu-id="bc865-149">The bindings that use the HTTP transport (<xref:System.ServiceModel.WSHttpBinding> and <xref:System.ServiceModel.BasicHttpBinding>) support several authentication schemes, as explained in [Understanding HTTP Authentication](../../../../docs/framework/wcf/feature-details/understanding-http-authentication.md).</span></span> <span data-ttu-id="bc865-150">Zosobnění úroveň podporované závisí na schéma ověřování.</span><span class="sxs-lookup"><span data-stu-id="bc865-150">The impersonation level supported depends on the authentication scheme.</span></span> <span data-ttu-id="bc865-151">Následující položky se používají s přenos HTTP:</span><span class="sxs-lookup"><span data-stu-id="bc865-151">The following items are used with the HTTP transport:</span></span>  
  
-   <span data-ttu-id="bc865-152">`Anonymous` Schéma ověřování ignoruje zosobnění.</span><span class="sxs-lookup"><span data-stu-id="bc865-152">The `Anonymous` authentication scheme ignores impersonation.</span></span>  
  
-   <span data-ttu-id="bc865-153">`Basic` Schéma ověřování podporuje pouze `Delegate` úroveň.</span><span class="sxs-lookup"><span data-stu-id="bc865-153">The `Basic` authentication scheme supports only the `Delegate` level.</span></span> <span data-ttu-id="bc865-154">Upgradují všechny nižší úrovně zosobnění.</span><span class="sxs-lookup"><span data-stu-id="bc865-154">All lower impersonation levels are upgraded.</span></span>  
  
-   <span data-ttu-id="bc865-155">`Digest` Schéma ověřování podporuje pouze `Impersonate` a `Delegate` úrovně.</span><span class="sxs-lookup"><span data-stu-id="bc865-155">The `Digest` authentication scheme supports only the `Impersonate` and `Delegate` levels.</span></span>  
  
-   <span data-ttu-id="bc865-156">`NTLM` Schéma ověřování, které lze vybírat přímo nebo prostřednictvím vyjednávání, podporuje pouze `Delegate` úrovni v místním počítači.</span><span class="sxs-lookup"><span data-stu-id="bc865-156">The `NTLM` authentication scheme, selectable either directly or through negotiation, supports only the `Delegate` level on the local machine.</span></span>  
  
-   <span data-ttu-id="bc865-157">Schéma ověřování protokolu Kerberos, které lze vybrat pouze prostřednictvím vyjednávání, lze použít s libovolnou úroveň zosobnění podporované.</span><span class="sxs-lookup"><span data-stu-id="bc865-157">The Kerberos authentication scheme, which can only be selected through negotiation, can be used with any supported impersonation level.</span></span>  
  
 <span data-ttu-id="bc865-158">Další informace o přenos HTTP najdete v tématu [volba přenosu](../../../../docs/framework/wcf/feature-details/choosing-a-transport.md).</span><span class="sxs-lookup"><span data-stu-id="bc865-158">For more information about the HTTP transport, see [Choosing a Transport](../../../../docs/framework/wcf/feature-details/choosing-a-transport.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="bc865-159">Viz také</span><span class="sxs-lookup"><span data-stu-id="bc865-159">See Also</span></span>  
 [<span data-ttu-id="bc865-160">Delegace a zosobnění</span><span class="sxs-lookup"><span data-stu-id="bc865-160">Delegation and Impersonation</span></span>](../../../../docs/framework/wcf/feature-details/delegation-and-impersonation-with-wcf.md)  
 [<span data-ttu-id="bc865-161">Autorizace</span><span class="sxs-lookup"><span data-stu-id="bc865-161">Authorization</span></span>](../../../../docs/framework/wcf/feature-details/authorization-in-wcf.md)  
 [<span data-ttu-id="bc865-162">Postupy: Zosobnění klienta ve službě</span><span class="sxs-lookup"><span data-stu-id="bc865-162">How to: Impersonate a Client on a Service</span></span>](../../../../docs/framework/wcf/how-to-impersonate-a-client-on-a-service.md)  
 [<span data-ttu-id="bc865-163">Princip ověřování HTTP</span><span class="sxs-lookup"><span data-stu-id="bc865-163">Understanding HTTP Authentication</span></span>](../../../../docs/framework/wcf/feature-details/understanding-http-authentication.md)
