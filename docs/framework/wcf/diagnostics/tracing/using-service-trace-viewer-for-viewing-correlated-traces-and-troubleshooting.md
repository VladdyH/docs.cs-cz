---
title: Použití prohlížeče trasování služeb k zobrazení korelovaných tras a řešení problémů
ms.date: 03/30/2017
ms.assetid: 05d2321c-8acb-49d7-a6cd-8ef2220c6775
ms.openlocfilehash: cfa1ec0e486943d196ec016be87544f17a0114e6
ms.sourcegitcommit: 15109844229ade1c6449f48f3834db1b26907824
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 05/07/2018
---
# <a name="using-service-trace-viewer-for-viewing-correlated-traces-and-troubleshooting"></a><span data-ttu-id="90934-102">Použití prohlížeče trasování služeb k zobrazení korelovaných tras a řešení problémů</span><span class="sxs-lookup"><span data-stu-id="90934-102">Using Service Trace Viewer for Viewing Correlated Traces and Troubleshooting</span></span>
<span data-ttu-id="90934-103">Toto téma popisuje formát dat trasování, jak zobrazit a přístupy, které použití prohlížeče trasování služby problém s vaší aplikací.</span><span class="sxs-lookup"><span data-stu-id="90934-103">This topic describes the format of trace data, how to view it, and approaches that use the Service Trace Viewer to troubleshoot your application.</span></span>  
  
## <a name="using-the-service-trace-viewer-tool"></a><span data-ttu-id="90934-104">Pomocí nástroje prohlížeče trasování služby</span><span class="sxs-lookup"><span data-stu-id="90934-104">Using the Service Trace Viewer Tool</span></span>  
 <span data-ttu-id="90934-105">Nástroj prohlížeče trasování služeb Windows Communication Foundation (WCF) umožňuje korelovat diagnostické trasování vyprodukované naslouchací procesy WCF najít hlavní příčinu chyby.</span><span class="sxs-lookup"><span data-stu-id="90934-105">The Windows Communication Foundation (WCF) Service Trace Viewer tool helps you correlate diagnostic traces produced by WCF listeners to locate the root cause of an error.</span></span> <span data-ttu-id="90934-106">Tento nástroj poskytuje způsob, jak snadno zobrazit, skupiny a filtrovat trasování, aby mohli diagnostikovat, opravit a zkontrolujte problémy s služby WCF.</span><span class="sxs-lookup"><span data-stu-id="90934-106">The tool gives you a way to easily view, group, and filter traces so that you can diagnose, repair and verify issues with WCF services.</span></span> <span data-ttu-id="90934-107">Další informace o použití tohoto nástroje najdete v tématu [nástroj Prohlížeč trasování služeb (SvcTraceViewer.exe)](../../../../../docs/framework/wcf/service-trace-viewer-tool-svctraceviewer-exe.md).</span><span class="sxs-lookup"><span data-stu-id="90934-107">For more information about using this tool, see [Service Trace Viewer Tool (SvcTraceViewer.exe)](../../../../../docs/framework/wcf/service-trace-viewer-tool-svctraceviewer-exe.md).</span></span>  
  
 <span data-ttu-id="90934-108">Toto téma obsahuje snímky obrazovky trasování generované systémem [trasování a protokolování zpráv](../../../../../docs/framework/wcf/samples/tracing-and-message-logging.md) ukázkové, při zobrazení pomocí [nástroj Prohlížeč trasování služeb (SvcTraceViewer.exe)](../../../../../docs/framework/wcf/service-trace-viewer-tool-svctraceviewer-exe.md).</span><span class="sxs-lookup"><span data-stu-id="90934-108">This topic contains screenshots of traces generated by running the [Tracing and Message Logging](../../../../../docs/framework/wcf/samples/tracing-and-message-logging.md) sample, when viewed using the [Service Trace Viewer Tool (SvcTraceViewer.exe)](../../../../../docs/framework/wcf/service-trace-viewer-tool-svctraceviewer-exe.md).</span></span> <span data-ttu-id="90934-109">Toto téma ukazuje, jak pochopit obsah trasování, aktivity a jejich korelace a jak analyzovat velké počty trasování, při řešení potíží.</span><span class="sxs-lookup"><span data-stu-id="90934-109">This topic demonstrates how to understand trace content, activities and their correlation, and how to analyze large numbers of traces when troubleshooting.</span></span>  
  
## <a name="viewing-trace-content"></a><span data-ttu-id="90934-110">Obsah zobrazení trasování</span><span class="sxs-lookup"><span data-stu-id="90934-110">Viewing Trace Content</span></span>  
 <span data-ttu-id="90934-111">Trasování událostí obsahuje následující nejdůležitější informace:</span><span class="sxs-lookup"><span data-stu-id="90934-111">A trace event contains the following most significant information:</span></span>  
  
-   <span data-ttu-id="90934-112">Název aktivity Pokud nastavíte.</span><span class="sxs-lookup"><span data-stu-id="90934-112">Activity name when set.</span></span>  
  
-   <span data-ttu-id="90934-113">Emisí čas.</span><span class="sxs-lookup"><span data-stu-id="90934-113">Emission time.</span></span>  
  
-   <span data-ttu-id="90934-114">Úroveň trasování.</span><span class="sxs-lookup"><span data-stu-id="90934-114">Trace level.</span></span>  
  
-   <span data-ttu-id="90934-115">Název zdroje trasování.</span><span class="sxs-lookup"><span data-stu-id="90934-115">Trace source name.</span></span>  
  
-   <span data-ttu-id="90934-116">Název procesu.</span><span class="sxs-lookup"><span data-stu-id="90934-116">Process name.</span></span>  
  
-   <span data-ttu-id="90934-117">Id vlákna.</span><span class="sxs-lookup"><span data-stu-id="90934-117">Thread id.</span></span>  
  
-   <span data-ttu-id="90934-118">Trasování jedinečný identifikátor, který je adresu URL, která směřuje k cíli v Microsoft Docs, ze kterého můžete získat další informace o trasování.</span><span class="sxs-lookup"><span data-stu-id="90934-118">A unique trace identifier, which is a URL that points to a destination in Microsoft Docs, from which you can obtain more information related to the trace.</span></span>  
  
 <span data-ttu-id="90934-119">Všechny tyto se zobrazí v horním pravém panelu do prohlížeče trasování služeb nebo **základní informace** části v pravém panelu při výběru trasování formátovaný zobrazení.</span><span class="sxs-lookup"><span data-stu-id="90934-119">All of these can be seen in the upper right panel in the Service Trace Viewer, or in the **Basic Information** section in the formatted view of the lower-right panel when selecting a trace.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="90934-120">Pokud klienta a služby jsou na stejném počítači, trasování pro obě aplikace bude k dispozici.</span><span class="sxs-lookup"><span data-stu-id="90934-120">If the client and the service are on the same machine, the traces for both applications will be present.</span></span> <span data-ttu-id="90934-121">Ty lze filtrovat pomocí **název procesu** sloupce.</span><span class="sxs-lookup"><span data-stu-id="90934-121">These can be filtered using the **Process Name** column.</span></span>  
  
 <span data-ttu-id="90934-122">Kromě toho formátovaný zobrazení taky obsahuje popis pro trasování a další podrobné informace, pokud je k dispozici.</span><span class="sxs-lookup"><span data-stu-id="90934-122">In addition, the formatted view also provides a description for the trace and additional detailed information when available.</span></span> <span data-ttu-id="90934-123">K tomu může zahrnovat výjimka typu a zprávy, zásobníky volání zpráva akce, z/do pole a další informace o výjimce.</span><span class="sxs-lookup"><span data-stu-id="90934-123">The latter can include exception type and message, call stacks, message action, from/to fields, and other exception information.</span></span>  
  
 <span data-ttu-id="90934-124">V zobrazení XML značky xml užitečné patří:</span><span class="sxs-lookup"><span data-stu-id="90934-124">In the XML view, useful xml tags include the following:</span></span>  
  
-   <span data-ttu-id="90934-125">\<Podtyp > (úroveň trasování).</span><span class="sxs-lookup"><span data-stu-id="90934-125">\<SubType> (trace level).</span></span>  
  
-   <span data-ttu-id="90934-126">\<TimeCreated >.</span><span class="sxs-lookup"><span data-stu-id="90934-126">\<TimeCreated>.</span></span>  
  
-   <span data-ttu-id="90934-127">\<Zdroj > (název zdroje trasování).</span><span class="sxs-lookup"><span data-stu-id="90934-127">\<Source> (trace source name).</span></span>  
  
-   <span data-ttu-id="90934-128">\<Korelace > (id aktivity nastaven při generování trasování).</span><span class="sxs-lookup"><span data-stu-id="90934-128">\<Correlation> (activity id set when emitting the trace).</span></span>  
  
-   <span data-ttu-id="90934-129">\<Provádění > (id procesu a vlákno).</span><span class="sxs-lookup"><span data-stu-id="90934-129">\<Execution> (process and thread id).</span></span>  
  
-   <span data-ttu-id="90934-130">\<Počítače >.</span><span class="sxs-lookup"><span data-stu-id="90934-130">\<Computer>.</span></span>  
  
-   <span data-ttu-id="90934-131">\<ExtendedData >, včetně \<akce >, \<MessageID > a \<aktivity > nastaveny v hlavičce zprávy při odesílání zprávy.</span><span class="sxs-lookup"><span data-stu-id="90934-131">\<ExtendedData>, including \<Action>, \<MessageID> and the \<ActivityId> set in the message header when sending a message.</span></span>  
  
 <span data-ttu-id="90934-132">Pokud si projdete trasování "Odeslané zprávy přes kanál", může se zobrazit následující obsah.</span><span class="sxs-lookup"><span data-stu-id="90934-132">If you examine the "Sent a message over a channel" trace, you may see the following content.</span></span>  
  
```xml  
<E2ETraceEvent xmlns="http://schemas.microsoft.com/2004/06/E2ETraceEvent">  
   <System xmlns="http://schemas.microsoft.com/2004/06/windows/eventlog/system">  
      <EventID>262163</EventID>  
      <Type>3</Type>  
      <SubType Name="Information">0</SubType>  
      <Level>8</Level>  
      <TimeCreated SystemTime="2006-08-04T18:45:30.8491051Z" />  
      <Source Name="System.ServiceModel" />  
       <Correlation ActivityID="{27c6331d-8998-43aa-a382-03239013a6bd}"/>  
       <Execution ProcessName="client" ProcessID="1808" ThreadID="1" />  
       <Channel />  
       <Computer>TEST1</Computer>  
   </System>  
   <ApplicationData>  
       <TraceData>  
          <DataItem>  
             <TraceRecord xmlns="http://schemas.microsoft.com/2004/10/E2ETraceEvent/TraceRecord" Severity="Information">  
                 <TraceIdentifier>http://msdn.microsoft.com/library/System.ServiceModel.Channels.MessageSent.aspx</TraceIdentifier>  
                 <Description>Sent a message over a channel.</Description>  
                 <AppDomain>client.exe</AppDomain>  
                 <Source>System.ServiceModel.Channels.ClientFramingDuplexSessionChannel/35191196</Source>  
                <ExtendedData xmlns="http://schemas.microsoft.com/2006/08/ServiceModel/MessageTransmitTraceRecord">  
  
                  <MessageProperties>  
                     <AllowOutputBatching>False</AllowOutputBatching>  
                  </MessageProperties>  
                  <MessageHeaders>  
                     <Action d4p1:mustUnderstand="1" xmlns:d4p1="http://www.w3.org/2003/05/soap-envelope" xmlns="http://www.w3.org/2005/08/addressing">http://Microsoft.ServiceModel.Samples/ICalculator/Multiply</Action>  
                     <MessageID xmlns="http://www.w3.org/2005/08/addressing">urn:uuid:7c6670d8-4c9c-496e-b6a0-2ceb6db35338</MessageID>  
                     <ActivityId CorrelationId="b02e2189-0816-4387-980c-dd8e306440f5" xmlns="http://schemas.microsoft.com/2004/09/ServiceModel/Diagnostics">27c6331d-8998-43aa-a382-03239013a6bd</ActivityId>  
                     <ReplyTo xmlns="http://www.w3.org/2005/08/addressing">  
                        <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>  
                    </ReplyTo>  
                    <To d4p1:mustUnderstand="1" xmlns:d4p1="http://www.w3.org/2003/05/soap-envelope" xmlns="http://www.w3.org/2005/08/addressing">net.tcp://localhost/servicemodelsamples/service</To>  
                  </MessageHeaders>  
                  <RemoteAddress>net.tcp://localhost/servicemodelsamples/service</RemoteAddress>  
                </ExtendedData>  
            </TraceRecord>  
          </DataItem>  
       </TraceData>  
   </ApplicationData>  
</E2ETraceEvent>  
```  
  
## <a name="servicemodel-e2e-tracing"></a><span data-ttu-id="90934-133">Trasování ServiceModel E2E</span><span class="sxs-lookup"><span data-stu-id="90934-133">ServiceModel E2E Tracing</span></span>  
 <span data-ttu-id="90934-134">Když `System.ServiceModel` zdroj trasování nastavena `switchValue` jiné než vypnuté, a `ActivityTracing`, WCF vytvoří aktivity a přenosy pro zpracování WCF.</span><span class="sxs-lookup"><span data-stu-id="90934-134">When the `System.ServiceModel` trace source is set with a `switchValue` other than Off, and `ActivityTracing`, WCF creates activities and transfers for WCF processing.</span></span>  
  
 <span data-ttu-id="90934-135">Aktivita je logické jednotky, skupiny všech trasování související s touto jednotkou zpracování zpracování.</span><span class="sxs-lookup"><span data-stu-id="90934-135">An activity is a logical unit of processing that groups all traces related to that processing unit.</span></span> <span data-ttu-id="90934-136">Můžete například definovat jednu aktivitu pro každý požadavek.</span><span class="sxs-lookup"><span data-stu-id="90934-136">For example, you can define one activity for each request.</span></span> <span data-ttu-id="90934-137">Přenosy vytvořit příčinnou relaci mezi aktivitami v rámci koncové body.</span><span class="sxs-lookup"><span data-stu-id="90934-137">Transfers create a causal relationship between activities within endpoints.</span></span> <span data-ttu-id="90934-138">Šíření ID aktivity umožňuje aktivity se týkají napříč koncovými body.</span><span class="sxs-lookup"><span data-stu-id="90934-138">Propagating the activity ID enables you to relate activities across endpoints.</span></span> <span data-ttu-id="90934-139">To můžete provést nastavením `propagateActivity` = `true` v konfiguraci na každý koncový bod.</span><span class="sxs-lookup"><span data-stu-id="90934-139">This can be done by setting `propagateActivity`=`true` in configuration at every endpoint.</span></span> <span data-ttu-id="90934-140">Aktivity, přenosy a šíření umožňují provádět korelace chyby.</span><span class="sxs-lookup"><span data-stu-id="90934-140">Activities, transfers, and propagation allow you to perform error correlation.</span></span> <span data-ttu-id="90934-141">Tímto způsobem můžete najít hlavní příčinu chyby rychleji.</span><span class="sxs-lookup"><span data-stu-id="90934-141">In this way, you can find the root cause of an error more quickly.</span></span>  
  
 <span data-ttu-id="90934-142">Na straně klienta je vytvořena jedna aktivita WCF pro každé volání modelu objektu (například Open ChannelFactory, přidat, dělení a atd.) Každé volání operací se zpracovává aktivitu "Proces Action".</span><span class="sxs-lookup"><span data-stu-id="90934-142">On the client, one WCF activity is created for each object model call (for example, Open ChannelFactory, Add, Divide, and so on.) Each of the operation calls is processed in a "Process Action" activity.</span></span>  
  
 <span data-ttu-id="90934-143">Na následujícím snímku obrazovky z extrahovat [trasování a protokolování zpráv](../../../../../docs/framework/wcf/samples/tracing-and-message-logging.md) levém panelu ukázkové zobrazí seznam aktivity vytvořené v procesu klienta, seřazené podle času vytvoření.</span><span class="sxs-lookup"><span data-stu-id="90934-143">In the following screenshot, extracted from the [Tracing and Message Logging](../../../../../docs/framework/wcf/samples/tracing-and-message-logging.md) sample the left panel displays the list of activities created in the client process, sorted by creation time.</span></span> <span data-ttu-id="90934-144">Následuje seznam chronologickém aktivit:</span><span class="sxs-lookup"><span data-stu-id="90934-144">The following is a chronological list of activities:</span></span>  
  
-   <span data-ttu-id="90934-145">Sestavit kanálu (třídu ClientBase).</span><span class="sxs-lookup"><span data-stu-id="90934-145">Constructed the channel factory (ClientBase).</span></span>  
  
-   <span data-ttu-id="90934-146">Otevřít kanálu.</span><span class="sxs-lookup"><span data-stu-id="90934-146">Opened the channel factory.</span></span>  
  
-   <span data-ttu-id="90934-147">Zpracovat přidat akci.</span><span class="sxs-lookup"><span data-stu-id="90934-147">Processed the Add action.</span></span>  
  
-   <span data-ttu-id="90934-148">Nastavení relace Secure (Tato došlo k na první požadavek) a zpracovat tři zprávy odpovědi infrastruktury zabezpečení: RVNÍ RSTR, SCT (proces zprávy 1, 2, 3).</span><span class="sxs-lookup"><span data-stu-id="90934-148">Set up the Secure Session (this OCCURRED on the first request) and processed three security infrastructure response messages: RST, RSTR, SCT (Process message 1, 2, 3).</span></span>  
  
-   <span data-ttu-id="90934-149">Zpracování Subtract, násobit a dělení požadavky.</span><span class="sxs-lookup"><span data-stu-id="90934-149">Processed the Subtract, Multiply, and Divide requests.</span></span>  
  
-   <span data-ttu-id="90934-150">Uzavřený vytváření kanálů, a tak uzavřený zabezpečené relace a zpracuje odpověď na zprávu zabezpečení Storno.</span><span class="sxs-lookup"><span data-stu-id="90934-150">Closed the channel factory, and doing so closed the Secure session and processed the security message response Cancel.</span></span>  
  
 <span data-ttu-id="90934-151">Z důvodu wsHttpBinding vidíte zprávy infrastruktury zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="90934-151">We see the security infrastructure messages because of the wsHttpBinding.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="90934-152">Ve službě WCF, ukážeme odpovědí na zprávy původně zpracovávána v samostatnou aktivitě (proces zprávy) před jsme korelovat odpovídající akce proces aktivitě, která zahrnuje zprávu požadavku, prostřednictvím přenos.</span><span class="sxs-lookup"><span data-stu-id="90934-152">In WCF, we show response messages being processed initially in a separate activity (Process message) before we correlate them to the corresponding Process Action activity that includes the request message, through a transfer.</span></span> <span data-ttu-id="90934-153">To se stane pro zprávy infrastruktury a asynchronní požadavky a je vzhledem k tomu, že jsme musí zkontrolujte zprávy, čtení hlavičku aktivity a identifikovat existující aktivitu procesu akce s tímto id ke korelaci do ní.</span><span class="sxs-lookup"><span data-stu-id="90934-153">This happens for infrastructure messages and asynchronous requests and is due to the fact that we must inspect the message, read the activityId header, and identify the existing Process Action activity with that id to correlate to it.</span></span> <span data-ttu-id="90934-154">Synchronní požadavkům jsme blokují pro odpověď a proto vědět proces akci, která má vztah k odpovědi.</span><span class="sxs-lookup"><span data-stu-id="90934-154">For synchronous requests, we are blocking for the response and hence know which Process action the response relates to.</span></span>  
  
 <span data-ttu-id="90934-155">![Použití prohlížeče trasování](../../../../../docs/framework/wcf/diagnostics/tracing/media/e2etrace4.gif "e2eTrace4")</span><span class="sxs-lookup"><span data-stu-id="90934-155">![Using the Trace Viewer](../../../../../docs/framework/wcf/diagnostics/tracing/media/e2etrace4.gif "e2eTrace4")</span></span>  
<span data-ttu-id="90934-156">Činnosti klienta WCF uvedené podle času vytvoření (levém panelu) a jejich vnořených aktivit a trasování (horním pravém panelu)</span><span class="sxs-lookup"><span data-stu-id="90934-156">WCF client activities listed by creation time (left panel) and their nested activities and traces (upper right panel)</span></span>  
  
 <span data-ttu-id="90934-157">Když jsme v levém panelu vyberte aktivitu, jsme můžete zobrazit vnořených aktivit a trasování v horním pravém panelu.</span><span class="sxs-lookup"><span data-stu-id="90934-157">When we select an activity in the left panel, we can see nested activities and traces on the upper right panel.</span></span> <span data-ttu-id="90934-158">Proto je snížené hierarchické zobrazení seznamu aktivit na levé straně na základě vybrané nadřazené aktivity.</span><span class="sxs-lookup"><span data-stu-id="90934-158">Therefore, this is a reduced hierarchical view of the list of activities on the left, based on the selected parent activity.</span></span> <span data-ttu-id="90934-159">Vybraná akce procesu přidat je první požadavek, a proto tato aktivita obsahuje aktivitu nastavit až zabezpečené relace (přenos pro přenos zpět z) a trasování pro vlastní zpracování přidat akci.</span><span class="sxs-lookup"><span data-stu-id="90934-159">Because the selected Process action Add is the first request made, this activity contains the Set Up Secure Session activity (transfer to, transfer back from), and traces for the actual processing of the Add action.</span></span>  
  
 <span data-ttu-id="90934-160">Když dvakrát kliknete na akci procesu přidat aktivitu v levém panelu, vidíte grafické reprezentace klienta WCF aktivity související s přidat.</span><span class="sxs-lookup"><span data-stu-id="90934-160">If we double click the Process action Add activity in the left panel, we can see a graphical representation of the client WCF activities related to Add.</span></span> <span data-ttu-id="90934-161">První aktivitu na levé straně je aktivita kořenové (0000), což je výchozí aktivity.</span><span class="sxs-lookup"><span data-stu-id="90934-161">The first activity on the left is the root activity (0000), which is the default activity.</span></span> <span data-ttu-id="90934-162">WCF přenáší vedlejším aktivita.</span><span class="sxs-lookup"><span data-stu-id="90934-162">WCF transfers out of the ambient activity.</span></span> <span data-ttu-id="90934-163">Pokud to není definován, mimo 0000 přenáší WCF.</span><span class="sxs-lookup"><span data-stu-id="90934-163">If this is not defined, WCF transfers out of 0000.</span></span> <span data-ttu-id="90934-164">Druhá aktivita, proces přidat akci, zde přenáší mimo 0.</span><span class="sxs-lookup"><span data-stu-id="90934-164">Here, the second activity, Process Action Add, transfers out of 0.</span></span> <span data-ttu-id="90934-165">Potom jsme najdete v části instalace zabezpečené relace.</span><span class="sxs-lookup"><span data-stu-id="90934-165">Then we see Setup Secure Session.</span></span>  
  
 <span data-ttu-id="90934-166">![Použití prohlížeče trasování](../../../../../docs/framework/wcf/diagnostics/tracing/media/e2etrace5.gif "e2eTrace5")</span><span class="sxs-lookup"><span data-stu-id="90934-166">![Using the Trace Viewer](../../../../../docs/framework/wcf/diagnostics/tracing/media/e2etrace5.gif "e2eTrace5")</span></span>  
<span data-ttu-id="90934-167">Graf zobrazení činnosti klienta WCF: vedlejším aktivity (sem 0), akce procesu a nastavit si zabezpečené relace</span><span class="sxs-lookup"><span data-stu-id="90934-167">Graph view of WCF client activities: Ambient Activity (here 0), Process action, and Set Up Secure Session</span></span>  
  
 <span data-ttu-id="90934-168">V horním pravém panelu jsme můžete zobrazit všechny trasování týkající se činnosti procesu přidat akci.</span><span class="sxs-lookup"><span data-stu-id="90934-168">On the upper right panel, we can see all traces related to the Process Action Add activity.</span></span> <span data-ttu-id="90934-169">Konkrétně jsme odeslala zprávu požadavku ("odeslané zprávy přes kanál") a přijaté odpovědi ("přijaté zprávy přes kanál") do stejné aktivity.</span><span class="sxs-lookup"><span data-stu-id="90934-169">Specifically, we have sent the request message ("Sent a message over a channel") and received the response ("Received a message over a channel") in the same activity.</span></span> <span data-ttu-id="90934-170">To je znázorněno v následujícím grafu.</span><span class="sxs-lookup"><span data-stu-id="90934-170">This is shown in the following graph.</span></span> <span data-ttu-id="90934-171">Pro přehlednost nastavení zabezpečení relace aktivity sbalena v grafu.</span><span class="sxs-lookup"><span data-stu-id="90934-171">For clarity, the Set up Secure Session activity is collapsed in the graph.</span></span>  
  
 <span data-ttu-id="90934-172">![Použití prohlížeče trasování](../../../../../docs/framework/wcf/diagnostics/tracing/media/e2etrace6.gif "e2eTrace6")</span><span class="sxs-lookup"><span data-stu-id="90934-172">![Using the Trace Viewer](../../../../../docs/framework/wcf/diagnostics/tracing/media/e2etrace6.gif "e2eTrace6")</span></span>  
<span data-ttu-id="90934-173">Seznam trasování aktivity akce proces: jsme žádost odesílat a přijímat odpovědi do stejné aktivity.</span><span class="sxs-lookup"><span data-stu-id="90934-173">List of traces for the Process Action activity: we send the request and receive the response in the same activity.</span></span>  
  
 <span data-ttu-id="90934-174">Zde jsme načtení trasování klienta pouze pro přehlednost, ale služba trasování (přijata zpráva požadavku a odeslat zprávu odpovědi) se ve stejné aktivitě při jsou i načíst v nástroji a `propagateActivity` byla nastavena na `true.` to na novější obrázku je zobrazený.</span><span class="sxs-lookup"><span data-stu-id="90934-174">Here, we load client traces only for clarity, but service traces (request message received and response message sent) appear in the same activity if they are also loaded in the tool and `propagateActivity` was set to `true.` This is shown in a later illustration.</span></span>  
  
 <span data-ttu-id="90934-175">Ve službě aktivity modelu mapuje koncepty WCF následujícím způsobem:</span><span class="sxs-lookup"><span data-stu-id="90934-175">On the service, the activity model maps to the WCF concepts as follows:</span></span>  
  
1.  <span data-ttu-id="90934-176">Nemůžeme vytvořit a otevřete ServiceHost (to může vytvořit několik aktivit souvisejících s hostiteli, například v případě zabezpečení).</span><span class="sxs-lookup"><span data-stu-id="90934-176">We construct and open a ServiceHost (this may create several host-related activities, for instance, in the case of security).</span></span>  
  
2.  <span data-ttu-id="90934-177">Vytvoříme naslouchat na aktivitu pro každý naslouchací proces v hostiteli služby (s přenosy a deaktivovat otevřete ServiceHost).</span><span class="sxs-lookup"><span data-stu-id="90934-177">We create a Listen At activity for each listener in the ServiceHost (with transfers in and out of Open ServiceHost).</span></span>  
  
3.  <span data-ttu-id="90934-178">Zjistí-li naslouchací proces žádost komunikace iniciované klientem, přenáší k aktivitě "Přijímat bajtů", ve kterém jsou zpracovány všechny bajtů odeslaných z klienta.</span><span class="sxs-lookup"><span data-stu-id="90934-178">When the listener detects a communication request initiated by the client, it transfers to a "Receive Bytes" activity, in which all bytes sent from the client are processed.</span></span> <span data-ttu-id="90934-179">V této aktivity jsme se zobrazí chyby připojení, ke kterým došlo během interakce služby klienta.</span><span class="sxs-lookup"><span data-stu-id="90934-179">In this activity, we can see any connection errors that have happened during the client-service interaction.</span></span>  
  
4.  <span data-ttu-id="90934-180">Pro každou sadu bajtů, které je přijaly, která odpovídá na zprávu jsme zpracovat tyto bajtů aktivity "Proces zprávu", kde vytváříme objekt zpráv WCF.</span><span class="sxs-lookup"><span data-stu-id="90934-180">For each set of bytes that is received that corresponds to a message, we process these bytes in a "Process Message" activity, where we create the WCF Message object.</span></span> <span data-ttu-id="90934-181">V této aktivitě vidíte chyby související s chybný obálky nebo chybnou zprávu.</span><span class="sxs-lookup"><span data-stu-id="90934-181">In this activity, we see errors related to a bad envelope or a malformed message.</span></span>  
  
5.  <span data-ttu-id="90934-182">Jakmile zprávy je vytvořen, jsme přeneste do procesu akce aktivity.</span><span class="sxs-lookup"><span data-stu-id="90934-182">Once the message is formed, we transfer to a Process Action activity.</span></span> <span data-ttu-id="90934-183">Pokud `propagateActivity` je nastaven na `true` na klienta a služby, tato aktivita má stejné id jako definované v klientovi a popsané.</span><span class="sxs-lookup"><span data-stu-id="90934-183">If `propagateActivity` is set to `true` on both the client and service, this activity has the same id as the one defined in the client, and described previously.</span></span> <span data-ttu-id="90934-184">Z této fázi jsme spustit, abyste mohli využívat výhod přímé korelace napříč koncovými body, protože všechny vygenerované v WCF trasování, které se vztahují k žádosti jsou ve stejné aktivity, včetně zpracování zprávy odpovědi.</span><span class="sxs-lookup"><span data-stu-id="90934-184">From this stage we start to benefit from direct correlation across endpoints, because all traces emitted in WCF that are related to the request are in that same activity, including the response message processing.</span></span>  
  
6.  <span data-ttu-id="90934-185">Pro akci mimo proces vytvoříme aktivitu "Execute uživatelský kód" izolovat trasování vygenerované v jednu vygenerované v WCF z uživatelského kódu.</span><span class="sxs-lookup"><span data-stu-id="90934-185">For out-of-process action, we create an "Execute user code" activity to isolate traces emitted in user code from the ones emitted in WCF.</span></span> <span data-ttu-id="90934-186">V předchozím příkladu jsou vydávány trasování "Service odešle odpověď přidat" aktivity "Execute uživatelský kód" není v rámci aktivity klientem, rozšíří Pokud jsou k dispozici.</span><span class="sxs-lookup"><span data-stu-id="90934-186">In the preceding example, the "Service sends Add response" trace is emitted in the "Execute User code" activity not in the activity propagated by the client, if applicable.</span></span>  
  
 <span data-ttu-id="90934-187">Na obrázku, který následuje první aktivitu na levé straně je aktivita kořenové (0000), což je výchozí aktivity.</span><span class="sxs-lookup"><span data-stu-id="90934-187">In the illustration that follows, the first activity on the left is the root activity (0000), which is the default activity.</span></span> <span data-ttu-id="90934-188">Následující tři aktivity jsou otevřete hostiteli služby.</span><span class="sxs-lookup"><span data-stu-id="90934-188">The next three activities are to open the ServiceHost.</span></span> <span data-ttu-id="90934-189">Aktivity ve sloupci 5 je naslouchací proces a zbývajících aktivit (6 až 8) popisují WCF zpracování zprávy ze bajtů zpracování tak, aby aktivace kódu uživatele.</span><span class="sxs-lookup"><span data-stu-id="90934-189">The activity in column 5 is the listener, and the remaining activities (6 to 8) describe the WCF processing of a message, from bytes processing to user code activation.</span></span>  
  
 <span data-ttu-id="90934-190">![Použití prohlížeče trasování](../../../../../docs/framework/wcf/diagnostics/tracing/media/e2etrace7.gif "e2eTrace7")</span><span class="sxs-lookup"><span data-stu-id="90934-190">![Using the Trace Viewer](../../../../../docs/framework/wcf/diagnostics/tracing/media/e2etrace7.gif "e2eTrace7")</span></span>  
<span data-ttu-id="90934-191">Seznam aktivit služby WCF</span><span class="sxs-lookup"><span data-stu-id="90934-191">List of WCF service activities</span></span>  
  
 <span data-ttu-id="90934-192">Následující snímek obrazovky ukazuje aktivity pro klienta a služby a zvýrazňuje aktivitu přidat akci proces napříč procesy (oranžová).</span><span class="sxs-lookup"><span data-stu-id="90934-192">The following screenshot shows the activities for both the client and service, and highlights the Process Action Add activity across processes (orange).</span></span> <span data-ttu-id="90934-193">Dvojice šipek, které se týkají žádosti a odpovědi zpráv odesílaných i přijímaných v: klienta a služby.</span><span class="sxs-lookup"><span data-stu-id="90934-193">Arrows relate the request and response messages sent and received by the client and service.</span></span> <span data-ttu-id="90934-194">Trasování procesu akce jsou oddělené v rámci procesy v grafu, ale zobrazí v rámci téže aktivity v pravém panelu.</span><span class="sxs-lookup"><span data-stu-id="90934-194">The traces of Process Action are separated across processes in the graph, but shown as part of the same activity in the upper-right panel.</span></span> <span data-ttu-id="90934-195">V tomto panelu jsme najdete v trasování klienta pro odeslané zprávy, za nímž následuje trasování služby pro zprávy přijaté a zpracovány.</span><span class="sxs-lookup"><span data-stu-id="90934-195">In this panel, we can see client traces for sent messages followed by service traces for received and processed messages.</span></span>  
  
 <span data-ttu-id="90934-196">![Použití prohlížeče trasování](../../../../../docs/framework/wcf/diagnostics/tracing/media/e2etrace8.gif "e2eTrace8")</span><span class="sxs-lookup"><span data-stu-id="90934-196">![Using the Trace Viewer](../../../../../docs/framework/wcf/diagnostics/tracing/media/e2etrace8.gif "e2eTrace8")</span></span>  
<span data-ttu-id="90934-197">Zobrazení grafu obou aktivit klienta a služby WCF</span><span class="sxs-lookup"><span data-stu-id="90934-197">Graph view of both WCF client and service activities</span></span>  
  
 <span data-ttu-id="90934-198">V následujícím scénáři chyba jsou související chyby a upozornění trasování na klienta a služby.</span><span class="sxs-lookup"><span data-stu-id="90934-198">In the following error scenario, error and warning traces at the service and client are related.</span></span> <span data-ttu-id="90934-199">Nejprve je vyvolána výjimka v uživatelském kódu ve službě (zelený aktivity nejvíce vpravo, která obsahuje upozornění trasování pro výjimku "služba nemůže zpracovat tento požadavek v uživatelském kódu.").</span><span class="sxs-lookup"><span data-stu-id="90934-199">An exception is first thrown in user code on the service (right-most green activity that includes a warning trace for the exception "The service cannot process this request in user code.").</span></span> <span data-ttu-id="90934-200">Při odeslání odpovědi klientovi, je upozornění trasování znovu vygenerované k označení selhání zprávy (levém růžový aktivita).</span><span class="sxs-lookup"><span data-stu-id="90934-200">When the response is sent to the client, a warning trace is again emitted to denote the fault message (left pink activity).</span></span> <span data-ttu-id="90934-201">Klient poté uzavře svého klienta WCF (žlutý aktivita na straně levém), který zruší připojení ke službě.</span><span class="sxs-lookup"><span data-stu-id="90934-201">The client then closes its WCF client (yellow activity on the lower-left side), which aborts the connection to the service.</span></span> <span data-ttu-id="90934-202">Služba vrátí chybu (nejdelší růžový aktivita na pravé straně).</span><span class="sxs-lookup"><span data-stu-id="90934-202">The service throws an error (longest pink activity on the right).</span></span>  
  
 <span data-ttu-id="90934-203">![Použití prohlížeče trasování](../../../../../docs/framework/wcf/diagnostics/tracing/media/wcfc-e2etrace9s.gif "wcfc_e2etrace9s")</span><span class="sxs-lookup"><span data-stu-id="90934-203">![Using the Trace Viewer](../../../../../docs/framework/wcf/diagnostics/tracing/media/wcfc-e2etrace9s.gif "wcfc_e2etrace9s")</span></span>  
<span data-ttu-id="90934-204">Chyba korelace mezi klienta a služby</span><span class="sxs-lookup"><span data-stu-id="90934-204">Error correlation across the service and client</span></span>  
  
 <span data-ttu-id="90934-205">Ukázka sloužící ke generování toto trasování je řadu synchronní požadavků pomocí wsHttpBinding.</span><span class="sxs-lookup"><span data-stu-id="90934-205">The sample used to generate these traces is a series of synchronous requests using the wsHttpBinding.</span></span> <span data-ttu-id="90934-206">Existují odchylky od tohoto grafu pro scénáře bez zabezpečení nebo s asynchronní požadavků, kde zahrnuje na začátku a konce operacích, které tvoří asynchronního volání akce proces aktivity a zobrazuje přenosů, aby se zpětné volání.</span><span class="sxs-lookup"><span data-stu-id="90934-206">There are deviations from this graph for scenarios without security, or with asynchronous requests, where the Process Action activity encompasses the begin and end operations that constitute the asynchronous call, and shows transfers to a callback activity.</span></span> <span data-ttu-id="90934-207">Další informace o dalších scénářích najdete v tématu [scénáře trasování začátku do konce](../../../../../docs/framework/wcf/diagnostics/tracing/end-to-end-tracing-scenarios.md).</span><span class="sxs-lookup"><span data-stu-id="90934-207">For more information about additional scenarios, see [End-To-End Tracing Scenarios](../../../../../docs/framework/wcf/diagnostics/tracing/end-to-end-tracing-scenarios.md).</span></span>  
  
## <a name="troubleshooting-using-the-service-trace-viewer"></a><span data-ttu-id="90934-208">Řešení potíží s použití prohlížeče trasování služeb</span><span class="sxs-lookup"><span data-stu-id="90934-208">Troubleshooting Using the Service Trace Viewer</span></span>  
 <span data-ttu-id="90934-209">Při načítání trasovací soubory v nástroji Prohlížeč trasování služby, můžete vybrat všechny red nebo žlutou aktivity na levém panelu zjistit příčinu problému v aplikaci.</span><span class="sxs-lookup"><span data-stu-id="90934-209">When you load trace files in the Service Trace Viewer Tool, you can select any red or yellow activity on the left panel to track down the cause of a problem in your application.</span></span> <span data-ttu-id="90934-210">000 aktivita má obvykle neošetřené výjimky, které bublinový až uživatele.</span><span class="sxs-lookup"><span data-stu-id="90934-210">The 000 activity typically has unhandled exceptions that bubble up to the user.</span></span>  
  
 <span data-ttu-id="90934-211">![Použití prohlížeče trasování](../../../../../docs/framework/wcf/diagnostics/tracing/media/e2etrace10.gif "e2eTrace10")</span><span class="sxs-lookup"><span data-stu-id="90934-211">![Using the Trace Viewer](../../../../../docs/framework/wcf/diagnostics/tracing/media/e2etrace10.gif "e2eTrace10")</span></span>  
<span data-ttu-id="90934-212">Výběr red nebo žlutou aktivity k nalezení kořene problém</span><span class="sxs-lookup"><span data-stu-id="90934-212">Selecting red or yellow activity to locate the root of a problem</span></span>  
  
 <span data-ttu-id="90934-213">V horním pravém panelu můžete zkontrolovat trasování pro aktivity, které jste vybrali na levé straně.</span><span class="sxs-lookup"><span data-stu-id="90934-213">On the upper right panel, you can examine traces for the activity you selected on the left.</span></span> <span data-ttu-id="90934-214">Můžete pak zkontrolujte red nebo žlutou trasování tohoto panelu a zjistit, jak jsou korelační.</span><span class="sxs-lookup"><span data-stu-id="90934-214">You can then examine red or yellow traces in that panel and see how they are correlated.</span></span> <span data-ttu-id="90934-215">V předchozím grafu vidíte trasování upozornění pro klienta a služby do stejné aktivity procesu akce.</span><span class="sxs-lookup"><span data-stu-id="90934-215">In the preceding graph, we see warning traces both for the client and service in the same Process Action activity.</span></span>  
  
 <span data-ttu-id="90934-216">Pokud toto trasování není poskytnout hlavní příčinu chyby, můžete využít grafu poklepáním na vybranou aktivitou na levém panelu (sem procesu akce).</span><span class="sxs-lookup"><span data-stu-id="90934-216">If these traces do not provide you with the root cause of the error, you can utilize the graph by double-clicking the selected activity on the left panel (here Process action).</span></span> <span data-ttu-id="90934-217">Pak se zobrazí graf s souvisejících činností.</span><span class="sxs-lookup"><span data-stu-id="90934-217">The graph with related activities is then displayed.</span></span> <span data-ttu-id="90934-218">Můžete rozbalit souvisejících činností (kliknutím na znak "+") k vyhledání prvního emitovaného trasování v red nebo žlutý související aktivity.</span><span class="sxs-lookup"><span data-stu-id="90934-218">You can then expand related activities (by clicking the "+" signs) to find the first emitted trace in red or yellow in a related activity.</span></span> <span data-ttu-id="90934-219">Zachovat rozbalení aktivity, které bylo provedeno těsně před red nebo žlutou trasování zájmu, následující přenosy souvisejících činností nebo zpráva toky napříč koncovými body, dokud nebude sledovat hlavní příčinu problému.</span><span class="sxs-lookup"><span data-stu-id="90934-219">Keep expanding the activities that happened just before the red or yellow trace of interest, following transfers to related activities or message flows across endpoints, until you track the root cause of the problem.</span></span>  
  
 <span data-ttu-id="90934-220">![Použití prohlížeče trasování](../../../../../docs/framework/wcf/diagnostics/tracing/media/wcfc-e2etrace9s.gif "wcfc_e2etrace9s")</span><span class="sxs-lookup"><span data-stu-id="90934-220">![Using the Trace Viewer](../../../../../docs/framework/wcf/diagnostics/tracing/media/wcfc-e2etrace9s.gif "wcfc_e2etrace9s")</span></span>  
<span data-ttu-id="90934-221">Rozšiřování aktivit ke sledování hlavní příčinu problému</span><span class="sxs-lookup"><span data-stu-id="90934-221">Expanding activities to track the root cause of a problem</span></span>  
  
 <span data-ttu-id="90934-222">Pokud ServiceModel `ActivityTracing` je vypnuto, ale ServiceModel trasování je, uvidíte ServiceModel trasování vygenerované v 0000 aktivity.</span><span class="sxs-lookup"><span data-stu-id="90934-222">If ServiceModel `ActivityTracing` is off but ServiceModel tracing is on, you can see ServiceModel traces emitted in the 0000 activity.</span></span> <span data-ttu-id="90934-223">To však vyžaduje další úsilí pochopit korelaci toto trasování.</span><span class="sxs-lookup"><span data-stu-id="90934-223">However, this requires more effort to understand the correlation of these traces.</span></span>  
  
 <span data-ttu-id="90934-224">Pokud je povoleno protokolování zpráv, můžete na kartě zpráva zobrazíte zpráv, které je ovlivněno chyba.</span><span class="sxs-lookup"><span data-stu-id="90934-224">If Message Logging is enabled, you can use the Message Tab to see which message is impacted by the error.</span></span> <span data-ttu-id="90934-225">Dvojitým kliknutím na soubor zprávy v red nebo žlutý, uvidíte graf zobrazení souvisejících činností.</span><span class="sxs-lookup"><span data-stu-id="90934-225">By double-clicking a message in red or yellow, you can see the graph view of the related activities.</span></span> <span data-ttu-id="90934-226">Tyto aktivity jsou ty, které nejvíce související na žádost o, kde došlo k chybě.</span><span class="sxs-lookup"><span data-stu-id="90934-226">These activities are the ones most closely related to the request where an error happened.</span></span>  
  
 <span data-ttu-id="90934-227">![Použití prohlížeče trasování](../../../../../docs/framework/wcf/diagnostics/tracing/media/e2etrace11.gif "e2eTrace11")</span><span class="sxs-lookup"><span data-stu-id="90934-227">![Using the Trace Viewer](../../../../../docs/framework/wcf/diagnostics/tracing/media/e2etrace11.gif "e2eTrace11")</span></span>  
<span data-ttu-id="90934-228">Proces řešení potíží, můžete také vybrat red nebo žlutou zprávu trasování a dvakrát klikněte na něj sledovat hlavní příčinu</span><span class="sxs-lookup"><span data-stu-id="90934-228">To start troubleshooting, you can also pick a red or yellow message trace and double click it to track the root cause</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="90934-229">Viz také</span><span class="sxs-lookup"><span data-stu-id="90934-229">See Also</span></span>  
 [<span data-ttu-id="90934-230">Scénáře komplexního trasování</span><span class="sxs-lookup"><span data-stu-id="90934-230">End-To-End Tracing Scenarios</span></span>](../../../../../docs/framework/wcf/diagnostics/tracing/end-to-end-tracing-scenarios.md)  
 [<span data-ttu-id="90934-231">Prohlížeč trasování služeb (SvcTraceViewer.exe)</span><span class="sxs-lookup"><span data-stu-id="90934-231">Service Trace Viewer Tool (SvcTraceViewer.exe)</span></span>](../../../../../docs/framework/wcf/service-trace-viewer-tool-svctraceviewer-exe.md)  
 [<span data-ttu-id="90934-232">Trasování</span><span class="sxs-lookup"><span data-stu-id="90934-232">Tracing</span></span>](../../../../../docs/framework/wcf/diagnostics/tracing/index.md)
