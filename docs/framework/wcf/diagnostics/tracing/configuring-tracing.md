---
title: "Konfigurace trasování"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords: tracing [WCF]
ms.assetid: 82922010-e8b3-40eb-98c4-10fc05c6d65d
caps.latest.revision: "53"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.openlocfilehash: 1b3b200e26d4d615dd67c13770073b76dac78005
ms.sourcegitcommit: ce279f2d7fe2220e6ea0a25a8a7a5370ddf8d9f0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 12/02/2017
---
# <a name="configuring-tracing"></a><span data-ttu-id="a5a03-102">Konfigurace trasování</span><span class="sxs-lookup"><span data-stu-id="a5a03-102">Configuring Tracing</span></span>
<span data-ttu-id="a5a03-103">Toto téma popisuje, jak můžete povolit trasování, nakonfigurujte trasování zdrojů pro vydávání trasování a nastavte úrovně trasování, trasování aktivit sady a šíření pro podporu trasování začátku do konce korelace a nastavte trasování – moduly naslouchání pro přístup k trasování.</span><span class="sxs-lookup"><span data-stu-id="a5a03-103">This topic describes how you can enable tracing, configure trace sources to emit traces and set trace levels, set activity tracing and propagation to support end-to-end trace correlation, and set trace listeners to access traces.</span></span>  
  
 <span data-ttu-id="a5a03-104">Doporučení nastavení trasování v provozním prostředí nebo ladění prostředí, najdete v části [doporučená nastavení pro trasování a protokolování zpráv](../../../../../docs/framework/wcf/diagnostics/tracing/recommended-settings-for-tracing-and-message-logging.md).</span><span class="sxs-lookup"><span data-stu-id="a5a03-104">For tracing settings recommendations in production or debugging environment, refer to [Recommended Settings for Tracing and Message Logging](../../../../../docs/framework/wcf/diagnostics/tracing/recommended-settings-for-tracing-and-message-logging.md).</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="a5a03-105">V systému Windows 8 je nutné spustit vaší aplikace zvýšených oprávnění (Spustit jako správce), aby aplikace generují protokoly trasování.</span><span class="sxs-lookup"><span data-stu-id="a5a03-105">On Windows 8 you must run your application elevated (Run as Administrator) in order for your application to generate trace logs.</span></span>  
  
## <a name="enabling-tracing"></a><span data-ttu-id="a5a03-106">Povolení trasování</span><span class="sxs-lookup"><span data-stu-id="a5a03-106">Enabling Tracing</span></span>  
 [!INCLUDE[indigo1](../../../../../includes/indigo1-md.md)]<span data-ttu-id="a5a03-107">výstupy následující data pro diagnostické trasování:</span><span class="sxs-lookup"><span data-stu-id="a5a03-107"> outputs the following data for diagnostic tracing:</span></span>  
  
-   <span data-ttu-id="a5a03-108">Trasování pro milníky procesu pro všechny součásti aplikací, jako je například volání operací kód výjimky, upozornění a další důležité zpracování událostí.</span><span class="sxs-lookup"><span data-stu-id="a5a03-108">Traces for process milestones across all components of the applications, such as operation calls, code exceptions, warnings and other significant processing events.</span></span>  
  
-   <span data-ttu-id="a5a03-109">Události systému Windows chybu při trasování funkce nefunguje správně.</span><span class="sxs-lookup"><span data-stu-id="a5a03-109">Windows error events when the tracing feature malfunctions.</span></span> <span data-ttu-id="a5a03-110">V tématu [protokolování událostí](../../../../../docs/framework/wcf/diagnostics/event-logging/index.md).</span><span class="sxs-lookup"><span data-stu-id="a5a03-110">See [Event Logging](../../../../../docs/framework/wcf/diagnostics/event-logging/index.md).</span></span>  
  
 [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)]<span data-ttu-id="a5a03-111">trasování je postavený na <xref:System.Diagnostics>.</span><span class="sxs-lookup"><span data-stu-id="a5a03-111"> tracing is built on top of <xref:System.Diagnostics>.</span></span> <span data-ttu-id="a5a03-112">Pokud chcete používat trasování, byste měli definovat trasování zdrojů v konfiguračním souboru nebo v kódu.</span><span class="sxs-lookup"><span data-stu-id="a5a03-112">To use tracing, you should define trace sources in the configuration file or in code.</span></span> [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)]<span data-ttu-id="a5a03-113">definuje zdroj trasování pro každou [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] sestavení.</span><span class="sxs-lookup"><span data-stu-id="a5a03-113"> defines a trace source for each [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] assembly.</span></span> <span data-ttu-id="a5a03-114">`System.ServiceModel` Zdroj trasování je nejvíce Obecné [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] zdroj trasování a záznamů zpracování milníky napříč [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] komunikačního balíku z zadávání ponechat přenosu zadávání nebo nechat uživatelského kódu.</span><span class="sxs-lookup"><span data-stu-id="a5a03-114">The `System.ServiceModel` trace source is the most general [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] trace source, and records processing milestones across the [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] communication stack, from entering/leaving transport to entering/leaving user code.</span></span> <span data-ttu-id="a5a03-115">`System.ServiceModel.MessageLogging` Zdroj trasování zaznamenává všechny zprávy, které toku prostřednictvím systému.</span><span class="sxs-lookup"><span data-stu-id="a5a03-115">The `System.ServiceModel.MessageLogging` trace source records all messages that flow through the system.</span></span>  
  
 <span data-ttu-id="a5a03-116">Ve výchozím nastavení není povoleno trasování.</span><span class="sxs-lookup"><span data-stu-id="a5a03-116">Tracing is not enabled by default.</span></span> <span data-ttu-id="a5a03-117">Aktivujte trasování, musíte vytvořit naslouchací proces trasování a nastaví úroveň trasování než "Off" zdroje vybraného trasování v konfiguraci. v opačném [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] negeneruje žádné trasování.</span><span class="sxs-lookup"><span data-stu-id="a5a03-117">To activate tracing, you must create a trace listener and set a trace level other than "Off" for the selected trace source in configuration; otherwise, [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] does not generate any traces.</span></span> <span data-ttu-id="a5a03-118">Pokud nezadáte naslouchací proces, trasování se automaticky zakáže.</span><span class="sxs-lookup"><span data-stu-id="a5a03-118">If you do not specify a listener, tracing is automatically disabled.</span></span> <span data-ttu-id="a5a03-119">Pokud je definována naslouchací proces, ale není zadána žádná, úroveň je nastavena na "Off", ve výchozím nastavení, což znamená, že jsou vydávány žádné trasování.</span><span class="sxs-lookup"><span data-stu-id="a5a03-119">If a listener is defined, but no level is specified, the level is set to "Off" by default, which means that no trace is emitted.</span></span>  
  
 <span data-ttu-id="a5a03-120">Pokud používáte [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] body rozšiřitelnosti například vlastní operaci invokers by měl emitování vlastní trasování.</span><span class="sxs-lookup"><span data-stu-id="a5a03-120">If you use [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] extensibility points such as custom operation invokers, you should emit your own traces.</span></span> <span data-ttu-id="a5a03-121">Je to proto, pokud byste implementovat bod rozšiřitelnosti, [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] mohou už negeneruje standardní trasování ve výchozí cestě.</span><span class="sxs-lookup"><span data-stu-id="a5a03-121">This is because if you implement an extensibility point, [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] can no longer emit the standard traces in the default path.</span></span> <span data-ttu-id="a5a03-122">Pokud není implementujete ruční trasování podporu generování trasování, nemusíte vidět trasování, které očekáváte.</span><span class="sxs-lookup"><span data-stu-id="a5a03-122">If you do not implement manual tracing support by emitting traces, you may not see the traces you expect.</span></span>  
  
 <span data-ttu-id="a5a03-123">Trasování lze nakonfigurovat úpravou konfiguračního souboru aplikace – buď soubor Web.config pro Web webové aplikace nebo Appname.exe.config vlastním hostováním aplikací.</span><span class="sxs-lookup"><span data-stu-id="a5a03-123">You can configure tracing by editing the application’s configuration file—either Web.config for Web-hosted applications, or Appname.exe.config for self-hosted applications.</span></span> <span data-ttu-id="a5a03-124">Následuje příklad takové úpravy.</span><span class="sxs-lookup"><span data-stu-id="a5a03-124">The following is an example of such edit.</span></span> <span data-ttu-id="a5a03-125">Další informace o těchto nastaveních najdete v části "Konfigurace trasování – moduly naslouchání na využívat trasování".</span><span class="sxs-lookup"><span data-stu-id="a5a03-125">For more information on these settings, see the "Configuring Trace Listeners to Consume Traces" section.</span></span>  
  
```xml  
<configuration>  
   <system.diagnostics>  
      <sources>  
            <source name="System.ServiceModel"   
                    switchValue="Information, ActivityTracing"  
                    propagateActivity="true">  
            <listeners>  
               <add name="traceListener"   
                   type="System.Diagnostics.XmlWriterTraceListener"   
                   initializeData= "c:\log\Traces.svclog" />  
            </listeners>  
         </source>  
      </sources>  
   </system.diagnostics>  
</configuration>  
```  
  
> [!NOTE]
>  <span data-ttu-id="a5a03-126">Chcete-li upravit konfigurační soubor [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] projektu služby v [!INCLUDE[vs_current_short](../../../../../includes/vs-current-short-md.md)], klikněte pravým tlačítkem na soubor konfigurace aplikace – buď soubor Web.config pro Web webové aplikace nebo Appname.exe.config pro vlastním hostováním aplikaci v  **Průzkumník řešení**.</span><span class="sxs-lookup"><span data-stu-id="a5a03-126">To edit the configuration file of a [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] service project in [!INCLUDE[vs_current_short](../../../../../includes/vs-current-short-md.md)], right click the application’s configuration file—either Web.config for Web-hosted applications, or Appname.exe.config for self-hosted application in **Solution Explorer**.</span></span> <span data-ttu-id="a5a03-127">Zvolte **upravit konfiguraci WCF** položky kontextové nabídky.</span><span class="sxs-lookup"><span data-stu-id="a5a03-127">Then choose the **Edit WCF Configuration** context menu item.</span></span> <span data-ttu-id="a5a03-128">Spustí se [nástroj Configuration Editor (SvcConfigEditor.exe)](../../../../../docs/framework/wcf/configuration-editor-tool-svcconfigeditor-exe.md), což umožňuje změnit nastavení konfigurace pro [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] služeb pomocí grafického uživatelského rozhraní.</span><span class="sxs-lookup"><span data-stu-id="a5a03-128">This launches the [Configuration Editor Tool (SvcConfigEditor.exe)](../../../../../docs/framework/wcf/configuration-editor-tool-svcconfigeditor-exe.md), which enables you to modify configuration settings for [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] services using a graphical user interface.</span></span>  
  
## <a name="configuring-trace-sources-to-emit-traces"></a><span data-ttu-id="a5a03-129">Konfigurace trasování zdroje pro vydávání trasování</span><span class="sxs-lookup"><span data-stu-id="a5a03-129">Configuring Trace Sources to Emit Traces</span></span>  
 [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)]<span data-ttu-id="a5a03-130">definuje zdroj trasování pro každé sestavení.</span><span class="sxs-lookup"><span data-stu-id="a5a03-130"> defines a trace source for each assembly.</span></span> <span data-ttu-id="a5a03-131">Trasování generované v rámci sestavení jsou dostupné přes naslouchací procesy definované pro tento zdroj.</span><span class="sxs-lookup"><span data-stu-id="a5a03-131">Traces generated within an assembly are accessed by the listeners defined for that source.</span></span> <span data-ttu-id="a5a03-132">Následující zdroje trasování jsou definovány:</span><span class="sxs-lookup"><span data-stu-id="a5a03-132">The following trace sources are defined:</span></span>  
  
-   <span data-ttu-id="a5a03-133">System.ServiceModel: Protokoly všech fázích [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] zpracování, vždy, když je pro čtení konfigurace, zpráva se zpracuje v přenos, je zabezpečení zpracování zprávy odeslaných za uživatelského kódu a tak dále.</span><span class="sxs-lookup"><span data-stu-id="a5a03-133">System.ServiceModel: Logs all stages of [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] processing, whenever configuration is read, a message is processed in transport, security processing, a message is dispatched in user code, and so on.</span></span>  
  
-   <span data-ttu-id="a5a03-134">Poslouchají: Zaznamená všechny zprávy, které toku prostřednictvím systému.</span><span class="sxs-lookup"><span data-stu-id="a5a03-134">System.ServiceModel.MessageLogging: Logs all messages that flow through the system.</span></span>  
  
-   <span data-ttu-id="a5a03-135">System.IdentityModel.</span><span class="sxs-lookup"><span data-stu-id="a5a03-135">System.IdentityModel.</span></span>  
  
-   <span data-ttu-id="a5a03-136">System.ServiceModel.Activation.</span><span class="sxs-lookup"><span data-stu-id="a5a03-136">System.ServiceModel.Activation.</span></span>  
  
-   <span data-ttu-id="a5a03-137">System.IO.Log: Protokolování pro rozhraní .NET Framework na běžné Log File System (CLFS).</span><span class="sxs-lookup"><span data-stu-id="a5a03-137">System.IO.Log: Logging for the .NET Framework interface to the Common Log File System (CLFS).</span></span>  
  
-   <span data-ttu-id="a5a03-138">System.Runtime.Serialization: Protokoly Pokud jsou objekty číst nebo zapisovat.</span><span class="sxs-lookup"><span data-stu-id="a5a03-138">System.Runtime.Serialization: Logs when objects are read or written.</span></span>  
  
-   <span data-ttu-id="a5a03-139">CardSpace.</span><span class="sxs-lookup"><span data-stu-id="a5a03-139">CardSpace.</span></span>  
  
 <span data-ttu-id="a5a03-140">Každý zdroj trasování používat stejné (sdílené) naslouchací proces, můžete nakonfigurovat, jak je uvedeno v následujícím příkladu konfigurace.</span><span class="sxs-lookup"><span data-stu-id="a5a03-140">You can configure each trace source to use the same (shared) listener, as indicated in the following configuration example.</span></span>  
  
```xml  
<configuration>  
    <system.diagnostics>  
        <sources>  
            <source name="System.ServiceModel"   
                    switchValue="Information, ActivityTracing"  
                    propagateActivity="true">  
                <listeners>  
                    <add name="xml" />  
                </listeners>  
            </source>  
            <source name="CardSpace">  
                <listeners>  
                    <add name="xml" />  
                </listeners>  
            </source>  
            <source name="System.IO.Log">  
                <listeners>  
                    <add name="xml" />  
                </listeners>  
            </source>  
            <source name="System.Runtime.Serialization">  
                <listeners>  
                    <add name="xml" />  
                </listeners>  
            </source>  
            <source name="System.IdentityModel">  
                <listeners>  
                    <add name="xml" />  
                </listeners>  
            </source>  
        </sources>  
  
        <sharedListeners>  
            <add name="xml"  
                 type="System.Diagnostics.XmlWriterTraceListener"  
                 initializeData="c:\log\Traces.svclog" />  
        </sharedListeners>  
    </system.diagnostics>  
</configuration>  
```  
  
 <span data-ttu-id="a5a03-141">Kromě toho můžete přidat vlastní trasování zdrojů, jak ukazuje následující příklad, pro vydávání trasování kódu uživatele.</span><span class="sxs-lookup"><span data-stu-id="a5a03-141">In addition, you can add user-defined trace sources, as demonstrated by the following example, to emit user code traces.</span></span>  
  
```xml  
<system.diagnostics>  
   <sources>  
       <source name="UserTraceSource" switchValue="Warning, ActivityTracing" >  
          <listeners>  
              <add name="xml"  
                 type="System.Diagnostics.XmlWriterTraceListener"  
                 initializeData="C:\logs\UserTraces.svclog" />  
          </listeners>  
       </source>  
   </sources>  
   <trace autoflush="true" />   
</system.diagnostics>  
```  
  
 [!INCLUDE[crabout](../../../../../includes/crabout-md.md)]<span data-ttu-id="a5a03-142">vytváření uživatelem definované trasování zdrojů, najdete v části [rozšíření trasování](../../../../../docs/framework/wcf/samples/extending-tracing.md).</span><span class="sxs-lookup"><span data-stu-id="a5a03-142"> creating user-defined trace sources, see [Extending Tracing](../../../../../docs/framework/wcf/samples/extending-tracing.md).</span></span>  
  
## <a name="configuring-trace-listeners-to-consume-traces"></a><span data-ttu-id="a5a03-143">Konfigurace trasování – moduly naslouchání využívat trasování</span><span class="sxs-lookup"><span data-stu-id="a5a03-143">Configuring Trace Listeners to Consume Traces</span></span>  
 <span data-ttu-id="a5a03-144">V době běhu [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] informační kanály trasování dat naslouchací procesy, které zpracovávají data.</span><span class="sxs-lookup"><span data-stu-id="a5a03-144">At runtime, [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] feeds trace data to the listeners which process the data.</span></span> [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)]<span data-ttu-id="a5a03-145">nabízí několik předdefinovaných naslouchací procesy pro <xref:System.Diagnostics>, který se liší ve formátu používají pro výstup.</span><span class="sxs-lookup"><span data-stu-id="a5a03-145"> provides several predefined listeners for <xref:System.Diagnostics>, which differ in the format they use for output.</span></span> <span data-ttu-id="a5a03-146">Můžete také přidat vlastní naslouchací proces typy.</span><span class="sxs-lookup"><span data-stu-id="a5a03-146">You can also add custom listener types.</span></span>  
  
 <span data-ttu-id="a5a03-147">Můžete použít `add` Chcete-li určit název a typ naslouchací proces trasování, kterou chcete použít.</span><span class="sxs-lookup"><span data-stu-id="a5a03-147">You can use `add` to specify the name and type of the trace listener you want to use.</span></span> <span data-ttu-id="a5a03-148">V našem příkladu konfigurace jsme pojmenovali naslouchací proces `traceListener` a přidat standardní naslouchací proces trasování rozhraní .NET Framework (`System.Diagnostics.XmlWriterTraceListener`) jako typ, který chcete použít.</span><span class="sxs-lookup"><span data-stu-id="a5a03-148">In our example configuration, we named the Listener `traceListener` and added the standard .NET Framework trace listener (`System.Diagnostics.XmlWriterTraceListener`) as the type we want to use.</span></span> <span data-ttu-id="a5a03-149">Můžete přidat libovolný počet trasování – moduly naslouchání pro každý zdroj.</span><span class="sxs-lookup"><span data-stu-id="a5a03-149">You can add any number of trace listeners for each source.</span></span> <span data-ttu-id="a5a03-150">Naslouchací proces trasování vysílá trasování do souboru, je nutné zadat výstupní soubor umístění a název v konfiguračním souboru.</span><span class="sxs-lookup"><span data-stu-id="a5a03-150">If the trace listener emits the trace to a file, you must specify the output file location and name in the configuration file.</span></span> <span data-ttu-id="a5a03-151">To se provádí nastavením `initializeData` k názvu souboru pro tento naslouchací proces.</span><span class="sxs-lookup"><span data-stu-id="a5a03-151">This is done by setting `initializeData` to the name of the file for that listener.</span></span> <span data-ttu-id="a5a03-152">Pokud nezadáte název souboru, je generována náhodného názvu souboru na základě typu naslouchací proces používá.</span><span class="sxs-lookup"><span data-stu-id="a5a03-152">If you do not specify a file name, a random file name is generated based on the listener type used.</span></span> <span data-ttu-id="a5a03-153">Pokud <xref:System.Diagnostics.XmlWriterTraceListener> se použije, generuje se název souboru bez přípony.</span><span class="sxs-lookup"><span data-stu-id="a5a03-153">If <xref:System.Diagnostics.XmlWriterTraceListener> is used, a file name with no extension is generated.</span></span> <span data-ttu-id="a5a03-154">Pokud budete implementovat vlastní naslouchací proces, můžete také použít tento atribut přijímat data inicializace než název souboru.</span><span class="sxs-lookup"><span data-stu-id="a5a03-154">If you implement a custom listener, you can also use this attribute to receive initialization data other than a filename.</span></span> <span data-ttu-id="a5a03-155">Například můžete zadat identifikátor databáze pro tento atribut.</span><span class="sxs-lookup"><span data-stu-id="a5a03-155">For example, you can specify a database identifier for this attribute.</span></span>  
  
 <span data-ttu-id="a5a03-156">Můžete nakonfigurovat vlastní naslouchací odeslat trasování v drátové síti, například ke vzdálené databázi.</span><span class="sxs-lookup"><span data-stu-id="a5a03-156">You can configure a custom trace listener to send traces on the wire, for example, to a remote database.</span></span> <span data-ttu-id="a5a03-157">Jako modul pro nasazení aplikace by měl vynutit řízení správné přístupu na protokoly trasování ve vzdáleném počítači.</span><span class="sxs-lookup"><span data-stu-id="a5a03-157">As an application deployer, you should enforce proper access control on the trace logs in the remote machine.</span></span>  
  
 <span data-ttu-id="a5a03-158">Můžete také nakonfigurovat naslouchací prostřednictvím kódu programu.</span><span class="sxs-lookup"><span data-stu-id="a5a03-158">You can also configure a trace listener programmatically.</span></span> [!INCLUDE[crdefault](../../../../../includes/crdefault-md.md)]<span data-ttu-id="a5a03-159">[Postupy: vytvoření a inicializace naslouchacích procesů trasování](http://go.microsoft.com/fwlink/?LinkId=94648) a [vytváření vlastní TraceListener](http://go.microsoft.com/fwlink/?LinkId=96239).</span><span class="sxs-lookup"><span data-stu-id="a5a03-159"> [How to: Create and Initialize Trace Listeners](http://go.microsoft.com/fwlink/?LinkId=94648) and [Creating a Custom TraceListener](http://go.microsoft.com/fwlink/?LinkId=96239).</span></span>  
  
> [!CAUTION]
>  <span data-ttu-id="a5a03-160">Protože `System.Diagnostics.XmlWriterTraceListener` nejsou bezpečné pro vlákna, zdroj trasování může zamknutí prostředků, výhradně, při výstupu trasování.</span><span class="sxs-lookup"><span data-stu-id="a5a03-160">Because `System.Diagnostics.XmlWriterTraceListener` is not thread-safe, the trace source may lock resources exclusively when outputting traces.</span></span> <span data-ttu-id="a5a03-161">Pokud mnoho vláken výstup trasování ke zdroji trasování, který je nakonfigurován pro použití této naslouchací proces, může dojít, sporu prostředků, výsledkem problém významně zvýšit výkon.</span><span class="sxs-lookup"><span data-stu-id="a5a03-161">When many threads output traces to a trace source configured to use this listener, resource contention may occur, which results in a significant performance issue.</span></span> <span data-ttu-id="a5a03-162">Chcete-li vyřešit tento problém, měli byste implementovat vlastní naslouchací proces, který je bezpečný pro přístup z více vláken.</span><span class="sxs-lookup"><span data-stu-id="a5a03-162">To resolve this problem, you should implement a custom listener that is thread-safe.</span></span>  
  
## <a name="trace-level"></a><span data-ttu-id="a5a03-163">Úroveň trasování</span><span class="sxs-lookup"><span data-stu-id="a5a03-163">Trace Level</span></span>  
 <span data-ttu-id="a5a03-164">Úroveň trasování řídí `switchValue` nastavení zdroje trasování.</span><span class="sxs-lookup"><span data-stu-id="a5a03-164">The tracing level is controlled by the `switchValue` setting of the trace source.</span></span> <span data-ttu-id="a5a03-165">Úrovní trasování k dispozici jsou popsané v následující tabulce.</span><span class="sxs-lookup"><span data-stu-id="a5a03-165">The available tracing levels are described in the following table.</span></span>  
  
|<span data-ttu-id="a5a03-166">Úroveň trasování</span><span class="sxs-lookup"><span data-stu-id="a5a03-166">Trace Level</span></span>|<span data-ttu-id="a5a03-167">Povaha sledovaného události</span><span class="sxs-lookup"><span data-stu-id="a5a03-167">Nature of the Tracked Events</span></span>|<span data-ttu-id="a5a03-168">Obsah sledovaných událostí</span><span class="sxs-lookup"><span data-stu-id="a5a03-168">Content of the Tracked Events</span></span>|<span data-ttu-id="a5a03-169">Sledovaných událostí</span><span class="sxs-lookup"><span data-stu-id="a5a03-169">Tracked Events</span></span>|<span data-ttu-id="a5a03-170">Cílový uživatel</span><span class="sxs-lookup"><span data-stu-id="a5a03-170">User Target</span></span>|  
|-----------------|----------------------------------|-----------------------------------|--------------------|-----------------|  
|<span data-ttu-id="a5a03-171">Off</span><span class="sxs-lookup"><span data-stu-id="a5a03-171">Off</span></span>|<span data-ttu-id="a5a03-172">Není k dispozici</span><span class="sxs-lookup"><span data-stu-id="a5a03-172">N/A</span></span>|<span data-ttu-id="a5a03-173">Není k dispozici</span><span class="sxs-lookup"><span data-stu-id="a5a03-173">N/A</span></span>|<span data-ttu-id="a5a03-174">Žádné trasování jsou vydávány.</span><span class="sxs-lookup"><span data-stu-id="a5a03-174">No traces are emitted.</span></span>|<span data-ttu-id="a5a03-175">Není k dispozici</span><span class="sxs-lookup"><span data-stu-id="a5a03-175">N/A</span></span>|  
|<span data-ttu-id="a5a03-176">Kritická</span><span class="sxs-lookup"><span data-stu-id="a5a03-176">Critical</span></span>|<span data-ttu-id="a5a03-177">"Zápornou" události: události, které označují neočekávané zpracování nebo chybový stav.</span><span class="sxs-lookup"><span data-stu-id="a5a03-177">"Negative" events: events that indicate an unexpected processing or an error condition.</span></span>||<span data-ttu-id="a5a03-178">Jsou zaznamenány neošetřených výjimek, včetně následujících:</span><span class="sxs-lookup"><span data-stu-id="a5a03-178">Unhandled exceptions including the following are logged:</span></span><br /><br /> <span data-ttu-id="a5a03-179">– OutOfMemoryException</span><span class="sxs-lookup"><span data-stu-id="a5a03-179">-   OutOfMemoryException</span></span><br /><span data-ttu-id="a5a03-180">-Výjimka ThreadAbortException (všechny ThreadAbortExceptionHandler vyvolá modulu CLR)</span><span class="sxs-lookup"><span data-stu-id="a5a03-180">-   ThreadAbortException (the CLR invokes any ThreadAbortExceptionHandler)</span></span><br /><span data-ttu-id="a5a03-181">-StackOverflowException (nemůže být zachycena)</span><span class="sxs-lookup"><span data-stu-id="a5a03-181">-   StackOverflowException (cannot be caught)</span></span><br /><span data-ttu-id="a5a03-182">-ConfigurationErrorsException –</span><span class="sxs-lookup"><span data-stu-id="a5a03-182">-   ConfigurationErrorsException</span></span><br /><span data-ttu-id="a5a03-183">-SEHException –</span><span class="sxs-lookup"><span data-stu-id="a5a03-183">-   SEHException</span></span><br /><span data-ttu-id="a5a03-184">-Chyby spuštění aplikací</span><span class="sxs-lookup"><span data-stu-id="a5a03-184">-   Application start errors</span></span><br /><span data-ttu-id="a5a03-185">-Failfast události</span><span class="sxs-lookup"><span data-stu-id="a5a03-185">-   Failfast events</span></span><br /><span data-ttu-id="a5a03-186">-Systém přestane reagovat.</span><span class="sxs-lookup"><span data-stu-id="a5a03-186">-   System hangs</span></span><br /><span data-ttu-id="a5a03-187">-Škodlivých zpráv: zpráva trasování, které způsobí selhání aplikace.</span><span class="sxs-lookup"><span data-stu-id="a5a03-187">-   Poison messages: message traces that cause the application to fail.</span></span>|<span data-ttu-id="a5a03-188">Správci</span><span class="sxs-lookup"><span data-stu-id="a5a03-188">Administrators</span></span><br /><br /> <span data-ttu-id="a5a03-189">Vývojáři aplikací</span><span class="sxs-lookup"><span data-stu-id="a5a03-189">Application developers</span></span>|  
|<span data-ttu-id="a5a03-190">Chyba</span><span class="sxs-lookup"><span data-stu-id="a5a03-190">Error</span></span>|<span data-ttu-id="a5a03-191">"Zápornou" události: události, které označují neočekávané zpracování nebo chybový stav.</span><span class="sxs-lookup"><span data-stu-id="a5a03-191">"Negative" events: events that indicate an unexpected processing or an error condition.</span></span>|<span data-ttu-id="a5a03-192">Došlo k neočekávané zpracování.</span><span class="sxs-lookup"><span data-stu-id="a5a03-192">Unexpected processing has happened.</span></span> <span data-ttu-id="a5a03-193">Aplikaci se nepodařilo provést úlohu podle očekávání.</span><span class="sxs-lookup"><span data-stu-id="a5a03-193">The application was not able to perform a task as expected.</span></span> <span data-ttu-id="a5a03-194">Aplikace je však stále spuštěný a funkční.</span><span class="sxs-lookup"><span data-stu-id="a5a03-194">However, the application is still up and running.</span></span>|<span data-ttu-id="a5a03-195">Všechny výjimky jsou protokolovány.</span><span class="sxs-lookup"><span data-stu-id="a5a03-195">All exceptions are logged.</span></span>|<span data-ttu-id="a5a03-196">Správci</span><span class="sxs-lookup"><span data-stu-id="a5a03-196">Administrators</span></span><br /><br /> <span data-ttu-id="a5a03-197">Vývojáři aplikací</span><span class="sxs-lookup"><span data-stu-id="a5a03-197">Application developers</span></span>|  
|<span data-ttu-id="a5a03-198">Upozornění</span><span class="sxs-lookup"><span data-stu-id="a5a03-198">Warning</span></span>|<span data-ttu-id="a5a03-199">"Zápornou" události: události, které označují neočekávané zpracování nebo chybový stav.</span><span class="sxs-lookup"><span data-stu-id="a5a03-199">"Negative" events: events that indicate an unexpected processing or an error condition.</span></span>|<span data-ttu-id="a5a03-200">Možný problém došlo k chybě nebo může dojít, ale stále funkce aplikace správně.</span><span class="sxs-lookup"><span data-stu-id="a5a03-200">A possible problem has occurred or may occur, but the application still functions correctly.</span></span> <span data-ttu-id="a5a03-201">Však nemusí dál fungovat správně.</span><span class="sxs-lookup"><span data-stu-id="a5a03-201">However, it may not continue to work properly.</span></span>|<span data-ttu-id="a5a03-202">-Aplikace přijímá více požadavků než jeho nastavení omezení povolit.</span><span class="sxs-lookup"><span data-stu-id="a5a03-202">-   The application is receiving more requests than its throttling settings allow.</span></span><br /><span data-ttu-id="a5a03-203">-Přijímající fronta je téměř své maximální kapacity nakonfigurované.</span><span class="sxs-lookup"><span data-stu-id="a5a03-203">-   The receiving queue is near its maximum configured capacity.</span></span><br /><span data-ttu-id="a5a03-204">-Byla překročena časový limit.</span><span class="sxs-lookup"><span data-stu-id="a5a03-204">-   Timeout has exceeded.</span></span><br /><span data-ttu-id="a5a03-205">-Pověření jsou odmítnuta.</span><span class="sxs-lookup"><span data-stu-id="a5a03-205">-   Credentials are rejected.</span></span>|<span data-ttu-id="a5a03-206">Správci</span><span class="sxs-lookup"><span data-stu-id="a5a03-206">Administrators</span></span><br /><br /> <span data-ttu-id="a5a03-207">Vývojáři aplikací</span><span class="sxs-lookup"><span data-stu-id="a5a03-207">Application developers</span></span>|  
|<span data-ttu-id="a5a03-208">Informace o</span><span class="sxs-lookup"><span data-stu-id="a5a03-208">Information</span></span>|<span data-ttu-id="a5a03-209">"Pozitivní" události: události, které označit úspěšné milníky</span><span class="sxs-lookup"><span data-stu-id="a5a03-209">"Positive" events: events that mark successful milestones</span></span>|<span data-ttu-id="a5a03-210">Důležité a úspěšné milníky provádění aplikací, bez ohledu na to, zda aplikace funguje správně, nebo ne.</span><span class="sxs-lookup"><span data-stu-id="a5a03-210">Important and successful milestones of application execution, regardless of whether the application is working properly or not.</span></span>|<span data-ttu-id="a5a03-211">Obecně platí jsou generovány, zprávy, které jsou užitečné pro monitorování a diagnostice stav systému, měření výkonu nebo profilace.</span><span class="sxs-lookup"><span data-stu-id="a5a03-211">In general, messages helpful for monitoring and diagnosing system status, measuring performance or profiling are generated.</span></span> <span data-ttu-id="a5a03-212">Tyto informace můžete použít pro správu výkon a plánování kapacity:</span><span class="sxs-lookup"><span data-stu-id="a5a03-212">You can use such information for capacity planning and performance management:</span></span><br /><br /> <span data-ttu-id="a5a03-213">-Kanály se vytvoří.</span><span class="sxs-lookup"><span data-stu-id="a5a03-213">-   Channels are created.</span></span><br /><span data-ttu-id="a5a03-214">-Naslouchací procesy koncový bod se vytvoří.</span><span class="sxs-lookup"><span data-stu-id="a5a03-214">-   Endpoint listeners are created.</span></span><br /><span data-ttu-id="a5a03-215">-Zpráva zadá nebo nechá přenosu.</span><span class="sxs-lookup"><span data-stu-id="a5a03-215">-   Message enters/leaves transport.</span></span><br /><span data-ttu-id="a5a03-216">-Načte token zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="a5a03-216">-   Security token is retrieved.</span></span><br /><span data-ttu-id="a5a03-217">– Nastavení konfigurace je pro čtení.</span><span class="sxs-lookup"><span data-stu-id="a5a03-217">-   Configuration setting is read.</span></span>|<span data-ttu-id="a5a03-218">Správci</span><span class="sxs-lookup"><span data-stu-id="a5a03-218">Administrators</span></span><br /><br /> <span data-ttu-id="a5a03-219">Vývojáři aplikací</span><span class="sxs-lookup"><span data-stu-id="a5a03-219">Application developers</span></span><br /><br /> <span data-ttu-id="a5a03-220">Vývojáři produktu.</span><span class="sxs-lookup"><span data-stu-id="a5a03-220">Product developers.</span></span>|  
|<span data-ttu-id="a5a03-221">Verbose</span><span class="sxs-lookup"><span data-stu-id="a5a03-221">Verbose</span></span>|<span data-ttu-id="a5a03-222">"Pozitivní" události: události, které označit milníky úspěšné.</span><span class="sxs-lookup"><span data-stu-id="a5a03-222">"Positive" events: events that mark successful milestones.</span></span>|<span data-ttu-id="a5a03-223">Jsou vydávány nízkou úroveň události pro uživatele kódu a údržby.</span><span class="sxs-lookup"><span data-stu-id="a5a03-223">Low level events for both user code and servicing are emitted.</span></span>|<span data-ttu-id="a5a03-224">Obecně platí můžete tato úroveň optimalizace ladění nebo aplikace.</span><span class="sxs-lookup"><span data-stu-id="a5a03-224">In general, you can use this level for debugging or application optimization.</span></span><br /><br /> <span data-ttu-id="a5a03-225">-Záhlaví srozumitelné zprávy.</span><span class="sxs-lookup"><span data-stu-id="a5a03-225">-   Understood message header.</span></span>|<span data-ttu-id="a5a03-226">Správci</span><span class="sxs-lookup"><span data-stu-id="a5a03-226">Administrators</span></span><br /><br /> <span data-ttu-id="a5a03-227">Vývojáři aplikací</span><span class="sxs-lookup"><span data-stu-id="a5a03-227">Application developers</span></span><br /><br /> <span data-ttu-id="a5a03-228">Vývojáři produktu.</span><span class="sxs-lookup"><span data-stu-id="a5a03-228">Product developers.</span></span>|  
|<span data-ttu-id="a5a03-229">ActivityTracing</span><span class="sxs-lookup"><span data-stu-id="a5a03-229">ActivityTracing</span></span>||<span data-ttu-id="a5a03-230">Události toku mezi aktivitami zpracování a součásti.</span><span class="sxs-lookup"><span data-stu-id="a5a03-230">Flow events between processing activities and components.</span></span>|<span data-ttu-id="a5a03-231">Tato úroveň umožňuje správci a vývojáři ke korelaci aplikací ve stejné doméně aplikace:</span><span class="sxs-lookup"><span data-stu-id="a5a03-231">This level allows administrators and developers to correlate applications in the same application domain:</span></span><br /><br /> <span data-ttu-id="a5a03-232">-Trasování pro hranice aktivity, jako je například spuštění a zastavení.</span><span class="sxs-lookup"><span data-stu-id="a5a03-232">-   Traces for activity boundaries, such as start/stop.</span></span><br /><span data-ttu-id="a5a03-233">-Trasování pro přenosy.</span><span class="sxs-lookup"><span data-stu-id="a5a03-233">-   Traces for transfers.</span></span>|<span data-ttu-id="a5a03-234">Všechny</span><span class="sxs-lookup"><span data-stu-id="a5a03-234">All</span></span>|  
|<span data-ttu-id="a5a03-235">Všechny</span><span class="sxs-lookup"><span data-stu-id="a5a03-235">All</span></span>||<span data-ttu-id="a5a03-236">Aplikace může fungovat správně.</span><span class="sxs-lookup"><span data-stu-id="a5a03-236">Application may function properly.</span></span> <span data-ttu-id="a5a03-237">Všechny události jsou vydávány.</span><span class="sxs-lookup"><span data-stu-id="a5a03-237">All events are emitted.</span></span>|<span data-ttu-id="a5a03-238">Všechny předchozí události.</span><span class="sxs-lookup"><span data-stu-id="a5a03-238">All previous events.</span></span>|<span data-ttu-id="a5a03-239">Všechny</span><span class="sxs-lookup"><span data-stu-id="a5a03-239">All</span></span>|  
  
 <span data-ttu-id="a5a03-240">Úrovně z podrobné na kritický přibývají na sebe, který je každou úroveň trasování obsahuje všechny úrovně nad ním s výjimkou úroveň Off.</span><span class="sxs-lookup"><span data-stu-id="a5a03-240">The levels from Verbose to Critical are stacked on top of each other, that is, each trace level includes all levels above it except the Off level.</span></span> <span data-ttu-id="a5a03-241">Například naslouchací proces naslouchání na úrovni upozornění obdrží trasování kritické chyby a upozornění.</span><span class="sxs-lookup"><span data-stu-id="a5a03-241">For example, a listener listening at the Warning level receives Critical, Error, and Warning traces.</span></span> <span data-ttu-id="a5a03-242">Všechny úroveň zahrnuje události z podrobné na kritický a aktivity události trasování.</span><span class="sxs-lookup"><span data-stu-id="a5a03-242">The All level includes events from Verbose to Critical and Activity tracing events.</span></span>  
  
> [!CAUTION]
>  <span data-ttu-id="a5a03-243">Úrovně informace, podrobný nebo ActivityTracing vygeneroval velké množství trasování, které může mít negativní vliv propustnost zpráv, pokud jste použili až všechny dostupné prostředky na počítači.</span><span class="sxs-lookup"><span data-stu-id="a5a03-243">The Information, Verbose, and ActivityTracing levels generate a lot of traces, which may negatively impact message throughput if you have used up all available resources on the machine.</span></span>  
  
## <a name="configuring-activity-tracing-and-propagation-for-correlation"></a><span data-ttu-id="a5a03-244">Konfigurace trasování aktivit a šíření pro korelace</span><span class="sxs-lookup"><span data-stu-id="a5a03-244">Configuring Activity Tracing and Propagation for Correlation</span></span>  
 <span data-ttu-id="a5a03-245">`activityTracing` Hodnota parametru `switchValue` atribut slouží k povolení trasování aktivity, který vysílá trasování pro aktivity hranice a přenosy v rámci koncové body.</span><span class="sxs-lookup"><span data-stu-id="a5a03-245">The `activityTracing` value specified for the `switchValue` attribute is used to enable activity tracing, which emits traces for activity boundaries and transfers within endpoints.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="a5a03-246">Když použijete určité funkce rozšiřitelnost v [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)], může získat <xref:System.NullReferenceException> při zapnutém trasování aktivity.</span><span class="sxs-lookup"><span data-stu-id="a5a03-246">When you use certain extensibility features in [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)], you might get a <xref:System.NullReferenceException> when activity tracing is enabled.</span></span> <span data-ttu-id="a5a03-247">Chcete-li tento problém vyřešit, zkontrolujte konfigurační soubor vaší aplikace a ujistěte se, že `switchValue` atribut pro vaše zdroj trasování není nastavený na `activityTracing`.</span><span class="sxs-lookup"><span data-stu-id="a5a03-247">To fix this problem, check your application's configuration file and ensure that the `switchValue` attribute for your trace source is not set to `activityTracing`.</span></span>  
  
 <span data-ttu-id="a5a03-248">`propagateActivity` Atribut uvádí, zda by mělo být předáno aktivity na ostatní koncové body, které jsou součástí výměny zpráv.</span><span class="sxs-lookup"><span data-stu-id="a5a03-248">The `propagateActivity` attribute indicates whether the activity should be propagated to other endpoints that participate in the message exchange.</span></span> <span data-ttu-id="a5a03-249">Nastavením této hodnoty na `true`, můžete provést trasovací soubory generované žádné dva koncové body a sledovat, jak sadu trasování na jeden koncový bod předávány sadu trasování na jiný koncový bod.</span><span class="sxs-lookup"><span data-stu-id="a5a03-249">By setting this value to `true`, you can take trace files generated by any two endpoints and observe how a set of traces on one endpoint flowed to a set of traces on another endpoint.</span></span>  
  
 [!INCLUDE[crabout](../../../../../includes/crabout-md.md)]<span data-ttu-id="a5a03-250">trasování aktivit a šíření, najdete v části [šíření](../../../../../docs/framework/wcf/diagnostics/tracing/propagation.md).</span><span class="sxs-lookup"><span data-stu-id="a5a03-250"> activity tracing and propagation, see [Propagation](../../../../../docs/framework/wcf/diagnostics/tracing/propagation.md).</span></span>  
  
 <span data-ttu-id="a5a03-251">Obě `propagateActivity` a `ActivityTracing` logické hodnoty, na které se týkají System.ServiceModel TraceSource.</span><span class="sxs-lookup"><span data-stu-id="a5a03-251">Both `propagateActivity` and `ActivityTracing` Boolean values apply to the System.ServiceModel TraceSource.</span></span> <span data-ttu-id="a5a03-252">`ActivityTracing` Hodnota platí také pro libovolný zdroj trasování, včetně [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] nebo uživatelem definované snímků.</span><span class="sxs-lookup"><span data-stu-id="a5a03-252">The `ActivityTracing` value also applies to any trace source, including [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] or user-defined ones.</span></span>  
  
 <span data-ttu-id="a5a03-253">Nelze použít `propagateActivity` atribut s uživatelem definované trasování zdrojů.</span><span class="sxs-lookup"><span data-stu-id="a5a03-253">You cannot use the `propagateActivity` attribute with user-defined trace sources.</span></span> <span data-ttu-id="a5a03-254">Šíření ID aktivity uživatele kódu, je nutné nenastavíte ServiceModel `ActivityTracing`, zároveň ponechat ServiceModel `propagateActivity` atribut nastaven na `true`.</span><span class="sxs-lookup"><span data-stu-id="a5a03-254">For user code activity ID propagation, make sure you do not set ServiceModel `ActivityTracing`, while still having ServiceModel `propagateActivity` attribute set to `true`.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="a5a03-255">Viz také</span><span class="sxs-lookup"><span data-stu-id="a5a03-255">See Also</span></span>  
 [<span data-ttu-id="a5a03-256">Trasování</span><span class="sxs-lookup"><span data-stu-id="a5a03-256">Tracing</span></span>](../../../../../docs/framework/wcf/diagnostics/tracing/index.md)  
 [<span data-ttu-id="a5a03-257">Správa a Diagnostika</span><span class="sxs-lookup"><span data-stu-id="a5a03-257">Administration and Diagnostics</span></span>](../../../../../docs/framework/wcf/diagnostics/index.md)  
 [<span data-ttu-id="a5a03-258">Postupy: vytváření a inicializace trasování – moduly naslouchání</span><span class="sxs-lookup"><span data-stu-id="a5a03-258">How to: Create and Initialize Trace Listeners</span></span>](http://go.microsoft.com/fwlink/?LinkId=94648)  
 [<span data-ttu-id="a5a03-259">Vytváření vlastních TraceListener</span><span class="sxs-lookup"><span data-stu-id="a5a03-259">Creating a Custom TraceListener</span></span>](http://go.microsoft.com/fwlink/?LinkId=96239)
