---
title: "OLE DB, rozhraní ODBC a Oracle připojení sdružování"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-ado
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 2bd83b1e-3ea9-43c4-bade-d9cdb9bbbb04
caps.latest.revision: "3"
author: JennieHubbard
ms.author: jhubbard
manager: jhubbard
ms.workload: dotnet
ms.openlocfilehash: 7ee991417daa4636cd87c7a3655138d066c261f4
ms.sourcegitcommit: 16186c34a957fdd52e5db7294f291f7530ac9d24
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 12/22/2017
---
# <a name="ole-db-odbc-and-oracle-connection-pooling"></a><span data-ttu-id="aacc4-102">OLE DB, rozhraní ODBC a Oracle připojení sdružování</span><span class="sxs-lookup"><span data-stu-id="aacc4-102">OLE DB, ODBC, and Oracle Connection Pooling</span></span>
<span data-ttu-id="aacc4-103">Sdružování připojení může výrazně zvýšit výkon a škálovatelnost vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="aacc4-103">Pooling connections can significantly enhance the performance and scalability of your application.</span></span> <span data-ttu-id="aacc4-104">Tato část popisuje sdružování pro zprostředkovatele dat .NET Framework pro OLE DB, rozhraní ODBC a Oracle.</span><span class="sxs-lookup"><span data-stu-id="aacc4-104">This section discusses connection pooling for the .NET Framework data providers for OLE DB, ODBC and Oracle.</span></span>  
  
## <a name="connection-pooling-for-oledb"></a><span data-ttu-id="aacc4-105">Sdružování připojení ke OleDb</span><span class="sxs-lookup"><span data-stu-id="aacc4-105">Connection Pooling for OleDb</span></span>  
 <span data-ttu-id="aacc4-106">Zprostředkovatel dat .NET Framework pro OLE DB fondu automaticky pomocí technologie OLE DB relace sdružování připojení.</span><span class="sxs-lookup"><span data-stu-id="aacc4-106">The .NET Framework Data Provider for OLE DB automatically pools connections using OLE DB session pooling.</span></span> <span data-ttu-id="aacc4-107">Argumenty řetězce připojení slouží k povolení nebo zakázání služby rozhraní OLE DB včetně sdružování.</span><span class="sxs-lookup"><span data-stu-id="aacc4-107">Connection string arguments can be used to enable or disable OLE DB services including pooling.</span></span> <span data-ttu-id="aacc4-108">Například následující připojovací řetězec zakáže sdružování relací OLE DB a automatický zápis do transakce.</span><span class="sxs-lookup"><span data-stu-id="aacc4-108">For example, the following connection string disables OLE DB session pooling and automatic transaction enlistment.</span></span>  
  
```  
Provider=SQLOLEDB;OLE DB Services=-4;Data Source=localhost;Integrated Security=SSPI;  
```  
  
 <span data-ttu-id="aacc4-109">Doporučujeme vždy zavřete nebo metodu dispose připojení po ukončení práce cílem vrátit připojení do fondu.</span><span class="sxs-lookup"><span data-stu-id="aacc4-109">We recommend that you always close or dispose of a connection when you are finished using it in order to return the connection to the pool.</span></span> <span data-ttu-id="aacc4-110">Připojení, které nejsou výslovně nemusí získat vrátí do fondu.</span><span class="sxs-lookup"><span data-stu-id="aacc4-110">Connections that are not explicitly closed may not get returned to the pool.</span></span> <span data-ttu-id="aacc4-111">Například připojení, která byla mimo rozsah, ale který ještě nebyl uzavřen explicitně pouze vrátí do fondu připojení Pokud byl dosažen maximální počet a připojení je stále platný.</span><span class="sxs-lookup"><span data-stu-id="aacc4-111">For example, a connection that has gone out of scope but that has not been explicitly closed will only be returned to the connection pool if the maximum pool size has been reached and the connection is still valid.</span></span>  
  
 <span data-ttu-id="aacc4-112">Další informace o relaci OLE DB nebo sdílení prostředků ve fondech, a o tom, jak zakázat sdružování přepsáním výchozích hodnot služby zprostředkovatele OLE DB, najdete v článku [OLE DB – Příručka pro vývojáře](http://go.microsoft.com/fwlink/?linkid=45232).</span><span class="sxs-lookup"><span data-stu-id="aacc4-112">For more information about OLE DB session or resource pooling, as well as how to disable pooling by overriding OLE DB provider service defaults, see the [OLE DB Programmer's Guide](http://go.microsoft.com/fwlink/?linkid=45232).</span></span>  
  
## <a name="connection-pooling-for-odbc"></a><span data-ttu-id="aacc4-113">Sdružování připojení ke rozhraní Odbc</span><span class="sxs-lookup"><span data-stu-id="aacc4-113">Connection Pooling for Odbc</span></span>  
 <span data-ttu-id="aacc4-114">Sdružování připojení pro zprostředkovatele dat .NET Framework pro ODBC je spravovat pomocí Správce ovladačů ODBC používaný pro připojení a nemá vliv zprostředkovatele dat .NET Framework pro ODBC.</span><span class="sxs-lookup"><span data-stu-id="aacc4-114">Connection pooling for the .NET Framework Data Provider for ODBC is managed by the ODBC Driver Manager that is used for the connection, and is not affected by the .NET Framework Data Provider for ODBC.</span></span>  
  
 <span data-ttu-id="aacc4-115">Chcete-li povolit nebo zakázat sdružování připojení, otevřete **správce zdrojů dat ODBC** ve složce Nástroje pro správu v Ovládacích panelech.</span><span class="sxs-lookup"><span data-stu-id="aacc4-115">To enable or disable connection pooling, open **ODBC Data Source Administrator** in the Administrative Tools folder of Control Panel.</span></span> <span data-ttu-id="aacc4-116">**Sdružování připojení** kartě můžete zadat parametry pro každý nainstalovaný ovladač ODBC sdružování připojení.</span><span class="sxs-lookup"><span data-stu-id="aacc4-116">The **Connection Pooling** tab allows you to specify connection pooling parameters for each ODBC driver installed.</span></span> <span data-ttu-id="aacc4-117">Všimněte si, že změny sdružování připojení pro určitý ovladač ODBC ovlivní všechny aplikace, které používají tento ovladač ODBC.</span><span class="sxs-lookup"><span data-stu-id="aacc4-117">Note that connection pooling changes for a specific ODBC driver affect all applications that use that ODBC driver.</span></span>  
  
 <span data-ttu-id="aacc4-118">Další informace o sdružování připojení ODBC najdete v tématu [informace: často výzva otázky o sdružování připojení ODBC](http://support.microsoft.com/kb/169470).</span><span class="sxs-lookup"><span data-stu-id="aacc4-118">For more information on ODBC connection pooling, see [INFO: Frequently Asked Questions About ODBC Connection Pooling](http://support.microsoft.com/kb/169470).</span></span>  
  
## <a name="connection-pooling-for-oracleclient"></a><span data-ttu-id="aacc4-119">Pro OracleClient sdružování připojení</span><span class="sxs-lookup"><span data-stu-id="aacc4-119">Connection Pooling for OracleClient</span></span>  
 <span data-ttu-id="aacc4-120">Zprostředkovatel dat .NET Framework pro Oracle poskytuje sdružování připojení automaticky pro klientské aplikace ADO.NET.</span><span class="sxs-lookup"><span data-stu-id="aacc4-120">The .NET Framework Data Provider for Oracle provides connection pooling automatically for your ADO.NET client application.</span></span> <span data-ttu-id="aacc4-121">Můžete také zadat několik modifikátory řetězec připojení k řízení chování sdružování připojení (viz dále v tomto tématu "Řízení připojení sdružování s připojovací řetězec klíčová slova,").</span><span class="sxs-lookup"><span data-stu-id="aacc4-121">You can also supply several connection string modifiers to control connection pooling behavior (see "Controlling Connection Pooling with Connection String Keywords," later in this topic).</span></span>  
  
### <a name="pool-creation-and-assignment"></a><span data-ttu-id="aacc4-122">Vytvoření fondu a přiřazení</span><span class="sxs-lookup"><span data-stu-id="aacc4-122">Pool Creation and Assignment</span></span>  
 <span data-ttu-id="aacc4-123">Po otevření připojení se vytvoří fond připojení podle přesný odpovídající algoritmu, který přidruží fondu připojovací řetězec v připojení.</span><span class="sxs-lookup"><span data-stu-id="aacc4-123">When a connection is opened, a connection pool is created based on an exact matching algorithm that associates the pool with the connection string in the connection.</span></span> <span data-ttu-id="aacc4-124">Každý fond připojení je přidružen odlišné připojovací řetězec.</span><span class="sxs-lookup"><span data-stu-id="aacc4-124">Each connection pool is associated with a distinct connection string.</span></span> <span data-ttu-id="aacc4-125">Když je otevřít nové připojení, pokud připojovací řetězec není přesnou shodu na existující fond, vytvoří se nový fond.</span><span class="sxs-lookup"><span data-stu-id="aacc4-125">When a new connection is opened, if the connection string is not an exact match to an existing pool, a new pool is created.</span></span>  
  
 <span data-ttu-id="aacc4-126">Po vytvoření připojení fondy nejsou zničený, dokud aktivní proces skončí.</span><span class="sxs-lookup"><span data-stu-id="aacc4-126">Once created, connection pools are not destroyed until the active process ends.</span></span> <span data-ttu-id="aacc4-127">Zachování neaktivní nebo prázdný fondů používá jen několik systémové prostředky.</span><span class="sxs-lookup"><span data-stu-id="aacc4-127">Maintaining inactive or empty pools uses very few system resources.</span></span>  
  
### <a name="connection-addition"></a><span data-ttu-id="aacc4-128">Přidání připojení</span><span class="sxs-lookup"><span data-stu-id="aacc4-128">Connection Addition</span></span>  
 <span data-ttu-id="aacc4-129">Fond připojení se vytvoří pro každý jedinečný připojovací řetězec.</span><span class="sxs-lookup"><span data-stu-id="aacc4-129">A connection pool is created for each unique connection string.</span></span> <span data-ttu-id="aacc4-130">Při vytváření fondu více objektů připojení jsou vytvořen a přidán do fondu, aby je nesplňuje požadavek na minimální fondu velikost.</span><span class="sxs-lookup"><span data-stu-id="aacc4-130">When a pool is created, multiple connection objects are created and added to the pool so that the minimum pool size requirement is satisfied.</span></span> <span data-ttu-id="aacc4-131">Připojení se přidají do fondu, podle potřeby až k maximální velikosti fondu.</span><span class="sxs-lookup"><span data-stu-id="aacc4-131">Connections are added to the pool as needed, up to the maximum pool size.</span></span>  
  
 <span data-ttu-id="aacc4-132">Když <xref:System.Data.OracleClient.OracleConnection> je požadován objekt, se získávají z fondu, pokud je k dispozici použitelné připojení.</span><span class="sxs-lookup"><span data-stu-id="aacc4-132">When an <xref:System.Data.OracleClient.OracleConnection> object is requested, it is obtained from the pool if a usable connection is available.</span></span> <span data-ttu-id="aacc4-133">Být použitelná, připojení nesmí aktuálně nevyužitá, mají odpovídající kontext transakce nebo být přidružen k žádnému kontextu transakce a mít platný odkaz na serveru.</span><span class="sxs-lookup"><span data-stu-id="aacc4-133">To be usable, the connection must currently be unused, have a matching transaction context or not be associated with any transaction context, and have a valid link to the server.</span></span>  
  
 <span data-ttu-id="aacc4-134">Pokud byl dosažen maximální počet a není k dispozici žádné použitelné připojení, požadavek ve frontě.</span><span class="sxs-lookup"><span data-stu-id="aacc4-134">If the maximum pool size has been reached and no usable connection is available, the request is queued.</span></span> <span data-ttu-id="aacc4-135">Pro sdružování připojení splňuje tyto požadavky pomocí změna přidělování připojení při jejich vydání zpět do fondu.</span><span class="sxs-lookup"><span data-stu-id="aacc4-135">The connection pooler satisfies these requests by reallocating connections as they are released back into the pool.</span></span> <span data-ttu-id="aacc4-136">Připojení jsou vydávány zpět do fondu, když jsou uzavřeny nebo zlikvidován.</span><span class="sxs-lookup"><span data-stu-id="aacc4-136">Connections are released back into the pool when they are closed or disposed.</span></span>  
  
### <a name="connection-removal"></a><span data-ttu-id="aacc4-137">Odebrání připojení</span><span class="sxs-lookup"><span data-stu-id="aacc4-137">Connection Removal</span></span>  
 <span data-ttu-id="aacc4-138">Po jejím nečinnosti delší dobu, nebo pokud pro sdružování zjistí, že má bylo porušeno připojení se serverem pro sdružování připojení Odebere připojení z fondu.</span><span class="sxs-lookup"><span data-stu-id="aacc4-138">The connection pooler removes a connection from the pool after it has been idle for an extended period of time, or if the pooler detects that the connection with the server has been severed.</span></span> <span data-ttu-id="aacc4-139">Všimněte si, že to bude možné zjišťovat až po pokusu o komunikaci se serverem.</span><span class="sxs-lookup"><span data-stu-id="aacc4-139">Note that this can be detected only after attempting to communicate with the server.</span></span> <span data-ttu-id="aacc4-140">Pokud se najde připojení, který je už připojený k serveru, je označena jako neplatná.</span><span class="sxs-lookup"><span data-stu-id="aacc4-140">If a connection is found that is no longer connected to the server, it is marked as invalid.</span></span> <span data-ttu-id="aacc4-141">Pro sdružování připojení pravidelně kontroluje připojení fondy vyhledávání pro objekty, které byly vydány do fondu a jsou označené jako neplatné.</span><span class="sxs-lookup"><span data-stu-id="aacc4-141">The connection pooler periodically scans connection pools looking for objects that have been released to the pool and are marked as invalid.</span></span> <span data-ttu-id="aacc4-142">Pak se trvale odebrat tato připojení.</span><span class="sxs-lookup"><span data-stu-id="aacc4-142">These connections are then permanently removed.</span></span>  
  
 <span data-ttu-id="aacc4-143">Pokud existuje připojení k serveru, který má smazán, můžete toto připojení čerpají z fondu, pokud nebyl zjištěn poškozený připojení a označena jako neplatná pro sdružování připojení.</span><span class="sxs-lookup"><span data-stu-id="aacc4-143">If a connection exists to a server that has disappeared, this connection can be drawn from the pool if the connection pooler has not detected the severed connection and marked it as invalid.</span></span> <span data-ttu-id="aacc4-144">V takovém případě se vygeneruje výjimku.</span><span class="sxs-lookup"><span data-stu-id="aacc4-144">When this occurs, an exception is generated.</span></span> <span data-ttu-id="aacc4-145">Připojení však musíte zavřít Chcete-li ji uvolnit zpět do fondu.</span><span class="sxs-lookup"><span data-stu-id="aacc4-145">However, you must still close the connection in order to release it back into the pool.</span></span>  
  
 <span data-ttu-id="aacc4-146">Nevolejte `Close` nebo `Dispose` na `Connection`, `DataReader`, nebo jiné spravovaného objektu v `Finalize` metoda vaší třídy.</span><span class="sxs-lookup"><span data-stu-id="aacc4-146">Do not call `Close` or `Dispose` on a `Connection`, a `DataReader`, or any other managed object in the `Finalize` method of your class.</span></span> <span data-ttu-id="aacc4-147">V finalizační metodu vydání pouze nespravovaných prostředků, které vlastní třídu přímo.</span><span class="sxs-lookup"><span data-stu-id="aacc4-147">In a finalizer, only release unmanaged resources that your class owns directly.</span></span> <span data-ttu-id="aacc4-148">Pokud vaše třída nevlastní žádné nespravovaných prostředků, nezahrnujte `Finalize` metoda v definici vaší třídy.</span><span class="sxs-lookup"><span data-stu-id="aacc4-148">If your class does not own any unmanaged resources, do not include a `Finalize` method in your class definition.</span></span> <span data-ttu-id="aacc4-149">Další informace najdete v tématu [uvolňování paměti](../../../../docs/standard/garbage-collection/index.md).</span><span class="sxs-lookup"><span data-stu-id="aacc4-149">For more information, see [Garbage Collection](../../../../docs/standard/garbage-collection/index.md).</span></span>  
  
### <a name="transaction-support"></a><span data-ttu-id="aacc4-150">Podpora transakcí</span><span class="sxs-lookup"><span data-stu-id="aacc4-150">Transaction Support</span></span>  
 <span data-ttu-id="aacc4-151">Připojení jsou vykreslovány z fondu a kontext přiřazené na základě transakce.</span><span class="sxs-lookup"><span data-stu-id="aacc4-151">Connections are drawn from the pool and assigned based on transaction context.</span></span> <span data-ttu-id="aacc4-152">Kontext požadavku vlákno a přiřazené připojení musí shodovat.</span><span class="sxs-lookup"><span data-stu-id="aacc4-152">The context of the requesting thread and the assigned connection must match.</span></span> <span data-ttu-id="aacc4-153">Proto každý fond připojení je ve skutečnosti rozděleno na připojení s žádný kontext transakce související s nimi a do *N* dílčích dělení, že každý obsahovat připojení s kontextem konkrétní transakce.</span><span class="sxs-lookup"><span data-stu-id="aacc4-153">Therefore, each connection pool is actually subdivided into connections with no transaction context associated with them, and into *N* subdivisions that each contain connections with a particular transaction context.</span></span>  
  
 <span data-ttu-id="aacc4-154">Když je připojení ukončeno, jeho vydání zpět do fondu a do příslušné pododdíl na základě jeho kontextu transakce.</span><span class="sxs-lookup"><span data-stu-id="aacc4-154">When a connection is closed, it is released back into the pool and into the appropriate subdivision based on its transaction context.</span></span> <span data-ttu-id="aacc4-155">Proto můžete zavřít připojení bez generování chybu, i když je stále distribuovanou transakci čekající na vyřízení.</span><span class="sxs-lookup"><span data-stu-id="aacc4-155">Therefore, you can close the connection without generating an error, even though a distributed transaction is still pending.</span></span> <span data-ttu-id="aacc4-156">To umožňuje potvrzení nebo přerušení distribuovanou transakci později.</span><span class="sxs-lookup"><span data-stu-id="aacc4-156">This allows you to commit or abort the distributed transaction at a later time.</span></span>  
  
### <a name="controlling-connection-pooling-with-connection-string-keywords"></a><span data-ttu-id="aacc4-157">Řízení sdružování připojení s klíčovými slovy řetězec připojení</span><span class="sxs-lookup"><span data-stu-id="aacc4-157">Controlling Connection Pooling with Connection String Keywords</span></span>  
 <span data-ttu-id="aacc4-158"><xref:System.Data.OracleClient.OracleConnection.ConnectionString%2A> Vlastnost <xref:System.Data.OracleClient.OracleConnection> objekt podporuje dvojice klíč/hodnota řetězce připojení, které lze použít k úpravě chování logiky sdružování připojení.</span><span class="sxs-lookup"><span data-stu-id="aacc4-158">The <xref:System.Data.OracleClient.OracleConnection.ConnectionString%2A> property of the <xref:System.Data.OracleClient.OracleConnection> object supports connection string key/value pairs that can be used to adjust the behavior of the connection pooling logic.</span></span>  
  
 <span data-ttu-id="aacc4-159">V následující tabulce jsou popsány <xref:System.Data.OracleClient.OracleConnection.ConnectionString%2A> hodnoty můžete upravit chování sdružování připojení.</span><span class="sxs-lookup"><span data-stu-id="aacc4-159">The following table describes the <xref:System.Data.OracleClient.OracleConnection.ConnectionString%2A> values you can use to adjust connection pooling behavior.</span></span>  
  
|<span data-ttu-id="aacc4-160">Název</span><span class="sxs-lookup"><span data-stu-id="aacc4-160">Name</span></span>|<span data-ttu-id="aacc4-161">Výchozí</span><span class="sxs-lookup"><span data-stu-id="aacc4-161">Default</span></span>|<span data-ttu-id="aacc4-162">Popis</span><span class="sxs-lookup"><span data-stu-id="aacc4-162">Description</span></span>|  
|----------|-------------|-----------------|  
|`Connection Lifetime`|<span data-ttu-id="aacc4-163">0</span><span class="sxs-lookup"><span data-stu-id="aacc4-163">0</span></span>|<span data-ttu-id="aacc4-164">Pokud připojení se vrátí do fondu, doba jejího vytvoření je porovnána s aktuální čas a zničen připojení, pokud tento časový interval (v sekundách) překročí hodnotu zadanou pomocí `Connection Lifetime`.</span><span class="sxs-lookup"><span data-stu-id="aacc4-164">When a connection is returned to the pool, its creation time is compared with the current time, and the connection is destroyed if that time span (in seconds) exceeds the value specified by `Connection Lifetime`.</span></span> <span data-ttu-id="aacc4-165">To je užitečné v clusterovaných konfiguracích vynutit vyrovnávání zátěže mezi spuštěný server a server právě uvést do režimu online.</span><span class="sxs-lookup"><span data-stu-id="aacc4-165">This is useful in clustered configurations to force load balancing between a running server and a server just brought online.</span></span><br /><br /> <span data-ttu-id="aacc4-166">Hodnota nula (0) způsobí, že ve fondu připojení tak, aby měl maximální časový limit.</span><span class="sxs-lookup"><span data-stu-id="aacc4-166">A value of zero (0) will cause pooled connections to have the maximum time-out.</span></span>|  
|`Enlist`|<span data-ttu-id="aacc4-167">hodnotu true.</span><span class="sxs-lookup"><span data-stu-id="aacc4-167">'true'</span></span>|<span data-ttu-id="aacc4-168">Když `true`, pro sdružování automaticky využívá připojení v aktuálním kontextu transakce vytvoření vlákna, pokud existuje kontextu transakce.</span><span class="sxs-lookup"><span data-stu-id="aacc4-168">When `true`, the pooler automatically enlists the connection in the current transaction context of the creation thread if a transaction context exists.</span></span>|  
|`Max Pool Size`|<span data-ttu-id="aacc4-169">100</span><span class="sxs-lookup"><span data-stu-id="aacc4-169">100</span></span>|<span data-ttu-id="aacc4-170">Maximální počet připojení povolených ve fondu.</span><span class="sxs-lookup"><span data-stu-id="aacc4-170">The maximum number of connections allowed in the pool.</span></span>|  
|`Min Pool Size`|<span data-ttu-id="aacc4-171">0</span><span class="sxs-lookup"><span data-stu-id="aacc4-171">0</span></span>|<span data-ttu-id="aacc4-172">Minimální počet připojení udržují ve fondu.</span><span class="sxs-lookup"><span data-stu-id="aacc4-172">The minimum number of connections maintained in the pool.</span></span>|  
|`Pooling`|<span data-ttu-id="aacc4-173">hodnotu true.</span><span class="sxs-lookup"><span data-stu-id="aacc4-173">'true'</span></span>|<span data-ttu-id="aacc4-174">Když `true`, je připojení čerpají z odpovídajícímu fondu adres, nebo v případě potřeby vytvořen a přidán do fondu vhodné.</span><span class="sxs-lookup"><span data-stu-id="aacc4-174">When `true`, the connection is drawn from the appropriate pool, or if necessary, created and added to the appropriate pool.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="aacc4-175">Viz také</span><span class="sxs-lookup"><span data-stu-id="aacc4-175">See Also</span></span>  
 [<span data-ttu-id="aacc4-176">Sdružování připojení</span><span class="sxs-lookup"><span data-stu-id="aacc4-176">Connection Pooling</span></span>](../../../../docs/framework/data/adonet/connection-pooling.md)  
 [<span data-ttu-id="aacc4-177">Čítače výkonu</span><span class="sxs-lookup"><span data-stu-id="aacc4-177">Performance Counters</span></span>](../../../../docs/framework/data/adonet/performance-counters.md)  
 [<span data-ttu-id="aacc4-178">ADO.NET spravované zprostředkovatelé a středisku pro vývojáře datové sady</span><span class="sxs-lookup"><span data-stu-id="aacc4-178">ADO.NET Managed Providers and DataSet Developer Center</span></span>](http://go.microsoft.com/fwlink/?LinkId=217917)
