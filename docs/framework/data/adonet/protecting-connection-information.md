---
title: Ochrana informací o připojení
ms.date: 03/30/2017
ms.assetid: 1471f580-bcd4-4046-bdaf-d2541ecda2f4
ms.openlocfilehash: 4cf503af6f57eefb0990a8e7e728ea5c1474bfa7
ms.sourcegitcommit: 3d5d33f384eeba41b2dff79d096f47ccc8d8f03d
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 05/04/2018
ms.locfileid: "33363348"
---
# <a name="protecting-connection-information"></a><span data-ttu-id="d3db2-102">Ochrana informací o připojení</span><span class="sxs-lookup"><span data-stu-id="d3db2-102">Protecting Connection Information</span></span>
<span data-ttu-id="d3db2-103">Zabezpečení přístupu ke zdroji dat je jedním z nejdůležitějších cílů při zabezpečení aplikace.</span><span class="sxs-lookup"><span data-stu-id="d3db2-103">Protecting access to your data source is one of the most important goals when securing an application.</span></span> <span data-ttu-id="d3db2-104">Připojovací řetězec uvede potenciální ohrožení zabezpečení, pokud není zabezpečená.</span><span class="sxs-lookup"><span data-stu-id="d3db2-104">A connection string presents a potential vulnerability if it is not secured.</span></span> <span data-ttu-id="d3db2-105">Ukládání informací o připojení ve formátu prostého textu nebo uchování v paměti rizika ohrožení celého systému.</span><span class="sxs-lookup"><span data-stu-id="d3db2-105">Storing connection information in plain text or persisting it in memory risks compromising your entire system.</span></span> <span data-ttu-id="d3db2-106">Připojovací řetězce, které jsou součástí vašeho zdrojového kódu lze číst pomocí [Ildasm.exe (IL Disassembler)](../../../../docs/framework/tools/ildasm-exe-il-disassembler.md) zobrazíte Microsoft (MSIL intermediate language) v kompilovaném sestavení.</span><span class="sxs-lookup"><span data-stu-id="d3db2-106">Connection strings embedded in your source code can be read using the [Ildasm.exe (IL Disassembler)](../../../../docs/framework/tools/ildasm-exe-il-disassembler.md) to view Microsoft intermediate language (MSIL) in a compiled assembly.</span></span>  
  
 <span data-ttu-id="d3db2-107">Chyby zabezpečení, které mohou nastat zahrnující připojovací řetězce na základě typu ověřování použít, jak připojovací řetězce jsou nastavené jako trvalé v paměti a na disku a techniky použitý k vytvoření je za běhu.</span><span class="sxs-lookup"><span data-stu-id="d3db2-107">Security vulnerabilities involving connection strings can arise based on the type of authentication used, how connection strings are persisted in memory and on disk, and the techniques used to construct them at run time.</span></span>  
  
## <a name="use-windows-authentication"></a><span data-ttu-id="d3db2-108">Ověřování systému Windows</span><span class="sxs-lookup"><span data-stu-id="d3db2-108">Use Windows Authentication</span></span>  
 <span data-ttu-id="d3db2-109">Můžete omezit přístup k zdroj dat, je nutné zabezpečit informace o připojení, jako je například název zdroje dat, ID a heslo uživatele.</span><span class="sxs-lookup"><span data-stu-id="d3db2-109">To help limit access to your data source, you must secure connection information such as user ID, password, and data source name.</span></span> <span data-ttu-id="d3db2-110">Aby se zabránilo vystavení informace o uživateli, doporučujeme použít ověřování systému Windows (někdy označovány jako *integrované zabezpečení*) Pokud je to možné.</span><span class="sxs-lookup"><span data-stu-id="d3db2-110">In order to avoid exposing user information, we recommend using Windows authentication (sometimes referred to as *integrated security*) wherever possible.</span></span> <span data-ttu-id="d3db2-111">Ověřování systému Windows je zadaný v připojovacím řetězci pomocí `Integrated Security` nebo `Trusted_Connection` klíčová slova, takže není nutné používat ID uživatele a heslo.</span><span class="sxs-lookup"><span data-stu-id="d3db2-111">Windows authentication is specified in a connection string by using the `Integrated Security` or `Trusted_Connection` keywords, eliminating the need to use a user ID and password.</span></span> <span data-ttu-id="d3db2-112">Pokud používáte ověřování systému Windows, uživatelé se ověřují v systému Windows a přístup k prostředkům serveru a databáze je dáno udělení oprávnění uživatelům Windows a skupiny.</span><span class="sxs-lookup"><span data-stu-id="d3db2-112">When using Windows authentication, users are authenticated by Windows, and access to server and database resources is determined by granting permissions to Windows users and groups.</span></span>  
  
 <span data-ttu-id="d3db2-113">V situacích, kde není možné použít ověřování systému Windows musíte použít zvláštní pozornost, protože přihlašovací údaje uživatele jsou zveřejněné v připojovacím řetězci.</span><span class="sxs-lookup"><span data-stu-id="d3db2-113">For situations where it is not possible to use Windows authentication, you must use extra care because user credentials are exposed in the connection string.</span></span> <span data-ttu-id="d3db2-114">V aplikaci ASP.NET můžete nakonfigurovat účet systému Windows jako pevné identitou, která se používá k připojení k databázím a jiným síťovým prostředkům.</span><span class="sxs-lookup"><span data-stu-id="d3db2-114">In an ASP.NET application, you can configure a Windows account as a fixed identity that is used to connect to databases and other network resources.</span></span> <span data-ttu-id="d3db2-115">Povolení zosobnění v elementu identity v **web.config** souboru a zadejte uživatelské jméno a heslo.</span><span class="sxs-lookup"><span data-stu-id="d3db2-115">You enable impersonation in the identity element in the **web.config** file and specify a user name and password.</span></span>  
  
```xml  
<identity impersonate="true"   
        userName="MyDomain\UserAccount"   
        password="*****" />  
```  
  
 <span data-ttu-id="d3db2-116">Opravené identity účet by měl být nízkými oprávněními účet, kterému byla udělena pouze nezbytná oprávnění v databázi.</span><span class="sxs-lookup"><span data-stu-id="d3db2-116">The fixed identity account should be a low-privilege account that has been granted only necessary permissions in the database.</span></span> <span data-ttu-id="d3db2-117">Kromě toho by měla šifrování konfiguračního souboru tak, aby se nezobrazí uživatelské jméno a heslo ve formátu prostého textu.</span><span class="sxs-lookup"><span data-stu-id="d3db2-117">In addition, you should encrypt the configuration file so that the user name and password are not exposed in clear text.</span></span>  
  
## <a name="do-not-use-universal-data-link-udl-files"></a><span data-ttu-id="d3db2-118">Soubory není použití Universal Data odkaz (UDL)</span><span class="sxs-lookup"><span data-stu-id="d3db2-118">Do Not Use Universal Data Link (UDL) files</span></span>  
 <span data-ttu-id="d3db2-119">Vyhněte se ukládání připojovací řetězce pro <xref:System.Data.OleDb.OleDbConnection> v souboru Universal Data odkaz (UDL).</span><span class="sxs-lookup"><span data-stu-id="d3db2-119">Avoid storing connection strings for an <xref:System.Data.OleDb.OleDbConnection> in a Universal Data Link (UDL) file.</span></span> <span data-ttu-id="d3db2-120">UDLs se ukládají ve formátu prostého textu a nedá se zašifrovat.</span><span class="sxs-lookup"><span data-stu-id="d3db2-120">UDLs are stored in clear text and cannot be encrypted.</span></span> <span data-ttu-id="d3db2-121">Soubor UDL je externí prostředek na základě souborů k vaší aplikaci, a nelze zabezpečit nebo šifrovat pomocí rozhraní .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="d3db2-121">A UDL file is an external file-based resource to your application, and it cannot be secured or encrypted using the .NET Framework.</span></span>  
  
## <a name="avoid-injection-attacks-with-connection-string-builders"></a><span data-ttu-id="d3db2-122">Vyhněte se prostřednictvím injektáže s Tvůrci řetězců pro připojení</span><span class="sxs-lookup"><span data-stu-id="d3db2-122">Avoid Injection Attacks with Connection String Builders</span></span>  
 <span data-ttu-id="d3db2-123">Útok prostřednictvím injektáže řetězec připojení může dojít, když dynamické zřetězení slouží k vytvoření připojovací řetězce, které jsou založené na vstup uživatele.</span><span class="sxs-lookup"><span data-stu-id="d3db2-123">A connection string injection attack can occur when dynamic string concatenation is used to build connection strings based on user input.</span></span> <span data-ttu-id="d3db2-124">Pokud uživatelský vstup není ověřená a škodlivý text nebo znaky není řídicí sekvencí, útočník mají přístup k citlivým datům nebo jiným prostředkům na serveru.</span><span class="sxs-lookup"><span data-stu-id="d3db2-124">If the user input is not validated and malicious text or characters not escaped, an attacker can potentially access sensitive data or other resources on the server.</span></span> <span data-ttu-id="d3db2-125">Chcete-li vyřešit tento problém, ADO.NET 2.0 zavedeny nové třídy tvůrce řetězec připojení ověřte syntaxi připojovacího řetězce a ujistěte se, že nejsou zavedena další parametry.</span><span class="sxs-lookup"><span data-stu-id="d3db2-125">To address this problem, ADO.NET 2.0 introduced new connection string builder classes to validate connection string syntax and ensure that additional parameters are not introduced.</span></span> <span data-ttu-id="d3db2-126">Další informace najdete v tématu [Tvůrci řetězců pro připojení](../../../../docs/framework/data/adonet/connection-string-builders.md).</span><span class="sxs-lookup"><span data-stu-id="d3db2-126">For more information, see [Connection String Builders](../../../../docs/framework/data/adonet/connection-string-builders.md).</span></span>  
  
## <a name="use-persist-security-infofalse"></a><span data-ttu-id="d3db2-127">Použití zachovat bezpečnostní údaje = False</span><span class="sxs-lookup"><span data-stu-id="d3db2-127">Use Persist Security Info=False</span></span>  
 <span data-ttu-id="d3db2-128">Výchozí hodnota pro `Persist Security Info` NEPRAVDA; doporučujeme používat toto výchozí nastavení ve všech připojovací řetězce.</span><span class="sxs-lookup"><span data-stu-id="d3db2-128">The default value for `Persist Security Info` is false; we recommend using this default in all connection strings.</span></span> <span data-ttu-id="d3db2-129">Nastavení `Persist Security Info` k `true` nebo `yes` umožňuje informace citlivé na zabezpečení, včetně ID uživatele a heslo, získat z připojení po byl otevřen.</span><span class="sxs-lookup"><span data-stu-id="d3db2-129">Setting `Persist Security Info` to `true` or `yes` allows security-sensitive information, including the user ID and password, to be obtained from a connection after it has been opened.</span></span> <span data-ttu-id="d3db2-130">Když `Persist Security Info` je nastaven na `false` nebo `no`, informace o zabezpečení je odstraněn po se používá k otevření připojení, zajistíte, že nedůvěryhodných nemá přístup k citlivé informace.</span><span class="sxs-lookup"><span data-stu-id="d3db2-130">When `Persist Security Info` is set to `false` or `no`, security information is discarded after it is used to open the connection, ensuring that an untrusted source does not have access to security-sensitive information.</span></span>  
  
## <a name="encrypt-configuration-files"></a><span data-ttu-id="d3db2-131">Šifrování konfiguračních souborů</span><span class="sxs-lookup"><span data-stu-id="d3db2-131">Encrypt Configuration Files</span></span>  
 <span data-ttu-id="d3db2-132">Také můžete uložit připojovací řetězce v konfiguračních souborech, což eliminuje potřebu vložit do kódu aplikace.</span><span class="sxs-lookup"><span data-stu-id="d3db2-132">You can also store connection strings in configuration files, which eliminates the need to embed them in your application's code.</span></span> <span data-ttu-id="d3db2-133">Konfigurační soubory jsou standardní soubory XML, pro které je rozhraní .NET Framework definovaný společnou sadu elementů.</span><span class="sxs-lookup"><span data-stu-id="d3db2-133">Configuration files are standard XML files for which the .NET Framework has defined a common set of elements.</span></span> <span data-ttu-id="d3db2-134">Připojovací řetězce v konfiguračních souborech uvnitř obvykle ukládají  **\<connectionStrings >** element v **app.config** pro aplikace systému Windows nebo  **soubor Web.config** soubor pro aplikaci ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="d3db2-134">Connection strings in configuration files are typically stored inside the **\<connectionStrings>** element in the **app.config** for a Windows application, or the **web.config** file for an ASP.NET application.</span></span> <span data-ttu-id="d3db2-135">Další informace o základní informace o ukládání, načítání a šifrování připojovacího řetězce z konfiguračních souborů, najdete v části [připojovací řetězce a konfigurační soubory](../../../../docs/framework/data/adonet/connection-strings-and-configuration-files.md).</span><span class="sxs-lookup"><span data-stu-id="d3db2-135">For more information on the basics of storing, retrieving and encrypting connection strings from configuration files, see [Connection Strings and Configuration Files](../../../../docs/framework/data/adonet/connection-strings-and-configuration-files.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="d3db2-136">Viz také</span><span class="sxs-lookup"><span data-stu-id="d3db2-136">See Also</span></span>  
 [<span data-ttu-id="d3db2-137">Zabezpečení aplikací ADO.NET</span><span class="sxs-lookup"><span data-stu-id="d3db2-137">Securing ADO.NET Applications</span></span>](../../../../docs/framework/data/adonet/securing-ado-net-applications.md)  
 [<span data-ttu-id="d3db2-138">Šifrované informace o konfiguraci pomocí chráněné konfigurace</span><span class="sxs-lookup"><span data-stu-id="d3db2-138">Encrypting Configuration Information Using Protected Configuration</span></span>](http://msdn.microsoft.com/library/51cdfe5b-9d82-458c-94ff-c551c4f38ed1)  
 [<span data-ttu-id="d3db2-139">Připravte si kód pro rozhraní .NET Framework a zabezpečení v nativním režimu</span><span class="sxs-lookup"><span data-stu-id="d3db2-139">PAVE Security in Native and .NET Framework Code</span></span>](http://msdn.microsoft.com/library/bd61be84-c143-409a-a75a-44253724f784)  
 [<span data-ttu-id="d3db2-140">ADO.NET spravované zprostředkovatelé a středisku pro vývojáře datové sady</span><span class="sxs-lookup"><span data-stu-id="d3db2-140">ADO.NET Managed Providers and DataSet Developer Center</span></span>](http://go.microsoft.com/fwlink/?LinkId=217917)
