---
title: "Připojovací řetězce a konfigurační soubory"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-ado
ms.tgt_pltfrm: 
ms.topic: article
dev_langs:
- csharp
- vb
ms.assetid: 37df2641-661e-407a-a3fb-7bf9540f01e8
caps.latest.revision: "4"
author: JennieHubbard
ms.author: jhubbard
manager: jhubbard
ms.workload: dotnet
ms.openlocfilehash: 87406da2c591f9f3a8f47adb2029bf1e239cc64e
ms.sourcegitcommit: 16186c34a957fdd52e5db7294f291f7530ac9d24
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 12/22/2017
---
# <a name="connection-strings-and-configuration-files"></a><span data-ttu-id="32cf5-102">Připojovací řetězce a konfigurační soubory</span><span class="sxs-lookup"><span data-stu-id="32cf5-102">Connection Strings and Configuration Files</span></span>
<span data-ttu-id="32cf5-103">Vložení připojovacích řetězců v kódu aplikace může vést k ohrožení zabezpečení a problémy při údržbě.</span><span class="sxs-lookup"><span data-stu-id="32cf5-103">Embedding connection strings in your application's code can lead to security vulnerabilities and maintenance problems.</span></span> <span data-ttu-id="32cf5-104">Nezašifrované připojovací řetězce zkompilovat do zdrojového kódu aplikace lze zobrazit pomocí [Ildasm.exe (IL Disassembler)](../../../../docs/framework/tools/ildasm-exe-il-disassembler.md) nástroj.</span><span class="sxs-lookup"><span data-stu-id="32cf5-104">Unencrypted connection strings compiled into an application's source code can be viewed using the [Ildasm.exe (IL Disassembler)](../../../../docs/framework/tools/ildasm-exe-il-disassembler.md) tool.</span></span> <span data-ttu-id="32cf5-105">Navíc pokud se připojovací řetězec někdy změní, musí zopakovat vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="32cf5-105">Moreover, if the connection string ever changes, your application must be recompiled.</span></span> <span data-ttu-id="32cf5-106">Z těchto důvodů doporučujeme ukládání připojovacích řetězců v konfiguračním souboru aplikace.</span><span class="sxs-lookup"><span data-stu-id="32cf5-106">For these reasons, we recommend storing connection strings in an application configuration file.</span></span>  
  
## <a name="working-with-application-configuration-files"></a><span data-ttu-id="32cf5-107">Práce s konfigurační soubory aplikace</span><span class="sxs-lookup"><span data-stu-id="32cf5-107">Working with Application Configuration Files</span></span>  
 <span data-ttu-id="32cf5-108">Konfigurační soubory aplikace obsahují nastavení, které jsou specifické pro konkrétní aplikace.</span><span class="sxs-lookup"><span data-stu-id="32cf5-108">Application configuration files contain settings that are specific to a particular application.</span></span> <span data-ttu-id="32cf5-109">Například aplikace ASP.NET může mít jeden nebo více **web.config** soubory a aplikace pro systém Windows může mít volitelný **app.config** souboru.</span><span class="sxs-lookup"><span data-stu-id="32cf5-109">For example, an ASP.NET application can have one or more **web.config** files, and a Windows application can have an optional **app.config** file.</span></span> <span data-ttu-id="32cf5-110">Konfigurační soubory sdílejí společné prvky, i když se název a umístění konfiguračního souboru se liší v závislosti na hostiteli aplikace.</span><span class="sxs-lookup"><span data-stu-id="32cf5-110">Configuration files share common elements, although the name and location of a configuration file vary depending on the application's host.</span></span>  
  
### <a name="the-connectionstrings-section"></a><span data-ttu-id="32cf5-111">ConnectionStrings části</span><span class="sxs-lookup"><span data-stu-id="32cf5-111">The connectionStrings Section</span></span>  
 <span data-ttu-id="32cf5-112">Připojovací řetězce mohou být uloženy jako páry klíč hodnota **connectionStrings** části **konfigurace** element konfiguračního souboru aplikace.</span><span class="sxs-lookup"><span data-stu-id="32cf5-112">Connection strings can be stored as key/value pairs in the **connectionStrings** section of the **configuration** element of an application configuration file.</span></span> <span data-ttu-id="32cf5-113">Podřízené elementy obsahovat **přidat**, **vymazat**, a **odebrat**.</span><span class="sxs-lookup"><span data-stu-id="32cf5-113">Child elements include **add**, **clear**, and **remove**.</span></span>  
  
 <span data-ttu-id="32cf5-114">Následující fragment souboru konfigurace ukazuje syntaxi pro ukládání připojovací řetězec a schéma.</span><span class="sxs-lookup"><span data-stu-id="32cf5-114">The following configuration file fragment demonstrates the schema and syntax for storing a connection string.</span></span> <span data-ttu-id="32cf5-115">**Název** atribut je název, který zadáte k jednoznačné identifikaci připojovací řetězec tak, aby se dá načíst za běhu.</span><span class="sxs-lookup"><span data-stu-id="32cf5-115">The **name** attribute is a name that you provide to uniquely identify a connection string so that it can be retrieved at run time.</span></span> <span data-ttu-id="32cf5-116">**ProviderName** je invariantní název zprostředkovatele dat .NET Framework, která je registrována v souboru machine.config.</span><span class="sxs-lookup"><span data-stu-id="32cf5-116">The **providerName** is the invariant name of the .NET Framework data provider, which is registered in the machine.config file.</span></span>  
  
```xml  
<?xml version='1.0' encoding='utf-8'?>  
  <configuration>  
    <connectionStrings>  
      <clear />  
      <add name="Name"   
       providerName="System.Data.ProviderName"   
       connectionString="Valid Connection String;" />  
    </connectionStrings>  
  </configuration>  
```  
  
> [!NOTE]
>  <span data-ttu-id="32cf5-117">Můžete uložit součást připojovací řetězec v konfiguračním souboru a použít <xref:System.Data.Common.DbConnectionStringBuilder> třída dokončit v době běhu.</span><span class="sxs-lookup"><span data-stu-id="32cf5-117">You can save part of a connection string in a configuration file and use the <xref:System.Data.Common.DbConnectionStringBuilder> class to complete it at run time.</span></span> <span data-ttu-id="32cf5-118">To je užitečné v situacích, kde si nejste jisti, elementy připojovacího řetězce předem, nebo pokud nechcete uložit citlivé informace v konfiguračním souboru.</span><span class="sxs-lookup"><span data-stu-id="32cf5-118">This is useful in scenarios where you do not know elements of the connection string ahead of time, or when you do not want to save sensitive information in a configuration file.</span></span> <span data-ttu-id="32cf5-119">Další informace najdete v tématu [Tvůrci řetězců pro připojení](../../../../docs/framework/data/adonet/connection-string-builders.md).</span><span class="sxs-lookup"><span data-stu-id="32cf5-119">For more information, see [Connection String Builders](../../../../docs/framework/data/adonet/connection-string-builders.md).</span></span>  
  
### <a name="using-external-configuration-files"></a><span data-ttu-id="32cf5-120">Pomocí externích konfigurační soubory</span><span class="sxs-lookup"><span data-stu-id="32cf5-120">Using External Configuration Files</span></span>  
 <span data-ttu-id="32cf5-121">Externí konfigurační soubory jsou samostatné soubory, které obsahují fragment konfigurační soubor, který se skládá z jedné části.</span><span class="sxs-lookup"><span data-stu-id="32cf5-121">External configuration files are separate files that contain a fragment of a configuration file consisting of a single section.</span></span> <span data-ttu-id="32cf5-122">Externí konfigurační soubor odkazuje hlavní konfiguračního souboru.</span><span class="sxs-lookup"><span data-stu-id="32cf5-122">The external configuration file is then referenced by the main configuration file.</span></span> <span data-ttu-id="32cf5-123">Ukládání **connectionStrings** v fyzicky oddělené souboru je užitečné v situacích, kde může být připojovací řetězce upravit po nasazení aplikace.</span><span class="sxs-lookup"><span data-stu-id="32cf5-123">Storing the **connectionStrings** section in a physically separate file is useful in situations where connection strings may be edited after the application is deployed.</span></span> <span data-ttu-id="32cf5-124">Standardní chování ASP.NET je například restartovat domény aplikace při změně konfigurační soubory, výsledkem je ke ztrátě informací o stavu.</span><span class="sxs-lookup"><span data-stu-id="32cf5-124">For example, the standard ASP.NET behavior is to restart an application domain when configuration files are modified, which results in state information being lost.</span></span> <span data-ttu-id="32cf5-125">Úprava externí konfigurační soubor ale nezpůsobí restartování aplikace.</span><span class="sxs-lookup"><span data-stu-id="32cf5-125">However, modifying an external configuration file does not cause an application restart.</span></span> <span data-ttu-id="32cf5-126">Externí konfigurační soubory nejsou omezeny na ASP.NET; Můžete také používají aplikace Windows.</span><span class="sxs-lookup"><span data-stu-id="32cf5-126">External configuration files are not limited to ASP.NET; they can also be used by Windows applications.</span></span> <span data-ttu-id="32cf5-127">Kromě toho zabezpečení přístupu k souboru a oprávnění lze omezit přístup k externí konfigurační soubory.</span><span class="sxs-lookup"><span data-stu-id="32cf5-127">In addition, file access security and permissions can be used to restrict access to external configuration files.</span></span> <span data-ttu-id="32cf5-128">Práce s externí konfigurační soubory v době běhu je transparentní a vyžaduje žádné speciální kódování.</span><span class="sxs-lookup"><span data-stu-id="32cf5-128">Working with external configuration files at run time is transparent, and requires no special coding.</span></span>  
  
 <span data-ttu-id="32cf5-129">K ukládání připojovacích řetězců v externí konfigurační soubor, vytvořit samostatný soubor, který obsahuje pouze **connectionStrings** části.</span><span class="sxs-lookup"><span data-stu-id="32cf5-129">To store connection strings in an external configuration file, create a separate file that contains only the **connectionStrings** section.</span></span> <span data-ttu-id="32cf5-130">Neobsahují žádné další prvky, oddíly nebo atributy.</span><span class="sxs-lookup"><span data-stu-id="32cf5-130">Do not include any additional elements, sections, or attributes.</span></span> <span data-ttu-id="32cf5-131">Tento příklad ukazuje syntaxi pro externí konfigurační soubor.</span><span class="sxs-lookup"><span data-stu-id="32cf5-131">This example shows the syntax for an external configuration file.</span></span>  
  
```xml  
<connectionStrings>  
  <add name="Name"   
   providerName="System.Data.ProviderName"   
   connectionString="Valid Connection String;" />  
</connectionStrings>  
```  
  
 <span data-ttu-id="32cf5-132">V konfiguračním souboru hlavní aplikace, můžete použít **vlastnost configSource** atributu zadejte plně kvalifikovaný název a umístění externího souboru.</span><span class="sxs-lookup"><span data-stu-id="32cf5-132">In the main application configuration file, you use the **configSource** attribute to specify the fully qualified name and location of the external file.</span></span> <span data-ttu-id="32cf5-133">Tento příklad se týká externí konfigurační soubor s názvem `connections.config`.</span><span class="sxs-lookup"><span data-stu-id="32cf5-133">This example refers to an external configuration file named `connections.config`.</span></span>  
  
```xml  
<?xml version='1.0' encoding='utf-8'?>  
<configuration>  
    <connectionStrings configSource="connections.config"/>  
</configuration>  
```  
  
## <a name="retrieving-connection-strings-at-run-time"></a><span data-ttu-id="32cf5-134">Načítání řetězců připojení v době běhu</span><span class="sxs-lookup"><span data-stu-id="32cf5-134">Retrieving Connection Strings at Run Time</span></span>  
 <span data-ttu-id="32cf5-135">Zavedeny nové třídy v rozhraní .NET Framework 2.0 <xref:System.Configuration> obor názvů pro zjednodušení načítání připojovací řetězce z konfigurační soubory v době běhu.</span><span class="sxs-lookup"><span data-stu-id="32cf5-135">The .NET Framework 2.0 introduced new classes in the <xref:System.Configuration> namespace to simplify retrieving connection strings from configuration files at run time.</span></span> <span data-ttu-id="32cf5-136">Připojovací řetězec lze načíst prostřednictvím kódu programu podle názvu nebo podle názvu zprostředkovatele.</span><span class="sxs-lookup"><span data-stu-id="32cf5-136">You can programmatically retrieve a connection string by name or by provider name.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="32cf5-137">**Machine.config** soubor zároveň obsahuje **connectionStrings** oddíl, který obsahuje připojovací řetězce, které využívá sada Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="32cf5-137">The **machine.config** file also contains a **connectionStrings** section, which contains connection strings used by Visual Studio.</span></span> <span data-ttu-id="32cf5-138">Při načítání podle názvu zprostředkovatele z připojovací řetězce **app.config** souboru v aplikaci Windows, připojovací řetězce v **machine.config** získat načíst první a potom položky z **app.config**. Přidání **vymazat** ihned po **connectionStrings** element odebere všechny zděděné odkazy z datové struktury v paměti, tak, aby připojovací řetězce definované v místní **app.config** jsou považovány za souboru.</span><span class="sxs-lookup"><span data-stu-id="32cf5-138">When retrieving connection strings by provider name from the **app.config** file in a Windows application, the connection strings in **machine.config** get loaded first, and then the entries from **app.config**. Adding **clear** immediately after the **connectionStrings** element removes all inherited references from the data structure in memory, so that only the connection strings defined in the local **app.config** file are considered.</span></span>  
  
### <a name="working-with-the-configuration-classes"></a><span data-ttu-id="32cf5-139">Práce s třídami konfigurace</span><span class="sxs-lookup"><span data-stu-id="32cf5-139">Working with the Configuration Classes</span></span>  
 <span data-ttu-id="32cf5-140">Od verze rozhraní .NET Framework 2.0, <xref:System.Configuration.ConfigurationManager> se používá při práci s konfigurační soubory v místním počítači, nahraďte zastaralé <xref:System.Configuration.ConfigurationSettings>.</span><span class="sxs-lookup"><span data-stu-id="32cf5-140">Starting with the .NET Framework 2.0, <xref:System.Configuration.ConfigurationManager> is used when working with configuration files on the local computer, replacing the deprecated <xref:System.Configuration.ConfigurationSettings>.</span></span> <span data-ttu-id="32cf5-141"><xref:System.Web.Configuration.WebConfigurationManager>se používá pro práci s konfigurační soubory technologie ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="32cf5-141"><xref:System.Web.Configuration.WebConfigurationManager> is used to work with ASP.NET configuration files.</span></span> <span data-ttu-id="32cf5-142">Je navržen pro práci s použitím konfiguračních souborů na webovém serveru a umožňuje programový přístup k oddíly konfiguračního souboru, jako **system.web**.</span><span class="sxs-lookup"><span data-stu-id="32cf5-142">It is designed to work with configuration files on a Web server, and allows programmatic access to configuration file sections such as **system.web**.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="32cf5-143">Přístup k konfigurační soubory v době běhu vyžaduje udělení oprávnění ke volající; požadovaná oprávnění závisí na typu aplikace, konfigurační soubor a umístění.</span><span class="sxs-lookup"><span data-stu-id="32cf5-143">Accessing configuration files at run time requires granting permissions to the caller; the required permissions depend on the type of application, configuration file, and location.</span></span> <span data-ttu-id="32cf5-144">Další informace najdete v tématu [pomocí třídy konfigurace](http://msdn.microsoft.com/library/98d2b386-baf6-4a17-974b-76e3b4c87acc) a <xref:System.Web.Configuration.WebConfigurationManager> pro aplikace ASP.NET a <xref:System.Configuration.ConfigurationManager> pro aplikace pro Windows.</span><span class="sxs-lookup"><span data-stu-id="32cf5-144">For more information, see [Using the Configuration Classes](http://msdn.microsoft.com/library/98d2b386-baf6-4a17-974b-76e3b4c87acc) and <xref:System.Web.Configuration.WebConfigurationManager> for ASP.NET applications, and <xref:System.Configuration.ConfigurationManager> for Windows applications.</span></span>  
  
 <span data-ttu-id="32cf5-145">Můžete použít <xref:System.Configuration.ConnectionStringSettingsCollection> načíst připojovací řetězce z konfigurační soubory aplikace.</span><span class="sxs-lookup"><span data-stu-id="32cf5-145">You can use the <xref:System.Configuration.ConnectionStringSettingsCollection> to retrieve connection strings from application configuration files.</span></span> <span data-ttu-id="32cf5-146">Obsahuje kolekci <xref:System.Configuration.ConnectionStringSettings> objekty, z nichž každý představuje jednu položku v **connectionStrings** části.</span><span class="sxs-lookup"><span data-stu-id="32cf5-146">It contains a collection of <xref:System.Configuration.ConnectionStringSettings> objects, each of which represents a single entry in the **connectionStrings** section.</span></span> <span data-ttu-id="32cf5-147">Jeho vlastnosti namapovat na atributy řetězec připojení, umožňují načíst připojovací řetězec tak, že zadáte název nebo název zprostředkovatele.</span><span class="sxs-lookup"><span data-stu-id="32cf5-147">Its properties map to connection string attributes, allowing you to retrieve a connection string by specifying the name or the provider name.</span></span>  
  
|<span data-ttu-id="32cf5-148">Vlastnost</span><span class="sxs-lookup"><span data-stu-id="32cf5-148">Property</span></span>|<span data-ttu-id="32cf5-149">Popis</span><span class="sxs-lookup"><span data-stu-id="32cf5-149">Description</span></span>|  
|--------------|-----------------|  
|<xref:System.Configuration.ConnectionStringSettings.Name%2A>|<span data-ttu-id="32cf5-150">Název připojovacího řetězce.</span><span class="sxs-lookup"><span data-stu-id="32cf5-150">The name of the connection string.</span></span> <span data-ttu-id="32cf5-151">Se mapuje **název** atribut.</span><span class="sxs-lookup"><span data-stu-id="32cf5-151">Maps to the **name** attribute.</span></span>|  
|<xref:System.Configuration.ConnectionStringSettings.ProviderName%2A>|<span data-ttu-id="32cf5-152">Zprostředkovatel plně kvalifikovaný název.</span><span class="sxs-lookup"><span data-stu-id="32cf5-152">The fully qualified provider name.</span></span> <span data-ttu-id="32cf5-153">Se mapuje **providerName** atribut.</span><span class="sxs-lookup"><span data-stu-id="32cf5-153">Maps to the **providerName** attribute.</span></span>|  
|<xref:System.Configuration.ConnectionStringSettings.ConnectionString%2A>|<span data-ttu-id="32cf5-154">Připojovací řetězec.</span><span class="sxs-lookup"><span data-stu-id="32cf5-154">The connection string.</span></span> <span data-ttu-id="32cf5-155">Se mapuje **connectionString** atribut.</span><span class="sxs-lookup"><span data-stu-id="32cf5-155">Maps to the **connectionString** attribute.</span></span>|  
  
### <a name="example-listing-all-connection-strings"></a><span data-ttu-id="32cf5-156">Příklad: Výpis všech připojovací řetězce</span><span class="sxs-lookup"><span data-stu-id="32cf5-156">Example: Listing All Connection Strings</span></span>  
 <span data-ttu-id="32cf5-157">V tomto příkladu prochází `ConnectionStringSettings` kolekce a zobrazuje <xref:System.Configuration.ConnectionStringSettings.Name%2A>, <xref:System.Configuration.ConnectionStringSettings.ProviderName%2A>, a <xref:System.Configuration.ConnectionStringSettings.ConnectionString%2A> vlastnosti v okně konzoly.</span><span class="sxs-lookup"><span data-stu-id="32cf5-157">This example iterates through the `ConnectionStringSettings` collection and displays the <xref:System.Configuration.ConnectionStringSettings.Name%2A>, <xref:System.Configuration.ConnectionStringSettings.ProviderName%2A>, and <xref:System.Configuration.ConnectionStringSettings.ConnectionString%2A> properties in the console window.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="32cf5-158">System.Configuration.dll není zahrnut ve všech typech projektů a budete muset nastavit odkaz na jeho pro použití tříd konfigurace.</span><span class="sxs-lookup"><span data-stu-id="32cf5-158">System.Configuration.dll is not included in all project types, and you may need to set a reference to it in order to use the configuration classes.</span></span> <span data-ttu-id="32cf5-159">Název a umístění konfiguračního souboru konkrétní aplikace se liší podle typu aplikace a proces hostování.</span><span class="sxs-lookup"><span data-stu-id="32cf5-159">The name and location of a particular application configuration file varies by the type of application and the hosting process.</span></span>  
  
 [!code-csharp[DataWorks ConnectionStringSettings.RetrieveFromConfig#1](../../../../samples/snippets/csharp/VS_Snippets_ADO.NET/DataWorks ConnectionStringSettings.RetrieveFromConfig/CS/source.cs#1)]
 [!code-vb[DataWorks ConnectionStringSettings.RetrieveFromConfig#1](../../../../samples/snippets/visualbasic/VS_Snippets_ADO.NET/DataWorks ConnectionStringSettings.RetrieveFromConfig/VB/source.vb#1)]  
  
### <a name="example-retrieving-a-connection-string-by-name"></a><span data-ttu-id="32cf5-160">Příklad: Načítání připojovací řetězec podle názvu</span><span class="sxs-lookup"><span data-stu-id="32cf5-160">Example: Retrieving a Connection String by Name</span></span>  
 <span data-ttu-id="32cf5-161">Tento příklad ukazuje, jak k získání připojovacího řetězce z konfiguračního souboru a to zadáním názvu.</span><span class="sxs-lookup"><span data-stu-id="32cf5-161">This example demonstrates how to retrieve a connection string from a configuration file by specifying its name.</span></span> <span data-ttu-id="32cf5-162">Kód vytvoří <xref:System.Configuration.ConnectionStringSettings> objekt, odpovídající zadaný vstupní parametr <xref:System.Configuration.ConfigurationManager.ConnectionStrings%2A> název.</span><span class="sxs-lookup"><span data-stu-id="32cf5-162">The code creates a <xref:System.Configuration.ConnectionStringSettings> object, matching the supplied input parameter to the <xref:System.Configuration.ConfigurationManager.ConnectionStrings%2A> name.</span></span> <span data-ttu-id="32cf5-163">Pokud je nalezen žádný odpovídající název, funkce vrátí hodnotu `null` (`Nothing` v jazyce Visual Basic).</span><span class="sxs-lookup"><span data-stu-id="32cf5-163">If no matching name is found, the function returns `null` (`Nothing` in Visual Basic).</span></span>  
  
 [!code-csharp[DataWorks ConnectionStringSettings.RetrieveFromConfigByName#1](../../../../samples/snippets/csharp/VS_Snippets_ADO.NET/DataWorks ConnectionStringSettings.RetrieveFromConfigByName/CS/source.cs#1)]
 [!code-vb[DataWorks ConnectionStringSettings.RetrieveFromConfigByName#1](../../../../samples/snippets/visualbasic/VS_Snippets_ADO.NET/DataWorks ConnectionStringSettings.RetrieveFromConfigByName/VB/source.vb#1)]  
  
### <a name="example-retrieving-a-connection-string-by-provider-name"></a><span data-ttu-id="32cf5-164">Příklad: Načítání podle názvu zprostředkovatele připojovací řetězec</span><span class="sxs-lookup"><span data-stu-id="32cf5-164">Example: Retrieving a Connection String by Provider Name</span></span>  
 <span data-ttu-id="32cf5-165">Tento příklad ukazuje, jak načíst připojovací řetězec tak, že zadání názvu zprostředkovatele neutrální ve formátu *System.Data.ProviderName*.</span><span class="sxs-lookup"><span data-stu-id="32cf5-165">This example demonstrates how to retrieve a connection string by specifying the provider-invariant name in the format *System.Data.ProviderName*.</span></span> <span data-ttu-id="32cf5-166">Kód iteruje <xref:System.Configuration.ConnectionStringSettingsCollection> a vrátí připojovací řetězec pro první <xref:System.Configuration.ConnectionStringSettings.ProviderName%2A> nalezen.</span><span class="sxs-lookup"><span data-stu-id="32cf5-166">The code iterates through the <xref:System.Configuration.ConnectionStringSettingsCollection> and returns the connection string for the first <xref:System.Configuration.ConnectionStringSettings.ProviderName%2A> found.</span></span> <span data-ttu-id="32cf5-167">Pokud není nalezen název zprostředkovatele, funkce vrátí hodnotu `null` (`Nothing` v jazyce Visual Basic).</span><span class="sxs-lookup"><span data-stu-id="32cf5-167">If the provider name is not found, the function returns `null` (`Nothing` in Visual Basic).</span></span>  
  
 [!code-csharp[DataWorks ConnectionStringSettings.RetrieveFromConfigByProvider#1](../../../../samples/snippets/csharp/VS_Snippets_ADO.NET/DataWorks ConnectionStringSettings.RetrieveFromConfigByProvider/CS/source.cs#1)]
 [!code-vb[DataWorks ConnectionStringSettings.RetrieveFromConfigByProvider#1](../../../../samples/snippets/visualbasic/VS_Snippets_ADO.NET/DataWorks ConnectionStringSettings.RetrieveFromConfigByProvider/VB/source.vb#1)]  
  
## <a name="encrypting-configuration-file-sections-using-protected-configuration"></a><span data-ttu-id="32cf5-168">Šifrování oddíly konfiguračního souboru pomocí chráněné konfigurace</span><span class="sxs-lookup"><span data-stu-id="32cf5-168">Encrypting Configuration File Sections Using Protected Configuration</span></span>  
 <span data-ttu-id="32cf5-169">ASP.NET 2.0 zavedly novou funkci, s názvem *chráněné konfigurace*, který umožňuje šifrování citlivých informací v konfiguračním souboru.</span><span class="sxs-lookup"><span data-stu-id="32cf5-169">ASP.NET 2.0 introduced a new feature, called *protected configuration*, that enables you to encrypt sensitive information in a configuration file.</span></span> <span data-ttu-id="32cf5-170">I když primárně určený pro technologii ASP.NET, chráněné konfigurace mohou sloužit také k šifrování souboru konfigurační oddíly funkce v aplikace systému Windows.</span><span class="sxs-lookup"><span data-stu-id="32cf5-170">Although primarily designed for ASP.NET, protected configuration can also be used to encrypt configuration file sections in Windows applications.</span></span> <span data-ttu-id="32cf5-171">Podrobný popis funkcí chráněné konfigurace najdete v tématu [šifrování informací pomocí chráněné konfigurace](http://msdn.microsoft.com/library/51cdfe5b-9d82-458c-94ff-c551c4f38ed1).</span><span class="sxs-lookup"><span data-stu-id="32cf5-171">For a detailed description of the protected configuration capabilities, see [Encrypting Configuration Information Using Protected Configuration](http://msdn.microsoft.com/library/51cdfe5b-9d82-458c-94ff-c551c4f38ed1).</span></span>  
  
 <span data-ttu-id="32cf5-172">Následující konfigurační soubor fragmentovat ukazuje **connectionStrings** části po byla zašifrována.</span><span class="sxs-lookup"><span data-stu-id="32cf5-172">The following configuration file fragment shows the **connectionStrings** section after it has been encrypted.</span></span> <span data-ttu-id="32cf5-173">**ConfigProtectionProvider** určuje chráněné konfigurace zprostředkovatele, který používá k šifrování a dešifrování řetězce připojení.</span><span class="sxs-lookup"><span data-stu-id="32cf5-173">The **configProtectionProvider** specifies the protected configuration provider used to encrypt and decrypt the connection strings.</span></span> <span data-ttu-id="32cf5-174">**EncryptedData** část obsahuje šifrovaný text.</span><span class="sxs-lookup"><span data-stu-id="32cf5-174">The **EncryptedData** section contains the cipher text.</span></span>  
  
```xml  
<connectionStrings configProtectionProvider="DataProtectionConfigurationProvider">  
  <EncryptedData>  
    <CipherData>  
      <CipherValue>AQAAANCMnd8BFdERjHoAwE/Cl+sBAAAAH2... </CipherValue>  
    </CipherData>  
  </EncryptedData>  
</connectionStrings>  
```  
  
 <span data-ttu-id="32cf5-175">Pokud v době běhu je načteny šifrované připojovací řetězec, rozhraní .NET Framework používá k dešifrování zadaného zprostředkovatele **element CipherValue** a zpřístupní ji do vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="32cf5-175">When the encrypted connection string is retrieved at run time, the .NET Framework uses the specified provider to decrypt the **CipherValue** and make it available to your application.</span></span> <span data-ttu-id="32cf5-176">Není nutné zapsat žádný další kód spravovat proces dešifrování.</span><span class="sxs-lookup"><span data-stu-id="32cf5-176">You do not need to write any additional code to manage the decryption process.</span></span>  
  
### <a name="protected-configuration-providers"></a><span data-ttu-id="32cf5-177">Zprostředkovatele chráněné konfigurace</span><span class="sxs-lookup"><span data-stu-id="32cf5-177">Protected Configuration Providers</span></span>  
 <span data-ttu-id="32cf5-178">Zprostředkovatele chráněné konfigurace jsou zaregistrovány v **configProtectedData** části **machine.config** souboru v místním počítači, jak je znázorněno v následujícím fragmentu, který ukazuje dva chráněné konfigurace poskytovatele dodané s rozhraním .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="32cf5-178">Protected configuration providers are registered in the **configProtectedData** section of the **machine.config** file on the local computer, as shown in the following fragment, which shows the two protected configuration providers supplied with the .NET Framework.</span></span> <span data-ttu-id="32cf5-179">Zde zobrazených hodnot byl pravděpodobně zkrácen čitelnější.</span><span class="sxs-lookup"><span data-stu-id="32cf5-179">The values shown here have been truncated for readability.</span></span>  
  
```xml  
<configProtectedData defaultProvider="RsaProtectedConfigurationProvider">  
  <providers>  
    <add name="RsaProtectedConfigurationProvider"   
      type="System.Configuration.RsaProtectedConfigurationProvider, ... />  
    <add name="DataProtectionConfigurationProvider"   
      type="System.Configuration.DpapiProtectedConfigurationProvider, ... />  
  </providers>  
</configProtectedData>  
```  
  
 Můžete nakonfigurovat další chráněné konfigurace zprostředkovatele jejich přidáním do **machine.config** souboru. Můžete také vytvořit vlastní poskytovatele chráněné konfigurace, která dědí z <xref:System.Configuration.ProtectedConfigurationProvider> abstraktní základní třída. <span data-ttu-id="32cf5-182">Následující tabulka popisuje dvě konfigurační soubory součástí rozhraní .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="32cf5-182">The following table describes the two configuration files included with the .NET Framework.</span></span>  
  
|<span data-ttu-id="32cf5-183">Zprostředkovatel</span><span class="sxs-lookup"><span data-stu-id="32cf5-183">Provider</span></span>|<span data-ttu-id="32cf5-184">Popis</span><span class="sxs-lookup"><span data-stu-id="32cf5-184">Description</span></span>|  
|--------------|-----------------|  
|<!--zz<xref:System.Configuration.RSAProtectedConfigurationProvider>-->`System.Configuration.RSAProtectedConfigurationProvider`|<span data-ttu-id="32cf5-185">K šifrování a dešifrování dat používá algoritmus šifrování RSA.</span><span class="sxs-lookup"><span data-stu-id="32cf5-185">Uses the RSA encryption algorithm to encrypt and decrypt data.</span></span> <span data-ttu-id="32cf5-186">Algoritmus RSA lze použít pro šifrování pomocí veřejného klíče a digitální podpisy.</span><span class="sxs-lookup"><span data-stu-id="32cf5-186">The RSA algorithm can be used for both public key encryption and digital signatures.</span></span> <span data-ttu-id="32cf5-187">Je také známé jako "veřejný klíč" nebo asymetrické šifrování protože aktivuje dva různé klíče.</span><span class="sxs-lookup"><span data-stu-id="32cf5-187">It is also known as "public key" or asymmetrical encryption because it employs two different keys.</span></span> <span data-ttu-id="32cf5-188">Můžete použít [ASP.NET IIS Registration Tool (Aspnet_regiis.exe)](http://msdn.microsoft.com/library/6491c41e-e2b0-481f-9863-db3614d5f96b) k šifrování oddílů v souboru Web.config a správu šifrovacích klíčů.</span><span class="sxs-lookup"><span data-stu-id="32cf5-188">You can use the [ASP.NET IIS Registration Tool (Aspnet_regiis.exe)](http://msdn.microsoft.com/library/6491c41e-e2b0-481f-9863-db3614d5f96b) to encrypt sections in a Web.config file and manage the encryption keys.</span></span> <span data-ttu-id="32cf5-189">ASP.NET dešifruje konfigurační soubor při zpracování souboru.</span><span class="sxs-lookup"><span data-stu-id="32cf5-189">ASP.NET decrypts the configuration file when it processes the file.</span></span> <span data-ttu-id="32cf5-190">Identita aplikace ASP.NET musí mít přístup pro čtení k šifrovací klíč, který se používá k šifrování a dešifrování šifrovaných oddílů.</span><span class="sxs-lookup"><span data-stu-id="32cf5-190">The identity of the ASP.NET application must have read access to the encryption key that is used to encrypt and decrypt the encrypted sections.</span></span>|  
|<!--zz<xref:System.Configuration.DPAPIProtectedConfigurationProvider>-->`System.Configuration.DPAPIProtectedConfigurationProvider`|<span data-ttu-id="32cf5-191">Rozhraní Windows Data Protection API (DPAPI) používá k šifrování konfiguračních oddílů.</span><span class="sxs-lookup"><span data-stu-id="32cf5-191">Uses the Windows Data Protection API (DPAPI) to encrypt configuration sections.</span></span> <span data-ttu-id="32cf5-192">Pomocí předdefinovaných kryptografických služeb systému Windows a mohou být konfigurovány pro konkrétní počítač nebo konkrétního uživatele účtu ochranu.</span><span class="sxs-lookup"><span data-stu-id="32cf5-192">It uses the Windows built-in cryptographic services and can be configured for either machine-specific or user-account-specific protection.</span></span> <span data-ttu-id="32cf5-193">Je užitečné pro několik aplikací na stejném serveru, který potřebujete sdílet informace specifické pro počítač ochrany.</span><span class="sxs-lookup"><span data-stu-id="32cf5-193">Machine-specific protection is useful for multiple applications on the same server that need to share information.</span></span> <span data-ttu-id="32cf5-194">Uživatelská účet ochrany lze použít s služby, které běží s specifická identita uživatele, jako je například sdíleném hostitelském prostředí.</span><span class="sxs-lookup"><span data-stu-id="32cf5-194">User-account-specific protection can be used with services that run with a specific user identity, such as a shared hosting environment.</span></span> <span data-ttu-id="32cf5-195">Každá aplikace kompatibilní se samostatnou identitu, která omezuje přístup k prostředkům, například soubory a databáze.</span><span class="sxs-lookup"><span data-stu-id="32cf5-195">Each application runs under a separate identity which restricts access to resources such as files and databases.</span></span>|  
  
 <span data-ttu-id="32cf5-196">Oba poskytovatelé nabízejí silné šifrování dat.</span><span class="sxs-lookup"><span data-stu-id="32cf5-196">Both providers offer strong encryption of data.</span></span> <span data-ttu-id="32cf5-197">Ale pokud máte v úmyslu použít stejný soubor šifrované konfigurace na více serverech, jako jsou webové farmy, jenom `RsaProtectedConfigurationProvider` umožňuje exportovat šifrovací klíče používá k šifrování dat a importovat je na jiný server.</span><span class="sxs-lookup"><span data-stu-id="32cf5-197">However, if you are planning to use the same encrypted configuration file on multiple servers, such as a Web farm, only the `RsaProtectedConfigurationProvider` enables you to export the encryption keys used to encrypt the data and import them on another server.</span></span> <span data-ttu-id="32cf5-198">Další informace najdete v tématu [import a export chráněné konfigurace RSA klíč kontejnery](http://msdn.microsoft.com/library/f3022b39-f17f-48c1-b067-025eab0ce8bc).</span><span class="sxs-lookup"><span data-stu-id="32cf5-198">For more information, see [Importing and Exporting Protected Configuration RSA Key Containers](http://msdn.microsoft.com/library/f3022b39-f17f-48c1-b067-025eab0ce8bc).</span></span>  
  
### <a name="using-the-configuration-classes"></a><span data-ttu-id="32cf5-199">Pomocí třídy konfigurace</span><span class="sxs-lookup"><span data-stu-id="32cf5-199">Using the Configuration Classes</span></span>  
 <span data-ttu-id="32cf5-200"><xref:System.Configuration> Obor názvů obsahuje třídy pro práci s nastavením konfigurace prostřednictvím kódu programu.</span><span class="sxs-lookup"><span data-stu-id="32cf5-200">The <xref:System.Configuration> namespace provides classes to work with configuration settings programmatically.</span></span> <span data-ttu-id="32cf5-201"><xref:System.Configuration.ConfigurationManager> Třída poskytuje přístup k počítači, aplikace a uživatele konfigurační soubory.</span><span class="sxs-lookup"><span data-stu-id="32cf5-201">The <xref:System.Configuration.ConfigurationManager> class provides access to machine, application, and user configuration files.</span></span> <span data-ttu-id="32cf5-202">Pokud chcete vytvořit aplikaci ASP.NET, můžete použít <xref:System.Web.Configuration.WebConfigurationManager> třídy, která poskytuje stejné funkce, zatímco také umožňuje přístup k nastavení, která jsou jedinečná pro aplikace ASP.NET, jako jsou součástí  **\< System.Web >**.</span><span class="sxs-lookup"><span data-stu-id="32cf5-202">If you are creating an ASP.NET application, you can use the <xref:System.Web.Configuration.WebConfigurationManager> class, which provides the same functionality while also allowing you to access settings that are unique to ASP.NET applications, such as those found in **\<system.web>**.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="32cf5-203"><xref:System.Security.Cryptography> Obor názvů obsahuje třídy, které poskytují další možnosti pro šifrování a dešifrování dat.</span><span class="sxs-lookup"><span data-stu-id="32cf5-203">The <xref:System.Security.Cryptography> namespace contains classes that provide additional options for encrypting and decrypting data.</span></span> <span data-ttu-id="32cf5-204">Tyto třídy použijte, pokud budete potřebovat šifrovacím službám, které nejsou k dispozici pomocí chráněné konfigurace.</span><span class="sxs-lookup"><span data-stu-id="32cf5-204">Use these classes if you require cryptographic services that are not available using protected configuration.</span></span> <span data-ttu-id="32cf5-205">Některé z těchto tříd jsou obálek pro nespravované Microsoft CryptoAPI, zatímco jiné jsou čistě spravované implementace.</span><span class="sxs-lookup"><span data-stu-id="32cf5-205">Some of these classes are wrappers for the unmanaged Microsoft CryptoAPI, while others are purely managed implementations.</span></span> <span data-ttu-id="32cf5-206">Další informace najdete v tématu [šifrovacím službám](http://msdn.microsoft.com/en-us/68a1e844-c63c-44af-9247-f6716eb23781).</span><span class="sxs-lookup"><span data-stu-id="32cf5-206">For more information, see [Cryptographic Services](http://msdn.microsoft.com/en-us/68a1e844-c63c-44af-9247-f6716eb23781).</span></span>  
  
### <a name="appconfig-example"></a><span data-ttu-id="32cf5-207">Příklad souboru app.config</span><span class="sxs-lookup"><span data-stu-id="32cf5-207">App.config Example</span></span>  
 <span data-ttu-id="32cf5-208">Tento příklad ukazuje, jak k přepnutí šifrování **connectionStrings** kapitoly **app.config** soubor pro aplikaci systému Windows.</span><span class="sxs-lookup"><span data-stu-id="32cf5-208">This example demonstrates how to toggle encrypting the **connectionStrings** section in an **app.config** file for a Windows application.</span></span> <span data-ttu-id="32cf5-209">V tomto příkladu, které procedura používá název aplikace jako argument, například "MyApplication.exe".</span><span class="sxs-lookup"><span data-stu-id="32cf5-209">In this example, the procedure takes the name of the application as an argument, for example, "MyApplication.exe".</span></span> <span data-ttu-id="32cf5-210">**App.config** soubor pak bude šifrované a zkopírovány do složky, která obsahuje spustitelný soubor pod názvem "MyApplication.exe.config".</span><span class="sxs-lookup"><span data-stu-id="32cf5-210">The **app.config** file will then be encrypted and copied to the folder that contains the executable under the name of "MyApplication.exe.config".</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="32cf5-211">Připojovací řetězec mohou ho dešifrovat jenom na počítači, na kterém byla zašifrovaná.</span><span class="sxs-lookup"><span data-stu-id="32cf5-211">The connection string can only be decrypted on the computer on which it was encrypted.</span></span>  
  
 <span data-ttu-id="32cf5-212">Kód používá <xref:System.Configuration.ConfigurationManager.OpenExeConfiguration%2A> metoda otevřete **app.config** soubor pro úpravy a <xref:System.Configuration.ConfigurationManager.GetSection%2A> metoda vrátí **connectionStrings** části.</span><span class="sxs-lookup"><span data-stu-id="32cf5-212">The code uses the <xref:System.Configuration.ConfigurationManager.OpenExeConfiguration%2A> method to open the **app.config** file for editing, and the <xref:System.Configuration.ConfigurationManager.GetSection%2A> method returns the **connectionStrings** section.</span></span> <span data-ttu-id="32cf5-213">Zkontroluje kód <xref:System.Configuration.SectionInformation.IsProtected%2A> vlastnost, volání <xref:System.Configuration.SectionInformation.ProtectSection%2A> k zašifrování oddílu, pokud není šifrován.</span><span class="sxs-lookup"><span data-stu-id="32cf5-213">The code then checks the <xref:System.Configuration.SectionInformation.IsProtected%2A> property, calling the <xref:System.Configuration.SectionInformation.ProtectSection%2A> to encrypt the section if it is not encrypted.</span></span> <span data-ttu-id="32cf5-214"><xref:System.Configuration.SectionInformation.UnprotectSection%2A> Metoda je volána k dešifrování části.</span><span class="sxs-lookup"><span data-stu-id="32cf5-214">The <xref:System.Configuration.SectionInformation.UnprotectSection%2A> method is invoked to decrypt the section.</span></span> <span data-ttu-id="32cf5-215"><xref:System.Configuration.Configuration.Save%2A> Metoda dokončí operaci a uloží změny.</span><span class="sxs-lookup"><span data-stu-id="32cf5-215">The <xref:System.Configuration.Configuration.Save%2A> method completes the operation and saves the changes.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="32cf5-216">Je nutné nastavit odkaz na `System.Configuration.dll` ve vašem projektu pro kód pro spuštění.</span><span class="sxs-lookup"><span data-stu-id="32cf5-216">You must set a reference to `System.Configuration.dll` in your project for the code to run.</span></span>  
  
 [!code-csharp[DataWorks ConnectionStrings.Encrypt#1](../../../../samples/snippets/csharp/VS_Snippets_ADO.NET/DataWorks ConnectionStrings.Encrypt/CS/source.cs#1)]
 [!code-vb[DataWorks ConnectionStrings.Encrypt#1](../../../../samples/snippets/visualbasic/VS_Snippets_ADO.NET/DataWorks ConnectionStrings.Encrypt/VB/source.vb#1)]  
  
### <a name="webconfig-example"></a><span data-ttu-id="32cf5-217">Příklad souboru Web.config</span><span class="sxs-lookup"><span data-stu-id="32cf5-217">Web.config Example</span></span>  
 <span data-ttu-id="32cf5-218">Tento příklad používá <xref:System.Web.Configuration.WebConfigurationManager.OpenWebConfiguration%2A> metodu `WebConfigurationManager`.</span><span class="sxs-lookup"><span data-stu-id="32cf5-218">This example uses the <xref:System.Web.Configuration.WebConfigurationManager.OpenWebConfiguration%2A> method of the `WebConfigurationManager`.</span></span> <span data-ttu-id="32cf5-219">Všimněte si, že v tomto případě můžete zadat relativní cestu k **Web.config** souboru pomocí tildou.</span><span class="sxs-lookup"><span data-stu-id="32cf5-219">Note that in this case you can supply the relative path to the **Web.config** file by using a tilde.</span></span> <span data-ttu-id="32cf5-220">Kód vyžaduje odkaz na `System.Web.Configuration` třídy.</span><span class="sxs-lookup"><span data-stu-id="32cf5-220">The code requires a reference to the `System.Web.Configuration` class.</span></span>  
  
 [!code-csharp[DataWorks ConnectionStringsWeb.Encrypt#1](../../../../samples/snippets/csharp/VS_Snippets_ADO.NET/DataWorks ConnectionStringsWeb.Encrypt/CS/source.cs#1)]
 [!code-vb[DataWorks ConnectionStringsWeb.Encrypt#1](../../../../samples/snippets/visualbasic/VS_Snippets_ADO.NET/DataWorks ConnectionStringsWeb.Encrypt/VB/source.vb#1)]  
  
 <span data-ttu-id="32cf5-221">Další informace zabezpečení aplikace ASP.NET najdete v tématu [NIB: zabezpečení ASP.NET](http://msdn.microsoft.com/en-us/04b37532-18d9-40b4-8e5f-ee09a70b311d) a [postupy zabezpečení ASP.NET 2.0 na první pohled](http://go.microsoft.com/fwlink/?LinkId=59997) v Centru pro vývojáře technologie ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="32cf5-221">For more information securing ASP.NET applications, see [NIB: ASP.NET Security](http://msdn.microsoft.com/en-us/04b37532-18d9-40b4-8e5f-ee09a70b311d) and [ASP.NET 2.0 Security Practices at a Glance](http://go.microsoft.com/fwlink/?LinkId=59997) on the ASP.NET Developer Center.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="32cf5-222">Viz také</span><span class="sxs-lookup"><span data-stu-id="32cf5-222">See Also</span></span>  
 [<span data-ttu-id="32cf5-223">Tvůrci připojovacích řetězců</span><span class="sxs-lookup"><span data-stu-id="32cf5-223">Connection String Builders</span></span>](../../../../docs/framework/data/adonet/connection-string-builders.md)  
 [<span data-ttu-id="32cf5-224">Ochrana informací o připojení</span><span class="sxs-lookup"><span data-stu-id="32cf5-224">Protecting Connection Information</span></span>](../../../../docs/framework/data/adonet/protecting-connection-information.md)  
 [<span data-ttu-id="32cf5-225">Pomocí třídy konfigurace</span><span class="sxs-lookup"><span data-stu-id="32cf5-225">Using the Configuration Classes</span></span>](http://msdn.microsoft.com/library/98d2b386-baf6-4a17-974b-76e3b4c87acc)  
 [<span data-ttu-id="32cf5-226">Konfigurace aplikací</span><span class="sxs-lookup"><span data-stu-id="32cf5-226">Configuring Apps</span></span>](../../../../docs/framework/configure-apps/index.md)  
 [<span data-ttu-id="32cf5-227">Správa webu ASP.NET</span><span class="sxs-lookup"><span data-stu-id="32cf5-227">ASP.NET Web Site Administration</span></span>](http://msdn.microsoft.com/library/1298034b-5f7d-464d-abd1-ad9e6b3eeb7e)  
 [<span data-ttu-id="32cf5-228">ADO.NET spravované zprostředkovatelé a středisku pro vývojáře datové sady</span><span class="sxs-lookup"><span data-stu-id="32cf5-228">ADO.NET Managed Providers and DataSet Developer Center</span></span>](http://go.microsoft.com/fwlink/?LinkId=217917)
