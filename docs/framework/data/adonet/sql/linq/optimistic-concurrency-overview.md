---
title: "Optimistickou metodu souběžného: Přehled"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-ado
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: c2e38512-d0c8-4807-b30a-cb7e30338694
caps.latest.revision: "2"
author: JennieHubbard
ms.author: jhubbard
manager: jhubbard
ms.openlocfilehash: 52e83f443c0ae74587b4585beb51ddbeb093486a
ms.sourcegitcommit: bd1ef61f4bb794b25383d3d72e71041a5ced172e
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/18/2017
---
# <a name="optimistic-concurrency-overview"></a><span data-ttu-id="eddfa-102">Optimistickou metodu souběžného: Přehled</span><span class="sxs-lookup"><span data-stu-id="eddfa-102">Optimistic Concurrency: Overview</span></span>
[!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)]<span data-ttu-id="eddfa-103">podporuje optimistické řízení souběžného.</span><span class="sxs-lookup"><span data-stu-id="eddfa-103"> supports optimistic concurrency control.</span></span> <span data-ttu-id="eddfa-104">Následující tabulka popisuje podmínky, které platí pro optimistickou metodu souběžného v [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] dokumentaci:</span><span class="sxs-lookup"><span data-stu-id="eddfa-104">The following table describes terms that apply to optimistic concurrency in [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] documentation:</span></span>  
  
|<span data-ttu-id="eddfa-105">Podmínky</span><span class="sxs-lookup"><span data-stu-id="eddfa-105">Terms</span></span>|<span data-ttu-id="eddfa-106">Popis</span><span class="sxs-lookup"><span data-stu-id="eddfa-106">Description</span></span>|  
|-----------|-----------------|  
|<span data-ttu-id="eddfa-107">souběžnost</span><span class="sxs-lookup"><span data-stu-id="eddfa-107">concurrency</span></span>|<span data-ttu-id="eddfa-108">Situace, ve kterém pokusí aktualizovat na stejném řádku databáze dvě nebo více uživatelů najednou.</span><span class="sxs-lookup"><span data-stu-id="eddfa-108">The situation in which two or more users at the same time try to update the same database row.</span></span>|  
|<span data-ttu-id="eddfa-109">konflikt souběžnosti</span><span class="sxs-lookup"><span data-stu-id="eddfa-109">concurrency conflict</span></span>|<span data-ttu-id="eddfa-110">Situace, ve kterém pokusí odeslat konfliktní hodnoty, které mají některé sloupce řádku dvě nebo více uživatelů najednou.</span><span class="sxs-lookup"><span data-stu-id="eddfa-110">The situation in which two or more users at the same time try to submit conflicting values to one or more columns of a row.</span></span>|  
|<span data-ttu-id="eddfa-111">kontrola souběžnosti</span><span class="sxs-lookup"><span data-stu-id="eddfa-111">concurrency control</span></span>|<span data-ttu-id="eddfa-112">Metoda používaná k řešení konfliktů souběžnosti.</span><span class="sxs-lookup"><span data-stu-id="eddfa-112">The technique used to resolve concurrency conflicts.</span></span>|  
|<span data-ttu-id="eddfa-113">optimistické řízení souběžného</span><span class="sxs-lookup"><span data-stu-id="eddfa-113">optimistic concurrency control</span></span>|<span data-ttu-id="eddfa-114">Postup, který nejprve prověří, zda dalších transakcí změnily hodnoty v řádku před umožňující změny, které mají být odeslána.</span><span class="sxs-lookup"><span data-stu-id="eddfa-114">The technique that first investigates whether other transactions have changed values in a row before permitting changes to be submitted.</span></span><br /><br /> <span data-ttu-id="eddfa-115">Rozdíl oproti *řízení pesimistické souběžnosti*, který zamkne záznam, aby nedocházelo ke konfliktům souběžnosti.</span><span class="sxs-lookup"><span data-stu-id="eddfa-115">Contrast with *pessimistic concurrency control*, which locks the record to avoid concurrency conflicts.</span></span><br /><br /> <span data-ttu-id="eddfa-116">*Optimistické* řízení se říká, protože považuje za pravděpodobnost jednu transakci zasahovala do jiného pravděpodobně nebude.</span><span class="sxs-lookup"><span data-stu-id="eddfa-116">*Optimistic* control is so termed because it considers the chances of one transaction interfering with another to be unlikely.</span></span>|  
|<span data-ttu-id="eddfa-117">řešení konfliktů.</span><span class="sxs-lookup"><span data-stu-id="eddfa-117">conflict resolution</span></span>|<span data-ttu-id="eddfa-118">Proces obnovení položku konfliktní opakujte dotaz na databázi a potom sjednocování rozdílů.</span><span class="sxs-lookup"><span data-stu-id="eddfa-118">The process of refreshing a conflicting item by querying the database again and then reconciling differences.</span></span><br /><br /> <span data-ttu-id="eddfa-119">Při aktualizaci objektu, [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] modul sledování změny obsahuje následující data:</span><span class="sxs-lookup"><span data-stu-id="eddfa-119">When an object is refreshed, the [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] change tracker holds the following data:</span></span><br /><br /> <span data-ttu-id="eddfa-120">Zkontrolujte-hodnoty původně provést z databáze a použít pro aktualizaci.</span><span class="sxs-lookup"><span data-stu-id="eddfa-120">-   The values originally taken from the database and used for the update check.</span></span><br /><span data-ttu-id="eddfa-121">-Nové databáze hodnoty z následných dotazu.</span><span class="sxs-lookup"><span data-stu-id="eddfa-121">-   The new database values from the subsequent query.</span></span><br /><br /> [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)]<span data-ttu-id="eddfa-122">pak určuje, zda objekt je v konfliktu (to znamená, zda jeden nebo více hodnot členů změnil).</span><span class="sxs-lookup"><span data-stu-id="eddfa-122"> then determines whether the object is in conflict (that is, whether one or more of its member values has changed).</span></span> <span data-ttu-id="eddfa-123">Pokud objekt je v konfliktu, [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] vedle Určuje, které svých členů je v konfliktu.</span><span class="sxs-lookup"><span data-stu-id="eddfa-123">If the object is in conflict, [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] next determines which of its members are in conflict.</span></span><br /><br /> <span data-ttu-id="eddfa-124">Každý člen konfliktu, který [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] zjistí přidá do seznamu konflikt.</span><span class="sxs-lookup"><span data-stu-id="eddfa-124">Any member conflict that [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] discovers is added to a conflict list.</span></span>|  
  
 <span data-ttu-id="eddfa-125">V [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] objektový model *optimistickou metodu souběžného konflikt* nastane, když jsou splněny obě následující podmínky:</span><span class="sxs-lookup"><span data-stu-id="eddfa-125">In the [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] object model, an *optimistic concurrency conflict* occurs when both of the following conditions are true:</span></span>  
  
-   <span data-ttu-id="eddfa-126">Klient se pokusí odeslat změny do databáze.</span><span class="sxs-lookup"><span data-stu-id="eddfa-126">The client tries to submit changes to the database.</span></span>  
  
-   <span data-ttu-id="eddfa-127">Jedna nebo více hodnot kontrolu aktualizací v databázi byly aktualizovány od posledního čtení klienta.</span><span class="sxs-lookup"><span data-stu-id="eddfa-127">One or more update-check values have been updated in the database since the client last read them.</span></span>  
  
 <span data-ttu-id="eddfa-128">Řešení konfliktu obsahuje zjišťování, kteří členové objektu jsou v konfliktu a teprve potom co chcete udělat o něm.</span><span class="sxs-lookup"><span data-stu-id="eddfa-128">Resolution of this conflict includes discovering which members of the object are in conflict, and then deciding what you want to do about it.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="eddfa-129">Pouze členové mapovaná jako <xref:System.Data.Linq.Mapping.UpdateCheck.Always> nebo <xref:System.Data.Linq.Mapping.UpdateCheck.WhenChanged> účastnit optimistickou metodu souběžného kontroly.</span><span class="sxs-lookup"><span data-stu-id="eddfa-129">Only members mapped as <xref:System.Data.Linq.Mapping.UpdateCheck.Always> or <xref:System.Data.Linq.Mapping.UpdateCheck.WhenChanged> participate in optimistic concurrency checks.</span></span> <span data-ttu-id="eddfa-130">Pro členy označené je provedena žádná kontrola <xref:System.Data.Linq.Mapping.UpdateCheck.Never>.</span><span class="sxs-lookup"><span data-stu-id="eddfa-130">No check is performed for members marked <xref:System.Data.Linq.Mapping.UpdateCheck.Never>.</span></span> <span data-ttu-id="eddfa-131">Další informace naleznete v tématu <xref:System.Data.Linq.Mapping.UpdateCheck>.</span><span class="sxs-lookup"><span data-stu-id="eddfa-131">For more information, see <xref:System.Data.Linq.Mapping.UpdateCheck>.</span></span>  
  
## <a name="example"></a><span data-ttu-id="eddfa-132">Příklad</span><span class="sxs-lookup"><span data-stu-id="eddfa-132">Example</span></span>  
 <span data-ttu-id="eddfa-133">Například v následujícím scénáři uživatel1 začne Příprava aktualizace pomocí dotazu na databázi pro řádek.</span><span class="sxs-lookup"><span data-stu-id="eddfa-133">For example, in the following scenario, User1 starts to prepare an update by querying the database for a row.</span></span> <span data-ttu-id="eddfa-134">Uživatel1 obdrží řádek s hodnotami Alfreds Marie a organizační jednotky prodej.</span><span class="sxs-lookup"><span data-stu-id="eddfa-134">User1 receives a row with values of Alfreds, Maria, and Sales.</span></span>  
  
 <span data-ttu-id="eddfa-135">Uživatel1 chce změnit hodnotu pro sloupec Manager Alfred a hodnota sloupce oddělení marketingu.</span><span class="sxs-lookup"><span data-stu-id="eddfa-135">User1 wants to change the value of the Manager column to Alfred and the value of the Department column to Marketing.</span></span> <span data-ttu-id="eddfa-136">Předtím, než se tyto změny můžete odeslat uživatel1, uživatel2 byla odeslána změny databáze.</span><span class="sxs-lookup"><span data-stu-id="eddfa-136">Before User1 can submit those changes, User2 has submitted changes to the database.</span></span> <span data-ttu-id="eddfa-137">Hodnota sloupce pomocníka tak teď má byl změněn na Marie a hodnota sloupce oddělení službě.</span><span class="sxs-lookup"><span data-stu-id="eddfa-137">So now the value of the Assistant column has been changed to Mary and the value of the Department column to Service.</span></span>  
  
 <span data-ttu-id="eddfa-138">Když uživatel1 se nyní pokusí odeslat změny, odeslání selže a <xref:System.Data.Linq.ChangeConflictException> je vyvolána výjimka.</span><span class="sxs-lookup"><span data-stu-id="eddfa-138">When User1 now tries to submit changes, the submission fails and a <xref:System.Data.Linq.ChangeConflictException> exception is thrown.</span></span> <span data-ttu-id="eddfa-139">Tato situace nastane, protože hodnot v databázi pro oddělení a sloupec pomocníka nejsou ty, které nebyly očekávány.</span><span class="sxs-lookup"><span data-stu-id="eddfa-139">This result occurs because the database values for the Assistant column and the Department column are not those that were expected.</span></span> <span data-ttu-id="eddfa-140">Členy představující asistenta a oddělení sloupce je v konfliktu.</span><span class="sxs-lookup"><span data-stu-id="eddfa-140">Members representing the Assistant and Department columns are in conflict.</span></span> <span data-ttu-id="eddfa-141">Následující tabulka shrnuje situaci.</span><span class="sxs-lookup"><span data-stu-id="eddfa-141">The following table summarizes the situation.</span></span>  
  
||<span data-ttu-id="eddfa-142">Správce</span><span class="sxs-lookup"><span data-stu-id="eddfa-142">Manager</span></span>|<span data-ttu-id="eddfa-143">Pomocník pro</span><span class="sxs-lookup"><span data-stu-id="eddfa-143">Assistant</span></span>|<span data-ttu-id="eddfa-144">Oddělení</span><span class="sxs-lookup"><span data-stu-id="eddfa-144">Department</span></span>|  
|------|-------------|---------------|----------------|  
|<span data-ttu-id="eddfa-145">Původního stavu</span><span class="sxs-lookup"><span data-stu-id="eddfa-145">Original state</span></span>|<span data-ttu-id="eddfa-146">Alfreds</span><span class="sxs-lookup"><span data-stu-id="eddfa-146">Alfreds</span></span>|<span data-ttu-id="eddfa-147">Marie</span><span class="sxs-lookup"><span data-stu-id="eddfa-147">Maria</span></span>|<span data-ttu-id="eddfa-148">Prodeje</span><span class="sxs-lookup"><span data-stu-id="eddfa-148">Sales</span></span>|  
|<span data-ttu-id="eddfa-149">Uživatel1</span><span class="sxs-lookup"><span data-stu-id="eddfa-149">User1</span></span>|<span data-ttu-id="eddfa-150">Alfred</span><span class="sxs-lookup"><span data-stu-id="eddfa-150">Alfred</span></span>||<span data-ttu-id="eddfa-151">Marketingové</span><span class="sxs-lookup"><span data-stu-id="eddfa-151">Marketing</span></span>|  
|<span data-ttu-id="eddfa-152">uživatel2</span><span class="sxs-lookup"><span data-stu-id="eddfa-152">User2</span></span>||<span data-ttu-id="eddfa-153">Marie</span><span class="sxs-lookup"><span data-stu-id="eddfa-153">Mary</span></span>|<span data-ttu-id="eddfa-154">Služba</span><span class="sxs-lookup"><span data-stu-id="eddfa-154">Service</span></span>|  
  
 <span data-ttu-id="eddfa-155">Konflikty například to může vyřešit různými způsoby.</span><span class="sxs-lookup"><span data-stu-id="eddfa-155">You can resolve conflicts such as this in different ways.</span></span> <span data-ttu-id="eddfa-156">Další informace najdete v tématu [postupy: Správa konfliktů změnu](../../../../../../docs/framework/data/adonet/sql/linq/how-to-manage-change-conflicts.md).</span><span class="sxs-lookup"><span data-stu-id="eddfa-156">For more information, see [How to: Manage Change Conflicts](../../../../../../docs/framework/data/adonet/sql/linq/how-to-manage-change-conflicts.md).</span></span>  
  
## <a name="conflict-detection-and-resolution-checklist"></a><span data-ttu-id="eddfa-157">Zjišťování konfliktů a kontrolní seznam řešení</span><span class="sxs-lookup"><span data-stu-id="eddfa-157">Conflict Detection and Resolution Checklist</span></span>  
 <span data-ttu-id="eddfa-158">Můžete zjišťovat a řešení konfliktů na požadované úrovni podrobností.</span><span class="sxs-lookup"><span data-stu-id="eddfa-158">You can detect and resolve conflicts at any level of detail.</span></span> <span data-ttu-id="eddfa-159">V jedné extreme můžete vyřešit všechny konflikty v jednom ze tří způsobů (viz <xref:System.Data.Linq.RefreshMode>) bez další pozornost.</span><span class="sxs-lookup"><span data-stu-id="eddfa-159">At one extreme, you can resolve all conflicts in one of three ways (see <xref:System.Data.Linq.RefreshMode>) without additional consideration.</span></span> <span data-ttu-id="eddfa-160">V jiných extreme můžete určit konkrétní akce pro každý typ konflikt na každý člen v konfliktu.</span><span class="sxs-lookup"><span data-stu-id="eddfa-160">At the other extreme, you can designate a specific action for each type of conflict on every member in conflict.</span></span>  
  
-   <span data-ttu-id="eddfa-161">Zadejte nebo zkontrolovat <xref:System.Data.Linq.Mapping.UpdateCheck> možnosti v objektovém modelu.</span><span class="sxs-lookup"><span data-stu-id="eddfa-161">Specify or revise <xref:System.Data.Linq.Mapping.UpdateCheck> options in your object model.</span></span>  
  
     <span data-ttu-id="eddfa-162">Další informace najdete v tématu [postup: Určete který členové jsou testovány souběžnosti konflikty](../../../../../../docs/framework/data/adonet/sql/linq/how-to-specify-which-members-are-tested-for-concurrency-conflicts.md).</span><span class="sxs-lookup"><span data-stu-id="eddfa-162">For more information, see [How to: Specify Which Members are Tested for Concurrency Conflicts](../../../../../../docs/framework/data/adonet/sql/linq/how-to-specify-which-members-are-tested-for-concurrency-conflicts.md).</span></span>  
  
-   <span data-ttu-id="eddfa-163">V try/catch – blok volání <xref:System.Data.Linq.DataContext.SubmitChanges%2A>, určete, jaké okamžiku má vyvolání výjimky.</span><span class="sxs-lookup"><span data-stu-id="eddfa-163">In the try/catch block of your call to <xref:System.Data.Linq.DataContext.SubmitChanges%2A>, specify at what point you want exceptions to be thrown.</span></span>  
  
     <span data-ttu-id="eddfa-164">Další informace najdete v tématu [postup: zadejte při souběžnosti jsou výjimky vyvolány](../../../../../../docs/framework/data/adonet/sql/linq/how-to-specify-when-concurrency-exceptions-are-thrown.md).</span><span class="sxs-lookup"><span data-stu-id="eddfa-164">For more information, see [How to: Specify When Concurrency Exceptions are Thrown](../../../../../../docs/framework/data/adonet/sql/linq/how-to-specify-when-concurrency-exceptions-are-thrown.md).</span></span>  
  
-   <span data-ttu-id="eddfa-165">Určit, kolik podrobností o konfliktu můžete obnovit a zahrnout kódu do vaší bloku try/catch odpovídajícím způsobem.</span><span class="sxs-lookup"><span data-stu-id="eddfa-165">Determine how much conflict detail you want to retrieve, and include code in your try/catch block accordingly.</span></span>  
  
     <span data-ttu-id="eddfa-166">Další informace najdete v tématu [postupy: načtení Entity konflikt informace](../../../../../../docs/framework/data/adonet/sql/linq/how-to-retrieve-entity-conflict-information.md) a [postup: načíst informace o konfliktu člen](../../../../../../docs/framework/data/adonet/sql/linq/how-to-retrieve-member-conflict-information.md).</span><span class="sxs-lookup"><span data-stu-id="eddfa-166">For more information, see [How to: Retrieve Entity Conflict Information](../../../../../../docs/framework/data/adonet/sql/linq/how-to-retrieve-entity-conflict-information.md) and [How to: Retrieve Member Conflict Information](../../../../../../docs/framework/data/adonet/sql/linq/how-to-retrieve-member-conflict-information.md).</span></span>  
  
-   <span data-ttu-id="eddfa-167">Zahrnout do vaší `try` / `catch` code, jakým způsobem chcete řešení různých konfliktů zjistíte.</span><span class="sxs-lookup"><span data-stu-id="eddfa-167">Include in your `try`/`catch` code how you want to resolve the various conflicts you discover.</span></span>  
  
     <span data-ttu-id="eddfa-168">Další informace najdete v tématu [postup: vyřešit konflikty ponechá databázi hodnoty](../../../../../../docs/framework/data/adonet/sql/linq/how-to-resolve-conflicts-by-retaining-database-values.md), [postup: vyřešit konflikty hodnoty přepsání databáze](../../../../../../docs/framework/data/adonet/sql/linq/how-to-resolve-conflicts-by-overwriting-database-values.md), a [postup: vyřešit konflikty ve sloučení s hodnotami databáze](../../../../../../docs/framework/data/adonet/sql/linq/how-to-resolve-conflicts-by-merging-with-database-values.md).</span><span class="sxs-lookup"><span data-stu-id="eddfa-168">For more information, see [How to: Resolve Conflicts by Retaining Database Values](../../../../../../docs/framework/data/adonet/sql/linq/how-to-resolve-conflicts-by-retaining-database-values.md), [How to: Resolve Conflicts by Overwriting Database Values](../../../../../../docs/framework/data/adonet/sql/linq/how-to-resolve-conflicts-by-overwriting-database-values.md), and [How to: Resolve Conflicts by Merging with Database Values](../../../../../../docs/framework/data/adonet/sql/linq/how-to-resolve-conflicts-by-merging-with-database-values.md).</span></span>  
  
## <a name="linq-to-sql-types-that-support-conflict-discovery-and-resolution"></a><span data-ttu-id="eddfa-169">Technologie LINQ to SQL typy, které podporují konflikt zjišťování a řešení</span><span class="sxs-lookup"><span data-stu-id="eddfa-169">LINQ to SQL Types That Support Conflict Discovery and Resolution</span></span>  
 <span data-ttu-id="eddfa-170">Třídy a funkce, které chcete podporovat řešení konfliktů v optimistickou metodu souběžného v [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] patří:</span><span class="sxs-lookup"><span data-stu-id="eddfa-170">Classes and features to support the resolution of conflicts in optimistic concurrency in [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] include the following:</span></span>  
  
-   <xref:System.Data.Linq.ObjectChangeConflict?displayProperty=nameWithType>  
  
-   <xref:System.Data.Linq.MemberChangeConflict?displayProperty=nameWithType>  
  
-   <xref:System.Data.Linq.ChangeConflictCollection?displayProperty=nameWithType>  
  
-   <xref:System.Data.Linq.ChangeConflictException?displayProperty=nameWithType>  
  
-   <xref:System.Data.Linq.DataContext.ChangeConflicts%2A?displayProperty=nameWithType>  
  
-   <xref:System.Data.Linq.DataContext.SubmitChanges%2A?displayProperty=nameWithType>  
  
-   <xref:System.Data.Linq.DataContext.Refresh%2A?displayProperty=nameWithType>  
  
-   <xref:System.Data.Linq.Mapping.ColumnAttribute.UpdateCheck%2A?displayProperty=nameWithType>  
  
-   <xref:System.Data.Linq.Mapping.UpdateCheck?displayProperty=nameWithType>  
  
-   <xref:System.Data.Linq.RefreshMode?displayProperty=nameWithType>  
  
## <a name="see-also"></a><span data-ttu-id="eddfa-171">Viz také</span><span class="sxs-lookup"><span data-stu-id="eddfa-171">See Also</span></span>  
 [<span data-ttu-id="eddfa-172">Postupy: Správa je v konfliktu změn</span><span class="sxs-lookup"><span data-stu-id="eddfa-172">How to: Manage Change Conflicts</span></span>](../../../../../../docs/framework/data/adonet/sql/linq/how-to-manage-change-conflicts.md)
