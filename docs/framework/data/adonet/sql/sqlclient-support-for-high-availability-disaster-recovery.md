---
title: "SqlClient podporu pro vysokou dostupnost a zotavení po havárii"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-ado
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 61e0b396-09d7-4e13-9711-7dcbcbd103a0
caps.latest.revision: "13"
author: douglaslMS
ms.author: douglasl
manager: craigg
ms.workload: dotnet
ms.openlocfilehash: d2a444440af9dfaa2b084a55db9348fa48df7b54
ms.sourcegitcommit: ed26cfef4e18f6d93ab822d8c29f902cff3519d1
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 01/17/2018
---
# <a name="sqlclient-support-for-high-availability-disaster-recovery"></a><span data-ttu-id="e8e0d-102">SqlClient podporu pro vysokou dostupnost a zotavení po havárii</span><span class="sxs-lookup"><span data-stu-id="e8e0d-102">SqlClient Support for High Availability, Disaster Recovery</span></span>
<span data-ttu-id="e8e0d-103">Toto téma popisuje podporu SqlClient (přidáno v [!INCLUDE[net_v45](../../../../../includes/net-v45-md.md)]) pro vysokou dostupnost, zotavení po havárii – skupiny dostupnosti AlwaysOn.</span><span class="sxs-lookup"><span data-stu-id="e8e0d-103">This topic discusses SqlClient support (added in [!INCLUDE[net_v45](../../../../../includes/net-v45-md.md)]) for high-availability, disaster recovery -- AlwaysOn Availability Groups.</span></span>  <span data-ttu-id="e8e0d-104">Funkce skupin dostupnosti AlwaysOn byla přidána do [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] 2012.</span><span class="sxs-lookup"><span data-stu-id="e8e0d-104">AlwaysOn Availability Groups feature was added to [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] 2012.</span></span> <span data-ttu-id="e8e0d-105">Další informace o skupinách dostupnosti AlwaysOn najdete v tématu [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] na webu knihy Online.</span><span class="sxs-lookup"><span data-stu-id="e8e0d-105">For more information about AlwaysOn Availability Groups, see [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] Books Online.</span></span>  
  
 <span data-ttu-id="e8e0d-106">Nyní můžete určit naslouchacího procesu skupiny dostupnosti z (vysokou dostupnost, zotavení po havárii) skupiny dostupnosti (AG) nebo [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] 2012 Instance clusteru převzetí služeb při selhání ve vlastnosti připojení.</span><span class="sxs-lookup"><span data-stu-id="e8e0d-106">You can now specify the availability group listener of a (high-availability, disaster-recovery) availability group (AG) or [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] 2012 Failover Cluster Instance in the connection property.</span></span> <span data-ttu-id="e8e0d-107">Pokud aplikace SqlClient je připojen k databázi AlwaysOn, který převezme, původní připojení je přerušené a aplikace, musíte otevřít nové připojení k pokračovat v práci po převzetí.</span><span class="sxs-lookup"><span data-stu-id="e8e0d-107">If a SqlClient application is connected to an AlwaysOn database that fails over, the original connection is broken and the application must open a new connection to continue work after the failover.</span></span>  
  
 <span data-ttu-id="e8e0d-108">Pokud se nedaří připojit k naslouchací proces skupiny dostupnosti nebo [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] 2012 Instance clusteru převzetí služeb při selhání, a pokud více IP adres přidružený název hostitele, bude SqlClient postupně iterace všechny IP adresy přidružené položky DNS.</span><span class="sxs-lookup"><span data-stu-id="e8e0d-108">If you are not connecting to an availability group listener or [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] 2012 Failover Cluster Instance, and if multiple IP addresses are associated with a hostname, SqlClient will iterate sequentially through all IP addresses associated with DNS entry.</span></span> <span data-ttu-id="e8e0d-109">To může být časově náročná Pokud první IP adresu vrácenou pomocí serveru DNS není vázán na všechny síťová karta (NIC).</span><span class="sxs-lookup"><span data-stu-id="e8e0d-109">This can be time consuming if the first IP address returned by DNS server is not bound to any network interface card (NIC).</span></span> <span data-ttu-id="e8e0d-110">Při připojování k naslouchací proces skupiny dostupnosti nebo [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] 2012 Instance clusteru převzetí služeb při selhání, SqlClient pokusí navázat připojení k všechny IP adresy paralelně a pokud se pokus o připojení se podaří, ovladače se zahodí všechny čekající připojení pokusy.</span><span class="sxs-lookup"><span data-stu-id="e8e0d-110">When connecting to an availability group listener or [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] 2012 Failover Cluster Instance, SqlClient attempts to establish connections to all IP addresses in parallel and if a connection attempt succeeds, the driver will discard any pending connection attempts.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="e8e0d-111">Zvýšení časového limitu připojení a implementace logika opakovaných pokusů připojení zvýší pravděpodobnost, že aplikace budou připojovat ke skupině dostupnosti.</span><span class="sxs-lookup"><span data-stu-id="e8e0d-111">Increasing connection timeout and implementing connection retry logic will increase the probability that an application will connect to an availability group.</span></span> <span data-ttu-id="e8e0d-112">Navíc vzhledem k tomu, že připojení může selhat z důvodu selhání, měli byste implementovat logiku opakovaných pokusů připojení, opakování pokusu o připojení se nezdařilo, dokud ho znovu připojí.</span><span class="sxs-lookup"><span data-stu-id="e8e0d-112">Also, because a connection can fail because of a failover, you should implement connection retry logic, retrying a failed connection until it reconnects.</span></span>  
  
 <span data-ttu-id="e8e0d-113">Následující vlastnosti připojení byly přidány do SqlClient v [!INCLUDE[net_v45](../../../../../includes/net-v45-md.md)]:</span><span class="sxs-lookup"><span data-stu-id="e8e0d-113">The following connection properties were added to SqlClient in [!INCLUDE[net_v45](../../../../../includes/net-v45-md.md)]:</span></span>  
  
-   `ApplicationIntent`  
  
-   `MultiSubnetFailover`  
  
 <span data-ttu-id="e8e0d-114">Tato klíčová slova řetězce připojení s můžete upravit prostřednictvím kódu programu:</span><span class="sxs-lookup"><span data-stu-id="e8e0d-114">You can programmatically modify these connection string keywords with:</span></span>  
  
1.  <xref:System.Data.SqlClient.SqlConnectionStringBuilder.ApplicationIntent%2A>  
  
2.  <xref:System.Data.SqlClient.SqlConnectionStringBuilder.MultiSubnetFailover%2A>  
  
## <a name="connecting-with-multisubnetfailover"></a><span data-ttu-id="e8e0d-115">Propojení s MultiSubnetFailover</span><span class="sxs-lookup"><span data-stu-id="e8e0d-115">Connecting With MultiSubnetFailover</span></span>  
 <span data-ttu-id="e8e0d-116">Vždycky zadat `MultiSubnetFailover=True` při připojování k [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] 2012 naslouchací proces skupiny dostupnosti nebo [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] 2012 Instance clusteru převzetí služeb při selhání.</span><span class="sxs-lookup"><span data-stu-id="e8e0d-116">Always specify `MultiSubnetFailover=True` when connecting to a [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] 2012 availability group listener or [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] 2012 Failover Cluster Instance.</span></span> <span data-ttu-id="e8e0d-117">`MultiSubnetFailover`umožňuje rychlejší převzetí služeb při selhání pro všechny skupiny dostupnosti a nebo Instance clusteru převzetí služeb při selhání v [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] 2012 a budou výrazně zkrátit čas převzetí služeb při selhání pro jeden a více podsítí AlwaysOn topologie.</span><span class="sxs-lookup"><span data-stu-id="e8e0d-117">`MultiSubnetFailover` enables faster failover for all Availability Groups and or Failover Cluster Instance in [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] 2012 and will significantly reduce failover time for single and multi-subnet AlwaysOn topologies.</span></span> <span data-ttu-id="e8e0d-118">Během převzetí služeb více podsítí se klient pokusí připojení paralelně.</span><span class="sxs-lookup"><span data-stu-id="e8e0d-118">During a multi-subnet failover, the client will attempt connections in parallel.</span></span> <span data-ttu-id="e8e0d-119">Při selhání podsíť bude intenzivně pokus o připojení protokolu TCP.</span><span class="sxs-lookup"><span data-stu-id="e8e0d-119">During a subnet failover, will aggressively retry the TCP connection.</span></span>  
  
 <span data-ttu-id="e8e0d-120">`MultiSubnetFailover` Vlastnost připojení označuje, že aplikace je nasazený ve skupině dostupnosti nebo [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] 2012 Instance clusteru převzetí služeb při selhání a že SqlClient se pokusí připojit k databázi na primární [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] instance pomocí došlo k pokusu o připojení pro všechny IP adresy.</span><span class="sxs-lookup"><span data-stu-id="e8e0d-120">The `MultiSubnetFailover` connection property indicates that the application is being deployed in an availability group or [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] 2012 Failover Cluster Instance and that SqlClient will try to connect to the database on the primary [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] instance by trying to connect to all the IP addresses.</span></span> <span data-ttu-id="e8e0d-121">Když `MultiSubnetFailover=True` je zadán pro připojení, klient pokus obnovuje pokusy o připojení protokolu TCP rychleji než intervaly opakovaného přenosu TCP výchozí operační systém.</span><span class="sxs-lookup"><span data-stu-id="e8e0d-121">When `MultiSubnetFailover=True` is specified for a connection, the client retries TCP connection attempts faster than the operating system’s default TCP retransmit intervals.</span></span> <span data-ttu-id="e8e0d-122">To umožňuje rychlejší opětovného připojení po převzetí služeb při selhání skupiny dostupnosti AlwaysOn nebo Instance clusteru převzetí služeb při selhání AlwaysOn a používá se pro subnet jeden a více skupin dostupnosti i instance clusteru převzetí služeb při selhání.</span><span class="sxs-lookup"><span data-stu-id="e8e0d-122">This enables faster reconnection after failover of either an AlwaysOn Availability Group or an AlwaysOn Failover Cluster Instance, and is applicable to both single- and multi-subnet Availability Groups and Failover Cluster Instances.</span></span>  
  
 <span data-ttu-id="e8e0d-123">Další informace o klíčových slovech řetězec připojení v SqlClient najdete v tématu <xref:System.Data.SqlClient.SqlConnection.ConnectionString%2A>.</span><span class="sxs-lookup"><span data-stu-id="e8e0d-123">For more information about connection string keywords in SqlClient, see <xref:System.Data.SqlClient.SqlConnection.ConnectionString%2A>.</span></span>  
  
 <span data-ttu-id="e8e0d-124">Určení `MultiSubnetFailover=True` při připojování k něco jiného než naslouchací proces skupiny dostupnosti nebo [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] 2012 Instance clusteru převzetí služeb při selhání může mít za následek negativním dopadem na výkon a není podporována.</span><span class="sxs-lookup"><span data-stu-id="e8e0d-124">Specifying `MultiSubnetFailover=True` when connecting to something other than a availability group listener or [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] 2012 Failover Cluster Instance may result in a negative performance impact, and is not supported.</span></span>  
  
 <span data-ttu-id="e8e0d-125">Použijte následující pokyny pro připojení k serveru ve skupině dostupnosti nebo [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] Instance clusteru převzetí služeb při selhání 2012:</span><span class="sxs-lookup"><span data-stu-id="e8e0d-125">Use the following guidelines to connect to a server in an availability group or [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] 2012 Failover Cluster Instance:</span></span>  
  
-   <span data-ttu-id="e8e0d-126">Použití `MultiSubnetFailover` vlastnost připojení při připojování k podsíti jeden nebo více podsítí; zlepší výkon obou.</span><span class="sxs-lookup"><span data-stu-id="e8e0d-126">Use the `MultiSubnetFailover` connection property when connecting to a single subnet or multi-subnet; it will improve performance for both.</span></span>  
  
-   <span data-ttu-id="e8e0d-127">Pro připojení ke skupině dostupnosti, zadejte naslouchacího procesu skupiny dostupnosti skupiny dostupnosti jako server v připojovacím řetězci.</span><span class="sxs-lookup"><span data-stu-id="e8e0d-127">To connect to an availability group, specify the availability group listener of the availability group as the server in your connection string.</span></span>  
  
-   <span data-ttu-id="e8e0d-128">Připojování k [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] instance, které jsou nakonfigurovány s víc než 64 IP adresami způsobí selhání připojení.</span><span class="sxs-lookup"><span data-stu-id="e8e0d-128">Connecting to a [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] instance configured with more than 64 IP addresses will cause a connection failure.</span></span>  
  
-   <span data-ttu-id="e8e0d-129">Chování aplikace, která používá `MultiSubnetFailover` vlastnost připojení nemá vliv na základě typu ověřování: [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] ověřování, ověřování pomocí protokolu Kerberos nebo ověřování systému Windows.</span><span class="sxs-lookup"><span data-stu-id="e8e0d-129">Behavior of an application that uses the `MultiSubnetFailover` connection property is not affected based on the type of authentication: [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] Authentication, Kerberos Authentication, or Windows Authentication.</span></span>  
  
-   <span data-ttu-id="e8e0d-130">Zvýšit hodnotu `Connect Timeout` pro uložení dobu převzetí služeb při selhání a snížit počet pokusů o opakování připojení aplikace.</span><span class="sxs-lookup"><span data-stu-id="e8e0d-130">Increase the value of `Connect Timeout` to accommodate for failover time and reduce application connection retry attempts.</span></span>  
  
-   <span data-ttu-id="e8e0d-131">Distribuované transakce nejsou podporovány.</span><span class="sxs-lookup"><span data-stu-id="e8e0d-131">Distributed transactions are not supported.</span></span>  
  
 <span data-ttu-id="e8e0d-132">Pokud jen pro čtení směrování není funkční, připojení k umístění sekundární repliky se nezdaří v následujících situacích:</span><span class="sxs-lookup"><span data-stu-id="e8e0d-132">If read-only routing is not in effect, connecting to a secondary replica location will fail in the following situations:</span></span>  
  
1.  <span data-ttu-id="e8e0d-133">Pokud umístění sekundární replika není konfigurován na připojení.</span><span class="sxs-lookup"><span data-stu-id="e8e0d-133">If the secondary replica location is not configured to accept connections.</span></span>  
  
2.  <span data-ttu-id="e8e0d-134">Pokud aplikace používá `ApplicationIntent=ReadWrite` (viz následující popis) a umístění sekundární replika je nakonfigurovaný pro přístup jen pro čtení.</span><span class="sxs-lookup"><span data-stu-id="e8e0d-134">If an application uses `ApplicationIntent=ReadWrite` (discussed below) and the secondary replica location is configured for read-only access.</span></span>  
  
 <span data-ttu-id="e8e0d-135"><xref:System.Data.SqlClient.SqlDependency>není podporována na sekundárních replikách jen pro čtení.</span><span class="sxs-lookup"><span data-stu-id="e8e0d-135"><xref:System.Data.SqlClient.SqlDependency> is not supported on read-only secondary replicas.</span></span>  
  
 <span data-ttu-id="e8e0d-136">Připojení se nezdaří, pokud je primární replika nakonfigurovaná tak, aby zamítal úlohy jen pro čtení a připojovací řetězec obsahuje `ApplicationIntent=ReadOnly`.</span><span class="sxs-lookup"><span data-stu-id="e8e0d-136">A connection will fail if a primary replica is configured to reject read-only workloads and the connection string contains `ApplicationIntent=ReadOnly`.</span></span>  
  
## <a name="upgrading-to-use-multi-subnet-clusters-from-database-mirroring"></a><span data-ttu-id="e8e0d-137">Upgrade na použití více podsítí clusterů z zrcadlení databáze</span><span class="sxs-lookup"><span data-stu-id="e8e0d-137">Upgrading to Use Multi-Subnet Clusters from Database Mirroring</span></span>  
 <span data-ttu-id="e8e0d-138">Chyba připojení (<xref:System.ArgumentException>) dojde v případě `MultiSubnetFailover` a `Failover Partner` klíčová slova připojení jsou k dispozici v připojovacím řetězci, nebo pokud `MultiSubnetFailover=True` a používá jiný protokol než TCP.</span><span class="sxs-lookup"><span data-stu-id="e8e0d-138">A connection error (<xref:System.ArgumentException>) will occur if the `MultiSubnetFailover` and `Failover Partner` connection keywords are present in the connection string, or if `MultiSubnetFailover=True` and a protocol other than TCP is used.</span></span> <span data-ttu-id="e8e0d-139">K chybě (<xref:System.Data.SqlClient.SqlException>) bude také nastat, pokud `MultiSubnetFailover` se používá a [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] vrátí odpověď partnera převzetí služeb při selhání označující je součástí páru zrcadlení databáze.</span><span class="sxs-lookup"><span data-stu-id="e8e0d-139">An error (<xref:System.Data.SqlClient.SqlException>) will also occur if `MultiSubnetFailover` is used and the [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] returns a failover partner response indicating it is part of a database mirroring pair.</span></span>  
  
 <span data-ttu-id="e8e0d-140">Pokud upgradujete aplikaci SqlClient které aktuálně používá zrcadlení databáze pro určitý scénář více podsítí, byste měli odebrat `Failover Partner` vlastnost připojení a nahraďte ho `MultiSubnetFailover` nastavena na `True` a nahraďte název serveru ve připojovací řetězec s naslouchací proces skupiny dostupnosti.</span><span class="sxs-lookup"><span data-stu-id="e8e0d-140">If you upgrade a SqlClient application that currently uses database mirroring to a multi-subnet scenario, you should remove the `Failover Partner` connection property and replace it with `MultiSubnetFailover` set to `True` and replace the server name in the connection string with an availability group listener.</span></span> <span data-ttu-id="e8e0d-141">Pokud se používá připojovací řetězec `Failover Partner` a `MultiSubnetFailover=True`, ovladače dojde k chybě.</span><span class="sxs-lookup"><span data-stu-id="e8e0d-141">If a connection string uses `Failover Partner` and `MultiSubnetFailover=True`, the driver will generate an error.</span></span> <span data-ttu-id="e8e0d-142">Ale pokud používá připojovací řetězec `Failover Partner` a `MultiSubnetFailover=False` (nebo `ApplicationIntent=ReadWrite`), aplikace bude používat zrcadlení databáze.</span><span class="sxs-lookup"><span data-stu-id="e8e0d-142">However, if a connection string uses `Failover Partner` and `MultiSubnetFailover=False` (or `ApplicationIntent=ReadWrite`), the application will use database mirroring.</span></span>  
  
 <span data-ttu-id="e8e0d-143">Ovladač vrátí chybu, pokud zrcadlení databáze se používá v primární databázi v AG a `MultiSubnetFailover=True` se používá v připojovacím řetězci, který se připojuje k databázi v primární místo pro naslouchací proces skupiny dostupnosti.</span><span class="sxs-lookup"><span data-stu-id="e8e0d-143">The driver will return an error if database mirroring is used on the primary database in the AG, and if `MultiSubnetFailover=True` is used in the connection string that connects to a primary database instead of to an availability group listener.</span></span>  
  
## <a name="specifying-application-intent"></a><span data-ttu-id="e8e0d-144">Určení záměru aplikace</span><span class="sxs-lookup"><span data-stu-id="e8e0d-144">Specifying Application Intent</span></span>  
 <span data-ttu-id="e8e0d-145">Když `ApplicationIntent=ReadOnly`, klient požádá o čtení zatížení při připojení k databázi povolenou funkcí AlwaysOn.</span><span class="sxs-lookup"><span data-stu-id="e8e0d-145">When `ApplicationIntent=ReadOnly`, the client requests a read workload when connecting to an AlwaysOn enabled database.</span></span> <span data-ttu-id="e8e0d-146">Server vynutí záměr v době připojení a během příkaz databáze USE, ale jenom na povoleno databázi Always On.</span><span class="sxs-lookup"><span data-stu-id="e8e0d-146">The server will enforce the intent at connection time and during a USE database statement but only to an Always On enabled database.</span></span>  
  
 <span data-ttu-id="e8e0d-147">`ApplicationIntent` – Klíčové slovo nefunguje s databázemi starší verze, jen pro čtení.</span><span class="sxs-lookup"><span data-stu-id="e8e0d-147">The `ApplicationIntent` keyword does not work with legacy, read-only databases.</span></span>  
  
 <span data-ttu-id="e8e0d-148">Databázi můžete povolí nebo zakáže čtení úloh na cílové databázi AlwaysOn.</span><span class="sxs-lookup"><span data-stu-id="e8e0d-148">A database can allow or disallow read workloads on the targeted AlwaysOn database.</span></span> <span data-ttu-id="e8e0d-149">(To je prováděno pomocí `ALLOW_CONNECTIONS` klauzuli `PRIMARY_ROLE` a `SECONDARY_ROLE` [!INCLUDE[tsql](../../../../../includes/tsql-md.md)] příkazy.)</span><span class="sxs-lookup"><span data-stu-id="e8e0d-149">(This is done with the `ALLOW_CONNECTIONS` clause of the `PRIMARY_ROLE` and `SECONDARY_ROLE`[!INCLUDE[tsql](../../../../../includes/tsql-md.md)] statements.)</span></span>  
  
 <span data-ttu-id="e8e0d-150">`ApplicationIntent` – Klíčové slovo slouží k povolení směrování jen pro čtení.</span><span class="sxs-lookup"><span data-stu-id="e8e0d-150">The `ApplicationIntent` keyword is used to enable read-only routing.</span></span>  
  
## <a name="read-only-routing"></a><span data-ttu-id="e8e0d-151">Jen pro čtení směrování</span><span class="sxs-lookup"><span data-stu-id="e8e0d-151">Read-Only Routing</span></span>  
 <span data-ttu-id="e8e0d-152">Jen pro čtení směrování je funkce, která můžete zajistit dostupnost čtení pouze repliky databáze.</span><span class="sxs-lookup"><span data-stu-id="e8e0d-152">Read-only routing is a feature that can ensure the availability of a read only replica of a database.</span></span> <span data-ttu-id="e8e0d-153">Chcete-li povolit směrování jen pro čtení:</span><span class="sxs-lookup"><span data-stu-id="e8e0d-153">To enable read-only routing:</span></span>  
  
1.  <span data-ttu-id="e8e0d-154">Musíte se připojit k naslouchací proces skupiny dostupnosti vždy na skupiny dostupnosti.</span><span class="sxs-lookup"><span data-stu-id="e8e0d-154">You must connect to an Always On Availability Group availability group listener.</span></span>  
  
2.  <span data-ttu-id="e8e0d-155">`ApplicationIntent` Klíčové slovo připojovacího řetězce musí být nastavena na `ReadOnly`.</span><span class="sxs-lookup"><span data-stu-id="e8e0d-155">The `ApplicationIntent` connection string keyword must be set to `ReadOnly`.</span></span>  
  
3.  <span data-ttu-id="e8e0d-156">Skupina dostupnosti musí být nakonfigurované správcem databáze umožňující směrování jen pro čtení.</span><span class="sxs-lookup"><span data-stu-id="e8e0d-156">The Availability Group must be configured by the database administrator to enable read-only routing.</span></span>  
  
 <span data-ttu-id="e8e0d-157">Je možné, že více připojení pomocí směrování jen pro čtení se všechny připojí k stejné repliky jen pro čtení.</span><span class="sxs-lookup"><span data-stu-id="e8e0d-157">It is possible that multiple connections using read-only routing will not all connect to the same read-only replica.</span></span> <span data-ttu-id="e8e0d-158">Změny v synchronizaci databáze nebo změny v konfiguraci směrování serveru může způsobit připojení klienta k jiné repliky jen pro čtení.</span><span class="sxs-lookup"><span data-stu-id="e8e0d-158">Changes in database synchronization or changes in the server's routing configuration can result in client connections to different read-only replicas.</span></span> <span data-ttu-id="e8e0d-159">Aby se zajistilo, že všechny požadavky jen pro čtení připojit k stejné repliky jen pro čtení, nepředávejte naslouchací proces skupiny dostupnosti do `Data Source` klíčové slovo připojovacího řetězce.</span><span class="sxs-lookup"><span data-stu-id="e8e0d-159">To ensure that all read-only requests connect to the same read-only replica, do not pass an availability group listener to the `Data Source` connection string keyword.</span></span> <span data-ttu-id="e8e0d-160">Místo toho zadejte název instance jen pro čtení.</span><span class="sxs-lookup"><span data-stu-id="e8e0d-160">Instead, specify the name of the read-only instance.</span></span>  
  
 <span data-ttu-id="e8e0d-161">Jen pro čtení směrování může trvat déle než připojení na primární, protože čtení pouze směrování poprvé připojí k primární a pak hledá nejlépe dostupné čitelný sekundární.</span><span class="sxs-lookup"><span data-stu-id="e8e0d-161">Read-only routing may take longer than connecting to the primary because read only routing first connects to the primary and then looks for the best available readable secondary.</span></span> <span data-ttu-id="e8e0d-162">Z toho důvodu měli zvýšit limit vaše přihlášení.</span><span class="sxs-lookup"><span data-stu-id="e8e0d-162">Because of this, you should increase your login timeout.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="e8e0d-163">Viz také</span><span class="sxs-lookup"><span data-stu-id="e8e0d-163">See Also</span></span>  
 [<span data-ttu-id="e8e0d-164">Funkce SQL Serveru a ADO.NET</span><span class="sxs-lookup"><span data-stu-id="e8e0d-164">SQL Server Features and ADO.NET</span></span>](../../../../../docs/framework/data/adonet/sql/sql-server-features-and-adonet.md)  
 [<span data-ttu-id="e8e0d-165">ADO.NET spravované zprostředkovatelé a středisku pro vývojáře datové sady</span><span class="sxs-lookup"><span data-stu-id="e8e0d-165">ADO.NET Managed Providers and DataSet Developer Center</span></span>](http://go.microsoft.com/fwlink/?LinkId=217917)
