---
title: "Práce s binární Data (služby WCF Data Services)"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework-oob
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
dev_langs:
- csharp
- vb
helpviewer_keywords:
- WCF Data Services, binary data
- WCF Data Services, streams
ms.assetid: aeccc45c-d5c5-4671-ad63-a492ac8043ac
caps.latest.revision: "7"
author: Erikre
ms.author: erikre
manager: erikre
ms.openlocfilehash: 2ed6e20e899ce151f91c370bdf9553a7ace23c9a
ms.sourcegitcommit: 4f3fef493080a43e70e951223894768d36ce430a
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 11/21/2017
---
# <a name="working-with-binary-data-wcf-data-services"></a><span data-ttu-id="89bef-102">Práce s binární Data (služby WCF Data Services)</span><span class="sxs-lookup"><span data-stu-id="89bef-102">Working with Binary Data (WCF Data Services)</span></span>
<span data-ttu-id="89bef-103">[!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] Klientské knihovny umožňuje načíst a aktualizovat binární data ze [!INCLUDE[ssODataFull](../../../../includes/ssodatafull-md.md)] kanálu v jednom z následujících způsobů:</span><span class="sxs-lookup"><span data-stu-id="89bef-103">The [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] client library enables you to retrieve and update binary data from an [!INCLUDE[ssODataFull](../../../../includes/ssodatafull-md.md)] feed in one of the following ways:</span></span>  
  
-   <span data-ttu-id="89bef-104">Jako vlastnost primitivního typu entity.</span><span class="sxs-lookup"><span data-stu-id="89bef-104">As a primitive type property of an entity.</span></span> <span data-ttu-id="89bef-105">Toto je doporučená metoda pro práci s malá binární data objekty, které je možné snadno načíst do paměti.</span><span class="sxs-lookup"><span data-stu-id="89bef-105">This is the recommended method for working with small binary data objects that can be easily loaded into memory.</span></span> <span data-ttu-id="89bef-106">V takovém případě binární vlastnost je vlastnost entity zveřejněné datový model a službu data serializuje binární data jako binární kódovaného XML kódování base-64 ve zprávě s odpovědí.</span><span class="sxs-lookup"><span data-stu-id="89bef-106">In this case, the binary property is an entity property exposed by the data model, and the data service serializes the binary data as base-64 binary encoded XML in the response message.</span></span>  
  
-   <span data-ttu-id="89bef-107">Jako datový proud samostatné binárního prostředku.</span><span class="sxs-lookup"><span data-stu-id="89bef-107">As a separate binary resource stream.</span></span> <span data-ttu-id="89bef-108">Toto je doporučená metoda k přístupu a změna dat binární rozsáhlý objekt (BLOB), která může představovat fotografie, videa nebo jiný typ kódovaného binární data.</span><span class="sxs-lookup"><span data-stu-id="89bef-108">This is the recommended method for accessing and changing binary large object (BLOB) data that may represent a photo, video, or any other type of binary encoded data.</span></span>  
  
 [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)]<span data-ttu-id="89bef-109">implementuje streamování binární data pomocí protokolu HTTP, jak jsou definovány v [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="89bef-109"> implements the streaming of binary data by using HTTP as defined in the [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)].</span></span> <span data-ttu-id="89bef-110">Binární data v tento mechanismus, je považován za příslušný mediální zdroj, která je oddělená od ale související s entity, která se nazývá záznam odkazu média.</span><span class="sxs-lookup"><span data-stu-id="89bef-110">In this mechanism, binary data is treated as a media resource that is separate from but related to an entity, which is called a media link entry.</span></span> <span data-ttu-id="89bef-111">Další informace najdete v tématu [streamování zprostředkovatele](../../../../docs/framework/data/wcf/streaming-provider-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="89bef-111">For more information, see [Streaming Provider](../../../../docs/framework/data/wcf/streaming-provider-wcf-data-services.md).</span></span>  
  
> [!TIP]
>  <span data-ttu-id="89bef-112">Podrobný příklad, jak vytvořit [!INCLUDE[avalon1](../../../../includes/avalon1-md.md)] klientskou aplikaci, která stáhne binární obrázkových souborů z [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] služba, která ukládá fotografie, najdete v příspěvku [Data služby streamování zprostředkovatele řady část 2: přístupu na média Datový proud prostředku z klienta](http://go.microsoft.com/fwlink/?LinkId=201637).</span><span class="sxs-lookup"><span data-stu-id="89bef-112">For a step-by-step example of how to create a [!INCLUDE[avalon1](../../../../includes/avalon1-md.md)] client application that downloads binary image files from an [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] service that stores photos, see the post [Data Services Streaming Provider Series-Part 2: Accessing a Media Resource Stream from the Client](http://go.microsoft.com/fwlink/?LinkId=201637).</span></span> <span data-ttu-id="89bef-113">Si můžete stáhnout ukázkový kód pro službu datového proudu fotografií data umístěná v příspěvku na blogu [vysílání datového proudu fotografií služby vzorek dat](http://go.microsoft.com/fwlink/?LinkId=198988) v galerie kódů MSDN.</span><span class="sxs-lookup"><span data-stu-id="89bef-113">To download the sample code for the stream photo data service featured in the blog post, see the [Streaming Photo Data Service Sample](http://go.microsoft.com/fwlink/?LinkId=198988) in MSDN Code Gallery.</span></span>  
  
## <a name="entity-metadata"></a><span data-ttu-id="89bef-114">Entity Metadata</span><span class="sxs-lookup"><span data-stu-id="89bef-114">Entity Metadata</span></span>  
 <span data-ttu-id="89bef-115">Entita, která má datový proud prostředku související média je uvedené v metadata služby dat pomocí `HasStream` atribut použitý typ entity, který je položka odkaz na médium.</span><span class="sxs-lookup"><span data-stu-id="89bef-115">An entity that has a related media resource stream is indicated in the data service metadata by the `HasStream` attribute applied to an entity type that is the media link entry.</span></span> <span data-ttu-id="89bef-116">V následujícím příkladu `PhotoInfo` entita je položka odkaz médií, která má související mediálního zdroje, uvedené `HasStream` atribut.</span><span class="sxs-lookup"><span data-stu-id="89bef-116">In the following example, the `PhotoInfo` entity is a media link entry that has a related media resource, indicated by the `HasStream` attribute.</span></span>  
  
 [!code-xml[Astoria Photo Streaming Service#HasStream](../../../../samples/snippets/xml/VS_Snippets_Misc/astoria photo streaming service/xml/photodata.edmx#hasstream)]  
  
 <span data-ttu-id="89bef-117">Zbývající příklady v tomto tématu ukazují, jak získávat přístup a měnit datový proud prostředku média.</span><span class="sxs-lookup"><span data-stu-id="89bef-117">The remaining examples in this topic show how to access and change the media resource stream.</span></span> <span data-ttu-id="89bef-118">Kompletní příklad, jak využívat v aplikaci klienta rozhraní .NET Framework datový proud prostředku média pomocí [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] klientské knihovny, najdete v příspěvku [přístup k datový proud prostředku média z klienta](http://go.microsoft.com/fwlink/?LinkID=201637).</span><span class="sxs-lookup"><span data-stu-id="89bef-118">For a complete example of how to consume a media resource stream in a .NET Framework client application by using the [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] client library, see the post [Accessing a Media Resource Stream from the Client](http://go.microsoft.com/fwlink/?LinkID=201637).</span></span>  
  
## <a name="accessing-the-binary-resource-stream"></a><span data-ttu-id="89bef-119">Přístup k prostředku binární datový proud</span><span class="sxs-lookup"><span data-stu-id="89bef-119">Accessing the Binary Resource Stream</span></span>  
 <span data-ttu-id="89bef-120">[!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] Klientské knihovny poskytuje metody pro přístup k datové proudy binárního prostředku z [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)]– na základě dat služby.</span><span class="sxs-lookup"><span data-stu-id="89bef-120">The [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] client library provides methods for accessing binary resource streams from an [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)]-based data service.</span></span> <span data-ttu-id="89bef-121">Při stahování mediálního zdroje, můžete buď použít identifikátor URI prostředku média nebo můžete získat binární datový proud, který obsahuje samotná data prostředků média.</span><span class="sxs-lookup"><span data-stu-id="89bef-121">When downloading a media resource, you can either use the URI of the media resource or you can get a binary stream that contains the media resource data itself.</span></span> <span data-ttu-id="89bef-122">Můžete také nahrát data prostředků média jako binárního datového proudu.</span><span class="sxs-lookup"><span data-stu-id="89bef-122">You can also upload media resource data as a binary stream.</span></span>  
  
> [!TIP]
>  <span data-ttu-id="89bef-123">Podrobný příklad, jak vytvořit [!INCLUDE[avalon1](../../../../includes/avalon1-md.md)] klientskou aplikaci, která stáhne binární obrázkových souborů z [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] služba, která ukládá fotografie, najdete v příspěvku [Data služby streamování zprostředkovatele řady část 2: přístupu na média Datový proud prostředku z klienta](http://go.microsoft.com/fwlink/?LinkId=201637).</span><span class="sxs-lookup"><span data-stu-id="89bef-123">For a step-by-step example of how to create a [!INCLUDE[avalon1](../../../../includes/avalon1-md.md)] client application that downloads binary image files from an [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] service that stores photos, see the post [Data Services Streaming Provider Series-Part 2: Accessing a Media Resource Stream from the Client](http://go.microsoft.com/fwlink/?LinkId=201637).</span></span> <span data-ttu-id="89bef-124">Si můžete stáhnout ukázkový kód pro službu datového proudu fotografií data umístěná v příspěvku na blogu [vysílání datového proudu fotografií služby vzorek dat](http://go.microsoft.com/fwlink/?LinkId=198988) v galerie kódů MSDN.</span><span class="sxs-lookup"><span data-stu-id="89bef-124">To download the sample code for the stream photo data service featured in the blog post, see the [Streaming Photo Data Service Sample](http://go.microsoft.com/fwlink/?LinkId=198988) in MSDN Code Gallery.</span></span>  
  
### <a name="getting-the-uri-of-the-binary-stream"></a><span data-ttu-id="89bef-125">Získávání Identifikátor URI binární datový proud</span><span class="sxs-lookup"><span data-stu-id="89bef-125">Getting the URI of the Binary Stream</span></span>  
 <span data-ttu-id="89bef-126">Při načítání určitých typů médií prostředky, například bitové kopie a další soubory médií, je často jednodušší použít identifikátor URI prostředku média v aplikaci než zpracování binární datový proud sám sebe.</span><span class="sxs-lookup"><span data-stu-id="89bef-126">When retrieving certain types of media resources, such as images and other media files, it is often easier to use the URI of the media resource in your application than handling the binary data stream itself.</span></span> <span data-ttu-id="89bef-127">Chcete-li získat identifikátor URI přidružený záznam udělení média odkaz datový proud prostředku, musí volat <xref:System.Data.Services.Client.DataServiceContext.GetReadStreamUri%2A> metodu <xref:System.Data.Services.Client.DataServiceContext> instanci, která je sledování entity.</span><span class="sxs-lookup"><span data-stu-id="89bef-127">To get the URI of a resource stream associated with a give media link entry, you must call the <xref:System.Data.Services.Client.DataServiceContext.GetReadStreamUri%2A> method on the <xref:System.Data.Services.Client.DataServiceContext> instance that is tracking the entity.</span></span> <span data-ttu-id="89bef-128">Následující příklad ukazuje způsob volání <xref:System.Data.Services.Client.DataServiceContext.GetReadStreamUri%2A> metoda získat identifikátor URI média datový proud prostředku, který se používá k vytvoření nové bitové kopie na straně klienta:</span><span class="sxs-lookup"><span data-stu-id="89bef-128">The following example shows how to call the <xref:System.Data.Services.Client.DataServiceContext.GetReadStreamUri%2A> method to get the URI of a media resource stream that is used to create a new image on the client:</span></span>  
  
 [!code-csharp[Astoria Photo Streaming Client#GetReadStreamUri](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria photo streaming client/cs/photowindow.xaml.cs#getreadstreamuri)]
 [!code-vb[Astoria Photo Streaming Client#GetReadStreamUri](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria photo streaming client/vb/photowindow.xaml.vb#getreadstreamuri)]  
  
### <a name="downloading-the-binary-resource-stream"></a><span data-ttu-id="89bef-129">Stahování datový proud binárního prostředku</span><span class="sxs-lookup"><span data-stu-id="89bef-129">Downloading the Binary Resource Stream</span></span>  
 <span data-ttu-id="89bef-130">Při načítání datového proudu binárního prostředku, musí volat <xref:System.Data.Services.Client.DataServiceContext.GetReadStream%2A> metodu <xref:System.Data.Services.Client.DataServiceContext> instanci, která je sledování odkaz položka médií.</span><span class="sxs-lookup"><span data-stu-id="89bef-130">When retrieving a binary resource stream, you must call the <xref:System.Data.Services.Client.DataServiceContext.GetReadStream%2A> method on the <xref:System.Data.Services.Client.DataServiceContext> instance that is tracking the media link entry.</span></span> <span data-ttu-id="89bef-131">Tato metoda odešle požadavek na službu data, která vrací <xref:System.Data.Services.Client.DataServiceStreamResponse> objekt, který obsahuje odkaz na datový proud, který obsahuje prostředek.</span><span class="sxs-lookup"><span data-stu-id="89bef-131">This method sends a request to the data service that returns a <xref:System.Data.Services.Client.DataServiceStreamResponse> object, which has a reference to the stream that contains the resource.</span></span> <span data-ttu-id="89bef-132">Tuto metodu použijte, pokud vaše aplikace vyžaduje jako binárního prostředku <xref:System.IO.Stream>.</span><span class="sxs-lookup"><span data-stu-id="89bef-132">Use this method when your application requires the binary resource as a <xref:System.IO.Stream>.</span></span> <span data-ttu-id="89bef-133">Následující příklad ukazuje způsob volání <xref:System.Data.Services.Client.DataServiceContext.GetReadStream%2A> metoda pro načtení datový proud, který se používá k vytvoření nové bitové kopie na straně klienta:</span><span class="sxs-lookup"><span data-stu-id="89bef-133">The following example shows how to call the <xref:System.Data.Services.Client.DataServiceContext.GetReadStream%2A> method to retrieve a stream that is used to create a new image on the client:</span></span>  
  
 [!code-csharp[Astoria Streaming Client#GetReadStreamClient](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria streaming client/cs/customerphotowindow.xaml.cs#getreadstreamclient)]
 [!code-vb[Astoria Streaming Client#GetReadStreamClient](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria streaming client/vb/customerphotowindow.xaml.vb#getreadstreamclient)]  
  
> [!NOTE]
>  <span data-ttu-id="89bef-134">Služba data není nastavena hlavička Content-Length ve zprávě odpovědi, která obsahuje binární datový proud.</span><span class="sxs-lookup"><span data-stu-id="89bef-134">The Content-Length header in the response message that contains the binary steam is not set by the data service.</span></span> <span data-ttu-id="89bef-135">Tato hodnota nemusí odrážet skutečné délce binární datový proud.</span><span class="sxs-lookup"><span data-stu-id="89bef-135">This value may not reflect the actual length of the binary data stream.</span></span>  
  
### <a name="uploading-a-media-resource-as-a-stream"></a><span data-ttu-id="89bef-136">Nahrávání mediálního prostředku jako datový proud</span><span class="sxs-lookup"><span data-stu-id="89bef-136">Uploading a Media Resource as a Stream</span></span>  
 <span data-ttu-id="89bef-137">Vložit nebo aktualizovat prostředek média, volání <xref:System.Data.Services.Client.DataServiceContext.SetSaveStream%2A> metodu <xref:System.Data.Services.Client.DataServiceContext> instanci, která je sledování entity.</span><span class="sxs-lookup"><span data-stu-id="89bef-137">To insert or update a media resource, call the <xref:System.Data.Services.Client.DataServiceContext.SetSaveStream%2A> method on the <xref:System.Data.Services.Client.DataServiceContext> instance that is tracking the entity.</span></span> <span data-ttu-id="89bef-138">Tato metoda odešle požadavek do služby data, která obsahuje zdroj média pro čtení z datového proudu zadaný.</span><span class="sxs-lookup"><span data-stu-id="89bef-138">This method sends a request to the data service that contains the media resource read from the supplied stream.</span></span> <span data-ttu-id="89bef-139">Následující příklad ukazuje způsob volání <xref:System.Data.Services.Client.DataServiceContext.SetSaveStream%2A> metodu pro odeslání bitovou kopii k službě data:</span><span class="sxs-lookup"><span data-stu-id="89bef-139">The following example shows how to call the <xref:System.Data.Services.Client.DataServiceContext.SetSaveStream%2A> method to send an image to the data service:</span></span>  
  
 [!code-csharp[Astoria Photo Streaming Client#SetSaveStream](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria photo streaming client/cs/photodetailswindow.xaml.cs#setsavestream)]
 [!code-vb[Astoria Photo Streaming Client#SetSaveStream](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria photo streaming client/vb/photodetailswindow.xaml.vb#setsavestream)]  
  
 <span data-ttu-id="89bef-140">V tomto příkladu <xref:System.Data.Services.Client.DataServiceContext.SetSaveStream%2A> metoda je volána zadáním hodnotu `true` pro `closeStream` parametr.</span><span class="sxs-lookup"><span data-stu-id="89bef-140">In this example, the <xref:System.Data.Services.Client.DataServiceContext.SetSaveStream%2A> method is called by supplying a value of `true` for the `closeStream` parameter.</span></span> <span data-ttu-id="89bef-141">To zaručuje, že <xref:System.Data.Services.Client.DataServiceContext> datový proud se zavře po binární data se odešlou do služby data.</span><span class="sxs-lookup"><span data-stu-id="89bef-141">This guarantees that the <xref:System.Data.Services.Client.DataServiceContext> closes the stream after the binary data is uploaded to the data service.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="89bef-142">Při volání <xref:System.Data.Services.Client.DataServiceContext.SetSaveStream%2A>, neposílají se do službu data do datového proudu <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> je volána.</span><span class="sxs-lookup"><span data-stu-id="89bef-142">When you call <xref:System.Data.Services.Client.DataServiceContext.SetSaveStream%2A>, the stream is not sent to the data service until <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> is called.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="89bef-143">Viz také</span><span class="sxs-lookup"><span data-stu-id="89bef-143">See Also</span></span>  
 [<span data-ttu-id="89bef-144">Klientská knihovna pro WCF Data Services</span><span class="sxs-lookup"><span data-stu-id="89bef-144">WCF Data Services Client Library</span></span>](../../../../docs/framework/data/wcf/wcf-data-services-client-library.md)  
 [<span data-ttu-id="89bef-145">Vazba dat s ovládacími prvky</span><span class="sxs-lookup"><span data-stu-id="89bef-145">Binding Data to Controls</span></span>](../../../../docs/framework/data/wcf/binding-data-to-controls-wcf-data-services.md)
