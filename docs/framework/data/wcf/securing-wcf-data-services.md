---
title: "Zabezpečení součásti WCF Data Services"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework-oob
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
dev_langs:
- csharp
- vb
helpviewer_keywords:
- securing application [WCF Data Services]
- WCF Data Services, security
ms.assetid: 99fc2baa-a040-4549-bc4d-f683d60298af
caps.latest.revision: "9"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.workload: dotnet
ms.openlocfilehash: c45da4ec1fa5d111be19437dde54035a89f9162e
ms.sourcegitcommit: 16186c34a957fdd52e5db7294f291f7530ac9d24
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 12/22/2017
---
# <a name="securing-wcf-data-services"></a><span data-ttu-id="5246b-102">Zabezpečení součásti WCF Data Services</span><span class="sxs-lookup"><span data-stu-id="5246b-102">Securing WCF Data Services</span></span>
<span data-ttu-id="5246b-103">Toto téma popisuje aspekty zabezpečení, které jsou specifické pro vývoj, nasazování a spouštění [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] a aplikace, které přístup ke službám, které podporují [!INCLUDE[ssODataFull](../../../../includes/ssodatafull-md.md)].</span><span class="sxs-lookup"><span data-stu-id="5246b-103">This topic describes security considerations that are specific to developing, deploying, and running [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] and applications that access services that support the [!INCLUDE[ssODataFull](../../../../includes/ssodatafull-md.md)].</span></span> <span data-ttu-id="5246b-104">Také postupujte podle doporučení pro vytvoření zabezpečeného [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] aplikace.</span><span class="sxs-lookup"><span data-stu-id="5246b-104">You should also follow recommendations for creating secure [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] applications.</span></span>  
  
 <span data-ttu-id="5246b-105">Při plánování zabezpečení [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)]– na základě [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] služby, musíte vyřešit, ověřování, proces zjišťování a ověřování identity objektu zabezpečení a autorizace, proces pro určení toho, zda je ověření objekt zabezpečení je povolen přístup k požadované prostředky.</span><span class="sxs-lookup"><span data-stu-id="5246b-105">When planning how to secure a [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)]-based [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] service, you must address both authentication, the process of discovering and verifying the identity of a principal, and authorization, the process of determining whether an authenticated principal is allowed to access the requested resources.</span></span> <span data-ttu-id="5246b-106">Dále je vhodné zvážit, zda chcete zprávy šifrovat pomocí protokolu SSL.</span><span class="sxs-lookup"><span data-stu-id="5246b-106">You should also consider whether to encrypt the message by using SSL.</span></span>  
  
## <a name="authenticating-client-requests"></a><span data-ttu-id="5246b-107">Ověřování požadavků klientů</span><span class="sxs-lookup"><span data-stu-id="5246b-107">Authenticating Client Requests</span></span>  
 [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)]<span data-ttu-id="5246b-108">neimplementuje žádný typ ověřování své vlastní, ale spíše se spoléhá na ověřování ustanovení hostitele služby data.</span><span class="sxs-lookup"><span data-stu-id="5246b-108"> does not implement any kind of authentication of its own, but rather relies on the authentication provisions of the data service host.</span></span> <span data-ttu-id="5246b-109">To znamená, že služba předpokládá, že každá žádost, kterou přijme již byl ověřen pro sítě hostitele a správně má hostitel identifikovat zásadu pro žádosti o správně prostřednictvím rozhraní poskytované [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)].</span><span class="sxs-lookup"><span data-stu-id="5246b-109">This means that the service assumes that any request that it receives has already been authenticated by the network host and that the host has correctly identified the principle for the request appropriately via the interfaces provided by [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)].</span></span> <span data-ttu-id="5246b-110">Tyto možnosti ověřování a přístupy jsou podrobně popsané na [OData a ověřování řady](http://go.microsoft.com/fwlink/?LinkId=200381).</span><span class="sxs-lookup"><span data-stu-id="5246b-110">These authentication options and approaches are detailed in [OData and Authentication series](http://go.microsoft.com/fwlink/?LinkId=200381).</span></span>  
  
### <a name="authentication-options-for-a-wcf-data-service"></a><span data-ttu-id="5246b-111">Možnosti ověřování ve službě WCF Data</span><span class="sxs-lookup"><span data-stu-id="5246b-111">Authentication Options for a WCF Data Service</span></span>  
 <span data-ttu-id="5246b-112">Následující tabulka shrnuje některé mechanismy, které jsou k dispozici pro ověřování požadavků na službu WCF Data Service.</span><span class="sxs-lookup"><span data-stu-id="5246b-112">The following table lists some of the authentication mechanisms that are available to help you authenticate requests to a WCF Data Service.</span></span>  
  
|<span data-ttu-id="5246b-113">Možnosti ověřování</span><span class="sxs-lookup"><span data-stu-id="5246b-113">Authentication Options</span></span>|<span data-ttu-id="5246b-114">Popis</span><span class="sxs-lookup"><span data-stu-id="5246b-114">Description</span></span>|  
|----------------------------|-----------------|  
|<span data-ttu-id="5246b-115">Anonymní ověření</span><span class="sxs-lookup"><span data-stu-id="5246b-115">Anonymous authentication</span></span>|<span data-ttu-id="5246b-116">Pokud je aktivováno anonymní ověřování HTTP, může se k datové službě připojit libovolný objekt zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="5246b-116">When HTTP anonymous authentication is enabled, any principle is able to connect to the data service.</span></span> <span data-ttu-id="5246b-117">U anonymního přístupu nejsou požadována pověření.</span><span class="sxs-lookup"><span data-stu-id="5246b-117">Credentials are not required for anonymous access.</span></span> <span data-ttu-id="5246b-118">Tuto možnost použijte pouze v případě, že chcete přístup k datové službě povolit všem uživatelům.</span><span class="sxs-lookup"><span data-stu-id="5246b-118">Use this option only when you want to allow anyone to access the data service.</span></span>|  
|<span data-ttu-id="5246b-119">Základní ověřování a ověřování algoritmem Digest</span><span class="sxs-lookup"><span data-stu-id="5246b-119">Basic and digest authentication</span></span>|<span data-ttu-id="5246b-120">Pro ověření jsou vyžadována pověření, která sestávají z uživatelského jména a hesla.</span><span class="sxs-lookup"><span data-stu-id="5246b-120">Credentials consisting of a user name and password are required for authentication.</span></span> <span data-ttu-id="5246b-121">Podporuje ověřování klientů jiných platforem než Windows.</span><span class="sxs-lookup"><span data-stu-id="5246b-121">Supports authentication of non-Windows clients.</span></span> <span data-ttu-id="5246b-122">**Poznámka k zabezpečení:** základní ověřovací pověření (uživatelské jméno a heslo) se odesílají v nešifrované a mohou být zachyceny.</span><span class="sxs-lookup"><span data-stu-id="5246b-122">**Security Note:**  Basic authentication credentials (user name and password) are sent in the clear and can be intercepted.</span></span> <span data-ttu-id="5246b-123">Ověřování algoritmem Digest odešle hodnotu hash vycházející ze zadaných pověření. Je tedy bezpečnější než základní ověřování.</span><span class="sxs-lookup"><span data-stu-id="5246b-123">Digest authentication sends a hash based-on the supplied credentials, which makes it more secure than basic authentication.</span></span> <span data-ttu-id="5246b-124">Oba zmíněné typy ověřování jsou však náchylné k útoku prostředníkem (man-in-the-middle).</span><span class="sxs-lookup"><span data-stu-id="5246b-124">Both are susceptible to man-in-the-middle attacks.</span></span> <span data-ttu-id="5246b-125">Při použití těchto metod ověřování je vhodné zvážit šifrování komunikace mezi klientem a datovou službou pomocí protokolu SSL (Secure Sockets Layer).</span><span class="sxs-lookup"><span data-stu-id="5246b-125">When using these authentication methods, you should consider encrypting communication between client and the data service by using the Secure Sockets Layer (SSL).</span></span> <br /><br /> <span data-ttu-id="5246b-126">Microsoft Internetové informační služby (IIS) poskytuje implementaci pro obě basic a ověřování algoritmem digest pro protokol HTTP požadavků ve [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] aplikace.</span><span class="sxs-lookup"><span data-stu-id="5246b-126">Microsoft Internet Information Services (IIS) provides an implementation of both basic and digest authentication for HTTP requests in an [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] application.</span></span> <span data-ttu-id="5246b-127">Tato implementace poskytovatele ověřování systému Windows umožňuje klientské aplikaci rozhraní .NET Framework vložit pověření do hlavičky HTTP požadavku na datovou službu. Dovoluje tak bez problémů vyjednat ověření uživatele systému Windows.</span><span class="sxs-lookup"><span data-stu-id="5246b-127">This Windows Authentication Provider implementation enables a .NET Framework client application to supply credentials in the HTTP header of the request to the data service to seamlessly negotiate authentication of a Windows user.</span></span> <span data-ttu-id="5246b-128">Další informace najdete v tématu [technické informace o ověřování hodnotou hash](http://go.microsoft.com/fwlink/?LinkId=200408).</span><span class="sxs-lookup"><span data-stu-id="5246b-128">For more information, see [Digest Authentication Technical Reference](http://go.microsoft.com/fwlink/?LinkId=200408).</span></span><br /><br /> <span data-ttu-id="5246b-129">Pokud chcete mít data služby použijte základní ověřování na základě některé vlastní ověřovací služby a nejsou přihlašovací údaje systému Windows, je nutné implementovat vlastní [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] modulu HTTP pro ověřování.</span><span class="sxs-lookup"><span data-stu-id="5246b-129">When you want to have your data service use basic authentication based on some custom authentication service and not Windows credentials, you must implement a custom [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] HTTP Module for authentication.</span></span><br /><br /> [!INCLUDE[crexample](../../../../includes/crexample-md.md)]<span data-ttu-id="5246b-130">Použití vlastní základní ověřování schéma s [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)], najdete v příspěvku na [vlastní základní ověřování](http://go.microsoft.com/fwlink/?LinkID=200388) v [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] a ověřování řady.</span><span class="sxs-lookup"><span data-stu-id="5246b-130"> how to use a custom basic authentication scheme with [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)], see the post on [Custom Basic Authentication](http://go.microsoft.com/fwlink/?LinkID=200388) in the [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] and authentication series.</span></span>|  
|<span data-ttu-id="5246b-131">Ověřování systému Windows</span><span class="sxs-lookup"><span data-stu-id="5246b-131">Windows authentication</span></span>|<span data-ttu-id="5246b-132">Pověření systému Windows se vyměňují pomocí protokolu NTLM nebo Kerberos.</span><span class="sxs-lookup"><span data-stu-id="5246b-132">Windows-based credentials are exchanged by using NTLM or Kerberos.</span></span> <span data-ttu-id="5246b-133">Tento mechanismus je bezpečnější než základní ověřování nebo ověřování algoritmem Digest, vyžaduje však, aby klientská aplikace byla založena na systému Windows.</span><span class="sxs-lookup"><span data-stu-id="5246b-133">This mechanism is more secure than basic or digest authentication, but it requires that the client be a Windows-based application.</span></span> <span data-ttu-id="5246b-134">Služba IIS také poskytuje implementaci pro ověřování systému Windows pro požadavky HTTP v [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] aplikace.</span><span class="sxs-lookup"><span data-stu-id="5246b-134">IIS also provides an implementation of Windows authentication for HTTP requests in an [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] application.</span></span> <span data-ttu-id="5246b-135">Další informace najdete v tématu [Přehled ověřování formulářů ASP.NET](http://msdn.microsoft.com/library/099c1587-6934-476e-ac95-28f534bc9708).</span><span class="sxs-lookup"><span data-stu-id="5246b-135">For more information, see [ASP.NET Forms Authentication Overview](http://msdn.microsoft.com/library/099c1587-6934-476e-ac95-28f534bc9708).</span></span><br /><br /> [!INCLUDE[crexample](../../../../includes/crexample-md.md)]<span data-ttu-id="5246b-136">jak používat ověřování systému Windows s [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)], najdete v příspěvku na [ověřování systému Windows](http://go.microsoft.com/fwlink/?LinkID=200384) v [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] a ověřování řady.</span><span class="sxs-lookup"><span data-stu-id="5246b-136"> how to use Windows authentication with [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)], see the post on [Windows Authentication](http://go.microsoft.com/fwlink/?LinkID=200384) in the [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] and authentication series.</span></span>|  
|[!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)]<span data-ttu-id="5246b-137">ověřování pomocí formulářů</span><span class="sxs-lookup"><span data-stu-id="5246b-137"> forms authentication</span></span>|<span data-ttu-id="5246b-138">Ověřování pomocí formulářů umožňuje ověřovat uživatele pomocí vlastního kódu a poté uchovat ověřovací token v souboru cookie nebo v adrese URL stránky.</span><span class="sxs-lookup"><span data-stu-id="5246b-138">Forms authentication lets you authenticate users by using your own code and then maintain an authentication token in a cookie or in the page URL.</span></span> <span data-ttu-id="5246b-139">Uživatelská jména a hesla uživatelů se ověřují pomocí přihlašovacího formuláře, který vytvoříte.</span><span class="sxs-lookup"><span data-stu-id="5246b-139">You authenticate the user name and password of your users using a login form that you create.</span></span> <span data-ttu-id="5246b-140">Neověřené požadavky jsou přesměrovány na přihlašovací stránku, kde uživatel poskytne své údaje a formulář odešle.</span><span class="sxs-lookup"><span data-stu-id="5246b-140">Unauthenticated requests are redirected to a login page, where the user provides credentials and submits the form.</span></span> <span data-ttu-id="5246b-141">Pokud aplikace požadavek ověří, systém vydá ověřovací lístek obsahující klíč k ověření identity následných požadavků.</span><span class="sxs-lookup"><span data-stu-id="5246b-141">If the application authenticates the request, the system issues a ticket that contains a key for reestablishing the identity for subsequent requests.</span></span> <span data-ttu-id="5246b-142">Další informace najdete v tématu [zprostředkovatele ověřování formulářů](http://msdn.microsoft.com/library/77e21ba2-bad1-4967-a8ec-74942dea7e47).</span><span class="sxs-lookup"><span data-stu-id="5246b-142">For more information, see [Forms Authentication Provider](http://msdn.microsoft.com/library/77e21ba2-bad1-4967-a8ec-74942dea7e47).</span></span> <span data-ttu-id="5246b-143">**Poznámka k zabezpečení:** ve výchozím nastavení, není při použití ověřování pomocí formulářů v zabezpečené souboru cookie, který obsahuje lístek pro ověřování pomocí formulářů [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] webové aplikace.</span><span class="sxs-lookup"><span data-stu-id="5246b-143">**Security Note:**  By default, the cookie that contains the forms authentication ticket is not secured when you use forms authentication in a [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] Web application.</span></span> <span data-ttu-id="5246b-144">Je vhodné zvážit, že budete vyžadovat protokol SSL, což zajistí ochranu ověřovacího lístku i počátečních přihlašovacích pověření.</span><span class="sxs-lookup"><span data-stu-id="5246b-144">You should consider requiring SSL to protect both the authentication ticket and the initial login credentials.</span></span> <br /><br /> [!INCLUDE[crexample](../../../../includes/crexample-md.md)]<span data-ttu-id="5246b-145">jak používat ověřování pomocí formulářů [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)], najdete v příspěvku na [ověřování pomocí formulářů](http://go.microsoft.com/fwlink/?LinkID=200389) v [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] a ověřování řady.</span><span class="sxs-lookup"><span data-stu-id="5246b-145"> how to use forms authentication with [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)], see the post on [Forms Authentication](http://go.microsoft.com/fwlink/?LinkID=200389) in the [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] and authentication series.</span></span>|  
|<span data-ttu-id="5246b-146">Ověřování na základě deklarací</span><span class="sxs-lookup"><span data-stu-id="5246b-146">Claims-based authentication</span></span>|<span data-ttu-id="5246b-147">Ověřování založené na deklaracích identity na službu data spoléhá na důvěryhodné identity "jiného výrobce" poskytovatele služby k ověření uživatele.</span><span class="sxs-lookup"><span data-stu-id="5246b-147">In claims-based authentication, the data service relies on a trusted "third-party" identity provider service to authenticate the user.</span></span> <span data-ttu-id="5246b-148">Tento poskytovatel identit pozitivně ověřuje uživatele, který žádá o přístup k prostředkům datové služby, a vydá token zajišťující přístup k požadovaným prostředkům.</span><span class="sxs-lookup"><span data-stu-id="5246b-148">The identity provider positively authenticates the user that is requesting access to data service resources and issues a token that grants access to the requested resources.</span></span> <span data-ttu-id="5246b-149">Tento token se pak předává datové službě, která udělí uživateli přístup na základě vztahu důvěry se službou identit, jež přístupový token vydala.</span><span class="sxs-lookup"><span data-stu-id="5246b-149">This token is then presented to the data service, which then grants access to the user based on the trust relationship with the identity service that issued the access token.</span></span><br /><br /> <span data-ttu-id="5246b-150">Výhodou poskytovatele ověřování na základě deklarací je, že ho lze použít k ověřování různých typů klientů napříč důvěryhodnými doménami.</span><span class="sxs-lookup"><span data-stu-id="5246b-150">The benefit of using a claims-based authentication provider is that they can be used to authenticate various types of clients across trust domains.</span></span> <span data-ttu-id="5246b-151">Díky použití takového poskytovatele třetí strany může datová služba předat požadavky na údržbu a ověřování uživatelů.</span><span class="sxs-lookup"><span data-stu-id="5246b-151">By employing such a third-party provider, a data service can offload the requirements of maintaining and authenticating users.</span></span> <span data-ttu-id="5246b-152">OAuth 2.0 je ověřovací protokol založený na deklaracích podporovaný službou AppFabric Access Control na platformě Microsoft Azure, který je určen pro federované ověřování poskytované jako služba.</span><span class="sxs-lookup"><span data-stu-id="5246b-152">OAuth 2.0 is a claims-based authentication protocol that is supported by Windows Azure AppFabric Access Control for federated authorization as a service.</span></span> <span data-ttu-id="5246b-153">Tento protokol podporuje služby založené na technologii REST.</span><span class="sxs-lookup"><span data-stu-id="5246b-153">This protocol supports REST-based services.</span></span> [!INCLUDE[crexample](../../../../includes/crexample-md.md)]<span data-ttu-id="5246b-154">jak používat OAuth 2.0 s [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)], najdete v příspěvku na [OData a OAuth](http://go.microsoft.com/fwlink/?LinkId=200514) v [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] a ověřování řady.</span><span class="sxs-lookup"><span data-stu-id="5246b-154"> how to use OAuth 2.0 with [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)], see the post on [OData and OAuth](http://go.microsoft.com/fwlink/?LinkId=200514) in the [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] and authentication series.</span></span>|  
  
<a name="clientAuthentication"></a>   
### <a name="authentication-in-the-client-library"></a><span data-ttu-id="5246b-155">Ověřování v knihovně klienta</span><span class="sxs-lookup"><span data-stu-id="5246b-155">Authentication in the Client Library</span></span>  
 <span data-ttu-id="5246b-156">Ve výchozím nastavení [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] klientské knihovny neposkytuje při vytváření požadavku na přihlašovací údaje [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] služby.</span><span class="sxs-lookup"><span data-stu-id="5246b-156">By default, the [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] client library does not supply credentials when making a request to an [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] service.</span></span> <span data-ttu-id="5246b-157">Pokud přihlašovací údaje jsou vyžadované službou data k ověření uživatele, můžete je nutné zadat tyto přihlašovací údaje v <xref:System.Net.NetworkCredential> k němu přistupovat z <xref:System.Data.Services.Client.DataServiceContext.Credentials%2A> vlastnost <xref:System.Data.Services.Client.DataServiceContext>, jako v následujícím příkladu:</span><span class="sxs-lookup"><span data-stu-id="5246b-157">When login credentials are required by the data service to authenticate a user, these credentials can be supplied in a <xref:System.Net.NetworkCredential> accessed from the <xref:System.Data.Services.Client.DataServiceContext.Credentials%2A> property of the <xref:System.Data.Services.Client.DataServiceContext>, as in the following example:</span></span>  
  
```csharp  
// Set the client authentication credentials.  
context.Credentials =  
    new NetworkCredential(userName, password, domain);  
```  
  
```vb  
' Set the client authentication credentials.  
context.Credentials = _  
    New NetworkCredential(userName, password, domain)  
```  
  
 <span data-ttu-id="5246b-158">Další informace najdete v tématu [postup: Zadejte pověření klienta služby Data žádosti o](../../../../docs/framework/data/wcf/specify-client-creds-for-a-data-service-request-wcf.md).</span><span class="sxs-lookup"><span data-stu-id="5246b-158">For more information, see [How to: Specify Client Credentials for a Data Service Request](../../../../docs/framework/data/wcf/specify-client-creds-for-a-data-service-request-wcf.md).</span></span>  
  
 <span data-ttu-id="5246b-159">Když služba dat vyžaduje přihlašovací údaje, které nelze zadat pomocí <xref:System.Net.NetworkCredential> objektu, například token založené na deklaracích nebo soubor cookie, musíte ručně nastavit hlavičky v požadavku HTTP, obvykle `Authorization` a `Cookie` hlavičky.</span><span class="sxs-lookup"><span data-stu-id="5246b-159">When the data service requires login credentials that cannot be specified by using a <xref:System.Net.NetworkCredential> object, such as a claims-based token or cookie, you must manually set headers in the HTTP request, usually the `Authorization` and `Cookie` headers.</span></span> <span data-ttu-id="5246b-160">Další informace o tento druh ověřovacím scénáři, najdete v příspěvku [OData a ověřování: Client-Side zachytí](http://go.microsoft.com/fwlink/?LinkID=200385).</span><span class="sxs-lookup"><span data-stu-id="5246b-160">For more information about this kind of authentication scenario, see the post [OData and Authentication: Client-Side Hooks](http://go.microsoft.com/fwlink/?LinkID=200385).</span></span> <span data-ttu-id="5246b-161">Příklad, jak nastavit hlavičky HTTP ve zprávě požadavku, naleznete v části [postup: nastavit hlavičky v požadavku klienta](../../../../docs/framework/data/wcf/how-to-set-headers-in-the-client-request-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="5246b-161">For an example of how to set HTTP headers in a request message, see [How to: Set Headers in the Client Request](../../../../docs/framework/data/wcf/how-to-set-headers-in-the-client-request-wcf-data-services.md).</span></span>  
  
## <a name="impersonation"></a><span data-ttu-id="5246b-162">Zosobnění</span><span class="sxs-lookup"><span data-stu-id="5246b-162">Impersonation</span></span>  
 <span data-ttu-id="5246b-163">Obecně platí, že datová služba přistupuje k požadovaným prostředkům, například k souborům na serveru nebo v databázi, pomocí pověření pracovního procesu, který je hostitelem datové služby.</span><span class="sxs-lookup"><span data-stu-id="5246b-163">Generally, the data service accesses required resources, such as files on the server or a database, by using the credentials of the worker process that is hosting the data service.</span></span> <span data-ttu-id="5246b-164">Při použití zosobnění, [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] aplikací může spustit s identitou systému Windows (uživatelský účet) uživatele, který vytvořil požadavek.</span><span class="sxs-lookup"><span data-stu-id="5246b-164">When using impersonation, [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] applications can execute with the Windows identity (user account) of the user making the request.</span></span> <span data-ttu-id="5246b-165">Zosobnění se běžně používá v aplikacích, které k ověření uživatele využívají službu IIS, a pro přístup k požadovaným prostředkům se používají pověření tohoto typu.</span><span class="sxs-lookup"><span data-stu-id="5246b-165">Impersonation is commonly used in applications that rely on IIS to authenticate the user, and the credentials of this principle are used to access the required resources.</span></span> <span data-ttu-id="5246b-166">Další informace najdete v tématu [zosobnění technologie ASP.NET](http://msdn.microsoft.com/library/a0cb3024-562f-4184-9d3c-095504787d3d).</span><span class="sxs-lookup"><span data-stu-id="5246b-166">For more information, see [ASP.NET Impersonation](http://msdn.microsoft.com/library/a0cb3024-562f-4184-9d3c-095504787d3d).</span></span>  
  
## <a name="configuring-data-service-authorization"></a><span data-ttu-id="5246b-167">Konfigurace autorizace datové služby</span><span class="sxs-lookup"><span data-stu-id="5246b-167">Configuring Data Service Authorization</span></span>  
 <span data-ttu-id="5246b-168">Autorizace představuje udělení přístupu k prostředkům aplikace pro objekt zabezpečení nebo proces, který je identifikován na základě dřívějšího úspěšného ověření.</span><span class="sxs-lookup"><span data-stu-id="5246b-168">Authorization is the granting of access to application resources to a principle or process that is identified based on a previously successful authentication.</span></span> <span data-ttu-id="5246b-169">Obecně platí, že uživatelům datové služby je vhodné udělit pouze práva dostatečná k provedení operací vyžadovaných klientskými aplikacemi.</span><span class="sxs-lookup"><span data-stu-id="5246b-169">As a general practice, you should only grant sufficient rights to users of the data service to perform the operations required by client applications.</span></span>  
  
### <a name="restrict-access-to-data-service-resources"></a><span data-ttu-id="5246b-170">Omezení přístupu k prostředkům datové služby</span><span class="sxs-lookup"><span data-stu-id="5246b-170">Restrict Access to Data Service Resources</span></span>  
 <span data-ttu-id="5246b-171">Ve výchozím nastavení [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] vám umožní udělit běžné oprávnění ke čtení a zápisu pro prostředky služby data (entitu nastavit a služby operations) s žádným uživatelem, který se bude moct přístup ke službě data.</span><span class="sxs-lookup"><span data-stu-id="5246b-171">By default, [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] enables you to grant common read and write access against data service resources (entity set and service operations) to any user that is able to access the data service.</span></span> <span data-ttu-id="5246b-172">Pravidla určující přístup pro čtení a zápis lze definovat samostatně pro každou sadu entit, která je datovou službou vystavena, a pro jakékoli operace služby.</span><span class="sxs-lookup"><span data-stu-id="5246b-172">Rules that define read and write access can be defined separately for each entity set exposed by the data service, as well as to any service operations.</span></span> <span data-ttu-id="5246b-173">Doporučujeme omezit přístup pro čtení a zápis pouze na prostředky vyžadované klientskou aplikací.</span><span class="sxs-lookup"><span data-stu-id="5246b-173">We recommend limiting both read and write access to only the resources required by the client application.</span></span> <span data-ttu-id="5246b-174">Další informace najdete v tématu [požadavky na přístup k prostředku minimální](../../../../docs/framework/data/wcf/configuring-the-data-service-wcf-data-services.md#accessRequirements).</span><span class="sxs-lookup"><span data-stu-id="5246b-174">For more information, see [Minimum Resource Access Requirements](../../../../docs/framework/data/wcf/configuring-the-data-service-wcf-data-services.md#accessRequirements).</span></span>  
  
### <a name="implement-role-based-interceptors"></a><span data-ttu-id="5246b-175">Implementace zachycovacích dotazů založených na rolích</span><span class="sxs-lookup"><span data-stu-id="5246b-175">Implement Role-Based Interceptors</span></span>  
 <span data-ttu-id="5246b-176">Zachycovací dotazy umožňují zachytit požadavky na prostředky datové služby předtím, než je datová služba vykoná.</span><span class="sxs-lookup"><span data-stu-id="5246b-176">Interceptors enable you to intercept requests against data service resources before they are acted on by the data service.</span></span> <span data-ttu-id="5246b-177">Další informace najdete v tématu [sběrače](../../../../docs/framework/data/wcf/interceptors-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="5246b-177">For more information, see [Interceptors](../../../../docs/framework/data/wcf/interceptors-wcf-data-services.md).</span></span> <span data-ttu-id="5246b-178">Zachycovací dotazy dovolují přijímat rozhodnutí o autorizaci na základě ověřeného uživatele, který požadavek zadává.</span><span class="sxs-lookup"><span data-stu-id="5246b-178">Interceptors enable you to make authorization decisions based the authenticated user that is making the request.</span></span> [!INCLUDE[crexample](../../../../includes/crexample-md.md)]<span data-ttu-id="5246b-179">jak omezit přístup k prostředkům služby dat podle identity ověřeného uživatele, najdete v části [postupy: zachycení datových služba zpráv](../../../../docs/framework/data/wcf/how-to-intercept-data-service-messages-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="5246b-179"> how to restrict access to data service resources based on an authenticated user identity, see [How to: Intercept Data Service Messages](../../../../docs/framework/data/wcf/how-to-intercept-data-service-messages-wcf-data-services.md).</span></span>  
  
### <a name="restrict-access-to-the-persisted-data-store-and-local-resources"></a><span data-ttu-id="5246b-180">Omezení přístupu k trvalému úložišti dat a místním prostředkům</span><span class="sxs-lookup"><span data-stu-id="5246b-180">Restrict Access to the Persisted Data Store and Local Resources</span></span>  
 <span data-ttu-id="5246b-181">Účtům používaným pro přístup k trvalému úložišti je vhodné poskytnout pouze dostatečná práva pro databázi nebo systém souborů tak, aby byly podporovány požadavky datové služby.</span><span class="sxs-lookup"><span data-stu-id="5246b-181">The accounts that are used to access the persisted store should be granted only enough rights in a database or the file system to support the requirements of the data service.</span></span> <span data-ttu-id="5246b-182">Pokud se používá anonymní ověřování, slouží právě tento účet ke spouštění hostitelské aplikace.</span><span class="sxs-lookup"><span data-stu-id="5246b-182">When anonymous authentication is used, this is the account used to run the hosting application.</span></span> <span data-ttu-id="5246b-183">Další informace najdete v tématu [postup: vývoj WCF Data Service spuštěna ve službě IIS](../../../../docs/framework/data/wcf/how-to-develop-a-wcf-data-service-running-on-iis.md).</span><span class="sxs-lookup"><span data-stu-id="5246b-183">For more information, see [How to: Develop a WCF Data Service Running on IIS](../../../../docs/framework/data/wcf/how-to-develop-a-wcf-data-service-running-on-iis.md).</span></span> <span data-ttu-id="5246b-184">Při použití zosobnění musí být k těmto prostředkům udělen přístup ověřeným uživatelům, obvykle v rámci skupiny systému Windows.</span><span class="sxs-lookup"><span data-stu-id="5246b-184">When impersonation is used, authenticated users must be granted access to these resources, usually as part of a Windows group.</span></span>  
  
## <a name="other-security-considerations"></a><span data-ttu-id="5246b-185">Další informace o zabezpečení</span><span class="sxs-lookup"><span data-stu-id="5246b-185">Other Security Considerations</span></span>  
  
### <a name="secure-the-data-in-the-payload"></a><span data-ttu-id="5246b-186">Zabezpečení dat v datové části</span><span class="sxs-lookup"><span data-stu-id="5246b-186">Secure the Data in the Payload</span></span>  
 [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)]<span data-ttu-id="5246b-187">je založen na protokolu HTTP.</span><span class="sxs-lookup"><span data-stu-id="5246b-187"> is based on the HTTP protocol.</span></span> <span data-ttu-id="5246b-188">Hlavička zprávy HTTP může v závislosti na typu ověřování implementovaného datovou službou obsahovat důležitá uživatelská pověření.</span><span class="sxs-lookup"><span data-stu-id="5246b-188">In an HTTP message, the header may contain valuable user credentials, depending on the authentication implemented by the data service.</span></span> <span data-ttu-id="5246b-189">Cenná zákaznická data, která je třeba ochránit, mohou být obsažena také v textu zprávy.</span><span class="sxs-lookup"><span data-stu-id="5246b-189">The message body may also contain valuable customer data that must be protected.</span></span> <span data-ttu-id="5246b-190">V obou těchto případech doporučujeme k ochraně informací přenášených v síti používat protokol SSL.</span><span class="sxs-lookup"><span data-stu-id="5246b-190">In both of these cases, we recommend that you use SSL to protect this information over the wire.</span></span>  
  
### <a name="ignored-message-headers-and-cookies"></a><span data-ttu-id="5246b-191">Ignorované hlavičky zpráv a soubory cookie</span><span class="sxs-lookup"><span data-stu-id="5246b-191">Ignored Message Headers and Cookies</span></span>  
 <span data-ttu-id="5246b-192">Hlavičky požadavků HTTP s výjimkou těch, které deklarují typy obsahu a umístění prostředků, se ignorují a datová služba je nenastavuje.</span><span class="sxs-lookup"><span data-stu-id="5246b-192">HTTP request headers, other than those that declare content types and resource locations, are ignored and are never set by the data service.</span></span>  
  
 <span data-ttu-id="5246b-193">Soubory cookie slouží jako součást schématu ověřování, například s [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] ověřování pomocí formulářů.</span><span class="sxs-lookup"><span data-stu-id="5246b-193">Cookies can be used as part of an authentication scheme, such as with [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] Forms Authentication.</span></span> <span data-ttu-id="5246b-194">Však nejsou žádné soubory cookie HTTP, který je nastaven na příchozí žádosti Ignorovat [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)].</span><span class="sxs-lookup"><span data-stu-id="5246b-194">However, any HTTP cookies set on an incoming request are ignored by [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)].</span></span> <span data-ttu-id="5246b-195">Hostitel služby dat může zpracovat soubor cookie, ale [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] runtime nikdy analyzuje nebo vrátí soubory cookie.</span><span class="sxs-lookup"><span data-stu-id="5246b-195">The host of a data service may process the cookie, but the [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] runtime never analyzes or returns cookies.</span></span> <span data-ttu-id="5246b-196">[!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] Klientské knihovny také nezpracovává souborů cookie zaslaných v odpovědi.</span><span class="sxs-lookup"><span data-stu-id="5246b-196">The [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] client library also does not process cookies sent in the response.</span></span>  
  
### <a name="custom-hosting-requirements"></a><span data-ttu-id="5246b-197">Vlastní požadavky na hostování</span><span class="sxs-lookup"><span data-stu-id="5246b-197">Custom Hosting Requirements</span></span>  
 <span data-ttu-id="5246b-198">Ve výchozím nastavení [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] je vytvořen jako [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] aplikace hostované ve službě IIS.</span><span class="sxs-lookup"><span data-stu-id="5246b-198">By default, [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] is created as an [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] application hosted in IIS.</span></span> <span data-ttu-id="5246b-199">To datové službě dovoluje těžit z bezpečného chování této platformy.</span><span class="sxs-lookup"><span data-stu-id="5246b-199">This enables the data service to leverage the secure behaviors of this platform.</span></span> <span data-ttu-id="5246b-200">Můžete definovat [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] který jsou hostitelem vlastního hostitele.</span><span class="sxs-lookup"><span data-stu-id="5246b-200">You can define [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] that are hosted by a custom host.</span></span> <span data-ttu-id="5246b-201">Další informace najdete v tématu [hostující službu Data](../../../../docs/framework/data/wcf/hosting-the-data-service-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="5246b-201">For more information, see [Hosting the Data Service](../../../../docs/framework/data/wcf/hosting-the-data-service-wcf-data-services.md).</span></span> <span data-ttu-id="5246b-202">Součásti a platforma hostující datovou službu musí jako prevenci proti útokům na datovou službu zajistit následující bezpečnostní chování:</span><span class="sxs-lookup"><span data-stu-id="5246b-202">The components and platform hosting a data service must ensure the following security behaviors to prevent attacks on the data service:</span></span>  
  
-   <span data-ttu-id="5246b-203">Omezení délky identifikátoru URI přijímaného v požadavku na datovou službu pro všechny možné operace.</span><span class="sxs-lookup"><span data-stu-id="5246b-203">Limit the length of the URI accepted in a data service request for all possible operations.</span></span>  
  
-   <span data-ttu-id="5246b-204">Omezení velikosti příchozí a odchozí zprávy HTTP.</span><span class="sxs-lookup"><span data-stu-id="5246b-204">Limit the size of both incoming and outgoing HTTP messages.</span></span>  
  
-   <span data-ttu-id="5246b-205">Omezení celkového počtu nevyřízených požadavků v kterémkoli okamžiku.</span><span class="sxs-lookup"><span data-stu-id="5246b-205">Limit the total number of outstanding requests at any given time.</span></span>  
  
-   <span data-ttu-id="5246b-206">Omezení velikosti hlavičky protokolu HTTP a jejich hodnot a zadejte [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] přístup k datům záhlaví.</span><span class="sxs-lookup"><span data-stu-id="5246b-206">Limit the size of HTTP headers and their values, and provide [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] access to header data.</span></span>  
  
-   <span data-ttu-id="5246b-207">Rozpoznání a odvracení známých útoků, jako jsou útoky TCP SYN a útoky pomocí opakovaného přehrávání zprávy.</span><span class="sxs-lookup"><span data-stu-id="5246b-207">Detect and counter known attacks, such as TCP SYN and message replay attacks.</span></span>  
  
### <a name="values-are-not-further-encoded"></a><span data-ttu-id="5246b-208">Hodnoty se dále nešifrují</span><span class="sxs-lookup"><span data-stu-id="5246b-208">Values Are Not Further Encoded</span></span>  
 <span data-ttu-id="5246b-209">Hodnoty vlastností, odešle do služby data nejsou další kódovaný pomocí [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] modulu runtime.</span><span class="sxs-lookup"><span data-stu-id="5246b-209">Property values sent to the data service are not further encoded by the [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] runtime.</span></span> <span data-ttu-id="5246b-210">Pokud například řetězcová vlastnost entity obsahuje formátovaný obsah ve formátu HTML, jeho značky nejsou datovou službou zašifrovány do jazyka HTML.</span><span class="sxs-lookup"><span data-stu-id="5246b-210">For example, when a string property of an entity contains formatted HTML content, the tags are not HTML encoded by the data service.</span></span> <span data-ttu-id="5246b-211">Datová služby zároveň dále nešifruje hodnoty vlastností v odezvě.</span><span class="sxs-lookup"><span data-stu-id="5246b-211">The data service also does not further encode property values in the response.</span></span> <span data-ttu-id="5246b-212">Další šifrování neprovádí ani knihovna klienta.</span><span class="sxs-lookup"><span data-stu-id="5246b-212">The client library also does not perform any additional encoding.</span></span>  
  
### <a name="considerations-for-client-applications"></a><span data-ttu-id="5246b-213">Důležité informace o klientských aplikacích</span><span class="sxs-lookup"><span data-stu-id="5246b-213">Considerations for Client Applications</span></span>  
 <span data-ttu-id="5246b-214">Pro aplikace, které používají, platí následující aspekty zabezpečení [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] klientovi přístup k [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] služby:</span><span class="sxs-lookup"><span data-stu-id="5246b-214">The following security considerations apply to applications that use the [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] client to access [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] services:</span></span>  
  
-   <span data-ttu-id="5246b-215">Knihovna klienta předpokládá, že protokoly použité k přístupu k datové službě poskytují odpovídající úroveň zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="5246b-215">The client library assumes that the protocols used to access the data service provide an appropriate level of security.</span></span>  
  
-   <span data-ttu-id="5246b-216">Knihovna klienta používá veškeré výchozí hodnoty pro časové limity a možnosti analýzy transportních zásobníků poskytovaných podkladovou platformou.</span><span class="sxs-lookup"><span data-stu-id="5246b-216">The client library uses all the default values for timeouts and parsing options of the underlying platform-provided transport stacks.</span></span>  
  
-   <span data-ttu-id="5246b-217">Knihovna klienta nenačítá žádná nastavení z konfiguračních souborů aplikace.</span><span class="sxs-lookup"><span data-stu-id="5246b-217">The client library does not read any settings from application configuration files.</span></span>  
  
-   <span data-ttu-id="5246b-218">Knihovna klienta neimplementuje žádné mechanismy přístupu napříč doménami.</span><span class="sxs-lookup"><span data-stu-id="5246b-218">The client library does not implement any cross domain access mechanisms.</span></span> <span data-ttu-id="5246b-219">Místo toho využívá mechanismy poskytované podkladovým zásobníkem HTTP.</span><span class="sxs-lookup"><span data-stu-id="5246b-219">Instead, it relies on the mechanisms provided by the underlying HTTP stack.</span></span>  
  
-   <span data-ttu-id="5246b-220">Knihovna klienta neobsahuje žádné prvky uživatelského rozhraní a nikdy se nepokouší zobrazit ani vykreslit data, která přijímá nebo odesílá.</span><span class="sxs-lookup"><span data-stu-id="5246b-220">The client library has no user interface elements, and it never tries to display or render the data that it receives or sends.</span></span>  
  
-   <span data-ttu-id="5246b-221">Doporučujeme, aby klientské aplikace vždy ověřovaly uživatelské vstupy i údaje přijímané z nedůvěryhodných služeb.</span><span class="sxs-lookup"><span data-stu-id="5246b-221">We recommend that client applications always validate user input as well as data accepted from untrusted services.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="5246b-222">Viz také</span><span class="sxs-lookup"><span data-stu-id="5246b-222">See Also</span></span>  
 [<span data-ttu-id="5246b-223">Definování datových služeb WCF Data Services</span><span class="sxs-lookup"><span data-stu-id="5246b-223">Defining WCF Data Services</span></span>](../../../../docs/framework/data/wcf/defining-wcf-data-services.md)  
 [<span data-ttu-id="5246b-224">Klientská knihovna pro WCF Data Services</span><span class="sxs-lookup"><span data-stu-id="5246b-224">WCF Data Services Client Library</span></span>](../../../../docs/framework/data/wcf/wcf-data-services-client-library.md)
