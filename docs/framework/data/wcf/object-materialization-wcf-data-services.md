---
title: "Objekt Materialization (služby WCF Data Services)"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework-oob
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- WCF Data Services, client library
- WCF Data Services, querying
ms.assetid: f0dbf7b0-0292-4e31-9ae4-b98288336dc1
caps.latest.revision: "4"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.workload: dotnet
ms.openlocfilehash: b093fce50de6a0437456f4fb0e025e3c853777e4
ms.sourcegitcommit: 16186c34a957fdd52e5db7294f291f7530ac9d24
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 12/22/2017
---
# <a name="object-materialization-wcf-data-services"></a><span data-ttu-id="d103b-102">Objekt Materialization (služby WCF Data Services)</span><span class="sxs-lookup"><span data-stu-id="d103b-102">Object Materialization (WCF Data Services)</span></span>
<span data-ttu-id="d103b-103">Při použití **přidat odkaz na službu** dialogovém okně můžete využívat [!INCLUDE[ssODataFull](../../../../includes/ssodatafull-md.md)] kanálu v aplikaci klienta na základě rozhraní .NET Framework, ke každému typu entity v datovém modelu, který je zveřejněný prostřednictvím informačního kanálu se generují ekvivalentní datové třídy.</span><span class="sxs-lookup"><span data-stu-id="d103b-103">When you use the **Add Service Reference** dialog to consume an [!INCLUDE[ssODataFull](../../../../includes/ssodatafull-md.md)] feed in a .NET Framework-based client application, equivalent data classes are generated for each entity type in the data model exposed by the feed.</span></span> <span data-ttu-id="d103b-104">Další informace najdete v tématu [generování dat služby klientské knihovny](../../../../docs/framework/data/wcf/generating-the-data-service-client-library-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="d103b-104">For more information, see [Generating the Data Service Client Library](../../../../docs/framework/data/wcf/generating-the-data-service-client-library-wcf-data-services.md).</span></span> <span data-ttu-id="d103b-105">Data entity, který je vrácen dotazu je vyhodnocena do instance jednoho z těchto tříd služby data generovaného klienta.</span><span class="sxs-lookup"><span data-stu-id="d103b-105">Entity data that is returned by a query is materialized into an instance of one of these generated client data service classes.</span></span> <span data-ttu-id="d103b-106">Informace o možnostech sloučení a řešení identity sledovaných objektů najdete v tématu [Správa služby kontextu dat](../../../../docs/framework/data/wcf/managing-the-data-service-context-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="d103b-106">For information about merge options and identity resolution for tracked objects, see [Managing the Data Service Context](../../../../docs/framework/data/wcf/managing-the-data-service-context-wcf-data-services.md).</span></span>  
  
 [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)]<span data-ttu-id="d103b-107">také umožňuje definovat vaše vlastní třídy klienta dat služby místo použití tříd nástroj generovaná data.</span><span class="sxs-lookup"><span data-stu-id="d103b-107"> also enables you to define your own client data service classes rather than using the tool-generated data classes.</span></span> <span data-ttu-id="d103b-108">To umožňuje používat vlastní datové třídy, také známé jako "prostý starý CLR objektu" (objektů POCO) datových tříd.</span><span class="sxs-lookup"><span data-stu-id="d103b-108">This enables you to use your own data classes, also known as "plain-old CLR object" (POCO) data classes.</span></span> <span data-ttu-id="d103b-109">Při použití těchto typů vlastních datových tříd, má atribut třída dat pomocí <xref:System.Data.Services.Common.DataServiceKeyAttribute> nebo <xref:System.Data.Services.Common.DataServiceEntityAttribute> a ujistěte se, že typ názvy na názvy typů shody klienta v datovém modelu datové služby.</span><span class="sxs-lookup"><span data-stu-id="d103b-109">When using these types of custom data classes, you should attribute the data class with either <xref:System.Data.Services.Common.DataServiceKeyAttribute> or <xref:System.Data.Services.Common.DataServiceEntityAttribute> and ensure that type names on the client match type names in the data model of the data service.</span></span>  
  
 <span data-ttu-id="d103b-110">Po knihovny obdrží zprávu odpovědi dotazu, se bude realizována vrácená data z [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] kanálu do instance dat klienta třídy služeb, které jsou typu dotazu.</span><span class="sxs-lookup"><span data-stu-id="d103b-110">After the library receives the query response message, it materializes the returned data from the [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] feed into instances of client data service classes that are of the type of the query.</span></span> <span data-ttu-id="d103b-111">Obecný postup pro vyhodnocování tyto objekty vypadá takto:</span><span class="sxs-lookup"><span data-stu-id="d103b-111">The general process for materializing these objects is as follows:</span></span>  
  
1.  <span data-ttu-id="d103b-112">Klientská knihovna čte serializovaných typu z `entry` element v kanálu zprávu odpovědi a pokusy o vytvoření nové instance správného typu, v jednom z následujících způsobů:</span><span class="sxs-lookup"><span data-stu-id="d103b-112">The client library reads the serialized type from the `entry` element in the response message feed and attempts to create a new instance of the correct type, in one of the following ways:</span></span>  
  
    -   <span data-ttu-id="d103b-113">Pokud typ deklarován v informačním kanálu má stejný název jako typ <xref:System.Data.Services.Client.DataServiceQuery%601>, je vytvořena nová instance tohoto typu pomocí prázdného konstruktoru.</span><span class="sxs-lookup"><span data-stu-id="d103b-113">When the type declared in the feed has the same name as the type of the <xref:System.Data.Services.Client.DataServiceQuery%601>, a new instance of this type is created by using the empty constructor.</span></span>  
  
    -   <span data-ttu-id="d103b-114">Pokud typ deklarován v informačním kanálu má stejný název jako typ, který je odvozen z typu <xref:System.Data.Services.Client.DataServiceQuery%601>, pomocí prázdného konstruktoru je vytvořena nová instance tohoto odvozeného typu.</span><span class="sxs-lookup"><span data-stu-id="d103b-114">When the type declared in the feed has the same name as a type that is derived from the type of the <xref:System.Data.Services.Client.DataServiceQuery%601>, a new instance of this derived type is created by using the empty constructor.</span></span>  
  
    -   <span data-ttu-id="d103b-115">Pokud typ deklarován v informačním kanálu nelze namapovat na typ <xref:System.Data.Services.Client.DataServiceQuery%601> nebo všechny odvozené typy, novou instanci třídy dotazovaný typ je vytvořená pomocí prázdného konstruktoru.</span><span class="sxs-lookup"><span data-stu-id="d103b-115">When the type declared in the feed cannot be matched to the type of the <xref:System.Data.Services.Client.DataServiceQuery%601> or any derived types, a new instance of the queried type is created by using the empty constructor.</span></span>  
  
    -   <span data-ttu-id="d103b-116">Když <xref:System.Data.Services.Client.DataServiceContext.ResolveType%2A> vlastnost nastavena, zadaný delegát nazývá přepsat výchozí mapování na základě názvu typu a novou instanci třídy typ vrácený <xref:System.Func%602> místo toho je vytvořena.</span><span class="sxs-lookup"><span data-stu-id="d103b-116">When the <xref:System.Data.Services.Client.DataServiceContext.ResolveType%2A> property is set, the supplied delegate is called to override the default name-based type mapping and a new instance of the type returned by the <xref:System.Func%602> is created instead.</span></span> <span data-ttu-id="d103b-117">Pokud tento delegát vrátí hodnotu null, místo toho je vytvořena nová instance typu předmětem dotazu.</span><span class="sxs-lookup"><span data-stu-id="d103b-117">If this delegate returns a null value, a new instance of the queried type is created instead.</span></span> <span data-ttu-id="d103b-118">Může být nezbytné přepsat výchozí mapování názvu na základě názvu typu pro podporu dědičnosti scénářů.</span><span class="sxs-lookup"><span data-stu-id="d103b-118">It may be required to override the default name-based type name mapping to support inheritance scenarios.</span></span>  
  
2.  <span data-ttu-id="d103b-119">Klientská knihovna čte hodnota z identifikátoru URI `id` element `entry`, což je hodnota identity entity.</span><span class="sxs-lookup"><span data-stu-id="d103b-119">The client library reads the URI value from the `id` element of the `entry`, which is the identity value of the entity.</span></span> <span data-ttu-id="d103b-120">Pokud <xref:System.Data.Services.Client.DataServiceContext.MergeOption%2A> hodnotu <xref:System.Data.Services.Client.MergeOption.NoTracking> se používá, hodnotu identity slouží ke sledování objektu ve <xref:System.Data.Services.Client.DataServiceContext>.</span><span class="sxs-lookup"><span data-stu-id="d103b-120">Unless a <xref:System.Data.Services.Client.DataServiceContext.MergeOption%2A> value of <xref:System.Data.Services.Client.MergeOption.NoTracking> is used, the identity value is used to track the object in the <xref:System.Data.Services.Client.DataServiceContext>.</span></span> <span data-ttu-id="d103b-121">Zaručit, že pouze jedna entita instance je vytvořen i v případě, že entita je v odpovědi na dotaz vrátil více než jednou. je také použít hodnotu identity.</span><span class="sxs-lookup"><span data-stu-id="d103b-121">The identity value is also used to guarantee that only a single entity instance is created, even when an entity is returned multiple times in the query response.</span></span>  
  
3.  <span data-ttu-id="d103b-122">Klientská knihovna načte vlastnosti ze zadaného informačního kanálu a nastavte odpovídající vlastnosti na nově vytvořený objekt.</span><span class="sxs-lookup"><span data-stu-id="d103b-122">The client library reads properties from the feed entry and set the corresponding properties on the newly created object.</span></span> <span data-ttu-id="d103b-123">Pokud objekt, který už má stejnou hodnotu identity dojde v <xref:System.Data.Services.Client.DataServiceContext>, vlastnosti jsou nastavené na základě <xref:System.Data.Services.Client.MergeOption> nastavit <xref:System.Data.Services.Client.DataServiceContext>.</span><span class="sxs-lookup"><span data-stu-id="d103b-123">When an object that has the same identity value already occurs in the <xref:System.Data.Services.Client.DataServiceContext>, the properties are set based on the <xref:System.Data.Services.Client.MergeOption> setting of the <xref:System.Data.Services.Client.DataServiceContext>.</span></span> <span data-ttu-id="d103b-124">Odpovědi může obsahovat hodnoty vlastností, pro které nedojde odpovídající vlastnosti v typu klienta.</span><span class="sxs-lookup"><span data-stu-id="d103b-124">The response might contain property values for which a corresponding property does not occur in the client type.</span></span> <span data-ttu-id="d103b-125">V takovém případě akce závisí na hodnotu <xref:System.Data.Services.Client.DataServiceContext.IgnoreMissingProperties%2A> vlastnost <xref:System.Data.Services.Client.DataServiceContext>.</span><span class="sxs-lookup"><span data-stu-id="d103b-125">When this occurs, the action depends on the value of the <xref:System.Data.Services.Client.DataServiceContext.IgnoreMissingProperties%2A> property of the <xref:System.Data.Services.Client.DataServiceContext>.</span></span> <span data-ttu-id="d103b-126">Pokud je tato vlastnost nastavená na `true`, chybí vlastnost je ignorována.</span><span class="sxs-lookup"><span data-stu-id="d103b-126">When this property is set to `true`, the missing property is ignored.</span></span> <span data-ttu-id="d103b-127">Jinak je vyvolána k chybě.</span><span class="sxs-lookup"><span data-stu-id="d103b-127">Otherwise, an error is raised.</span></span> <span data-ttu-id="d103b-128">Vlastnosti jsou nastaveny takto:</span><span class="sxs-lookup"><span data-stu-id="d103b-128">Properties are set as follows:</span></span>  
  
    -   <span data-ttu-id="d103b-129">Skalární vlastnosti jsou nastaveny na odpovídající hodnotu v položce ve zprávě s odpovědí.</span><span class="sxs-lookup"><span data-stu-id="d103b-129">Scalar properties are set to the corresponding value in the entry in the response message.</span></span>  
  
    -   <span data-ttu-id="d103b-130">Komplexní vlastnosti jsou nastaveny na novou instanci komplexního typu, které lze nastavit s vlastnostmi komplexní typ z odpovědi.</span><span class="sxs-lookup"><span data-stu-id="d103b-130">Complex properties are set to a new complex type instance, which are set with the properties of the complex type from the response.</span></span>  
  
    -   <span data-ttu-id="d103b-131">Navigační vlastnosti, které vrací kolekce entit v relaci jsou nastaveny na nový nebo existující instanci systému <xref:System.Collections.Generic.ICollection%601>, kde `T` je typ entity v relaci.</span><span class="sxs-lookup"><span data-stu-id="d103b-131">Navigation properties that return a collection of related entities are set to a new or existing instance of <xref:System.Collections.Generic.ICollection%601>, where `T` is the type of the related entity.</span></span> <span data-ttu-id="d103b-132">Tato kolekce je prázdný, pokud souvisejících objektů, které byly načteny do <xref:System.Data.Services.Client.DataServiceContext>.</span><span class="sxs-lookup"><span data-stu-id="d103b-132">This collection is empty unless the related objects have been loaded into the <xref:System.Data.Services.Client.DataServiceContext>.</span></span> <span data-ttu-id="d103b-133">Další informace najdete v tématu [načítání odložení obsahu](../../../../docs/framework/data/wcf/loading-deferred-content-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="d103b-133">For more information, see [Loading Deferred Content](../../../../docs/framework/data/wcf/loading-deferred-content-wcf-data-services.md).</span></span>  
  
        > [!NOTE]
        >  <span data-ttu-id="d103b-134">Při datové třídy generovaného klienta podporovat datové vazby, navigačních vlastností vrátit instanci <xref:System.Data.Services.Client.DataServiceCollection%601> třídy místo.</span><span class="sxs-lookup"><span data-stu-id="d103b-134">When the generated client data classes support data binding, navigation properties return instances of the <xref:System.Data.Services.Client.DataServiceCollection%601> class instead.</span></span> <span data-ttu-id="d103b-135">Další informace najdete v tématu [vazby dat k ovládacím prvkům](../../../../docs/framework/data/wcf/binding-data-to-controls-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="d103b-135">For more information, see [Binding Data to Controls](../../../../docs/framework/data/wcf/binding-data-to-controls-wcf-data-services.md).</span></span>  
  
4.  <span data-ttu-id="d103b-136"><xref:System.Data.Services.Client.DataServiceContext.ReadingEntity> Událost se vyvolá.</span><span class="sxs-lookup"><span data-stu-id="d103b-136">The <xref:System.Data.Services.Client.DataServiceContext.ReadingEntity> event is raised.</span></span>  
  
5.  <span data-ttu-id="d103b-137">Klientská knihovna připojí objekt, který má <xref:System.Data.Services.Client.DataServiceContext>.</span><span class="sxs-lookup"><span data-stu-id="d103b-137">The client library attaches the object to the <xref:System.Data.Services.Client.DataServiceContext>.</span></span> <span data-ttu-id="d103b-138">Objekt není připojený, kdy <xref:System.Data.Services.Client.MergeOption> je <xref:System.Data.Services.Client.MergeOption.NoTracking>.</span><span class="sxs-lookup"><span data-stu-id="d103b-138">The object is not attached when the <xref:System.Data.Services.Client.MergeOption> is <xref:System.Data.Services.Client.MergeOption.NoTracking>.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="d103b-139">Viz také</span><span class="sxs-lookup"><span data-stu-id="d103b-139">See Also</span></span>  
 [<span data-ttu-id="d103b-140">Dotazování v datové službě</span><span class="sxs-lookup"><span data-stu-id="d103b-140">Querying the Data Service</span></span>](../../../../docs/framework/data/wcf/querying-the-data-service-wcf-data-services.md)  
 [<span data-ttu-id="d103b-141">Projekce dotazů</span><span class="sxs-lookup"><span data-stu-id="d103b-141">Query Projections</span></span>](../../../../docs/framework/data/wcf/query-projections-wcf-data-services.md)
