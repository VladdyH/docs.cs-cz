---
title: "Zařazování dat s voláním platformy"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology:
- dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
dev_langs:
- cpp
helpviewer_keywords:
- platform invoke, marshaling data
- data marshaling, platform invoke
- marshaling, platform invoke
ms.assetid: dc5c76cf-7b12-406f-b79c-d1a023ec245d
caps.latest.revision: 
author: rpetrusha
ms.author: ronpet
manager: wpickett
ms.workload:
- dotnet
ms.openlocfilehash: 24ae6da0b32cf15ee9104bd10ba5fe6bb03a9763
ms.sourcegitcommit: 16186c34a957fdd52e5db7294f291f7530ac9d24
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 12/22/2017
---
# <a name="marshaling-data-with-platform-invoke"></a><span data-ttu-id="5430a-102">Zařazování dat s voláním platformy</span><span class="sxs-lookup"><span data-stu-id="5430a-102">Marshaling Data with Platform Invoke</span></span>
<span data-ttu-id="5430a-103">Volání funkce exportované z nespravovaných knihovny, vyžaduje rozhraní .NET Framework aplikace funkce prototypů ve spravovaném kódu, který představuje nespravované funkce.</span><span class="sxs-lookup"><span data-stu-id="5430a-103">To call functions exported from an unmanaged library, a .NET Framework application requires a function prototype in managed code that represents the unmanaged function.</span></span> <span data-ttu-id="5430a-104">Chcete-li vytvořit prototyp, která umožňuje platformy vyvolání zařazování dat správně, musíte provést následující:</span><span class="sxs-lookup"><span data-stu-id="5430a-104">To create a prototype that enables platform invoke to marshal data correctly, you must do the following:</span></span>  
  
-   <span data-ttu-id="5430a-105">Použít <xref:System.Runtime.InteropServices.DllImportAttribute> atribut statickou funkci nebo metodu ve spravovaném kódu.</span><span class="sxs-lookup"><span data-stu-id="5430a-105">Apply the <xref:System.Runtime.InteropServices.DllImportAttribute> attribute to the static function or method in managed code.</span></span>  
  
-   <span data-ttu-id="5430a-106">Nahraďte spravované datové typy pro nespravované datové typy.</span><span class="sxs-lookup"><span data-stu-id="5430a-106">Substitute managed data types for unmanaged data types.</span></span>  
  
 <span data-ttu-id="5430a-107">Podle dokumentace dodané s nespravované funkce můžete vytvořit ekvivalentní spravované prototypu použitím atribut s jeho nepovinná pole a nahraďte spravované datové typy pro nespravované typy.</span><span class="sxs-lookup"><span data-stu-id="5430a-107">You can use the documentation supplied with an unmanaged function to construct an equivalent managed prototype by applying the attribute with its optional fields and substituting managed data types for unmanaged types.</span></span> <span data-ttu-id="5430a-108">Pokyny, jak se má použít **DllImportAttribute**, najdete v části [využívání nespravovaných funkcí DLL](../../../docs/framework/interop/consuming-unmanaged-dll-functions.md).</span><span class="sxs-lookup"><span data-stu-id="5430a-108">For instructions about how to apply the **DllImportAttribute**, see [Consuming Unmanaged DLL Functions](../../../docs/framework/interop/consuming-unmanaged-dll-functions.md).</span></span>  
  
 <span data-ttu-id="5430a-109">Tato část obsahuje vzorků, které ukazují, jak vytvořit prototypy spravovaných funkcí pro předání argumentů k a příjem návratové hodnoty z funkce exportované sadou nespravované knihovny.</span><span class="sxs-lookup"><span data-stu-id="5430a-109">This section provides samples that demonstrate how to create managed function prototypes for passing arguments to and receiving return values from functions exported by unmanaged libraries.</span></span> <span data-ttu-id="5430a-110">Ukázky také ukazují, kdy použít <xref:System.Runtime.InteropServices.MarshalAsAttribute> atribut a <xref:System.Runtime.InteropServices.Marshal> třídy explicitně zařazování data.</span><span class="sxs-lookup"><span data-stu-id="5430a-110">The samples also demonstrate when to use the <xref:System.Runtime.InteropServices.MarshalAsAttribute> attribute and the <xref:System.Runtime.InteropServices.Marshal> class to explicitly marshal data.</span></span>  
  
## <a name="platform-invoke-data-types"></a><span data-ttu-id="5430a-111">Datové typy vyvolání platformy</span><span class="sxs-lookup"><span data-stu-id="5430a-111">Platform invoke data types</span></span>  
 <span data-ttu-id="5430a-112">Následující tabulka uvádí typy dat používaných v rozhraní API Win32 (uvedené v Wtypes.h) a funkce jazyka C.</span><span class="sxs-lookup"><span data-stu-id="5430a-112">The following table lists data types used in the Win32 API (listed in Wtypes.h) and C-style functions.</span></span> <span data-ttu-id="5430a-113">Mnoho nespravované knihovny obsahují funkce, které předejte tyto datové typy jako parametry a návratové hodnoty.</span><span class="sxs-lookup"><span data-stu-id="5430a-113">Many unmanaged libraries contain functions that pass these data types as parameters and return values.</span></span> <span data-ttu-id="5430a-114">Třetí sloupec uvádí odpovídající typ rozhraní .NET Framework předdefinované hodnoty nebo třídu, která použijete ve spravovaném kódu.</span><span class="sxs-lookup"><span data-stu-id="5430a-114">The third column lists the corresponding .NET Framework built-in value type or class that you use in managed code.</span></span> <span data-ttu-id="5430a-115">V některých případech můžete nahradit typem stejnou velikost pro typ uvedené v tabulce.</span><span class="sxs-lookup"><span data-stu-id="5430a-115">In some cases, you can substitute a type of the same size for the type listed in the table.</span></span>  
  
|<span data-ttu-id="5430a-116">Nespravovaný typ v Wtypes.h</span><span class="sxs-lookup"><span data-stu-id="5430a-116">Unmanaged type in Wtypes.h</span></span>|<span data-ttu-id="5430a-117">Nespravovaný typ jazyka C</span><span class="sxs-lookup"><span data-stu-id="5430a-117">Unmanaged C language type</span></span>|<span data-ttu-id="5430a-118">Název spravované třídy</span><span class="sxs-lookup"><span data-stu-id="5430a-118">Managed class name</span></span>|<span data-ttu-id="5430a-119">Popis</span><span class="sxs-lookup"><span data-stu-id="5430a-119">Description</span></span>|  
|--------------------------------|-------------------------------|------------------------|-----------------|  
|<span data-ttu-id="5430a-120">**POPISOVAČ**</span><span class="sxs-lookup"><span data-stu-id="5430a-120">**HANDLE**</span></span>|<span data-ttu-id="5430a-121">**void\***</span><span class="sxs-lookup"><span data-stu-id="5430a-121">**void\***</span></span>|<xref:System.IntPtr?displayProperty=nameWithType>|<span data-ttu-id="5430a-122">32bitová verze na 32bitové operační systémy Windows, 64 bitů v operačních systémech Windows 64-bit.</span><span class="sxs-lookup"><span data-stu-id="5430a-122">32 bits on 32-bit Windows operating systems, 64 bits on 64-bit Windows operating systems.</span></span>|  
|<span data-ttu-id="5430a-123">**BAJTŮ**</span><span class="sxs-lookup"><span data-stu-id="5430a-123">**BYTE**</span></span>|<span data-ttu-id="5430a-124">**unsigned char**</span><span class="sxs-lookup"><span data-stu-id="5430a-124">**unsigned char**</span></span>|<xref:System.Byte?displayProperty=nameWithType>|<span data-ttu-id="5430a-125">8 bitů</span><span class="sxs-lookup"><span data-stu-id="5430a-125">8 bits</span></span>|  
|<span data-ttu-id="5430a-126">**KRÁTKÝ**</span><span class="sxs-lookup"><span data-stu-id="5430a-126">**SHORT**</span></span>|<span data-ttu-id="5430a-127">**short**</span><span class="sxs-lookup"><span data-stu-id="5430a-127">**short**</span></span>|<xref:System.Int16?displayProperty=nameWithType>|<span data-ttu-id="5430a-128">16 bitů</span><span class="sxs-lookup"><span data-stu-id="5430a-128">16 bits</span></span>|  
|<span data-ttu-id="5430a-129">**WORD**</span><span class="sxs-lookup"><span data-stu-id="5430a-129">**WORD**</span></span>|<span data-ttu-id="5430a-130">**short bez znaménka**</span><span class="sxs-lookup"><span data-stu-id="5430a-130">**unsigned short**</span></span>|<xref:System.UInt16?displayProperty=nameWithType>|<span data-ttu-id="5430a-131">16 bitů</span><span class="sxs-lookup"><span data-stu-id="5430a-131">16 bits</span></span>|  
|<span data-ttu-id="5430a-132">**CELÁ ČÍSLA**</span><span class="sxs-lookup"><span data-stu-id="5430a-132">**INT**</span></span>|<span data-ttu-id="5430a-133">**int**</span><span class="sxs-lookup"><span data-stu-id="5430a-133">**int**</span></span>|<xref:System.Int32?displayProperty=nameWithType>|<span data-ttu-id="5430a-134">32bitová verze</span><span class="sxs-lookup"><span data-stu-id="5430a-134">32 bits</span></span>|  
|<span data-ttu-id="5430a-135">**UINT**</span><span class="sxs-lookup"><span data-stu-id="5430a-135">**UINT**</span></span>|<span data-ttu-id="5430a-136">**int bez znaménka**</span><span class="sxs-lookup"><span data-stu-id="5430a-136">**unsigned int**</span></span>|<xref:System.UInt32?displayProperty=nameWithType>|<span data-ttu-id="5430a-137">32bitová verze</span><span class="sxs-lookup"><span data-stu-id="5430a-137">32 bits</span></span>|  
|<span data-ttu-id="5430a-138">**DLOUHÁ**</span><span class="sxs-lookup"><span data-stu-id="5430a-138">**LONG**</span></span>|<span data-ttu-id="5430a-139">**long**</span><span class="sxs-lookup"><span data-stu-id="5430a-139">**long**</span></span>|<xref:System.Int32?displayProperty=nameWithType>|<span data-ttu-id="5430a-140">32bitová verze</span><span class="sxs-lookup"><span data-stu-id="5430a-140">32 bits</span></span>|  
|<span data-ttu-id="5430a-141">**BOOL**</span><span class="sxs-lookup"><span data-stu-id="5430a-141">**BOOL**</span></span>|<span data-ttu-id="5430a-142">**long**</span><span class="sxs-lookup"><span data-stu-id="5430a-142">**long**</span></span>|<xref:System.Byte>|<span data-ttu-id="5430a-143">32bitová verze</span><span class="sxs-lookup"><span data-stu-id="5430a-143">32 bits</span></span>|  
|<span data-ttu-id="5430a-144">**DWORD**</span><span class="sxs-lookup"><span data-stu-id="5430a-144">**DWORD**</span></span>|<span data-ttu-id="5430a-145">**dlouho bez znaménka**</span><span class="sxs-lookup"><span data-stu-id="5430a-145">**unsigned long**</span></span>|<xref:System.UInt32?displayProperty=nameWithType>|<span data-ttu-id="5430a-146">32bitová verze</span><span class="sxs-lookup"><span data-stu-id="5430a-146">32 bits</span></span>|  
|<span data-ttu-id="5430a-147">**ULONG –**</span><span class="sxs-lookup"><span data-stu-id="5430a-147">**ULONG**</span></span>|<span data-ttu-id="5430a-148">**dlouho bez znaménka**</span><span class="sxs-lookup"><span data-stu-id="5430a-148">**unsigned long**</span></span>|<xref:System.UInt32?displayProperty=nameWithType>|<span data-ttu-id="5430a-149">32bitová verze</span><span class="sxs-lookup"><span data-stu-id="5430a-149">32 bits</span></span>|  
|<span data-ttu-id="5430a-150">**CHAR –**</span><span class="sxs-lookup"><span data-stu-id="5430a-150">**CHAR**</span></span>|<span data-ttu-id="5430a-151">**char**</span><span class="sxs-lookup"><span data-stu-id="5430a-151">**char**</span></span>|<xref:System.Char?displayProperty=nameWithType>|<span data-ttu-id="5430a-152">Uspořádání s ANSI.</span><span class="sxs-lookup"><span data-stu-id="5430a-152">Decorate with ANSI.</span></span>|  
|<span data-ttu-id="5430a-153">**WCHAR**</span><span class="sxs-lookup"><span data-stu-id="5430a-153">**WCHAR**</span></span>|<span data-ttu-id="5430a-154">**wchar_t**</span><span class="sxs-lookup"><span data-stu-id="5430a-154">**wchar_t**</span></span>|<xref:System.Char?displayProperty=nameWithType>|<span data-ttu-id="5430a-155">Uspořádání pomocí kódování Unicode.</span><span class="sxs-lookup"><span data-stu-id="5430a-155">Decorate with Unicode.</span></span>|  
|<span data-ttu-id="5430a-156">**LPSTR**</span><span class="sxs-lookup"><span data-stu-id="5430a-156">**LPSTR**</span></span>|<span data-ttu-id="5430a-157">**Char\***</span><span class="sxs-lookup"><span data-stu-id="5430a-157">**char\***</span></span>|<span data-ttu-id="5430a-158"><xref:System.String?displayProperty=nameWithType>nebo<xref:System.Text.StringBuilder?displayProperty=nameWithType></span><span class="sxs-lookup"><span data-stu-id="5430a-158"><xref:System.String?displayProperty=nameWithType> or <xref:System.Text.StringBuilder?displayProperty=nameWithType></span></span>|<span data-ttu-id="5430a-159">Uspořádání s ANSI.</span><span class="sxs-lookup"><span data-stu-id="5430a-159">Decorate with ANSI.</span></span>|  
|<span data-ttu-id="5430a-160">**LPCSTR**</span><span class="sxs-lookup"><span data-stu-id="5430a-160">**LPCSTR**</span></span>|<span data-ttu-id="5430a-161">**Const char\***</span><span class="sxs-lookup"><span data-stu-id="5430a-161">**Const char\***</span></span>|<span data-ttu-id="5430a-162"><xref:System.String?displayProperty=nameWithType>nebo<xref:System.Text.StringBuilder?displayProperty=nameWithType></span><span class="sxs-lookup"><span data-stu-id="5430a-162"><xref:System.String?displayProperty=nameWithType> or <xref:System.Text.StringBuilder?displayProperty=nameWithType></span></span>|<span data-ttu-id="5430a-163">Uspořádání s ANSI.</span><span class="sxs-lookup"><span data-stu-id="5430a-163">Decorate with ANSI.</span></span>|  
|<span data-ttu-id="5430a-164">**LPWSTR**</span><span class="sxs-lookup"><span data-stu-id="5430a-164">**LPWSTR**</span></span>|<span data-ttu-id="5430a-165">**wchar_t\***</span><span class="sxs-lookup"><span data-stu-id="5430a-165">**wchar_t\***</span></span>|<span data-ttu-id="5430a-166"><xref:System.String?displayProperty=nameWithType>nebo<xref:System.Text.StringBuilder?displayProperty=nameWithType></span><span class="sxs-lookup"><span data-stu-id="5430a-166"><xref:System.String?displayProperty=nameWithType> or <xref:System.Text.StringBuilder?displayProperty=nameWithType></span></span>|<span data-ttu-id="5430a-167">Uspořádání pomocí kódování Unicode.</span><span class="sxs-lookup"><span data-stu-id="5430a-167">Decorate with Unicode.</span></span>|  
|<span data-ttu-id="5430a-168">**LPCWSTR**</span><span class="sxs-lookup"><span data-stu-id="5430a-168">**LPCWSTR**</span></span>|<span data-ttu-id="5430a-169">**Const wchar_t\***</span><span class="sxs-lookup"><span data-stu-id="5430a-169">**Const wchar_t\***</span></span>|<span data-ttu-id="5430a-170"><xref:System.String?displayProperty=nameWithType>nebo<xref:System.Text.StringBuilder?displayProperty=nameWithType></span><span class="sxs-lookup"><span data-stu-id="5430a-170"><xref:System.String?displayProperty=nameWithType> or <xref:System.Text.StringBuilder?displayProperty=nameWithType></span></span>|<span data-ttu-id="5430a-171">Uspořádání pomocí kódování Unicode.</span><span class="sxs-lookup"><span data-stu-id="5430a-171">Decorate with Unicode.</span></span>|  
|<span data-ttu-id="5430a-172">**PLOVOUCÍ DESETINNÁ ČÁRKA**</span><span class="sxs-lookup"><span data-stu-id="5430a-172">**FLOAT**</span></span>|<span data-ttu-id="5430a-173">**Plovoucí desetinná čárka**</span><span class="sxs-lookup"><span data-stu-id="5430a-173">**Float**</span></span>|<xref:System.Single?displayProperty=nameWithType>|<span data-ttu-id="5430a-174">32bitová verze</span><span class="sxs-lookup"><span data-stu-id="5430a-174">32 bits</span></span>|  
|<span data-ttu-id="5430a-175">**DOUBLE**</span><span class="sxs-lookup"><span data-stu-id="5430a-175">**DOUBLE**</span></span>|<span data-ttu-id="5430a-176">**Double**</span><span class="sxs-lookup"><span data-stu-id="5430a-176">**Double**</span></span>|<xref:System.Double?displayProperty=nameWithType>|<span data-ttu-id="5430a-177">64bitová verze</span><span class="sxs-lookup"><span data-stu-id="5430a-177">64 bits</span></span>|  
  
 <span data-ttu-id="5430a-178">Pro odpovídající typy v [!INCLUDE[vbprvblong](../../../includes/vbprvblong-md.md)], C# a C++, najdete [Úvod do knihovně tříd rozhraní .NET Framework](../../../docs/standard/class-library-overview.md).</span><span class="sxs-lookup"><span data-stu-id="5430a-178">For corresponding types in [!INCLUDE[vbprvblong](../../../includes/vbprvblong-md.md)], C#, and C++, see the [Introduction to the .NET Framework Class Library](../../../docs/standard/class-library-overview.md).</span></span>  
  
## <a name="pinvokelibdll"></a><span data-ttu-id="5430a-179">PinvokeLib.dll</span><span class="sxs-lookup"><span data-stu-id="5430a-179">PinvokeLib.dll</span></span>  
 <span data-ttu-id="5430a-180">Následující kód definuje funkce knihovny poskytované Pinvoke.dll.</span><span class="sxs-lookup"><span data-stu-id="5430a-180">The following code defines the library functions provided by Pinvoke.dll.</span></span> <span data-ttu-id="5430a-181">Mnoha ukázek popsané v této části volání této knihovny.</span><span class="sxs-lookup"><span data-stu-id="5430a-181">Many samples described in this section call this library.</span></span>  
  
### <a name="example"></a><span data-ttu-id="5430a-182">Příklad</span><span class="sxs-lookup"><span data-stu-id="5430a-182">Example</span></span>  
 [!code-cpp[PInvokeLib#1](../../../samples/snippets/cpp/VS_Snippets_CLR/pinvokelib/cpp/pinvokelib.cpp#1)]  
  
 [!code-cpp[PInvokeLib#2](../../../samples/snippets/cpp/VS_Snippets_CLR/pinvokelib/cpp/pinvokelib.h#2)]
