---
title: "Spuštění testování ve vizuální vrstvě"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-wpf
ms.tgt_pltfrm: 
ms.topic: article
dev_langs:
- csharp
- vb
helpviewer_keywords:
- hit testing functionality [WPF]
- visual layer [WPF], hit testing functionality
ms.assetid: b1a64b61-14be-4d75-b89a-5c67bebb2c7b
caps.latest.revision: "42"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.openlocfilehash: 49fbb0c71b13ee7d7ca04e0d40c1f9e32230d805
ms.sourcegitcommit: 4f3fef493080a43e70e951223894768d36ce430a
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 11/21/2017
---
# <a name="hit-testing-in-the-visual-layer"></a><span data-ttu-id="68139-102">Spuštění testování ve vizuální vrstvě</span><span class="sxs-lookup"><span data-stu-id="68139-102">Hit Testing in the Visual Layer</span></span>
<span data-ttu-id="68139-103">Toto téma poskytuje přehled o počtu testování funkce poskytované službou visual vrstvy.</span><span class="sxs-lookup"><span data-stu-id="68139-103">This topic provides an overview of hit testing functionality provided by the visual layer.</span></span> <span data-ttu-id="68139-104">Přístupů testování podpory umožňuje určit, zda hodnota geometrie nebo bodu spadá do vykreslené obsah <xref:System.Windows.Media.Visual>, což umožňuje implementovat rozhraní chování uživatelů, jako je například obdélníku výběru vybrat více objektů.</span><span class="sxs-lookup"><span data-stu-id="68139-104">Hit testing support allows you to determine whether a geometry or point value falls within the rendered content of a <xref:System.Windows.Media.Visual>, allowing you to implement user interface behavior such as a selection rectangle to select multiple objects.</span></span>  
  
 
  
<a name="hit_testing_scenarios"></a>   
## <a name="hit-testing-scenarios"></a><span data-ttu-id="68139-105">Stiskněte tlačítko testovacích scénářů</span><span class="sxs-lookup"><span data-stu-id="68139-105">Hit Testing Scenarios</span></span>  
 <span data-ttu-id="68139-106"><xref:System.Windows.UIElement> Třída poskytuje <xref:System.Windows.UIElement.InputHitTest%2A> metodu, která umožňuje průchodu testu u elementu s použitím dané hodnoty souřadnic.</span><span class="sxs-lookup"><span data-stu-id="68139-106">The <xref:System.Windows.UIElement> class provides the <xref:System.Windows.UIElement.InputHitTest%2A> method, which allows you to hit test against an element using a given coordinate value.</span></span> <span data-ttu-id="68139-107">V mnoha případech <xref:System.Windows.UIElement.InputHitTest%2A> metoda poskytuje požadované funkce pro implementaci přístupů testování elementů.</span><span class="sxs-lookup"><span data-stu-id="68139-107">In many cases, the <xref:System.Windows.UIElement.InputHitTest%2A> method provides the desired functionality for implementing hit testing of elements.</span></span> <span data-ttu-id="68139-108">Existují však několik scénářů, ve kterých budete muset implementovat přístupů testování ve visual vrstvě.</span><span class="sxs-lookup"><span data-stu-id="68139-108">However, there are several scenarios in which you may need to implement hit testing at the visual layer.</span></span>  
  
-   <span data-ttu-id="68139-109">Testování s jinou hodnotu než průchodu<xref:System.Windows.UIElement> objekty: To platí, pokud jsou dosáhl testování jinou hodnotu než<xref:System.Windows.UIElement> objekty, jako například <xref:System.Windows.Media.DrawingVisual> nebo grafických objektů.</span><span class="sxs-lookup"><span data-stu-id="68139-109">Hit testing against non-<xref:System.Windows.UIElement> objects: This applies if you are hit testing non-<xref:System.Windows.UIElement> objects, such as <xref:System.Windows.Media.DrawingVisual> or graphics objects.</span></span>  
  
-   <span data-ttu-id="68139-110">Testování pomocí geometry průchodu: To platí, pokud potřebujete průchodu testu s použitím geometrický objekt spíše než hodnota souřadnice bodu.</span><span class="sxs-lookup"><span data-stu-id="68139-110">Hit testing using a geometry: This applies if you need to hit test using a geometry object rather than the coordinate value of a point.</span></span>  
  
-   <span data-ttu-id="68139-111">Testování proti více objektů průchodu: To platí, když potřebujete průchodu testu u více objektů, jako je například překrývající se objekty.</span><span class="sxs-lookup"><span data-stu-id="68139-111">Hit testing against multiple objects: This applies when you need to hit test against multiple objects, such as overlapping objects.</span></span> <span data-ttu-id="68139-112">Můžete získat výsledky pro všechny vizuály protínající se operátory geometrie nebo bodu, nikoli pouze první z nich.</span><span class="sxs-lookup"><span data-stu-id="68139-112">You can get results for all visuals intersecting a geometry or point, not just the first one.</span></span>  
  
-   <span data-ttu-id="68139-113">Ignoruje <xref:System.Windows.UIElement> vstupů do testování zásad: To platí, když potřebujete Ignorovat <xref:System.Windows.UIElement> vstupů do testování zásadu, která vezme v úvahu faktory, jako jestli element vypnutá nebo neviditelné.</span><span class="sxs-lookup"><span data-stu-id="68139-113">Ignoring <xref:System.Windows.UIElement> hit testing policy: This applies when you need to ignore the <xref:System.Windows.UIElement> hit testing policy, which takes into consideration such factors as whether an element is disabled or invisible.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="68139-114">Ukázka kompletní kód ilustrující testování ve vrstvě visual průchodu, najdete v části [ukázka průchodu testu DrawingVisuals](http://go.microsoft.com/fwlink/?LinkID=159994) a [stiskněte tlačítko Test s ukázkou vzájemná spolupráce Win32](http://go.microsoft.com/fwlink/?LinkID=159995).</span><span class="sxs-lookup"><span data-stu-id="68139-114">For a complete code sample illustrating hit testing at the visual layer, see [Hit Test Using DrawingVisuals Sample](http://go.microsoft.com/fwlink/?LinkID=159994) and [Hit Test with Win32 Interoperation Sample](http://go.microsoft.com/fwlink/?LinkID=159995).</span></span>  
  
<a name="hit_testing_support"></a>   
## <a name="hit-testing-support"></a><span data-ttu-id="68139-115">Stiskněte tlačítko testování podpory</span><span class="sxs-lookup"><span data-stu-id="68139-115">Hit Testing Support</span></span>  
 <span data-ttu-id="68139-116">Účelem <xref:System.Windows.Media.VisualTreeHelper.HitTest%2A> metody v <xref:System.Windows.Media.VisualTreeHelper> třída je určit, zda je hodnota souřadnic geometrie nebo bodu v rámci vykreslené obsah daného objektu, například na ovládací prvek nebo grafický element.</span><span class="sxs-lookup"><span data-stu-id="68139-116">The purpose of the <xref:System.Windows.Media.VisualTreeHelper.HitTest%2A> methods in the <xref:System.Windows.Media.VisualTreeHelper> class is to determine whether a geometry or point coordinate value is within the rendered content of a given object, such as a control or graphic element.</span></span> <span data-ttu-id="68139-117">Například můžete použít přístupů testování k určení zda klikněte na tlačítko myši, v rámci ohraničující obdélník objekt spadá do geometrie kruh.</span><span class="sxs-lookup"><span data-stu-id="68139-117">For example, you could use hit testing to determine whether a mouse click within the bounding rectangle of an object falls within the geometry of a circle.</span></span> <span data-ttu-id="68139-118">Můžete také přepsat výchozí implementaci přístupů testování k provedení vlastní vlastní test zásahu výpočty.</span><span class="sxs-lookup"><span data-stu-id="68139-118">You can also choose to override the default implementation of hit testing to perform your own custom hit test calculations.</span></span>  
  
 <span data-ttu-id="68139-119">Následující obrázek znázorňuje vztahy mezi obdélníkový objekt oblasti a jeho ohraničující obdélník.</span><span class="sxs-lookup"><span data-stu-id="68139-119">The following illustration shows the relationship between a non-rectangular object's region and its bounding rectangle.</span></span>  
  
 <span data-ttu-id="68139-120">![Diagram přístupů testovací oblasti](../../../../docs/framework/wpf/graphics-multimedia/media/wcpsdk-mmgraphics-visuals-hittest-1.png "wcpsdk_mmgraphics_visuals_hittest_1")</span><span class="sxs-lookup"><span data-stu-id="68139-120">![Diagram of valid hit test region](../../../../docs/framework/wpf/graphics-multimedia/media/wcpsdk-mmgraphics-visuals-hittest-1.png "wcpsdk_mmgraphics_visuals_hittest_1")</span></span>  
<span data-ttu-id="68139-121">Diagram platné oblasti ověření pozice</span><span class="sxs-lookup"><span data-stu-id="68139-121">Diagram of valid hit test region</span></span>  
  
<a name="hit_testing_and_z-order"></a>   
## <a name="hit-testing-and-z-order"></a><span data-ttu-id="68139-122">Testování přístupů a pořadí Z-Order</span><span class="sxs-lookup"><span data-stu-id="68139-122">Hit Testing and Z-Order</span></span>  
 <span data-ttu-id="68139-123">[!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] Visual vrstvy podporuje přístupů testování u všech objektů v rámci bodu nebo geometry, nikoli pouze objekt nejvyšší.</span><span class="sxs-lookup"><span data-stu-id="68139-123">The [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] visual layer supports hit testing against all objects under a point or geometry, not just the top-most object.</span></span> <span data-ttu-id="68139-124">Výsledky jsou vráceny v pořadí z-order.</span><span class="sxs-lookup"><span data-stu-id="68139-124">Results are returned in z-order.</span></span> <span data-ttu-id="68139-125">Ale visual objekt, který můžete předat jako parametr <xref:System.Windows.Media.VisualTreeHelper.HitTest%2A> metoda určuje, jaká část visual stromové struktury, která se setkají otestovat.</span><span class="sxs-lookup"><span data-stu-id="68139-125">However, the visual object that you pass as the parameter to the <xref:System.Windows.Media.VisualTreeHelper.HitTest%2A> method determines which portion of the visual tree that will be hit test.</span></span> <span data-ttu-id="68139-126">Můžete zahájit test proti celý vizuálním stromu, nebo jakékoli její části je.</span><span class="sxs-lookup"><span data-stu-id="68139-126">You can hit test against the entire visual tree, or any portion of it.</span></span>  
  
 <span data-ttu-id="68139-127">Na následujícím obrázku objekt kroužek je nad hranaté i trojúhelníček objekty.</span><span class="sxs-lookup"><span data-stu-id="68139-127">In the following illustration, the circle object is on top of both the square and triangle objects.</span></span> <span data-ttu-id="68139-128">Pokud vás zajímá jenom podle testování vizuální objekt, jehož hodnota pořadí z-order je nejvyšší, můžete nastavit visual přístupů testu výčtu vrátit <xref:System.Windows.Media.HitTestResultBehavior.Stop> z <xref:System.Windows.Media.HitTestResultCallback> zastavit traversal ověření pozice po první položka.</span><span class="sxs-lookup"><span data-stu-id="68139-128">If you are only interested in hit testing the visual object whose z-order value is top-most, you can set the visual hit test enumeration to return <xref:System.Windows.Media.HitTestResultBehavior.Stop> from the <xref:System.Windows.Media.HitTestResultCallback> to stop the hit test traversal after the first item.</span></span>  
  
 <span data-ttu-id="68139-129">![Diagram z & č. 45; pořadí vizuálním stromu](../../../../docs/framework/wpf/graphics-multimedia/media/wcpsdk-mmgraphics-visuals-hittest-2.png "wcpsdk_mmgraphics_visuals_hittest_2")</span><span class="sxs-lookup"><span data-stu-id="68139-129">![Diagram of the z&#45;order of a visual tree](../../../../docs/framework/wpf/graphics-multimedia/media/wcpsdk-mmgraphics-visuals-hittest-2.png "wcpsdk_mmgraphics_visuals_hittest_2")</span></span>  
<span data-ttu-id="68139-130">Diagram pořadí vykreslování vizuálním stromu</span><span class="sxs-lookup"><span data-stu-id="68139-130">Diagram of the z-order of a visual tree</span></span>  
  
 <span data-ttu-id="68139-131">Pokud chcete vytvořit výčet všech vizuální objekty v rámci konkrétní bodu nebo geometry, vrátí <xref:System.Windows.Media.HitTestResultBehavior.Continue> z <xref:System.Windows.Media.HitTestResultCallback>.</span><span class="sxs-lookup"><span data-stu-id="68139-131">If you want to enumerate all visual objects under a specific point or geometry, return <xref:System.Windows.Media.HitTestResultBehavior.Continue> from the <xref:System.Windows.Media.HitTestResultCallback>.</span></span> <span data-ttu-id="68139-132">To znamená, že test pro vizuální objekty, které jsou pod jiné objekty, můžete přístupů, i když jsou zcela skryt.</span><span class="sxs-lookup"><span data-stu-id="68139-132">This means you can hit test for visual objects that are beneath other objects, even if they are wholly obscured.</span></span> <span data-ttu-id="68139-133">Najdete ukázkový kód v části "Použití stiskněte tlačítko Test výsledky zpětného volání" Další informace.</span><span class="sxs-lookup"><span data-stu-id="68139-133">See the sample code in the section "Using a Hit Test Results Callback" for more information.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="68139-134">Vizuální objekt, který je transparentní, může být také dosáhl otestovat.</span><span class="sxs-lookup"><span data-stu-id="68139-134">A visual object that is transparent can also be hit test.</span></span>  
  
<a name="using_default_hit_testing"></a>   
## <a name="using-default-hit-testing"></a><span data-ttu-id="68139-135">Použijte výchozí nastavení testování průchodu</span><span class="sxs-lookup"><span data-stu-id="68139-135">Using Default Hit Testing</span></span>  
 <span data-ttu-id="68139-136">Zjistíte, zda bod je v rámci geometrie vizuální objekt pomocí <xref:System.Windows.Media.VisualTreeHelper.HitTest%2A> metoda k určení vizuální objekt a bod koordinaci testovanou hodnotu.</span><span class="sxs-lookup"><span data-stu-id="68139-136">You can identify whether a point is within the geometry of a visual object, by using the <xref:System.Windows.Media.VisualTreeHelper.HitTest%2A> method to specify a visual object and a point coordinate value to test against.</span></span> <span data-ttu-id="68139-137">Parametr visual objektu identifikuje výchozí bod v vizuálním stromu pro ověření pozice hledání.</span><span class="sxs-lookup"><span data-stu-id="68139-137">The visual object parameter identifies the starting point in the visual tree for the hit test search.</span></span> <span data-ttu-id="68139-138">Pokud vizuální objekt nachází ve vizuálním stromu, jejichž geometrie obsahuje souřadnice, je nastavený na <xref:System.Windows.Media.HitTestResult.VisualHit%2A> vlastnost <xref:System.Windows.Media.HitTestResult> objektu.</span><span class="sxs-lookup"><span data-stu-id="68139-138">If a visual object is found in the visual tree whose geometry contains the coordinate, it is set to the <xref:System.Windows.Media.HitTestResult.VisualHit%2A> property of a <xref:System.Windows.Media.HitTestResult> object.</span></span> <span data-ttu-id="68139-139"><xref:System.Windows.Media.HitTestResult> Je pak vrácen z <xref:System.Windows.Media.VisualTreeHelper.HitTest%2A> metoda.</span><span class="sxs-lookup"><span data-stu-id="68139-139">The <xref:System.Windows.Media.HitTestResult> is then returned from the <xref:System.Windows.Media.VisualTreeHelper.HitTest%2A> method.</span></span> <span data-ttu-id="68139-140">Pokud je bod není obsažen s visual podstromu testování, jsou průchodu <xref:System.Windows.Media.VisualTreeHelper.HitTest%2A> vrátí `null`.</span><span class="sxs-lookup"><span data-stu-id="68139-140">If the point is not contained with the visual sub-tree you are hit testing, <xref:System.Windows.Media.VisualTreeHelper.HitTest%2A> returns `null`.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="68139-141">Stiskněte klávesu výchozí testování vždy vrátí objekt nejvyšší v pořadí.</span><span class="sxs-lookup"><span data-stu-id="68139-141">Default hit testing always returns the top-most object in the z-order.</span></span> <span data-ttu-id="68139-142">Za účelem zjištění všech vizuální objekty, i ty, které mohou být částečně nebo zcela skryté, použijte zpětné volání výsledek ověření pozice.</span><span class="sxs-lookup"><span data-stu-id="68139-142">In order to identify all visual objects, even those that may be partly or wholly obscured, use a hit test result callback.</span></span>  
  
 <span data-ttu-id="68139-143">Souřadnice hodnotu předejte jako parametr bod pro <xref:System.Windows.Media.VisualTreeHelper.HitTest%2A> metoda musí být relativní vzhledem k souřadnicového prostoru visual objektu testování proti jsou průchodu.</span><span class="sxs-lookup"><span data-stu-id="68139-143">The coordinate value you pass as the point parameter for the <xref:System.Windows.Media.VisualTreeHelper.HitTest%2A> method has to be relative to the coordinate space of the visual object you are hit testing against.</span></span> <span data-ttu-id="68139-144">Například pokud mít člověk vnořené vizuální objekty, které se definované na (100, 100) v poli nadřazeného objektu souřadnicového prostoru, pak testování průchodu podřízené visual v (0, 0) odpovídá na testování průchodu (100, 100) v poli nadřazeného objektu souřadnicového prostoru.</span><span class="sxs-lookup"><span data-stu-id="68139-144">For example, if you have nested visual objects defined at (100, 100) in the parent's coordinate space, then hit testing a child visual at (0, 0) is equivalent to hit testing at (100, 100) in the parent's coordinate space.</span></span>  
  
 <span data-ttu-id="68139-145">Následující kód ukazuje, jak nastavit myši obslužných rutin událostí pro <xref:System.Windows.UIElement> objekt, který se používá k zaznamenání události použité pro testování průchodu.</span><span class="sxs-lookup"><span data-stu-id="68139-145">The following code shows how to set up mouse event handlers for a <xref:System.Windows.UIElement> object that is used to capture events used for hit testing.</span></span>  
  
 [!code-csharp[HitTestingOverview#100](../../../../samples/snippets/csharp/VS_Snippets_Wpf/HitTestingOverview/CSharp/Window1.xaml.cs#100)]
 [!code-vb[HitTestingOverview#100](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/HitTestingOverview/visualbasic/window1.xaml.vb#100)]  
  
### <a name="how-the-visual-tree-affects-hit-testing"></a><span data-ttu-id="68139-146">Jak ovlivňuje vizuálním stromu testování průchodu</span><span class="sxs-lookup"><span data-stu-id="68139-146">How the Visual Tree Affects Hit Testing</span></span>  
 <span data-ttu-id="68139-147">Počáteční bod ve vizuální strojové struktuře Určuje, které objekty jsou vráceny při ověření pozice výčtu objektů.</span><span class="sxs-lookup"><span data-stu-id="68139-147">The starting point in the visual tree determines which objects are returned during the hit test enumeration of objects.</span></span> <span data-ttu-id="68139-148">Pokud máte více objektů, které chcete zahájit test, musí být visual objekt použitý jako výchozí bod v vizuálním stromu běžné nadřazeného všechny objekty, které vás zajímají.</span><span class="sxs-lookup"><span data-stu-id="68139-148">If you have multiple objects you want to hit test, the visual object used as the starting point in the visual tree must be the common ancestor of all objects of interest.</span></span> <span data-ttu-id="68139-149">Pokud byste byli zájem o vstupů do testování button element a kreslení visual v následujícím diagramu, je třeba nastavit výchozí bod v vizuálním stromu pro běžné nadřazeného obou.</span><span class="sxs-lookup"><span data-stu-id="68139-149">For example, if you were interested in hit testing both the button element and drawing visual in the following diagram, you would have to set the starting point in the visual tree to the common ancestor of both.</span></span> <span data-ttu-id="68139-150">V takovém případě je canvas element běžné nadřazeného prvku tlačítko a kreslení visual.</span><span class="sxs-lookup"><span data-stu-id="68139-150">In this case, the canvas element is the common ancestor of both the button element and the drawing visual.</span></span>  
  
 <span data-ttu-id="68139-151">![Diagram hierarchie vizuálním stromu](../../../../docs/framework/wpf/graphics-multimedia/media/wcpsdk-mmgraphics-visuals-overview-01.gif "wcpsdk_mmgraphics_visuals_overview_01")</span><span class="sxs-lookup"><span data-stu-id="68139-151">![Diagram of a visual tree hierarchy](../../../../docs/framework/wpf/graphics-multimedia/media/wcpsdk-mmgraphics-visuals-overview-01.gif "wcpsdk_mmgraphics_visuals_overview_01")</span></span>  
<span data-ttu-id="68139-152">Diagram hierarchie vizuálním stromu</span><span class="sxs-lookup"><span data-stu-id="68139-152">Diagram of a visual tree hierarchy</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="68139-153"><xref:System.Windows.UIElement.IsHitTestVisible%2A> Vlastnost získá nebo nastaví hodnotu, která uvádí, zda <xref:System.Windows.UIElement>-odvozené objekt mohou být vráceny pravděpodobně v důsledku toho test zásahu z některá část jeho vykreslené obsah.</span><span class="sxs-lookup"><span data-stu-id="68139-153">The <xref:System.Windows.UIElement.IsHitTestVisible%2A> property gets or sets a value that declares whether a <xref:System.Windows.UIElement>-derived object can possibly be returned as a hit test result from some portion of its rendered content.</span></span> <span data-ttu-id="68139-154">To umožňuje selektivně alter vizuálním stromu určit visual objektů, které se účastní testu přístupů.</span><span class="sxs-lookup"><span data-stu-id="68139-154">This allows you to selectively alter the visual tree to determine which visual objects are involved in a hit test.</span></span>  
  
<a name="using_a_hit_test_result_callback"></a>   
## <a name="using-a-hit-test-result-callback"></a><span data-ttu-id="68139-155">Pomocí zpětného volání výsledek ověření pozice</span><span class="sxs-lookup"><span data-stu-id="68139-155">Using a Hit Test Result Callback</span></span>  
 <span data-ttu-id="68139-156">Můžete vytvořit výčet všech vizuální objekty ve vizuálním stromu, jejichž geometrie obsahuje zadanou hodnotu souřadnice.</span><span class="sxs-lookup"><span data-stu-id="68139-156">You can enumerate all visual objects in a visual tree whose geometry contains a specified coordinate value.</span></span> <span data-ttu-id="68139-157">To umožňuje identifikovat všechny vizuální objekty, a to i těch, které mohou být částečně nebo zcela skryté jiné visual objekty.</span><span class="sxs-lookup"><span data-stu-id="68139-157">This allows you to identify all visual objects, even those that may be partly or wholly obscured by other visual objects.</span></span> <span data-ttu-id="68139-158">Výčet vizuální objekty ve vizuálním stromu použití <xref:System.Windows.Media.VisualTreeHelper.HitTest%2A> metoda s přístupů testovací funkci zpětného volání.</span><span class="sxs-lookup"><span data-stu-id="68139-158">To enumerate visual objects in a visual tree use the <xref:System.Windows.Media.VisualTreeHelper.HitTest%2A> method with a hit test callback function.</span></span> <span data-ttu-id="68139-159">Funkce zpětného volání ověření pozice je volána v systému, když souřadnic hodnota, kterou zadáte, je součástí vizuální objekt.</span><span class="sxs-lookup"><span data-stu-id="68139-159">The hit test callback function is called by the system when the coordinate value you specify is contained in a visual object.</span></span>  
  
 <span data-ttu-id="68139-160">Při shodě test výčtu výsledků, nesmí provádět všechny operace, která upraví vizuálním stromu.</span><span class="sxs-lookup"><span data-stu-id="68139-160">During the hit test results enumeration, you should not perform any operation that modifies the visual tree.</span></span> <span data-ttu-id="68139-161">Přidávání ani odebírání objekt z vizuálním stromu, pokud ji provázán může způsobit nepředvídatelné chování.</span><span class="sxs-lookup"><span data-stu-id="68139-161">Adding or removing an object from the visual tree while it is being traversed can result in unpredictable behavior.</span></span> <span data-ttu-id="68139-162">Můžete upravit bezpečně vizuálním stromu po <xref:System.Windows.Media.VisualTreeHelper.HitTest%2A> metoda vrátí.</span><span class="sxs-lookup"><span data-stu-id="68139-162">You can safely modify the visual tree after the <xref:System.Windows.Media.VisualTreeHelper.HitTest%2A> method returns.</span></span> <span data-ttu-id="68139-163">Můžete chtít zadejte datová struktura, jako třeba <xref:System.Collections.ArrayList>, k ukládání hodnot během výčtu výsledků ověření pozice.</span><span class="sxs-lookup"><span data-stu-id="68139-163">You may want to provide a data structure, such as an <xref:System.Collections.ArrayList>, to store values during the hit test results enumeration.</span></span>  
  
 [!code-csharp[HitTestingOverview#101](../../../../samples/snippets/csharp/VS_Snippets_Wpf/HitTestingOverview/CSharp/Window1.xaml.cs#101)]
 [!code-vb[HitTestingOverview#101](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/HitTestingOverview/visualbasic/window1.xaml.vb#101)]  
  
 <span data-ttu-id="68139-164">Metoda zpětného volání ověření pozice definuje akce, které můžete provést při testu přístupů je označený pro daný objekt visual ve vizuálním stromu.</span><span class="sxs-lookup"><span data-stu-id="68139-164">The hit test callback method defines the actions you perform when a hit test is identified on a particular visual object in the visual tree.</span></span> <span data-ttu-id="68139-165">Po provedení akce, které se vrátíte <xref:System.Windows.Media.HitTestResultBehavior> hodnotu, která určuje, jestli pokračovat výčet jiné vizuální objekty, nebo ne.</span><span class="sxs-lookup"><span data-stu-id="68139-165">After you perform the actions, you return a <xref:System.Windows.Media.HitTestResultBehavior> value that determines whether to continue the enumeration of any other visual objects or not.</span></span>  
  
 [!code-csharp[HitTestingOverview#102](../../../../samples/snippets/csharp/VS_Snippets_Wpf/HitTestingOverview/CSharp/Window1.xaml.cs#102)]
 [!code-vb[HitTestingOverview#102](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/HitTestingOverview/visualbasic/window1.xaml.vb#102)]  
  
> [!NOTE]
>  <span data-ttu-id="68139-166">Pořadí výčet přístupů vizuální objekty, je pořadí z-order.</span><span class="sxs-lookup"><span data-stu-id="68139-166">The order of enumeration of hit visual objects is by z-order.</span></span> <span data-ttu-id="68139-167">Vizuální objekt na úrovni nejvyšší pořadí z-order je první objekt ve výčtu.</span><span class="sxs-lookup"><span data-stu-id="68139-167">The visual object at the top-most z-order level is the first object enumerated.</span></span> <span data-ttu-id="68139-168">Vizuální objekty uvedené jsou v sestupném pořadí z-order úroveň.</span><span class="sxs-lookup"><span data-stu-id="68139-168">Any other visual objects enumerated are at decreasing z-order level.</span></span> <span data-ttu-id="68139-169">Toto pořadí výčtu odpovídá pořadí vykreslování ve vizuálech.</span><span class="sxs-lookup"><span data-stu-id="68139-169">This order of enumeration corresponds to the rendering order of the visuals.</span></span>  
  
 <span data-ttu-id="68139-170">Výčet vizuální objekty v funkce zpětného volání ověření pozice kdykoli můžete zastavit vrácením <xref:System.Windows.Media.HitTestResultBehavior.Stop>.</span><span class="sxs-lookup"><span data-stu-id="68139-170">You can stop the enumeration of visual objects at any time in the hit test callback function by returning <xref:System.Windows.Media.HitTestResultBehavior.Stop>.</span></span>  
  
 [!code-csharp[HitTestingOverview#103](../../../../samples/snippets/csharp/VS_Snippets_Wpf/HitTestingOverview/CSharp/Window1.xaml.cs#103)]
 [!code-vb[HitTestingOverview#103](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/HitTestingOverview/visualbasic/window1.xaml.vb#103)]  
  
<a name="using_a_hit_test_filter_callback"></a>   
## <a name="using-a-hit-test-filter-callback"></a><span data-ttu-id="68139-171">Pomocí filtru zpětného volání ověření pozice</span><span class="sxs-lookup"><span data-stu-id="68139-171">Using a Hit Test Filter Callback</span></span>  
 <span data-ttu-id="68139-172">Filtr volitelné ověření pozice můžete omezit objekty, které se budou předávat výsledky testů přístupů.</span><span class="sxs-lookup"><span data-stu-id="68139-172">You can use an optional hit test filter to restrict the objects that are passed on to the hit test results.</span></span> <span data-ttu-id="68139-173">To umožňuje ignorovat částí vizuálním stromu, že nejste zájem o zpracování v si výsledky testu přístupů.</span><span class="sxs-lookup"><span data-stu-id="68139-173">This allows you to ignore parts of the visual tree that you are not interested in processing in your hit test results.</span></span> <span data-ttu-id="68139-174">Implementace filtru ověření pozice, definovat funkci zpětného volání ověření pozice filtru a předejte ji jako hodnotu parametru při volání <xref:System.Windows.Media.VisualTreeHelper.HitTest%2A> metoda.</span><span class="sxs-lookup"><span data-stu-id="68139-174">To implement a hit test filter, you define a hit test filter callback function and pass it as a parameter value when you call the <xref:System.Windows.Media.VisualTreeHelper.HitTest%2A> method.</span></span>  
  
 [!code-csharp[HitTestingOverview#104](../../../../samples/snippets/csharp/VS_Snippets_Wpf/HitTestingOverview/CSharp/Window1.xaml.cs#104)]
 [!code-vb[HitTestingOverview#104](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/HitTestingOverview/visualbasic/window1.xaml.vb#104)]  
  
 <span data-ttu-id="68139-175">Pokud nechcete zadat funkce zpětného volání filtru volitelné ověření pozice, předávání `null` hodnotu jako jeho parametr pro <xref:System.Windows.Media.VisualTreeHelper.HitTest%2A> metoda.</span><span class="sxs-lookup"><span data-stu-id="68139-175">If you do not want to supply the optional hit test filter callback function, pass a `null` value as its parameter for the <xref:System.Windows.Media.VisualTreeHelper.HitTest%2A> method.</span></span>  
  
 [!code-csharp[HitTestingOverview#105](../../../../samples/snippets/csharp/VS_Snippets_Wpf/HitTestingOverview/CSharp/Window1.xaml.cs#105)]
 [!code-vb[HitTestingOverview#105](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/HitTestingOverview/visualbasic/window1.xaml.vb#105)]  
  
 <span data-ttu-id="68139-176">![Vyřazování vizuálním stromu pomocí filtru ověření pozice](../../../../docs/framework/wpf/graphics-multimedia/media/filteredvisualtree-01.png "FilteredVisualTree_01")</span><span class="sxs-lookup"><span data-stu-id="68139-176">![Pruning a visual tree using a hit test filter](../../../../docs/framework/wpf/graphics-multimedia/media/filteredvisualtree-01.png "FilteredVisualTree_01")</span></span>  
<span data-ttu-id="68139-177">Vyřazování vizuálním stromu</span><span class="sxs-lookup"><span data-stu-id="68139-177">Pruning a visual tree</span></span>  
  
 <span data-ttu-id="68139-178">Funkce zpětného volání filtru přístupů test umožňuje výčet prostřednictvím všech vizuálních prvků, jejichž vykreslené obsah obsahuje souřadnice, které zadáte.</span><span class="sxs-lookup"><span data-stu-id="68139-178">The hit test filter callback function allows you to enumerate through all the visuals whose rendered content contains the coordinates you specify.</span></span> <span data-ttu-id="68139-179">Můžete však ignorovat některé větve vizuálním stromu, že nejste zájem o zpracování v funkce zpětného volání výsledky ověření pozice.</span><span class="sxs-lookup"><span data-stu-id="68139-179">However, you may want to ignore certain branches of the visual tree that you are not interested in processing in your hit test results callback function.</span></span> <span data-ttu-id="68139-180">Návratová hodnota funkce zpětného volání ověření pozice filtru určuje, jaký typ akce výčet vizuální objekty provést.</span><span class="sxs-lookup"><span data-stu-id="68139-180">The return value of the hit test filter callback function determines what type of action the enumeration of the visual objects should take.</span></span> <span data-ttu-id="68139-181">Pokud vrátí hodnotu, například <xref:System.Windows.Media.HitTestFilterBehavior.ContinueSkipSelfAndChildren>, aktuální vizuální objekt a její podřízené položky můžete odebrat z výčtu výsledků ověření pozice.</span><span class="sxs-lookup"><span data-stu-id="68139-181">For example, if you return the value, <xref:System.Windows.Media.HitTestFilterBehavior.ContinueSkipSelfAndChildren>, you can remove the current visual object and its children from the hit test results enumeration.</span></span> <span data-ttu-id="68139-182">To znamená, že funkce zpětného volání výsledky ověření pozice nebude tyto objekty v její výčet.</span><span class="sxs-lookup"><span data-stu-id="68139-182">This means that the hit test results callback function will not see these objects in its enumeration.</span></span> <span data-ttu-id="68139-183">Vyřazování vizuálním stromu objektů snižuje objem zpracování se při průchodu výčtu výsledků ověření pozice.</span><span class="sxs-lookup"><span data-stu-id="68139-183">Pruning the visual tree of objects decreases the amount of processing during the hit test results enumeration pass.</span></span> <span data-ttu-id="68139-184">V následujícím příkladu kódu filtr přeskočí popisky a jejich následníků a stiskněte klávesu testy nic jiného.</span><span class="sxs-lookup"><span data-stu-id="68139-184">In the following code example, the filter skips labels and their descendants and hit tests everything else.</span></span>  
  
 [!code-csharp[HitTestingOverview#106](../../../../samples/snippets/csharp/VS_Snippets_Wpf/HitTestingOverview/CSharp/Window1.xaml.cs#106)]
 [!code-vb[HitTestingOverview#106](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/HitTestingOverview/visualbasic/window1.xaml.vb#106)]  
  
> [!NOTE]
>  <span data-ttu-id="68139-185">Zpětné volání filtru ověření pozice se někdy nazývá v případech, kde není volán zpětného volání výsledky ověření pozice.</span><span class="sxs-lookup"><span data-stu-id="68139-185">The hit test filter callback will sometimes be called in cases where the hit test results callback is not called.</span></span>  
  
<a name="overriding_default_hit_testing"></a>   
## <a name="overriding-default-hit-testing"></a><span data-ttu-id="68139-186">Přepsání výchozího testování průchodu</span><span class="sxs-lookup"><span data-stu-id="68139-186">Overriding Default Hit Testing</span></span>  
 <span data-ttu-id="68139-187">Můžete přepsat vstupů do výchozí vizuální objekt testování podporu přepsáním <xref:System.Windows.Media.Visual.HitTestCore%2A> metoda.</span><span class="sxs-lookup"><span data-stu-id="68139-187">You can override a visual object’s default hit testing support by overriding the <xref:System.Windows.Media.Visual.HitTestCore%2A> method.</span></span> <span data-ttu-id="68139-188">To znamená, že při vyvolání <xref:System.Windows.Media.VisualTreeHelper.HitTest%2A> metoda, vaši implementaci přepsaného <xref:System.Windows.Media.Visual.HitTestCore%2A> je volána.</span><span class="sxs-lookup"><span data-stu-id="68139-188">This means that when you invoke the <xref:System.Windows.Media.VisualTreeHelper.HitTest%2A> method, your overridden implementation of <xref:System.Windows.Media.Visual.HitTestCore%2A> is called.</span></span> <span data-ttu-id="68139-189">Přepsaná metoda je volána, když testu přístupů spadá do ohraničující obdélník objekt visual i v případě, že souřadnice spadá mimo vykreslené obsah vizuální objekt.</span><span class="sxs-lookup"><span data-stu-id="68139-189">Your overridden method is called when a hit test falls within the bounding rectangle of the visual object, even if the coordinate falls outside the rendered content of the visual object.</span></span>  
  
 [!code-csharp[HitTestingOverview#107](../../../../samples/snippets/csharp/VS_Snippets_Wpf/HitTestingOverview/CSharp/Window1.xaml.cs#107)]
 [!code-vb[HitTestingOverview#107](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/HitTestingOverview/visualbasic/window1.xaml.vb#107)]  
  
 <span data-ttu-id="68139-190">Může nastat situace, kdy budete chtít zahájit test proti ohraničující obdélník i vykreslené obsah vizuální objekt.</span><span class="sxs-lookup"><span data-stu-id="68139-190">There may be times when you want to hit test against both the bounding rectangle and the rendered content of a visual object.</span></span> <span data-ttu-id="68139-191">Pomocí `PointHitTestParameters` hodnota parametru v vaší přepsané <xref:System.Windows.Media.Visual.HitTestCore%2A> metoda jako parametr pro základní metody <xref:System.Windows.Media.Visual.HitTestCore%2A>, můžete provádět akce založené na každý přístup ohraničující obdélník vizuální objekt a poté proveďte druhý test přístupů proti vykreslení obsahu visual objektu.</span><span class="sxs-lookup"><span data-stu-id="68139-191">By using the `PointHitTestParameters` parameter value in your overridden <xref:System.Windows.Media.Visual.HitTestCore%2A> method as the parameter to the base method <xref:System.Windows.Media.Visual.HitTestCore%2A>, you can perform actions based on a hit of the bounding rectangle of a visual object, and then perform a second hit test against the rendered content of the visual object.</span></span>  
  
 [!code-csharp[HitTestingOverview#108](../../../../samples/snippets/csharp/VS_Snippets_Wpf/HitTestingOverview/CSharp/Window1.xaml.cs#108)]
 [!code-vb[HitTestingOverview#108](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/HitTestingOverview/visualbasic/window1.xaml.vb#108)]  
  
## <a name="see-also"></a><span data-ttu-id="68139-192">Viz také</span><span class="sxs-lookup"><span data-stu-id="68139-192">See Also</span></span>  
 <xref:System.Windows.Media.VisualTreeHelper.HitTest%2A>  
 <xref:System.Windows.Media.HitTestResult>  
 <xref:System.Windows.Media.HitTestResultCallback>  
 <xref:System.Windows.Media.HitTestFilterCallback>  
 <xref:System.Windows.UIElement.IsHitTestVisible%2A>  
 [<span data-ttu-id="68139-193">Stiskněte tlačítko testu s použitím DrawingVisuals vzorku</span><span class="sxs-lookup"><span data-stu-id="68139-193">Hit Test Using DrawingVisuals Sample</span></span>](http://go.microsoft.com/fwlink/?LinkID=159994)  
 [<span data-ttu-id="68139-194">Stiskněte tlačítko Test s ukázkou součinnosti Win32</span><span class="sxs-lookup"><span data-stu-id="68139-194">Hit Test with Win32 Interoperation Sample</span></span>](http://go.microsoft.com/fwlink/?LinkID=159995)  
 [<span data-ttu-id="68139-195">Stiskněte tlačítko Test geometrie v zobrazení</span><span class="sxs-lookup"><span data-stu-id="68139-195">Hit Test Geometry in a Visual</span></span>](../../../../docs/framework/wpf/graphics-multimedia/how-to-hit-test-geometry-in-a-visual.md)  
 [<span data-ttu-id="68139-196">Stiskněte tlačítko testu s použitím kontejner hostitele Win32</span><span class="sxs-lookup"><span data-stu-id="68139-196">Hit Test Using a Win32 Host Container</span></span>](../../../../docs/framework/wpf/graphics-multimedia/how-to-hit-test-using-a-win32-host-container.md)
