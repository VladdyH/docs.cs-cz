---
title: Přehled směrovaných událostí
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- attached events [WPF]
- grouped button set [WPF]
- routed events [WPF]
- events [WPF], routed
- tunneling [WPF]
- events [WPF], attached
- routing strategies for events [WPF]
- button set [WPF], grouped
- bubbling [WPF]
ms.assetid: 1a2189ae-13b4-45b0-b12c-8de2e49c29d2
ms.openlocfilehash: 4025f10e2b72a65c6d369b1576579c3d38c3e487
ms.sourcegitcommit: 3d5d33f384eeba41b2dff79d096f47ccc8d8f03d
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 05/04/2018
ms.locfileid: "33549760"
---
# <a name="routed-events-overview"></a><span data-ttu-id="34466-102">Přehled směrovaných událostí</span><span class="sxs-lookup"><span data-stu-id="34466-102">Routed Events Overview</span></span>
<span data-ttu-id="34466-103">Toto téma popisuje koncept směrované události v [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="34466-103">This topic describes the concept of routed events in [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)].</span></span> <span data-ttu-id="34466-104">Téma definuje terminologie směrované události, popisuje, jak jsou směrované události směrován přes stromu elementů, shrnuje, jak zpracovávat směrované události a jak vytvořit vlastní směrované událostí zavádí.</span><span class="sxs-lookup"><span data-stu-id="34466-104">The topic defines routed events terminology, describes how routed events are routed through a tree of elements, summarizes how you handle routed events, and introduces how to create your own custom routed events.</span></span>
  
<a name="prerequisites"></a>   
## <a name="prerequisites"></a><span data-ttu-id="34466-105">Požadavky</span><span class="sxs-lookup"><span data-stu-id="34466-105">Prerequisites</span></span>  
 <span data-ttu-id="34466-106">Toto téma předpokládá, že máte základní znalosti o [!INCLUDE[TLA#tla_clr](../../../../includes/tlasharptla-clr-md.md)] a objektově orientované programování, a také koncepci jak vztahy mezi [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] prvky můžete conceptualized jako strom.</span><span class="sxs-lookup"><span data-stu-id="34466-106">This topic assumes that you have basic knowledge of the [!INCLUDE[TLA#tla_clr](../../../../includes/tlasharptla-clr-md.md)] and object-oriented programming, as well as the concept of how the relationships between [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] elements can be conceptualized as a tree.</span></span> <span data-ttu-id="34466-107">Chcete-li v následujících příkladech v tomto tématu byste měli také porozumět [!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)] a vědět, jak napsat velmi základní [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] aplikace nebo stránky.</span><span class="sxs-lookup"><span data-stu-id="34466-107">In order to follow the examples in this topic, you should also understand [!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)] and know how to write very basic [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] applications or pages.</span></span> <span data-ttu-id="34466-108">Další informace najdete v tématu [návod: Můj první desktopová aplikace WPF](../../../../docs/framework/wpf/getting-started/walkthrough-my-first-wpf-desktop-application.md) a [přehled XAML (WPF)](../../../../docs/framework/wpf/advanced/xaml-overview-wpf.md).</span><span class="sxs-lookup"><span data-stu-id="34466-108">For more information, see [Walkthrough: My first WPF desktop application](../../../../docs/framework/wpf/getting-started/walkthrough-my-first-wpf-desktop-application.md) and [XAML Overview (WPF)](../../../../docs/framework/wpf/advanced/xaml-overview-wpf.md).</span></span>  
  
<a name="routing"></a>   
## <a name="what-is-a-routed-event"></a><span data-ttu-id="34466-109">Co je směrované události?</span><span class="sxs-lookup"><span data-stu-id="34466-109">What Is a Routed Event?</span></span>  
 <span data-ttu-id="34466-110">Si můžete představit o směrované události buď z hlediska funkčnosti nebo implementace.</span><span class="sxs-lookup"><span data-stu-id="34466-110">You can think about routed events either from a functional or implementation perspective.</span></span> <span data-ttu-id="34466-111">Obě definice budou zobrazeny zde, protože někteří uživatelé přehlednější, jednu nebo jiné definici.</span><span class="sxs-lookup"><span data-stu-id="34466-111">Both definitions are presented here, because some people find one or the other definition more useful.</span></span>  
  
 <span data-ttu-id="34466-112">Funkční definice: směrované události je typu události, který lze vyvolat obslužné rutiny na více naslouchací procesy ve stromu k elementu, nikoli jen na objekt, který vyvolá událost.</span><span class="sxs-lookup"><span data-stu-id="34466-112">Functional definition: A routed event is a type of event that can invoke handlers on multiple listeners in an element tree, rather than just on the object that raised the event.</span></span>  
  
 <span data-ttu-id="34466-113">Definice implementace: je směrované události [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] události, kterou je zajištěna instanci <xref:System.Windows.RoutedEvent> třídy a jejich zpracování [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] událostí systému.</span><span class="sxs-lookup"><span data-stu-id="34466-113">Implementation definition: A routed event is a [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] event that is backed by an instance of the <xref:System.Windows.RoutedEvent> class and is processed by the [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] event system.</span></span>  
  
 <span data-ttu-id="34466-114">Typické [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] aplikace obsahuje mnoho prvků.</span><span class="sxs-lookup"><span data-stu-id="34466-114">A typical [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] application contains many elements.</span></span> <span data-ttu-id="34466-115">Ať už vytvořené v kódu nebo deklarované v [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], tyto prvky existovat v relaci element stromu navzájem.</span><span class="sxs-lookup"><span data-stu-id="34466-115">Whether created in code or declared in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], these elements exist in an element tree relationship to each other.</span></span> <span data-ttu-id="34466-116">Událost trasy, která mohou projít v jednom ze dvou směrů v závislosti na definici událostí, ale obecně trasy, která přenáší z source element a potom "bubliny" nahoru prostřednictvím stromu element dokud nedosáhne kořenu stromu elementu (obvykle na stránce nebo okno).</span><span class="sxs-lookup"><span data-stu-id="34466-116">The event route can travel in one of two directions depending on the event definition, but generally the route travels from the source element and then "bubbles" upward through the element tree until it reaches the element tree root (typically a page or a window).</span></span> <span data-ttu-id="34466-117">Tento koncept probublávání může být snadno dokážete, pokud jste už pracovali s modelem objektu DHTML dříve.</span><span class="sxs-lookup"><span data-stu-id="34466-117">This bubbling concept might be familiar to you if you have worked with the DHTML object model previously.</span></span>  
  
 <span data-ttu-id="34466-118">Vezměte v úvahu následující stromu jednoduché element:</span><span class="sxs-lookup"><span data-stu-id="34466-118">Consider the following simple element tree:</span></span>  
  
 [!code-xaml[EventOvwSupport#GroupButton](../../../../samples/snippets/csharp/VS_Snippets_Wpf/EventOvwSupport/CSharp/default.xaml#groupbutton)]  
  
 <span data-ttu-id="34466-119">Tento element stromu vytváří přibližně takto:</span><span class="sxs-lookup"><span data-stu-id="34466-119">This element tree produces something like the following:</span></span>  
  
 <span data-ttu-id="34466-120">![Ano, ne a stornovací tlačítka](../../../../docs/framework/wpf/advanced/media/routedevent-ovw-1.gif "RoutedEvent_ovw_1")</span><span class="sxs-lookup"><span data-stu-id="34466-120">![Yes, No, and Cancel buttons](../../../../docs/framework/wpf/advanced/media/routedevent-ovw-1.gif "RoutedEvent_ovw_1")</span></span>  
  
 <span data-ttu-id="34466-121">V tomto zjednodušené element stromu, zdroj <xref:System.Windows.Controls.Primitives.ButtonBase.Click> událostí je jedním z <xref:System.Windows.Controls.Button> prvky a podle toho, co <xref:System.Windows.Controls.Button> označeného je první prvek, který má možnost zpracování události.</span><span class="sxs-lookup"><span data-stu-id="34466-121">In this simplified element tree, the source of a <xref:System.Windows.Controls.Primitives.ButtonBase.Click> event is one of the <xref:System.Windows.Controls.Button> elements, and whichever <xref:System.Windows.Controls.Button> was clicked is the first element that has the opportunity to handle the event.</span></span> <span data-ttu-id="34466-122">Ale pokud žádná obslužná rutina připojena k <xref:System.Windows.Controls.Button> funguje na události, pak událost je předána směrem nahoru k <xref:System.Windows.Controls.Button> nadřazené ve stromové struktuře element, který je <xref:System.Windows.Controls.StackPanel>.</span><span class="sxs-lookup"><span data-stu-id="34466-122">But if no handler attached to the <xref:System.Windows.Controls.Button> acts on the event, then the event will bubble upwards to the <xref:System.Windows.Controls.Button> parent in the element tree, which is the <xref:System.Windows.Controls.StackPanel>.</span></span> <span data-ttu-id="34466-123">Případně bublinách událostí k <xref:System.Windows.Controls.Border>a pak kromě stránky kořen stromu element (není vidět).</span><span class="sxs-lookup"><span data-stu-id="34466-123">Potentially, the event bubbles to <xref:System.Windows.Controls.Border>, and then beyond to the page root of the element tree (not shown).</span></span>  
  
 <span data-ttu-id="34466-124">Jinými slovy, události trasy pro tuto <xref:System.Windows.Controls.Primitives.ButtonBase.Click> událost:</span><span class="sxs-lookup"><span data-stu-id="34466-124">In other words, the event route for this <xref:System.Windows.Controls.Primitives.ButtonBase.Click> event is:</span></span>  
  
 <span data-ttu-id="34466-125">Tlačítko--> StackPanel--> ohraničení-->...</span><span class="sxs-lookup"><span data-stu-id="34466-125">Button-->StackPanel-->Border-->...</span></span>  
  
### <a name="top-level-scenarios-for-routed-events"></a><span data-ttu-id="34466-126">Nejvyšší úrovně scénáře pro směrované události</span><span class="sxs-lookup"><span data-stu-id="34466-126">Top-level Scenarios for Routed Events</span></span>  
 <span data-ttu-id="34466-127">Následuje stručné souhrnné informace o scénářích opodstatněny koncept směrované události, a proto typické [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] událost nebyla pro tyto scénáře:</span><span class="sxs-lookup"><span data-stu-id="34466-127">The following is a brief summary of the scenarios that motivated the routed event concept, and why a typical [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] event was not adequate for these scenarios:</span></span>  
  
 <span data-ttu-id="34466-128">**Řízení složení a zapouzdření:** různých ovládacích prvků v [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] mít bohaté modelu obsahu.</span><span class="sxs-lookup"><span data-stu-id="34466-128">**Control composition and encapsulation:** Various controls in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] have a rich content model.</span></span> <span data-ttu-id="34466-129">Například můžete umístit obrázek uvnitř <xref:System.Windows.Controls.Button>, které efektivně rozšiřuje vizuálním stromu tlačítka.</span><span class="sxs-lookup"><span data-stu-id="34466-129">For example, you can place an image inside of a <xref:System.Windows.Controls.Button>, which effectively extends the visual tree of the button.</span></span> <span data-ttu-id="34466-130">Přidání bitové kopie nesmí však přerušit testování podle chování, které způsobí, že tlačítko reagovat na <xref:System.Windows.Controls.Primitives.ButtonBase.Click> část jeho obsahu, i když uživatel klikne na pixelů, které jsou technicky součástí bitové kopie.</span><span class="sxs-lookup"><span data-stu-id="34466-130">However, the added image must not break the hit-testing behavior that causes a button to respond to a <xref:System.Windows.Controls.Primitives.ButtonBase.Click> of its content, even if the user clicks on pixels that are technically part of the image.</span></span>  
  
 <span data-ttu-id="34466-131">**Body přílohy singulární obslužná rutina:** v [!INCLUDE[TLA#tla_winforms](../../../../includes/tlasharptla-winforms-md.md)], budete muset připojit obslužná rutina stejné vícekrát ke zpracování událostí, které mohou být vyvolány z více elementů.</span><span class="sxs-lookup"><span data-stu-id="34466-131">**Singular handler attachment points:** In [!INCLUDE[TLA#tla_winforms](../../../../includes/tlasharptla-winforms-md.md)], you would have to attach the same handler multiple times to process events that could be raised from multiple elements.</span></span> <span data-ttu-id="34466-132">Směrované události vám umožní připojit tuto obslužnou rutinu jenom jednou, jako byl v předchozím příkladu a pomocí obslužná rutina logiky můžete určit, odkud událost pochází v případě potřeby.</span><span class="sxs-lookup"><span data-stu-id="34466-132">Routed events enable you to attach that handler only once, as was shown in the previous example, and use handler logic to determine where the event came from if necessary.</span></span> <span data-ttu-id="34466-133">Například to může být obslužnou rutinu pro dříve uvedené [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]:</span><span class="sxs-lookup"><span data-stu-id="34466-133">For instance, this might be the handler for the previously shown [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]:</span></span>  
  
 [!code-csharp[EventOvwSupport#GroupButtonCodeBehind](../../../../samples/snippets/csharp/VS_Snippets_Wpf/EventOvwSupport/CSharp/default.xaml.cs#groupbuttoncodebehind)]
 [!code-vb[EventOvwSupport#GroupButtonCodeBehind](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/EventOvwSupport/visualbasic/default.xaml.vb#groupbuttoncodebehind)]  
  
 <span data-ttu-id="34466-134">**Třída zpracování:** směrován události povolit statický obslužná rutina, která je definována v třídě.</span><span class="sxs-lookup"><span data-stu-id="34466-134">**Class handling:** Routed events permit a static handler that is defined by the class.</span></span> <span data-ttu-id="34466-135">Tato obslužná rutina třída má možnost zpracovat události předtím, než můžete všechny připojené instance obslužné rutiny.</span><span class="sxs-lookup"><span data-stu-id="34466-135">This class handler has the opportunity to handle an event before any attached instance handlers can.</span></span>  
  
 <span data-ttu-id="34466-136">**Odkazování na událost bez reflexe:** některé techniky kód a značky vyžadují způsob, jak identifikovat konkrétní události.</span><span class="sxs-lookup"><span data-stu-id="34466-136">**Referencing an event without reflection:** Certain code and markup techniques require a way to identify a specific event.</span></span> <span data-ttu-id="34466-137">Vytvoří směrované události <xref:System.Windows.RoutedEvent> pole jako identifikátor, který poskytuje postup identifikace robustní událostí, který nevyžaduje statickou nebo spuštění reflexe.</span><span class="sxs-lookup"><span data-stu-id="34466-137">A routed event creates a <xref:System.Windows.RoutedEvent> field as an identifier, which provides a robust event identification technique that does not require static or run-time reflection.</span></span>  
  
### <a name="how-routed-events-are-implemented"></a><span data-ttu-id="34466-138">Jak jsou implementované směrované události</span><span class="sxs-lookup"><span data-stu-id="34466-138">How Routed Events Are Implemented</span></span>  
 <span data-ttu-id="34466-139">Je směrované události [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] události, kterou je zajištěna instanci <xref:System.Windows.RoutedEvent> třídy a zaregistrovaného na [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] událostí systému.</span><span class="sxs-lookup"><span data-stu-id="34466-139">A routed event is a [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] event that is backed by an instance of the <xref:System.Windows.RoutedEvent> class and registered with the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] event system.</span></span> <span data-ttu-id="34466-140"><xref:System.Windows.RoutedEvent> Instance získané z registrace se obvykle uchovávají jako `public` `static` `readonly` pole členem třídy, která registruje a proto "vlastní" směrované události.</span><span class="sxs-lookup"><span data-stu-id="34466-140">The <xref:System.Windows.RoutedEvent> instance obtained from registration is typically retained as a `public` `static` `readonly` field member of the class that registers and thus "owns" the routed event.</span></span> <span data-ttu-id="34466-141">Připojení k stejně jako s názvem [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] událost (která se někdy říká "obálky" událostí) je dosáhnout přepsáním `add` a `remove` implementace pro [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] událostí.</span><span class="sxs-lookup"><span data-stu-id="34466-141">The connection to the identically named [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] event (which is sometimes termed the "wrapper" event) is accomplished by overriding the `add` and `remove` implementations for the [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] event.</span></span> <span data-ttu-id="34466-142">Obvykle `add` a `remove` jsou ponechané jako implicitní výchozím nastavení, které používá syntaxi příslušné události specifické pro jazyk pro přidávání a odebírání obslužné rutiny této události.</span><span class="sxs-lookup"><span data-stu-id="34466-142">Ordinarily, the `add` and `remove` are left as an implicit default that uses the appropriate language-specific event syntax for adding and removing handlers of that event.</span></span> <span data-ttu-id="34466-143">Směrované události připojení a základní mechanismus se koncepčně podobá jak vlastnost závislosti je [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] vlastnosti, které je založeno <xref:System.Windows.DependencyProperty> třídy a zaregistrovaného na [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] vlastnost systému.</span><span class="sxs-lookup"><span data-stu-id="34466-143">The routed event backing and connection mechanism is conceptually similar to how a dependency property is a [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] property that is backed by the <xref:System.Windows.DependencyProperty> class and registered with the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] property system.</span></span>  
  
 <span data-ttu-id="34466-144">Následující příklad ukazuje deklaraci pro vlastní `Tap` směrované události, včetně registrace a úniku <xref:System.Windows.RoutedEvent> identifikátor pole a `add` a `remove` implementace pro `Tap` [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] událostí.</span><span class="sxs-lookup"><span data-stu-id="34466-144">The following example shows the declaration for a custom `Tap` routed event, including the registration and exposure of the <xref:System.Windows.RoutedEvent> identifier field and the `add` and `remove` implementations for the `Tap` [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] event.</span></span>  
  
 [!code-csharp[RoutedEventCustom#AddRemoveHandler](../../../../samples/snippets/csharp/VS_Snippets_Wpf/RoutedEventCustom/CSharp/SDKSampleLibrary/class1.cs#addremovehandler)]
 [!code-vb[RoutedEventCustom#AddRemoveHandler](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/RoutedEventCustom/VB/SDKSampleLibrary/Class1.vb#addremovehandler)]  
  
### <a name="routed-event-handlers-and-xaml"></a><span data-ttu-id="34466-145">Obslužné rutiny směrované události a XAML</span><span class="sxs-lookup"><span data-stu-id="34466-145">Routed Event Handlers and XAML</span></span>  
 <span data-ttu-id="34466-146">K přidání obslužné rutiny k události pomocí [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], na element, který je naslouchací proces událost deklarovat název události jako atribut.</span><span class="sxs-lookup"><span data-stu-id="34466-146">To add a handler for an event using [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], you declare the event name as an attribute on the element that is an event listener.</span></span> <span data-ttu-id="34466-147">Hodnota atributu je název metody implementované obslužné rutiny, které musí existovat v třídu souboru kódu na pozadí.</span><span class="sxs-lookup"><span data-stu-id="34466-147">The value of the attribute is the name of your implemented handler method, which must exist in the partial class of the code-behind file.</span></span>  
  
 [!code-xaml[EventOvwSupport#SimplestSyntax](../../../../samples/snippets/csharp/VS_Snippets_Wpf/EventOvwSupport/CSharp/default.xaml#simplestsyntax)]  
  
 <span data-ttu-id="34466-148">[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] Syntaxe pro přidání standardní [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] obslužné rutiny událostí je stejný pro přidání obslužné rutiny směrované události, protože skutečně přidáváte obslužné rutiny na [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] obálku událostí, který má implementace směrované události pod.</span><span class="sxs-lookup"><span data-stu-id="34466-148">The [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] syntax for adding standard [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] event handlers is the same for adding routed event handlers, because you are really adding handlers to the [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] event wrapper, which has a routed event implementation underneath.</span></span> <span data-ttu-id="34466-149">Další informace o přidání obslužné rutiny událostí v [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], najdete v části [přehled XAML (WPF)](../../../../docs/framework/wpf/advanced/xaml-overview-wpf.md).</span><span class="sxs-lookup"><span data-stu-id="34466-149">For more information about adding event handlers in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], see [XAML Overview (WPF)](../../../../docs/framework/wpf/advanced/xaml-overview-wpf.md).</span></span>  
  
<a name="routing_strategies"></a>   
## <a name="routing-strategies"></a><span data-ttu-id="34466-150">Strategie směrování</span><span class="sxs-lookup"><span data-stu-id="34466-150">Routing Strategies</span></span>  
 <span data-ttu-id="34466-151">Směrovány události, použijte jednu z tři strategie směrování:</span><span class="sxs-lookup"><span data-stu-id="34466-151">Routed events use one of three routing strategies:</span></span>  
  
-   <span data-ttu-id="34466-152">**Šíření:** jsou vyvolány obslužné rutiny událostí ve zdroji událostí.</span><span class="sxs-lookup"><span data-stu-id="34466-152">**Bubbling:** Event handlers on the event source are invoked.</span></span> <span data-ttu-id="34466-153">Směrované události a směrování, aby následných nadřazené elementy, dokud nebude dosaženo kořen stromu elementu.</span><span class="sxs-lookup"><span data-stu-id="34466-153">The routed event then routes to successive parent elements until reaching the element tree root.</span></span> <span data-ttu-id="34466-154">Většina směrované události pomocí probublávání strategie směrování.</span><span class="sxs-lookup"><span data-stu-id="34466-154">Most routed events use the bubbling routing strategy.</span></span> <span data-ttu-id="34466-155">Probublávání směrované události se obecně používají k hlášení vstupní nebo stavu změn z různých ovládací prvky nebo další prvky uživatelského rozhraní.</span><span class="sxs-lookup"><span data-stu-id="34466-155">Bubbling routed events are generally used to report input or state changes from distinct controls or other UI elements.</span></span>  
  
-   <span data-ttu-id="34466-156">**Přímé:** zdroj elementu samotného je zadána jen možnost vyvolání obslužné rutiny v odpovědi.</span><span class="sxs-lookup"><span data-stu-id="34466-156">**Direct:** Only the source element itself is given the opportunity to invoke handlers in response.</span></span> <span data-ttu-id="34466-157">Toto je obdobou "směrování", [!INCLUDE[TLA#tla_winforms](../../../../includes/tlasharptla-winforms-md.md)] používá pro události.</span><span class="sxs-lookup"><span data-stu-id="34466-157">This is analogous to the "routing" that [!INCLUDE[TLA#tla_winforms](../../../../includes/tlasharptla-winforms-md.md)] uses for events.</span></span> <span data-ttu-id="34466-158">Ale na rozdíl od standardní [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] událostí, přímé směrované události podporují zpracování třídy (třídy zpracování je vysvětleno v následující části) a mohou být využívána <xref:System.Windows.EventSetter> a <xref:System.Windows.EventTrigger>.</span><span class="sxs-lookup"><span data-stu-id="34466-158">However, unlike a standard [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] event, direct routed events support class handling (class handling is explained in an upcoming section) and can be used by <xref:System.Windows.EventSetter> and <xref:System.Windows.EventTrigger>.</span></span>  
  
-   <span data-ttu-id="34466-159">**Tunelové propojení:** na začátku jsou vyvolány obslužné rutiny událostí v kořenu stromu elementu.</span><span class="sxs-lookup"><span data-stu-id="34466-159">**Tunneling:** Initially, event handlers at the element tree root are invoked.</span></span> <span data-ttu-id="34466-160">Směrované události přenáší pak směrovat přes následných podřízených elementů na trase směrem uzel elementu, který je zdrojem směrované události (elementu, který vyvolá směrované události).</span><span class="sxs-lookup"><span data-stu-id="34466-160">The routed event then travels a route through successive child elements along the route, towards the node element that is the routed event source (the element that raised the routed event).</span></span> <span data-ttu-id="34466-161">Tunelové směrované události jsou často používá nebo zpracovávány jako součást skládání ovládacího prvku, tak, že události z části složené můžete úmyslně Potlačené nebo nahrazena události, které jsou specifické pro úplnou kontrolu.</span><span class="sxs-lookup"><span data-stu-id="34466-161">Tunneling routed events are often used or handled as part of the compositing for a control, such that events from composite parts can be deliberately suppressed or replaced by events that are specific to the complete control.</span></span> <span data-ttu-id="34466-162">Vstupní události, které jsou součástí [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] často pocházet implementovaná jako dvojice tunelování šíření.</span><span class="sxs-lookup"><span data-stu-id="34466-162">Input events provided in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] often come implemented as a tunneling/bubbling pair.</span></span> <span data-ttu-id="34466-163">Tunelové události jsou také někdy označovány jako události náhledu, z důvodu zásady vytváření názvů, který se používá pro dvojice.</span><span class="sxs-lookup"><span data-stu-id="34466-163">Tunneling events are also sometimes referred to as Preview events, because of a naming convention that is used for the pairs.</span></span>  
  
<a name="why_use"></a>   
## <a name="why-use-routed-events"></a><span data-ttu-id="34466-164">Proč použití směrované události?</span><span class="sxs-lookup"><span data-stu-id="34466-164">Why Use Routed Events?</span></span>  
 <span data-ttu-id="34466-165">Jako vývojář aplikací není vždy nutné vědět, nebo vás, že události, které jsou zpracování je implementovaný jako směrované události.</span><span class="sxs-lookup"><span data-stu-id="34466-165">As an application developer, you do not always need to know or care that the event you are handling is implemented as a routed event.</span></span> <span data-ttu-id="34466-166">Směrované události chovají specifickým, ale toto chování je z velké části neviditelná, pokud jsou zpracování události v elementu kde je vyvolána.</span><span class="sxs-lookup"><span data-stu-id="34466-166">Routed events have special behavior, but that behavior is largely invisible if you are handling an event on the element where it is raised.</span></span>  
  
 <span data-ttu-id="34466-167">Kde stát výkonné směrované události je, pokud použijete kterýkoli z navrhovaných scénářů: definování běžné obslužné rutiny na společný kořen skládání vlastní ovládací prvek nebo definování třídě vlastního ovládacího prvku.</span><span class="sxs-lookup"><span data-stu-id="34466-167">Where routed events become powerful is if you use any of the suggested scenarios: defining common handlers at a common root, compositing your own control, or defining your own custom control class.</span></span>  
  
 <span data-ttu-id="34466-168">Moduly pro naslouchání směrované události a směrované události zdrojů není potřeba sdílet běžné události ve své hierarchii.</span><span class="sxs-lookup"><span data-stu-id="34466-168">Routed event listeners and routed event sources do not need to share a common event in their hierarchy.</span></span> <span data-ttu-id="34466-169">Všechny <xref:System.Windows.UIElement> nebo <xref:System.Windows.ContentElement> může být modul pro naslouchání událostí pro všechny směrované události.</span><span class="sxs-lookup"><span data-stu-id="34466-169">Any <xref:System.Windows.UIElement> or <xref:System.Windows.ContentElement> can be an event listener for any routed event.</span></span> <span data-ttu-id="34466-170">Proto můžete použít úplnou sadu směrované události, které jsou k dispozici v rámci pracovní [!INCLUDE[TLA2#tla_api](../../../../includes/tla2sharptla-api-md.md)] nastavit jako koncepční "rozhraní" které různorodých prvky v aplikaci může výměnu informací o události.</span><span class="sxs-lookup"><span data-stu-id="34466-170">Therefore, you can use the full set of routed events available throughout the working [!INCLUDE[TLA2#tla_api](../../../../includes/tla2sharptla-api-md.md)] set as a conceptual "interface" whereby disparate elements in the application can exchange event information.</span></span> <span data-ttu-id="34466-171">Tento koncept "rozhraní" směrované události je zvláště použitelné pro vstupní události.</span><span class="sxs-lookup"><span data-stu-id="34466-171">This "interface" concept for routed events is particularly applicable for input events.</span></span>  
  
 <span data-ttu-id="34466-172">Směrované události lze také komunikovat prostřednictvím stromu elementu vzhledem k tomu, že je pro každý prvek v postupu perpetuated data události pro událost.</span><span class="sxs-lookup"><span data-stu-id="34466-172">Routed events can also be used to communicate through the element tree, because the event data for the event is perpetuated to each element in the route.</span></span> <span data-ttu-id="34466-173">Jeden element v datech události něco změnit, a tato změna by být k dispozici na další prvek v postupu.</span><span class="sxs-lookup"><span data-stu-id="34466-173">One element could change something in the event data, and that change would be available to the next element in the route.</span></span>  
  
 <span data-ttu-id="34466-174">Než směrování aspekt existují dva další důvody této všechny zadané [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] událostí se může implementovat jako směrované události, namísto standardního [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] událostí.</span><span class="sxs-lookup"><span data-stu-id="34466-174">Other than the routing aspect, there are two other reasons that any given [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] event might be implemented as a routed event instead of a standard [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] event.</span></span> <span data-ttu-id="34466-175">Pokud implementujete vlastní události, můžete také zvážit tyto zásady:</span><span class="sxs-lookup"><span data-stu-id="34466-175">If you are implementing your own events, you might also consider these principles:</span></span>  
  
-   <span data-ttu-id="34466-176">Některé [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] stylů a ukázka funkce, jako <xref:System.Windows.EventSetter> a <xref:System.Windows.EventTrigger> vyžadují odkazované událost, která má být směrované události.</span><span class="sxs-lookup"><span data-stu-id="34466-176">Certain [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] styling and templating features such as <xref:System.Windows.EventSetter> and <xref:System.Windows.EventTrigger> require the referenced event to be a routed event.</span></span> <span data-ttu-id="34466-177">Toto je scénář identifikátor událost, již bylo zmíněno dříve.</span><span class="sxs-lookup"><span data-stu-id="34466-177">This is the event identifier scenario mentioned earlier.</span></span>  
  
-   <span data-ttu-id="34466-178">Směrované události podporovat třídu mechanismu, které třídy můžete zadat statické metody, které mají možnost zpracování směrované událostí, než k nim měli přístup všechny registrované instance obslužné rutiny pro zpracování.</span><span class="sxs-lookup"><span data-stu-id="34466-178">Routed events support a class handling mechanism whereby the class can specify static methods that have the opportunity to handle routed events before any registered instance handlers can access them.</span></span> <span data-ttu-id="34466-179">Totiž velmi užitečná při návrhu řízení třídě můžete vynutit chování událostmi řízené třídy, které nelze potlačit omylem pomocí zpracování události v instanci.</span><span class="sxs-lookup"><span data-stu-id="34466-179">This is very useful in control design, because your class can enforce event-driven class behaviors that cannot be accidentally suppressed by handling an event on an instance.</span></span>  
  
 <span data-ttu-id="34466-180">Všechny aspekty výše popsané v samostatné části tohoto tématu.</span><span class="sxs-lookup"><span data-stu-id="34466-180">Each of the above considerations is discussed in a separate section of this topic.</span></span>  
  
<a name="event_handing"></a>   
## <a name="adding-and-implementing-an-event-handler-for-a-routed-event"></a><span data-ttu-id="34466-181">Přidání a implementace obslužné rutiny události pro směrované události</span><span class="sxs-lookup"><span data-stu-id="34466-181">Adding and Implementing an Event Handler for a Routed Event</span></span>  
 <span data-ttu-id="34466-182">Přidání obslužné rutiny události v [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], jednoduše přidat název události k prvku jako atribut a nastavte hodnotu atributu jako název obslužné rutiny události, který implementuje odpovídající delegáta, jako v následujícím příkladu.</span><span class="sxs-lookup"><span data-stu-id="34466-182">To add an event handler in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], you simply add the event name to an element as an attribute and set the attribute value as the name of the event handler that implements an appropriate delegate, as in the following example.</span></span>  
  
 [!code-xaml[EventOvwSupport#SimplestSyntax](../../../../samples/snippets/csharp/VS_Snippets_Wpf/EventOvwSupport/CSharp/default.xaml#simplestsyntax)]  
  
 <span data-ttu-id="34466-183">`b1SetColor` je název implementovaná obslužná rutina, která obsahuje kód, který zpracovává <xref:System.Windows.Controls.Primitives.ButtonBase.Click> událostí.</span><span class="sxs-lookup"><span data-stu-id="34466-183">`b1SetColor` is the name of the implemented handler that contains the code that handles the <xref:System.Windows.Controls.Primitives.ButtonBase.Click> event.</span></span> <span data-ttu-id="34466-184">`b1SetColor` musí mít stejný podpis jako <xref:System.Windows.RoutedEventHandler> delegáta, který je delegát obslužné rutiny události pro <xref:System.Windows.Controls.Primitives.ButtonBase.Click> událostí.</span><span class="sxs-lookup"><span data-stu-id="34466-184">`b1SetColor` must have the same signature as the <xref:System.Windows.RoutedEventHandler> delegate, which is the event handler delegate for the <xref:System.Windows.Controls.Primitives.ButtonBase.Click> event.</span></span> <span data-ttu-id="34466-185">První parametr všechny delegátů obslužných rutin směrované události určuje element, ke které je obslužná rutina přidána, a druhý parametr určuje data pro událost.</span><span class="sxs-lookup"><span data-stu-id="34466-185">The first parameter of all routed event handler delegates specifies the element to which the event handler is added, and the second parameter specifies the data for the event.</span></span>  
  
[!code-csharp[EventOvwSupport#SimpleHandlerA](../../../../samples/snippets/csharp/VS_Snippets_Wpf/EventOvwSupport/CSharp/default.xaml.cs#simplehandlera)]
[!code-vb[EventOvwSupport#SimpleHandlerA](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/EventOvwSupport/visualbasic/default.xaml.vb#simplehandlera)]  
  
 <span data-ttu-id="34466-186"><xref:System.Windows.RoutedEventHandler> je obslužná rutina delegát základní směrované události.</span><span class="sxs-lookup"><span data-stu-id="34466-186"><xref:System.Windows.RoutedEventHandler> is the basic routed event handler delegate.</span></span> <span data-ttu-id="34466-187">Pro směrované události, které jsou specializované pro některé ovládací prvky nebo scénářů delegáty pro obslužné rutiny směrované události také může požadavky, aby odesílají data specializované události.</span><span class="sxs-lookup"><span data-stu-id="34466-187">For routed events that are specialized for certain controls or scenarios, the delegates to use for the routed event handlers also might become more specialized, so that they can transmit specialized event data.</span></span> <span data-ttu-id="34466-188">Například v případě běžných vstupní může zpracovat <xref:System.Windows.UIElement.DragEnter> směrované události.</span><span class="sxs-lookup"><span data-stu-id="34466-188">For instance, in a common input scenario, you might handle a <xref:System.Windows.UIElement.DragEnter> routed event.</span></span> <span data-ttu-id="34466-189">Musí implementovat vaší obslužné rutiny <xref:System.Windows.DragEventHandler> delegovat.</span><span class="sxs-lookup"><span data-stu-id="34466-189">Your handler should implement the <xref:System.Windows.DragEventHandler> delegate.</span></span> <span data-ttu-id="34466-190">Pomocí nejvíce delegáta může zpracovat <xref:System.Windows.DragEventArgs> v obslužné rutiny a čtení <xref:System.Windows.DragEventArgs.Data%2A> vlastnosti, která obsahuje datové části schránky operace přetažení.</span><span class="sxs-lookup"><span data-stu-id="34466-190">By using the most specific delegate, you can process the <xref:System.Windows.DragEventArgs> in the handler and read the <xref:System.Windows.DragEventArgs.Data%2A> property, which contains the clipboard payload of the drag operation.</span></span>  
  
 <span data-ttu-id="34466-191">Kompletní příklad, jak přidat obslužné rutiny události pro element pomocí [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], najdete v části [zpracování události směrovány](../../../../docs/framework/wpf/advanced/how-to-handle-a-routed-event.md).</span><span class="sxs-lookup"><span data-stu-id="34466-191">For a complete example of how to add an event handler to an element using [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], see [Handle a Routed Event](../../../../docs/framework/wpf/advanced/how-to-handle-a-routed-event.md).</span></span>  
  
 <span data-ttu-id="34466-192">Přidání obslužné rutiny pro směrované události v aplikaci, která se vytvoří v kódu je jednoduchá.</span><span class="sxs-lookup"><span data-stu-id="34466-192">Adding a handler for a routed event in an application that is created in code is straightforward.</span></span> <span data-ttu-id="34466-193">Obslužné rutiny směrované události můžete kdykoli přidat prostřednictvím Pomocná metoda <xref:System.Windows.UIElement.AddHandler%2A> (což je stejnou existující základní volání pro metodu `add`.) Však existující [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] směrované události mají obvykle zálohování implementace `add` a `remove` logiky, která umožňují obslužné rutiny pro směrované události přidávaného syntaxí události pro specifický jazyk, který je intuitivnější syntaxe než Pomocná metoda.</span><span class="sxs-lookup"><span data-stu-id="34466-193">Routed event handlers can always be added through a helper method <xref:System.Windows.UIElement.AddHandler%2A> (which is the same method that the existing backing calls for `add`.) However, existing [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] routed events generally have backing implementations of `add` and `remove` logic that allow the handlers for routed events to be added by a language-specific event syntax, which is more intuitive syntax than the helper method.</span></span> <span data-ttu-id="34466-194">Toto je příklad použití metody pomocné rutiny:</span><span class="sxs-lookup"><span data-stu-id="34466-194">The following is an example usage of the helper method:</span></span>  
  
 [!code-csharp[EventOvwSupport#AddHandlerCode](../../../../samples/snippets/csharp/VS_Snippets_Wpf/EventOvwSupport/CSharp/default.xaml.cs#addhandlercode)]
 [!code-vb[EventOvwSupport#AddHandlerCode](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/EventOvwSupport/visualbasic/default.xaml.vb#addhandlercode)]  
  
 <span data-ttu-id="34466-195">Další příklad ukazuje jazyka C# – operátor syntaxe (Visual Basic má mírně odlišné operátor syntaxi z důvodu jeho zpracování vyhodnocení):</span><span class="sxs-lookup"><span data-stu-id="34466-195">The next example shows the C# operator syntax (Visual Basic has slightly different operator syntax because of its handling of dereferencing):</span></span>  
  
 [!code-csharp[EventOvwSupport#AddHandlerPlusEquals](../../../../samples/snippets/csharp/VS_Snippets_Wpf/EventOvwSupport/CSharp/default.xaml.cs#addhandlerplusequals)]
 [!code-vb[EventOvwSupport#AddHandlerPlusEquals](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/EventOvwSupport/visualbasic/default.xaml.vb#addhandlerplusequals)]  
  
 <span data-ttu-id="34466-196">Příklad postup přidání obslužné rutiny událostí v kódu, naleznete v části [přidat kód obslužné rutiny události pomocí](../../../../docs/framework/wpf/advanced/how-to-add-an-event-handler-using-code.md).</span><span class="sxs-lookup"><span data-stu-id="34466-196">For an example of how to add an event handler in code, see [Add an Event Handler Using Code](../../../../docs/framework/wpf/advanced/how-to-add-an-event-handler-using-code.md).</span></span>  
  
 <span data-ttu-id="34466-197">Pokud používáte Visual Basic, můžete také použít `Handles` – klíčové slovo přidání obslužné rutiny jako součást deklarace obslužných rutin.</span><span class="sxs-lookup"><span data-stu-id="34466-197">If you are using Visual Basic, you can also use the `Handles` keyword to add handlers as part of the handler declarations.</span></span> <span data-ttu-id="34466-198">Další informace najdete v tématu [Visual Basic a zpracování události WPF](../../../../docs/framework/wpf/advanced/visual-basic-and-wpf-event-handling.md).</span><span class="sxs-lookup"><span data-stu-id="34466-198">For more information, see [Visual Basic and WPF Event Handling](../../../../docs/framework/wpf/advanced/visual-basic-and-wpf-event-handling.md).</span></span>  
  
<a name="concept_handled"></a>   
### <a name="the-concept-of-handled"></a><span data-ttu-id="34466-199">Zpracovává konceptu</span><span class="sxs-lookup"><span data-stu-id="34466-199">The Concept of Handled</span></span>  
 <span data-ttu-id="34466-200">Všechny směrované události sdílet běžné události dat základní třídu, <xref:System.Windows.RoutedEventArgs>.</span><span class="sxs-lookup"><span data-stu-id="34466-200">All routed events share a common event data base class, <xref:System.Windows.RoutedEventArgs>.</span></span> <span data-ttu-id="34466-201"><xref:System.Windows.RoutedEventArgs> definuje <xref:System.Windows.RoutedEventArgs.Handled%2A> vlastnosti, která nabývá logických hodnot.</span><span class="sxs-lookup"><span data-stu-id="34466-201"><xref:System.Windows.RoutedEventArgs> defines the <xref:System.Windows.RoutedEventArgs.Handled%2A> property, which takes a Boolean value.</span></span> <span data-ttu-id="34466-202">Účelem <xref:System.Windows.RoutedEventArgs.Handled%2A> vlastnost je umožnit žádné obslužné rutiny události na trase označit směrované události jako *zpracovává*, nastavením hodnotu <xref:System.Windows.RoutedEventArgs.Handled%2A> k `true`.</span><span class="sxs-lookup"><span data-stu-id="34466-202">The purpose of the <xref:System.Windows.RoutedEventArgs.Handled%2A> property is to enable any event handler along the route to mark the routed event as *handled*, by setting the value of <xref:System.Windows.RoutedEventArgs.Handled%2A> to `true`.</span></span> <span data-ttu-id="34466-203">Po zpracovávaných obslužnou rutinu na jeden element společně trasy, data události sdílené údajně opakujte pro každý naslouchací proces na trase.</span><span class="sxs-lookup"><span data-stu-id="34466-203">After being processed by the handler at one element along the route, the shared event data is again reported to each listener along the route.</span></span>  
  
 <span data-ttu-id="34466-204">Hodnota <xref:System.Windows.RoutedEventArgs.Handled%2A> má vliv jak směrované události je hlášené nebo zpracovány při přenosu další na trase.</span><span class="sxs-lookup"><span data-stu-id="34466-204">The value of <xref:System.Windows.RoutedEventArgs.Handled%2A> affects how a routed event is reported or processed as it travels further along the route.</span></span> <span data-ttu-id="34466-205">Pokud <xref:System.Windows.RoutedEventArgs.Handled%2A> je `true` události data pro směrované události a pak obslužných rutin, které naslouchat této směrované události na další elementy jsou obecně už vyvolány u dané instance určitá událost.</span><span class="sxs-lookup"><span data-stu-id="34466-205">If <xref:System.Windows.RoutedEventArgs.Handled%2A> is `true` in the event data for a routed event, then handlers that listen for that routed event on other elements are generally no longer invoked for that particular event instance.</span></span> <span data-ttu-id="34466-206">To platí, i pro obslužné rutiny připojena v [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] a pro obslužné rutiny přidali pomocí syntaxe přílohy obslužné rutiny události pro specifický jazyk, jako `+=` nebo `Handles`.</span><span class="sxs-lookup"><span data-stu-id="34466-206">This is true both for handlers attached in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] and for handlers added by language-specific event handler attachment syntaxes such as `+=` or `Handles`.</span></span> <span data-ttu-id="34466-207">U většiny běžných scénářů s obslužná rutina označíte událost jako ošetřena nastavením <xref:System.Windows.RoutedEventArgs.Handled%2A> k `true` "zastaví" směrování pro trasu tunelu nebo probublávání trasy a také každé události, kterou provádí na místo v trasy třídy obslužnou rutinou.</span><span class="sxs-lookup"><span data-stu-id="34466-207">For most common handler scenarios, marking an event as handled by setting <xref:System.Windows.RoutedEventArgs.Handled%2A> to `true` will "stop" routing for either a tunneling route or a bubbling route, and also for any event that is handled at a point in the route by a class handler.</span></span>  
  
 <span data-ttu-id="34466-208">Existuje však mechanismus "handledEventsToo", při němž naslouchací procesy dají spustit i přesto obslužné rutiny v reakci na směrované události kde <xref:System.Windows.RoutedEventArgs.Handled%2A> je `true` v datech události.</span><span class="sxs-lookup"><span data-stu-id="34466-208">However, there is a "handledEventsToo" mechanism whereby listeners can still run handlers in response to routed events where <xref:System.Windows.RoutedEventArgs.Handled%2A> is `true` in the event data.</span></span> <span data-ttu-id="34466-209">Jinými slovy trasy událostí není skutečně zastavena označením dat události jako zpracování.</span><span class="sxs-lookup"><span data-stu-id="34466-209">In other words, the event route is not truly stopped by marking the event data as handled.</span></span> <span data-ttu-id="34466-210">Můžete použít pouze mechanismus handledEventsToo do kódu nebo <xref:System.Windows.EventSetter>:</span><span class="sxs-lookup"><span data-stu-id="34466-210">You can only use the handledEventsToo mechanism in code, or in an <xref:System.Windows.EventSetter>:</span></span>  
  
-   <span data-ttu-id="34466-211">V kódu, místo použití syntaxe události pro specifický jazyk, který funguje pro obecné [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] události, zavolejte [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] metoda <xref:System.Windows.UIElement.AddHandler%28System.Windows.RoutedEvent%2CSystem.Delegate%2CSystem.Boolean%29> přidat vaší obslužné rutiny.</span><span class="sxs-lookup"><span data-stu-id="34466-211">In code, instead of using a language-specific event syntax that works for general [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] events, call the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] method <xref:System.Windows.UIElement.AddHandler%28System.Windows.RoutedEvent%2CSystem.Delegate%2CSystem.Boolean%29> to add your handler.</span></span> <span data-ttu-id="34466-212">Zadejte hodnotu `handledEventsToo` jako `true`.</span><span class="sxs-lookup"><span data-stu-id="34466-212">Specify the value of `handledEventsToo` as `true`.</span></span>  
  
-   <span data-ttu-id="34466-213">V <xref:System.Windows.EventSetter>, nastavte <xref:System.Windows.EventSetter.HandledEventsToo%2A> atributu na `true`.</span><span class="sxs-lookup"><span data-stu-id="34466-213">In an <xref:System.Windows.EventSetter>, set the <xref:System.Windows.EventSetter.HandledEventsToo%2A> attribute to be `true`.</span></span>  
  
 <span data-ttu-id="34466-214">Kromě chování, <xref:System.Windows.RoutedEventArgs.Handled%2A> stavu vytváří v směrované události, koncept <xref:System.Windows.RoutedEventArgs.Handled%2A> má důsledky, jak by měla návrhu aplikace a napsat kód obslužné rutiny událostí.</span><span class="sxs-lookup"><span data-stu-id="34466-214">In addition to the behavior that <xref:System.Windows.RoutedEventArgs.Handled%2A> state produces in routed events, the concept of <xref:System.Windows.RoutedEventArgs.Handled%2A> has implications for how you should design your application and write the event handler code.</span></span> <span data-ttu-id="34466-215">Můžete conceptualize <xref:System.Windows.RoutedEventArgs.Handled%2A> jako jednoduchý protokol, který je zveřejněný prostřednictvím směrované události.</span><span class="sxs-lookup"><span data-stu-id="34466-215">You can conceptualize <xref:System.Windows.RoutedEventArgs.Handled%2A> as being a simple protocol that is exposed by routed events.</span></span> <span data-ttu-id="34466-216">Až můžete, ale koncepční návrh, jak přesně v tom, jak používáte tento protokol je hodnota <xref:System.Windows.RoutedEventArgs.Handled%2A> je určena pro použití vypadá takto:</span><span class="sxs-lookup"><span data-stu-id="34466-216">Exactly how you use this protocol is up to you, but the conceptual design for how the value of <xref:System.Windows.RoutedEventArgs.Handled%2A> is intended to be used is as follows:</span></span>  
  
-   <span data-ttu-id="34466-217">Pokud směrované události je označen jako zpracování, pak nemusí znovu zpracovávat další prvky této trase.</span><span class="sxs-lookup"><span data-stu-id="34466-217">If a routed event is marked as handled, then it does not need to be handled again by other elements along that route.</span></span>  
  
-   <span data-ttu-id="34466-218">Pokud směrované události není označena jako zpracovává, pak buď nechcete zaregistrovat obslužnou rutinu nebo obslužných rutin, které byly registrované pokusit nechcete pracovat s daty událostí a nastavte další naslouchací procesy, které byly dříve na trase rozhodli <xref:System.Windows.RoutedEventArgs.Handled%2A> k `true`.</span><span class="sxs-lookup"><span data-stu-id="34466-218">If a routed event is not marked as handled, then other listeners that were earlier along the route have chosen either not to register a handler, or the handlers that were registered chose not to manipulate the event data and set <xref:System.Windows.RoutedEventArgs.Handled%2A> to `true`.</span></span> <span data-ttu-id="34466-219">(Nebo, samozřejmě je možné, že aktuální naslouchací proces prvního bodu v postupu). Obslužné rutiny na aktuální naslouchací proces Teď máte tři možné kurzy akce:</span><span class="sxs-lookup"><span data-stu-id="34466-219">(Or, it is of course possible that the current listener is the first point in the route.) Handlers on the current listener now have three possible courses of action:</span></span>  
  
    -   <span data-ttu-id="34466-220">Provádět žádnou akci vůbec; událost zůstává neošetřená a události směruje na další naslouchací proces.</span><span class="sxs-lookup"><span data-stu-id="34466-220">Take no action at all; the event remains unhandled, and the event routes to the next listener.</span></span>  
  
    -   <span data-ttu-id="34466-221">Spouštění kódu v reakci na událost, ale rozhodnout, že akci prováděnou nebyl dostatečně velké na to, pro vlastní označování událostí jako zpracování.</span><span class="sxs-lookup"><span data-stu-id="34466-221">Execute code in response to the event, but make the determination that the action taken was not substantial enough to warrant marking the event as handled.</span></span> <span data-ttu-id="34466-222">Událost trasy pro další naslouchací proces.</span><span class="sxs-lookup"><span data-stu-id="34466-222">The event routes to the next listener.</span></span>  
  
    -   <span data-ttu-id="34466-223">Spouštění kódu v reakci na událost.</span><span class="sxs-lookup"><span data-stu-id="34466-223">Execute code in response to the event.</span></span> <span data-ttu-id="34466-224">Označte jako zpracování události data předaná obslužná rutina, protože akci prováděnou se považují za dostatečně velké na to, pro vlastní označení jako zpracování události.</span><span class="sxs-lookup"><span data-stu-id="34466-224">Mark the event as handled in the event data passed to the handler, because the action taken was deemed substantial enough to warrant marking as handled.</span></span> <span data-ttu-id="34466-225">Událost stále tras pro další naslouchací proces, ale s <xref:System.Windows.RoutedEventArgs.Handled%2A> = `true` v jeho data událostí, takže jenom `handledEventsToo` naslouchací procesy mít příležitost vyvolat další obslužné rutiny.</span><span class="sxs-lookup"><span data-stu-id="34466-225">The event still routes to the next listener, but with <xref:System.Windows.RoutedEventArgs.Handled%2A>=`true` in its event data, so only `handledEventsToo` listeners have the opportunity to invoke further handlers.</span></span>  
  
 <span data-ttu-id="34466-226">Tento návrh koncepční je zesílené podle chování směrování, již bylo zmíněno dříve: je obtížnější (Ačkoli je to stále možné v kódu nebo styly) pro připojení obslužné rutiny pro směrované události, které jsou vyvolány i v případě, že předchozí obslužné rutiny na trase již nastaven <xref:System.Windows.RoutedEventArgs.Handled%2A>k `true`.</span><span class="sxs-lookup"><span data-stu-id="34466-226">This conceptual design is reinforced by the routing behavior mentioned earlier: it is more difficult (although still possible in code or styles) to attach handlers for routed events that are invoked even if a previous handler along the route has already set <xref:System.Windows.RoutedEventArgs.Handled%2A> to `true`.</span></span>  
  
 <span data-ttu-id="34466-227">Další informace o <xref:System.Windows.RoutedEventArgs.Handled%2A>, třída zpracování směrované události a doporučení o tom, kdy je vhodné k označení směrované události jako <xref:System.Windows.RoutedEventArgs.Handled%2A>, najdete v části [označení směrované události jako Handled a třída zpracování](../../../../docs/framework/wpf/advanced/marking-routed-events-as-handled-and-class-handling.md).</span><span class="sxs-lookup"><span data-stu-id="34466-227">For more information about <xref:System.Windows.RoutedEventArgs.Handled%2A>, class handling of routed events, and recommendations about when it is appropriate to mark a routed event as <xref:System.Windows.RoutedEventArgs.Handled%2A>, see [Marking Routed Events as Handled, and Class Handling](../../../../docs/framework/wpf/advanced/marking-routed-events-as-handled-and-class-handling.md).</span></span>  
  
 <span data-ttu-id="34466-228">V aplikacích je celkem běžné právě zpracovávají probublávání směrované události na objektu, která je vyvolána a dělat starosti s vlastnostmi události směrování vůbec.</span><span class="sxs-lookup"><span data-stu-id="34466-228">In applications, it is quite common to just handle a bubbling routed event on the object that raised it, and not be concerned with the event's routing characteristics at all.</span></span> <span data-ttu-id="34466-229">Je však stále dobrým zvykem označit směrované události, jako v případě, že data, aby se zabránilo neočekávané vedlejší účinky jen v případě, že element, který je další nahoru k element má také pro tento stejný směrované události obslužná rutina zpracovává.</span><span class="sxs-lookup"><span data-stu-id="34466-229">However, it is still a good practice to mark the routed event as handled in the event data, to prevent unanticipated side effects just in case an element that is further up the element tree also has a handler attached for that same routed event.</span></span>  
  
<a name="class_handlers"></a>   
## <a name="class-handlers"></a><span data-ttu-id="34466-230">Obslužné rutiny – třída</span><span class="sxs-lookup"><span data-stu-id="34466-230">Class Handlers</span></span>  
 <span data-ttu-id="34466-231">Pokud definujete třídu odvozenou nějakým způsobem z <xref:System.Windows.DependencyObject>, můžete také definovat a připojte třída obslužnou rutinu pro směrované události, který je členem události deklarované nebo zděděná vaší třídy.</span><span class="sxs-lookup"><span data-stu-id="34466-231">If you are defining a class that derives in some way from <xref:System.Windows.DependencyObject>, you can also define and attach a class handler for a routed event that is a declared or inherited event member of your class.</span></span> <span data-ttu-id="34466-232">Obslužné rutiny třídy jsou vyvolány před naslouchací proces obslužné rutiny všechny instance, které jsou připojeny k instanci této třídy, vždy, když směrované události dosáhne element instance v jeho trasu.</span><span class="sxs-lookup"><span data-stu-id="34466-232">Class handlers are invoked before any instance listener handlers that are attached to an instance of that class, whenever a routed event reaches an element instance in its route.</span></span>  
  
 <span data-ttu-id="34466-233">Některé [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] ovládacích prvků mají vyplývajících třídu zpracování pro určité směrované události.</span><span class="sxs-lookup"><span data-stu-id="34466-233">Some [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] controls have inherent class handling for certain routed events.</span></span> <span data-ttu-id="34466-234">To může poskytnout pasivního vzhled směrované události někdy není vyvolána, ale ve skutečnosti se třída zpracovává a směrované události mohou být stále potenciálně ošetřeny vaší instance obslužné rutiny, pokud použijete některé techniky.</span><span class="sxs-lookup"><span data-stu-id="34466-234">This might give the outward appearance that the routed event is not ever raised, but in reality it is being class handled, and the routed event can potentially still be handled by your instance handlers if you use certain techniques.</span></span> <span data-ttu-id="34466-235">Virtuální metody, které lze použít k přepsání třída chování zpracování vystavit také mnoho základní třídy a ovládací prvky.</span><span class="sxs-lookup"><span data-stu-id="34466-235">Also, many base classes and controls expose virtual methods that can be used to override class handling behavior.</span></span> <span data-ttu-id="34466-236">Další informace jak o tom, jak obejít nežádoucí třída zpracování a k definování vlastní třídu zpracování v rámci vlastní třídy najdete v tématu [označení směrované události jako Handled a třída zpracování](../../../../docs/framework/wpf/advanced/marking-routed-events-as-handled-and-class-handling.md).</span><span class="sxs-lookup"><span data-stu-id="34466-236">For more information both on how to work around undesired class handling and on defining your own class handling in a custom class, see [Marking Routed Events as Handled, and Class Handling](../../../../docs/framework/wpf/advanced/marking-routed-events-as-handled-and-class-handling.md).</span></span>  
  
<a name="attached_events"></a>   
## <a name="attached-events-in-wpf"></a><span data-ttu-id="34466-237">Přidružené události v grafickém subsystému WPF</span><span class="sxs-lookup"><span data-stu-id="34466-237">Attached Events in WPF</span></span>  
 <span data-ttu-id="34466-238">[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] Jazyk také definuje speciální typ události volána *přidružená událost*.</span><span class="sxs-lookup"><span data-stu-id="34466-238">The [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] language also defines a special type of event called an *attached event*.</span></span> <span data-ttu-id="34466-239">– Přidružená událost umožňuje přidat obslužnou rutinu události pro libovolný element.</span><span class="sxs-lookup"><span data-stu-id="34466-239">An attached event enables you to add a handler for a particular event to an arbitrary element.</span></span> <span data-ttu-id="34466-240">Element zpracování události není nutné definovat nebo nastavte dědičnost přidružená událost a ani objekt potenciálně vyvolá událost ani zpracování cílové instance musí definovat nebo jinak "vlastní" tuto událost jako člena třídy.</span><span class="sxs-lookup"><span data-stu-id="34466-240">The element handling the event need not define or inherit the attached event, and neither the object potentially raising the event nor the destination handling instance must define or otherwise "own" that event as a class member.</span></span>  
  
 <span data-ttu-id="34466-241">[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] Vstupní systém hojně používá přidružené události.</span><span class="sxs-lookup"><span data-stu-id="34466-241">The [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] input system uses attached events extensively.</span></span> <span data-ttu-id="34466-242">Však téměř všechny tyto přidružené události jsou předávány prostřednictvím základní elementy.</span><span class="sxs-lookup"><span data-stu-id="34466-242">However, nearly all of these attached events are forwarded through base elements.</span></span> <span data-ttu-id="34466-243">Vstupních událostech se potom zobrazí jako ekvivalentní nepřipojené směrováním události, které jsou členy třídy base element.</span><span class="sxs-lookup"><span data-stu-id="34466-243">The input events then appear as equivalent non-attached routed events that are members of the base element class.</span></span> <span data-ttu-id="34466-244">Například základní přidružená událost <xref:System.Windows.Input.Mouse.MouseDown?displayProperty=nameWithType> může více snadno zpracovat všechny zadané <xref:System.Windows.UIElement> pomocí <xref:System.Windows.UIElement.MouseDown> na který <xref:System.Windows.UIElement> místo týkajících se syntaxí přidružená událost buď v [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] nebo kódu.</span><span class="sxs-lookup"><span data-stu-id="34466-244">For instance, the underlying attached event <xref:System.Windows.Input.Mouse.MouseDown?displayProperty=nameWithType> can more easily be handled on any given <xref:System.Windows.UIElement> by using <xref:System.Windows.UIElement.MouseDown> on that <xref:System.Windows.UIElement> rather than dealing with attached event syntax either in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] or code.</span></span>  
  
 <span data-ttu-id="34466-245">Další informace o přidružené události v [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], najdete v části [připojen přehled událostí](../../../../docs/framework/wpf/advanced/attached-events-overview.md).</span><span class="sxs-lookup"><span data-stu-id="34466-245">For more information about attached events in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], see [Attached Events Overview](../../../../docs/framework/wpf/advanced/attached-events-overview.md).</span></span>  
  
<a name="Qualifying_Event_Names_in_XAML_for_Anticipated_Routing"></a>   
## <a name="qualified-event-names-in-xaml"></a><span data-ttu-id="34466-246">Názvy kvalifikovaný událostí v jazyce XAML</span><span class="sxs-lookup"><span data-stu-id="34466-246">Qualified Event Names in XAML</span></span>  
 <span data-ttu-id="34466-247">Další využití syntaxe, který vypadá takto: *typename*. *EventName* připojené syntaxe událostí, ale není přesněji řečeno využití připojené události je při připojení obslužné rutiny pro směrované události, které jsou vydané podřízené elementy.</span><span class="sxs-lookup"><span data-stu-id="34466-247">Another syntax usage that resembles *typename*.*eventname* attached event syntax but is not strictly speaking an attached event usage is when you attach handlers for routed events that are raised by child elements.</span></span> <span data-ttu-id="34466-248">Obslužné rutiny se připojit k společným nadřazeným prvkem, využívat výhod směrování události, i když společným nadřazeným prvkem nemusí mít relevantní směrované události jako člena.</span><span class="sxs-lookup"><span data-stu-id="34466-248">You attach the handlers to a common parent, to take advantage of event routing, even though the common parent might not have the relevant routed event as a member.</span></span> <span data-ttu-id="34466-249">Tento příklad zvažte znovu:</span><span class="sxs-lookup"><span data-stu-id="34466-249">Consider this example again:</span></span>  
  
 [!code-xaml[EventOvwSupport#GroupButton](../../../../samples/snippets/csharp/VS_Snippets_Wpf/EventOvwSupport/CSharp/default.xaml#groupbutton)]  
  
 <span data-ttu-id="34466-250">Zde je naslouchací proces element nadřazené, kde se přidá obslužná rutina <xref:System.Windows.Controls.StackPanel>.</span><span class="sxs-lookup"><span data-stu-id="34466-250">Here, the parent element listener where the handler is added is a <xref:System.Windows.Controls.StackPanel>.</span></span> <span data-ttu-id="34466-251">Ale ho je přidání obslužné rutiny pro směrované události, která byla deklarována a bude aktivováno <xref:System.Windows.Controls.Button> – třída (<xref:System.Windows.Controls.Primitives.ButtonBase> ve skutečnosti, ale k dispozici pro <xref:System.Windows.Controls.Button> prostřednictvím dědičnosti).</span><span class="sxs-lookup"><span data-stu-id="34466-251">However, it is adding a handler for a routed event that was declared and will be raised by the <xref:System.Windows.Controls.Button> class (<xref:System.Windows.Controls.Primitives.ButtonBase> actually, but available to <xref:System.Windows.Controls.Button> through inheritance).</span></span> <span data-ttu-id="34466-252"><xref:System.Windows.Controls.Button> "vlastní" události, ale systém směrované události povolí obslužné rutiny pro směrované události, které chcete připojit k žádné <xref:System.Windows.UIElement> nebo <xref:System.Windows.ContentElement> instance naslouchací proces, který by jinak naslouchací procesy pro připojení [!INCLUDE[TLA#tla_clr](../../../../includes/tlasharptla-clr-md.md)] událostí.</span><span class="sxs-lookup"><span data-stu-id="34466-252"><xref:System.Windows.Controls.Button> "owns" the event, but the routed event system permits handlers for any routed event to be attached to any <xref:System.Windows.UIElement> or <xref:System.Windows.ContentElement> instance listener that could otherwise attach listeners for a [!INCLUDE[TLA#tla_clr](../../../../includes/tlasharptla-clr-md.md)] event.</span></span> <span data-ttu-id="34466-253">Výchozí obor názvů xmlns pro tyto názvy atributů kvalifikovaný událostí je obvykle výchozí [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] názvu oborů xmlns, ale můžete také zadat předponou obory názvů pro vlastní směrované události.</span><span class="sxs-lookup"><span data-stu-id="34466-253">The default xmlns namespace for these qualified event attribute names is typically the default [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] xmlns namespace, but you can also specify prefixed namespaces for custom routed events.</span></span> <span data-ttu-id="34466-254">Další informace o xmlns najdete v tématu [obory názvů jazyka XAML a Namespace mapování pro jazyk XAML WPF](../../../../docs/framework/wpf/advanced/xaml-namespaces-and-namespace-mapping-for-wpf-xaml.md).</span><span class="sxs-lookup"><span data-stu-id="34466-254">For more information about xmlns, see [XAML Namespaces and Namespace Mapping for WPF XAML](../../../../docs/framework/wpf/advanced/xaml-namespaces-and-namespace-mapping-for-wpf-xaml.md).</span></span>  
  
<a name="how_event_processing_works"></a>   
## <a name="wpf-input-events"></a><span data-ttu-id="34466-255">Vstupní události WPF</span><span class="sxs-lookup"><span data-stu-id="34466-255">WPF Input Events</span></span>  
 <span data-ttu-id="34466-256">Časté provádění směrované události v rámci [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] je platforma pro vstupní události.</span><span class="sxs-lookup"><span data-stu-id="34466-256">One frequent application of routed events within the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] platform is for input events.</span></span> <span data-ttu-id="34466-257">V [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], tunelové propojení směrované události jsou názvy podle konvence předponou slovo "Náhled".</span><span class="sxs-lookup"><span data-stu-id="34466-257">In [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], tunneling routed events names are prefixed with the word "Preview" by convention.</span></span> <span data-ttu-id="34466-258">Vstupní události často pocházet v párech, a s jedním se probublávání události a druhá je tunelové událostí.</span><span class="sxs-lookup"><span data-stu-id="34466-258">Input events often come in pairs, with one being the bubbling event and the other being the tunneling event.</span></span> <span data-ttu-id="34466-259">Například <xref:System.Windows.ContentElement.KeyDown> událostí a <xref:System.Windows.ContentElement.PreviewKeyDown> událost mít s dřívějším probublávání vstupní událost se stejným podpisem, a na kterou tunelové propojení vstupní události.</span><span class="sxs-lookup"><span data-stu-id="34466-259">For example, the <xref:System.Windows.ContentElement.KeyDown> event and the <xref:System.Windows.ContentElement.PreviewKeyDown> event have the same signature, with the former being the bubbling input event and the latter being the tunneling input event.</span></span> <span data-ttu-id="34466-260">V některých případech vstupních událostech mít pouze probublávání verze nebo možná jenom přímé směrované verze.</span><span class="sxs-lookup"><span data-stu-id="34466-260">Occasionally, input events only have a bubbling version, or perhaps only a direct routed version.</span></span> <span data-ttu-id="34466-261">Dokumentace směrované události témata křížovou podobné směrované události s další směrování strategie, pokud existují tyto směrované události a části na stránkách spravovaný odkaz vysvětlení směrování strategie každý směrované události.</span><span class="sxs-lookup"><span data-stu-id="34466-261">In the documentation, routed event topics cross-reference similar routed events with alternative routing strategies if such routed events exist, and sections in the managed reference pages clarify the routing strategy of each routed event.</span></span>  
  
 [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]<span data-ttu-id="34466-262"> vstupní události, které jsou v párech se implementují, aby akce jednoho uživatele ze vstupu, například stisknutí tlačítka myši, vyvolal obou směrované události, které odpovídá páru v pořadí.</span><span class="sxs-lookup"><span data-stu-id="34466-262"> input events that come in pairs are implemented so that a single user action from input, such as a mouse button press, will raise both routed events of the pair in sequence.</span></span> <span data-ttu-id="34466-263">Nejprve tunelu událost se vyvolá a přenáší jeho trasu.</span><span class="sxs-lookup"><span data-stu-id="34466-263">First, the tunneling event is raised and travels its route.</span></span> <span data-ttu-id="34466-264">Potom probublávání událost se vyvolá a přenáší jeho trasu.</span><span class="sxs-lookup"><span data-stu-id="34466-264">Then the bubbling event is raised and travels its route.</span></span> <span data-ttu-id="34466-265">Dvě události oznámena sdílet stejné instance dat události, protože <xref:System.Windows.UIElement.RaiseEvent%2A> volání metody v implementující třídu, která vyvolává událost probublávání naslouchá data události z události tunelového propojení a opětovně ji používá v nové události vyvolané.</span><span class="sxs-lookup"><span data-stu-id="34466-265">The two events literally share the same event data instance, because the <xref:System.Windows.UIElement.RaiseEvent%2A> method call in the implementing class that raises the bubbling event listens for the event data from the tunneling event and reuses it in the new raised event.</span></span> <span data-ttu-id="34466-266">Naslouchací procesy s obslužné rutiny pro tunelové událost mít první možnost označte směrované události zpracovává (třídu obslužné rutiny nejprve, pak instance obslužné rutiny).</span><span class="sxs-lookup"><span data-stu-id="34466-266">Listeners with handlers for the tunneling event have the first opportunity to mark the routed event handled (class handlers first, then instance handlers).</span></span> <span data-ttu-id="34466-267">Pokud element společně tunelového propojení směrování označena směrované události jako zpracování, data již zpracovává události se odesílají na probublávání události a uplatněny typické obslužné rutiny pro ekvivalentní šíření vstupních událostech.</span><span class="sxs-lookup"><span data-stu-id="34466-267">If an element along the tunneling route marked the routed event as handled, the already-handled event data is sent on for the bubbling event, and typical handlers attached for the equivalent bubbling input events will not be invoked.</span></span> <span data-ttu-id="34466-268">Pro vzdálené vzhledy bude, jako kdyby nebyl zpracovávaný probublávání událost i vyvolá.</span><span class="sxs-lookup"><span data-stu-id="34466-268">To outward appearances it will be as if the handled bubbling event has not even been raised.</span></span> <span data-ttu-id="34466-269">Toto chování zpracování je užitečné pro ovládací prvek skládání, může místo všech vstupů do testu na základě vstupních událostech nebo na základě fokus vstupní událostí, které ohlášeny vaší poslední ovládací prvek, nikoli jeho složené částí.</span><span class="sxs-lookup"><span data-stu-id="34466-269">This handling behavior is useful for control compositing, where you might want all hit-test based input events or focus-based input events to be reported by your final control, rather than its composite parts.</span></span> <span data-ttu-id="34466-270">Poslední ovládacího prvku je blíž ke kořenu v skládání a tedy možnost Třída zpracovat událost tunelu nejprve a případně "nahradit" Tento směrované události ovládacího prvku konkrétní události, jako součást kód, který zálohuje ovládacího prvku Třída.</span><span class="sxs-lookup"><span data-stu-id="34466-270">The final control element is closer to the root in the compositing, and therefore has the opportunity to class handle the tunneling event first and perhaps to "replace" that routed event with a more control-specific event, as part of the code that backs the control class.</span></span>  
  
 <span data-ttu-id="34466-271">Jako obrázek, jak vstupní události zpracování funguje podívejte se na následující příklad vstupní událost.</span><span class="sxs-lookup"><span data-stu-id="34466-271">As an illustration of how input event processing works, consider the following input event example.</span></span> <span data-ttu-id="34466-272">Na následujícím obrázku stromu `leaf element #2` je zdrojem i `PreviewMouseDown` a potom `MouseDown` událostí.</span><span class="sxs-lookup"><span data-stu-id="34466-272">In the following tree illustration, `leaf element #2` is the source of both a `PreviewMouseDown` and then a `MouseDown` event.</span></span>  
  
 <span data-ttu-id="34466-273">![Diagram směrování událostí](../../../../docs/framework/wpf/advanced/media/wcsdkcoreinputevents.png "wcsdkCoreInputEvents")</span><span class="sxs-lookup"><span data-stu-id="34466-273">![Event routing diagram](../../../../docs/framework/wpf/advanced/media/wcsdkcoreinputevents.png "wcsdkCoreInputEvents")</span></span>  
<span data-ttu-id="34466-274">Vstupní událost šíření a tunelové propojení</span><span class="sxs-lookup"><span data-stu-id="34466-274">Input Event Bubbling and Tunneling</span></span>  
  
 <span data-ttu-id="34466-275">Pořadí zpracování události je následující:</span><span class="sxs-lookup"><span data-stu-id="34466-275">The order of event processing is as follows:</span></span>  
  
1.  <span data-ttu-id="34466-276">`PreviewMouseDown` (tunelu) na kořenový element.</span><span class="sxs-lookup"><span data-stu-id="34466-276">`PreviewMouseDown` (tunnel) on root element.</span></span>  
  
2.  <span data-ttu-id="34466-277">`PreviewMouseDown` (tunelu) na zprostředkující prvek #1.</span><span class="sxs-lookup"><span data-stu-id="34466-277">`PreviewMouseDown` (tunnel) on intermediate element #1.</span></span>  
  
3.  <span data-ttu-id="34466-278">`PreviewMouseDown` (tunelu) na element source #. 2.</span><span class="sxs-lookup"><span data-stu-id="34466-278">`PreviewMouseDown` (tunnel) on source element #2.</span></span>  
  
4.  <span data-ttu-id="34466-279">`MouseDown` (bublinový) na element source #. 2.</span><span class="sxs-lookup"><span data-stu-id="34466-279">`MouseDown` (bubble) on source element #2.</span></span>  
  
5.  <span data-ttu-id="34466-280">`MouseDown` (bublinový) na zprostředkující prvek #1.</span><span class="sxs-lookup"><span data-stu-id="34466-280">`MouseDown` (bubble) on intermediate element #1.</span></span>  
  
6.  <span data-ttu-id="34466-281">`MouseDown` (bublinový) na kořenový element.</span><span class="sxs-lookup"><span data-stu-id="34466-281">`MouseDown` (bubble) on root element.</span></span>  
  
 <span data-ttu-id="34466-282">Obslužná rutina delegáta směrované události odkazuje na dva objekty: objekt, který vyvolá událost a objekt, kde byla vyvolána obslužná rutina.</span><span class="sxs-lookup"><span data-stu-id="34466-282">A routed event handler delegate provides references to two objects: the object that raised the event and the object where the handler was invoked.</span></span> <span data-ttu-id="34466-283">Objekt, kde byla vyvolána obslužná rutina je objekt hlášené `sender` parametr.</span><span class="sxs-lookup"><span data-stu-id="34466-283">The object where the handler was invoked is the object reported by the `sender` parameter.</span></span> <span data-ttu-id="34466-284">Objekt, kde byla nejprve vyvolána událost je hlášen <xref:System.Windows.RoutedEventArgs.Source%2A> vlastnost v datech události.</span><span class="sxs-lookup"><span data-stu-id="34466-284">The object where the event was first raised is reported by the <xref:System.Windows.RoutedEventArgs.Source%2A> property in the event data.</span></span> <span data-ttu-id="34466-285">Směrované události stále můžete vyvolá a v takovém případě provádí stejný objekt `sender` a <xref:System.Windows.RoutedEventArgs.Source%2A> jsou identické (což je případ s kroky 3 a 4 události zpracování seznam příkladů).</span><span class="sxs-lookup"><span data-stu-id="34466-285">A routed event can still be raised and handled by the same object, in which case `sender` and <xref:System.Windows.RoutedEventArgs.Source%2A> are identical (this is the case with Steps 3 and 4 in the event processing example list).</span></span>  
  
 <span data-ttu-id="34466-286">Z důvodu tunelové propojení a šíření, nadřazené elementy přijímat vstupní události kde <xref:System.Windows.RoutedEventArgs.Source%2A> je jedním z jejich podřízené elementy.</span><span class="sxs-lookup"><span data-stu-id="34466-286">Because of tunneling and bubbling, parent elements receive input events where the <xref:System.Windows.RoutedEventArgs.Source%2A> is one of their child elements.</span></span> <span data-ttu-id="34466-287">Pokud je důležité vědět, co je source element, můžete identifikovat source element díky přístupu k <xref:System.Windows.RoutedEventArgs.Source%2A> vlastnost.</span><span class="sxs-lookup"><span data-stu-id="34466-287">When it is important to know what the source element is, you can identify the source element by accessing the <xref:System.Windows.RoutedEventArgs.Source%2A> property.</span></span>  
  
 <span data-ttu-id="34466-288">Obvykle když je označen vstupní událost <xref:System.Windows.RoutedEventArgs.Handled%2A>, další nejsou vyvolat obslužné rutiny.</span><span class="sxs-lookup"><span data-stu-id="34466-288">Usually, once the input event is marked <xref:System.Windows.RoutedEventArgs.Handled%2A>, further handlers are not invoked.</span></span> <span data-ttu-id="34466-289">Obvykle byste měli označit vstupních událostech jako zpracování co nejrychleji obslužná rutina je volána, která řeší vaše logické zpracování význam vstupní události specifické pro aplikaci.</span><span class="sxs-lookup"><span data-stu-id="34466-289">Typically, you should mark input events as handled as soon as a handler is invoked that addresses your application-specific logical handling of the meaning of the input event.</span></span>  
  
 <span data-ttu-id="34466-290">Výjimka, která má toto obecných údajů o <xref:System.Windows.RoutedEventArgs.Handled%2A> stavu je, zadejte obslužné rutiny událostí, které jsou registrovány úmyslně Ignorovat <xref:System.Windows.RoutedEventArgs.Handled%2A> stav data události by stále vyvolat buď trase.</span><span class="sxs-lookup"><span data-stu-id="34466-290">The exception to this general statement about <xref:System.Windows.RoutedEventArgs.Handled%2A> state is that input event handlers that are registered to deliberately ignore <xref:System.Windows.RoutedEventArgs.Handled%2A> state of the event data would still be invoked along either route.</span></span> <span data-ttu-id="34466-291">Další informace najdete v tématu [události náhledu](../../../../docs/framework/wpf/advanced/preview-events.md) nebo [označení směrované události jako Handled a třída zpracování](../../../../docs/framework/wpf/advanced/marking-routed-events-as-handled-and-class-handling.md).</span><span class="sxs-lookup"><span data-stu-id="34466-291">For more information, see [Preview Events](../../../../docs/framework/wpf/advanced/preview-events.md) or [Marking Routed Events as Handled, and Class Handling](../../../../docs/framework/wpf/advanced/marking-routed-events-as-handled-and-class-handling.md).</span></span>  
  
 <span data-ttu-id="34466-292">Datový model sdílené událostí mezi tunelového propojení a probublávání události a sekvenční vyvolání první tunelového propojení potom šíření události, není konceptu, které obvykle platí pro všechny směrované události.</span><span class="sxs-lookup"><span data-stu-id="34466-292">The shared event data model between tunneling and bubbling events, and the sequential raising of first tunneling then bubbling events, is not a concept that is generally true for all routed events.</span></span> <span data-ttu-id="34466-293">Konkrétně je chování implementované jak [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] vstupní zařízení rozhodnete vyvolávání a připojit páry vstupní událost.</span><span class="sxs-lookup"><span data-stu-id="34466-293">That behavior is specifically implemented by how [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] input devices choose to raise and connect the input event pairs.</span></span> <span data-ttu-id="34466-294">Implementace vstupní události je pokročilý scénář, ale můžete zvolit také postupujte podle tohoto modelu pro vstupní události.</span><span class="sxs-lookup"><span data-stu-id="34466-294">Implementing your own input events is an advanced scenario, but you might choose to follow that model for your own input events also.</span></span>  
  
 <span data-ttu-id="34466-295">Určité třídy zvolit třídu popisovač určité vstupní události, obvykle se záměrem opětovná definice určitá událost vstupu uživatele řízené znamená v rámci tohoto ovládacího prvku a vyvolání novou událost.</span><span class="sxs-lookup"><span data-stu-id="34466-295">Certain classes choose to class-handle certain input events, usually with the intent of redefining what a particular user-driven input event means within that control and raising a new event.</span></span> <span data-ttu-id="34466-296">Další informace najdete v tématu [označení směrované události jako Handled a třída zpracování](../../../../docs/framework/wpf/advanced/marking-routed-events-as-handled-and-class-handling.md).</span><span class="sxs-lookup"><span data-stu-id="34466-296">For more information, see [Marking Routed Events as Handled, and Class Handling](../../../../docs/framework/wpf/advanced/marking-routed-events-as-handled-and-class-handling.md).</span></span>  
  
 <span data-ttu-id="34466-297">Další informace o vstup a způsob interakce vstup a události v typických aplikačních scénářů, najdete v části [vstupní přehled](../../../../docs/framework/wpf/advanced/input-overview.md).</span><span class="sxs-lookup"><span data-stu-id="34466-297">For more information on input and how input and events interact in typical application scenarios, see [Input Overview](../../../../docs/framework/wpf/advanced/input-overview.md).</span></span>  
  
<a name="events_styles"></a>   
## <a name="eventsetters-and-eventtriggers"></a><span data-ttu-id="34466-298">EventSetters a EventTriggers</span><span class="sxs-lookup"><span data-stu-id="34466-298">EventSetters and EventTriggers</span></span>  
 <span data-ttu-id="34466-299">Styly, může obsahovat některé předem deklarovaná [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] zpracování syntaxe do kódu pomocí událostí <xref:System.Windows.EventSetter>.</span><span class="sxs-lookup"><span data-stu-id="34466-299">In styles, you can include some pre-declared [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] event handling syntax in the markup by using an <xref:System.Windows.EventSetter>.</span></span> <span data-ttu-id="34466-300">Při použití styl odkazované obslužná rutina se přidá do stylem instance.</span><span class="sxs-lookup"><span data-stu-id="34466-300">When the style is applied, the referenced handler is added to the styled instance.</span></span> <span data-ttu-id="34466-301">Je možné deklarovat <xref:System.Windows.EventSetter> pouze pro směrované události.</span><span class="sxs-lookup"><span data-stu-id="34466-301">You can declare an <xref:System.Windows.EventSetter> only for a routed event.</span></span> <span data-ttu-id="34466-302">Následuje příklad.</span><span class="sxs-lookup"><span data-stu-id="34466-302">The following is an example.</span></span> <span data-ttu-id="34466-303">Všimněte si, že `b1SetColor` metoda zde odkazuje je v souboru kódu na pozadí.</span><span class="sxs-lookup"><span data-stu-id="34466-303">Note that the `b1SetColor` method referenced here is in a code-behind file.</span></span>  
  
 [!code-xaml[EventOvwSupport#XAML2](../../../../samples/snippets/csharp/VS_Snippets_Wpf/EventOvwSupport/CSharp/page2.xaml#xaml2)]  
  
 <span data-ttu-id="34466-304">Výhoda získávají tady je, že styl není mohou obsahovat značnou část Další informace, které může použít pro žádné tlačítko v aplikaci, které mají <xref:System.Windows.EventSetter> být součástí této styl zvýší úroveň opakované použití kódu i na úrovni značek.</span><span class="sxs-lookup"><span data-stu-id="34466-304">The advantage gained here is that the style is likely to contain a great deal of other information that could apply to any button in your application, and having the <xref:System.Windows.EventSetter> be part of that style promotes code reuse even at the markup level.</span></span> <span data-ttu-id="34466-305">Navíc <xref:System.Windows.EventSetter> abstrahuje metoda názvy pro obslužné rutiny jediný krok další obecné kód aplikace a stránky.</span><span class="sxs-lookup"><span data-stu-id="34466-305">Also, an <xref:System.Windows.EventSetter> abstracts method names for handlers one step further away from the general application and page markup.</span></span>  
  
 <span data-ttu-id="34466-306">Jiné specializované syntaxi, která kombinuje směrované události a animace funkce [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] je <xref:System.Windows.EventTrigger>.</span><span class="sxs-lookup"><span data-stu-id="34466-306">Another specialized syntax that combines the routed event and animation features of [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] is an <xref:System.Windows.EventTrigger>.</span></span> <span data-ttu-id="34466-307">Stejně jako u <xref:System.Windows.EventSetter>, mohou být použity pouze směrované události pro <xref:System.Windows.EventTrigger>.</span><span class="sxs-lookup"><span data-stu-id="34466-307">As with <xref:System.Windows.EventSetter>, only routed events may be used for an <xref:System.Windows.EventTrigger>.</span></span> <span data-ttu-id="34466-308">Obvykle <xref:System.Windows.EventTrigger> je deklarován jako součást stylu, ale <xref:System.Windows.EventTrigger> lze také deklarovat u elementů na úrovni stránky v rámci <xref:System.Windows.FrameworkElement.Triggers%2A> kolekce, nebo v <xref:System.Windows.Controls.ControlTemplate>.</span><span class="sxs-lookup"><span data-stu-id="34466-308">Typically, an <xref:System.Windows.EventTrigger> is declared as part of a style, but an <xref:System.Windows.EventTrigger> can also be declared on page-level elements as part of the <xref:System.Windows.FrameworkElement.Triggers%2A> collection, or in a <xref:System.Windows.Controls.ControlTemplate>.</span></span> <span data-ttu-id="34466-309"><xref:System.Windows.EventTrigger> Umožňuje určit <xref:System.Windows.Media.Animation.Storyboard> , spustí vždy, když směrované události dosáhne prvku v jeho trasu, který deklaruje <xref:System.Windows.EventTrigger> pro tuto událost.</span><span class="sxs-lookup"><span data-stu-id="34466-309">An <xref:System.Windows.EventTrigger> enables you to specify a <xref:System.Windows.Media.Animation.Storyboard> that runs whenever a routed event reaches an element in its route that declares an <xref:System.Windows.EventTrigger> for that event.</span></span> <span data-ttu-id="34466-310">Výhodou <xref:System.Windows.EventTrigger> přes právě zpracování události a způsobuje tak, aby existující scénáře je, že <xref:System.Windows.EventTrigger> poskytuje lepší kontrolu nad scénáři a její chování.</span><span class="sxs-lookup"><span data-stu-id="34466-310">The advantage of an <xref:System.Windows.EventTrigger> over just handling the event and causing it to start an existing storyboard is that an <xref:System.Windows.EventTrigger> provides better control over the storyboard and its run-time behavior.</span></span> <span data-ttu-id="34466-311">Další informace najdete v tématu [aktivační události použít k řízení scénáře po jeho spuštění](../../../../docs/framework/wpf/graphics-multimedia/how-to-use-event-triggers-to-control-a-storyboard-after-it-starts.md).</span><span class="sxs-lookup"><span data-stu-id="34466-311">For more information, see [Use Event Triggers to Control a Storyboard After It Starts](../../../../docs/framework/wpf/graphics-multimedia/how-to-use-event-triggers-to-control-a-storyboard-after-it-starts.md).</span></span>  
  
<a name="more_about"></a>   
## <a name="more-about-routed-events"></a><span data-ttu-id="34466-312">Další informace o směrované události</span><span class="sxs-lookup"><span data-stu-id="34466-312">More About Routed Events</span></span>  
 <span data-ttu-id="34466-313">Toto téma popisuje především směrované události z perspektivy popisující se základními koncepty a nabízí pokyny o tom, a reagovat na směrované události, které jsou již k dispozici v různých základní elementy a ovládací prvky.</span><span class="sxs-lookup"><span data-stu-id="34466-313">This topic mainly discusses routed events from the perspective of describing the basic concepts and offering guidance on how and when to respond to the routed events that are already present in the various base elements and controls.</span></span> <span data-ttu-id="34466-314">Můžete však vytvořit vlastní směrované události na vaší třídě společně s všechny nezbytné podpory, jako jsou třídy dat specializované události a delegáti.</span><span class="sxs-lookup"><span data-stu-id="34466-314">However, you can create your own routed event on your custom class along with all the necessary support, such as specialized event data classes and delegates.</span></span> <span data-ttu-id="34466-315">Vlastník směrované události může být jakákoli třída, ale směrované události musí být aktivováno a zpracovává <xref:System.Windows.UIElement> nebo <xref:System.Windows.ContentElement> odvozené třídy, aby byla užitečná.</span><span class="sxs-lookup"><span data-stu-id="34466-315">The routed event owner can be any class, but routed events must be raised by and handled by <xref:System.Windows.UIElement> or <xref:System.Windows.ContentElement> derived classes in order to be useful.</span></span> <span data-ttu-id="34466-316">Další informace o vlastních událostí najdete v tématu [vytvořit vlastní směrované události](../../../../docs/framework/wpf/advanced/how-to-create-a-custom-routed-event.md).</span><span class="sxs-lookup"><span data-stu-id="34466-316">For more information about custom events, see [Create a Custom Routed Event](../../../../docs/framework/wpf/advanced/how-to-create-a-custom-routed-event.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="34466-317">Viz také</span><span class="sxs-lookup"><span data-stu-id="34466-317">See Also</span></span>  
 <xref:System.Windows.EventManager>  
 <xref:System.Windows.RoutedEvent>  
 <xref:System.Windows.RoutedEventArgs>  
 [<span data-ttu-id="34466-318">Označení směrovaných událostí jako zpracovaných a zpracování tříd</span><span class="sxs-lookup"><span data-stu-id="34466-318">Marking Routed Events as Handled, and Class Handling</span></span>](../../../../docs/framework/wpf/advanced/marking-routed-events-as-handled-and-class-handling.md)  
 [<span data-ttu-id="34466-319">Přehled vstupu</span><span class="sxs-lookup"><span data-stu-id="34466-319">Input Overview</span></span>](../../../../docs/framework/wpf/advanced/input-overview.md)  
 [<span data-ttu-id="34466-320">Přehled příkazů</span><span class="sxs-lookup"><span data-stu-id="34466-320">Commanding Overview</span></span>](../../../../docs/framework/wpf/advanced/commanding-overview.md)  
 [<span data-ttu-id="34466-321">Vlastní vlastnosti závislosti</span><span class="sxs-lookup"><span data-stu-id="34466-321">Custom Dependency Properties</span></span>](../../../../docs/framework/wpf/advanced/custom-dependency-properties.md)  
 [<span data-ttu-id="34466-322">Stromy v subsystému WPF</span><span class="sxs-lookup"><span data-stu-id="34466-322">Trees in WPF</span></span>](../../../../docs/framework/wpf/advanced/trees-in-wpf.md)  
 [<span data-ttu-id="34466-323">Slabé vzory událostí</span><span class="sxs-lookup"><span data-stu-id="34466-323">Weak Event Patterns</span></span>](../../../../docs/framework/wpf/advanced/weak-event-patterns.md)
