---
title: "Vzájemná spolupráce grafického subsystému WPF a systému Win32"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-wpf
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- hosting WPF content in Win32 window [WPF]
- HWND interop [WPF]
- Win32 code [WPF], WPF interoperation
- interoperability [WPF], Win32
ms.assetid: 0ffbde0d-701d-45a3-a6fa-dd71f4d9772e
caps.latest.revision: "26"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.workload: dotnet
ms.openlocfilehash: f762751da94d25a934d038c1da5adf4a7b88439b
ms.sourcegitcommit: 16186c34a957fdd52e5db7294f291f7530ac9d24
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 12/22/2017
---
# <a name="wpf-and-win32-interoperation"></a><span data-ttu-id="1c2df-102">Vzájemná spolupráce grafického subsystému WPF a systému Win32</span><span class="sxs-lookup"><span data-stu-id="1c2df-102">WPF and Win32 Interoperation</span></span>
<span data-ttu-id="1c2df-103">Toto téma obsahuje přehled o tom, jak zajistit vzájemnou funkční spolupráci [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] a [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] kódu.</span><span class="sxs-lookup"><span data-stu-id="1c2df-103">This topic provides an overview of how to interoperate [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] and [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] code.</span></span> [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)]<span data-ttu-id="1c2df-104">poskytuje bohaté prostředí pro vytváření aplikací.</span><span class="sxs-lookup"><span data-stu-id="1c2df-104"> provides a rich environment for creating applications.</span></span> <span data-ttu-id="1c2df-105">Pokud však máte významné investice [!INCLUDE[TLA#tla_win32](../../../../includes/tlasharptla-win32-md.md)] kódu, může být efektivnější opakovaně používat některé z tohoto kódu.</span><span class="sxs-lookup"><span data-stu-id="1c2df-105">However, when you have a substantial investment in [!INCLUDE[TLA#tla_win32](../../../../includes/tlasharptla-win32-md.md)] code, it might be more effective to reuse some of that code.</span></span>  
  

  
<a name="basics"></a>   
## <a name="wpf-and-win32-interoperation-basics"></a><span data-ttu-id="1c2df-106">WPF a součinnosti základy Win32</span><span class="sxs-lookup"><span data-stu-id="1c2df-106">WPF and Win32 Interoperation Basics</span></span>  
 <span data-ttu-id="1c2df-107">Existují dva základní postupy pro spolupráci mezi [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] a [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] kódu.</span><span class="sxs-lookup"><span data-stu-id="1c2df-107">There are two basic techniques for interoperation between [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] and [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] code.</span></span>  
  
-   <span data-ttu-id="1c2df-108">Hostitele [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] obsah [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] okno.</span><span class="sxs-lookup"><span data-stu-id="1c2df-108">Host [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] content in a [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] window.</span></span> <span data-ttu-id="1c2df-109">S touto technikou, můžete použít grafické pokročilé možnosti [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] v rámci standardní [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] okno a aplikace.</span><span class="sxs-lookup"><span data-stu-id="1c2df-109">With this technique, you can use the advanced graphics capabilities of [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] within the framework of a standard [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] window and application.</span></span>  
  
-   <span data-ttu-id="1c2df-110">Hostitele [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] okno v [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] obsahu.</span><span class="sxs-lookup"><span data-stu-id="1c2df-110">Host a [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] window in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] content.</span></span> <span data-ttu-id="1c2df-111">Tento postup můžete využít existující vlastní [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] ovládací prvek v rámci jiné [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] obsahu a předávání dat mezi hranice.</span><span class="sxs-lookup"><span data-stu-id="1c2df-111">With this technique, you can use an existing custom [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] control in the context of other [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] content, and pass data across the boundaries.</span></span>  
  
 <span data-ttu-id="1c2df-112">Každý z těchto postupů je koncepčně představenými v tomto tématu.</span><span class="sxs-lookup"><span data-stu-id="1c2df-112">Each of these techniques is conceptually introduced in this topic.</span></span> <span data-ttu-id="1c2df-113">A ukázky kódu více orientovaných na hostování [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] v [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)], najdete v části [návod: hostování obsahu WPF v Win32](../../../../docs/framework/wpf/advanced/walkthrough-hosting-wpf-content-in-win32.md).</span><span class="sxs-lookup"><span data-stu-id="1c2df-113">For a more code-oriented illustration of hosting [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] in [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)], see [Walkthrough: Hosting WPF Content in Win32](../../../../docs/framework/wpf/advanced/walkthrough-hosting-wpf-content-in-win32.md).</span></span> <span data-ttu-id="1c2df-114">A ukázky kódu více orientovaných na hostování [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] v [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], najdete v části [návod: hostování ovládacího prvku Win32 v grafickém subsystému WPF](../../../../docs/framework/wpf/advanced/walkthrough-hosting-a-win32-control-in-wpf.md).</span><span class="sxs-lookup"><span data-stu-id="1c2df-114">For a more code-oriented illustration of hosting [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], see [Walkthrough: Hosting a Win32 Control in WPF](../../../../docs/framework/wpf/advanced/walkthrough-hosting-a-win32-control-in-wpf.md).</span></span>  
  
<a name="projects"></a>   
## <a name="wpf-interoperation-projects"></a><span data-ttu-id="1c2df-115">Projekty součinnosti WPF</span><span class="sxs-lookup"><span data-stu-id="1c2df-115">WPF Interoperation Projects</span></span>  
 [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]<span data-ttu-id="1c2df-116">[!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)] spravovaného kódu, ale většina existující [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] programy jsou zapsány v nespravované [!INCLUDE[TLA2#tla_cpp](../../../../includes/tla2sharptla-cpp-md.md)].</span><span class="sxs-lookup"><span data-stu-id="1c2df-116"> [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)] are managed code, but most existing [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] programs are written in unmanaged [!INCLUDE[TLA2#tla_cpp](../../../../includes/tla2sharptla-cpp-md.md)].</span></span>  <span data-ttu-id="1c2df-117">Nelze volat [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)] ze skutečného nespravované programu.</span><span class="sxs-lookup"><span data-stu-id="1c2df-117">You cannot call [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)] from a true unmanaged program.</span></span> <span data-ttu-id="1c2df-118">Avšak pomocí `/clr` možnost s [!INCLUDE[TLA#tla_visualcpp](../../../../includes/tlasharptla-visualcpp-md.md)] kompilátoru, můžete vytvořit smíšené spravované nespravované program kde je možné bezproblémově kombinovat spravovaných a nespravovaných [!INCLUDE[TLA2#tla_api](../../../../includes/tla2sharptla-api-md.md)] volání.</span><span class="sxs-lookup"><span data-stu-id="1c2df-118">However, by using the `/clr` option with the [!INCLUDE[TLA#tla_visualcpp](../../../../includes/tlasharptla-visualcpp-md.md)] compiler, you can create a mixed managed-unmanaged program where you can seamlessly mix managed and unmanaged [!INCLUDE[TLA2#tla_api](../../../../includes/tla2sharptla-api-md.md)] calls.</span></span>  
  
 <span data-ttu-id="1c2df-119">Jeden komplikace úrovni projektu je, nelze zkompilovat [!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)] soubory do [!INCLUDE[TLA2#tla_cpp](../../../../includes/tla2sharptla-cpp-md.md)] projektu.</span><span class="sxs-lookup"><span data-stu-id="1c2df-119">One project-level complication is that you cannot compile [!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)] files into a [!INCLUDE[TLA2#tla_cpp](../../../../includes/tla2sharptla-cpp-md.md)] project.</span></span>  <span data-ttu-id="1c2df-120">Existuje několik postupů dělení projektu kompenzovat to.</span><span class="sxs-lookup"><span data-stu-id="1c2df-120">There are several project division techniques to compensate for this.</span></span>  
  
-   <span data-ttu-id="1c2df-121">Vytvoření [!INCLUDE[TLA2#tla_cshrp](../../../../includes/tla2sharptla-cshrp-md.md)] knihovny DLL, která obsahuje všechny vaše [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] stránky jako kompilované sestavení a tak vaše [!INCLUDE[TLA2#tla_cpp](../../../../includes/tla2sharptla-cpp-md.md)] zahrnují spustitelný soubor, který [!INCLUDE[TLA2#tla_dll](../../../../includes/tla2sharptla-dll-md.md)] jako odkaz.</span><span class="sxs-lookup"><span data-stu-id="1c2df-121">Create a [!INCLUDE[TLA2#tla_cshrp](../../../../includes/tla2sharptla-cshrp-md.md)] DLL that contains all your [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] pages as a compiled assembly, and then have your [!INCLUDE[TLA2#tla_cpp](../../../../includes/tla2sharptla-cpp-md.md)] executable include that [!INCLUDE[TLA2#tla_dll](../../../../includes/tla2sharptla-dll-md.md)] as a reference.</span></span>  
  
-   <span data-ttu-id="1c2df-122">Vytvoření [!INCLUDE[TLA2#tla_cshrp](../../../../includes/tla2sharptla-cshrp-md.md)] spustitelný soubor pro [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] obsahu a mějte ho odkazovat [!INCLUDE[TLA2#tla_cpp](../../../../includes/tla2sharptla-cpp-md.md)] [!INCLUDE[TLA2#tla_dll](../../../../includes/tla2sharptla-dll-md.md)] obsahující [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] obsah.</span><span class="sxs-lookup"><span data-stu-id="1c2df-122">Create a [!INCLUDE[TLA2#tla_cshrp](../../../../includes/tla2sharptla-cshrp-md.md)] executable for the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] content, and have it reference a [!INCLUDE[TLA2#tla_cpp](../../../../includes/tla2sharptla-cpp-md.md)] [!INCLUDE[TLA2#tla_dll](../../../../includes/tla2sharptla-dll-md.md)] that contains the [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] content.</span></span>  
  
-   <span data-ttu-id="1c2df-123">Použití <xref:System.Windows.Markup.XamlReader.Load%2A> načíst všechny [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] za běhu, místo kompilování vaší [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)].</span><span class="sxs-lookup"><span data-stu-id="1c2df-123">Use <xref:System.Windows.Markup.XamlReader.Load%2A> to load any [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] at run time, instead of compiling your [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)].</span></span>  
  
-   <span data-ttu-id="1c2df-124">Nepoužívejte [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] vůbec a zapisovat všechny vaše [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] v kódu, vytváření nahoru k element z <xref:System.Windows.Application>.</span><span class="sxs-lookup"><span data-stu-id="1c2df-124">Do not use [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] at all, and write all your [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] in code, building up the element tree from <xref:System.Windows.Application>.</span></span>  
  
 <span data-ttu-id="1c2df-125">Použijte libovolnou metodu vám nejvíce vyhovuje.</span><span class="sxs-lookup"><span data-stu-id="1c2df-125">Use whatever approach works best for you.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="1c2df-126">Pokud jste nepoužili [!INCLUDE[TLA#tla_cppcli](../../../../includes/tlasharptla-cppcli-md.md)] před, možná jste si všimli některé "new" klíčová slova, jako `gcnew` a `nullptr` v příkladech součinnosti kódu.</span><span class="sxs-lookup"><span data-stu-id="1c2df-126">If you have not used [!INCLUDE[TLA#tla_cppcli](../../../../includes/tlasharptla-cppcli-md.md)] before, you might notice some "new" keywords such as `gcnew` and `nullptr` in the interoperation code examples.</span></span> <span data-ttu-id="1c2df-127">Tato klíčová slova nahrazují starší syntaxe dvojité podtržítko (`__gc`) a poskytují více fyzických syntaxi pro spravovaný kód v [!INCLUDE[TLA2#tla_cpp](../../../../includes/tla2sharptla-cpp-md.md)].</span><span class="sxs-lookup"><span data-stu-id="1c2df-127">These keywords supersede the older double-underscore syntax (`__gc`) and provide a more natural syntax for managed code in [!INCLUDE[TLA2#tla_cpp](../../../../includes/tla2sharptla-cpp-md.md)].</span></span>  <span data-ttu-id="1c2df-128">Další informace o [!INCLUDE[TLA#tla_cppcli](../../../../includes/tlasharptla-cppcli-md.md)] spravované funkce, najdete na [rozšíření komponent pro platformy běhového prostředí](/cpp/windows/component-extensions-for-runtime-platforms) a [Hello, C + +/ CLI](http://go.microsoft.com/fwlink/?LinkId=98739).</span><span class="sxs-lookup"><span data-stu-id="1c2df-128">To learn more about the [!INCLUDE[TLA#tla_cppcli](../../../../includes/tlasharptla-cppcli-md.md)] managed features, see [Component Extensions for Runtime Platforms](/cpp/windows/component-extensions-for-runtime-platforms) and [Hello, C++/CLI](http://go.microsoft.com/fwlink/?LinkId=98739).</span></span>  
  
<a name="hwnds"></a>   
## <a name="how-wpf-uses-hwnds"></a><span data-ttu-id="1c2df-129">Jak WPF používá hWnd</span><span class="sxs-lookup"><span data-stu-id="1c2df-129">How WPF Uses Hwnds</span></span>  
 <span data-ttu-id="1c2df-130">Aby nejvíc z [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] "HWND zprostředkovatel komunikace s objekty", musíte pochopit, jak [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] používá HWND.</span><span class="sxs-lookup"><span data-stu-id="1c2df-130">To make the most of [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] "HWND interop", you need to understand how [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] uses HWNDs.</span></span> <span data-ttu-id="1c2df-131">Pro všechny HWND není možné kombinovat [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] vykreslování pomocí [!INCLUDE[TLA2#tla_dx](../../../../includes/tla2sharptla-dx-md.md)] vykreslování nebo [!INCLUDE[TLA2#tla_gdi](../../../../includes/tla2sharptla-gdi-md.md)]  /  [!INCLUDE[TLA2#tla_gdiplus](../../../../includes/tla2sharptla-gdiplus-md.md)] vykreslování.</span><span class="sxs-lookup"><span data-stu-id="1c2df-131">For any HWND, you cannot mix [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] rendering with [!INCLUDE[TLA2#tla_dx](../../../../includes/tla2sharptla-dx-md.md)] rendering or [!INCLUDE[TLA2#tla_gdi](../../../../includes/tla2sharptla-gdi-md.md)] / [!INCLUDE[TLA2#tla_gdiplus](../../../../includes/tla2sharptla-gdiplus-md.md)] rendering.</span></span> <span data-ttu-id="1c2df-132">To má číslo dopadů.</span><span class="sxs-lookup"><span data-stu-id="1c2df-132">This has a number of implications.</span></span> <span data-ttu-id="1c2df-133">Především se stává aby bylo možné kombinovat tyto modely vykreslování vůbec, musíte vytvořit součinnosti řešení a použít určené segmenty vzájemná spolupráce pro každý model vykreslování, který chcete použít.</span><span class="sxs-lookup"><span data-stu-id="1c2df-133">Primarily, in order to mix these rendering models at all, you must create an interoperation solution, and use designated segments of interoperation for each rendering model that you choose to use.</span></span> <span data-ttu-id="1c2df-134">Chování vykreslování také vytvoří "vzdušného prostoru" omezení pro co můžete provádět součinnosti řešení.</span><span class="sxs-lookup"><span data-stu-id="1c2df-134">Also, the rendering behavior creates an "airspace" restriction for what your interoperation solution can accomplish.</span></span> <span data-ttu-id="1c2df-135">Koncept "vzdušného prostoru" je vysvětlené podrobněji v tématu [oblasti Přehled technologie](../../../../docs/framework/wpf/advanced/technology-regions-overview.md).</span><span class="sxs-lookup"><span data-stu-id="1c2df-135">The "airspace" concept is explained in greater detail in the topic [Technology Regions Overview](../../../../docs/framework/wpf/advanced/technology-regions-overview.md).</span></span>  
  
 <span data-ttu-id="1c2df-136">Všechny [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] jsou elementy na obrazovce zajišťované HWND.</span><span class="sxs-lookup"><span data-stu-id="1c2df-136">All [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] elements on the screen are ultimately backed by a HWND.</span></span> <span data-ttu-id="1c2df-137">Při vytváření [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] <xref:System.Windows.Window>, [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] vytvoří nejvyšší úrovně HWND a použije <xref:System.Windows.Interop.HwndSource> se umístí <xref:System.Windows.Window> a jeho [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] obsahu uvnitř HWND.</span><span class="sxs-lookup"><span data-stu-id="1c2df-137">When you create a [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] <xref:System.Windows.Window>, [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] creates a top-level HWND, and uses an <xref:System.Windows.Interop.HwndSource> to put the <xref:System.Windows.Window> and its [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] content inside the HWND.</span></span>  <span data-ttu-id="1c2df-138">Zbytek vaší [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] této singulární HWND sdílí obsahu v aplikaci.</span><span class="sxs-lookup"><span data-stu-id="1c2df-138">The rest of your [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] content in the application shares that singular HWND.</span></span> <span data-ttu-id="1c2df-139">Výjimkou je nabídek, rozevírací nabídky pole se seznamem a dalších automaticky otevíraná okna.</span><span class="sxs-lookup"><span data-stu-id="1c2df-139">An exception is menus, combo box drop downs, and other pop-ups.</span></span> <span data-ttu-id="1c2df-140">Tyto prvky vytvořit své vlastní nejvyšší úrovně okno, které je důvod, proč [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] nabídky může potenciálně přejděte po okraji okna HWND, který jej obsahuje.</span><span class="sxs-lookup"><span data-stu-id="1c2df-140">These elements create their own top-level window, which is why a [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] menu can potentially go past the edge of the window HWND that contains it.</span></span> <span data-ttu-id="1c2df-141">Při použití <xref:System.Windows.Interop.HwndHost> uvést popisovačem HWND uvnitř [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] informuje [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] postup umístit do nové relativního HWND podřízené [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] <xref:System.Windows.Window> HWND.</span><span class="sxs-lookup"><span data-stu-id="1c2df-141">When you use <xref:System.Windows.Interop.HwndHost> to put an HWND inside [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] informs [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] how to position the new child HWND relative to the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] <xref:System.Windows.Window> HWND.</span></span>  
  
 <span data-ttu-id="1c2df-142">Související koncept jako HWND je průhlednost v rámci a mezi každou HWND.</span><span class="sxs-lookup"><span data-stu-id="1c2df-142">A related concept to HWND is transparency within and between each HWND.</span></span> <span data-ttu-id="1c2df-143">To je také popsané v tématu [oblasti Přehled technologie](../../../../docs/framework/wpf/advanced/technology-regions-overview.md).</span><span class="sxs-lookup"><span data-stu-id="1c2df-143">This is also discussed in the topic [Technology Regions Overview](../../../../docs/framework/wpf/advanced/technology-regions-overview.md).</span></span>  
  
<a name="hosting_a_wpf_page"></a>   
## <a name="hosting-wpf-content-in-a-microsoft-win32-window"></a><span data-ttu-id="1c2df-144">Hostování obsahu subsystému WPF v okně Microsoft Win32</span><span class="sxs-lookup"><span data-stu-id="1c2df-144">Hosting WPF Content in a Microsoft Win32 Window</span></span>  
 <span data-ttu-id="1c2df-145">Klíč k hostování [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] na [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] je okno <xref:System.Windows.Interop.HwndSource> třídy.</span><span class="sxs-lookup"><span data-stu-id="1c2df-145">The key to hosting a [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] on a [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] window is the <xref:System.Windows.Interop.HwndSource> class.</span></span> <span data-ttu-id="1c2df-146">Zabalí tuto třídu [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] obsahu v [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] okně tak, aby [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] obsahu lze začlenit do vaší [!INCLUDE[TLA#tla_ui](../../../../includes/tlasharptla-ui-md.md)] jako podřízeného okna.</span><span class="sxs-lookup"><span data-stu-id="1c2df-146">This class wraps the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] content in a [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] window, so that the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] content can be incorporated into your [!INCLUDE[TLA#tla_ui](../../../../includes/tlasharptla-ui-md.md)] as a child window.</span></span> <span data-ttu-id="1c2df-147">Následující metoda kombinuje [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] a [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] v jedné aplikaci.</span><span class="sxs-lookup"><span data-stu-id="1c2df-147">The following approach combines the [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] and [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] in a single application.</span></span>  
  
1.  <span data-ttu-id="1c2df-148">Implementace vaší [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] obsahu (obsah kořenový element) jako spravované třídy.</span><span class="sxs-lookup"><span data-stu-id="1c2df-148">Implement your [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] content (the content root element) as a managed class.</span></span> <span data-ttu-id="1c2df-149">Obvykle třídy dědí z jednoho z třídy, které může obsahovat více podřízených elementů nebo použít jako kořenový element, jako například <xref:System.Windows.Controls.DockPanel> nebo <xref:System.Windows.Controls.Page>.</span><span class="sxs-lookup"><span data-stu-id="1c2df-149">Typically, the class inherits from one of the classes that can contain multiple child elements and/or used as a root element, such as <xref:System.Windows.Controls.DockPanel> or <xref:System.Windows.Controls.Page>.</span></span> <span data-ttu-id="1c2df-150">V dalších krocích, tato třída se označuje jako [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] obsahu třídy a instance této třídy jsou označovány jako [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] obsahu objektů.</span><span class="sxs-lookup"><span data-stu-id="1c2df-150">In subsequent steps, this class is referred to as the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] content class, and instances of the class are referred to as [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] content objects.</span></span>  
  
2.  <span data-ttu-id="1c2df-151">Implementace [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] aplikace s [!INCLUDE[TLA2#tla_cppcli](../../../../includes/tla2sharptla-cppcli-md.md)].</span><span class="sxs-lookup"><span data-stu-id="1c2df-151">Implement a [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] application with [!INCLUDE[TLA2#tla_cppcli](../../../../includes/tla2sharptla-cppcli-md.md)].</span></span> <span data-ttu-id="1c2df-152">Pokud začínáte s existujícím nespravované [!INCLUDE[TLA2#tla_cpp](../../../../includes/tla2sharptla-cpp-md.md)] aplikace, můžete obvykle ho povolit volání spravovaného kódu změnou nastavení projektu zahrnout `/clr` kompilátoru příznak (v plném rozsahu co může být nezbytné pro podporu `/clr`kompilace není popsaných v tomto tématu).</span><span class="sxs-lookup"><span data-stu-id="1c2df-152">If you are starting with an existing unmanaged [!INCLUDE[TLA2#tla_cpp](../../../../includes/tla2sharptla-cpp-md.md)] application, you can usually enable it to call managed code by changing your project settings to include the `/clr` compiler flag (the full scope of what might be necessary to support `/clr` compilation is not described in this topic).</span></span>  
  
3.  <span data-ttu-id="1c2df-153">Nastavte modelu vláken pro Threaded Apartment STA (Single).</span><span class="sxs-lookup"><span data-stu-id="1c2df-153">Set the threading model to Single Threaded Apartment (STA).</span></span> [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]<span data-ttu-id="1c2df-154">používá tento model vláken.</span><span class="sxs-lookup"><span data-stu-id="1c2df-154"> uses this threading model.</span></span>  
  
4.  <span data-ttu-id="1c2df-155">Zpracování oznámení WM_CREATE v procedury okna.</span><span class="sxs-lookup"><span data-stu-id="1c2df-155">Handle the WM_CREATE notification in your window procedure.</span></span>  
  
5.  <span data-ttu-id="1c2df-156">V rámci obslužná rutina (nebo funkci, která volá obslužnou rutinu) postupujte takto:</span><span class="sxs-lookup"><span data-stu-id="1c2df-156">Within the handler (or a function that the handler calls), do the following:</span></span>  
  
    1.  <span data-ttu-id="1c2df-157">Vytvořte novou <xref:System.Windows.Interop.HwndSource> objekt s nadřazeného okna HWND jako jeho `parent` parametr.</span><span class="sxs-lookup"><span data-stu-id="1c2df-157">Create a new <xref:System.Windows.Interop.HwndSource> object with the parent window HWND as its `parent` parameter.</span></span>  
  
    2.  <span data-ttu-id="1c2df-158">Vytvoření instance vaší [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] obsahu třídy.</span><span class="sxs-lookup"><span data-stu-id="1c2df-158">Create an instance of your [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] content class.</span></span>  
  
    3.  <span data-ttu-id="1c2df-159">Přiřaďte odkaz na [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] obsahu objekt, který má <xref:System.Windows.Interop.HwndSource> objektu <xref:System.Windows.Interop.HwndSource.RootVisual%2A> vlastnost.</span><span class="sxs-lookup"><span data-stu-id="1c2df-159">Assign a reference to the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] content object to the <xref:System.Windows.Interop.HwndSource> object <xref:System.Windows.Interop.HwndSource.RootVisual%2A> property.</span></span>  
  
    4.  <span data-ttu-id="1c2df-160"><xref:System.Windows.Interop.HwndSource> Objektu <xref:System.Windows.Interop.HwndSource.Handle%2A> vlastnost obsahuje popisovač okna (HWND).</span><span class="sxs-lookup"><span data-stu-id="1c2df-160">The <xref:System.Windows.Interop.HwndSource> object <xref:System.Windows.Interop.HwndSource.Handle%2A> property contains the window handle (HWND).</span></span> <span data-ttu-id="1c2df-161">Pokud chcete popisovačem HWND, který můžete použít v nespravované součástí aplikace, přetypujte `Handle.ToPointer()` k popisovačem HWND.</span><span class="sxs-lookup"><span data-stu-id="1c2df-161">To get an HWND that you can use in the unmanaged part of your application, cast `Handle.ToPointer()` to an HWND.</span></span>  
  
6.  <span data-ttu-id="1c2df-162">Implementace spravovaných třídu, která obsahuje statické pole, která obsahuje odkaz na vaši [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] objekt obsahu.</span><span class="sxs-lookup"><span data-stu-id="1c2df-162">Implement a managed class that contains a static field that holds a reference to your [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] content object.</span></span> <span data-ttu-id="1c2df-163">Tato třída umožňuje získat odkaz na [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] objekt obsahu z vašeho [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] kód, ale informace je nejdůležitější zabrání vaší <xref:System.Windows.Interop.HwndSource> nebudou neúmyslně uvolnění z paměti.</span><span class="sxs-lookup"><span data-stu-id="1c2df-163">This class allows you to get a reference to the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] content object from your [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] code, but more importantly it prevents your <xref:System.Windows.Interop.HwndSource> from being inadvertently garbage collected.</span></span>  
  
7.  <span data-ttu-id="1c2df-164">Příjem oznámení z [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] objekt obsahu připojením obslužné rutiny na jeden nebo více [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] obsahu události objektu.</span><span class="sxs-lookup"><span data-stu-id="1c2df-164">Receive notifications from the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] content object by attaching a handler to one or more of the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] content object events.</span></span>  
  
8.  <span data-ttu-id="1c2df-165">Komunikovat s [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] objekt obsahu pomocí odkazu, který je uložený v statické pole, které chcete nastavit vlastnosti volání metody, atd.</span><span class="sxs-lookup"><span data-stu-id="1c2df-165">Communicate with the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] content object by using the reference that you stored in the static field to set properties, call methods, etc.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="1c2df-166">Můžete provést některé nebo všechny [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] obsahu jeden krok v definici třídy [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] pomocí výchozí třídu obsahu třídy, je-li vytvořit samostatné sestavení a potom na něj odkazovat.</span><span class="sxs-lookup"><span data-stu-id="1c2df-166">You can do some or all of the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] content class definition for Step One in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] using the default partial class of the content class, if you produce a separate assembly and then reference it.</span></span> <span data-ttu-id="1c2df-167">I když obvykle zahrnují <xref:System.Windows.Application> objekt v rámci kompilování [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] do sestavení, není skončili pomocí, který <xref:System.Windows.Application> jako součást vzájemná spolupráce, pouze použijete jeden nebo více tříd kořenové [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] označuje soubory pro aplikace a odkazovat na jejich částečné třídy.</span><span class="sxs-lookup"><span data-stu-id="1c2df-167">Although you typically include an <xref:System.Windows.Application> object as part of compiling the [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] into an assembly, you do not end up using that <xref:System.Windows.Application> as part of the interoperation, you just use one or more of the root classes for [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] files referred to by the application and reference their partial classes.</span></span> <span data-ttu-id="1c2df-168">Zbytek procesu je v podstatě podobná uvedených výše.</span><span class="sxs-lookup"><span data-stu-id="1c2df-168">The remainder of the procedure is essentially similar to that outlined above.</span></span>  
>   
>  <span data-ttu-id="1c2df-169">Každý z těchto kroků je zobrazená prostřednictvím kódu v tomto tématu [návod: hostování obsahu WPF v Win32](../../../../docs/framework/wpf/advanced/walkthrough-hosting-wpf-content-in-win32.md).</span><span class="sxs-lookup"><span data-stu-id="1c2df-169">Each of these steps is illustrated through code in the topic [Walkthrough: Hosting WPF Content in Win32](../../../../docs/framework/wpf/advanced/walkthrough-hosting-wpf-content-in-win32.md).</span></span>  
  
<a name="hosting_an_hwnd"></a>   
## <a name="hosting-a-microsoft-win32-window-in-wpf"></a><span data-ttu-id="1c2df-170">Hostování okno Microsoft Win32 v grafickém subsystému WPF</span><span class="sxs-lookup"><span data-stu-id="1c2df-170">Hosting a Microsoft Win32 Window in WPF</span></span>  
 <span data-ttu-id="1c2df-171">Klíč k hostování [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] okně v rámci jiné [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] obsah je <xref:System.Windows.Interop.HwndHost> třídy.</span><span class="sxs-lookup"><span data-stu-id="1c2df-171">The key to hosting a [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] window within other [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] content is the <xref:System.Windows.Interop.HwndHost> class.</span></span> <span data-ttu-id="1c2df-172">Tato třída zabalí okno v [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] element, který lze přidat do [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] element stromu.</span><span class="sxs-lookup"><span data-stu-id="1c2df-172">This class wraps the window in a [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] element which can be added to a [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] element tree.</span></span> <span data-ttu-id="1c2df-173"><xref:System.Windows.Interop.HwndHost>podporuje také [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)] , abyste mohli provádět úlohy, jako jsou zpracování zpráv pro hostované okno Povolit.</span><span class="sxs-lookup"><span data-stu-id="1c2df-173"><xref:System.Windows.Interop.HwndHost> also supports [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)] that allow you to do such tasks as process messages for the hosted window.</span></span> <span data-ttu-id="1c2df-174">Základní postup je:</span><span class="sxs-lookup"><span data-stu-id="1c2df-174">The basic procedure is:</span></span>  
  
1.  <span data-ttu-id="1c2df-175">Ve stromu element pro vytvoření [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] aplikace (může být prostřednictvím kódu nebo značek).</span><span class="sxs-lookup"><span data-stu-id="1c2df-175">Create an element tree for a [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] application (can be through code or markup).</span></span> <span data-ttu-id="1c2df-176">Ve stromové struktuře element vyhledejte odpovídající a povolenou bod kde <xref:System.Windows.Interop.HwndHost> implementace se dá přidat jako podřízený element.</span><span class="sxs-lookup"><span data-stu-id="1c2df-176">Find an appropriate and permissible point in the element tree where the <xref:System.Windows.Interop.HwndHost> implementation can be added as a child element.</span></span> <span data-ttu-id="1c2df-177">Ve zbývající části tyto kroky tento element se označuje jako rezervace element.</span><span class="sxs-lookup"><span data-stu-id="1c2df-177">In the remainder of these steps, this element is referred to as the reserving element.</span></span>  
  
2.  <span data-ttu-id="1c2df-178">Odvozena od <xref:System.Windows.Interop.HwndHost> vytvořit objekt, který obsahuje vaše [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] obsah.</span><span class="sxs-lookup"><span data-stu-id="1c2df-178">Derive from <xref:System.Windows.Interop.HwndHost> to create an object that holds your [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] content.</span></span>  
  
3.  <span data-ttu-id="1c2df-179">V této třídě hostitele přepsat <xref:System.Windows.Interop.HwndHost> metoda <xref:System.Windows.Interop.HwndHost.BuildWindowCore%2A>.</span><span class="sxs-lookup"><span data-stu-id="1c2df-179">In that host class, override the <xref:System.Windows.Interop.HwndHost> method <xref:System.Windows.Interop.HwndHost.BuildWindowCore%2A>.</span></span> <span data-ttu-id="1c2df-180">Vrátí HWND hostované okna.</span><span class="sxs-lookup"><span data-stu-id="1c2df-180">Return the HWND of the hosted window.</span></span> <span data-ttu-id="1c2df-181">Můžete chtít zabalení skutečné požadovaný jako podřízeného okna okna vrácený; obtékání ovládacích prvků v okně hostitel poskytuje jednoduchý způsob pro váš [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] obsahu pro příjem oznámení z ovládacích prvků.</span><span class="sxs-lookup"><span data-stu-id="1c2df-181">You might want to wrap the actual control(s) as a child window of the returned window; wrapping the controls in a host window provides a simple way for your [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] content to receive notifications from the controls.</span></span> <span data-ttu-id="1c2df-182">Tato technika pomáhá opravte pro některé [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] problémy týkající se zpracování zpráv na hranici hostované řízení.</span><span class="sxs-lookup"><span data-stu-id="1c2df-182">This technique helps correct for some [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] issues regarding message handling at the hosted control boundary.</span></span>  
  
4.  <span data-ttu-id="1c2df-183">Přepsání <xref:System.Windows.Interop.HwndHost> metody <xref:System.Windows.Interop.HwndHost.DestroyWindowCore%2A> a <xref:System.Windows.Interop.HwndHost.WndProc%2A>.</span><span class="sxs-lookup"><span data-stu-id="1c2df-183">Override the <xref:System.Windows.Interop.HwndHost> methods <xref:System.Windows.Interop.HwndHost.DestroyWindowCore%2A> and <xref:System.Windows.Interop.HwndHost.WndProc%2A>.</span></span> <span data-ttu-id="1c2df-184">Zde záměrem je zpracovat čištění a odebrat odkazy na hostované obsahu, zejména v případě, že jste vytvořili odkazy na nespravované objekty.</span><span class="sxs-lookup"><span data-stu-id="1c2df-184">The intention here is to process cleanup and remove references to the hosted content, particularly if you created references to unmanaged objects.</span></span>  
  
5.  <span data-ttu-id="1c2df-185">V souboru kódu na pozadí vytvoření instance třídy hostování ovládacího prvku a nastavte jej podřízený element rezervace.</span><span class="sxs-lookup"><span data-stu-id="1c2df-185">In your code-behind file, create an instance of the control hosting class and make it a child of the reserving element.</span></span> <span data-ttu-id="1c2df-186">Obvykle byste použili obslužné rutiny události, jako <xref:System.Windows.FrameworkElement.Loaded>, nebo použijte konstruktor třídu.</span><span class="sxs-lookup"><span data-stu-id="1c2df-186">Typically you would use an event handler such as <xref:System.Windows.FrameworkElement.Loaded>, or use the partial class constructor.</span></span> <span data-ttu-id="1c2df-187">Ale můžete také přidat součinnosti obsah prostřednictvím modul runtime chování.</span><span class="sxs-lookup"><span data-stu-id="1c2df-187">But you could also add the interoperation content through a runtime behavior.</span></span>  
  
6.  <span data-ttu-id="1c2df-188">Vybrané okno pro zpracování zprávy, jako je například oznámení ovládacího prvku.</span><span class="sxs-lookup"><span data-stu-id="1c2df-188">Process selected window messages, such as control notifications.</span></span> <span data-ttu-id="1c2df-189">Existují dva přístupy.</span><span class="sxs-lookup"><span data-stu-id="1c2df-189">There are two approaches.</span></span> <span data-ttu-id="1c2df-190">Obě poskytují identické přístup do datového proudu zpráv, vaše volba je z velké části řádu programování pohodlí.</span><span class="sxs-lookup"><span data-stu-id="1c2df-190">Both provide identical access to the message stream, so your choice is largely a matter of programming convenience.</span></span>  
  
    -   <span data-ttu-id="1c2df-191">Implementace zpracování pro všechny zprávy (ne jenom vypnutí zpráv) ve vašem přepsání zpráv <xref:System.Windows.Interop.HwndHost> metoda <xref:System.Windows.Interop.HwndHost.WndProc%2A>.</span><span class="sxs-lookup"><span data-stu-id="1c2df-191">Implement message processing for all messages (not just shutdown messages) in your override of the <xref:System.Windows.Interop.HwndHost> method <xref:System.Windows.Interop.HwndHost.WndProc%2A>.</span></span>  
  
    -   <span data-ttu-id="1c2df-192">Máte, který je hostitelem [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] element zpracování zprávy zpracování <xref:System.Windows.Interop.HwndHost.MessageHook> událostí.</span><span class="sxs-lookup"><span data-stu-id="1c2df-192">Have the hosting [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] element process the messages by handling the <xref:System.Windows.Interop.HwndHost.MessageHook> event.</span></span> <span data-ttu-id="1c2df-193">Tato událost se vyvolá pro každou zprávu, která je odeslána hlavní okno procedury okna hostované.</span><span class="sxs-lookup"><span data-stu-id="1c2df-193">This event is raised for every message that is sent to the main window procedure of the hosted window.</span></span>  
  
    -   <span data-ttu-id="1c2df-194">Nelze zpracovat zprávy ze systému windows, které jsou mimo proces pomocí <xref:System.Windows.Interop.HwndHost.WndProc%2A>.</span><span class="sxs-lookup"><span data-stu-id="1c2df-194">You cannot process messages from windows that are out of process using <xref:System.Windows.Interop.HwndHost.WndProc%2A>.</span></span>  
  
7.  <span data-ttu-id="1c2df-195">Komunikovat s okno hostované pomocí platformy vyvolat volání nespravovanou `SendMessage` funkce.</span><span class="sxs-lookup"><span data-stu-id="1c2df-195">Communicate with the hosted window by using platform invoke to call the unmanaged `SendMessage` function.</span></span>  
  
 <span data-ttu-id="1c2df-196">Následujícím postupem vytvoří aplikaci, která funguje s vstup z myši.</span><span class="sxs-lookup"><span data-stu-id="1c2df-196">Following these steps creates an application that works with mouse input.</span></span> <span data-ttu-id="1c2df-197">Můžete přidat dají se procházet tabulátorem podporu pro hostované okno implementací <xref:System.Windows.Interop.IKeyboardInputSink> rozhraní.</span><span class="sxs-lookup"><span data-stu-id="1c2df-197">You can add tabbing support for your hosted window by implementing the <xref:System.Windows.Interop.IKeyboardInputSink> interface.</span></span>  
  
 <span data-ttu-id="1c2df-198">Každý z těchto kroků je zobrazená prostřednictvím kódu v tomto tématu [návod: hostování ovládacího prvku Win32 v grafickém subsystému WPF](../../../../docs/framework/wpf/advanced/walkthrough-hosting-a-win32-control-in-wpf.md).</span><span class="sxs-lookup"><span data-stu-id="1c2df-198">Each of these steps is illustrated through code in the topic [Walkthrough: Hosting a Win32 Control in WPF](../../../../docs/framework/wpf/advanced/walkthrough-hosting-a-win32-control-in-wpf.md).</span></span>  
  
### <a name="hwnds-inside-wpf"></a><span data-ttu-id="1c2df-199">HWND uvnitř WPF</span><span class="sxs-lookup"><span data-stu-id="1c2df-199">Hwnds Inside WPF</span></span>  
 <span data-ttu-id="1c2df-200">Si můžete představit <xref:System.Windows.Interop.HwndHost> jako speciální ovládací prvek.</span><span class="sxs-lookup"><span data-stu-id="1c2df-200">You can think of <xref:System.Windows.Interop.HwndHost> as a special control.</span></span> <span data-ttu-id="1c2df-201">(Technicky <xref:System.Windows.Interop.HwndHost> je <xref:System.Windows.FrameworkElement> odvozené třídy, ne <xref:System.Windows.Controls.Control> odvozené třídy, ale lze považovat ovládací prvek pro účely vzájemná spolupráce.) <xref:System.Windows.Interop.HwndHost> abstrahuje základní [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] povaha hostované obsah tak, aby zbytek [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] zvažuje hostované obsah jako další ovládací prvek jako objektu, který by měl vykreslení a zpracovat vstup.</span><span class="sxs-lookup"><span data-stu-id="1c2df-201">(Technically, <xref:System.Windows.Interop.HwndHost> is a <xref:System.Windows.FrameworkElement> derived class, not a <xref:System.Windows.Controls.Control> derived class, but it can be considered a control for purposes of interoperation.) <xref:System.Windows.Interop.HwndHost> abstracts the underlying [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] nature of the hosted content such that the remainder of [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] considers the hosted content to be another control-like object, which should render and process input.</span></span> <span data-ttu-id="1c2df-202"><xref:System.Windows.Interop.HwndHost>Obecně se chová stejně jako jakýkoli jiný [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] <xref:System.Windows.FrameworkElement>, i když existuje několik důležitých rozdílů kolem výstup (Kreslení a grafiky) a vstup (myši a klávesnice) podle omezení jaké základní HWND může podporovat.</span><span class="sxs-lookup"><span data-stu-id="1c2df-202"><xref:System.Windows.Interop.HwndHost> generally behaves like any other [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] <xref:System.Windows.FrameworkElement>, although there are some important differences around output (drawing and graphics) and input (mouse and keyboard) based on limitations of what the underlying HWNDs can support.</span></span>  
  
#### <a name="notable-differences-in-output-behavior"></a><span data-ttu-id="1c2df-203">Významné rozdíly v chování výstup</span><span class="sxs-lookup"><span data-stu-id="1c2df-203">Notable Differences in Output Behavior</span></span>  
  
-   <span data-ttu-id="1c2df-204"><xref:System.Windows.FrameworkElement>, který je <xref:System.Windows.Interop.HwndHost> základní třídu, má několik vlastností, které implikují změny uživatelského rozhraní.</span><span class="sxs-lookup"><span data-stu-id="1c2df-204"><xref:System.Windows.FrameworkElement>, which is the <xref:System.Windows.Interop.HwndHost> base class, has quite a few properties that imply changes to the UI.</span></span> <span data-ttu-id="1c2df-205">Patří mezi ně vlastnosti, jako <xref:System.Windows.FrameworkElement.FlowDirection%2A?displayProperty=nameWithType>, které změní rozložení elementů v rámci tohoto elementu jako nadřazený objekt.</span><span class="sxs-lookup"><span data-stu-id="1c2df-205">These include properties such as <xref:System.Windows.FrameworkElement.FlowDirection%2A?displayProperty=nameWithType>, which changes the layout of elements within that element as a parent.</span></span> <span data-ttu-id="1c2df-206">Ale většinu tyto vlastnosti nejsou namapované na možné [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] ekvivalenty, i když může existovat takové ekvivalenty.</span><span class="sxs-lookup"><span data-stu-id="1c2df-206">However, most of these properties are not mapped to possible [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] equivalents, even if such equivalents might exist.</span></span> <span data-ttu-id="1c2df-207">Příliš mnoho z těchto vlastností a jejich významy jsou příliš vykreslování technologie specifické pro mapování praktické.</span><span class="sxs-lookup"><span data-stu-id="1c2df-207">Too many of these properties and their meanings are too rendering-technology specific for mappings to be practical.</span></span> <span data-ttu-id="1c2df-208">Proto nastavení vlastností <xref:System.Windows.FrameworkElement.FlowDirection%2A> na <xref:System.Windows.Interop.HwndHost> nemá žádný vliv.</span><span class="sxs-lookup"><span data-stu-id="1c2df-208">Therefore, setting properties such as <xref:System.Windows.FrameworkElement.FlowDirection%2A> on <xref:System.Windows.Interop.HwndHost> has no effect.</span></span>  
  
-   <span data-ttu-id="1c2df-209"><xref:System.Windows.Interop.HwndHost>nemůže být otočený, škálovat, zkreslilo nebo jinak vliv transformace.</span><span class="sxs-lookup"><span data-stu-id="1c2df-209"><xref:System.Windows.Interop.HwndHost> cannot be rotated, scaled, skewed, or otherwise affected by a Transform.</span></span>  
  
-   <span data-ttu-id="1c2df-210"><xref:System.Windows.Interop.HwndHost>nepodporuje <xref:System.Windows.UIElement.Opacity%2A> vlastnost (prolnutí alfa).</span><span class="sxs-lookup"><span data-stu-id="1c2df-210"><xref:System.Windows.Interop.HwndHost> does not support the <xref:System.Windows.UIElement.Opacity%2A> property (alpha blending).</span></span> <span data-ttu-id="1c2df-211">Pokud obsahu uvnitř <xref:System.Windows.Interop.HwndHost> provede <xref:System.Drawing> operace, které zahrnují alfa informace, které nejsou samotné narušení, ale <xref:System.Windows.Interop.HwndHost> jako celek podporuje pouze krytí = 1.0 (100 %).</span><span class="sxs-lookup"><span data-stu-id="1c2df-211">If content inside the <xref:System.Windows.Interop.HwndHost> performs <xref:System.Drawing> operations that include alpha information, that is itself not a violation, but the <xref:System.Windows.Interop.HwndHost> as a whole only supports Opacity = 1.0 (100%).</span></span>  
  
-   <span data-ttu-id="1c2df-212"><xref:System.Windows.Interop.HwndHost>se zobrazí nad dalších [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] elementů v rámci stejného časového období nejvyšší úrovně.</span><span class="sxs-lookup"><span data-stu-id="1c2df-212"><xref:System.Windows.Interop.HwndHost> will appear on top of other [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] elements in the same top-level window.</span></span> <span data-ttu-id="1c2df-213">Ale <xref:System.Windows.Controls.ToolTip> nebo <xref:System.Windows.Controls.ContextMenu> generovaného nabídky je samostatném okně nejvyšší úrovně a proto bude se chovat správně s <xref:System.Windows.Interop.HwndHost>.</span><span class="sxs-lookup"><span data-stu-id="1c2df-213">However, a <xref:System.Windows.Controls.ToolTip> or <xref:System.Windows.Controls.ContextMenu> generated menu is a separate top-level window, and so will behave correctly with <xref:System.Windows.Interop.HwndHost>.</span></span>  
  
-   <span data-ttu-id="1c2df-214"><xref:System.Windows.Interop.HwndHost>nerespektuje oblast ořezu nadřazené <xref:System.Windows.UIElement>.</span><span class="sxs-lookup"><span data-stu-id="1c2df-214"><xref:System.Windows.Interop.HwndHost> does not respect the clipping region of its parent <xref:System.Windows.UIElement>.</span></span> <span data-ttu-id="1c2df-215">Toto je možná problém, pokud se pokusíte převést <xref:System.Windows.Interop.HwndHost> třída uvnitř oblasti s možností posouvání nebo <xref:System.Windows.Controls.Canvas>.</span><span class="sxs-lookup"><span data-stu-id="1c2df-215">This is potentially an issue if you attempt to put an <xref:System.Windows.Interop.HwndHost> class inside a scrolling region or <xref:System.Windows.Controls.Canvas>.</span></span>  
  
#### <a name="notable-differences-in-input-behavior"></a><span data-ttu-id="1c2df-216">Významné rozdíly v chování vstupní</span><span class="sxs-lookup"><span data-stu-id="1c2df-216">Notable Differences in Input Behavior</span></span>  
  
-   <span data-ttu-id="1c2df-217">Obecně platí, že při vstupní zařízení jsou určené v rámci <xref:System.Windows.Interop.HwndHost> hostované [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] oblasti vstupních událostech přejít přímo na [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)].</span><span class="sxs-lookup"><span data-stu-id="1c2df-217">In general, while input devices are scoped within the <xref:System.Windows.Interop.HwndHost> hosted [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] region, input events go directly to [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)].</span></span>  
  
-   <span data-ttu-id="1c2df-218">Při přesunutí myši <xref:System.Windows.Interop.HwndHost>, vaše aplikace neobdrží [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] událostí myši a hodnota [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] vlastnost <xref:System.Windows.UIElement.IsMouseOver%2A> bude `false`.</span><span class="sxs-lookup"><span data-stu-id="1c2df-218">While the mouse is over the <xref:System.Windows.Interop.HwndHost>, your application does not receive [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] mouse events, and the value of the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] property <xref:System.Windows.UIElement.IsMouseOver%2A> will be `false`.</span></span>  
  
-   <span data-ttu-id="1c2df-219">Při <xref:System.Windows.Interop.HwndHost> má fokus klávesnice aplikace neobdrží [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] klávesové události a hodnota [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] vlastnost <xref:System.Windows.UIElement.IsKeyboardFocusWithin%2A> bude `false`.</span><span class="sxs-lookup"><span data-stu-id="1c2df-219">While the <xref:System.Windows.Interop.HwndHost> has keyboard focus, your application will not receive [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] keyboard events and the value of the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] property <xref:System.Windows.UIElement.IsKeyboardFocusWithin%2A> will be `false`.</span></span>  
  
-   <span data-ttu-id="1c2df-220">Pokud je fokus v rámci <xref:System.Windows.Interop.HwndHost> a změny na další ovládací prvek v rámci <xref:System.Windows.Interop.HwndHost>, aplikace neobdrží [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] události <xref:System.Windows.UIElement.GotFocus> nebo <xref:System.Windows.UIElement.LostFocus>.</span><span class="sxs-lookup"><span data-stu-id="1c2df-220">When focus is within the <xref:System.Windows.Interop.HwndHost> and changes to another control inside the <xref:System.Windows.Interop.HwndHost>, your application will not receive the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] events <xref:System.Windows.UIElement.GotFocus> or <xref:System.Windows.UIElement.LostFocus>.</span></span>  
  
-   <span data-ttu-id="1c2df-221">Související s pera vlastnosti a události se podobá a Neoznamovat informace při pera přes <xref:System.Windows.Interop.HwndHost>.</span><span class="sxs-lookup"><span data-stu-id="1c2df-221">Related stylus properties and events are analogous, and do not report information while the stylus is over <xref:System.Windows.Interop.HwndHost>.</span></span>  
  
<a name="tabbing_mnemonics_accelerators"></a>   
## <a name="tabbing-mnemonics-and-accelerators"></a><span data-ttu-id="1c2df-222">Procházení tabulátorem, klávesové zkratky a akcelerátorů</span><span class="sxs-lookup"><span data-stu-id="1c2df-222">Tabbing, Mnemonics, and Accelerators</span></span>  
 <span data-ttu-id="1c2df-223"><xref:System.Windows.Interop.IKeyboardInputSink> a <xref:System.Windows.Interop.IKeyboardInputSite> rozhraní umožňují vytvořit prostředí bezproblémové klávesnice pro smíšený [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] a [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] aplikace:</span><span class="sxs-lookup"><span data-stu-id="1c2df-223">The <xref:System.Windows.Interop.IKeyboardInputSink> and <xref:System.Windows.Interop.IKeyboardInputSite> interfaces allow you to create a seamless keyboard experience for mixed [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] and [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] applications:</span></span>  
  
-   <span data-ttu-id="1c2df-224">Přecházení mezi pomocí tabulátoru [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] a [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] součásti</span><span class="sxs-lookup"><span data-stu-id="1c2df-224">Tabbing between [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] and [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] components</span></span>  
  
-   <span data-ttu-id="1c2df-225">Klávesové zkratky a zkratky, ke kterým fungovat, i když je aktivní v rámci komponenty Win32 a pokud je v rámci komponenty WPF.</span><span class="sxs-lookup"><span data-stu-id="1c2df-225">Mnemonics and accelerators that work both when focus is within a Win32 component and when it is within a WPF component.</span></span>  
  
 <span data-ttu-id="1c2df-226"><xref:System.Windows.Interop.HwndHost> a <xref:System.Windows.Interop.HwndSource> obě třídy poskytovat implementace <xref:System.Windows.Interop.IKeyboardInputSink>, ale nemusí se zpracovat vstupní zprávy, které chcete použít pro pokročilejší scénáře.</span><span class="sxs-lookup"><span data-stu-id="1c2df-226">The <xref:System.Windows.Interop.HwndHost> and <xref:System.Windows.Interop.HwndSource> classes both provide implementations of <xref:System.Windows.Interop.IKeyboardInputSink>, but they may not handle all the input messages that you want for more advanced scenarios.</span></span> <span data-ttu-id="1c2df-227">Přepište příslušné metody klávesnice chování, které chcete.</span><span class="sxs-lookup"><span data-stu-id="1c2df-227">Override the appropriate methods to get the keyboard behavior you want.</span></span>  
  
 <span data-ttu-id="1c2df-228">Rozhraní pouze poskytují podporu pro co se stane, že na přechod mezi [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] a [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] oblasti.</span><span class="sxs-lookup"><span data-stu-id="1c2df-228">The interfaces only provide support for what happens on the transition between the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] and [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] regions.</span></span> <span data-ttu-id="1c2df-229">V rámci [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] oblasti použití tabulátoru chování je zcela řízené [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] implementovat logiku pro procházení tabulátorem, pokud existuje.</span><span class="sxs-lookup"><span data-stu-id="1c2df-229">Within the [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] region, tabbing behavior is entirely controlled by the [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] implemented logic for tabbing, if any.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="1c2df-230">Viz také</span><span class="sxs-lookup"><span data-stu-id="1c2df-230">See Also</span></span>  
 <xref:System.Windows.Interop.HwndHost>  
 <xref:System.Windows.Interop.HwndSource>  
 <xref:System.Windows.Interop>  
 [<span data-ttu-id="1c2df-231">Návod: Hostování ovládacího prvku Win32 v subsystému WPF</span><span class="sxs-lookup"><span data-stu-id="1c2df-231">Walkthrough: Hosting a Win32 Control in WPF</span></span>](../../../../docs/framework/wpf/advanced/walkthrough-hosting-a-win32-control-in-wpf.md)  
 [<span data-ttu-id="1c2df-232">Návod: Hostování obsahu WPF v systému Win32</span><span class="sxs-lookup"><span data-stu-id="1c2df-232">Walkthrough: Hosting WPF Content in Win32</span></span>](../../../../docs/framework/wpf/advanced/walkthrough-hosting-wpf-content-in-win32.md)
