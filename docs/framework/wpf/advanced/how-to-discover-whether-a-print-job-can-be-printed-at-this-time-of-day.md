---
title: "Postupy: Zjištění, zda lze vytisknout tiskovou úlohu v této denní době"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-wpf
ms.tgt_pltfrm: 
ms.topic: article
dev_langs:
- csharp
- vb
- cpp
helpviewer_keywords:
- print queues [WPF], timing
- printers [WPF], availability
- print jobs [WPF], timing
ms.assetid: 7e9c8ec1-abf6-4b3d-b1c6-33b35d3c4063
caps.latest.revision: "9"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.openlocfilehash: 9ac89b8dce67c95c78a5dd46e591d84730a68346
ms.sourcegitcommit: 4f3fef493080a43e70e951223894768d36ce430a
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 11/21/2017
---
# <a name="how-to-discover-whether-a-print-job-can-be-printed-at-this-time-of-day"></a><span data-ttu-id="e980c-102">Postupy: Zjištění, zda lze vytisknout tiskovou úlohu v této denní době</span><span class="sxs-lookup"><span data-stu-id="e980c-102">How to: Discover Whether a Print Job Can Be Printed At This Time of Day</span></span>
<span data-ttu-id="e980c-103">Tiskové fronty nejsou vždy k dispozici po dobu 24 hodin denně.</span><span class="sxs-lookup"><span data-stu-id="e980c-103">Print queues are not always available for 24 hours a day.</span></span> <span data-ttu-id="e980c-104">Mají počáteční a koncové vlastnosti doby, které lze nastavit, aby byly k dispozici v určitých časech den.</span><span class="sxs-lookup"><span data-stu-id="e980c-104">They have start and end time properties that can be set to make them unavailable at certain times of day.</span></span> <span data-ttu-id="e980c-105">Tuto funkci můžete použít například tak, aby vyhradil tiskárny pro výhradní použití určitých oddělení po 17: 00.</span><span class="sxs-lookup"><span data-stu-id="e980c-105">This feature can be used, for example, to reserve a printer for the exclusive use of a certain department after 5 P.M..</span></span> <span data-ttu-id="e980c-106">Oddělení by měla mít jiné fronty obsluhy tiskárny než jiných oddělení použijte.</span><span class="sxs-lookup"><span data-stu-id="e980c-106">That department would have a different queue servicing the printer than other departments use.</span></span> <span data-ttu-id="e980c-107">Fronta jiných oddělení by být nastaveny na k dispozici po 17: 00, zatímco fronty pro favored oddělení může být nastaveny na vždy k dispozici.</span><span class="sxs-lookup"><span data-stu-id="e980c-107">The queue for the other departments would be set to be unavailable after 5 P.M., while queue for the favored department could be set to be available at all times.</span></span>  
  
 <span data-ttu-id="e980c-108">Tiskové úlohy, sami kromě toho může být nastaveny na tisknutelná pouze v rámci dané rozpětí času.</span><span class="sxs-lookup"><span data-stu-id="e980c-108">Moreover, print jobs themselves can be set to be printable only within a specified span of time.</span></span>  
  
 <span data-ttu-id="e980c-109"><xref:System.Printing.PrintQueue> a <xref:System.Printing.PrintSystemJobInfo> třídy vystavený v [!INCLUDE[TLA#tla_api#plural](../../../../includes/tlasharptla-apisharpplural-md.md)] z [!INCLUDE[TLA#tla_winfx](../../../../includes/tlasharptla-winfx-md.md)] umožňují vzdáleně kontroly, zda danou tiskovou úlohu můžete vytisknout v dané frontě v aktuálním čase.</span><span class="sxs-lookup"><span data-stu-id="e980c-109">The <xref:System.Printing.PrintQueue> and <xref:System.Printing.PrintSystemJobInfo> classes exposed in the [!INCLUDE[TLA#tla_api#plural](../../../../includes/tlasharptla-apisharpplural-md.md)] of [!INCLUDE[TLA#tla_winfx](../../../../includes/tlasharptla-winfx-md.md)] provide a means for remotely checking whether a given print job can print on a given queue at the current time.</span></span>  
  
## <a name="example"></a><span data-ttu-id="e980c-110">Příklad</span><span class="sxs-lookup"><span data-stu-id="e980c-110">Example</span></span>  
 <span data-ttu-id="e980c-111">Následující příklad je ukázka, která lze diagnostikovat problémy s tiskové úlohy.</span><span class="sxs-lookup"><span data-stu-id="e980c-111">The example below is a sample that can diagnose problems with a print job.</span></span>  
  
 <span data-ttu-id="e980c-112">Existují dva hlavní kroky pro tento typ funkce následujícím způsobem.</span><span class="sxs-lookup"><span data-stu-id="e980c-112">There are two major steps for this kind of function as follows.</span></span>  
  
1.  <span data-ttu-id="e980c-113">Pro čtení <xref:System.Printing.PrintQueue.StartTimeOfDay%2A> a <xref:System.Printing.PrintQueue.UntilTimeOfDay%2A> vlastnosti <xref:System.Printing.PrintQueue> k určení, zda je aktuální čas mezi nimi.</span><span class="sxs-lookup"><span data-stu-id="e980c-113">Read the <xref:System.Printing.PrintQueue.StartTimeOfDay%2A> and <xref:System.Printing.PrintQueue.UntilTimeOfDay%2A> properties of the <xref:System.Printing.PrintQueue> to determine whether the current time is between them.</span></span>  
  
2.  <span data-ttu-id="e980c-114">Pro čtení <xref:System.Printing.PrintSystemJobInfo.StartTimeOfDay%2A> a <xref:System.Printing.PrintSystemJobInfo.UntilTimeOfDay%2A> vlastnosti <xref:System.Printing.PrintSystemJobInfo> k určení, zda je aktuální čas mezi nimi.</span><span class="sxs-lookup"><span data-stu-id="e980c-114">Read the <xref:System.Printing.PrintSystemJobInfo.StartTimeOfDay%2A> and <xref:System.Printing.PrintSystemJobInfo.UntilTimeOfDay%2A> properties of the <xref:System.Printing.PrintSystemJobInfo> to determine whether the current time is between them.</span></span>  
  
 <span data-ttu-id="e980c-115">Ale komplikace vzniknout ze skutečnosti, že tyto vlastnosti nejsou <xref:System.DateTime> objekty.</span><span class="sxs-lookup"><span data-stu-id="e980c-115">But complications arise from the fact that these properties are not <xref:System.DateTime> objects.</span></span> <span data-ttu-id="e980c-116">Místo toho jsou <xref:System.Int32> objekty, které express denní dobu, jako je počet minut od půlnoci.</span><span class="sxs-lookup"><span data-stu-id="e980c-116">Instead they are <xref:System.Int32> objects that express the time of day as the number of minutes since midnight.</span></span> <span data-ttu-id="e980c-117">Kromě toho tento není půlnoci v aktuální časové pásmo, ale půlnoci času UTC (Coordinated Universal Time).</span><span class="sxs-lookup"><span data-stu-id="e980c-117">Moreover, this is not midnight in the current time zone, but midnight UTC (Coordinated Universal Time).</span></span>  
  
 <span data-ttu-id="e980c-118">V prvním příkladu kódu představuje statickou metodu **ReportQueueAndJobAvailability**, který je předán <xref:System.Printing.PrintSystemJobInfo> a volání pomocné metody pro určení, zda v současné době můžete vytisknout úlohy, a pokud ne, při tisku.</span><span class="sxs-lookup"><span data-stu-id="e980c-118">The first code example presents the static method **ReportQueueAndJobAvailability**, which is passed a <xref:System.Printing.PrintSystemJobInfo> and calls helper methods to determine whether the job can print at the current time and, if not, when it can print.</span></span> <span data-ttu-id="e980c-119">Všimněte si, že <xref:System.Printing.PrintQueue> není předaný metodě.</span><span class="sxs-lookup"><span data-stu-id="e980c-119">Notice that a <xref:System.Printing.PrintQueue> is not passed to the method.</span></span> <span data-ttu-id="e980c-120">Důvodem je, že <xref:System.Printing.PrintSystemJobInfo> obsahuje odkaz na frontu v jeho <xref:System.Printing.PrintSystemJobInfo.HostingPrintQueue%2A> vlastnost.</span><span class="sxs-lookup"><span data-stu-id="e980c-120">This is because the <xref:System.Printing.PrintSystemJobInfo> includes a reference to the queue in its <xref:System.Printing.PrintSystemJobInfo.HostingPrintQueue%2A> property.</span></span>  
  
 <span data-ttu-id="e980c-121">Podřízené metody patří přetížené **ReportAvailabilityAtThisTime** metoda, která může mít buď <xref:System.Printing.PrintQueue> nebo <xref:System.Printing.PrintSystemJobInfo> jako parametr.</span><span class="sxs-lookup"><span data-stu-id="e980c-121">The subordinate methods include the overloaded **ReportAvailabilityAtThisTime** method which can take either a <xref:System.Printing.PrintQueue> or a <xref:System.Printing.PrintSystemJobInfo> as a parameter.</span></span> <span data-ttu-id="e980c-122">K dispozici je také **TimeConverter.ConvertToLocalHumanReadableTime**.</span><span class="sxs-lookup"><span data-stu-id="e980c-122">There is also a **TimeConverter.ConvertToLocalHumanReadableTime**.</span></span> <span data-ttu-id="e980c-123">Všechny tyto metody jsou popsané dále.</span><span class="sxs-lookup"><span data-stu-id="e980c-123">All of these methods are discussed below.</span></span>  
  
 <span data-ttu-id="e980c-124">**ReportQueueAndJobAvailability** metoda začne kontrolou, pokud chcete zobrazit, pokud v tuto chvíli není k dispozici fronta nebo tiskové úlohy.</span><span class="sxs-lookup"><span data-stu-id="e980c-124">The **ReportQueueAndJobAvailability** method begins by checking to see if either the queue or the print job is unavailable at this time.</span></span> <span data-ttu-id="e980c-125">Pokud některá z nich není k dispozici, pak zkontroluje, pokud není k dispozici fronty.</span><span class="sxs-lookup"><span data-stu-id="e980c-125">If either of them is unavailable, it then checks to see if the queue unavailable.</span></span> <span data-ttu-id="e980c-126">Pokud není k dispozici, metoda sestavy tuto skutečnost a čas, kdy fronty bude opět k dispozici.</span><span class="sxs-lookup"><span data-stu-id="e980c-126">If it is not available, then the method reports this fact and the time when the queue will become available again.</span></span> <span data-ttu-id="e980c-127">Pak zkontroluje projekt a pokud je k dispozici, oznámí příštím span, kdy se při tisku.</span><span class="sxs-lookup"><span data-stu-id="e980c-127">It then checks the job and if it is unavailable, it reports the next time span when it when it can print.</span></span> <span data-ttu-id="e980c-128">Nakonec metodu hlásí Nejdřívější čas, kdy můžete vytisknout úlohy.</span><span class="sxs-lookup"><span data-stu-id="e980c-128">Finally, the method reports the earliest time when the job can print.</span></span> <span data-ttu-id="e980c-129">Toto je novější následujících dvakrát.</span><span class="sxs-lookup"><span data-stu-id="e980c-129">This is the later of following two times.</span></span>  
  
-   <span data-ttu-id="e980c-130">Čas, kdy je v tiskové frontě dále k dispozici.</span><span class="sxs-lookup"><span data-stu-id="e980c-130">The time when the print queue is next available.</span></span>  
  
-   <span data-ttu-id="e980c-131">Čas, kdy je daná tisková úloha dále k dispozici.</span><span class="sxs-lookup"><span data-stu-id="e980c-131">The time when the print job is next available.</span></span>  
  
 <span data-ttu-id="e980c-132">Při hlášení denní dobu, <xref:System.DateTime.ToShortTimeString%2A> metoda se označuje taky jako, protože tato metoda potlačí let, měsíce a dny z výstupu.</span><span class="sxs-lookup"><span data-stu-id="e980c-132">When reporting times of day, the <xref:System.DateTime.ToShortTimeString%2A> method is also called because this method suppresses the years, months, and days from the output.</span></span> <span data-ttu-id="e980c-133">Dostupnost tiskovou frontu nebo tiskové úlohy nelze omezit na konkrétní let, měsíců nebo dní.</span><span class="sxs-lookup"><span data-stu-id="e980c-133">You cannot restrict the availability of either a print queue or a print job to particular years, months, or days.</span></span>  
  
 [!code-cpp[DiagnoseProblematicPrintJob#ReportQueueAndJobAvailability](../../../../samples/snippets/cpp/VS_Snippets_Wpf/DiagnoseProblematicPrintJob/CPP/Program.cpp#reportqueueandjobavailability)]
 [!code-csharp[DiagnoseProblematicPrintJob#ReportQueueAndJobAvailability](../../../../samples/snippets/csharp/VS_Snippets_Wpf/DiagnoseProblematicPrintJob/CSharp/Program.cs#reportqueueandjobavailability)]
 [!code-vb[DiagnoseProblematicPrintJob#ReportQueueAndJobAvailability](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/DiagnoseProblematicPrintJob/visualbasic/program.vb#reportqueueandjobavailability)]  
  
 <span data-ttu-id="e980c-134">Dva přetížení **ReportAvailabilityAtThisTime** metoda jsou identické s výjimkou typu předán do je, takže jenom <xref:System.Printing.PrintQueue> verze je uveden níže.</span><span class="sxs-lookup"><span data-stu-id="e980c-134">The two overloads of the **ReportAvailabilityAtThisTime** method are identical except for the type passed to them, so only the <xref:System.Printing.PrintQueue> version is presented below.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="e980c-135">Skutečnost, že jsou identické s výjimkou typu metody vyvolává otázku, proč ukázku nevytvoří obecná metoda **ReportAvailabilityAtThisTime\<T >**.</span><span class="sxs-lookup"><span data-stu-id="e980c-135">The fact that the methods are identical except for type raises the question of why the sample does not create a generic method **ReportAvailabilityAtThisTime\<T>**.</span></span> <span data-ttu-id="e980c-136">Důvodem je, že tato metoda by mohl být omezen na třídu, která má **StartTimeOfDay** a **UntilTimeOfDay** vlastnosti, které volá metodu, ale obecná metoda může být pouze omezené jednotné třídy a třídy pouze společné pro objekty <xref:System.Printing.PrintQueue> a <xref:System.Printing.PrintSystemJobInfo> v dědičnosti stromu je <xref:System.Printing.PrintSystemObject> který nemá žádné tyto vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="e980c-136">The reason is that such a method would have to be restricted to a class that has the **StartTimeOfDay** and **UntilTimeOfDay** properties that the method calls, but a generic method can only be restricted to a single class and the only class common to both <xref:System.Printing.PrintQueue> and <xref:System.Printing.PrintSystemJobInfo> in the inheritance tree is <xref:System.Printing.PrintSystemObject> which has no such properties.</span></span>  
  
 <span data-ttu-id="e980c-137">**ReportAvailabilityAtThisTime** – metoda (uvedené v následujícím příkladu kódu) začne podle inicializace <xref:System.Boolean> sentinel proměnnou `true`.</span><span class="sxs-lookup"><span data-stu-id="e980c-137">The **ReportAvailabilityAtThisTime** method (presented in the code example below) begins by initializing a <xref:System.Boolean> sentinel variable to `true`.</span></span> <span data-ttu-id="e980c-138">Bude obnovena do `false`, pokud není k dispozici fronty.</span><span class="sxs-lookup"><span data-stu-id="e980c-138">It will be reset to `false`, if the queue is not available.</span></span>  
  
 <span data-ttu-id="e980c-139">V dalším kroku metoda zkontroluje, pokud se spuštění a "dokud" časy jsou identické.</span><span class="sxs-lookup"><span data-stu-id="e980c-139">Next, the method checks to see if the start and "until" times are identical.</span></span> <span data-ttu-id="e980c-140">Pokud ano, fronty je vždy k dispozici, a proto vrátí metoda `true`.</span><span class="sxs-lookup"><span data-stu-id="e980c-140">If they are, the queue is always available, so the method returns `true`.</span></span>  
  
 <span data-ttu-id="e980c-141">Pokud fronta není k dispozici vždy, metoda používá statickou <xref:System.DateTime.UtcNow%2A> vlastnost, která má získat aktuální čas jako <xref:System.DateTime> objektu.</span><span class="sxs-lookup"><span data-stu-id="e980c-141">If the queue is not available all the time, the method uses the static <xref:System.DateTime.UtcNow%2A> property to get the current time as a <xref:System.DateTime> object.</span></span> <span data-ttu-id="e980c-142">(Jsme není nutné místního času, protože <xref:System.Printing.PrintQueue.StartTimeOfDay%2A> a <xref:System.Printing.PrintQueue.UntilTimeOfDay%2A> sami vlastnosti jsou ve formátu času UTC.)</span><span class="sxs-lookup"><span data-stu-id="e980c-142">(We do not need local time because the <xref:System.Printing.PrintQueue.StartTimeOfDay%2A> and <xref:System.Printing.PrintQueue.UntilTimeOfDay%2A> properties are themselves in UTC time.)</span></span>  
  
 <span data-ttu-id="e980c-143">Však tyto dvě vlastnosti nejsou <xref:System.DateTime> objekty.</span><span class="sxs-lookup"><span data-stu-id="e980c-143">However, these two properties are not <xref:System.DateTime> objects.</span></span> <span data-ttu-id="e980c-144">Jsou <xref:System.Int32>s vyjadřující čas jako počet minut po času UTC půlnoci.</span><span class="sxs-lookup"><span data-stu-id="e980c-144">They are <xref:System.Int32>s expressing the time as the number of minutes-after-UTC-midnight.</span></span> <span data-ttu-id="e980c-145">Abychom měli převést naše <xref:System.DateTime> objekt minut po půlnoci.</span><span class="sxs-lookup"><span data-stu-id="e980c-145">So we do have to convert our <xref:System.DateTime> object to minutes-after-midnight.</span></span> <span data-ttu-id="e980c-146">Pokud, se provádí, zkontroluje tato metoda jednoduše můžete zjistit, zda "teď" je mezi fronty spuštění a "časy, nastaví sentinel na hodnotu false, pokud"teď"není mezi dvěma časy a vrátí sentinel do".</span><span class="sxs-lookup"><span data-stu-id="e980c-146">When that is done, the method simply checks to see whether "now" is between the queue's start and "until" times, sets the sentinel to false if "now" is not between the two times, and returns the sentinel.</span></span>  
  
 [!code-cpp[DiagnoseProblematicPrintJob#PrintQueueStartUntil](../../../../samples/snippets/cpp/VS_Snippets_Wpf/DiagnoseProblematicPrintJob/CPP/Program.cpp#printqueuestartuntil)]
 [!code-csharp[DiagnoseProblematicPrintJob#PrintQueueStartUntil](../../../../samples/snippets/csharp/VS_Snippets_Wpf/DiagnoseProblematicPrintJob/CSharp/Program.cs#printqueuestartuntil)]
 [!code-vb[DiagnoseProblematicPrintJob#PrintQueueStartUntil](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/DiagnoseProblematicPrintJob/visualbasic/program.vb#printqueuestartuntil)]  
  
 <span data-ttu-id="e980c-147">**TimeConverter.ConvertToLocalHumanReadableTime** – metoda (uvedené v následujícím příkladu kódu) nepoužívá žádné metody zavedené [!INCLUDE[TLA#tla_winfx](../../../../includes/tlasharptla-winfx-md.md)], takže je stručný diskuse.</span><span class="sxs-lookup"><span data-stu-id="e980c-147">The **TimeConverter.ConvertToLocalHumanReadableTime** method (presented in the code example below) does not use any methods introduced with [!INCLUDE[TLA#tla_winfx](../../../../includes/tlasharptla-winfx-md.md)], so the discussion is brief.</span></span> <span data-ttu-id="e980c-148">Metoda je úkol dvojitý převod: musí trvat celé vyjadřující minut po půlnoci a převeďte ho na čitelná pro člověka čas a je nutné ji převést na místní čas.</span><span class="sxs-lookup"><span data-stu-id="e980c-148">The method has a double conversion task: it must take an integer expressing minutes-after-midnight and convert it to a human-readable time and it must convert this to the local time.</span></span> <span data-ttu-id="e980c-149">Provádí se to tak, že první vytvoříte <xref:System.DateTime> objekt, který je nastavenou na půlnoc UTC a pak se používá <xref:System.DateTime.AddMinutes%2A> metody přidat minut, které byly předány metodě.</span><span class="sxs-lookup"><span data-stu-id="e980c-149">It accomplishes this by first creating a <xref:System.DateTime> object that is set to midnight UTC and then it uses the <xref:System.DateTime.AddMinutes%2A> method to add the minutes that were passed to the method.</span></span> <span data-ttu-id="e980c-150">Vrátí nový <xref:System.DateTime> vyjadřující původní čas, který byl předaný metodě.</span><span class="sxs-lookup"><span data-stu-id="e980c-150">This returns a new <xref:System.DateTime> expressing the original time that was passed to the method.</span></span> <span data-ttu-id="e980c-151"><xref:System.DateTime.ToLocalTime%2A> Metoda potom převede na místní čas.</span><span class="sxs-lookup"><span data-stu-id="e980c-151">The <xref:System.DateTime.ToLocalTime%2A> method then converts this to local time.</span></span>  
  
 [!code-cpp[DiagnoseProblematicPrintJob#TimeConverter](../../../../samples/snippets/cpp/VS_Snippets_Wpf/DiagnoseProblematicPrintJob/CPP/Program.cpp#timeconverter)]
 [!code-csharp[DiagnoseProblematicPrintJob#TimeConverter](../../../../samples/snippets/csharp/VS_Snippets_Wpf/DiagnoseProblematicPrintJob/CSharp/Program.cs#timeconverter)]
 [!code-vb[DiagnoseProblematicPrintJob#TimeConverter](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/DiagnoseProblematicPrintJob/visualbasic/program.vb#timeconverter)]  
  
## <a name="see-also"></a><span data-ttu-id="e980c-152">Viz také</span><span class="sxs-lookup"><span data-stu-id="e980c-152">See Also</span></span>  
 <xref:System.DateTime>  
 <xref:System.Printing.PrintSystemJobInfo>  
 <xref:System.Printing.PrintQueue>  
 [<span data-ttu-id="e980c-153">Dokumenty v grafickém subsystému WPF</span><span class="sxs-lookup"><span data-stu-id="e980c-153">Documents in WPF</span></span>](../../../../docs/framework/wpf/advanced/documents-in-wpf.md)  
 [<span data-ttu-id="e980c-154">Tisk – přehled</span><span class="sxs-lookup"><span data-stu-id="e980c-154">Printing Overview</span></span>](../../../../docs/framework/wpf/advanced/printing-overview.md)
