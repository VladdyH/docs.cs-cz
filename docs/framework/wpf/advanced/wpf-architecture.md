---
title: Architektura WPF
ms.custom: ''
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: ''
ms.suite: ''
ms.technology:
- dotnet-wpf
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- properties [WPF], attached
- attached properties [WPF]
- architecture [WPF]
- unmanaged components [WPF]
- affinity thread [WPF]
- Storyboards [WPF]
- milcore [WPF]
- components [WPF], unmanaged
- painter's algorithm
- interfaces [WPF], INotifyPropertyChange
- CommandBindings [WPF]
- data templates [WPF]
- thread [WPF], affinity
ms.assetid: 8579c10b-76ab-4c52-9691-195ce02333c8
caps.latest.revision: 17
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.workload:
- dotnet
ms.openlocfilehash: 29c8e2d632c37a299389b1bdc7f3f19f7df2f7e7
ms.sourcegitcommit: 94d33cadc5ff81d2ac389bf5f26422c227832052
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 04/30/2018
---
# <a name="wpf-architecture"></a><span data-ttu-id="0811e-102">Architektura WPF</span><span class="sxs-lookup"><span data-stu-id="0811e-102">WPF Architecture</span></span>
<span data-ttu-id="0811e-103">Toto téma obsahuje Průvodce hierarchie tříd Windows Presentation Foundation (WPF).</span><span class="sxs-lookup"><span data-stu-id="0811e-103">This topic provides a guided tour of the Windows Presentation Foundation (WPF) class hierarchy.</span></span> <span data-ttu-id="0811e-104">Pokrývá většinu hlavní dílčích systémů [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)]a popisuje způsob, jakým interagují.</span><span class="sxs-lookup"><span data-stu-id="0811e-104">It covers most of the major subsystems of [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)], and describes how they interact.</span></span> <span data-ttu-id="0811e-105">Také podrobnosti některé z těchto možností provedené architekty z [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)].</span><span class="sxs-lookup"><span data-stu-id="0811e-105">It also details some of the choices made by the architects of [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)].</span></span>  
  
  
<a name="System_Object"></a>   
## <a name="systemobject"></a><span data-ttu-id="0811e-106">System.Object</span><span class="sxs-lookup"><span data-stu-id="0811e-106">System.Object</span></span>  
 <span data-ttu-id="0811e-107">Primární [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] programovací model je k dispozici prostřednictvím spravovaného kódu.</span><span class="sxs-lookup"><span data-stu-id="0811e-107">The primary [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] programming model is exposed through managed code.</span></span> <span data-ttu-id="0811e-108">Na začátku ve fázi návrhu [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] došlo k několika jednáních, o kterých mají být vykresleny řádku až nespravované těm, které jsou součástí správy systému.</span><span class="sxs-lookup"><span data-stu-id="0811e-108">Early in the design phase of [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] there were a number of debates about where the line should be drawn between the managed components of the system and the unmanaged ones.</span></span> <span data-ttu-id="0811e-109">[!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] Poskytuje celou řadu funkcí, které usnadňují vývoj zvýšit produktivitu a robustní (včetně správy paměti, zpracování chyb, obecný systém typů atd.), ale začne s náklady.</span><span class="sxs-lookup"><span data-stu-id="0811e-109">The [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] provides a number of features that make development more productive and robust (including memory management, error handling, common type system, etc.) but they come at a cost.</span></span>  
  
 <span data-ttu-id="0811e-110">Hlavní součástí [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] jsou zobrazené na obrázku níže.</span><span class="sxs-lookup"><span data-stu-id="0811e-110">The major components of [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] are illustrated in the figure below.</span></span> <span data-ttu-id="0811e-111">Red oddíly diagramu (PresentationFramework, PresentationCore a milcore) jsou části kódu hlavní [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)].</span><span class="sxs-lookup"><span data-stu-id="0811e-111">The red sections of the diagram (PresentationFramework, PresentationCore, and milcore) are the major code portions of [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)].</span></span> <span data-ttu-id="0811e-112">Pouze jeden z nich, nespravované součástí – milcore je.</span><span class="sxs-lookup"><span data-stu-id="0811e-112">Of these, only one is an unmanaged component – milcore.</span></span> <span data-ttu-id="0811e-113">Milcore je zapsán v nespravovaném kódu, aby bylo možné povolit úzkou integraci s [!INCLUDE[TLA2#tla_dx](../../../../includes/tla2sharptla-dx-md.md)].</span><span class="sxs-lookup"><span data-stu-id="0811e-113">Milcore is written in unmanaged code in order to enable tight integration with [!INCLUDE[TLA2#tla_dx](../../../../includes/tla2sharptla-dx-md.md)].</span></span> <span data-ttu-id="0811e-114">Všechna zobrazení v [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] se provádí prostřednictvím [!INCLUDE[TLA2#tla_dx](../../../../includes/tla2sharptla-dx-md.md)] modul, povolení pro efektivní hardwaru a softwaru vykreslování.</span><span class="sxs-lookup"><span data-stu-id="0811e-114">All display in [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] is done through the [!INCLUDE[TLA2#tla_dx](../../../../includes/tla2sharptla-dx-md.md)] engine, allowing for efficient hardware and software rendering.</span></span> [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)]<span data-ttu-id="0811e-115"> také vyžaduje přesné řízení paměti a spouštění.</span><span class="sxs-lookup"><span data-stu-id="0811e-115"> also required fine control over memory and execution.</span></span> <span data-ttu-id="0811e-116">Modul složení v milcore je velmi výkon citlivé a požadované zkoušet mnoho výhod [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] k získání výkonu.</span><span class="sxs-lookup"><span data-stu-id="0811e-116">The composition engine in milcore is extremely performance sensitive, and required giving up many advantages of the [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] to gain performance.</span></span>  
  
 <span data-ttu-id="0811e-117">![Pozice WPF v rozhraní .NET Framework. ] (../../../../docs/framework/wpf/advanced/media/wpf-architect1.PNG "wpf_architect1")</span><span class="sxs-lookup"><span data-stu-id="0811e-117">![The position of WPF within the .NET Framework.](../../../../docs/framework/wpf/advanced/media/wpf-architect1.PNG "wpf_architect1")</span></span>  
  
 <span data-ttu-id="0811e-118">Komunikace mezi spravovanými a nespravovanými částí [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] je popsána dále v tomto tématu.</span><span class="sxs-lookup"><span data-stu-id="0811e-118">Communication between the managed and unmanaged portions of [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] is discussed later in this topic.</span></span> <span data-ttu-id="0811e-119">Zbývající spravované programovací model je popsáno níže.</span><span class="sxs-lookup"><span data-stu-id="0811e-119">The remainder of the managed programming model is described below.</span></span>  
  
<a name="System_Threading_DispatcherObject"></a>   
## <a name="systemthreadingdispatcherobject"></a><span data-ttu-id="0811e-120">System.Threading.DispatcherObject</span><span class="sxs-lookup"><span data-stu-id="0811e-120">System.Threading.DispatcherObject</span></span>  
 <span data-ttu-id="0811e-121">Většinu objektů v [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] odvozena od <xref:System.Windows.Threading.DispatcherObject>, který nabízí základní konstrukce týkajících se souběžností a dělení na vlákna.</span><span class="sxs-lookup"><span data-stu-id="0811e-121">Most objects in [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] derive from <xref:System.Windows.Threading.DispatcherObject>, which provides the basic constructs for dealing with concurrency and threading.</span></span> [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)]<span data-ttu-id="0811e-122"> je založena na systému zasílání zpráv implementují dispečera.</span><span class="sxs-lookup"><span data-stu-id="0811e-122"> is based on a messaging system implemented by the dispatcher.</span></span> <span data-ttu-id="0811e-123">To funguje podobně jako známé [!INCLUDE[TLA#tla_win32](../../../../includes/tlasharptla-win32-md.md)] message pump; ve skutečnosti [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] dispečera User32 zprávy používá k provedení křížového vlákno volání.</span><span class="sxs-lookup"><span data-stu-id="0811e-123">This works much like the familiar [!INCLUDE[TLA#tla_win32](../../../../includes/tlasharptla-win32-md.md)] message pump; in fact, the [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] dispatcher uses User32 messages for performing cross thread calls.</span></span>  
  
 <span data-ttu-id="0811e-124">Existují ve skutečnosti dvě základní koncepty když hovoříte o souběžnost v [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] – spřažení dispečera a přístup z více vláken.</span><span class="sxs-lookup"><span data-stu-id="0811e-124">There are really two core concepts to understand when discussing concurrency in [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] – the dispatcher and thread affinity.</span></span>  
  
 <span data-ttu-id="0811e-125">Během fáze návrhu [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)], cílem bylo přesunout na jedno vlákno spuštění, ale bez vláken "spřažené" modelu.</span><span class="sxs-lookup"><span data-stu-id="0811e-125">During the design phase of [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)], the goal was to move to a single thread of execution, but a non-thread "affinitized" model.</span></span> <span data-ttu-id="0811e-126">Spřažení podprocesu se stane, když součást používá k uložení nějaký typ stavu identitu provádění vlákna.</span><span class="sxs-lookup"><span data-stu-id="0811e-126">Thread affinity happens when a component uses the identity of the executing thread to store some type of state.</span></span> <span data-ttu-id="0811e-127">Nejběžnější formu to je použít místní úložiště vláken (TLS) k uložení stavu.</span><span class="sxs-lookup"><span data-stu-id="0811e-127">The most common form of this is to use the thread local store (TLS) to store state.</span></span> <span data-ttu-id="0811e-128">Spřažení podprocesu vyžaduje, aby každý logický podproces provádění vlastnit pouze jeden fyzický přístup z více vláken v operačním systému, který se může stát náročná na paměť.</span><span class="sxs-lookup"><span data-stu-id="0811e-128">Thread affinity requires that each logical thread of execution be owned by only one physical thread in the operating system, which can become memory intensive.</span></span> <span data-ttu-id="0811e-129">Díky tomu se průběžně modelu vláken pro WPF synchronizován se existující model vláken User32 jednoho zařazování spuštění s spřažení vláken.</span><span class="sxs-lookup"><span data-stu-id="0811e-129">In the end, WPF’s threading model was kept in sync with the existing User32 threading model of single threaded execution with thread affinity.</span></span> <span data-ttu-id="0811e-130">Hlavním důvodem byla interoperabilita – systémy jako [!INCLUDE[TLA2#tla_ole2.0](../../../../includes/tla2sharptla-ole2-0-md.md)], do schránky a Internet Explorer všechny vyžadují spuštění jedno vlákno spřažení (STA).</span><span class="sxs-lookup"><span data-stu-id="0811e-130">The primary reason for this was interoperability – systems like [!INCLUDE[TLA2#tla_ole2.0](../../../../includes/tla2sharptla-ole2-0-md.md)], the clipboard, and Internet Explorer all require single thread affinity (STA) execution.</span></span>  
  
 <span data-ttu-id="0811e-131">Vzhledem k tomu, že máte objektů s STA dělení na vlákna, potřebujete způsob, jak komunikovat mezi vlákny a ověření umístěné na správném vlákno.</span><span class="sxs-lookup"><span data-stu-id="0811e-131">Given that you have objects with STA threading, you need a way to communicate between threads, and validate that you are on the correct thread.</span></span> <span data-ttu-id="0811e-132">V tomto dokumentu je role dispečera.</span><span class="sxs-lookup"><span data-stu-id="0811e-132">Herein lies the role of the dispatcher.</span></span> <span data-ttu-id="0811e-133">Dispečer je základní zpráva odeslání systém s více seřazený podle priority fronty.</span><span class="sxs-lookup"><span data-stu-id="0811e-133">The dispatcher is a basic message dispatching system, with multiple prioritized queues.</span></span> <span data-ttu-id="0811e-134">Příklady zprávy jsou nezpracovaná vstupní oznámení (přesunout myš), funkce framework (rozložení) nebo příkazy uživatele (spustit tuto metodu).</span><span class="sxs-lookup"><span data-stu-id="0811e-134">Examples of messages include raw input notifications (mouse moved), framework functions (layout), or user commands (execute this method).</span></span> <span data-ttu-id="0811e-135">Odvozené z <xref:System.Windows.Threading.DispatcherObject>, můžete vytvořit [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] objektu, který má STA chování a budou mít ukazatel dispečera v okamžiku vytvoření.</span><span class="sxs-lookup"><span data-stu-id="0811e-135">By deriving from <xref:System.Windows.Threading.DispatcherObject>, you create a [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] object that has STA behavior, and will be given a pointer to a dispatcher at creation time.</span></span>  
  
<a name="System_Windows_DependencyObject"></a>   
## <a name="systemwindowsdependencyobject"></a><span data-ttu-id="0811e-136">System.Windows.DependencyObject</span><span class="sxs-lookup"><span data-stu-id="0811e-136">System.Windows.DependencyObject</span></span>  
 <span data-ttu-id="0811e-137">Jedním z primárních architektury filozofiemi použít v sestavení [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] byl předvolbu pro vlastnosti prostřednictvím metody nebo události.</span><span class="sxs-lookup"><span data-stu-id="0811e-137">One of the primary architectural philosophies used in building [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] was a preference for properties over methods or events.</span></span> <span data-ttu-id="0811e-138">Vlastnosti jsou deklarativní a umožní že vám umožní snadno určit záměr místo akce.</span><span class="sxs-lookup"><span data-stu-id="0811e-138">Properties are declarative and allow you to more easily specify intent instead of action.</span></span> <span data-ttu-id="0811e-139">Podporováno také modelu řízené nebo databázových systému pro zobrazení obsahu uživatelské rozhraní.</span><span class="sxs-lookup"><span data-stu-id="0811e-139">This also supported a model driven, or data driven, system for displaying user interface content.</span></span> <span data-ttu-id="0811e-140">Tato filosofie měl určený vliv vytváření další vlastnosti, které může vytvořit vazbu, aby bylo možné lépe řídit chování aplikace.</span><span class="sxs-lookup"><span data-stu-id="0811e-140">This philosophy had the intended effect of creating more properties that you could bind to, in order to better control the behavior of an application.</span></span>  
  
 <span data-ttu-id="0811e-141">Aby bylo možné používat další systému vycházejí z vlastnosti bohatší vlastnosti systému, než co [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] poskytuje bylo potřeba.</span><span class="sxs-lookup"><span data-stu-id="0811e-141">In order to have more of the system driven by properties, a richer property system than what the [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] provides was needed.</span></span> <span data-ttu-id="0811e-142">Jednoduchý příklad této zvučnost je oznámení o změnách.</span><span class="sxs-lookup"><span data-stu-id="0811e-142">A simple example of this richness is change notifications.</span></span> <span data-ttu-id="0811e-143">Pokud chcete povolit dva způsobem vazba, je nutné obou stranách vazby pro podporu upozornění na změnu.</span><span class="sxs-lookup"><span data-stu-id="0811e-143">In order to enable two way binding, you need both sides of the bind to support change notification.</span></span> <span data-ttu-id="0811e-144">Aby bylo možné používat chování vázaný na hodnoty vlastností, budete muset být upozorněni, když se změní hodnota vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="0811e-144">In order to have behavior tied to property values, you need to be notified when the property value changes.</span></span> <span data-ttu-id="0811e-145">[!INCLUDE[TLA#tla_netframewk](../../../../includes/tlasharptla-netframewk-md.md)] Má rozhraní, **INotifyPropertyChange**, což umožňuje objekt k publikování oznámení o změnách, ale je volitelné.</span><span class="sxs-lookup"><span data-stu-id="0811e-145">The [!INCLUDE[TLA#tla_netframewk](../../../../includes/tlasharptla-netframewk-md.md)] has an interface, **INotifyPropertyChange**, which allows an object to publish change notifications, however it is optional.</span></span>  
  
 [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)]<span data-ttu-id="0811e-146"> poskytuje bohatší vlastnost systém a odvozené z <xref:System.Windows.DependencyObject> typu.</span><span class="sxs-lookup"><span data-stu-id="0811e-146"> provides a richer property system, derived from the <xref:System.Windows.DependencyObject> type.</span></span> <span data-ttu-id="0811e-147">Vlastnost systému se skutečně "závislosti" Vlastnosti systému, že sleduje závislosti mezi vlastnost výrazy a při změně závislosti automaticky revalidates hodnot vlastností.</span><span class="sxs-lookup"><span data-stu-id="0811e-147">The property system is truly a "dependency" property system in that it tracks dependencies between property expressions and automatically revalidates property values when dependencies change.</span></span> <span data-ttu-id="0811e-148">Například, pokud máte vlastnost, která dědí (jako je <xref:System.Windows.Controls.Control.FontSize%2A>), systém se automaticky aktualizuje, pokud se vlastnost změní na nadřazený element, který dědí hodnotu.</span><span class="sxs-lookup"><span data-stu-id="0811e-148">For example, if you have a property that inherits (like <xref:System.Windows.Controls.Control.FontSize%2A>), the system is automatically updated if the property changes on a parent of an element that inherits the value.</span></span>  
  
 <span data-ttu-id="0811e-149">Základ pro [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] vlastnost systém je koncept výraz vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="0811e-149">The foundation of the [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] property system is the concept of a property expression.</span></span> <span data-ttu-id="0811e-150">V této první verzi [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)], systém vlastnost výraz se zavře a výrazy jsou uvedeny jako součást rozhraní.</span><span class="sxs-lookup"><span data-stu-id="0811e-150">In this first release of [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)], the property expression system is closed, and the expressions are all provided as part of the framework.</span></span> <span data-ttu-id="0811e-151">Výrazy jsou proto vlastnost systém nemá vazbu dat, styly, nebo dědičnosti pevné programového, ale spíš poskytované novější vrstvy v rámci.</span><span class="sxs-lookup"><span data-stu-id="0811e-151">Expressions are why the property system doesn’t have data binding, styling, or inheritance hard coded, but rather provided by later layers within the framework.</span></span>  
  
 <span data-ttu-id="0811e-152">Vlastnost systému také poskytuje zhuštěného úložiště hodnot vlastností.</span><span class="sxs-lookup"><span data-stu-id="0811e-152">The property system also provides for sparse storage of property values.</span></span> <span data-ttu-id="0811e-153">Protože objekty může mít desítek (Pokud ne, stovky) vlastností a většina hodnoty jsou v jejich stavu výchozí (zděděná, styly, která nastavuje atd.), Ne každé instanci objektu musí mít úplnou váhu všech vlastností definovanou.</span><span class="sxs-lookup"><span data-stu-id="0811e-153">Because objects can have dozens (if not hundreds) of properties, and most of the values are in their default state (inherited, set by styles, etc.), not every instance of an object needs to have the full weight of every property defined on it.</span></span>  
  
 <span data-ttu-id="0811e-154">Poslední nová funkce systému vlastnost je znalost problematicky přidružené vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="0811e-154">The final new feature of the property system is the notion of attached properties.</span></span> [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)]<span data-ttu-id="0811e-155"> elementy jsou postavené na princip složení a opětovné používání součásti.</span><span class="sxs-lookup"><span data-stu-id="0811e-155"> elements are built on the principle of composition and component reuse.</span></span> <span data-ttu-id="0811e-156">Se často stává, že některé obsahující element (například <xref:System.Windows.Controls.Grid> rozložení element) potřebovat další data na podřízené elementy mohla kontrolovat své chování (např. informace o řádku nebo sloupce).</span><span class="sxs-lookup"><span data-stu-id="0811e-156">It is often the case that some containing element (like a <xref:System.Windows.Controls.Grid> layout element) needs additional data on child elements to control its behavior (like the Row/Column information).</span></span> <span data-ttu-id="0811e-157">Místo přidružení všechny tyto vlastnosti k každý element, je povoleno libovolného objektu k poskytování definic vlastností pro jakýkoliv jiný objekt.</span><span class="sxs-lookup"><span data-stu-id="0811e-157">Instead of associating all of these properties with every element, any object is allowed to provide property definitions for any other object.</span></span> <span data-ttu-id="0811e-158">Toto je podobná "expando" funkce jazyka JavaScript.</span><span class="sxs-lookup"><span data-stu-id="0811e-158">This is similar to the "expando" features of JavaScript.</span></span>  
  
<a name="System_Windows_Media_Visual"></a>   
## <a name="systemwindowsmediavisual"></a><span data-ttu-id="0811e-159">System.Windows.Media.Visual</span><span class="sxs-lookup"><span data-stu-id="0811e-159">System.Windows.Media.Visual</span></span>  
 <span data-ttu-id="0811e-160">S definované systémem je dalším krokem získávání pixelů na obrazovce.</span><span class="sxs-lookup"><span data-stu-id="0811e-160">With a system defined, the next step is getting pixels drawn to the screen.</span></span> <span data-ttu-id="0811e-161"><xref:System.Windows.Media.Visual> Třída poskytuje pro vytváření stromu vizuální objekty, každá volitelně obsahuje pokyny k vykreslení a metadata o tom, jak vykreslit tyto pokyny (výstřižek, transformaci, atd.).</span><span class="sxs-lookup"><span data-stu-id="0811e-161">The <xref:System.Windows.Media.Visual> class provides for building a tree of visual objects, each optionally containing drawing instructions and metadata about how to render those instructions (clipping, transformation, etc.).</span></span> <span data-ttu-id="0811e-162"><xref:System.Windows.Media.Visual> je navržený jako velmi jednoduché a flexibilní, takže většinu funkcí sady mít žádné veřejné [!INCLUDE[TLA2#tla_api](../../../../includes/tla2sharptla-api-md.md)] ohrožení a jsou velmi závislá na funkce chráněné zpětného volání.</span><span class="sxs-lookup"><span data-stu-id="0811e-162"><xref:System.Windows.Media.Visual> is designed to be extremely lightweight and flexible, so most of the features have no public [!INCLUDE[TLA2#tla_api](../../../../includes/tla2sharptla-api-md.md)] exposure and rely heavily on protected callback functions.</span></span>  
  
 <span data-ttu-id="0811e-163"><xref:System.Windows.Media.Visual> vstupní bod, který je ve skutečnosti [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] složení systému.</span><span class="sxs-lookup"><span data-stu-id="0811e-163"><xref:System.Windows.Media.Visual> is really the entry point to the [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] composition system.</span></span> <span data-ttu-id="0811e-164"><xref:System.Windows.Media.Visual> bod připojení mezi tyto dvě subsystémy spravovaný [!INCLUDE[TLA#tla_api](../../../../includes/tlasharptla-api-md.md)] a nespravované milcore.</span><span class="sxs-lookup"><span data-stu-id="0811e-164"><xref:System.Windows.Media.Visual> is the point of connection between these two subsystems, the managed [!INCLUDE[TLA#tla_api](../../../../includes/tlasharptla-api-md.md)] and the unmanaged milcore.</span></span>  
  
 [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)]<span data-ttu-id="0811e-165"> Zobrazí data pomocí procházení nespravované datové struktury milcore spravuje.</span><span class="sxs-lookup"><span data-stu-id="0811e-165"> displays data by traversing the unmanaged data structures managed by the milcore.</span></span> <span data-ttu-id="0811e-166">Těchto struktur, označují jako složení uzly představují hierarchické zobrazení stromu s vykreslování pokyny v každém uzlu.</span><span class="sxs-lookup"><span data-stu-id="0811e-166">These structures, called composition nodes, represent a hierarchical display tree with rendering instructions at each node.</span></span> <span data-ttu-id="0811e-167">Tento strom, znázorněné na obrázku pravé straně přístupný jenom prostřednictvím zasílání zpráv protokolu.</span><span class="sxs-lookup"><span data-stu-id="0811e-167">This tree, illustrated on the right hand side of the figure below, is only accessible through a messaging protocol.</span></span>  
  
 <span data-ttu-id="0811e-168">Při programování [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)], vytvoříte <xref:System.Windows.Media.Visual> elementy a odvozené typy, které interně sdělit stromu složení prostřednictvím tohoto zasílání zpráv protokolu.</span><span class="sxs-lookup"><span data-stu-id="0811e-168">When programming [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)], you create <xref:System.Windows.Media.Visual> elements, and derived types, which internally communicate to the composition tree through this messaging protocol.</span></span> <span data-ttu-id="0811e-169">Každý <xref:System.Windows.Media.Visual> v [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] může vytvořit jeden, jeden nebo několik uzlů složení.</span><span class="sxs-lookup"><span data-stu-id="0811e-169">Each <xref:System.Windows.Media.Visual> in [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] may create one, none, or several composition nodes.</span></span>  
  
 <span data-ttu-id="0811e-170">![Windows Presentation Foundation vizuálním stromu. ] (../../../../docs/framework/wpf/advanced/media/wpf-architecture2.PNG "wpf_architecture2")</span><span class="sxs-lookup"><span data-stu-id="0811e-170">![The Windows Presentation Foundation Visual Tree.](../../../../docs/framework/wpf/advanced/media/wpf-architecture2.PNG "wpf_architecture2")</span></span>  
  
 <span data-ttu-id="0811e-171">Je velmi důležité architektury podrobností Všimněte zde – celý strom vizuály a kreslení pokyny se uloží do mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="0811e-171">There is a very important architectural detail to notice here – the entire tree of visuals and drawing instructions is cached.</span></span> <span data-ttu-id="0811e-172">V podmínkách grafiky [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] používá systém zachované vykreslování.</span><span class="sxs-lookup"><span data-stu-id="0811e-172">In graphics terms, [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] uses a retained rendering system.</span></span> <span data-ttu-id="0811e-173">To umožňuje systému překreslit tempem vysoké aktualizace bez systému složení blokování na zpětná volání a uživatelského kódu.</span><span class="sxs-lookup"><span data-stu-id="0811e-173">This enables the system to repaint at high refresh rates without the composition system blocking on callbacks to user code.</span></span> <span data-ttu-id="0811e-174">To pomáhá zabránit vzhled aplikací, která neodpovídá.</span><span class="sxs-lookup"><span data-stu-id="0811e-174">This helps prevent the appearance of an unresponsive application.</span></span>  
  
 <span data-ttu-id="0811e-175">Další důležité podrobností, která není skutečně projevuje diagramu je, jak systém ve skutečnosti provádí složení.</span><span class="sxs-lookup"><span data-stu-id="0811e-175">Another important detail that isn’t really noticeable in the diagram is how the system actually performs composition.</span></span>  
  
 <span data-ttu-id="0811e-176">V User32 a [!INCLUDE[TLA2#tla_gdi](../../../../includes/tla2sharptla-gdi-md.md)], systém funguje v systému výstřižek přímý režim.</span><span class="sxs-lookup"><span data-stu-id="0811e-176">In User32 and [!INCLUDE[TLA2#tla_gdi](../../../../includes/tla2sharptla-gdi-md.md)], the system works on an immediate mode clipping system.</span></span> <span data-ttu-id="0811e-177">Když součásti nutné k vykreslení, systém vytvoří výstřižek hranice mimo kterých součást není dovoleno touch pixelů a potom komponentu se zobrazí výzva k vyplnění pixelů v tomto poli.</span><span class="sxs-lookup"><span data-stu-id="0811e-177">When a component needs to be rendered, the system establishes a clipping bounds outside of which the component isn’t allowed to touch the pixels, and then the component is asked to paint pixels in that box.</span></span> <span data-ttu-id="0811e-178">Tento systém se velmi dobře funguje v systémech omezené pamětí vzhledem k tomu, když dojde ke změně máte jenom touch tato součást – žádné dvě součásti někdy podílet se na barvu jednoho pixelů.</span><span class="sxs-lookup"><span data-stu-id="0811e-178">This system works very well in memory constrained systems because when something changes you only have to touch the affected component – no two components ever contribute to the color of a single pixel.</span></span>  
  
 [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)]<span data-ttu-id="0811e-179"> používá "Kopírovat na algoritmus" vykreslování modelu.</span><span class="sxs-lookup"><span data-stu-id="0811e-179"> uses a "painter's algorithm" painting model.</span></span> <span data-ttu-id="0811e-180">To znamená, že místo výstřižek jednotlivé komponenty, jednotlivé komponenty se zobrazí výzva k vykreslení ze zadní před zobrazení.</span><span class="sxs-lookup"><span data-stu-id="0811e-180">This means that instead of clipping each component, each component is asked to render from the back to the front of the display.</span></span> <span data-ttu-id="0811e-181">To umožňuje jednotlivé komponenty pro malování přes předchozí komponenty zobrazení.</span><span class="sxs-lookup"><span data-stu-id="0811e-181">This allows each component to paint over the previous component's display.</span></span> <span data-ttu-id="0811e-182">Výhodou tohoto modelu je, že můžete mít složitý, částečně transparentní tvarů.</span><span class="sxs-lookup"><span data-stu-id="0811e-182">The advantage of this model is that you can have complex, partially transparent shapes.</span></span> <span data-ttu-id="0811e-183">S hardwarem dnešní moderní grafiky, tento model je poměrně rychlé (který není případě při User32 / [!INCLUDE[TLA2#tla_gdi](../../../../includes/tla2sharptla-gdi-md.md)] byly vytvořeny).</span><span class="sxs-lookup"><span data-stu-id="0811e-183">With today’s modern graphics hardware, this model is relatively fast (which wasn’t the case when User32/ [!INCLUDE[TLA2#tla_gdi](../../../../includes/tla2sharptla-gdi-md.md)] were created).</span></span>  
  
 <span data-ttu-id="0811e-184">Jak je uvedeno nahoře, základní princip [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] je přesunout do další deklarativní model "vlastnost zaměřená na" programování.</span><span class="sxs-lookup"><span data-stu-id="0811e-184">As mentioned previously, a core philosophy of [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] is to move to a more declarative, "property centric" model of programming.</span></span> <span data-ttu-id="0811e-185">V systému visual to se zobrazí v několika zajímavé místech.</span><span class="sxs-lookup"><span data-stu-id="0811e-185">In the visual system, this shows up in a couple of interesting places.</span></span>  
  
 <span data-ttu-id="0811e-186">První, pokud si myslíte o grafické systému udržených režimu, to skutečně přechází od imperativní DrawLine/DrawLine typ modelu, na datový model orientované – nový řádek () / new Line().</span><span class="sxs-lookup"><span data-stu-id="0811e-186">First, if you think about the retained mode graphic system, this is really moving away from an imperative DrawLine/DrawLine type model, to a data oriented model – new Line()/new Line().</span></span> <span data-ttu-id="0811e-187">Tento přesun do řízených daty vykreslování umožňuje komplexní operací na kreslení pokynů vyjádřit pomocí vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="0811e-187">This move to data driven rendering allows complex operations on the drawing instructions to be expressed using properties.</span></span> <span data-ttu-id="0811e-188">Typ odvozovaný z: <xref:System.Windows.Media.Drawing> jsou efektivně objektový model pro vykreslování.</span><span class="sxs-lookup"><span data-stu-id="0811e-188">The types deriving from <xref:System.Windows.Media.Drawing> are effectively the object model for rendering.</span></span>  
  
 <span data-ttu-id="0811e-189">Druhý Pokud můžete vyhodnotit animace systému, uvidíte, že je téměř úplně deklarativní.</span><span class="sxs-lookup"><span data-stu-id="0811e-189">Second, if you evaluate the animation system, you'll see that it is almost completely declarative.</span></span> <span data-ttu-id="0811e-190">Místo nutnosti vývojáře k výpočtu další umístění nebo další barvu, lze vyjádřit animací jako sadu vlastností objektu animace.</span><span class="sxs-lookup"><span data-stu-id="0811e-190">Instead of requiring a developer to compute the next location, or next color, you can express animations as a set of properties on an animation object.</span></span> <span data-ttu-id="0811e-191">Tyto animací můžete pak express záměr vývojář nebo Návrhář (přesunout toto tlačítko zde k dispozici v 5 sekund), a systém můžete určit, co nejúčinnější způsob, jak provést tuto akci.</span><span class="sxs-lookup"><span data-stu-id="0811e-191">These animations can then express the intent of the developer or designer (move this button from here to there in 5 seconds), and the system can determine the most efficient way to accomplish that.</span></span>  
  
<a name="System_Windows_UIElement"></a>   
## <a name="systemwindowsuielement"></a><span data-ttu-id="0811e-192">System.Windows.UIElement</span><span class="sxs-lookup"><span data-stu-id="0811e-192">System.Windows.UIElement</span></span>  
 <span data-ttu-id="0811e-193"><xref:System.Windows.UIElement> definuje základní subsystémy, včetně rozložení, vstup a události.</span><span class="sxs-lookup"><span data-stu-id="0811e-193"><xref:System.Windows.UIElement> defines core subsystems including Layout, Input, and Events.</span></span>  
  
 <span data-ttu-id="0811e-194">Rozložení je základní koncept v [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)].</span><span class="sxs-lookup"><span data-stu-id="0811e-194">Layout is a core concept in [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)].</span></span> <span data-ttu-id="0811e-195">V mnoha systémů je buď pevné sada rozložení modely (HTML podporuje tři modely pro rozložení; toku, absolutní a tabulky) nebo bez modelu rozložení (User32 opravdu jen podporuje absolutní umístění).</span><span class="sxs-lookup"><span data-stu-id="0811e-195">In many systems there is either a fixed set of layout models (HTML supports three models for layout; flow, absolute, and tables) or no model for layout (User32 really only supports absolute positioning).</span></span> [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)]<span data-ttu-id="0811e-196"> spuštění za předpokladu, že vývojářů a návrhářů, chtěli flexibilní a rozšiřitelný rozložení model, který může být vycházejí z hodnoty vlastností, nikoli imperativní logiku.</span><span class="sxs-lookup"><span data-stu-id="0811e-196"> started with the assumption that developers and designers wanted a flexible, extensible layout model, which could be driven by property values rather than imperative logic.</span></span> <span data-ttu-id="0811e-197">Na <xref:System.Windows.UIElement> úrovně, uvádíme základní kontrakt rozložení – dvě fáze model s <xref:System.Windows.UIElement.Measure%2A> a <xref:System.Windows.UIElement.Arrange%2A> předá.</span><span class="sxs-lookup"><span data-stu-id="0811e-197">At the <xref:System.Windows.UIElement> level, the basic contract for layout is introduced – a two phase model with <xref:System.Windows.UIElement.Measure%2A> and <xref:System.Windows.UIElement.Arrange%2A> passes.</span></span>  
  
 <span data-ttu-id="0811e-198"><xref:System.Windows.UIElement.Measure%2A> Umožňuje součást kolik velikost ji chcete provést.</span><span class="sxs-lookup"><span data-stu-id="0811e-198"><xref:System.Windows.UIElement.Measure%2A> allows a component to determine how much size it would like to take.</span></span> <span data-ttu-id="0811e-199">Toto je samostatný fáze z <xref:System.Windows.UIElement.Arrange%2A> vzhledem k tomu, že je v mnoha situacích, kde nadřazený element požádá podřízené měření několikrát určit její optimální pozice a velikosti.</span><span class="sxs-lookup"><span data-stu-id="0811e-199">This is a separate phase from <xref:System.Windows.UIElement.Arrange%2A> because there are many situations where a parent element will ask a child to measure several times to determine its optimal position and size.</span></span> <span data-ttu-id="0811e-200">Skutečnost, že nadřazené elementy požádejte podřízených elementů k měření ukazuje jiné klíče filosofie z [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] – velikost k obsahu.</span><span class="sxs-lookup"><span data-stu-id="0811e-200">The fact that parent elements ask child elements to measure demonstrates another key philosophy of [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] – size to content.</span></span> <span data-ttu-id="0811e-201">Všechny ovládací prvky v [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] podporují možnost velikost fyzické velikosti jejich obsah.</span><span class="sxs-lookup"><span data-stu-id="0811e-201">All controls in [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] support the ability to size to the natural size of their content.</span></span> <span data-ttu-id="0811e-202">To výrazně usnadňuje lokalizaci a umožňuje dynamické rozložení elementů při velikosti věcí.</span><span class="sxs-lookup"><span data-stu-id="0811e-202">This makes localization much easier, and allows for dynamic layout of elements as things resize.</span></span> <span data-ttu-id="0811e-203"><xref:System.Windows.UIElement.Arrange%2A> Fáze umožňuje nadřazený pozice a stanovit konečné velikosti jednotlivých podřízených.</span><span class="sxs-lookup"><span data-stu-id="0811e-203">The <xref:System.Windows.UIElement.Arrange%2A> phase allows a parent to position and determine the final size of each child.</span></span>  
  
 <span data-ttu-id="0811e-204">Mnoho času je často stráví posuzování výstupu [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] – <xref:System.Windows.Media.Visual> a související objekty.</span><span class="sxs-lookup"><span data-stu-id="0811e-204">A lot of time is often spent talking about the output side of [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] – <xref:System.Windows.Media.Visual> and related objects.</span></span> <span data-ttu-id="0811e-205">Je ale rozsáhlou inovací na vstupní straně.</span><span class="sxs-lookup"><span data-stu-id="0811e-205">However there is a tremendous amount of innovation on the input side as well.</span></span> <span data-ttu-id="0811e-206">Pravděpodobně nejvíce zásadní změna v vstupní modelu pro [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] je konzistentní model, podle kterého se směrují vstupní události prostřednictvím systému.</span><span class="sxs-lookup"><span data-stu-id="0811e-206">Probably the most fundamental change in the input model for [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] is the consistent model by which input events are routed through the system.</span></span>  
  
 <span data-ttu-id="0811e-207">Vstup pochází jako signál na zařízení ovladač režimu jádra a získá směrovat na správná proces a vlákno komplikované proces zahrnující jádro systému Windows a User32.</span><span class="sxs-lookup"><span data-stu-id="0811e-207">Input originates as a signal on a kernel mode device driver and gets routed to the correct process and thread through an intricate process involving the Windows kernel and User32.</span></span> <span data-ttu-id="0811e-208">Jakmile zpráva User32 odpovídající vstup směrována na [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)], se převede do [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] nezpracovaná vstupní zprávy a odesílají do dispečera.</span><span class="sxs-lookup"><span data-stu-id="0811e-208">Once the User32 message corresponding to the input is routed to [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)], it is converted into a [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] raw input message and sent to the dispatcher.</span></span> [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)]<span data-ttu-id="0811e-209"> Umožňuje nezpracovaná vstupních událostech, které má být převeden na více skutečné událostí povolení funkcí, jako je "MouseEnter" k implementaci na nízké úrovni systému s garantované doručení.</span><span class="sxs-lookup"><span data-stu-id="0811e-209"> allows for raw input events to be converted to multiple actual events, enabling features like "MouseEnter" to be implemented at a low level of the system with guaranteed delivery.</span></span>  
  
 <span data-ttu-id="0811e-210">Každá vstupní událost bude převedena na alespoň dvě události – "náhled" události a skutečné události.</span><span class="sxs-lookup"><span data-stu-id="0811e-210">Each input event is converted to at least two events – a "preview" event and the actual event.</span></span> <span data-ttu-id="0811e-211">Všechny události v [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] mít hodnoty směrování prostřednictvím stromu elementu.</span><span class="sxs-lookup"><span data-stu-id="0811e-211">All events in [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] have a notion of routing through the element tree.</span></span> <span data-ttu-id="0811e-212">Události jsou označeny jako "bublinový", pokud z cíle nahoru k procházení do kořenového adresáře a jsou označeny jako "tunelování" Pokud, spusťte v kořenovém adresáři a procházení dolů cíl.</span><span class="sxs-lookup"><span data-stu-id="0811e-212">Events are said to "bubble" if they traverse from a target up the tree to the root, and are said to "tunnel" if that start at the root and traverse down to a target.</span></span> <span data-ttu-id="0811e-213">Zadejte preview události tunelové propojení, povolení libovolný element ve stromové struktuře příležitost filtrovat nebo provést akci pro událost.</span><span class="sxs-lookup"><span data-stu-id="0811e-213">Input preview events tunnel, enabling any element in the tree an opportunity to filter or take action on the event.</span></span> <span data-ttu-id="0811e-214">Běžné události (bez preview) se pak bublinový cíl až kořenu.</span><span class="sxs-lookup"><span data-stu-id="0811e-214">The regular (non-preview) events then bubble from the target up to the root.</span></span>  
  
 <span data-ttu-id="0811e-215">Toto rozdělení mezi fázi tunelové propojení a bublin umožňuje provádění funkcí jako klávesové zkratky v konzistentním způsobem v složené world fungovat.</span><span class="sxs-lookup"><span data-stu-id="0811e-215">This split between the tunnel and bubble phase makes implementation of features like keyboard accelerators work in a consistent fashion in a composite world.</span></span> <span data-ttu-id="0811e-216">V User32 by implementovat klávesové zkratky tak, že jeden globální tabulku obsahující všechny akcelerátorů, který jste chtěli podporu (Ctrl + N mapování "New").</span><span class="sxs-lookup"><span data-stu-id="0811e-216">In User32 you would implement keyboard accelerators by having a single global table containing all the accelerators you wanted to support (Ctrl+N mapping to "New").</span></span> <span data-ttu-id="0811e-217">V dispečera pro vaši aplikaci volání **TranslateAccelerator** který by vstupní zpráv v User32, sledovat a zjistit, je-li žádné odpovídat akcelerátor registrované.</span><span class="sxs-lookup"><span data-stu-id="0811e-217">In the dispatcher for your application you would call **TranslateAccelerator** which would sniff the input messages in User32 and determine if any matched a registered accelerator.</span></span> <span data-ttu-id="0811e-218">V [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] to nebude fungovat, protože systém je plně "složení" – libovolný element, můžete zpracovat a použít všechny klávesové zkratky.</span><span class="sxs-lookup"><span data-stu-id="0811e-218">In [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] this wouldn’t work because the system is fully "composable" – any element can handle and use any keyboard accelerator.</span></span> <span data-ttu-id="0811e-219">Tento model dvě fáze pro vstup umožní součásti, které implementují vlastní "TranslateAccelerator".</span><span class="sxs-lookup"><span data-stu-id="0811e-219">Having this two phase model for input allows components to implement their own "TranslateAccelerator".</span></span>  
  
 <span data-ttu-id="0811e-220">Tento krok jeden provádět další, <xref:System.Windows.UIElement> také zavádí představu o CommandBindings.</span><span class="sxs-lookup"><span data-stu-id="0811e-220">To take this one step further, <xref:System.Windows.UIElement> also introduces the notion of CommandBindings.</span></span> <span data-ttu-id="0811e-221">[!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] Příkaz systému umožňuje vývojářům něco definovat funkci z hlediska koncového bodu příkaz – Tento implementuje <xref:System.Windows.Input.ICommand>.</span><span class="sxs-lookup"><span data-stu-id="0811e-221">The [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] command system allows developers to define functionality in terms of a command end point – something that implements <xref:System.Windows.Input.ICommand>.</span></span> <span data-ttu-id="0811e-222">Příkaz vazby povolit element definovat mapování mezi vstupní gesto (Ctrl + N) a příkaz (Nový).</span><span class="sxs-lookup"><span data-stu-id="0811e-222">Command bindings enable an element to define a mapping between an input gesture (Ctrl+N) and a command (New).</span></span> <span data-ttu-id="0811e-223">Vstupní gesta i příkaz definice jsou rozšiřitelný a může být drátové společně v době použití.</span><span class="sxs-lookup"><span data-stu-id="0811e-223">Both the input gestures and command definitions are extensible, and can be wired together at usage time.</span></span> <span data-ttu-id="0811e-224">Díky tomu trivial, například aby koncový uživatel Chcete-li přizpůsobit vazeb klíče, které chcete použít v rámci aplikace.</span><span class="sxs-lookup"><span data-stu-id="0811e-224">This makes it trivial, for example, to allow an end user to customize the key bindings that they want to use within an application.</span></span>  
  
 <span data-ttu-id="0811e-225">K tomuto bodu v tématu "základní" funkce [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] – funkce implementované v sestavení PresentationCore byly fokus.</span><span class="sxs-lookup"><span data-stu-id="0811e-225">To this point in the topic, "core" features of [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] – features implemented in the PresentationCore assembly, have been the focus.</span></span> <span data-ttu-id="0811e-226">Při sestavování [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)], vyčistit oddělení mezi základní součásti (jako kontrakt rozložení s **měr** a **uspořádat**) a částí framework (např. provádění konkrétní rozložení jako <xref:System.Windows.Controls.Grid>) byla požadovaném výsledku.</span><span class="sxs-lookup"><span data-stu-id="0811e-226">When building [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)], a clean separation between foundational pieces (like the contract for layout with **Measure** and **Arrange**) and framework pieces (like the implementation of a specific layout like <xref:System.Windows.Controls.Grid>) was the desired outcome.</span></span> <span data-ttu-id="0811e-227">Cílem bylo potřeba nízkou v zásobníku, který by umožnil externí vývojářům vytvářet své vlastní architektury, pokud bod rozšiřitelnosti.</span><span class="sxs-lookup"><span data-stu-id="0811e-227">The goal was to provide an extensibility point low in the stack that would allow external developers to create their own frameworks if needed.</span></span>  
  
<a name="System_Windows_FrameworkElement"></a>   
## <a name="systemwindowsframeworkelement"></a><span data-ttu-id="0811e-228">System.Windows.FrameworkElement</span><span class="sxs-lookup"><span data-stu-id="0811e-228">System.Windows.FrameworkElement</span></span>  
 <span data-ttu-id="0811e-229"><xref:System.Windows.FrameworkElement> může být prohlédli dvěma různými způsoby.</span><span class="sxs-lookup"><span data-stu-id="0811e-229"><xref:System.Windows.FrameworkElement> can be looked at in two different ways.</span></span> <span data-ttu-id="0811e-230">Přináší sadu zásad a vlastní nastavení na subsystémy byla zavedená v nižších vrstvách z [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)].</span><span class="sxs-lookup"><span data-stu-id="0811e-230">It introduces a set of policies and customizations on the subsystems introduced in lower layers of [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)].</span></span> <span data-ttu-id="0811e-231">Také zavádí sadu nové subsystémy.</span><span class="sxs-lookup"><span data-stu-id="0811e-231">It also introduces a set of new subsystems.</span></span>  
  
 <span data-ttu-id="0811e-232">Zásady primárního zaváděné <xref:System.Windows.FrameworkElement> je kolem rozložení aplikace.</span><span class="sxs-lookup"><span data-stu-id="0811e-232">The primary policy introduced by <xref:System.Windows.FrameworkElement> is around application layout.</span></span> <span data-ttu-id="0811e-233"><xref:System.Windows.FrameworkElement> staví na základní rozložení kontrakt zaváděné <xref:System.Windows.UIElement> a přidá představu o rozložení "slotu", který usnadňuje rozložení autorům obsahují sadu vlastnosti řízených sémantiku rozložení.</span><span class="sxs-lookup"><span data-stu-id="0811e-233"><xref:System.Windows.FrameworkElement> builds on the basic layout contract introduced by <xref:System.Windows.UIElement> and adds the notion of a layout "slot" that makes it easier for layout authors to have a consistent set of property driven layout semantics.</span></span> <span data-ttu-id="0811e-234">Vlastnosti, například <xref:System.Windows.FrameworkElement.HorizontalAlignment%2A>, <xref:System.Windows.FrameworkElement.VerticalAlignment%2A>, <xref:System.Windows.FrameworkElement.MinWidth%2A>, a <xref:System.Windows.FrameworkElement.Margin%2A> (pro pojmenování několik) poskytnout všechny součásti, které jsou odvozené z <xref:System.Windows.FrameworkElement> konzistentní chování uvnitř kontejnerů rozložení.</span><span class="sxs-lookup"><span data-stu-id="0811e-234">Properties like <xref:System.Windows.FrameworkElement.HorizontalAlignment%2A>, <xref:System.Windows.FrameworkElement.VerticalAlignment%2A>, <xref:System.Windows.FrameworkElement.MinWidth%2A>, and <xref:System.Windows.FrameworkElement.Margin%2A> (to name a few) give all components derived from <xref:System.Windows.FrameworkElement> consistent behavior inside of layout containers.</span></span>  
  
 <span data-ttu-id="0811e-235"><xref:System.Windows.FrameworkElement> také poskytuje snadnější [!INCLUDE[TLA2#tla_api](../../../../includes/tla2sharptla-api-md.md)] vystavení mnoho funkcí najít v jednotlivých vrstvách základní [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)].</span><span class="sxs-lookup"><span data-stu-id="0811e-235"><xref:System.Windows.FrameworkElement> also provides easier [!INCLUDE[TLA2#tla_api](../../../../includes/tla2sharptla-api-md.md)] exposure to many features found in the core layers of [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)].</span></span> <span data-ttu-id="0811e-236">Například <xref:System.Windows.FrameworkElement> poskytuje přímý přístup k animace prostřednictvím <xref:System.Windows.FrameworkElement.BeginStoryboard%2A> metoda.</span><span class="sxs-lookup"><span data-stu-id="0811e-236">For example, <xref:System.Windows.FrameworkElement> provides direct access to animation through the <xref:System.Windows.FrameworkElement.BeginStoryboard%2A> method.</span></span> <span data-ttu-id="0811e-237">A <xref:System.Windows.Media.Animation.Storyboard> poskytuje způsob, jak skript více animací proti sadu vlastností.</span><span class="sxs-lookup"><span data-stu-id="0811e-237">A <xref:System.Windows.Media.Animation.Storyboard> provides a way to script multiple animations against a set of properties.</span></span>  
  
 <span data-ttu-id="0811e-238">Dva nejdůležitějších věcí, <xref:System.Windows.FrameworkElement> zavádí jsou datové vazby a stylů.</span><span class="sxs-lookup"><span data-stu-id="0811e-238">The two most critical things that <xref:System.Windows.FrameworkElement> introduces are data binding and styles.</span></span>  
  
 <span data-ttu-id="0811e-239">Subsystém vazby dat v [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] by měl být relativně každý uživatel, který byl použit [!INCLUDE[TLA#tla_winforms](../../../../includes/tlasharptla-winforms-md.md)] nebo [!INCLUDE[TLA#tla_aspnet](../../../../includes/tlasharptla-aspnet-md.md)] pro vytváření aplikací [!INCLUDE[TLA#tla_ui](../../../../includes/tlasharptla-ui-md.md)].</span><span class="sxs-lookup"><span data-stu-id="0811e-239">The data binding subsystem in [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] should be relatively familiar to anyone that has used [!INCLUDE[TLA#tla_winforms](../../../../includes/tlasharptla-winforms-md.md)] or [!INCLUDE[TLA#tla_aspnet](../../../../includes/tlasharptla-aspnet-md.md)] for creating an application [!INCLUDE[TLA#tla_ui](../../../../includes/tlasharptla-ui-md.md)].</span></span> <span data-ttu-id="0811e-240">V každé z těchto systémů je jednoduchý způsob, jak express, který má jeden nebo více vlastností z daného elementu bylo vázané na část dat.</span><span class="sxs-lookup"><span data-stu-id="0811e-240">In each of these systems, there is a simple way to express that you want one or more properties from a given element to be bound to a piece of data.</span></span> [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)]<span data-ttu-id="0811e-241"> má plnou podporu pro vlastnost vazby, transformaci a seznamu vazby.</span><span class="sxs-lookup"><span data-stu-id="0811e-241"> has full support for property binding, transformation, and list binding.</span></span>  
  
 <span data-ttu-id="0811e-242">Jeden z nejvíce zajímavé funkce datové vazby v [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] je zavedení dat šablony.</span><span class="sxs-lookup"><span data-stu-id="0811e-242">One of the most interesting features of data binding in [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] is the introduction of data templates.</span></span> <span data-ttu-id="0811e-243">Šablony dat umožní deklarativně zadejte, jak by měla vizualizovat část data.</span><span class="sxs-lookup"><span data-stu-id="0811e-243">Data templates allow you to declaratively specify how a piece of data should be visualized.</span></span> <span data-ttu-id="0811e-244">Místo vytváření vlastní uživatelské rozhraní, které mohou být vázány na data, můžete místo toho otáčení, problém a nechte data určit zobrazení, která bude vytvořena.</span><span class="sxs-lookup"><span data-stu-id="0811e-244">Instead of creating a custom user interface that can be bound to data, you can instead turn the problem around and let the data determine the display that will be created.</span></span>  
  
 <span data-ttu-id="0811e-245">Stylů je ve skutečnosti lightweight formě datové vazby.</span><span class="sxs-lookup"><span data-stu-id="0811e-245">Styling is really a lightweight form of data binding.</span></span> <span data-ttu-id="0811e-246">Pomocí styly můžete můžete vázat sadu vlastností z sdílené definice na jeden nebo více instancí elementu.</span><span class="sxs-lookup"><span data-stu-id="0811e-246">Using styling you can bind a set of properties from a shared definition to one or more instances of an element.</span></span> <span data-ttu-id="0811e-247">Styly získat použitá pro element buď explicitní odkaz (nastavením <xref:System.Windows.FrameworkElement.Style%2A> vlastnost) nebo implicitně tím, že přidružíte styl se [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] typ elementu.</span><span class="sxs-lookup"><span data-stu-id="0811e-247">Styles get applied to an element either by explicit reference (by setting the <xref:System.Windows.FrameworkElement.Style%2A> property) or implicitly by associating a style with the [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] type of the element.</span></span>  
  
<a name="System_Windows_Controls_Control"></a>   
## <a name="systemwindowscontrolscontrol"></a><span data-ttu-id="0811e-248">System.Windows.Controls.Control</span><span class="sxs-lookup"><span data-stu-id="0811e-248">System.Windows.Controls.Control</span></span>  
 <span data-ttu-id="0811e-249">Nejdůležitější funkce ovládacího prvku je ukázka.</span><span class="sxs-lookup"><span data-stu-id="0811e-249">Control’s most significant feature is templating.</span></span> <span data-ttu-id="0811e-250">Pokud si myslíte o na WPF složení systému jako systém zachované režimu vykreslování, umožňuje Ukázka ovládacího prvku k popisu vykreslování parametrizované, deklarativní způsobem.</span><span class="sxs-lookup"><span data-stu-id="0811e-250">If you think about WPF’s composition system as a retained mode rendering system, templating allows a control to describe its rendering in a parameterized, declarative manner.</span></span> <span data-ttu-id="0811e-251">A <xref:System.Windows.Controls.ControlTemplate> je ve skutečnosti nic jiného než skript pro vytvoření sady podřízených elementů s vazby na vlastnosti, které nabízí ovládacího prvku.</span><span class="sxs-lookup"><span data-stu-id="0811e-251">A <xref:System.Windows.Controls.ControlTemplate> is really nothing more than a script to create a set of child elements, with bindings to properties offered by the control.</span></span>  
  
 <span data-ttu-id="0811e-252"><xref:System.Windows.Controls.Control> poskytuje sadu uložených vlastností <xref:System.Windows.Controls.Control.Foreground%2A>, <xref:System.Windows.Controls.Control.Background%2A>, <xref:System.Windows.Controls.Control.Padding%2A>, a další, které šablony autoři pak můžete použít k přizpůsobení zobrazení ovládacího prvku.</span><span class="sxs-lookup"><span data-stu-id="0811e-252"><xref:System.Windows.Controls.Control> provides a set of stock properties, <xref:System.Windows.Controls.Control.Foreground%2A>, <xref:System.Windows.Controls.Control.Background%2A>, <xref:System.Windows.Controls.Control.Padding%2A>, to name a few, which template authors can then use to customize the display of a control.</span></span> <span data-ttu-id="0811e-253">Implementace ovládacího prvku poskytuje datový model a model interakce.</span><span class="sxs-lookup"><span data-stu-id="0811e-253">The implementation of a control provides a data model and interaction model.</span></span> <span data-ttu-id="0811e-254">Model interakce definuje sadu příkazů (např. Zavřete pro okno) a vazby jako vstup gesta (jako je například kliknutí na červené X v horním rohu okna).</span><span class="sxs-lookup"><span data-stu-id="0811e-254">The interaction model defines a set of commands (like Close for a window) and bindings to input gestures (like clicking the red X in the upper corner of the window).</span></span> <span data-ttu-id="0811e-255">Datový model poskytuje sada vlastností k přizpůsobení modelu interakce nebo přizpůsobení zobrazení (určené šabloně).</span><span class="sxs-lookup"><span data-stu-id="0811e-255">The data model provides a set of properties to either customize the interaction model or customize the display (determined by the template).</span></span>  
  
 <span data-ttu-id="0811e-256">Toto rozdělení mezi datový model (Vlastnosti), modelu interakce (příkazů a událostí) a zobrazení modelu (šablony) umožňuje úplného přizpůsobení vzhledu a chování ovládacího prvku.</span><span class="sxs-lookup"><span data-stu-id="0811e-256">This split between the data model (properties), interaction model (commands and events), and display model (templates) enables complete customization of a control’s look and behavior.</span></span>  
  
 <span data-ttu-id="0811e-257">Běžné aspekt datový model ovládacích prvků je modelu obsahu.</span><span class="sxs-lookup"><span data-stu-id="0811e-257">A common aspect of the data model of controls is the content model.</span></span> <span data-ttu-id="0811e-258">Pokud se podíváte na ovládací prvek jako <xref:System.Windows.Controls.Button>, zobrazí se, že má vlastnost s názvem "Obsah" typu <xref:System.Object>.</span><span class="sxs-lookup"><span data-stu-id="0811e-258">If you look at a control like <xref:System.Windows.Controls.Button>, you will see that it has a property named "Content" of type <xref:System.Object>.</span></span> <span data-ttu-id="0811e-259">V [!INCLUDE[TLA#tla_winforms](../../../../includes/tlasharptla-winforms-md.md)] a [!INCLUDE[TLA#tla_aspnet](../../../../includes/tlasharptla-aspnet-md.md)], tato vlastnost by obvykle řetězec – ale která omezuje typ obsahu, můžete umístit do tlačítko.</span><span class="sxs-lookup"><span data-stu-id="0811e-259">In [!INCLUDE[TLA#tla_winforms](../../../../includes/tlasharptla-winforms-md.md)] and [!INCLUDE[TLA#tla_aspnet](../../../../includes/tlasharptla-aspnet-md.md)], this property would typically be a string – however that limits the type of content you can put in a button.</span></span> <span data-ttu-id="0811e-260">Obsah pro tlačítko může být buď jednoduchý řetězec, objekt komplexní dat nebo strom celý elementu.</span><span class="sxs-lookup"><span data-stu-id="0811e-260">Content for a button can either be a simple string, a complex data object, or an entire element tree.</span></span> <span data-ttu-id="0811e-261">V případě objekt dat datová šablona slouží k vytvoření zobrazení.</span><span class="sxs-lookup"><span data-stu-id="0811e-261">In the case of a data object, the data template is used to construct a display.</span></span>  
  
<a name="Summary"></a>   
## <a name="summary"></a><span data-ttu-id="0811e-262">Souhrn</span><span class="sxs-lookup"><span data-stu-id="0811e-262">Summary</span></span>  
 [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)]<span data-ttu-id="0811e-263"> slouží ke umožňují vytvářet dynamické, systémy prezentace řízených daty.</span><span class="sxs-lookup"><span data-stu-id="0811e-263"> is designed to allow you to create dynamic, data driven presentation systems.</span></span> <span data-ttu-id="0811e-264">Každý součástí systému slouží k vytváření objektů prostřednictvím sady vlastností daná jednotka chování.</span><span class="sxs-lookup"><span data-stu-id="0811e-264">Every part of the system is designed to create objects through property sets that drive behavior.</span></span> <span data-ttu-id="0811e-265">Datová vazba je základní součástí systému a jsou integrované v každé vrstvě.</span><span class="sxs-lookup"><span data-stu-id="0811e-265">Data binding is a fundamental part of the system, and is integrated at every layer.</span></span>  
  
 <span data-ttu-id="0811e-266">Tradiční aplikace vytvořit zobrazení a pak vytvořte vazbu k některým datům.</span><span class="sxs-lookup"><span data-stu-id="0811e-266">Traditional applications create a display and then bind to some data.</span></span> <span data-ttu-id="0811e-267">V [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)], vše, co o řízení, každý aspekt zobrazení, je generován nějaký typ datové vazby.</span><span class="sxs-lookup"><span data-stu-id="0811e-267">In [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)], everything about the control, every aspect of the display, is generated by some type of data binding.</span></span> <span data-ttu-id="0811e-268">Vytvoření ovládacího prvku složený uvnitř tlačítko a jeho zobrazení vytvoření vazby na vlastnost obsahu na tlačítko se zobrazí text prvku tlačítko Najít.</span><span class="sxs-lookup"><span data-stu-id="0811e-268">The text found inside a button is displayed by creating a composed control inside of the button and binding its display to the button’s content property.</span></span>  
  
 <span data-ttu-id="0811e-269">Když začnete vývoj [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] na základě aplikací, musí mít velmi dobře.</span><span class="sxs-lookup"><span data-stu-id="0811e-269">When you begin developing [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] based applications, it should feel very familiar.</span></span> <span data-ttu-id="0811e-270">Můžete nastavit vlastnosti, použijte objektů a dat vazby prakticky stejně, můžete pomocí [!INCLUDE[TLA#tla_winforms](../../../../includes/tlasharptla-winforms-md.md)] nebo [!INCLUDE[TLA#tla_aspnet](../../../../includes/tlasharptla-aspnet-md.md)].</span><span class="sxs-lookup"><span data-stu-id="0811e-270">You can set properties, use objects, and data bind in much the same way that you can using [!INCLUDE[TLA#tla_winforms](../../../../includes/tlasharptla-winforms-md.md)] or [!INCLUDE[TLA#tla_aspnet](../../../../includes/tlasharptla-aspnet-md.md)].</span></span> <span data-ttu-id="0811e-271">S hlubší rozbor do architektura [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)], zjistíte, že existuje možnost pro vytvoření mnohem širší aplikace, které zásadně data považovat ovladač jádra aplikace.</span><span class="sxs-lookup"><span data-stu-id="0811e-271">With a deeper investigation into the architecture of [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)], you'll find that the possibility exists for creating much richer applications that fundamentally treat data as the core driver of the application.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="0811e-272">Viz také</span><span class="sxs-lookup"><span data-stu-id="0811e-272">See Also</span></span>  
 <xref:System.Windows.Media.Visual>  
 <xref:System.Windows.UIElement>  
 <xref:System.Windows.Input.ICommand>  
 <xref:System.Windows.FrameworkElement>  
 <xref:System.Windows.Threading.DispatcherObject>  
 <xref:System.Windows.Input.CommandBinding>  
 <xref:System.Windows.Controls.Control>  
 [<span data-ttu-id="0811e-273">Přehled datových vazeb</span><span class="sxs-lookup"><span data-stu-id="0811e-273">Data Binding Overview</span></span>](../../../../docs/framework/wpf/data/data-binding-overview.md)  
 [<span data-ttu-id="0811e-274">Rozložení</span><span class="sxs-lookup"><span data-stu-id="0811e-274">Layout</span></span>](../../../../docs/framework/wpf/advanced/layout.md)  
 [<span data-ttu-id="0811e-275">Přehled animace</span><span class="sxs-lookup"><span data-stu-id="0811e-275">Animation Overview</span></span>](../../../../docs/framework/wpf/graphics-multimedia/animation-overview.md)
