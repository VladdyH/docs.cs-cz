---
title: 'Návod: Vytvoření hlavního podrobného formuláře pomocí dvou prvkům Windows Forms DataGridView'
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- DataGridView control [Windows Forms], master/detail form
- parent-child tables [Windows Forms], displaying on Windows Forms
- master-details lists [Windows Forms], displaying on Windows Forms
- walkthroughs [Windows Forms], DataGridView control
ms.assetid: c5fa29e8-47f7-4691-829b-0e697a691f36
ms.openlocfilehash: 38f7c6197fb3ee79119e41ab9620bc3aa2b21900
ms.sourcegitcommit: 3d5d33f384eeba41b2dff79d096f47ccc8d8f03d
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 05/04/2018
ms.locfileid: "33529438"
---
# <a name="walkthrough-creating-a-masterdetail-form-using-two-windows-forms-datagridview-controls"></a><span data-ttu-id="4092c-102">Návod: Vytvoření hlavního/podrobného formuláře pomocí dvou ovládacích prvků Windows Forms DataGridView</span><span class="sxs-lookup"><span data-stu-id="4092c-102">Walkthrough: Creating a Master/Detail Form Using Two Windows Forms DataGridView Controls</span></span>
<span data-ttu-id="4092c-103">Jeden z nejběžnějších scénářů pro použití <xref:System.Windows.Forms.DataGridView> ovládacího prvku *a podrobností* formuláře, ve kterém se zobrazí relaci nadřazený podřízený mezi dvěma tabulkami databáze.</span><span class="sxs-lookup"><span data-stu-id="4092c-103">One of the most common scenarios for using the <xref:System.Windows.Forms.DataGridView> control is the *master/detail* form, in which a parent/child relationship between two database tables is displayed.</span></span> <span data-ttu-id="4092c-104">Výběr řádků v tabulce hlavní způsobí, že aktualizace s použitím dat odpovídající podřízené tabulky podrobností.</span><span class="sxs-lookup"><span data-stu-id="4092c-104">Selecting rows in the master table causes the detail table to update with the corresponding child data.</span></span>  
  
 <span data-ttu-id="4092c-105">Implementace hlavního a podrobného formuláře je snadný při použití interakce mezi <xref:System.Windows.Forms.DataGridView> řízení a <xref:System.Windows.Forms.BindingSource> součásti.</span><span class="sxs-lookup"><span data-stu-id="4092c-105">Implementing a master/detail form is easy using the interaction between the <xref:System.Windows.Forms.DataGridView> control and the <xref:System.Windows.Forms.BindingSource> component.</span></span> <span data-ttu-id="4092c-106">V tomto návodu vytvoříte formuláře pomocí dvou <xref:System.Windows.Forms.DataGridView> ovládací prvky a dvě <xref:System.Windows.Forms.BindingSource> součásti.</span><span class="sxs-lookup"><span data-stu-id="4092c-106">In this walkthrough, you will build the form using two <xref:System.Windows.Forms.DataGridView> controls and two <xref:System.Windows.Forms.BindingSource> components.</span></span> <span data-ttu-id="4092c-107">Formulář se zobrazí dvě související tabulky v ukázkové databázi Northwind SQL Server: `Customers` a `Orders`.</span><span class="sxs-lookup"><span data-stu-id="4092c-107">The form will show two related tables in the Northwind SQL Server sample database: `Customers` and `Orders`.</span></span> <span data-ttu-id="4092c-108">Jakmile budete hotovi, budete mít formulář, který zobrazuje všechny zákazníky v databázi v hlavní <xref:System.Windows.Forms.DataGridView> a všechny objednávky pro vybraného zákazníka. podrobně <xref:System.Windows.Forms.DataGridView>.</span><span class="sxs-lookup"><span data-stu-id="4092c-108">When you are finished, you will have a form that shows all the customers in the database in the master <xref:System.Windows.Forms.DataGridView> and all the orders for the selected customer in the detail <xref:System.Windows.Forms.DataGridView>.</span></span>  
  
 <span data-ttu-id="4092c-109">Zkopírujte kód v tomto tématu v jednom seznamu, najdete v části [postupy: vytvoření hlavního a podrobného formuláře pomocí dvou prvkům Windows Forms DataGridView](../../../../docs/framework/winforms/controls/create-a-master-detail-form-using-two-datagridviews.md).</span><span class="sxs-lookup"><span data-stu-id="4092c-109">To copy the code in this topic as a single listing, see [How to: Create a Master/Detail Form Using Two Windows Forms DataGridView Controls](../../../../docs/framework/winforms/controls/create-a-master-detail-form-using-two-datagridviews.md).</span></span>  
  
## <a name="prerequisites"></a><span data-ttu-id="4092c-110">Požadavky</span><span class="sxs-lookup"><span data-stu-id="4092c-110">Prerequisites</span></span>  
 <span data-ttu-id="4092c-111">K dokončení tohoto návodu, budete potřebovat:</span><span class="sxs-lookup"><span data-stu-id="4092c-111">In order to complete this walkthrough, you will need:</span></span>  
  
-   <span data-ttu-id="4092c-112">Přístup k serveru, který má ukázková databáze Northwind SQL Server.</span><span class="sxs-lookup"><span data-stu-id="4092c-112">Access to a server that has the Northwind SQL Server sample database.</span></span>  
  
## <a name="creating-the-form"></a><span data-ttu-id="4092c-113">Vytvoření formuláře</span><span class="sxs-lookup"><span data-stu-id="4092c-113">Creating the form</span></span>  
  
#### <a name="to-create-a-masterdetail-form"></a><span data-ttu-id="4092c-114">K vytvoření hlavního a podrobného formuláře</span><span class="sxs-lookup"><span data-stu-id="4092c-114">To create a master/detail form</span></span>  
  
1.  <span data-ttu-id="4092c-115">Vytvořte třídu, která je odvozena z <xref:System.Windows.Forms.Form> a obsahuje dva <xref:System.Windows.Forms.DataGridView> ovládací prvky a dvě <xref:System.Windows.Forms.BindingSource> součásti.</span><span class="sxs-lookup"><span data-stu-id="4092c-115">Create a class that derives from <xref:System.Windows.Forms.Form> and contains two <xref:System.Windows.Forms.DataGridView> controls and two <xref:System.Windows.Forms.BindingSource> components.</span></span> <span data-ttu-id="4092c-116">Následující kód poskytuje základní formuláře inicializace a zahrnuje `Main` metoda.</span><span class="sxs-lookup"><span data-stu-id="4092c-116">The following code provides basic form initialization and includes a `Main` method.</span></span> <span data-ttu-id="4092c-117">Pokud použijete návrháře Visual Studio k vytvoření formuláře, můžete použít Návrháře generovaný kód místo tento kód, ale musíte použít názvy ukazuje deklarace proměnných sem.</span><span class="sxs-lookup"><span data-stu-id="4092c-117">If you use the Visual Studio designer to create your form, you can use the designer generated code instead of this code, but be sure to use the names shown in the variable declarations here.</span></span>  
  
     [!code-csharp[System.Windows.Forms.DataGridViewMasterDetails#01](../../../../samples/snippets/csharp/VS_Snippets_Winforms/System.Windows.Forms.DataGridViewMasterDetails/CS/masterdetails.cs#01)]
     [!code-vb[System.Windows.Forms.DataGridViewMasterDetails#01](../../../../samples/snippets/visualbasic/VS_Snippets_Winforms/System.Windows.Forms.DataGridViewMasterDetails/VB/masterdetails.vb#01)]  
    [!code-csharp[System.Windows.Forms.DataGridViewMasterDetails#02](../../../../samples/snippets/csharp/VS_Snippets_Winforms/System.Windows.Forms.DataGridViewMasterDetails/CS/masterdetails.cs#02)]
    [!code-vb[System.Windows.Forms.DataGridViewMasterDetails#02](../../../../samples/snippets/visualbasic/VS_Snippets_Winforms/System.Windows.Forms.DataGridViewMasterDetails/VB/masterdetails.vb#02)]  
  
2.  <span data-ttu-id="4092c-118">Implementujte metodu v definici třídy svého formuláře pro zpracování podrobnosti připojení k databázi.</span><span class="sxs-lookup"><span data-stu-id="4092c-118">Implement a method in your form's class definition for handling the detail of connecting to the database.</span></span> <span data-ttu-id="4092c-119">Tento příklad používá `GetData` metoda, která naplní <xref:System.Data.DataSet> objektu, přidá <xref:System.Data.DataRelation> objektu do datové sady a vazby <xref:System.Windows.Forms.BindingSource> součásti.</span><span class="sxs-lookup"><span data-stu-id="4092c-119">This example uses a `GetData` method that populates a <xref:System.Data.DataSet> object, adds a <xref:System.Data.DataRelation> object to the data set, and binds the <xref:System.Windows.Forms.BindingSource> components.</span></span> <span data-ttu-id="4092c-120">Nastavte `connectionString` proměnné na hodnotu, která je vhodná pro vaši databázi.</span><span class="sxs-lookup"><span data-stu-id="4092c-120">Be sure to set the `connectionString` variable to a value that is appropriate for your database.</span></span>  
  
    > [!IMPORTANT]
    >  <span data-ttu-id="4092c-121">Ukládání citlivé informace, jako jsou hesla, v připojovacím řetězci může ovlivnit zabezpečení vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="4092c-121">Storing sensitive information, such as a password, within the connection string can affect the security of your application.</span></span> <span data-ttu-id="4092c-122">Bezpečnější způsob, jak řídit přístup k databázi, je ověřování systému Windows (označované také jako integrované zabezpečení).</span><span class="sxs-lookup"><span data-stu-id="4092c-122">Using Windows Authentication (also known as integrated security) is a more secure way to control access to a database.</span></span> <span data-ttu-id="4092c-123">Další informace najdete v tématu [chrání informace o připojení](../../../../docs/framework/data/adonet/protecting-connection-information.md).</span><span class="sxs-lookup"><span data-stu-id="4092c-123">For more information, see [Protecting Connection Information](../../../../docs/framework/data/adonet/protecting-connection-information.md).</span></span>  
  
     [!code-csharp[System.Windows.Forms.DataGridViewMasterDetails#20](../../../../samples/snippets/csharp/VS_Snippets_Winforms/System.Windows.Forms.DataGridViewMasterDetails/CS/masterdetails.cs#20)]
     [!code-vb[System.Windows.Forms.DataGridViewMasterDetails#20](../../../../samples/snippets/visualbasic/VS_Snippets_Winforms/System.Windows.Forms.DataGridViewMasterDetails/VB/masterdetails.vb#20)]  
  
3.  <span data-ttu-id="4092c-124">Implementujte obslužnou rutinu pro daný formulář <xref:System.Windows.Forms.Form.Load> událost, která se váže <xref:System.Windows.Forms.DataGridView> prvky <xref:System.Windows.Forms.BindingSource> součásti a volání `GetData` metoda.</span><span class="sxs-lookup"><span data-stu-id="4092c-124">Implement a handler for your form's <xref:System.Windows.Forms.Form.Load> event that binds the <xref:System.Windows.Forms.DataGridView> controls to the <xref:System.Windows.Forms.BindingSource> components and calls the `GetData` method.</span></span> <span data-ttu-id="4092c-125">Následující příklad obsahuje kód, který změní <xref:System.Windows.Forms.DataGridView> sloupců, aby vyhovovaly zobrazená data.</span><span class="sxs-lookup"><span data-stu-id="4092c-125">The following example includes code that resizes <xref:System.Windows.Forms.DataGridView> columns to fit the displayed data.</span></span>  
  
     [!code-csharp[System.Windows.Forms.DataGridViewMasterDetails#10](../../../../samples/snippets/csharp/VS_Snippets_Winforms/System.Windows.Forms.DataGridViewMasterDetails/CS/masterdetails.cs#10)]
     [!code-vb[System.Windows.Forms.DataGridViewMasterDetails#10](../../../../samples/snippets/visualbasic/VS_Snippets_Winforms/System.Windows.Forms.DataGridViewMasterDetails/VB/masterdetails.vb#10)]  
  
## <a name="testing-the-application"></a><span data-ttu-id="4092c-126">Testování aplikace</span><span class="sxs-lookup"><span data-stu-id="4092c-126">Testing the Application</span></span>  
 <span data-ttu-id="4092c-127">Nyní můžete otestovat formuláře a ujistěte se, že se chová podle očekávání.</span><span class="sxs-lookup"><span data-stu-id="4092c-127">You can now test the form to make sure it behaves as expected.</span></span>  
  
#### <a name="to-test-the-form"></a><span data-ttu-id="4092c-128">Postup testování formuláře</span><span class="sxs-lookup"><span data-stu-id="4092c-128">To test the form</span></span>  
  
-   <span data-ttu-id="4092c-129">Zkompilování a spuštění aplikace.</span><span class="sxs-lookup"><span data-stu-id="4092c-129">Compile and run the application.</span></span>  
  
     <span data-ttu-id="4092c-130">Zobrazí se dvě <xref:System.Windows.Forms.DataGridView> prvky, nad sebou.</span><span class="sxs-lookup"><span data-stu-id="4092c-130">You will see two <xref:System.Windows.Forms.DataGridView> controls, one above the other.</span></span> <span data-ttu-id="4092c-131">V horní části jsou zákazníci z Northwind `Customers` tabulky a v dolní části jsou `Orders` odpovídající vybraného zákazníka.</span><span class="sxs-lookup"><span data-stu-id="4092c-131">On top are the customers from the Northwind `Customers` table, and at the bottom are the `Orders` corresponding to the selected customer.</span></span> <span data-ttu-id="4092c-132">Při výběru různé řádky v horní <xref:System.Windows.Forms.DataGridView>, obsah dolní <xref:System.Windows.Forms.DataGridView> odpovídajícím způsobem.</span><span class="sxs-lookup"><span data-stu-id="4092c-132">As you select different rows in the upper <xref:System.Windows.Forms.DataGridView>, the contents of the lower <xref:System.Windows.Forms.DataGridView> change accordingly.</span></span>  
  
## <a name="next-steps"></a><span data-ttu-id="4092c-133">Další kroky</span><span class="sxs-lookup"><span data-stu-id="4092c-133">Next Steps</span></span>  
 <span data-ttu-id="4092c-134">Tato aplikace získáte základní znalosti o <xref:System.Windows.Forms.DataGridView> možnosti ovládacího prvku.</span><span class="sxs-lookup"><span data-stu-id="4092c-134">This application gives you a basic understanding of the <xref:System.Windows.Forms.DataGridView> control's capabilities.</span></span> <span data-ttu-id="4092c-135">Můžete přizpůsobit vzhled a chování <xref:System.Windows.Forms.DataGridView> řízení několika způsoby:</span><span class="sxs-lookup"><span data-stu-id="4092c-135">You can customize the appearance and behavior of the <xref:System.Windows.Forms.DataGridView> control in several ways:</span></span>  
  
-   <span data-ttu-id="4092c-136">Změna stylů ohraničení a záhlaví.</span><span class="sxs-lookup"><span data-stu-id="4092c-136">Change border and header styles.</span></span> <span data-ttu-id="4092c-137">Další informace najdete v tématu [postupy: Změna ohraničení a mřížky styly v ovládacím prvku Windows Forms DataGridView](../../../../docs/framework/winforms/controls/change-the-border-and-gridline-styles-in-the-datagrid.md).</span><span class="sxs-lookup"><span data-stu-id="4092c-137">For more information, see [How to: Change the Border and Gridline Styles in the Windows Forms DataGridView Control](../../../../docs/framework/winforms/controls/change-the-border-and-gridline-styles-in-the-datagrid.md).</span></span>  
  
-   <span data-ttu-id="4092c-138">Povolit nebo zakázat vstupu uživatele na <xref:System.Windows.Forms.DataGridView> ovládacího prvku.</span><span class="sxs-lookup"><span data-stu-id="4092c-138">Enable or restrict user input to the <xref:System.Windows.Forms.DataGridView> control.</span></span> <span data-ttu-id="4092c-139">Další informace najdete v tématu [postupy: zabránění přidávání řádků a odstranění v ovládacím prvku Windows Forms DataGridView](../../../../docs/framework/winforms/controls/prevent-row-addition-and-deletion-datagridview.md), a [postup: Zkontrolujte sloupce jen pro čtení v ovládacím prvku Windows Forms DataGridView](../../../../docs/framework/winforms/controls/how-to-make-columns-read-only-in-the-windows-forms-datagridview-control.md).</span><span class="sxs-lookup"><span data-stu-id="4092c-139">For more information, see [How to: Prevent Row Addition and Deletion in the Windows Forms DataGridView Control](../../../../docs/framework/winforms/controls/prevent-row-addition-and-deletion-datagridview.md), and [How to: Make Columns Read-Only in the Windows Forms DataGridView Control](../../../../docs/framework/winforms/controls/how-to-make-columns-read-only-in-the-windows-forms-datagridview-control.md).</span></span>  
  
-   <span data-ttu-id="4092c-140">Ověření vstupu uživatele na <xref:System.Windows.Forms.DataGridView> ovládacího prvku.</span><span class="sxs-lookup"><span data-stu-id="4092c-140">Validate user input to the <xref:System.Windows.Forms.DataGridView> control.</span></span> <span data-ttu-id="4092c-141">Další informace najdete v tématu [návod: ověřování dat v ovládacím prvku Windows Forms DataGridView](../../../../docs/framework/winforms/controls/walkthrough-validating-data-in-the-windows-forms-datagridview-control.md).</span><span class="sxs-lookup"><span data-stu-id="4092c-141">For more information, see [Walkthrough: Validating Data in the Windows Forms DataGridView Control](../../../../docs/framework/winforms/controls/walkthrough-validating-data-in-the-windows-forms-datagridview-control.md).</span></span>  
  
-   <span data-ttu-id="4092c-142">Zpracování pomocí virtuální režim velmi velkých datových sad.</span><span class="sxs-lookup"><span data-stu-id="4092c-142">Handle very large data sets using virtual mode.</span></span> <span data-ttu-id="4092c-143">Další informace najdete v tématu [návod: Implementace virtuálního režimu v ovládacím prvku Windows Forms DataGridView](../../../../docs/framework/winforms/controls/implementing-virtual-mode-wf-datagridview-control.md).</span><span class="sxs-lookup"><span data-stu-id="4092c-143">For more information, see [Walkthrough: Implementing Virtual Mode in the Windows Forms DataGridView Control](../../../../docs/framework/winforms/controls/implementing-virtual-mode-wf-datagridview-control.md).</span></span>  
  
-   <span data-ttu-id="4092c-144">Přizpůsobení vzhledu buněk.</span><span class="sxs-lookup"><span data-stu-id="4092c-144">Customize the appearance of cells.</span></span> <span data-ttu-id="4092c-145">Další informace najdete v tématu [postupy: přizpůsobení vzhledu buněk v ovládacím prvku Windows Forms DataGridView](../../../../docs/framework/winforms/controls/customize-the-appearance-of-cells-in-the-datagrid.md) a [postupy: nastavení výchozí styly buňky pro ovládací prvek Windows Forms DataGridView](../../../../docs/framework/winforms/controls/how-to-set-default-cell-styles-for-the-windows-forms-datagridview-control.md).</span><span class="sxs-lookup"><span data-stu-id="4092c-145">For more information, see [How to: Customize the Appearance of Cells in the Windows Forms DataGridView Control](../../../../docs/framework/winforms/controls/customize-the-appearance-of-cells-in-the-datagrid.md) and [How to: Set Default Cell Styles for the Windows Forms DataGridView Control](../../../../docs/framework/winforms/controls/how-to-set-default-cell-styles-for-the-windows-forms-datagridview-control.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="4092c-146">Viz také</span><span class="sxs-lookup"><span data-stu-id="4092c-146">See Also</span></span>  
 <xref:System.Windows.Forms.DataGridView>  
 <xref:System.Windows.Forms.BindingSource>  
 [<span data-ttu-id="4092c-147">Zobrazení dat v ovládacím prvku Windows Forms DataGridView</span><span class="sxs-lookup"><span data-stu-id="4092c-147">Displaying Data in the Windows Forms DataGridView Control</span></span>](../../../../docs/framework/winforms/controls/displaying-data-in-the-windows-forms-datagridview-control.md)  
 [<span data-ttu-id="4092c-148">Postupy: Vytvoření hlavního/podrobného formuláře pomocí dvou ovládacích prvků Windows Forms DataGridView</span><span class="sxs-lookup"><span data-stu-id="4092c-148">How to: Create a Master/Detail Form Using Two Windows Forms DataGridView Controls</span></span>](../../../../docs/framework/winforms/controls/create-a-master-detail-form-using-two-datagridviews.md)  
 [<span data-ttu-id="4092c-149">Ochrana informací o připojení</span><span class="sxs-lookup"><span data-stu-id="4092c-149">Protecting Connection Information</span></span>](../../../../docs/framework/data/adonet/protecting-connection-information.md)
