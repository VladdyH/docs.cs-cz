---
title: "Důležité informace o zabezpečení sestavení"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-bcl
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- assemblies [.NET Framework], security
- signcodes
- names [.NET Framework], assemblies
- strong-named assemblies, security considerations
- signing assemblies
- assemblies [.NET Framework], signing
- granting permissions, assemblies
- assemblies [.NET Framework], strong-named
- names [.NET Framework], strong names
- permissions [.NET Framework], assemblies
- security [.NET Framework], assemblies
- integrity with assemblies
ms.assetid: 1b5439c1-f3d5-4529-bd69-01814703d067
caps.latest.revision: "14"
author: rpetrusha
ms.author: ronpet
manager: wpickett
ms.openlocfilehash: 11c66af3a855dac649d5f09944d68fb77a0e8619
ms.sourcegitcommit: 4f3fef493080a43e70e951223894768d36ce430a
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 11/21/2017
---
# <a name="assembly-security-considerations"></a><span data-ttu-id="83a56-102">Důležité informace o zabezpečení sestavení</span><span class="sxs-lookup"><span data-stu-id="83a56-102">Assembly Security Considerations</span></span>
<span data-ttu-id="83a56-103"><a name="top"></a>Při vytváření sestavení, můžete sadu oprávnění, která sestavení vyžaduje ke spuštění.</span><span class="sxs-lookup"><span data-stu-id="83a56-103"><a name="top"></a> When you build an assembly, you can specify a set of permissions that the assembly requires to run.</span></span> <span data-ttu-id="83a56-104">Zda jsou některá oprávnění udělit nebo nejsou udělena sestavení je založena na důkaz.</span><span class="sxs-lookup"><span data-stu-id="83a56-104">Whether certain permissions are granted or not granted to an assembly is based on evidence.</span></span>  
  
 <span data-ttu-id="83a56-105">Existují dva způsoby distinct, důkaz se používá:</span><span class="sxs-lookup"><span data-stu-id="83a56-105">There are two distinct ways evidence is used:</span></span>  
  
-   <span data-ttu-id="83a56-106">Vstupní důkaz je sloučen s důkaz shromáždit zavaděčem vytvořit závěrečnou sadu důkaz slouží k rozlišení zásad.</span><span class="sxs-lookup"><span data-stu-id="83a56-106">The input evidence is merged with the evidence gathered by the loader to create a final set of evidence used for policy resolution.</span></span> <span data-ttu-id="83a56-107">Metody, které používají tuto sémantiku patří **Assembly.Load**, **Assembly.LoadFrom**, a **Activator.CreateInstance**.</span><span class="sxs-lookup"><span data-stu-id="83a56-107">The methods that use this semantic include **Assembly.Load**, **Assembly.LoadFrom**, and **Activator.CreateInstance**.</span></span>  
  
-   <span data-ttu-id="83a56-108">Vstupní důkaz se používá jako závěrečné sady důkaz slouží k rozlišení zásad v nezměněném stavu.</span><span class="sxs-lookup"><span data-stu-id="83a56-108">The input evidence is used unaltered as the final set of evidence used for policy resolution.</span></span> <span data-ttu-id="83a56-109">Metody, které používají tuto sémantiku patří **Assembly.Load(byte[])** a **AppDomain.DefineDynamicAssembly()**.</span><span class="sxs-lookup"><span data-stu-id="83a56-109">The methods that use this semantic include **Assembly.Load(byte[])** and **AppDomain.DefineDynamicAssembly()**.</span></span>  
  
 <span data-ttu-id="83a56-110">Volitelné oprávnění můžete udělit pomocí [zásady zabezpečení](../../../docs/framework/misc/code-access-security-basics.md) nastavit v počítači, kde se spustí sestavení.</span><span class="sxs-lookup"><span data-stu-id="83a56-110">Optional permissions can be granted by the [security policy](../../../docs/framework/misc/code-access-security-basics.md) set on the computer where the assembly will run.</span></span> <span data-ttu-id="83a56-111">Pokud chcete, aby váš kód zpracovávat všechny potenciální výjimky zabezpečení, můžete provést jednu z těchto možností:</span><span class="sxs-lookup"><span data-stu-id="83a56-111">If you want your code to handle all potential security exceptions, you can do one of the following:</span></span>  
  
-   <span data-ttu-id="83a56-112">Vložte žádost oprávnění pro všechna oprávnění kódu musí mít a zpracovat předem čas načítání selhání, který nastane, pokud nejsou udělena oprávnění.</span><span class="sxs-lookup"><span data-stu-id="83a56-112">Insert a permission request for all the permissions your code must have, and handle up front the load-time failure that occurs if the permissions are not granted.</span></span>  
  
-   <span data-ttu-id="83a56-113">Nepoužívejte žádost o oprávnění k získání oprávnění kódu může být nutné, ale připravte se na zpracování výjimek zabezpečení, pokud nejsou udělena oprávnění.</span><span class="sxs-lookup"><span data-stu-id="83a56-113">Do not use a permission request to obtain permissions your code might need, but be prepared to handle security exceptions if permissions are not granted.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="83a56-114">Zabezpečení je komplexní oblasti a mají mnoho možností pro vybírat.</span><span class="sxs-lookup"><span data-stu-id="83a56-114">Security is a complex area, and you have many options to choose from.</span></span> <span data-ttu-id="83a56-115">Další informace najdete v tématu [klíčové koncepty zabezpečení](../../../docs/standard/security/key-security-concepts.md).</span><span class="sxs-lookup"><span data-stu-id="83a56-115">For more information, see [Key Security Concepts](../../../docs/standard/security/key-security-concepts.md).</span></span>  
  
 <span data-ttu-id="83a56-116">V okamžiku načtení sestavení důkaz slouží jako vstup pro zásady zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="83a56-116">At load time, the assembly's evidence is used as input to security policy.</span></span> <span data-ttu-id="83a56-117">Zásady zabezpečení je vytvořena podle podniku a správce počítače a nastavení zásad pro uživatele a určuje sadu oprávnění udělenou po provedení všech spravovaného kódu.</span><span class="sxs-lookup"><span data-stu-id="83a56-117">Security policy is established by the enterprise and the computer's administrator as well as by user policy settings, and determines the set of permissions that is granted to all managed code when executed.</span></span> <span data-ttu-id="83a56-118">Zásady zabezpečení lze navázat pro vydavatele sestavení (Pokud má podpisový generovaných nástrojem podpis), sestavení pro webový server a zónu (v Internet Exploreru podmínky) byl stažen z nebo pro silný název sestavení.</span><span class="sxs-lookup"><span data-stu-id="83a56-118">Security policy can be established for the publisher of the assembly (if it has a signing tool generated signature), for the Web site and zone (in Internet Explorer terms) the assembly was downloaded from, or for the assembly's strong name.</span></span> <span data-ttu-id="83a56-119">Správce počítače můžete například vytvořit zásady zabezpečení, která umožňuje všechny kód stáhnout z webu a podepsaný daný software společnosti pro přístup k databázi v počítači, ale neposkytuje přístup k zápisu na disku.</span><span class="sxs-lookup"><span data-stu-id="83a56-119">For example, a computer's administrator can establish security policy that allows all code downloaded from a Web site and signed by a given software company to access a database on a computer, but does not grant access to write to the computer's disk.</span></span>  
  
## <a name="strong-named-assemblies-and-signing-tools"></a><span data-ttu-id="83a56-120">Sestavení se silným názvem a podepisování nástroje</span><span class="sxs-lookup"><span data-stu-id="83a56-120">Strong-Named Assemblies and Signing Tools</span></span>  
 <span data-ttu-id="83a56-121">Sestavení můžete přihlásit dva různé ale vzájemně doplňují způsoby: silným názvem nebo pomocí [SignTool.exe (nástroj pro podpis)](../../../docs/framework/tools/signtool-exe.md).</span><span class="sxs-lookup"><span data-stu-id="83a56-121">You can sign an assembly in two different but complementary ways: with a strong name or by using  [SignTool.exe (Sign Tool)](../../../docs/framework/tools/signtool-exe.md).</span></span> <span data-ttu-id="83a56-122">Podepisování sestavení se silným názvem přidá veřejný šifrovací klíče do souboru, který obsahuje manifest sestavení.</span><span class="sxs-lookup"><span data-stu-id="83a56-122">Signing an assembly with a strong name adds public key encryption to the file containing the assembly manifest.</span></span> <span data-ttu-id="83a56-123">Podpis silného názvu pomáhá ověřit jedinečnost názvu, zabránit falšování a poskytnout volající některé identity když odkaz je vyřešený.</span><span class="sxs-lookup"><span data-stu-id="83a56-123">Strong name signing helps to verify name uniqueness, prevent name spoofing, and provide callers with some identity when a reference is resolved.</span></span>  
  
 <span data-ttu-id="83a56-124">Ale žádná úroveň důvěryhodnosti souvisí se silným názvem, díky čemuž [SignTool.exe (nástroj pro podpis)](../../../docs/framework/tools/signtool-exe.md) důležité.</span><span class="sxs-lookup"><span data-stu-id="83a56-124">However, no level of trust is associated with a strong name, which makes [SignTool.exe (Sign Tool)](../../../docs/framework/tools/signtool-exe.md) important.</span></span> <span data-ttu-id="83a56-125">Tyto podepisovací nástroje vyžadují vydavatele k prokázání své identity autority třetích stran a získat certifikát.</span><span class="sxs-lookup"><span data-stu-id="83a56-125">The two signing tools require a publisher to prove its identity to a third-party authority and obtain a certificate.</span></span> <span data-ttu-id="83a56-126">Tento certifikát se pak vloží v souboru a můžete použít správce můžete rozhodnout, jestli důvěřovat pravosti kódu.</span><span class="sxs-lookup"><span data-stu-id="83a56-126">This certificate is then embedded in your file and can be used by an administrator to decide whether to trust the code's authenticity.</span></span>  
  
 <span data-ttu-id="83a56-127">Můžete udělit silným názvem i digitální podpis vytvořený [SignTool.exe (nástroj pro podpis)](../../../docs/framework/tools/signtool-exe.md) k sestavení, nebo můžete použít buď samostatně.</span><span class="sxs-lookup"><span data-stu-id="83a56-127">You can give both a strong name and a digital signature created using [SignTool.exe (Sign Tool)](../../../docs/framework/tools/signtool-exe.md) to an assembly, or you can use either alone.</span></span> <span data-ttu-id="83a56-128">Tyto podepisovací nástroje můžete přihlásit pouze jeden soubor současně; pro vícesouborového sestavení podepsat soubor, který obsahuje manifest sestavení.</span><span class="sxs-lookup"><span data-stu-id="83a56-128">The two signing tools can sign only one file at a time; for a multifile assembly, you sign the file that contains the assembly manifest.</span></span> <span data-ttu-id="83a56-129">Silné jméno je uložené v souboru, který obsahuje manifest sestavení, ale podpis vytvořený [SignTool.exe (nástroj pro podpis)](../../../docs/framework/tools/signtool-exe.md) je uložen v vyhrazené sektoru přenosné spustitelného souboru (PE), který obsahuje manifest sestavení.</span><span class="sxs-lookup"><span data-stu-id="83a56-129">A strong name is stored in the file containing the assembly manifest, but a signature created using [SignTool.exe (Sign Tool)](../../../docs/framework/tools/signtool-exe.md) is stored in a reserved slot in the portable executable (PE) file containing the assembly manifest.</span></span> <span data-ttu-id="83a56-130">Podepisování sestavení pomocí [SignTool.exe (nástroj pro podpis)](../../../docs/framework/tools/signtool-exe.md) lze (s nebo bez silný název) Pokud již máte hierarchie důvěryhodnosti, které jsou závislé na[SignTool.exe (nástroj pro podpis)](../../../docs/framework/tools/signtool-exe.md) generované podpisu nebo pokud vaše zásady používá jenom část klíče a nekontroluje řetěz certifikátů.</span><span class="sxs-lookup"><span data-stu-id="83a56-130">Signing of an assembly using [SignTool.exe (Sign Tool)](../../../docs/framework/tools/signtool-exe.md) can be used (with or without a strong name) when you already have a trust hierarchy that relies on[SignTool.exe (Sign Tool)](../../../docs/framework/tools/signtool-exe.md) generated signatures, or when your policy uses only the key portion and does not check a chain of trust.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="83a56-131">Při použití silným názvem a podepisování podpis nástroj na sestavení, musí být silný název nejprve přiřazen.</span><span class="sxs-lookup"><span data-stu-id="83a56-131">When using both a strong name and a signing tool signature on an assembly, the strong name must be assigned first.</span></span>  
  
 <span data-ttu-id="83a56-132">Modul common language runtime také provede ověření algoritmu hash; manifest sestavení obsahuje seznam všech souborů, které tvoří sestavení, včetně hodnota hash každý soubor, který existoval, když byl vytvořený v manifestu.</span><span class="sxs-lookup"><span data-stu-id="83a56-132">The common language runtime also performs a hash verification; the assembly manifest contains a list of all files that make up the assembly, including a hash of each file as it existed when the manifest was built.</span></span> <span data-ttu-id="83a56-133">Po načtení jednotlivých souborů je z obsahu vytvořena hodnota hash a ta je porovnána s hodnotou hash uloženou v manifestu.</span><span class="sxs-lookup"><span data-stu-id="83a56-133">As each file is loaded, its contents are hashed and compared with the hash value stored in the manifest.</span></span> <span data-ttu-id="83a56-134">Pokud se tyto dvě hodnoty hash neshodují, sestavení se nepodaří načíst.</span><span class="sxs-lookup"><span data-stu-id="83a56-134">If the two hashes do not match, the assembly fails to load.</span></span>  
  
 <span data-ttu-id="83a56-135">Protože silné pojmenování a podepisování pomocí [SignTool.exe (nástroj pro podpis)](../../../docs/framework/tools/signtool-exe.md) zaručí integritu, zásady zabezpečení přístupu kódu můžete založit na tyto dvě formy důkaz sestavení.</span><span class="sxs-lookup"><span data-stu-id="83a56-135">Because strong naming and signing using [SignTool.exe (Sign Tool)](../../../docs/framework/tools/signtool-exe.md) guarantee integrity, you can base code access security policy on these two forms of assembly evidence.</span></span> <span data-ttu-id="83a56-136">Silné názvy a podepisování pomocí [SignTool.exe (nástroj pro podpis)](../../../docs/framework/tools/signtool-exe.md) zaručí integritu prostřednictvím digitálních podpisů a certifikátů.</span><span class="sxs-lookup"><span data-stu-id="83a56-136">Strong naming and signing using [SignTool.exe (Sign Tool)](../../../docs/framework/tools/signtool-exe.md) guarantee integrity through digital signatures and certificates.</span></span> <span data-ttu-id="83a56-137">Všechny zmíněné technologie – hash ověření, silné názvy a podepisování pomocí [SignTool.exe (nástroj pro podpis)](../../../docs/framework/tools/signtool-exe.md)– spolupracují, aby se ujistěte, že sestavení nezměnil žádným způsobem.</span><span class="sxs-lookup"><span data-stu-id="83a56-137">All the technologies mentioned—hash verification, strong naming, and signing using [SignTool.exe (Sign Tool)](../../../docs/framework/tools/signtool-exe.md)—work together to ensure that the assembly has not been altered in any way.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="83a56-138">Viz také</span><span class="sxs-lookup"><span data-stu-id="83a56-138">See Also</span></span>  
 [<span data-ttu-id="83a56-139">Sestavení se silným názvem</span><span class="sxs-lookup"><span data-stu-id="83a56-139">Strong-Named Assemblies</span></span>](../../../docs/framework/app-domains/strong-named-assemblies.md)  
 [<span data-ttu-id="83a56-140">Sestavení v modulu Common Language Runtime</span><span class="sxs-lookup"><span data-stu-id="83a56-140">Assemblies in the Common Language Runtime</span></span>](../../../docs/framework/app-domains/assemblies-in-the-common-language-runtime.md)  
 [<span data-ttu-id="83a56-141">SignTool.exe (nástroj pro podpis)</span><span class="sxs-lookup"><span data-stu-id="83a56-141">SignTool.exe (Sign Tool)</span></span>](../../../docs/framework/tools/signtool-exe.md)
