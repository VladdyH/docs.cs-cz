---
title: Použití delegátů aktivity
ms.custom: ''
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: e33cf876-8979-440b-9b23-4a12d1139960
caps.latest.revision: 12
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.workload:
- dotnet
ms.openlocfilehash: a8b30882ef2e75f21c3b90d0e13ff06b52fe5229
ms.sourcegitcommit: 94d33cadc5ff81d2ac389bf5f26422c227832052
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 04/30/2018
---
# <a name="using-activity-delegates"></a><span data-ttu-id="96d5c-102">Použití delegátů aktivity</span><span class="sxs-lookup"><span data-stu-id="96d5c-102">Using Activity Delegates</span></span>
<span data-ttu-id="96d5c-103">Delegáti aktivity povolit aktivity autorům vystavit zpětná volání s konkrétní podpisy, pro které uživatelé aktivity zadat na základě aktivity obslužné rutiny.</span><span class="sxs-lookup"><span data-stu-id="96d5c-103">Activity delegates enable activity authors to expose callbacks with specific signatures, for which users of the activity can provide activity-based handlers.</span></span> <span data-ttu-id="96d5c-104">K dispozici jsou dva typy aktivity delegáti: <xref:System.Activities.ActivityAction%601> se používá k definování delegáti aktivity, které nemají návratovou hodnotu, a <xref:System.Activities.ActivityFunc%601> se používá k definování delegáti aktivity, které mají návratovou hodnotu.</span><span class="sxs-lookup"><span data-stu-id="96d5c-104">Two types of activity delegates are available: <xref:System.Activities.ActivityAction%601> is used to define activity delegates that do not have a return value, and <xref:System.Activities.ActivityFunc%601> is used to define activity delegates that do have a return value.</span></span>  
  
 <span data-ttu-id="96d5c-105">Delegáti aktivity jsou užitečný ve scénářích, kde podřízené aktivity musí být omezen na situaci, kdy určité podpis.</span><span class="sxs-lookup"><span data-stu-id="96d5c-105">Activity delegates are useful in scenarios where a child activity must be constrained to having a certain signature.</span></span> <span data-ttu-id="96d5c-106">Například <xref:System.Activities.Statements.While> aktivita může obsahovat jakýkoli typ podřízené aktivity s žádná omezení, ale text <xref:System.Activities.Statements.ForEach%601> aktivita <xref:System.Activities.ActivityAction%601>a podřízené aktivity, které se nakonec provedený <xref:System.Activities.Statements.ForEach%601> musí mít <xref:System.Activities.InArgument%601> , je stejný typ členy kolekce, <xref:System.Activities.Statements.ForEach%601> zobrazí.</span><span class="sxs-lookup"><span data-stu-id="96d5c-106">For example, a <xref:System.Activities.Statements.While> activity can contain any type of child activity with no constraints, but the body of a <xref:System.Activities.Statements.ForEach%601> activity is an <xref:System.Activities.ActivityAction%601>, and the child activity that is ultimately executed by <xref:System.Activities.Statements.ForEach%601> must have an <xref:System.Activities.InArgument%601> that is the same type of the members of the collection that the <xref:System.Activities.Statements.ForEach%601> enumerates.</span></span>  
  
## <a name="using-activityaction"></a><span data-ttu-id="96d5c-107">Pomocí ActivityAction</span><span class="sxs-lookup"><span data-stu-id="96d5c-107">Using ActivityAction</span></span>  
 <span data-ttu-id="96d5c-108">Několik [!INCLUDE[netfx_current_short](../../../includes/netfx-current-short-md.md)] aktivity pomocí aktivity akcí, například <xref:System.Activities.Statements.Catch> aktivity a <xref:System.Activities.Statements.ForEach%601> aktivity.</span><span class="sxs-lookup"><span data-stu-id="96d5c-108">Several [!INCLUDE[netfx_current_short](../../../includes/netfx-current-short-md.md)] activities use activity actions, such as the <xref:System.Activities.Statements.Catch> activity and the <xref:System.Activities.Statements.ForEach%601> activity.</span></span> <span data-ttu-id="96d5c-109">V každém případě aktivity akce představuje umístění Určuje, kde Autor pracovního postupu aktivitu k poskytnutí požadované chování při sestavování pomocí jedné z těchto aktivit pracovního postupu.</span><span class="sxs-lookup"><span data-stu-id="96d5c-109">In each case, the activity action represents a location where the workflow author specifies an activity to provide the desired behavior when composing a workflow using one of these activities.</span></span> <span data-ttu-id="96d5c-110">V následujícím příkladu <xref:System.Activities.Statements.ForEach%601> aktivita se používá k zobrazení textu v okně konzoly.</span><span class="sxs-lookup"><span data-stu-id="96d5c-110">In the following example, a <xref:System.Activities.Statements.ForEach%601> activity is used to display text to the console window.</span></span> <span data-ttu-id="96d5c-111">Text <xref:System.Activities.Statements.ForEach%601> zadané pomocí <xref:System.Activities.ActivityAction%601> odpovídající typ <xref:System.Activities.Statements.ForEach%601> tedy řetězec.</span><span class="sxs-lookup"><span data-stu-id="96d5c-111">The body of the <xref:System.Activities.Statements.ForEach%601> is specified by using an <xref:System.Activities.ActivityAction%601> that matches the type of the <xref:System.Activities.Statements.ForEach%601> which is string.</span></span> <span data-ttu-id="96d5c-112"><xref:System.Activities.Statements.WriteLine> Aktivity zadaný v <xref:System.Activities.ActivityDelegate.Handler%2A> má jeho <xref:System.Activities.Statements.WriteLine.Text%2A> argument vázána na řetězcové hodnoty v kolekci, <xref:System.Activities.Statements.ForEach%601> opakuje aktivity.</span><span class="sxs-lookup"><span data-stu-id="96d5c-112">The <xref:System.Activities.Statements.WriteLine> activity specified in the <xref:System.Activities.ActivityDelegate.Handler%2A> has its <xref:System.Activities.Statements.WriteLine.Text%2A> argument bound to the string values in the collection that the <xref:System.Activities.Statements.ForEach%601> activity iterates.</span></span>  
  
 [!code-csharp[CFX_ActivityExample#6](../../../samples/snippets/csharp/VS_Snippets_CFX/CFX_ActivityExample/cs/Program.cs#6)]  
  
 <span data-ttu-id="96d5c-113">ActionArgument se používá k toku jednotlivé položky v kolekci WriteLine.</span><span class="sxs-lookup"><span data-stu-id="96d5c-113">The actionArgument is used to flow the individual items in the collection to the WriteLine.</span></span> <span data-ttu-id="96d5c-114">Po vyvolání pracovního postupu se zobrazí následující výstup do konzoly.</span><span class="sxs-lookup"><span data-stu-id="96d5c-114">When the workflow is invoked, the following output is displayed to the console.</span></span>  
 ``` 
 HelloWorld.
 ```  
<span data-ttu-id="96d5c-115">V příkladech v tomto tématu použijte syntaxi inicializace objektu.</span><span class="sxs-lookup"><span data-stu-id="96d5c-115">The examples in this topic use object initialization syntax.</span></span> <span data-ttu-id="96d5c-116">Syntaxe inicializace objektu může být užitečný způsob, jak vytvořit definice pracovního postupu v kódu, protože poskytuje hierarchické zobrazení aktivity v pracovním postupu a znázorňuje vztah mezi aktivitami.</span><span class="sxs-lookup"><span data-stu-id="96d5c-116">Object initialization syntax can be a useful way to create workflow definitions in code because it provides a hierarchical view of the activities in the workflow and shows the relationship between the activities.</span></span> <span data-ttu-id="96d5c-117">Neexistuje žádný požadavek na použití syntaxe inicializace objektu při prostřednictvím kódu programu vytváření pracovních postupů.</span><span class="sxs-lookup"><span data-stu-id="96d5c-117">There is no requirement to use object initialization syntax when you programmatically create workflows.</span></span> <span data-ttu-id="96d5c-118">V následujícím příkladu je funkčně srovnatelný předchozí příklad.</span><span class="sxs-lookup"><span data-stu-id="96d5c-118">The following example is functionally equivalent to the previous example.</span></span>  
  
 [!code-csharp[CFX_ActivityExample#7](../../../samples/snippets/csharp/VS_Snippets_CFX/CFX_ActivityExample/cs/Program.cs#7)]  
  
 <span data-ttu-id="96d5c-119">Další informace o inicializátory objektů najdete v tématu [postupy: Inicializace objektů bez volání konstruktoru (C# Průvodce programováním)](http://go.microsoft.com/fwlink/?LinkId=161015) a [postupy: Deklarace objektu pomocí inicializátoru objektu](http://go.microsoft.com/fwlink/?LinkId=161016).</span><span class="sxs-lookup"><span data-stu-id="96d5c-119">For more information about object initializers, see [How to: Initialize Objects without Calling a Constructor (C# Programming Guide)](http://go.microsoft.com/fwlink/?LinkId=161015) and [How to: Declare an Object by Using an Object Initializer](http://go.microsoft.com/fwlink/?LinkId=161016).</span></span>  
  
 <span data-ttu-id="96d5c-120">V následujícím příkladu <xref:System.Activities.Statements.TryCatch> aktivita se používá v pracovním postupu.</span><span class="sxs-lookup"><span data-stu-id="96d5c-120">In the following example, a <xref:System.Activities.Statements.TryCatch> activity is used in a workflow.</span></span> <span data-ttu-id="96d5c-121"><xref:System.ApplicationException> Je vyvolána v tomto pracovním postupu a jsou zpracována <xref:System.Activities.Statements.Catch%601> aktivity.</span><span class="sxs-lookup"><span data-stu-id="96d5c-121">An <xref:System.ApplicationException> is thrown by the workflow, and is handled by a <xref:System.Activities.Statements.Catch%601> activity.</span></span> <span data-ttu-id="96d5c-122">Obslužná rutina pro <xref:System.Activities.Statements.Catch%601> aktivity aktivity akce je <xref:System.Activities.Statements.WriteLine> aktivity a podrobnosti výjimky je plynoucích prostřednictvím se pomocí `ex` <xref:System.Activities.DelegateInArgument%601>.</span><span class="sxs-lookup"><span data-stu-id="96d5c-122">The handler for the <xref:System.Activities.Statements.Catch%601> activity's activity action is a <xref:System.Activities.Statements.WriteLine> activity, and the exception detail is flowed through to it using the `ex` <xref:System.Activities.DelegateInArgument%601>.</span></span>  
  
 [!code-csharp[CFX_WorkflowApplicationExample#33](../../../samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#33)]  
  
 <span data-ttu-id="96d5c-123">Při vytváření vlastních aktivit, které definuje <xref:System.Activities.ActivityAction%601>, použijte <xref:System.Activities.Statements.InvokeAction%601> modelování volání této <xref:System.Activities.ActivityAction%601>.</span><span class="sxs-lookup"><span data-stu-id="96d5c-123">When creating a custom activity that defines an <xref:System.Activities.ActivityAction%601>, use an <xref:System.Activities.Statements.InvokeAction%601> to model the invocation of that <xref:System.Activities.ActivityAction%601>.</span></span> <span data-ttu-id="96d5c-124">V tomto příkladu vlastní `WriteLineWithNotification` aktivity je definována.</span><span class="sxs-lookup"><span data-stu-id="96d5c-124">In this example, a custom `WriteLineWithNotification` activity is defined.</span></span> <span data-ttu-id="96d5c-125">Tato aktivita se skládá z <xref:System.Activities.Statements.Sequence> obsahující <xref:System.Activities.Statements.WriteLine> následuje aktivity <xref:System.Activities.Statements.InvokeAction%601> , který spustí <xref:System.Activities.ActivityAction%601> , která má jeden argument řetězec.</span><span class="sxs-lookup"><span data-stu-id="96d5c-125">This activity is composed of a <xref:System.Activities.Statements.Sequence> that contains a <xref:System.Activities.Statements.WriteLine> activity followed by an <xref:System.Activities.Statements.InvokeAction%601> that invokes an <xref:System.Activities.ActivityAction%601> that takes one string argument.</span></span>  
  
 [!code-csharp[CFX_ActivityExample#1](../../../samples/snippets/csharp/VS_Snippets_CFX/CFX_ActivityExample/cs/Program.cs#1)]  
  
 <span data-ttu-id="96d5c-126">Vytvoření pracovního postupu pomocí `WriteLineWithNotification` aktivity, Autor pracovního postupu určuje požadovanou vlastní logiky v akci aktivity <xref:System.Activities.ActivityDelegate.Handler%2A>.</span><span class="sxs-lookup"><span data-stu-id="96d5c-126">When a workflow is created by using the `WriteLineWithNotification` activity, the workflow author specifies the desired custom logic in the activity action’s <xref:System.Activities.ActivityDelegate.Handler%2A>.</span></span> <span data-ttu-id="96d5c-127">V tomto příkladu se vytvoří pracovní postup využívající `WriteLineWithNotification` aktivitu a <xref:System.Activities.Statements.WriteLine> aktivita se používá jako <xref:System.Activities.ActivityDelegate.Handler%2A>.</span><span class="sxs-lookup"><span data-stu-id="96d5c-127">In this example, a workflow is created that use the `WriteLineWithNotification` activity, and a <xref:System.Activities.Statements.WriteLine> activity is used as the <xref:System.Activities.ActivityDelegate.Handler%2A>.</span></span>  
  
 [!code-csharp[CFX_ActivityExample#2](../../../samples/snippets/csharp/VS_Snippets_CFX/CFX_ActivityExample/cs/Program.cs#2)]  
  
 <span data-ttu-id="96d5c-128">Existuje více obecné verzí <xref:System.Activities.Statements.InvokeAction%601> a <xref:System.Activities.ActivityAction%601> zadaná pro předání jeden nebo více argumentů.</span><span class="sxs-lookup"><span data-stu-id="96d5c-128">There are multiple generic versions of <xref:System.Activities.Statements.InvokeAction%601> and <xref:System.Activities.ActivityAction%601> provided for passing one or more arguments.</span></span>  
  
## <a name="using-activityfunc"></a><span data-ttu-id="96d5c-129">Pomocí ActivityFunc</span><span class="sxs-lookup"><span data-stu-id="96d5c-129">Using ActivityFunc</span></span>  
 <span data-ttu-id="96d5c-130"><xref:System.Activities.ActivityAction%601> je užitečné, když není žádná hodnota výsledek z aktivity, a <xref:System.Activities.ActivityFunc%601> se používá, pokud je vrácena hodnota výsledek.</span><span class="sxs-lookup"><span data-stu-id="96d5c-130"><xref:System.Activities.ActivityAction%601> is useful when there is no result value from the activity, and <xref:System.Activities.ActivityFunc%601> is used when a result value is returned.</span></span> <span data-ttu-id="96d5c-131">Při vytváření vlastních aktivit, které definuje <xref:System.Activities.ActivityFunc%601>, použijte <xref:System.Activities.Expressions.InvokeFunc%601> modelování volání této <xref:System.Activities.ActivityFunc%601>.</span><span class="sxs-lookup"><span data-stu-id="96d5c-131">When creating a custom activity that defines an <xref:System.Activities.ActivityFunc%601>, use an <xref:System.Activities.Expressions.InvokeFunc%601> to model the invocation of that <xref:System.Activities.ActivityFunc%601>.</span></span> <span data-ttu-id="96d5c-132">V následujícím příkladu `WriteFillerText` aktivity je definována.</span><span class="sxs-lookup"><span data-stu-id="96d5c-132">In the following example, a `WriteFillerText` activity is defined.</span></span> <span data-ttu-id="96d5c-133">K poskytování Výplň textu, <xref:System.Activities.Expressions.InvokeFunc%601> je zadán, který používá argument celé číslo a má výsledném řetězci.</span><span class="sxs-lookup"><span data-stu-id="96d5c-133">To supply the filler text, an <xref:System.Activities.Expressions.InvokeFunc%601> is specified that takes an integer argument and has a string result.</span></span> <span data-ttu-id="96d5c-134">Jakmile se načte text výplň, se zobrazí na pomocí konzoly <xref:System.Activities.Statements.WriteLine> aktivity.</span><span class="sxs-lookup"><span data-stu-id="96d5c-134">Once the filler text is retrieved, it is displayed to the console using a <xref:System.Activities.Statements.WriteLine> activity.</span></span>  
  
 [!code-csharp[CFX_ActivityExample#3](../../../samples/snippets/csharp/VS_Snippets_CFX/CFX_ActivityExample/cs/Program.cs#3)]  
  
 <span data-ttu-id="96d5c-135">Zadat text, musí být použita aktivity, který přijímá jeden `int` argument a výsledek řetězec obsahuje.</span><span class="sxs-lookup"><span data-stu-id="96d5c-135">To supply the text, an activity must be used that takes one `int` argument and has a string result.</span></span> <span data-ttu-id="96d5c-136">Tento příklad ukazuje `TextGenerator` aktivity, která splňuje tyto požadavky.</span><span class="sxs-lookup"><span data-stu-id="96d5c-136">This example shows a `TextGenerator` activity that meets these requirements.</span></span>  
  
 [!code-csharp[CFX_ActivityExample#4](../../../samples/snippets/csharp/VS_Snippets_CFX/CFX_ActivityExample/cs/Program.cs#4)]  
  
 <span data-ttu-id="96d5c-137">Použít `TextGenerator` aktivitu `WriteFillerText` aktivity, je zadat jako <xref:System.Activities.ActivityDelegate.Handler%2A>.</span><span class="sxs-lookup"><span data-stu-id="96d5c-137">To use the `TextGenerator` activity with the `WriteFillerText` activity, specify it as the <xref:System.Activities.ActivityDelegate.Handler%2A>.</span></span>  
  
 [!code-csharp[CFX_ActivityExample#5](../../../samples/snippets/csharp/VS_Snippets_CFX/CFX_ActivityExample/cs/Program.cs#5)]  
  
## <a name="see-also"></a><span data-ttu-id="96d5c-138">Viz také</span><span class="sxs-lookup"><span data-stu-id="96d5c-138">See Also</span></span>  
 [<span data-ttu-id="96d5c-139">Zveřejnění a vyvolání akcí aktivit</span><span class="sxs-lookup"><span data-stu-id="96d5c-139">Exposing and Invoking ActivityActions</span></span>](../../../docs/framework/windows-workflow-foundation/samples/exposing-and-invoking-activityactions.md)
