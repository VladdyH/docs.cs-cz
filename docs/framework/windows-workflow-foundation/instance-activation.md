---
title: Instance aktivace
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 134c3f70-5d4e-46d0-9d49-469a6643edd8
caps.latest.revision: "6"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.openlocfilehash: d33e809a0db0b812cf7311d7b5686d9125e80976
ms.sourcegitcommit: ce279f2d7fe2220e6ea0a25a8a7a5370ddf8d9f0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 12/02/2017
---
# <a name="instance-activation"></a><span data-ttu-id="9f32e-102">Instance aktivace</span><span class="sxs-lookup"><span data-stu-id="9f32e-102">Instance Activation</span></span>
<span data-ttu-id="9f32e-103">Ukládání Instance pracovního postupu SQL spustí vnitřní úloh, která pravidelně probudí a zjišťuje instance pracovního postupu spustitelného nebo activatable v databázi trvalost.</span><span class="sxs-lookup"><span data-stu-id="9f32e-103">The SQL Workflow Instance Store runs an internal task that periodically wakes up and detects runnable or activatable workflow instances in the persistence database.</span></span> <span data-ttu-id="9f32e-104">Pokud najde instanci spustitelného pracovního postupu, upozorní hostitele pracovního postupu, který je schopen aktivace instance.</span><span class="sxs-lookup"><span data-stu-id="9f32e-104">If it finds a runnable workflow instance, it notifies the workflow host that is capable of activating the instance.</span></span> <span data-ttu-id="9f32e-105">Pokud instance úložiště najde instance activatable pracovního postupu, upozorní obecné hostitele, který aktivuje hostitele pracovního postupu, který pak spustí instanci pracovního postupu.</span><span class="sxs-lookup"><span data-stu-id="9f32e-105">If the instance store finds an activatable workflow instance, it notifies a generic host that activates a workflow host, which in turn runs the workflow instance.</span></span> <span data-ttu-id="9f32e-106">Následující části v tomto tématu popisují proces aktivace instance podrobně.</span><span class="sxs-lookup"><span data-stu-id="9f32e-106">The following sections in this topic explain the instance activation process in detail.</span></span>  
  
##  <a name="RunnableSection"></a><span data-ttu-id="9f32e-107">Zjišťování a aktivace instance spustitelného pracovních postupů</span><span class="sxs-lookup"><span data-stu-id="9f32e-107">Detecting and Activating Runnable Workflow Instances</span></span>  
 <span data-ttu-id="9f32e-108">Ukládání Instance pracovního postupu SQL považuje instance pracovního postupu *spustitelného* Pokud instance není v pozastaveném stavu nebo stavu dokončení a splňuje následující podmínky:</span><span class="sxs-lookup"><span data-stu-id="9f32e-108">The SQL Workflow Instance Store considers a workflow instance *runnable* if the instance is not in the suspended state or the completed state and satisfies the following conditions:</span></span>  
  
-   <span data-ttu-id="9f32e-109">Instance je odemčený a má čekající časovač s vypršenou platností.</span><span class="sxs-lookup"><span data-stu-id="9f32e-109">The instance is unlocked and has a pending timer that has expired.</span></span>  
  
-   <span data-ttu-id="9f32e-110">Instance má na zámek vypršela platnost.</span><span class="sxs-lookup"><span data-stu-id="9f32e-110">The instance has an expired lock on it.</span></span>  
  
-   <span data-ttu-id="9f32e-111">Instance je odemčený a její stav je **zpracování**.</span><span class="sxs-lookup"><span data-stu-id="9f32e-111">The instance is unlocked and its status is **Executing**.</span></span>  
  
 <span data-ttu-id="9f32e-112">Vyvolá ukládání Instance pracovního postupu SQL <xref:System.Activities.DurableInstancing.HasRunnableWorkflowEvent> Pokud najde spustitelného instance.</span><span class="sxs-lookup"><span data-stu-id="9f32e-112">The SQL Workflow Instance Store raises the <xref:System.Activities.DurableInstancing.HasRunnableWorkflowEvent> when it finds a runnable instance.</span></span> <span data-ttu-id="9f32e-113">Poté SqlWorkflowInstanceStore zastaví monitorování až <xref:System.Activities.DurableInstancing.TryLoadRunnableWorkflowCommand> je jednou volána v úložišti.</span><span class="sxs-lookup"><span data-stu-id="9f32e-113">After this, the SqlWorkflowInstanceStore stops monitoring until the <xref:System.Activities.DurableInstancing.TryLoadRunnableWorkflowCommand> is called once on the store.</span></span>  
  
 <span data-ttu-id="9f32e-114">Hostitele pracovního postupu, který má přihlášený(á) k odběru <xref:System.Activities.DurableInstancing.HasRunnableWorkflowEvent> a provede podporující načítání instance <xref:System.Activities.DurableInstancing.TryLoadRunnableWorkflowCommand> proti úložiště instance k načtení instance do paměti.</span><span class="sxs-lookup"><span data-stu-id="9f32e-114">A workflow host that has subscribed for the <xref:System.Activities.DurableInstancing.HasRunnableWorkflowEvent> and capable of loading the instance executes the <xref:System.Activities.DurableInstancing.TryLoadRunnableWorkflowCommand> against the instance store to load the instance into memory.</span></span> <span data-ttu-id="9f32e-115">Hostitel pracovního postupu se považuje za schopná načítání instance pracovního postupu, pokud vlastnost metadat hostitele a instance **WorkflowServiceType** nastaví na stejnou hodnotu.</span><span class="sxs-lookup"><span data-stu-id="9f32e-115">A workflow host is considered capable of loading a workflow instance if the host and the instance have metadata property **WorkflowServiceType** set to the same value.</span></span>  
  
## <a name="detecting-and-activating-activatable-workflow-instances"></a><span data-ttu-id="9f32e-116">Zjišťování a aktivace instancí Activatable pracovních postupů</span><span class="sxs-lookup"><span data-stu-id="9f32e-116">Detecting and Activating Activatable Workflow Instances</span></span>  
 <span data-ttu-id="9f32e-117">Instance pracovního postupu se považuje za *activatable* Pokud instance je spustitelného a není žádné hostitele pracovního postupu, který je schopen načítání instance běží na počítači.</span><span class="sxs-lookup"><span data-stu-id="9f32e-117">A workflow instance is considered *activatable* if the instance is runnable and there is no workflow host that is capable of loading the instance is running on the computer.</span></span> <span data-ttu-id="9f32e-118">Pro danou definici instanci spustitelného pracovního postupu v tématu zjištění a aktivace spustitelného instance pracovního postupu výše.</span><span class="sxs-lookup"><span data-stu-id="9f32e-118">See Detecting and Activating Runnable Workflow Instances above for the definition of a runnable workflow instance.</span></span>  
  
 <span data-ttu-id="9f32e-119">Vyvolá ukládání Instance pracovního postupu SQL <xref:System.Activities.DurableInstancing.HasActivatableWorkflowEvent> Pokud najde instance pracovního postupu activatable v databázi.</span><span class="sxs-lookup"><span data-stu-id="9f32e-119">The SQL Workflow Instance Store raises the <xref:System.Activities.DurableInstancing.HasActivatableWorkflowEvent> when it finds an activatable workflow instance in the database.</span></span> <span data-ttu-id="9f32e-120">Poté SqlWorkflowInstanceStore zastaví monitorování až <xref:System.Activities.DurableInstancing.QueryActivatableWorkflowsCommand> je jednou volána v úložišti.</span><span class="sxs-lookup"><span data-stu-id="9f32e-120">After this, the SqlWorkflowInstanceStore stops monitoring until the <xref:System.Activities.DurableInstancing.QueryActivatableWorkflowsCommand> is called once on the store.</span></span>  
  
 <span data-ttu-id="9f32e-121">Při obecné hostitele, který má přihlášený(á) k odběru <xref:System.Activities.DurableInstancing.HasActivatableWorkflowEvent> přijímá události, se provede <xref:System.Activities.DurableInstancing.QueryActivatableWorkflowsCommand> proti úložiště instance k získání aktivační parametry, které jsou potřebné pro vytvoření hostitele pracovního postupu.</span><span class="sxs-lookup"><span data-stu-id="9f32e-121">When a generic host that has subscribed for the <xref:System.Activities.DurableInstancing.HasActivatableWorkflowEvent> receives the event, it executes the <xref:System.Activities.DurableInstancing.QueryActivatableWorkflowsCommand> against the instance store to obtain activation parameters required to create a workflow host.</span></span> <span data-ttu-id="9f32e-122">Obecné hostitel používá tyto aktivační parametry pro vytvoření hostitele pracovního postupu, který naopak načte a spustí instanci spustitelného služby.</span><span class="sxs-lookup"><span data-stu-id="9f32e-122">The generic host uses these activation parameters to create a workflow host, which in turn loads and runs the runnable service instance.</span></span>  
  
## <a name="generic-hosts"></a><span data-ttu-id="9f32e-123">Obecné hostitele</span><span class="sxs-lookup"><span data-stu-id="9f32e-123">Generic Hosts</span></span>  
 <span data-ttu-id="9f32e-124">Obecné hostitel je hostitele, který má hodnotu vlastnosti metadat **WorkflowServiceType** pro obecné hostitele je nastavena na **WorkflowServiceType.Any** k označení, že je zpracovat libovolný typ pracovního postupu.</span><span class="sxs-lookup"><span data-stu-id="9f32e-124">A generic host is a host with the value of the metadata property **WorkflowServiceType** for generic hosts is set to **WorkflowServiceType.Any** to indicate that it can handle any workflow type.</span></span> <span data-ttu-id="9f32e-125">Obecné hostitele má parametr XName s názvem **ActivationType**.</span><span class="sxs-lookup"><span data-stu-id="9f32e-125">A generic host has an XName parameter named **ActivationType**.</span></span>  
  
 <span data-ttu-id="9f32e-126">V současné době podporuje ukládání Instance pracovního postupu SQL obecné hostitele s hodnotou parametru ActivationType nastavena na **WAS**.</span><span class="sxs-lookup"><span data-stu-id="9f32e-126">Currently, the SQL Workflow Instance Store supports generic hosts with value of the ActivationType parameter set to **WAS**.</span></span> <span data-ttu-id="9f32e-127">Pokud ActivationType není nastaven na WAS, vyvolá ukládání Instance pracovního postupu SQL <xref:System.Runtime.DurableInstancing.InstancePersistenceException>.</span><span class="sxs-lookup"><span data-stu-id="9f32e-127">If the ActivationType is not set to WAS, the SQL Workflow Instance Store throws an <xref:System.Runtime.DurableInstancing.InstancePersistenceException>.</span></span> <span data-ttu-id="9f32e-128">Služba správy pracovního postupu, který se dodává s [!INCLUDE[dublin](../../../includes/dublin-md.md)] je obecný hostitele, který má typ aktivace nastavený na **WAS**.</span><span class="sxs-lookup"><span data-stu-id="9f32e-128">The Workflow Management Service that ships with the [!INCLUDE[dublin](../../../includes/dublin-md.md)] is a generic host that has the activation type set to **WAS**.</span></span>  
  
 <span data-ttu-id="9f32e-129">Aktivace WAS obecné hostitele vyžaduje sadu parametrů aktivace odvození adresa koncového bodu, na které je možné aktivovat nové hostitele.</span><span class="sxs-lookup"><span data-stu-id="9f32e-129">For WAS activation, a generic host requires a set of activation parameters to derive the endpoint address at which new hosts can be activated.</span></span> <span data-ttu-id="9f32e-130">Parametry aktivace pro aktivaci WAS jsou název lokality, cesta k aplikaci relativně k webu a cestu ke službě vzhledem k aplikaci.</span><span class="sxs-lookup"><span data-stu-id="9f32e-130">The activation parameters for WAS activation are name of the site, path to the application relative to the site, and path to the service relative to the application.</span></span> <span data-ttu-id="9f32e-131">Ukládání Instance pracovního postupu SQL ukládá tyto parametry aktivace během provádění <xref:System.Activities.DurableInstancing.SaveWorkflowCommand>.</span><span class="sxs-lookup"><span data-stu-id="9f32e-131">The SQL Workflow Instance Store stores these activation parameters during the execution of the <xref:System.Activities.DurableInstancing.SaveWorkflowCommand>.</span></span>  
  
## <a name="runnable-instances-detection-period"></a><span data-ttu-id="9f32e-132">Období detekce spustitelného instancí</span><span class="sxs-lookup"><span data-stu-id="9f32e-132">Runnable Instances Detection Period</span></span>  
 <span data-ttu-id="9f32e-133">**Spustitelného období zjišťování instancí** vlastnost úložiště Instance pracovního postupu SQL určuje časové období, po jejímž uplynutí ukládání Instance pracovního postupu SQL spustí úlohu detekce ke zjištění všech spustitelného nebo activatable pracovního postupu instance v databázi trvalost předchozího cyklu zjišťování.</span><span class="sxs-lookup"><span data-stu-id="9f32e-133">The **Runnable Instances Detection Period** property of the SQL Workflow Instance Store specifies the time period after which the SQL Workflow Instance Store runs a detection task to detect any runnable or activatable workflow instances in the persistence database after the previous detection cycle.</span></span> <span data-ttu-id="9f32e-134">V tématu [spustitelného období zjišťování instancí](../../../docs/framework/windows-workflow-foundation/runnable-instances-detection-period.md) další podrobnosti o této vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="9f32e-134">See [Runnable Instances Detection Period](../../../docs/framework/windows-workflow-foundation/runnable-instances-detection-period.md) for more details on this property.</span></span>
