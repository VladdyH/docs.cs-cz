---
title: "Externí Ruleset Toolkit"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: a306d283-a031-475e-aa01-9ae86e7adcb0
caps.latest.revision: "7"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.openlocfilehash: fcdd42700ad13eb8b81714cc97dafaa5bf45d2a2
ms.sourcegitcommit: ce279f2d7fe2220e6ea0a25a8a7a5370ddf8d9f0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 12/02/2017
---
# <a name="external-ruleset-toolkit"></a><span data-ttu-id="1e7b0-102">Externí Ruleset Toolkit</span><span class="sxs-lookup"><span data-stu-id="1e7b0-102">External Ruleset Toolkit</span></span>
<span data-ttu-id="1e7b0-103">Za normálních okolností Pokud použijete pravidla v rámci aplikace pracovního postupu, pravidla jsou součástí sestavení.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-103">Normally when rules are used within a workflow application, the rules are part of the assembly.</span></span> <span data-ttu-id="1e7b0-104">V některých případech můžete udržovat sady pravidel odděleně od sestavení tak, aby bylo možné aktualizovat bez opětovné sestavení a nasazení sestavení pracovního postupu.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-104">In some scenarios, you may want to maintain the RuleSets separately from the assembly so that they can be updated without rebuilding and deploying the workflow assembly.</span></span> <span data-ttu-id="1e7b0-105">Tato ukázka vám umožňuje spravovat a upravovat sady pravidel v databázi a přístup k tyto sady pravidel z pracovního postupu za běhu.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-105">This sample allows you to manage and edit RuleSets in a database and access those RuleSets from a workflow at runtime.</span></span> <span data-ttu-id="1e7b0-106">To umožňuje, aby automaticky začlenit RuleSet změny spuštěných instancí pracovního postupu.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-106">This enables running workflow instances to automatically incorporate RuleSet changes.</span></span>  
  
 <span data-ttu-id="1e7b0-107">Ukázka externí RuleSet Toolkit obsahuje nástroj založené na Windows Forms, který můžete použít ke správě a upravit RuleSet verze v databázi.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-107">The External RuleSet Toolkit sample contains a Windows Forms-based tool that you can use to manage and edit RuleSet versions in a database.</span></span> <span data-ttu-id="1e7b0-108">Zahrnuje taky aktivitu a hostitele služby pro provádění těchto pravidel.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-108">It also includes an activity and a host service for executing those rules.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="1e7b0-109">Tato ukázka vyžaduje [Microsoft SQL Server](http://go.microsoft.com/fwlink/?LinkId=96181).</span><span class="sxs-lookup"><span data-stu-id="1e7b0-109">This sample requires [Microsoft SQL Server](http://go.microsoft.com/fwlink/?LinkId=96181).</span></span>  
  
 [!INCLUDE[vsprvsext](../../../../includes/vsprvsext-md.md)]<span data-ttu-id="1e7b0-110">poskytuje editor RuleSet v rámci Windows Workflow Foundation (WF).</span><span class="sxs-lookup"><span data-stu-id="1e7b0-110"> provides a RuleSet editor as part of the Windows Workflow Foundation (WF).</span></span> <span data-ttu-id="1e7b0-111">Můžete spustit tento editor dvojitým kliknutím `Policy` aktivity v pracovním postupu; ho serializuje definovaný objekt RuleSet k souboru .rules přidružený k workflowu ( `Policy` aktivity spouští RuleSet instance pracovního postupu).</span><span class="sxs-lookup"><span data-stu-id="1e7b0-111">You can start this editor by double-clicking the `Policy` activity in a workflow; it serializes the defined RuleSet object to the .rules file associated with the workflow (a `Policy` activity runs a RuleSet instance against the workflow).</span></span> <span data-ttu-id="1e7b0-112">Při sestavování projektu workflow, je soubor .rules zkompilovat do sestavení jako prostředek.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-112">The .rules file is compiled into the assembly as a resource when you build the workflow project.</span></span>  
  
 <span data-ttu-id="1e7b0-113">Součástí této ukázkové zahrnout:</span><span class="sxs-lookup"><span data-stu-id="1e7b0-113">The components of this sample include:</span></span>  
  
-   <span data-ttu-id="1e7b0-114">Sada pravidel pro grafické uživatelské rozhraní nástroj, který můžete použít k úpravám a správě verzí RuleSet v databázi.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-114">A RuleSet graphical user interface tool that you can use to edit and manage RuleSet versions in the database.</span></span>  
  
-   <span data-ttu-id="1e7b0-115">Sada pravidel pro služby, který je nakonfigurován na hostiteli aplikace a přistupuje k sady pravidel z databáze.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-115">A RuleSet service that is configured on the host application and accesses RuleSets from the database.</span></span>  
  
-   <span data-ttu-id="1e7b0-116">`ExternalPolicy` Aktivity, která požaduje RuleSet ze služby RuleSet a spouští sada pravidel pro pracovní postup.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-116">An `ExternalPolicy` activity that requests a RuleSet from the RuleSet service and runs the RuleSet against the workflow.</span></span>  
  
 <span data-ttu-id="1e7b0-117">Interakce komponenty je znázorněno na obrázku 1.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-117">The interaction of the components is shown in Figure 1.</span></span> <span data-ttu-id="1e7b0-118">Následující části popisují jednotlivé komponenty.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-118">The sections that follow describe each component.</span></span>  
  
 <span data-ttu-id="1e7b0-119">![Koncepční přehled externí ukázka RuleSet](../../../../docs/framework/windows-workflow-foundation/samples/media/rulesettoolkitsampleoverview.gif "RuleSetToolkitSampleOverview")</span><span class="sxs-lookup"><span data-stu-id="1e7b0-119">![External RuleSet Sample Conceptual Overview](../../../../docs/framework/windows-workflow-foundation/samples/media/rulesettoolkitsampleoverview.gif "RuleSetToolkitSampleOverview")</span></span>  
  
 <span data-ttu-id="1e7b0-120">Obrázek 1: Ukázka přehled</span><span class="sxs-lookup"><span data-stu-id="1e7b0-120">Figure 1: Sample Overview</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="1e7b0-121">Ukázky může být již nainstalována na váš počítač.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-121">The samples may already be installed on your machine.</span></span> <span data-ttu-id="1e7b0-122">Před pokračováním zkontrolovat na následující adresář (výchozí).</span><span class="sxs-lookup"><span data-stu-id="1e7b0-122">Check for the following (default) directory before continuing.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples`  
>   
>  <span data-ttu-id="1e7b0-123">Pokud tento adresář neexistuje, přejděte na [Windows Communication Foundation (WCF) a ukázky Windows Workflow Foundation (WF) pro rozhraní .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) ke stažení všechny [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] a [!INCLUDE[wf1](../../../../includes/wf1-md.md)] ukázky.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-123">If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) to download all [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples.</span></span> <span data-ttu-id="1e7b0-124">Tato ukázka se nachází v následujícím adresáři.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-124">This sample is located in the following directory.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples\WF\Scenario\ExternalRuleSetToolKit`  
  
## <a name="ruleset-tool"></a><span data-ttu-id="1e7b0-125">Sada pravidel pro nástroj</span><span class="sxs-lookup"><span data-stu-id="1e7b0-125">RuleSet Tool</span></span>  
 <span data-ttu-id="1e7b0-126">Snímek obrazovky nástroje RuleSet je znázorněno na obrázku 2.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-126">A screen shot of the RuleSet tool is shown in Figure 2.</span></span> <span data-ttu-id="1e7b0-127">Z **pravidlo úložiště** nabídky, můžete načíst z databáze k dispozici sady pravidel a uložit upravené sady pravidel zpět do úložiště.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-127">From the **Rule Store** menu, you can load the available RuleSets from the database and save modified RuleSets back to the store.</span></span> <span data-ttu-id="1e7b0-128">Konfigurační soubor aplikace obsahuje připojovací řetězec databáze pro databázi RuleSet.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-128">An application configuration file provides a database connection string for the RuleSet database.</span></span> <span data-ttu-id="1e7b0-129">Když spustíte nástroj, automaticky se načte sady pravidel z nakonfigurované databáze.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-129">When you start the tool, it automatically loads the RuleSets from the configured database.</span></span>  
  
 <span data-ttu-id="1e7b0-130">![Externí RuleSet Toolket ukázkový výstup](../../../../docs/framework/windows-workflow-foundation/samples/media/rulesetbrowser.gif "RuleSetBrowser")</span><span class="sxs-lookup"><span data-stu-id="1e7b0-130">![External RuleSet Toolket Sample output](../../../../docs/framework/windows-workflow-foundation/samples/media/rulesetbrowser.gif "RuleSetBrowser")</span></span>  
  
 <span data-ttu-id="1e7b0-131">Obrázek 2: Sada pravidel pro prohlížeč</span><span class="sxs-lookup"><span data-stu-id="1e7b0-131">Figure 2: RuleSet Browser</span></span>  
  
 <span data-ttu-id="1e7b0-132">Sada pravidel pro nástroj aplikuje hlavní verze a podverze čísla sady pravidel, který vám umožní současně udržovat a uložit více verzí (poskytuje nástroj žádná konfigurace uzamčení nebo jiné funkce správy kromě schopnosti správy verzí).</span><span class="sxs-lookup"><span data-stu-id="1e7b0-132">The RuleSet tool applies major and minor version numbers to the RuleSets, allowing you to simultaneously maintain and store multiple versions (the tool provides no locking or other configuration management features in addition to the versioning capability).</span></span> <span data-ttu-id="1e7b0-133">Pomocí nástroje, můžete vytvořit nové verze RuleSet nebo odstranit existující verze.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-133">Using the tool, you can create new RuleSet versions or delete existing versions.</span></span> <span data-ttu-id="1e7b0-134">Když kliknete na tlačítko **nový**, nástroj vytvoří nový název RuleSet a použije verze 1.0.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-134">When you click **New**, the tool creates a new RuleSet name and applies version 1.0.</span></span> <span data-ttu-id="1e7b0-135">Při kopírování na verzi, nástroj vytvoří kopii vybrané RuleSet verze, včetně obsažená pravidla a přiřadí čísla verzí nové, jedinečné.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-135">When you copy a version, the tool creates a copy of the selected RuleSet version, including the contained rules, and assigns new, unique version numbers.</span></span> <span data-ttu-id="1e7b0-136">Tato čísla verze jsou založené na čísla verzí pro existující sady pravidel.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-136">These version numbers are based on the version numbers of existing RuleSets.</span></span> <span data-ttu-id="1e7b0-137">Můžete změnit název a verze čísla RuleSet pomocí přidružených polí na formuláři.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-137">You can change the RuleSet name and version numbers using the associated fields on the form.</span></span>  
  
 <span data-ttu-id="1e7b0-138">Když kliknete na tlačítko **upravit pravidla**, spustí RuleSet editor, jak je znázorněno na obrázku 3.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-138">When you click **Edit Rules**, the RuleSet editor starts, as shown in Figure 3.</span></span>  
  
 <span data-ttu-id="1e7b0-139">![Ukázkový výstup externích nástrojů RuleSet](../../../../docs/framework/windows-workflow-foundation/samples/media/ruleseteditor.gif "RuleSetEditor")</span><span class="sxs-lookup"><span data-stu-id="1e7b0-139">![External RuleSet Toolkit Sample Output](../../../../docs/framework/windows-workflow-foundation/samples/media/ruleseteditor.gif "RuleSetEditor")</span></span>  
  
 <span data-ttu-id="1e7b0-140">Obrázek 3: RuleSet editoru</span><span class="sxs-lookup"><span data-stu-id="1e7b0-140">Figure 3: RuleSet Editor</span></span>  
  
 <span data-ttu-id="1e7b0-141">Toto je znovu hostování editor dialogového okna, který je součástí Windows Workflow Foundation [!INCLUDE[vsprvs](../../../../includes/vsprvs-md.md)] doplňku.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-141">This is a re-hosting of the editor dialog that is part of the Windows Workflow Foundation [!INCLUDE[vsprvs](../../../../includes/vsprvs-md.md)] add-in.</span></span> <span data-ttu-id="1e7b0-142">Poskytuje stejné funkce, včetně podporu technologie Intellisense.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-142">It provides the same functionality, including Intellisense support.</span></span> <span data-ttu-id="1e7b0-143">Pravidla jsou vytvořené pro cílový typ (například pracovního postupu), který je přidružen RuleSet v nástroji; Když kliknete na tlačítko **Procházet** v dialogovém okně hlavní nástroj **typ pracovního postupu nebo selektor** dialogové okno se zobrazí, jak je znázorněno na obrázku 4.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-143">The rules are authored against a target type (such as a workflow) that is associated with the RuleSet in the tool; when you click **Browse** in the main tool dialog, the **Workflow/Type Selector** dialog appears, as shown in Figure 4.</span></span>  
  
 <span data-ttu-id="1e7b0-144">![Pracovní postup &#47; Zadejte výběr](../../../../docs/framework/windows-workflow-foundation/samples/media/71f08d57-e8f2-499e-8151-ece2cbdcabfd.gif "71f08d57-e8f2-499e-8151-ece2cbdcabfd")</span><span class="sxs-lookup"><span data-stu-id="1e7b0-144">![Workflow &#47;Type Selection](../../../../docs/framework/windows-workflow-foundation/samples/media/71f08d57-e8f2-499e-8151-ece2cbdcabfd.gif "71f08d57-e8f2-499e-8151-ece2cbdcabfd")</span></span>  
  
 <span data-ttu-id="1e7b0-145">Obrázek 4: Výběr pracovního postupu nebo typu</span><span class="sxs-lookup"><span data-stu-id="1e7b0-145">Figure 4: Workflow/Type Selector</span></span>  
  
 <span data-ttu-id="1e7b0-146">Můžete použít **typ pracovního postupu nebo selektor** dialogovém okně můžete zadat sestavení a konkrétní typ v této sestavě.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-146">You can use the **Workflow/Type Selector** dialog to specify an assembly and a specific type within that assembly.</span></span> <span data-ttu-id="1e7b0-147">Tento typ je typ cíle, proti kterému jsou pravidla vytvořena (a spuštění).</span><span class="sxs-lookup"><span data-stu-id="1e7b0-147">This type is the target type against which the rules are authored (and run).</span></span> <span data-ttu-id="1e7b0-148">V mnoha případech cílový typ je pracovní postup nebo jiný typ aktivity.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-148">In many cases, the target type is a workflow or some other activity type.</span></span> <span data-ttu-id="1e7b0-149">Můžete však spouštění libovolného typu .NET RuleSet.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-149">However, you can run a RuleSet against any .NET type.</span></span>  
  
 <span data-ttu-id="1e7b0-150">Cesta k souboru sestavení a typu `name are stored with the` RuleSet v databázi, takže pokud sada pravidel pro se načítají z databáze, nástroj pokusí automaticky načíst typ cíle.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-150">The path to the assembly file and the type `name are stored with the` RuleSet in the database, so that when the RuleSet is retrieved from the database, the tool attempts to automatically load the target type.</span></span>  
  
 <span data-ttu-id="1e7b0-151">Když kliknete na tlačítko **OK** v **typ pracovního postupu nebo selektor** dialogové okno, ověřuje vybraného typu proti RuleSet, a zajistěte tak, že cílový typ všichni členové odkazuje pravidla.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-151">When you click **OK** in the **Workflow/Type Selector** dialog, it validates the selected type against the RuleSet, to ensure that the target type has all the members referenced by the rules.</span></span> <span data-ttu-id="1e7b0-152">Chyby se zobrazují v **chyby ověření** dialogové okno (viz obrázek 5).</span><span class="sxs-lookup"><span data-stu-id="1e7b0-152">Errors are shown in a **Validation Errors** dialog (see Figure 5).</span></span> <span data-ttu-id="1e7b0-153">Můžete pokračovat ve změně navzdory chyby nebo kliknutím na tlačítko **zrušit**.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-153">You can choose to continue with the change despite the errors, or click **Cancel**.</span></span> <span data-ttu-id="1e7b0-154">Z **nástroje** nabídky v dialogovém okně hlavní nástroj, můžete kliknout na **ověřením** znovu ověřit verzi RuleSet proti cílové aktivity.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-154">From the **Tools** menu in the main tool dialog, you can click **Validate** to re-validate the RuleSet version against the target activity.</span></span>  
  
 <span data-ttu-id="1e7b0-155">![Chyby ověření od externí RuleSet vzorku](../../../../docs/framework/windows-workflow-foundation/samples/media/validationerrorsruleset.png "ValidationErrorsRuleSet")</span><span class="sxs-lookup"><span data-stu-id="1e7b0-155">![Validation Errors from External RuleSet Sample](../../../../docs/framework/windows-workflow-foundation/samples/media/validationerrorsruleset.png "ValidationErrorsRuleSet")</span></span>  
  
 <span data-ttu-id="1e7b0-156">Obrázek 5: Ověření chyby</span><span class="sxs-lookup"><span data-stu-id="1e7b0-156">Figure 5: Validation Errors</span></span>  
  
 <span data-ttu-id="1e7b0-157">Z **Data** nabídky v nástroji můžete importovat a exportovat sady pravidel.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-157">From the **Data** menu in the tool, you can import and export RuleSets.</span></span> <span data-ttu-id="1e7b0-158">Když kliknete na tlačítko **Import**, zobrazí se dialogové okno výběru souboru, ve kterém můžete vybrat soubor .rules.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-158">When you click **Import**, a file-chooser dialog appears, from which you can select a .rules file.</span></span> <span data-ttu-id="1e7b0-159">To může nebo nemusí být v vytvořen soubor původně [!INCLUDE[vsprvs](../../../../includes/vsprvs-md.md)].</span><span class="sxs-lookup"><span data-stu-id="1e7b0-159">This may or may not be a file initially created in [!INCLUDE[vsprvs](../../../../includes/vsprvs-md.md)].</span></span> <span data-ttu-id="1e7b0-160">Soubor .rules by měl obsahovat serializovaný seznam `RuleDefinitions` instance, který obsahuje kolekci podmínek a kolekce sady pravidel.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-160">The .rules file should contain a serialized `RuleDefinitions` instance that contains a collection of conditions and a collection of RuleSets.</span></span> <span data-ttu-id="1e7b0-161">Nástroj nepoužívá kolekci podmínky, ale použít `RuleDefinitions` .rules formátu umožňující interakci s [!INCLUDE[vsprvs](../../../../includes/vsprvs-md.md)] prostředí.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-161">The tool does not use the conditions collection, but it does use the `RuleDefinitions` .rules format to allow interaction with the [!INCLUDE[vsprvs](../../../../includes/vsprvs-md.md)] environment.</span></span>  
  
 <span data-ttu-id="1e7b0-162">Po výběru soubor .rules **RuleSet selektor** otevře se dialogové okno (viz obrázek 6).</span><span class="sxs-lookup"><span data-stu-id="1e7b0-162">After selecting a .rules file, a **RuleSet Selector** dialog appears (see Figure 6).</span></span> <span data-ttu-id="1e7b0-163">Dialogové okno můžete použít k výběru sady pravidel ze souboru, který chcete importovat (výchozí hodnota určuje všechny sady pravidel).</span><span class="sxs-lookup"><span data-stu-id="1e7b0-163">You can use the dialog to select the RuleSets from the file that you want to import (the default specifies all RuleSets).</span></span> <span data-ttu-id="1e7b0-164">Sady pravidel v souboru .rules nemají číslo verze, protože jejich verze v rámci projektu WF je stejná jako verze sestavení.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-164">RuleSets in the .rules file do not have version numbers, because their versioning within a WF project is the same as the version of the assembly.</span></span> <span data-ttu-id="1e7b0-165">Během procesu importu nástroj automaticky přiřadí další dostupné hlavní číslo verze (které můžete změnit po importu); Zobrazí číslo přiřazené verze v **RuleSet selektor** seznamu.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-165">During the importing process, the tool automatically assigns the next available major version number (which you can change after importing); you can see the assigned version numbers in the **RuleSet Selector** list.</span></span>  
  
 <span data-ttu-id="1e7b0-166">Pro každý RuleSet mu nástroj pokusí vyhledat přidružený typ ze složky bin\Debug pod umístění souboru .rules (pokud existuje), založené na členy používány RuleSet.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-166">For each RuleSet it imports, the tool attempts to locate the associated type from the bin\Debug folder under the location of the .rules file (if it exists), based on the members used in the RuleSet.</span></span> <span data-ttu-id="1e7b0-167">Pokud nástroj najde odpovídající více typů, pokusí se vybrat typ na základě shody mezi .rules název souboru a název typu (například `Workflow1` typ odpovídá Workflow1.rules).</span><span class="sxs-lookup"><span data-stu-id="1e7b0-167">If the tool finds multiple matching types, it attempts to choose a type based on a match between the .rules file name and the type name (for example, the `Workflow1` type corresponds to Workflow1.rules).</span></span> <span data-ttu-id="1e7b0-168">Pokud existuje více shod, zobrazí se výzva k výběru typu.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-168">If multiple matches exist, you are prompted to select the type.</span></span> <span data-ttu-id="1e7b0-169">Pokud tento mechanismus automaticky identifikace nepodaří najít odpovídající sestavení nebo typ, pak po importu můžete kliknout na **Procházet** v dialogovém okně hlavní nástroj přejděte na typ přidružený.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-169">If this auto-identification mechanism fails to locate a matching assembly or type, then after importing you can click **Browse** on the main tool dialog to navigate to the associated type.</span></span>  
  
 <span data-ttu-id="1e7b0-170">![Sada pravidel pro selektor](../../../../docs/framework/windows-workflow-foundation/samples/media/rulesetselector.gif "RuleSetSelector")</span><span class="sxs-lookup"><span data-stu-id="1e7b0-170">![Ruleset selector](../../../../docs/framework/windows-workflow-foundation/samples/media/rulesetselector.gif "RuleSetSelector")</span></span>  
  
 <span data-ttu-id="1e7b0-171">Obrázek 6: Sada pravidel pro selektor</span><span class="sxs-lookup"><span data-stu-id="1e7b0-171">Figure 6: RuleSet Selector</span></span>  
  
 <span data-ttu-id="1e7b0-172">Když kliknete na tlačítko **Export dat** nabídce hlavní nástroj **RuleSet selektor** dialogové okno se zobrazí znovu, ze kterého můžete určit sady pravidel z databáze, kterou mají být exportovány.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-172">When you click **Data-Export** from the main tool menu, the **RuleSet Selector** dialog appears again, from which you can determine the RuleSets from the database that should be exported.</span></span> <span data-ttu-id="1e7b0-173">Když kliknete na tlačítko **OK**, **uložit soubor** otevře se dialogové okno, ve kterém můžete zadat název a umístění výsledný soubor .rules.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-173">When you click **OK**, a **Save File** dialog appears, in which you can specify the name and location of the resulting .rules file.</span></span> <span data-ttu-id="1e7b0-174">Protože .rules soubor neobsahuje informace o verzi, můžete zvolit pouze jedna sada pravidel pro verze se daný název RuleSet.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-174">Because the .rules file does not contain version information, you can only select one RuleSet version with a given RuleSet name.</span></span>  
  
## <a name="policyfromservice-activity"></a><span data-ttu-id="1e7b0-175">PolicyFromService aktivity</span><span class="sxs-lookup"><span data-stu-id="1e7b0-175">PolicyFromService Activity</span></span>  
 <span data-ttu-id="1e7b0-176">Kód pro `PolicyFromService` aktivity je jednoduché.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-176">The code for the `PolicyFromService` activity is straightforward.</span></span> <span data-ttu-id="1e7b0-177">Funguje podobně jako `Policy` aktivita se poskytuje s WF, ale místo načítání cíl RuleSet ze souboru .rules, zavolá hostitele služby k získání RuleSet instance.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-177">It works much like the `Policy` activity provided with WF, but instead of retrieving the target RuleSet from the .rules file, it calls a host service to obtain the RuleSet instance.</span></span> <span data-ttu-id="1e7b0-178">Pak spustí RuleSet proti k instanci pracovního postupu aktivity root.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-178">It then runs the RuleSet against the root workflow activity instance.</span></span>  
  
 <span data-ttu-id="1e7b0-179">Chcete-li použít aktivitu v pracovním postupu, přidejte odkaz na `PolicyActivities` a `RuleSetService` sestavení z projektu pracovního postupu.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-179">To use the activity in a workflow, add a reference to the `PolicyActivities` and `RuleSetService` assemblies from your workflow project.</span></span> <span data-ttu-id="1e7b0-180">Najdete v postupu na konci tohoto tématu informace o tom, jak přidat aktivity do sady nástrojů.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-180">See the procedure at the end of this topic for a discussion of how to add the activity to the toolbox.</span></span>  
  
 <span data-ttu-id="1e7b0-181">Po vložení aktivity do pracovního postupu, je nutné zadat název objektu RuleSet ke spuštění.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-181">After placing the activity in your workflow, you must provide the name of the RuleSet to be run.</span></span> <span data-ttu-id="1e7b0-182">Můžete zadat název jako literálovou hodnotou, nebo vytvořit vazbu k proměnné pracovního postupu nebo vlastnost jiné aktivity.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-182">You can enter the name as a literal value, or bind to a workflow variable or property of another activity.</span></span> <span data-ttu-id="1e7b0-183">Volitelně můžete zadat číslo verze pro konkrétní sada pravidel pro, který by měl být spuštěn.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-183">Optionally, you can enter version numbers for the specific RuleSet that should be run.</span></span> <span data-ttu-id="1e7b0-184">Pokud necháte výchozí hodnotu 0 pro hlavní verze a podverze čísla, se automaticky poskytuje nejnovější číslo verze v databázi pro aktivity.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-184">If you leave the default value of 0 for the major and minor version numbers, the latest version number in the database is automatically provided for the activity.</span></span>  
  
## <a name="ruleset-service"></a><span data-ttu-id="1e7b0-185">Sada pravidel pro služby</span><span class="sxs-lookup"><span data-stu-id="1e7b0-185">RuleSet Service</span></span>  
 <span data-ttu-id="1e7b0-186">Služba je odpovědná za načítání zadaná RuleSet verze z databáze a jeho vrácením volání aktivity.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-186">The service is responsible for retrieving the specified RuleSet version from the database and returning it to the calling activity.</span></span> <span data-ttu-id="1e7b0-187">Dřív popsané, pokud hlavní verze a podverze hodnoty předané `GetRuleSet` volání jsou obě 0, služba načte nejnovější verzi.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-187">As previously discussed, if the major and minor version values passed in the `GetRuleSet` call are both 0, the service retrieves the latest version.</span></span> <span data-ttu-id="1e7b0-188">V tomto okamžiku se žádné ukládání do mezipaměti RuleSet definice nebo instance; Podobně neexistují žádné funkce pro označení RuleSet verze jako "nasazení" k jejich odlišení od probíhající sady pravidel.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-188">At this point, there is no caching of RuleSet definitions or instances; similarly, there are no features for marking RuleSet versions as "deployed" to differentiate them from in-progress RuleSets.</span></span>  
  
 <span data-ttu-id="1e7b0-189">Databázi nelze přistupovat pomocí služby musí být nakonfigurovaný na hostiteli pomocí konfiguračního souboru aplikace.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-189">The database to be accessed by the service should be configured on the host using an application configuration file.</span></span>  
  
#### <a name="to-run-the-tool"></a><span data-ttu-id="1e7b0-190">Chcete-li spustit nástroj</span><span class="sxs-lookup"><span data-stu-id="1e7b0-190">To run the tool</span></span>  
  
1.  <span data-ttu-id="1e7b0-191">Soubor Setup.sql obsahuje složky, která nastaví RuleSet tabulky používané nástroje a služby.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-191">The folder that sets up the RuleSet table used by the tool and the service contains a Setup.sql file.</span></span> <span data-ttu-id="1e7b0-192">Můžete spustit Setup.cmd dávkový soubor k vytvoření pravidla databáze na SQL Express a nastavit v tabulce RuleSet.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-192">You can run the Setup.cmd batch file to create the Rules database on SQL Express and to set up the RuleSet table.</span></span>  
  
2.  <span data-ttu-id="1e7b0-193">Pokud upravíte dávkového souboru nebo Setup.sql a určit pomocí SQL Express nebo umístění tabulky v databázi pojmenovali jinak než `Rules`, konfigurační soubory aplikace v nástroji RuleSet a `UsageSample` projekty by měl být upraven se stejným informace.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-193">If you edit the batch file or Setup.sql and specify not to use SQL Express or to place the table in a database named something other than `Rules`, the application configuration files in the RuleSet tool and `UsageSample` projects should be edited with the same information.</span></span>  
  
3.  <span data-ttu-id="1e7b0-194">Po spuštění skriptu Setup.sql, můžete vytvořit `ExternalRuleSetToolkit` řešení a potom spusťte sada pravidel pro nástroj z ExternalRuleSetTool projektu.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-194">After you run the Setup.sql script, you can build the `ExternalRuleSetToolkit` solution and then launch the RuleSet tool from the ExternalRuleSetTool project.</span></span>  
  
4.  <span data-ttu-id="1e7b0-195">`RuleSetToolkitUsageSample` Sekvenčního pracovního postupu konzolové aplikace řešení zahrnuje ukázkového pracovního postupu.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-195">The `RuleSetToolkitUsageSample` Sequential Workflow Console Application solution includes a sample workflow.</span></span> <span data-ttu-id="1e7b0-196">Pracovní postup se skládá z `PolicyFromService` aktivity a dvě proměnné, `orderValue` a `discount`, na která se spouští cílový RuleSet.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-196">The workflow consists of a `PolicyFromService` activity and two variables, `orderValue` and `discount`, against which the target RuleSet runs.</span></span>  
  
5.  <span data-ttu-id="1e7b0-197">Ukázku použít sestavení `RuleSetToolkitUsageSample` řešení.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-197">To use the sample, build the `RuleSetToolkitUsageSample` solution.</span></span> <span data-ttu-id="1e7b0-198">Z hlavní nabídky Nástroje RuleSet klikněte **Import dat** a přejděte k souboru DiscountRuleSet.rules ve složce RuleSetToolkitUsageSample.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-198">Then from the RuleSet tool main menu, click **Data-Import** and point to the DiscountRuleSet.rules file in the RuleSetToolkitUsageSample folder.</span></span> <span data-ttu-id="1e7b0-199">Klikněte na tlačítko **pravidlo úložiště-uložit** nabídky možnost uložení importované RuleSet do databáze.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-199">Click the **Rule Store-Save** menu option to save the imported RuleSet to the database.</span></span>  
  
6.  <span data-ttu-id="1e7b0-200">Protože `PolicyActivities` sestavení se odkazuje z ukázkového projektu pracovního postupu, `PolicyFromService` aktivity se zobrazí v pracovním postupu.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-200">Because the `PolicyActivities` assembly is referenced from the sample workflow project, the `PolicyFromService` activity appears in the workflow.</span></span> <span data-ttu-id="1e7b0-201">Ji, ale nezobrazí v panelu nástrojů ve výchozím nastavení.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-201">It does not, however, appear in the toolbox by default.</span></span> <span data-ttu-id="1e7b0-202">Přidat do sady nástrojů, postupujte takto:</span><span class="sxs-lookup"><span data-stu-id="1e7b0-202">To add it to the toolbox, do the following:</span></span>  
  
    -   <span data-ttu-id="1e7b0-203">Klikněte pravým tlačítkem na panelu nástrojů a vyberte **zvolit položky** (to může chvíli trvat).</span><span class="sxs-lookup"><span data-stu-id="1e7b0-203">Right-click the toolbox and select **Choose Items** (this may take a while).</span></span>  
  
    -   <span data-ttu-id="1e7b0-204">Při **výběr položek sady nástrojů** otevře se dialogové okno, klikněte na tlačítko **aktivity** kartě.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-204">When the **Choose Toolbox Items** dialog appears, click the **Activities** tab.</span></span>  
  
    -   <span data-ttu-id="1e7b0-205">Vyhledejte `PolicyActivities` sestavení v `ExternalRuleSetToolkit` řešení a klikněte na tlačítko **otevřete**.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-205">Browse to the `PolicyActivities` assembly in the `ExternalRuleSetToolkit` solution and click **Open**.</span></span>  
  
    -   <span data-ttu-id="1e7b0-206">Ujistěte se, že `PolicyFromService` aktivity je vybraný v **výběr položek sady nástrojů** dialogové okno a potom klikněte na **OK**.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-206">Ensure that the `PolicyFromService` activity is selected in the **Choose Toolbox Items** dialog and then click **OK**.</span></span>  
  
    -   <span data-ttu-id="1e7b0-207">Aktivity by se měla zobrazit v panelu nástrojů v **RuleSetToolkitUsageSample součásti** kategorie.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-207">The activity should now appear in the toolbox in the **RuleSetToolkitUsageSample Components** category.</span></span>  
  
7.  <span data-ttu-id="1e7b0-208">Sada pravidel pro služba je již nakonfigurována na hostiteli aplikace konzoly pomocí následujícího příkazu v souboru Program.cs.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-208">The RuleSet service is already configured on the console application host using the following statement in Program.cs.</span></span>  
  
    ```  
    workflowRuntime.AddService(new RuleSetService());  
    ```  
  
8.  <span data-ttu-id="1e7b0-209">Můžete také konfigurovat službu na hostiteli pomocí konfiguračního souboru; najdete v dokumentaci k sadě SDK podrobnosti.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-209">You can also configure the service on the host using a configuration file; see the SDK documentation for details.</span></span>  
  
9. <span data-ttu-id="1e7b0-210">Konfigurační soubor aplikace se přidá do projektu workflow zadat připojovací řetězec databáze, která se použije službou.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-210">An application configuration file is added to the workflow project to specify the connection string for the database to be used by the service.</span></span> <span data-ttu-id="1e7b0-211">To by měl být stejný připojovací řetězec používaný RuleSet nástroj, který odkazuje na databázi, která obsahuje tabulku RuleSet.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-211">This should be the same connection string used by the RuleSet tool, which points to the database that contains the RuleSet table.</span></span>  
  
10. <span data-ttu-id="1e7b0-212">Teď můžete spustit `RuleSetToolkitUsageSample` projektu stejně jako všechny ostatní konzolové aplikace pracovního postupu.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-212">You can now run the `RuleSetToolkitUsageSample` project as you would any other workflow console application.</span></span> <span data-ttu-id="1e7b0-213">Stiskněte klávesu F5 nebo Ctrl + F5 v rámci [!INCLUDE[vsprvs](../../../../includes/vsprvs-md.md)] nebo RuleSetToolkitUsageSample.exe soubor spustit přímo.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-213">Press F5 or Ctrl+F5 within [!INCLUDE[vsprvs](../../../../includes/vsprvs-md.md)] or run the RuleSetToolkitUsageSample.exe file directly.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="1e7b0-214">Protože nástroj načte sestavení ukázkové použití, je třeba nejprve zavřít nástroj RuleSet překompilovat ukázce využití.</span><span class="sxs-lookup"><span data-stu-id="1e7b0-214">You must close the RuleSet tool to recompile the usage sample, because the tool loads the usage sample assembly.</span></span>