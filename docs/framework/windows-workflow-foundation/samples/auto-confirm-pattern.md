---
title: "Automatické potvrďte vzor"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 668aec65-78d3-4636-9c7b-deed643a18f9
caps.latest.revision: "6"
author: Erikre
ms.author: erikre
manager: erikre
ms.openlocfilehash: affc9d1638148971dd9c57969c75166facfd545c
ms.sourcegitcommit: 5177d6ae2e9baf026f07ee0631556700a5a193f7
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 11/28/2017
---
# <a name="auto-confirm-pattern"></a><span data-ttu-id="a0a92-102">Automatické potvrďte vzor</span><span class="sxs-lookup"><span data-stu-id="a0a92-102">Auto-Confirm Pattern</span></span>
<span data-ttu-id="a0a92-103">Tato ukázka se skládá ze tří scénářů, které spustit ilustrující vlastní `AutoConfirmScope` aktivity.</span><span class="sxs-lookup"><span data-stu-id="a0a92-103">This sample consists of three scenarios that run illustrating a custom `AutoConfirmScope` activity.</span></span> <span data-ttu-id="a0a92-104">První příklad ukazuje úspěšné provedení posloupnost čtyři compensable aktivit, kde vnořených druhý a třetí v `AutoConfirmScope`.</span><span class="sxs-lookup"><span data-stu-id="a0a92-104">The first sample shows the successful execution of a sequence of four compensable activities where the second and third are nested in an `AutoConfirmScope`.</span></span> <span data-ttu-id="a0a92-105">Druhý příklad ukazuje stejné pořadí s výjimkou po provedení čtvrtý <xref:System.Activities.Statements.CompensableActivity>.</span><span class="sxs-lookup"><span data-stu-id="a0a92-105">The second sample shows the same sequence with an exception occurring after the execution of the fourth <xref:System.Activities.Statements.CompensableActivity>.</span></span> <span data-ttu-id="a0a92-106">Třetí scénář ukazuje stejné pořadí s výjimku, ke kterým dochází v `AutoConfirmScope` po druhá <xref:System.Activities.Statements.CompensableActivity> dokončení.</span><span class="sxs-lookup"><span data-stu-id="a0a92-106">The third scenario shows the same sequence with an exception occurring in the `AutoConfirmScope` after the second <xref:System.Activities.Statements.CompensableActivity> completes.</span></span>  
  
 <span data-ttu-id="a0a92-107">Ukázka ukazuje auto-confirm vzor, kde jsou všechny podřízené compensable aktivity potvrzen po úspěšném oboru.</span><span class="sxs-lookup"><span data-stu-id="a0a92-107">The sample demonstrates the auto-confirm pattern where all child compensable activities are confirmed upon successful completion of the scope.</span></span> <span data-ttu-id="a0a92-108">Tento vzor definuje životnost všechny podřízené compensable aktivity, jako se dá už kompenzované nebo potvrzen.</span><span class="sxs-lookup"><span data-stu-id="a0a92-108">This pattern defines the lifetime of all child compensable activities, as they can no longer be compensated or confirmed.</span></span>  
  
 <span data-ttu-id="a0a92-109">Obor se skládá z <xref:System.Activities.Statements.TryCatch> kde <xref:System.Activities.Statements.TryCatch.Try%2A> je interní <xref:System.Activities.Statements.CompensableActivity>.</span><span class="sxs-lookup"><span data-stu-id="a0a92-109">The scope consists of a <xref:System.Activities.Statements.TryCatch> where the <xref:System.Activities.Statements.TryCatch.Try%2A> is an internal <xref:System.Activities.Statements.CompensableActivity>.</span></span> <span data-ttu-id="a0a92-110">Tělo zadán uživatel `AutoConfirmScope` tělo vnitřního <xref:System.Activities.Statements.CompensableActivity>.</span><span class="sxs-lookup"><span data-stu-id="a0a92-110">The user-specified body of the `AutoConfirmScope` is the body of the inner <xref:System.Activities.Statements.CompensableActivity>.</span></span> <span data-ttu-id="a0a92-111">Při tomto interní <xref:System.Activities.Statements.CompensableActivity> dokončí, vyvolá <xref:System.Activities.Statements.CompensationToken> jako argumentem na více systémů.</span><span class="sxs-lookup"><span data-stu-id="a0a92-111">When this internal <xref:System.Activities.Statements.CompensableActivity> completes, it produces a <xref:System.Activities.Statements.CompensationToken> as an out-argument.</span></span> <span data-ttu-id="a0a92-112">`AutoConfirmScope` Používá <xref:System.Activities.Statements.TryCatch.Finally%2A> ke kontrole, jestli se vytvořily token a pokud platnost vypršela, potvrzuje se tím vnitřní <xref:System.Activities.Statements.CompensableActivity>.</span><span class="sxs-lookup"><span data-stu-id="a0a92-112">The `AutoConfirmScope` uses a <xref:System.Activities.Statements.TryCatch.Finally%2A> to check whether the token has been produced and if it has then it confirms the inner <xref:System.Activities.Statements.CompensableActivity>.</span></span> <span data-ttu-id="a0a92-113">Vnitřní <xref:System.Activities.Statements.CompensableActivity> vyvolá výchozí náhradu za žádné compensable aktivity, které mohou existovat v jeho obsahu.</span><span class="sxs-lookup"><span data-stu-id="a0a92-113">The inner <xref:System.Activities.Statements.CompensableActivity> invokes the default compensation for any compensable activities that may exist in its body.</span></span>  
  
 <span data-ttu-id="a0a92-114">První scénář ukazuje úspěšné provedení pracovního postupu a ukazuje, druhý a třetí compensable aktivity jsou při dokončení pracovního postupu a první a čtvrtý potvrzují již potvrzen.</span><span class="sxs-lookup"><span data-stu-id="a0a92-114">The first scenario shows successful execution of the workflow and demonstrates that the second and third compensable activities are already confirmed when the workflow completes and the first and fourth are confirmed.</span></span> <span data-ttu-id="a0a92-115">To vytváří potvrzení pořadí tři, dva, čtyři a jeden.</span><span class="sxs-lookup"><span data-stu-id="a0a92-115">This produces a confirmation order of three, two, four, and one.</span></span>  
  
 <span data-ttu-id="a0a92-116">Druhý scénář ukazuje výjimku po dokončení čtyři compensable aktivity.</span><span class="sxs-lookup"><span data-stu-id="a0a92-116">The second scenario shows an exception after the four compensable activities have completed.</span></span> <span data-ttu-id="a0a92-117">Protože jsou již potvrzen compensable aktivity dva a tři jsou poškozena, ale jedna a čtyřmi jsou kompenzované.</span><span class="sxs-lookup"><span data-stu-id="a0a92-117">Because compensable activities two and three are already confirmed they are unaffected but one and four are compensated.</span></span> <span data-ttu-id="a0a92-118">Tato vytváří potvrďte tři, potvrďte dva, odpovídajícím způsobem čtyři a odpovídajícím způsobem jeden.</span><span class="sxs-lookup"><span data-stu-id="a0a92-118">This produces confirm three, confirm two, compensate four and compensate one.</span></span>  
  
 <span data-ttu-id="a0a92-119">Poslední scénář popisuje úspěšné provedení `AutoConfirmScope`.</span><span class="sxs-lookup"><span data-stu-id="a0a92-119">The final scenario shows unsuccessful execution of the `AutoConfirmScope`.</span></span> <span data-ttu-id="a0a92-120">V tomto scénáři, dojde k výjimce po dokončení druhý <xref:System.Activities.Statements.CompensableActivity>.</span><span class="sxs-lookup"><span data-stu-id="a0a92-120">In this scenario, an exception occurs after the completion of the second <xref:System.Activities.Statements.CompensableActivity>.</span></span> <span data-ttu-id="a0a92-121">Vzhledem k tomu, že nebyly provést třetí a čtvrtý compensable aktivity, jsou poškozena.</span><span class="sxs-lookup"><span data-stu-id="a0a92-121">Because the third and fourth compensable activities have not executed, they are unaffected.</span></span> <span data-ttu-id="a0a92-122">Protože oboru nebyla dokončena úspěšně, druhý <xref:System.Activities.Statements.CompensableActivity> získat nebyl potvrzen.</span><span class="sxs-lookup"><span data-stu-id="a0a92-122">Because the scope did not complete successfully, the second <xref:System.Activities.Statements.CompensableActivity> does not get confirmed.</span></span> <span data-ttu-id="a0a92-123">Tento vytváří a kompenzace pořadí dvě pak jeden.</span><span class="sxs-lookup"><span data-stu-id="a0a92-123">This produces and compensation order of two then one.</span></span>  
  
#### <a name="to-use-this-sample"></a><span data-ttu-id="a0a92-124">Pro fungování této ukázky</span><span class="sxs-lookup"><span data-stu-id="a0a92-124">To use this sample</span></span>  
  
1.  <span data-ttu-id="a0a92-125">Pomocí [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)], otevřete soubor řešení AutoConfirmSample.sln.</span><span class="sxs-lookup"><span data-stu-id="a0a92-125">Using [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)], open the AutoConfirmSample.sln solution file.</span></span>  
  
2.  <span data-ttu-id="a0a92-126">Sestavte řešení, stiskněte CTRL + SHIFT + B.</span><span class="sxs-lookup"><span data-stu-id="a0a92-126">To build the solution, press CTRL+SHIFT+B.</span></span>  
  
3.  <span data-ttu-id="a0a92-127">Chcete-li spustit řešení, stiskněte CTRL + F5.</span><span class="sxs-lookup"><span data-stu-id="a0a92-127">To run the solution, press CTRL+F5.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="a0a92-128">Ukázky může být již nainstalována na váš počítač.</span><span class="sxs-lookup"><span data-stu-id="a0a92-128">The samples may already be installed on your machine.</span></span> <span data-ttu-id="a0a92-129">Před pokračováním zkontrolovat na následující adresář (výchozí).</span><span class="sxs-lookup"><span data-stu-id="a0a92-129">Check for the following (default) directory before continuing.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples`  
>   
>  <span data-ttu-id="a0a92-130">Pokud tento adresář neexistuje, přejděte na [Windows Communication Foundation (WCF) a ukázky Windows Workflow Foundation (WF) pro rozhraní .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) ke stažení všechny [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] a [!INCLUDE[wf1](../../../../includes/wf1-md.md)] ukázky.</span><span class="sxs-lookup"><span data-stu-id="a0a92-130">If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) to download all [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples.</span></span> <span data-ttu-id="a0a92-131">Tato ukázka se nachází v následujícím adresáři.</span><span class="sxs-lookup"><span data-stu-id="a0a92-131">This sample is located in the following directory.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples\WF\Scenario\Compensation\AutoConfirm`