---
title: "Potvrzení"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 8637aeaf-ac9e-49b8-93f4-da15dee45277
caps.latest.revision: "7"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.workload: dotnet
ms.openlocfilehash: 42d9fad968b471c63dbdac2145bb9e84afed183b
ms.sourcegitcommit: 16186c34a957fdd52e5db7294f291f7530ac9d24
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 12/22/2017
---
# <a name="confirmation"></a><span data-ttu-id="81b10-102">Potvrzení</span><span class="sxs-lookup"><span data-stu-id="81b10-102">Confirmation</span></span>
<span data-ttu-id="81b10-103">Tento příklad ukazuje čtyři běžné scénáře, které obaluje použití <xref:System.Activities.Statements.CompensableActivity> a potvrzení hesla.</span><span class="sxs-lookup"><span data-stu-id="81b10-103">This sample shows four common scenarios surrounding the use of <xref:System.Activities.Statements.CompensableActivity> and confirmation.</span></span> <span data-ttu-id="81b10-104">Ukázka spustí čtyři pracovní postupy pro zobrazení potvrzení.</span><span class="sxs-lookup"><span data-stu-id="81b10-104">The sample runs four workflows to show confirmation.</span></span> <span data-ttu-id="81b10-105">Tato ukázka je dostupná v deklarativní a imperativní verze.</span><span class="sxs-lookup"><span data-stu-id="81b10-105">This sample is available in declarative and imperative versions.</span></span>  
  
## <a name="confirm-a-compensable-activity"></a><span data-ttu-id="81b10-106">Potvrďte Compensable aktivity</span><span class="sxs-lookup"><span data-stu-id="81b10-106">Confirm a Compensable Activity</span></span>  
 <span data-ttu-id="81b10-107">První pracovní postup ukazuje, jak potvrďte compensable aktivity a skládá se z pořadí dva <xref:System.Activities.Statements.CompensableActivity> instance.</span><span class="sxs-lookup"><span data-stu-id="81b10-107">The first workflow demonstrates how to confirm a compensable activity and consists of a sequence of two <xref:System.Activities.Statements.CompensableActivity> instances.</span></span> <span data-ttu-id="81b10-108">Po dokončení druhý <xref:System.Activities.Statements.CompensableActivity> aktivitu potvrdit potvrdí první aktivitu.</span><span class="sxs-lookup"><span data-stu-id="81b10-108">After the completion of the second <xref:System.Activities.Statements.CompensableActivity> a confirm activity confirms the first activity.</span></span> <span data-ttu-id="81b10-109">Když pracovní postup úspěšně dokončí, všechny <xref:System.Activities.Statements.CompensableActivity> instancí, které nebyly potvrzeny ani kompenzované automaticky potvrzena pomocí výchozí pořadí.</span><span class="sxs-lookup"><span data-stu-id="81b10-109">When the workflow successfully completes, all <xref:System.Activities.Statements.CompensableActivity> instances that have not been confirmed or compensated are automatically confirmed using the default order.</span></span> <span data-ttu-id="81b10-110">Bez potvrzení druhý <xref:System.Activities.Statements.CompensableActivity> by byly potvrzeny nejdřív.</span><span class="sxs-lookup"><span data-stu-id="81b10-110">Without the confirm, the second <xref:System.Activities.Statements.CompensableActivity> would have been confirmed first.</span></span>  
  
## <a name="explicit-compensation"></a><span data-ttu-id="81b10-111">Explicitní kompenzace</span><span class="sxs-lookup"><span data-stu-id="81b10-111">Explicit Compensation</span></span>  
 <span data-ttu-id="81b10-112">Druhý scénář ukazuje vlivu na výchozí potvrzení při <xref:System.Activities.Statements.CompensableActivity> je explicitně kompenzované.</span><span class="sxs-lookup"><span data-stu-id="81b10-112">The second scenario shows the affect on default confirmation when a <xref:System.Activities.Statements.CompensableActivity> is explicitly compensated.</span></span> <span data-ttu-id="81b10-113">Pracovní postup se skládá z pořadí dva <xref:System.Activities.Statements.CompensableActivity> aktivit, po dokončení první druhý je explicitně kompenzované.</span><span class="sxs-lookup"><span data-stu-id="81b10-113">The workflow consists of a sequence of two <xref:System.Activities.Statements.CompensableActivity> activities, after the second completes the first is explicitly compensated.</span></span> <span data-ttu-id="81b10-114">V důsledku při dokončení pracovního postupu, pouze druhý <xref:System.Activities.Statements.CompensableActivity> je potvrzen.</span><span class="sxs-lookup"><span data-stu-id="81b10-114">As a result when the workflow, completes only the second <xref:System.Activities.Statements.CompensableActivity> is confirmed.</span></span>  
  
## <a name="controlling-the-order-of-confirmation-for-nested-compensableactivity-activities"></a><span data-ttu-id="81b10-115">Řízení pořadí potvrzení pro vnořené CompensableActivity aktivity</span><span class="sxs-lookup"><span data-stu-id="81b10-115">Controlling the Order of Confirmation for Nested CompensableActivity Activities</span></span>  
 <span data-ttu-id="81b10-116">Třetí scénář ukazuje, jak řídit pořadí potvrzení pro vnořené <xref:System.Activities.Statements.CompensableActivity>.</span><span class="sxs-lookup"><span data-stu-id="81b10-116">The third scenario shows how to control the order of confirmation for nested <xref:System.Activities.Statements.CompensableActivity>.</span></span> <span data-ttu-id="81b10-117">Tento scénář se skládá z <xref:System.Activities.Statements.CompensableActivity> jako kořen pracovního postupu.</span><span class="sxs-lookup"><span data-stu-id="81b10-117">The scenario consists of a <xref:System.Activities.Statements.CompensableActivity> as the root of the workflow.</span></span> <span data-ttu-id="81b10-118">Tělo kořenu <xref:System.Activities.Statements.CompensableActivity> je posloupnost tři <xref:System.Activities.Statements.CompensableActivity>.</span><span class="sxs-lookup"><span data-stu-id="81b10-118">The body of the root <xref:System.Activities.Statements.CompensableActivity> is a sequence of three <xref:System.Activities.Statements.CompensableActivity>.</span></span> <span data-ttu-id="81b10-119"><xref:System.Activities.Statements.CompensableActivity.ConfirmationHandler%2A> Pro kořenovou <xref:System.Activities.Statements.CompensableActivity> je řada, která určuje potvrďte první a druhý vnořené <xref:System.Activities.Statements.CompensableActivity>.</span><span class="sxs-lookup"><span data-stu-id="81b10-119">The <xref:System.Activities.Statements.CompensableActivity.ConfirmationHandler%2A> for the root <xref:System.Activities.Statements.CompensableActivity> is a sequence that specifies to confirm the first then the second nested <xref:System.Activities.Statements.CompensableActivity>.</span></span> <span data-ttu-id="81b10-120">Po dokončení pracovního postupu kořenové potvrzuje <xref:System.Activities.Statements.CompensableActivity>, který pak potvrdí první, druhý a třetí vnořené <xref:System.Activities.Statements.CompensableActivity>, v tomto pořadí.</span><span class="sxs-lookup"><span data-stu-id="81b10-120">When the workflow completes it confirms the root <xref:System.Activities.Statements.CompensableActivity>, which then confirms the first, second and third nested <xref:System.Activities.Statements.CompensableActivity>, in that order.</span></span> <span data-ttu-id="81b10-121">V důsledku toho je v podstatě výchozí pořadí potvrzení obrácený.</span><span class="sxs-lookup"><span data-stu-id="81b10-121">As a result, the default confirmation order is essentially reversed.</span></span> <span data-ttu-id="81b10-122">Protože třetí <xref:System.Activities.Statements.CompensableActivity> nebyl potvrzen explicitně jako část kořenové <xref:System.Activities.Statements.CompensableActivity> podle <xref:System.Activities.Statements.CompensableActivity.ConfirmationHandler%2A>, je potvrzen podle výchozí pořadí.</span><span class="sxs-lookup"><span data-stu-id="81b10-122">Because the third <xref:System.Activities.Statements.CompensableActivity> was not explicitly confirmed as part of the root <xref:System.Activities.Statements.CompensableActivity> by the <xref:System.Activities.Statements.CompensableActivity.ConfirmationHandler%2A>, it is confirmed according to the default order.</span></span> <span data-ttu-id="81b10-123">Ale protože je to jediné nepotvrzeného <xref:System.Activities.Statements.CompensableActivity> to znamená právě je potvrzen.</span><span class="sxs-lookup"><span data-stu-id="81b10-123">However, because it is the only unconfirmed <xref:System.Activities.Statements.CompensableActivity> this just means it is confirmed.</span></span>  
  
## <a name="scoping-of-variables"></a><span data-ttu-id="81b10-124">Obor proměnné</span><span class="sxs-lookup"><span data-stu-id="81b10-124">Scoping of Variables</span></span>  
 <span data-ttu-id="81b10-125">Čtvrtý scénář popisuje, jak životnost proměnné definované pro <xref:System.Activities.Statements.CompensableActivity> nebo některý ze svých nadřazených složek jsou pořád ještě v oboru, kdy <xref:System.Activities.Statements.CompensableActivity.CompensationHandler%2A>, <xref:System.Activities.Statements.CompensableActivity.ConfirmationHandler%2A> nebo <xref:System.Activities.Statements.CompensableActivity.CancellationHandler%2A> obslužné rutiny jsou spouštěny i v případě, že dokončení aktivity nebo má pracovní postup byla dokončena.</span><span class="sxs-lookup"><span data-stu-id="81b10-125">The fourth scenario shows how the lifetime of variables defined for a <xref:System.Activities.Statements.CompensableActivity> or one of their parents are still in scope when the <xref:System.Activities.Statements.CompensableActivity.CompensationHandler%2A>, <xref:System.Activities.Statements.CompensableActivity.ConfirmationHandler%2A> or <xref:System.Activities.Statements.CompensableActivity.CancellationHandler%2A> handlers are executed even if the activity has completed or the workflow has completed.</span></span> <span data-ttu-id="81b10-126">Pracovní postup se skládá z pořadí dva <xref:System.Activities.Statements.CompensableActivity>.</span><span class="sxs-lookup"><span data-stu-id="81b10-126">The workflow consists of a sequence of two <xref:System.Activities.Statements.CompensableActivity>.</span></span> <span data-ttu-id="81b10-127">V těle první, proměnná `mySum` je nastaven na součet 5 a 10 a výsledek vytisknout.</span><span class="sxs-lookup"><span data-stu-id="81b10-127">In the body of the first, the variable `mySum` is set to the sum of 5 and 10 and the result printed.</span></span> <span data-ttu-id="81b10-128">V těle druhý <xref:System.Activities.Statements.CompensableActivity>, součet je nastaven na součet existující součet a 7 a výsledek vytisknout.</span><span class="sxs-lookup"><span data-stu-id="81b10-128">In the body of the second <xref:System.Activities.Statements.CompensableActivity>, the sum is set to the sum of the existing sum and 7 and the result printed.</span></span> <span data-ttu-id="81b10-129">Obslužná rutina vlastní potvrzení je definována pro první <xref:System.Activities.Statements.CompensableActivity>, který vytiskne součet, odečte 7 a vytiskne součet znovu.</span><span class="sxs-lookup"><span data-stu-id="81b10-129">A custom confirmation handler is defined for the first <xref:System.Activities.Statements.CompensableActivity>, which prints the sum, subtracts 7 and prints the sum again.</span></span> <span data-ttu-id="81b10-130">Je zřejmé, zkontrolováním na tištěných součty, které je proměnné v oboru, ne jenom pro těla i <xref:System.Activities.Statements.CompensableActivity> ale <xref:System.Activities.Statements.CompensableActivity.ConfirmationHandler%2A> také.</span><span class="sxs-lookup"><span data-stu-id="81b10-130">It is clear by inspecting the printed sums that the variable is in scope not only for the bodies of both <xref:System.Activities.Statements.CompensableActivity> but the <xref:System.Activities.Statements.CompensableActivity.ConfirmationHandler%2A> as well.</span></span>  
  
#### <a name="to-run-the-sample"></a><span data-ttu-id="81b10-131">Chcete-li spustit ukázku</span><span class="sxs-lookup"><span data-stu-id="81b10-131">To run the sample</span></span>  
  
1.  <span data-ttu-id="81b10-132">Spouštění řešení v [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)].</span><span class="sxs-lookup"><span data-stu-id="81b10-132">Load the solution in [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)].</span></span>  
  
2.  <span data-ttu-id="81b10-133">Spusťte aplikaci ConfirmationSample.exe.</span><span class="sxs-lookup"><span data-stu-id="81b10-133">Run the ConfirmationSample.exe application.</span></span>  
  
3.  <span data-ttu-id="81b10-134">Sledujte následující výstup:</span><span class="sxs-lookup"><span data-stu-id="81b10-134">Observe the following output:</span></span>  
  
 <span data-ttu-id="81b10-135">**Explicitní potvrzení: spuštění workflowCompensableActivity1: BodyCompensableActivity2: BodyCompensableActivity1: potvrzení HandlerEnd z workflowCompensableActivity2: potvrzení HandlerExplicit kompenzace: začátek workflowCompensableActivity1: BodyCompensableActivity2: BodyCompensableActivity1: kompenzace HandlerEnd z workflowCompensableActivity2: potvrzení HandlerCustom potvrzení obslužná rutina: začátek workflowCompensableActivity1: BodyCompensableActivity2: BodyCompensableActivity3: BodyEnd workflowCompensableActivity1: HandlerCompensableActivity2 potvrzení: potvrzení HandlerCompensableActivity3: HandlerVariable potvrzení přístupu v obslužnou rutinu potvrzení: Začátek workflowCompensableActivity1: BodyCompensableActivity1: je součet: 15CompensableActivity2: BodyCompensableActivity2: Přidání 7 sumCompensableActivity2: součet je nyní: 22End workflowCompensableActivity2: potvrzení HandlerCompensableActivity1: Potvrzení HandlerCompensableActivity2: je součet: 22CompensableActivity2: po odečtení 12 součet je nyní: 10Press ENTER ukončíte.**</span><span class="sxs-lookup"><span data-stu-id="81b10-135">**Explicit confirmation:Start of workflowCompensableActivity1: BodyCompensableActivity2: BodyCompensableActivity1: Confirmation HandlerEnd of workflowCompensableActivity2: Confirmation HandlerExplicit compensation:Start of workflowCompensableActivity1: BodyCompensableActivity2: BodyCompensableActivity1: Compensation HandlerEnd of workflowCompensableActivity2: Confirmation HandlerCustom confirmation handler:Start of workflowCompensableActivity1: BodyCompensableActivity2: BodyCompensableActivity3: BodyEnd of workflowCompensableActivity1: Confirmation HandlerCompensableActivity2: Confirmation HandlerCompensableActivity3: Confirmation HandlerVariable access in a confirmation handler:Start of workflowCompensableActivity1: BodyCompensableActivity1: The sum is: 15CompensableActivity2: BodyCompensableActivity2: Adding 7 to the sumCompensableActivity2: The sum is now: 22End of workflowCompensableActivity2: Confirmation HandlerCompensableActivity1: Confirmation HandlerCompensableActivity2: The sum is: 22CompensableActivity2: After subtracting 12 the sum is now: 10Press ENTER to exit.**</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="81b10-136">Ukázky může být již nainstalována na váš počítač.</span><span class="sxs-lookup"><span data-stu-id="81b10-136">The samples may already be installed on your machine.</span></span> <span data-ttu-id="81b10-137">Před pokračováním zkontrolovat na následující adresář (výchozí).</span><span class="sxs-lookup"><span data-stu-id="81b10-137">Check for the following (default) directory before continuing.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples`  
>   
>  <span data-ttu-id="81b10-138">Pokud tento adresář neexistuje, přejděte na [Windows Communication Foundation (WCF) a ukázky Windows Workflow Foundation (WF) pro rozhraní .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) ke stažení všechny [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] a [!INCLUDE[wf1](../../../../includes/wf1-md.md)] ukázky.</span><span class="sxs-lookup"><span data-stu-id="81b10-138">If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) to download all [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples.</span></span> <span data-ttu-id="81b10-139">Tato ukázka se nachází v následujícím adresáři.</span><span class="sxs-lookup"><span data-stu-id="81b10-139">This sample is located in the following directory.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples\WF\Basic\Compensation\Confirmation`