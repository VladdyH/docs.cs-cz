---
title: Pomocí CancellationScope
ms.date: 03/30/2017
ms.assetid: 39c5c338-b316-43d6-b7fe-a543281dd1ec
ms.openlocfilehash: 62b798b29149e30a2fae680b507f62ef0a2e23d7
ms.sourcegitcommit: 3d5d33f384eeba41b2dff79d096f47ccc8d8f03d
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 05/04/2018
ms.locfileid: "33517463"
---
# <a name="using-cancellationscope"></a><span data-ttu-id="2e402-102">Pomocí CancellationScope</span><span class="sxs-lookup"><span data-stu-id="2e402-102">Using CancellationScope</span></span>
<span data-ttu-id="2e402-103">Tento příklad znázorňuje způsob použití <xref:System.Activities.Statements.CancellationScope> aktivity zrušit práci v aplikaci.</span><span class="sxs-lookup"><span data-stu-id="2e402-103">This sample demonstrates how to use the <xref:System.Activities.Statements.CancellationScope> activity to cancel work in an application.</span></span>  
  
 <span data-ttu-id="2e402-104">Mnoho střední vrstvy součástmi a službami spoléhají na známý programovací konstrukce transakcí pro zrušení pro jejich zpracování.</span><span class="sxs-lookup"><span data-stu-id="2e402-104">Many middle tier components and services rely on the well-known programming construct of transactions to handle cancellation for them.</span></span>  <span data-ttu-id="2e402-105">Existují však mnoha situacích, ve kterých je nutné zrušit práce, kterou nelze provést v transakci.</span><span class="sxs-lookup"><span data-stu-id="2e402-105">However, there are many situations in which work that cannot be done in a transaction must be canceled.</span></span>  <span data-ttu-id="2e402-106">Pomocí zrušení je obtížnější než použití transakcí, protože nejprve musí být sledována práci, kterou je nutné zrušit.</span><span class="sxs-lookup"><span data-stu-id="2e402-106">Using cancellation is more difficult than using transactions, because work that must be canceled must first be tracked.</span></span> [!INCLUDE[netfx_current_short](../../../../includes/netfx-current-short-md.md)]<span data-ttu-id="2e402-107"> vám pomůže to tím, že poskytuje <xref:System.Activities.Statements.CancellationScope> aktivity.</span><span class="sxs-lookup"><span data-stu-id="2e402-107"> helps you with this by providing a <xref:System.Activities.Statements.CancellationScope> activity.</span></span>  
  
 <span data-ttu-id="2e402-108">Zrušení může být aktivována buď z aktivity nebo z nadřazené aktivity.</span><span class="sxs-lookup"><span data-stu-id="2e402-108">Cancellation can be triggered either from within an activity or from the activity's parent.</span></span>  <span data-ttu-id="2e402-109">Podřízené aktivity jsou naplánovány podle jejich nadřazené aktivity (například <xref:System.Activities.Statements.Sequence>, <xref:System.Activities.Statements.Parallel>, <xref:System.Activities.Statements.Flowchart>, nebo vlastní aktivity složený).</span><span class="sxs-lookup"><span data-stu-id="2e402-109">Child activities are scheduled by their parent activity (such as a <xref:System.Activities.Statements.Sequence>, <xref:System.Activities.Statements.Parallel>, <xref:System.Activities.Statements.Flowchart>, or a custom composite activity).</span></span>  <span data-ttu-id="2e402-110">Nadřazená aktivita, můžete zrušit podřízené aktivity z jakéhokoli důvodu.</span><span class="sxs-lookup"><span data-stu-id="2e402-110">The parent activity can cancel child activities for any reason.</span></span>  <span data-ttu-id="2e402-111">Například <xref:System.Activities.Statements.Parallel> aktivitu tři větve zruší zbývající větve vždy, když dokončí větve a <xref:System.Activities.Statements.Parallel.CompletionCondition%2A> výraz vyhodnocen jako `true`.</span><span class="sxs-lookup"><span data-stu-id="2e402-111">For example, a <xref:System.Activities.Statements.Parallel> activity with three child branches will cancel the remaining child branches whenever it completes a branch and the <xref:System.Activities.Statements.Parallel.CompletionCondition%2A> expression evaluates to `true`.</span></span> <span data-ttu-id="2e402-112">Pracovní postup lze také zrušit externě hostitelskou aplikaci voláním <xref:System.Activities.WorkflowApplication.Cancel%2A>.</span><span class="sxs-lookup"><span data-stu-id="2e402-112">The workflow can also be canceled externally by the host application by calling <xref:System.Activities.WorkflowApplication.Cancel%2A>.</span></span>  
  
 <span data-ttu-id="2e402-113">Použít <xref:System.Activities.Statements.CancellationScope> aktivity, put, musí být zrušena do práce <xref:System.Activities.Statements.CancellationScope.Body%2A> vlastnost a put práci, kterou provádí po zrušení do <xref:System.Activities.Statements.CancellationScope.CancellationHandler%2A> vlastnost.</span><span class="sxs-lookup"><span data-stu-id="2e402-113">To use the <xref:System.Activities.Statements.CancellationScope> activity, put the work that needs to be canceled into the <xref:System.Activities.Statements.CancellationScope.Body%2A> property, and put the work that is performed after cancellation into the <xref:System.Activities.Statements.CancellationScope.CancellationHandler%2A> property.</span></span>  
  
 <span data-ttu-id="2e402-114">Tento příklad znázorňuje zrušení aktivita z v rámci aktivity sám sebe.</span><span class="sxs-lookup"><span data-stu-id="2e402-114">This sample demonstrates cancelling an activity from within the activity itself.</span></span>  
  
 <span data-ttu-id="2e402-115">Scénář, který ukázce se používá k předvedení <xref:System.Activities.Statements.CancellationScope> aktivity je klient chtějí koupit lístek do Opole co nejdříve.</span><span class="sxs-lookup"><span data-stu-id="2e402-115">The scenario that the sample uses to demonstrate the <xref:System.Activities.Statements.CancellationScope> activity is a client wanting to buy a ticket to Miami as soon as possible.</span></span> <span data-ttu-id="2e402-116">Existují dvě cestovní kanceláře, které mají firmy.</span><span class="sxs-lookup"><span data-stu-id="2e402-116">There are two travel agencies that want the business.</span></span> <span data-ttu-id="2e402-117">Příklad používá dva <xref:System.Activities.Statements.CancellationScope> v rámci <xref:System.Activities.Statements.Parallel> aktivity pro modelování tento obchodní logiku.</span><span class="sxs-lookup"><span data-stu-id="2e402-117">The sample uses two <xref:System.Activities.Statements.CancellationScope> within a <xref:System.Activities.Statements.Parallel> activity to model this business logic.</span></span> <span data-ttu-id="2e402-118"><xref:System.Activities.Statements.Parallel.CompletionCondition%2A> z <xref:System.Activities.Statements.Parallel> aktivity je nastavený na `true`; od <xref:System.Activities.Statements.Parallel.CompletionCondition%2A> je zaškrtnuto, po dokončení všech větve, z tohoto důvodu zbývající větev, která má být zrušen po dokončení první větev.</span><span class="sxs-lookup"><span data-stu-id="2e402-118">The <xref:System.Activities.Statements.Parallel.CompletionCondition%2A> of the <xref:System.Activities.Statements.Parallel> activity is set to `true`; since the <xref:System.Activities.Statements.Parallel.CompletionCondition%2A> is checked after any branch completes, this will cause the remaining branch to be canceled after the first branch completes.</span></span> <span data-ttu-id="2e402-119">Klientská aplikace vás obě úřady koupit the-ticket a když první potvrdí, že má byly v rámci the-ticket, aplikace zruší pořadí v jiných agenturou.</span><span class="sxs-lookup"><span data-stu-id="2e402-119">The client application asks both agencies to buy the ticket, and when the first one confirms that the ticket has been bought, the application cancels the order at the other agency.</span></span>  
  
## <a name="to-use-this-sample"></a><span data-ttu-id="2e402-120">Pro fungování této ukázky</span><span class="sxs-lookup"><span data-stu-id="2e402-120">To use this sample</span></span>  
  
1.  <span data-ttu-id="2e402-121">Pomocí [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)], otevřete soubor řešení CancelationScopeXAML.sln.</span><span class="sxs-lookup"><span data-stu-id="2e402-121">Using [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)], open the CancelationScopeXAML.sln solution file.</span></span>  
  
2.  <span data-ttu-id="2e402-122">Sestavte řešení, stiskněte CTRL + SHIFT + B.</span><span class="sxs-lookup"><span data-stu-id="2e402-122">To build the solution, press CTRL+SHIFT+B.</span></span>  
  
3.  <span data-ttu-id="2e402-123">Chcete-li spustit řešení, stiskněte CTRL + F5.</span><span class="sxs-lookup"><span data-stu-id="2e402-123">To run the solution, press CTRL+F5.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="2e402-124">Ukázky může být již nainstalována na váš počítač.</span><span class="sxs-lookup"><span data-stu-id="2e402-124">The samples may already be installed on your machine.</span></span> <span data-ttu-id="2e402-125">Před pokračováním zkontrolovat na následující adresář (výchozí).</span><span class="sxs-lookup"><span data-stu-id="2e402-125">Check for the following (default) directory before continuing.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples`  
>   
>  <span data-ttu-id="2e402-126">Pokud tento adresář neexistuje, přejděte na [Windows Communication Foundation (WCF) a ukázky Windows Workflow Foundation (WF) pro rozhraní .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) ke stažení všechny Windows Communication Foundation (WCF) a [!INCLUDE[wf1](../../../../includes/wf1-md.md)] ukázky.</span><span class="sxs-lookup"><span data-stu-id="2e402-126">If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples.</span></span> <span data-ttu-id="2e402-127">Tato ukázka se nachází v následujícím adresáři.</span><span class="sxs-lookup"><span data-stu-id="2e402-127">This sample is located in the following directory.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples\WF\Basic\Built-InActivities\CancellationScope`