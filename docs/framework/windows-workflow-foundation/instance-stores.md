---
title: "Instance úložiště"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: f2629668-0923-4987-b943-67477131c1e0
caps.latest.revision: "14"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.openlocfilehash: c794c6e20b479ea4686caba29704f8851d108432
ms.sourcegitcommit: ce279f2d7fe2220e6ea0a25a8a7a5370ddf8d9f0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 12/02/2017
---
# <a name="instance-stores"></a><span data-ttu-id="3d632-102">Instance úložiště</span><span class="sxs-lookup"><span data-stu-id="3d632-102">Instance Stores</span></span>
<span data-ttu-id="3d632-103">Instance úložiště je logický kontejner instancí.</span><span class="sxs-lookup"><span data-stu-id="3d632-103">An instance store is a logical container of instances.</span></span> <span data-ttu-id="3d632-104">Je na místě, kde je uložena instance data a metadata.</span><span class="sxs-lookup"><span data-stu-id="3d632-104">It is the place where the instance data and metadata is stored.</span></span> <span data-ttu-id="3d632-105">Instance úložiště neznamená vyhrazené fyzické úložiště.</span><span class="sxs-lookup"><span data-stu-id="3d632-105">An instance store does not imply dedicated physical storage.</span></span> <span data-ttu-id="3d632-106">Instance úložiště může obsahovat trvanlivý informace v databázi systému SQL Server nebo informace o stavu netrvalý v paměti.</span><span class="sxs-lookup"><span data-stu-id="3d632-106">An instance store could contain durable information in a SQL Server database or non-durable state information in a memory.</span></span> <span data-ttu-id="3d632-107">[!INCLUDE[netfx_current_long](../../../includes/netfx-current-long-md.md)] Se dodává s SQL úložiště Instance pracovního postupu, který je na konkrétní implementace úložiště instance, které umožňuje pracovní postupy pro zachování dat instance a metadat do databáze systému SQL Server 2005 nebo SQL Server 2008.</span><span class="sxs-lookup"><span data-stu-id="3d632-107">The [!INCLUDE[netfx_current_long](../../../includes/netfx-current-long-md.md)] ships with the SQL Workflow Instance Store, which is a concrete implementation of an instance store that allows workflows to persist instance data and metadata into a SQL Server 2005 or SQL Server 2008 database.</span></span> <span data-ttu-id="3d632-108">Windows Server App Fabric kromě poskytuje konkrétní implementaci instance úložiště.</span><span class="sxs-lookup"><span data-stu-id="3d632-108">In addition Windows Server App Fabric also provides a concrete implementation of an instance store.</span></span> [!INCLUDE[crdefault](../../../includes/crdefault-md.md)]<span data-ttu-id="3d632-109">[Windows Server App Fabric Instance úložiště, dotazů a poskytovatelé řízení](http://go.microsoft.com/fwlink/?LinkID=201201&clcid=0x409).</span><span class="sxs-lookup"><span data-stu-id="3d632-109"> [Windows Server App Fabric Instance Store, Query, and Control Providers](http://go.microsoft.com/fwlink/?LinkID=201201&clcid=0x409).</span></span>  
  
 <span data-ttu-id="3d632-110">Trvalost rozhraní API je rozhraní mezi hostitelem a úložiště instance, které umožňuje hostitele k odeslání příkazu požadavky (například <xref:System.Activities.DurableInstancing.LoadWorkflowCommand> a <xref:System.Activities.DurableInstancing.SaveWorkflowCommand>) do úložiště instance.</span><span class="sxs-lookup"><span data-stu-id="3d632-110">The persistence API is the interface between a host and an instance store that allows the host to send command requests (for example, <xref:System.Activities.DurableInstancing.LoadWorkflowCommand> and <xref:System.Activities.DurableInstancing.SaveWorkflowCommand>) to the instance store.</span></span> <span data-ttu-id="3d632-111">Konkrétní implementaci toto rozhraní API se nazývá zprostředkovatele trvalost.</span><span class="sxs-lookup"><span data-stu-id="3d632-111">The concrete implementation of this API is called a persistence provider.</span></span> <span data-ttu-id="3d632-112">Zprostředkovatel trvalost přijímá požadavky z hostitele a upraví ukládání instance.</span><span class="sxs-lookup"><span data-stu-id="3d632-112">The persistence provider receives requests from a host and modifies the instance store.</span></span>  
  
 <span data-ttu-id="3d632-113">Hostitelé a instance úložišť jsou modulární tak, aby hostitel lze použít s mnoha instance úložiště a úložišti instanci lze použít s mnoha hostitele.</span><span class="sxs-lookup"><span data-stu-id="3d632-113">Hosts and instance stores are pluggable so that a host can be used with many instance stores, and an instance store can be used with many hosts.</span></span> <span data-ttu-id="3d632-114">Instance úložiště je obvykle optimalizována pro způsobu použití konkrétního hostitele, i když ukládání instance a hostitele může vyvíjet na nezávislé životní cykly.</span><span class="sxs-lookup"><span data-stu-id="3d632-114">An instance store is typically optimized for the usage patterns of a particular host, although the instance store and host may evolve on independent life cycles.</span></span> <span data-ttu-id="3d632-115">Například **hostitele služby pracovního postupu** a **SqlWorkflowInstanceStore** jsou navrženy pro práci a současně.</span><span class="sxs-lookup"><span data-stu-id="3d632-115">For example, the **WorkflowServiceHost** and the **SqlWorkflowInstanceStore** are designed to work well together.</span></span> <span data-ttu-id="3d632-116">Můžete vytvořit vlastní úložiště instance zachovat data a metadata instancí služby pracovního postupu a používat toto úložiště instance s **hostitele služby pracovního postupu**.</span><span class="sxs-lookup"><span data-stu-id="3d632-116">You can create your own instance store to persist data and metadata of workflow service instances and use that instance store with the **WorkflowServiceHost**.</span></span> <span data-ttu-id="3d632-117">Můžete například vytvořit OracleWorkflowInstanceStore, která umožní pracovní postupy zachování informace do databáze Oracle místo jejich uložení do databáze systému SQL Server.</span><span class="sxs-lookup"><span data-stu-id="3d632-117">For example, you can create an OracleWorkflowInstanceStore that lets workflows persist information into an Oracle database instead of saving them into a SQL Server database.</span></span>  
  
 <span data-ttu-id="3d632-118">Je běžné pro hostitele potřeba rozšířit o další funkce, která upraví trvalé objekty.</span><span class="sxs-lookup"><span data-stu-id="3d632-118">It is common for hosts to be extended with additional functionality that modifies the persisted objects.</span></span> <span data-ttu-id="3d632-119">Například instanci trvalost systému může být hostitel pracovního postupu rozšíření, které podporuje "Pozastavit" operace a úložiště instance SQL.</span><span class="sxs-lookup"><span data-stu-id="3d632-119">For example, an instance persistence system may have a workflow host, an extension that supports the "Suspend" operation, and an SQL instance store.</span></span>  <span data-ttu-id="3d632-120">Hostitele pracovního postupu může odeslat standardní příkaz například uložit nebo načíst, uložit nebo načíst z úložiště instance pracovního postupu a uložení do úložiště instanci pracovního postupu.</span><span class="sxs-lookup"><span data-stu-id="3d632-120">The workflow host might send a standard command such as Save or Load to save or load a workflow from an instance store or to save a workflow into an instance store.</span></span> <span data-ttu-id="3d632-121">Rozšíření pozastavit může přidat další sémantiku příkazy pro ukládání a načítání instance pracovního postupu tak, aby nelze načíst instanci pracovního postupu pozastavený.</span><span class="sxs-lookup"><span data-stu-id="3d632-121">The suspend extension might add additional semantics to the commands for saving and loading workflow instances so that a suspended workflow instance cannot be loaded.</span></span> <span data-ttu-id="3d632-122">Trvalost zprostředkovatele pro ukládání instance SQL rozumí příkazy pro ukládání a načítání instance pracovního postupu a implementuje příkazy voláním příslušné uložené procedury, které mění tabulky trvalé objekty v databázi systému SQL Server.</span><span class="sxs-lookup"><span data-stu-id="3d632-122">The persistence provider for the SQL instance store understands the commands for saving and loading workflow instances, and implements the commands by calling appropriate stored procedures that change the tables of persistent objects in an SQL Server database.</span></span>  
  
 <span data-ttu-id="3d632-123">Hostitel funguje jako vlastníka instance v rámci úložiště instance.</span><span class="sxs-lookup"><span data-stu-id="3d632-123">A host acts as an instance owner within an instance store.</span></span> <span data-ttu-id="3d632-124">Hostitel může fungovat jako více než jednoho vlastníka instance s více než jedno úložiště instance ve stejnou dobu.</span><span class="sxs-lookup"><span data-stu-id="3d632-124">A host may act as more than one instance owner with more than one instance store at the same time.</span></span> <span data-ttu-id="3d632-125">Hostitel poskytuje identifikátory GUID pro instanci klíče související s instancí.</span><span class="sxs-lookup"><span data-stu-id="3d632-125">The host provides GUIDs for instance keys associated with the instances.</span></span> <span data-ttu-id="3d632-126">Klíčem instance je jedinečný odkaz, který identifikuje instance.</span><span class="sxs-lookup"><span data-stu-id="3d632-126">An instance key is a unique alias that identifies an instance.</span></span> <span data-ttu-id="3d632-127">Trvalost systém vytvoří, aktualizuje a odstraní instanci vlastníka informace, jak se spouští příkazy požadoval hostitele.</span><span class="sxs-lookup"><span data-stu-id="3d632-127">The persistence system creates, updates, and deletes instance owner information as it executes commands requested by hosts.</span></span>  
  
 <span data-ttu-id="3d632-128">Následující seznam obsahuje důležité kroky hostitele interakci s instance úložiště:</span><span class="sxs-lookup"><span data-stu-id="3d632-128">The following list contains the important steps involved in the host’s interaction with the instance store:</span></span>  
  
1.  <span data-ttu-id="3d632-129">Získat **InstanceStore** od zprostředkovatele trvalost.</span><span class="sxs-lookup"><span data-stu-id="3d632-129">Obtain an **InstanceStore** from a persistence provider.</span></span>  

2.  <span data-ttu-id="3d632-130">Získat popisovač do instance voláním <xref:System.Runtime.DurableInstancing.InstanceStore.CreateInstanceHandle%2A> metodu **InstanceStore**.</span><span class="sxs-lookup"><span data-stu-id="3d632-130">Obtain the handle to an instance by calling the <xref:System.Runtime.DurableInstancing.InstanceStore.CreateInstanceHandle%2A> method on the **InstanceStore**.</span></span>  
  
3.  <span data-ttu-id="3d632-131">Použít příkazy proti popisovač instance voláním <xref:System.Runtime.DurableInstancing.InstanceStore.Execute%2A> metodu **InstanceStore**.</span><span class="sxs-lookup"><span data-stu-id="3d632-131">Invoke commands against the instance handle by calling the <xref:System.Runtime.DurableInstancing.InstanceStore.Execute%2A> method on the **InstanceStore**.</span></span>  
  
4.  <span data-ttu-id="3d632-132">Zkontrolujte <xref:System.Runtime.DurableInstancing.InstanceView> vrácený **InstanceStore.Execute** k určení výsledky příkazy.</span><span class="sxs-lookup"><span data-stu-id="3d632-132">Examine the <xref:System.Runtime.DurableInstancing.InstanceView> returned by **InstanceStore.Execute** to determine the results of the commands.</span></span>
