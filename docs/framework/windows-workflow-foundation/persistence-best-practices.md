---
title: "Trvalost osvědčené postupy"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 6974c5a4-1af8-4732-ab53-7d694608a3a0
caps.latest.revision: "7"
author: Erikre
ms.author: erikre
manager: erikre
ms.openlocfilehash: 20eb61ef05150b005fb7a3ab25fa21b4e6cd8a8f
ms.sourcegitcommit: bd1ef61f4bb794b25383d3d72e71041a5ced172e
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/18/2017
---
# <a name="persistence-best-practices"></a><span data-ttu-id="3f62b-102">Trvalost osvědčené postupy</span><span class="sxs-lookup"><span data-stu-id="3f62b-102">Persistence Best Practices</span></span>
<span data-ttu-id="3f62b-103">Tento dokument popisuje osvědčené postupy pro pracovní postup návrhu a konfigurace související s trvalost pracovního postupu.</span><span class="sxs-lookup"><span data-stu-id="3f62b-103">This document covers best practices for workflow design and configuration related to workflow persistence.</span></span>  
  
## <a name="design-and-implementation-of-durable-workflows"></a><span data-ttu-id="3f62b-104">Návrh a implementaci trvanlivý pracovních postupů</span><span class="sxs-lookup"><span data-stu-id="3f62b-104">Design and Implementation of Durable Workflows</span></span>  
 <span data-ttu-id="3f62b-105">Obecně platí pracovní postupy práci v krátkém období, která je prokládaný s doby, během kterých je pracovní postup nečinnosti, protože se čeká na událost.</span><span class="sxs-lookup"><span data-stu-id="3f62b-105">In general, workflows perform work in short periods that are interleaved with times during which the workflow is idle because it is waiting for an event.</span></span> <span data-ttu-id="3f62b-106">Tato událost může být například zpráva nebo jejichž platnost brzy vyprší časovače.</span><span class="sxs-lookup"><span data-stu-id="3f62b-106">This event can be such things as a message or an expiring timer.</span></span> <span data-ttu-id="3f62b-107">Abyste mohli uvolnit k instanci pracovního postupu, když se stane nečinnosti, musí hostitel služby uložit instanci pracovního postupu.</span><span class="sxs-lookup"><span data-stu-id="3f62b-107">To be able to unload the workflow instance when it becomes idle, the service host must persist the workflow instance.</span></span> <span data-ttu-id="3f62b-108">To je možné pouze v případě, že se k instanci pracovního postupu není v zóně no-persist (například čeká na dokončení transakce nebo čekání na asynchronní zpětné volání).</span><span class="sxs-lookup"><span data-stu-id="3f62b-108">This is possible only if the workflow instance is not in a no-persist zone (for example, waiting for a transaction to complete, or waiting for an asynchronous callback).</span></span> <span data-ttu-id="3f62b-109">Povolit instance pracovního postupu nečinnosti se uvolnit, by měl Autor pracovního postupu použijte obory transakce a asynchronní aktivity pro pouze krátkodobou akce.</span><span class="sxs-lookup"><span data-stu-id="3f62b-109">To allow an idle workflow instance to unload, the workflow author should use transaction scopes and asynchronous activities for short-lived actions only.</span></span> <span data-ttu-id="3f62b-110">Konkrétně Autor měli mít zpoždění aktivity v rámci těchto zón bez trvalosti co nejkratší.</span><span class="sxs-lookup"><span data-stu-id="3f62b-110">In particular, the author should keep delay activities within these no-persist zones as short as possible.</span></span>  
  
 <span data-ttu-id="3f62b-111">Pracovní postup lze zachovat, pouze pokud jsou všechny datové typy používané v tomto pracovním postupu serializable.</span><span class="sxs-lookup"><span data-stu-id="3f62b-111">A workflow can only be persisted if all of the data types used by the workflow are serializable.</span></span> <span data-ttu-id="3f62b-112">Kromě toho musí být serializovatelný s vlastní typy používané v pracovních postupech trvalou <xref:System.Runtime.Serialization.NetDataContractSerializer> Chcete-li nastavit jako trvalý, podle <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore>.</span><span class="sxs-lookup"><span data-stu-id="3f62b-112">In addition, custom types used in persisted workflows must be serializable with <xref:System.Runtime.Serialization.NetDataContractSerializer> in order to be persisted by <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore>.</span></span>  
  
 <span data-ttu-id="3f62b-113">Instance pracovního postupu nelze obnovit v případě selhání hostitele nebo počítače, pokud není trvalý.</span><span class="sxs-lookup"><span data-stu-id="3f62b-113">A workflow instance cannot be recovered in case of a host or computer failure if it has not been persisted.</span></span> <span data-ttu-id="3f62b-114">Obecně doporučujeme uchování instanci pracovního postupu již v rané fázi v cyklu pracovního postupu.</span><span class="sxs-lookup"><span data-stu-id="3f62b-114">In general, we recommend that you persist a workflow instance early in the workflow’s life cycle.</span></span>  
  
 <span data-ttu-id="3f62b-115">Pokud pracovní postup je zaneprázdněn po dlouhou dobu, doporučujeme vám, že můžete uložit instanci pracovního postupu pravidelně po celou dobu její zaneprázdněný.</span><span class="sxs-lookup"><span data-stu-id="3f62b-115">If your workflow is busy for a long time, we recommend that you persist the workflow instance regularly throughout its busy period.</span></span> <span data-ttu-id="3f62b-116">To provedete tak, že přidáte <xref:System.Activities.Statements.Persist> aktivity v rámci pořadí aktivit, které udržují zaneprázdněn k instanci pracovního postupu.</span><span class="sxs-lookup"><span data-stu-id="3f62b-116">You can do this by adding <xref:System.Activities.Statements.Persist> activities throughout the sequence of activities that keep the workflow instance busy.</span></span> <span data-ttu-id="3f62b-117">Tímto způsobem, aplikační domény recyklace, nezpůsobí selhání hostitele nebo selhání počítače systému se vrátit zpět na začátek zaneprázdněn období.</span><span class="sxs-lookup"><span data-stu-id="3f62b-117">In this manner, application domain recycling, host failures, or computer failures do not cause the system to be rolled back to the start of the busy period.</span></span> <span data-ttu-id="3f62b-118">Uvědomte si, že přidání <xref:System.Activities.Statements.Persist> aktivity do pracovního postupu, mohla způsobit snížení výkonu.</span><span class="sxs-lookup"><span data-stu-id="3f62b-118">Be aware that adding <xref:System.Activities.Statements.Persist> activities to your workflow could lead to a degradation of performance.</span></span>  
  
 <span data-ttu-id="3f62b-119">Windows Server App Fabric výrazně zjednodušuje konfiguraci a použití trvalost.</span><span class="sxs-lookup"><span data-stu-id="3f62b-119">Windows Server App Fabric greatly simplifies the configuration and use of persistence.</span></span> [!INCLUDE[crdefault](../../../includes/crdefault-md.md)]<span data-ttu-id="3f62b-120">[Systému Windows Server App Fabric trvalost](http://go.microsoft.com/fwlink/?LinkID=201200&clcid=0x409)</span><span class="sxs-lookup"><span data-stu-id="3f62b-120"> [Windows Server App Fabric Persistence](http://go.microsoft.com/fwlink/?LinkID=201200&clcid=0x409)</span></span>  
  
## <a name="configuration-of-scalability-parameters"></a><span data-ttu-id="3f62b-121">Konfigurace parametrů škálovatelnost</span><span class="sxs-lookup"><span data-stu-id="3f62b-121">Configuration of Scalability Parameters</span></span>  
 <span data-ttu-id="3f62b-122">Požadavky na škálovatelnost a výkon určují nastavení následujících parametrů:</span><span class="sxs-lookup"><span data-stu-id="3f62b-122">Scalability and performance requirements determine the settings of the following parameters:</span></span>  
  
-   <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToPersist%2A>  
  
-   <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToUnload%2A>  
  
-   <xref:System.ServiceModel.Activities.Description.SqlWorkflowInstanceStoreBehavior.InstanceLockedExceptionAction%2A>  
  
 <span data-ttu-id="3f62b-123">Tyto parametry musí být nastaven následujícím způsobem podle aktuální scénář.</span><span class="sxs-lookup"><span data-stu-id="3f62b-123">These parameters should be set as follows, according to the current scenario.</span></span>  
  
### <a name="scenario-a-small-number-of-workflow-instances-that-require-optimal-response-time"></a><span data-ttu-id="3f62b-124">Scénář: Malý počet instancí pracovních postupů, které vyžadují optimální odezvu</span><span class="sxs-lookup"><span data-stu-id="3f62b-124">Scenario: A Small Number of Workflow Instances That Require Optimal Response Time</span></span>  
 <span data-ttu-id="3f62b-125">V tomto scénáři by měla zůstat všechny instance pracovního postupu načíst, kdy se stanou nečinné.</span><span class="sxs-lookup"><span data-stu-id="3f62b-125">In this scenario, all workflow instances should remain loaded when they become idle.</span></span> <span data-ttu-id="3f62b-126">Nastavit <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToUnload%2A> velké hodnoty.</span><span class="sxs-lookup"><span data-stu-id="3f62b-126">Set <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToUnload%2A> to a large value.</span></span> <span data-ttu-id="3f62b-127">Použití tohoto nastavení nemohou instanci pracovního postupu přesouvat mezi počítači.</span><span class="sxs-lookup"><span data-stu-id="3f62b-127">The use of this setting prevents a workflow instance from moving between computers.</span></span> <span data-ttu-id="3f62b-128">Toto nastavení použijte jenom v případě, že platí jedna nebo více následujících akcí:</span><span class="sxs-lookup"><span data-stu-id="3f62b-128">Use this setting only if one or more of the following are true:</span></span>  
  
-   <span data-ttu-id="3f62b-129">Instance pracovního postupu obdrží do jedné zprávy v průběhu své životnosti.</span><span class="sxs-lookup"><span data-stu-id="3f62b-129">A workflow instance receives a single message throughout its lifetime.</span></span>  
  
-   <span data-ttu-id="3f62b-130">Všechny instance pracovního postupu spustit v jednom počítači</span><span class="sxs-lookup"><span data-stu-id="3f62b-130">All workflow instances run on a single computer</span></span>  
  
-   <span data-ttu-id="3f62b-131">Stejný počítač přijímá všechny zprávy, které přijímá instanci pracovního postupu.</span><span class="sxs-lookup"><span data-stu-id="3f62b-131">All messages that are received by a workflow instance are received by the same computer.</span></span>  
  
 <span data-ttu-id="3f62b-132">Použití <xref:System.Activities.Statements.Persist> aktivity nebo sady <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToPersist%2A> na hodnotu 0, pokud chcete povolit obnovení vaší instance pracovního postupu po selhání hostitele nebo počítače služby.</span><span class="sxs-lookup"><span data-stu-id="3f62b-132">Use <xref:System.Activities.Statements.Persist> activities or set <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToPersist%2A> to 0 to enable recovery of your workflow instance after service host or computer failures.</span></span>  
  
### <a name="scenario-workflow-instances-are-idle-for-long-periods-of-time"></a><span data-ttu-id="3f62b-133">Scénář: Instancí pracovních postupů jsou pro dlouhou dobu nečinnosti.</span><span class="sxs-lookup"><span data-stu-id="3f62b-133">Scenario: Workflow Instances Are Idle for Long Periods of Time</span></span>  
 <span data-ttu-id="3f62b-134">V tomto scénáři nastavit <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToUnload%2A> na 0, budou co nejdříve uvolnění prostředků.</span><span class="sxs-lookup"><span data-stu-id="3f62b-134">In this scenario, set <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToUnload%2A> to 0 to release resources as soon as possible.</span></span>  
  
### <a name="scenario-workflow-instances-receive-multiple-messages-in-a-short-period-of-time"></a><span data-ttu-id="3f62b-135">Scénář: Instance pracovního postupu přijímat více zpráv v krátké době</span><span class="sxs-lookup"><span data-stu-id="3f62b-135">Scenario: Workflow Instances Receive Multiple Messages in a Short Period of Time</span></span>  
 <span data-ttu-id="3f62b-136">V tomto scénáři nastavit <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToUnload%2A> na 60 sekund, pokud se tyto zprávy jsou přijímány do stejného počítače.</span><span class="sxs-lookup"><span data-stu-id="3f62b-136">In this scenario, set <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToUnload%2A> to 60 seconds if these messages are received by the same computer.</span></span> <span data-ttu-id="3f62b-137">Zabrání se tak rychlé posloupnost uvolnění a načítání instance pracovního postupu.</span><span class="sxs-lookup"><span data-stu-id="3f62b-137">This prevents a rapid sequence of unloading and loading of a workflow instance.</span></span> <span data-ttu-id="3f62b-138">To také není ponechat instance v paměti příliš dlouho.</span><span class="sxs-lookup"><span data-stu-id="3f62b-138">This also does not keep the instance in memory for too long.</span></span>  
  
 <span data-ttu-id="3f62b-139">Nastavit <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToUnload%2A> 0 a sadu <xref:System.ServiceModel.Activities.Description.SqlWorkflowInstanceStoreBehavior.InstanceLockedExceptionAction%2A> BasicRetry nebo AggressiveRetry, pokud se tyto zprávy můžou přijímat pomocí různých počítačů.</span><span class="sxs-lookup"><span data-stu-id="3f62b-139">Set <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToUnload%2A> to 0, and set <xref:System.ServiceModel.Activities.Description.SqlWorkflowInstanceStoreBehavior.InstanceLockedExceptionAction%2A> to BasicRetry or AggressiveRetry if these messages may be received by different computers.</span></span> <span data-ttu-id="3f62b-140">To umožňuje k instanci pracovního postupu, který se má načíst jiným počítačem.</span><span class="sxs-lookup"><span data-stu-id="3f62b-140">This allows the workflow instance to be loaded by another computer.</span></span>  
  
### <a name="scenario-workflow-uses-delay-activities-with-short-durations"></a><span data-ttu-id="3f62b-141">Scénář: Pracovní postup používá prodlevy aktivity s krátké doby trvání</span><span class="sxs-lookup"><span data-stu-id="3f62b-141">Scenario: Workflow Uses Delay Activities with Short Durations</span></span>  
 <span data-ttu-id="3f62b-142">V tomto scénáři <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> pravidelně dotazuje databázi trvalosti pro instance, která by měla být načíst z důvodu vypršenou platností <xref:System.Activities.Statements.Delay> aktivity.</span><span class="sxs-lookup"><span data-stu-id="3f62b-142">In this scenario, the <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> regularly polls the persistence database for instances that should be loaded because of an expired <xref:System.Activities.Statements.Delay> activity.</span></span> <span data-ttu-id="3f62b-143">Pokud <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> najde časovač vypršení platnosti v dalším intervalu dotazování úložiště Instance pracovního postupu SQL zkracuje interval dotazování.</span><span class="sxs-lookup"><span data-stu-id="3f62b-143">If the <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> finds a timer that will expire in the next polling interval, the SQL Workflow Instance Store shortens the polling interval.</span></span> <span data-ttu-id="3f62b-144">Další dotazování dojde poté bezprostředně potom, co časovač vypršela platnost.</span><span class="sxs-lookup"><span data-stu-id="3f62b-144">The next poll will then occur right after the timer has expired.</span></span> <span data-ttu-id="3f62b-145">Tento způsob ukládání Instance pracovního postupu SQL dosahuje vysokou přesnost časovače, které se spouštět déle než interval dotazování, které se nastavuje pomocí <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.RunnableInstancesDetectionPeriod%2A>.</span><span class="sxs-lookup"><span data-stu-id="3f62b-145">This way, the SQL Workflow Instance Store achieves a high accuracy of timers that run longer than the polling interval, which is set by <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.RunnableInstancesDetectionPeriod%2A>.</span></span> <span data-ttu-id="3f62b-146">Pokud chcete povolit včas zpracování kratší zpoždění, musí zůstat k instanci pracovního postupu v paměti pro alespoň jeden interval dotazování.</span><span class="sxs-lookup"><span data-stu-id="3f62b-146">To enable timely processing of shorter delays, the workflow instance must remain in memory for at least one polling interval.</span></span>  
  
 <span data-ttu-id="3f62b-147">Nastavit <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToPersist%2A> na 0, budou zapisovat do databáze trvalost čas vypršení platnosti.</span><span class="sxs-lookup"><span data-stu-id="3f62b-147">Set <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToPersist%2A> to 0 to write the expiration time to the persistence database.</span></span>  
  
 <span data-ttu-id="3f62b-148">Nastavit <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToUnload%2A> na delší než nebo rovna hodnotě <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.RunnableInstancesDetectionPeriod%2A> pro instance v paměti pro alespoň jeden interval dotazování.</span><span class="sxs-lookup"><span data-stu-id="3f62b-148">Set <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToUnload%2A> to longer than or equal to <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.RunnableInstancesDetectionPeriod%2A> to keep the instance in memory for at least one polling interval.</span></span>  
  
 <span data-ttu-id="3f62b-149">Nedoporučujeme snižuje <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.RunnableInstancesDetectionPeriod%2A> vzhledem k tomu, že to vede k zvýšená zátěž na databázi trvalost.</span><span class="sxs-lookup"><span data-stu-id="3f62b-149">We do not recommend reducing the <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.RunnableInstancesDetectionPeriod%2A> because this leads to an increased load on the persistence database.</span></span> <span data-ttu-id="3f62b-150">Každý hostitel služby, který používá <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> dotazuje databázi jednou za období detekce.</span><span class="sxs-lookup"><span data-stu-id="3f62b-150">Each service host that uses the <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> polls the database one time per detection period.</span></span> <span data-ttu-id="3f62b-151">Nastavení <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.RunnableInstancesDetectionPeriod%2A> příliš malá na čas interval může způsobit snížení Pokud velký počet hostitelů služby výkonnosti vašeho systému.</span><span class="sxs-lookup"><span data-stu-id="3f62b-151">Setting <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.RunnableInstancesDetectionPeriod%2A> to too small a time interval may cause your system's performance to decrease if the number of service hosts is large.</span></span>  
  
## <a name="configuring-the-sql-workflow-instance-store"></a><span data-ttu-id="3f62b-152">Konfigurace úložiště Instance pracovního postupu SQL</span><span class="sxs-lookup"><span data-stu-id="3f62b-152">Configuring the SQL Workflow Instance Store</span></span>  
 <span data-ttu-id="3f62b-153">Ukládání Instance pracovního postupu SQL má následující konfigurační parametry:</span><span class="sxs-lookup"><span data-stu-id="3f62b-153">The SQL Workflow Instance Store has the following configuration parameters:</span></span>  
  
 <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.InstanceEncodingOption%2A>  
 <span data-ttu-id="3f62b-154">Tento parametr nastaví <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> komprimovat stav instance pracovního postupu.</span><span class="sxs-lookup"><span data-stu-id="3f62b-154">This parameter instructs the <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> to compress the workflow instance state.</span></span> <span data-ttu-id="3f62b-155">Komprese snižuje množství dat, který je uložen v databázi trvalosti a snižuje se zatížení sítě v případě, že vyhrazený databázový server je umístěná databáze trvalost.</span><span class="sxs-lookup"><span data-stu-id="3f62b-155">Compression reduces the amount of data that is stored in the persistence database and reduces network traffic in case the persistence database resides on a dedicated database server.</span></span> <span data-ttu-id="3f62b-156">Pokud se používá komprese, vyžaduje výpočetní prostředky pro komprimování a extrahování stav instance.</span><span class="sxs-lookup"><span data-stu-id="3f62b-156">If compression is used, it requires computational resources to compress and extract the instance state.</span></span> <span data-ttu-id="3f62b-157">Ve většině případů komprese poskytuje vyšší výkon.</span><span class="sxs-lookup"><span data-stu-id="3f62b-157">In most cases, compression yields increased performance.</span></span>  
  
 <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.InstanceCompletionAction%2A>  
 <span data-ttu-id="3f62b-158">Tento parametr nastaví <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> zachovat nebo odstranit dokončené instance.</span><span class="sxs-lookup"><span data-stu-id="3f62b-158">This parameter instructs the <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> to either keep or delete completed instances.</span></span> <span data-ttu-id="3f62b-159">Zachování dokončit instancí zvyšuje požadavky na úložiště databáze trvalosti a za následek větší tabulky, což zvyšuje úroveň časy vyhledávací tabulky.</span><span class="sxs-lookup"><span data-stu-id="3f62b-159">Keeping completed instances increases the persistence database storage requirements and leads to larger tables, which increases table lookup times.</span></span> <span data-ttu-id="3f62b-160">Pokud dokončené instance jsou vyžadovány pro ladění nebo auditování, je nejvhodnější dáte pokyn, aby <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> k odstranění dokončit instancí.</span><span class="sxs-lookup"><span data-stu-id="3f62b-160">Unless completed instances are required for debugging or auditing, it is best to instruct the <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> to delete completed instances.</span></span> <span data-ttu-id="3f62b-161">Odstraněné instance by měly být udržovány pouze v případě, že uživatel vytvoří proces pro nakonec je odstranit.</span><span class="sxs-lookup"><span data-stu-id="3f62b-161">Deleted instances should be kept only if the user establishes a process for eventually removing them.</span></span> <span data-ttu-id="3f62b-162">Všimněte si, že korelace klíče nelze znovu použít také k instanci pracovního postupu dokončené nachází v úložišti instance.</span><span class="sxs-lookup"><span data-stu-id="3f62b-162">Note that correlation keys cannot be reused as long as the completed workflow instance resides in the instance store.</span></span>  
  
 <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.RunnableInstancesDetectionPeriod%2A>  
 <span data-ttu-id="3f62b-163">Tento parametr definuje maximální interval, pomocí kterého <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> dotazuje databázi trvalosti pro instance, které by měly být načteny při zpracování <xref:System.Activities.Statements.Delay> aktivity vyprší.</span><span class="sxs-lookup"><span data-stu-id="3f62b-163">This parameter defines the maximum interval with which the <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> polls the persistence database for instances that should be loaded when a <xref:System.Activities.Statements.Delay> activity expires.</span></span> <span data-ttu-id="3f62b-164">Pokud <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> vyhledá časovač, který vyprší za další interval dotazování, zkrátí interval dotazování, tak, aby další dotazování dojde bezprostředně potom, co časovač vypršela platnost.</span><span class="sxs-lookup"><span data-stu-id="3f62b-164">If the <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> finds a timer that will expire in the next polling interval, it shortens the polling interval so that the next poll will occur right after the timer has expired.</span></span> <span data-ttu-id="3f62b-165">Tento způsob ukládání Instance pracovního postupu SQL dosahuje vysokou přesnost časovače, které se spouštět déle než <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.RunnableInstancesDetectionPeriod%2A>.</span><span class="sxs-lookup"><span data-stu-id="3f62b-165">This way, the SQL Workflow Instance Store achieves a high accuracy of timers that run longer than <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.RunnableInstancesDetectionPeriod%2A>.</span></span>  
  
 <span data-ttu-id="3f62b-166">Nedoporučujeme snižuje <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.RunnableInstancesDetectionPeriod%2A>, protože to vede k zvýšená zátěž na databázi trvalost.</span><span class="sxs-lookup"><span data-stu-id="3f62b-166">We do not recommend reducing the <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.RunnableInstancesDetectionPeriod%2A>, because this leads to an increased load on the persistence database.</span></span> <span data-ttu-id="3f62b-167">Každý hostitel služby, který používá <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> dotazuje databázi jednou za období detekce.</span><span class="sxs-lookup"><span data-stu-id="3f62b-167">Each service host that uses the <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> polls the database one time per detection period.</span></span> <span data-ttu-id="3f62b-168">Nastavení <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.RunnableInstancesDetectionPeriod%2A> na příliš malá intervalu může způsobit snížení Pokud velký počet hostitelů služby výkonnosti vašeho systému.</span><span class="sxs-lookup"><span data-stu-id="3f62b-168">Setting <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.RunnableInstancesDetectionPeriod%2A> to too small an interval may cause your system's performance to decrease if the number of service hosts is large.</span></span>  
  
 <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.HostLockRenewalPeriod%2A>  
 <span data-ttu-id="3f62b-169">Tento parametr určuje interval, pomocí kterého hostitele obnovuje jeho zámku v databázi trvalost.</span><span class="sxs-lookup"><span data-stu-id="3f62b-169">This parameter defines the interval with which the host renews its lock in the persistence database.</span></span> <span data-ttu-id="3f62b-170">Tento interval zkrátit vám umožní rychlejší obnovení instance pracovního postupu v případě selhání hostitele nebo počítače.</span><span class="sxs-lookup"><span data-stu-id="3f62b-170">Shortening this interval will enable a quicker recovery of the workflow instances in case a host or computer fails.</span></span> <span data-ttu-id="3f62b-171">Interval obnovování krátké zámku na druhé straně zvyšuje zatížení databáze trvalost.</span><span class="sxs-lookup"><span data-stu-id="3f62b-171">On the other hand, a short lock renewal period increases the load on the persistence database.</span></span> <span data-ttu-id="3f62b-172">Každý hostitel služby, který používá <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> zaktualizuje jeho zámky v databázi jednou doby obnovení.</span><span class="sxs-lookup"><span data-stu-id="3f62b-172">Each service host that uses the <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> will update its locks in the database one time per renewal period.</span></span> <span data-ttu-id="3f62b-173">Pokud počítač používá mnoho hostitelů služby, ujistěte se, že zatížení způsobeno obnovení zámku poklesu výkonu systému.</span><span class="sxs-lookup"><span data-stu-id="3f62b-173">If a computer runs many service hosts, make sure that the load caused by lock renewal does not decrease your system's performance.</span></span> <span data-ttu-id="3f62b-174">Pokud ho, zvažte zvýšení <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.HostLockRenewalPeriod%2A>.</span><span class="sxs-lookup"><span data-stu-id="3f62b-174">If it does, consider increasing the <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.HostLockRenewalPeriod%2A>.</span></span>  
  
 <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.InstanceLockedExceptionAction%2A>  
 <span data-ttu-id="3f62b-175">Pokud je povoleno, <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> opakování načíst uzamčeném instance pro další 30 sekund.</span><span class="sxs-lookup"><span data-stu-id="3f62b-175">If enabled, the <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> retries to load a locked instance for the next 30 seconds.</span></span> <span data-ttu-id="3f62b-176">Nastavit <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.InstanceLockedExceptionAction%2A> BasicRetry nebo AggressiveRetry Pokud pracovní postup přijímá více zpráv v krátkém čase, a tyto zprávy jsou přijímány různých počítačích.</span><span class="sxs-lookup"><span data-stu-id="3f62b-176">Set <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.InstanceLockedExceptionAction%2A> to BasicRetry or AggressiveRetry if the workflow receives multiple messages in a short time, and these messages are received by different computers.</span></span>  
  
 <span data-ttu-id="3f62b-177">Protože mechanismus opakování zatížení nezavádí žádné výkonu režie, dokud nejsou se pokusili zatížení opakování, <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.InstanceLockedExceptionAction%2A> by měla být vždy povolená.</span><span class="sxs-lookup"><span data-stu-id="3f62b-177">Because the load retry mechanism does not introduce any performance overhead as long as load retries are not tried, <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.InstanceLockedExceptionAction%2A> should always be enabled.</span></span>
