---
title: "Vytváření vlastních toku řízení aktivit"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 27f409f6-2d1d-4cfb-9765-93eb2ad667d5
caps.latest.revision: "2"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.openlocfilehash: 5a2a45f0b923c9f30bb8df1c59be54e00d844551
ms.sourcegitcommit: ce279f2d7fe2220e6ea0a25a8a7a5370ddf8d9f0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 12/02/2017
---
# <a name="creating-custom-flow-control-activities"></a><span data-ttu-id="9c0ca-102">Vytváření vlastních toku řízení aktivit</span><span class="sxs-lookup"><span data-stu-id="9c0ca-102">Creating custom flow control activities</span></span>
<span data-ttu-id="9c0ca-103">.Net Framework obsahuje celou řadu řízení toku aktivity, které fungují podobně jako abstraktní programovací struktury (například <xref:System.Activities.Statements.Flowchart>) nebo se standardní programovací příkazy (například <xref:System.Activities.Statements.If>).</span><span class="sxs-lookup"><span data-stu-id="9c0ca-103">The .Net Framework contains a variety of flow-control activities that function similarly to abstract programming structures (such as <xref:System.Activities.Statements.Flowchart>)   or to standard programming statements (such as <xref:System.Activities.Statements.If>).</span></span> <span data-ttu-id="9c0ca-104">Toto téma popisuje architekturu jednoho z ukázkových projektů [Non-obecné ForEach](../../../docs/framework/windows-workflow-foundation/samples/non-generic-foreach.md).</span><span class="sxs-lookup"><span data-stu-id="9c0ca-104">This topic discusses the architecture of one of the sample projects, [Non-Generic ForEach](../../../docs/framework/windows-workflow-foundation/samples/non-generic-foreach.md).</span></span>  
  
## <a name="creating-the-custom-class"></a><span data-ttu-id="9c0ca-105">Vytvoření vlastní třídy</span><span class="sxs-lookup"><span data-stu-id="9c0ca-105">Creating the custom class</span></span>  
 <span data-ttu-id="9c0ca-106">Vzhledem k tomu, že ForEach Non-obecná třída bude třeba naplánovat podřízené aktivity, ji budou muset být odvozen z <xref:System.Activities.NativeActivity>, od aktivity, které jsou odvozeny od <xref:System.Workflow.Activities.CodeActivity> nemají tuto funkci.</span><span class="sxs-lookup"><span data-stu-id="9c0ca-106">Since the Non-Generic ForEach class will need to schedule child activities, it will need to derive from <xref:System.Activities.NativeActivity>, since activities that derive from <xref:System.Workflow.Activities.CodeActivity> do not have this functionality.</span></span>  
  
```  
public sealed class ForEach : NativeActivity  
    {  
```  
  
 <span data-ttu-id="9c0ca-107">Vlastní třída vyžaduje několik členů k ukládání dat používá aktivitu a funkce spuštění aktivity podřízené aktivity.</span><span class="sxs-lookup"><span data-stu-id="9c0ca-107">The custom class requires several members to store data being used by the activity, and to provide functionality to execute the activity’s child activities.</span></span> <span data-ttu-id="9c0ca-108">Tito členové patří:</span><span class="sxs-lookup"><span data-stu-id="9c0ca-108">These members include:</span></span>  
  
-   <span data-ttu-id="9c0ca-109">`valueEnumerator`: Neveřejný <xref:System.Activities.Variable%601> typu <xref:System.Collections.IEnumerator> použít pro iteraci prostřednictvím kolekce položek.</span><span class="sxs-lookup"><span data-stu-id="9c0ca-109">`valueEnumerator`: The non-public <xref:System.Activities.Variable%601> of type <xref:System.Collections.IEnumerator> used to iterate over the collection of items.</span></span> <span data-ttu-id="9c0ca-110">Tento člen je typu <xref:System.Activities.Variable%601> vzhledem k tomu, že se používá interně v aktivity, nikoli argument nebo veřejné vlastnosti, který se použije, pokud se tento objekt tak, aby měl počátek mimo aktivity.</span><span class="sxs-lookup"><span data-stu-id="9c0ca-110">This member is of type <xref:System.Activities.Variable%601> because it is used internally in the activity, rather than an argument or public property, which would be used if this object were to have an origin outside the activity.</span></span>  
  
-   <span data-ttu-id="9c0ca-111">`OnChildComplete`: Veřejné <xref:System.Activities.CompletionCallback> vlastnost, která spustí po dokončení provádění jednotlivých podřízených.</span><span class="sxs-lookup"><span data-stu-id="9c0ca-111">`OnChildComplete`: The public <xref:System.Activities.CompletionCallback> property that executes when each child completes execution.</span></span> <span data-ttu-id="9c0ca-112">Tento člen je definován jako vlastnost CLR, vzhledem k tomu, že nedojde ke změně jeho hodnota pro různé instance aktivity.</span><span class="sxs-lookup"><span data-stu-id="9c0ca-112">This member is defined as a CLR property, since its value will not change for different instances of the activity.</span></span>  
  
-   <span data-ttu-id="9c0ca-113">`Values`: Kolekce vstupy používá pro opakování podřízené aktivity.</span><span class="sxs-lookup"><span data-stu-id="9c0ca-113">`Values`: The collection of inputs used for the iterations of the child activity.</span></span> <span data-ttu-id="9c0ca-114">Tento člen je typu <xref:System.Activities.InArgument%601>, protože je původu dat mimo aktivitu, ale obsah kolekce neočekává změnit během provádění aktivity.</span><span class="sxs-lookup"><span data-stu-id="9c0ca-114">This member is of type <xref:System.Activities.InArgument%601>, since the origin of the data is outside the activity, but the contents of the collection is not expected to change during the execution of the activity.</span></span> <span data-ttu-id="9c0ca-115">V případě potřeby funkce pro změnu obsahu této kolekce v průběhu provádění aktivity (Chcete-li přidat nebo odebrat aktivity, například) aktivity tento člen by byla definována jako <xref:System.Activities.ActivityAction>, které by byly vyhodnocovány pokaždé, když byl přistupoval, takže změny budou k dispozici pro aktivity.</span><span class="sxs-lookup"><span data-stu-id="9c0ca-115">If the activity needed the functionality to change the contents of this collection while the activity was executing (to add or remove activities, for instance), this member would have been defined as an <xref:System.Activities.ActivityAction>, which then would have been evaluated every time it was accessed, so that changes would be available to the activity.</span></span>  
  
-   <span data-ttu-id="9c0ca-116">`Body`: Aktivitu nelze provést pro každou položku v definuje tento člen `Values` kolekce.</span><span class="sxs-lookup"><span data-stu-id="9c0ca-116">`Body`: This member defines the activity to be executed for each item in the `Values` collection.</span></span> <span data-ttu-id="9c0ca-117">Tento člen je definován jako <xref:System.Activities.ActivityAction> tak, aby vyhodnotí se pokaždé, když je přístupný.</span><span class="sxs-lookup"><span data-stu-id="9c0ca-117">This member is defined as an <xref:System.Activities.ActivityAction> so that it is evaluated every time it is accessed.</span></span>  
  
-   <span data-ttu-id="9c0ca-118">`Execute`: Tato metoda používá `InternalExecute`, `OnForEachComplete`, a `GetStateAndExecute` neveřejným členy naplánovat provedení a přiřadit obslužná rutina dokončení podřízené aktivity definované v textu člena.</span><span class="sxs-lookup"><span data-stu-id="9c0ca-118">`Execute`: This method uses the `InternalExecute`, `OnForEachComplete`, and `GetStateAndExecute` non-public members to schedule the execution and assign the completion handler of the child activity defined in the Body member.</span></span>  
  
-   <span data-ttu-id="9c0ca-119">`CacheMetadata`: Tento člen poskytne informace potřebné k provedení aktivity modulu runtime.</span><span class="sxs-lookup"><span data-stu-id="9c0ca-119">`CacheMetadata`: This member provides the runtime with the information it needs to execute the activity.</span></span> <span data-ttu-id="9c0ca-120">Ve výchozím nastavení, aktivity na `CacheMetadata` metoda bude informovat modul runtime všechny veřejné členy aktivity, ale vzhledem k tomu, že tato aktivita používá soukromé členy pro některé funkce, je nutné informovat runtime jejich existence tak, aby modul runtime můžete mít na paměti je.</span><span class="sxs-lookup"><span data-stu-id="9c0ca-120">By default, an activity’s `CacheMetadata` method will inform the runtime of all public members of the activity, but since this activity uses private members for some functionality, it needs to inform the runtime of their existence so that the runtime can be aware of them.</span></span> <span data-ttu-id="9c0ca-121">V takovém případě `CacheMetadata` přepsána funkce tak, aby privátní `valueEnumerator` člen je přístupná.</span><span class="sxs-lookup"><span data-stu-id="9c0ca-121">In this case, the `CacheMetadata` function is overridden so that the private `valueEnumerator` member can be accessed.</span></span> <span data-ttu-id="9c0ca-122">Tento člen také vytváří argument pro hodnoty pro aktivitu, takže je lze předat v aktivitě během provádění.</span><span class="sxs-lookup"><span data-stu-id="9c0ca-122">This member also creates an argument for the values for the activity so that they can be passed in to the activity during execution.</span></span>
