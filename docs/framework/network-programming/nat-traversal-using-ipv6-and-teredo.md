---
title: "NAT Traversal používající protokoly IPv6 a Teredo"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 568cd245-3300-49ef-a995-d81bf845d961
caps.latest.revision: "6"
author: mcleblanc
ms.author: markl
manager: markl
ms.openlocfilehash: 466e3faed9b2877671ca265afdb613607b12f0de
ms.sourcegitcommit: 4f3fef493080a43e70e951223894768d36ce430a
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 11/21/2017
---
# <a name="nat-traversal-using-ipv6-and-teredo"></a><span data-ttu-id="e7b0a-102">NAT Traversal používající protokoly IPv6 a Teredo</span><span class="sxs-lookup"><span data-stu-id="e7b0a-102">NAT Traversal using IPv6 and Teredo</span></span>
<span data-ttu-id="e7b0a-103">Byly provedeny vylepšení, která poskytuje podporu pro překlad adres (NAT) traversal.</span><span class="sxs-lookup"><span data-stu-id="e7b0a-103">Enhancements were made that provide support for Network Address Translation (NAT) traversal.</span></span> <span data-ttu-id="e7b0a-104">Tyto změny jsou navrženy pro použití s IPv6 a Teredo, ale jsou i pro jiné IP tunelování technologie.</span><span class="sxs-lookup"><span data-stu-id="e7b0a-104">These changes are designed for use with IPv6 and Teredo, but they are also applicable to other IP tunneling technologies.</span></span> <span data-ttu-id="e7b0a-105">Tato vylepšení ovlivnit třídy v <xref:System.Net> a související obory názvů.</span><span class="sxs-lookup"><span data-stu-id="e7b0a-105">These enhancements affect classes in the <xref:System.Net> and related namespaces.</span></span>  
  
 <span data-ttu-id="e7b0a-106">Tyto změny mohou ovlivnit klientské a serverové aplikace, které plánujete používat IP tunelování technologie.</span><span class="sxs-lookup"><span data-stu-id="e7b0a-106">These changes can affect client and server applications that plan to use IP tunneling technologies.</span></span>  
  
 <span data-ttu-id="e7b0a-107">K podpoře NAT traversal změny jsou k dispozici pouze pro aplikace pomocí rozhraní .NET Framework verze 4.</span><span class="sxs-lookup"><span data-stu-id="e7b0a-107">The changes to support NAT traversal are available only for applications using .NET Framework version 4.</span></span> <span data-ttu-id="e7b0a-108">Tyto funkce nejsou k dispozici v dřívějších verzích rozhraní .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="e7b0a-108">These features are not available on earlier versions of the .NET Framework.</span></span>  
  
## <a name="overview"></a><span data-ttu-id="e7b0a-109">Přehled</span><span class="sxs-lookup"><span data-stu-id="e7b0a-109">Overview</span></span>  
 <span data-ttu-id="e7b0a-110">Internet Protocol verze 4 (IPv4) definován jako 32 bitů adresu IPv4.</span><span class="sxs-lookup"><span data-stu-id="e7b0a-110">The Internet Protocol version 4 (IPv4) defined an IPv4 address as 32 bits long.</span></span> <span data-ttu-id="e7b0a-111">V důsledku toho IPv4 podporuje přibližně 4 miliardy jedinečných adres IP (2 ^ 32).</span><span class="sxs-lookup"><span data-stu-id="e7b0a-111">As a result, IPv4 supports approximately 4 billion unique IP addresses (2^32).</span></span> <span data-ttu-id="e7b0a-112">Jako počet počítačů a síťových zařízení na Internetu rozšířit 1990s se objevily omezení prostoru IPv4 adres.</span><span class="sxs-lookup"><span data-stu-id="e7b0a-112">As the number of computers and network devices on the Internet expanded in the 1990s, the limits of the IPv4 address space became apparent.</span></span>  
  
 <span data-ttu-id="e7b0a-113">Jedním z několika technik, které slouží k rozšíření životnost IPv4 bylo nasazení NAT, abyste umožnili jeden jedinečný veřejnou IP adresu představují velký počet privátní IP adresy (privátní Intranet).</span><span class="sxs-lookup"><span data-stu-id="e7b0a-113">One of several techniques used to extend the lifetime of IPv4 has been to deploy NAT to allow a single unique public IP address to represent a large number of private IP addresses (private Intranet).</span></span> <span data-ttu-id="e7b0a-114">Soukromé IP adresy za zařízením NAT sdílet jednu veřejnou adresu IPv4.</span><span class="sxs-lookup"><span data-stu-id="e7b0a-114">The private IP addresses behind the NAT device share the single public IPv4 address.</span></span> <span data-ttu-id="e7b0a-115">Vyhrazené hardwarové zařízení (levné bezdrátové přístupové body a směrovač, např.) nebo počítači je spuštěna služba k poskytování adres (NAT) může být zařízení NAT</span><span class="sxs-lookup"><span data-stu-id="e7b0a-115">The NAT device may be a dedicated hardware device (an inexpensive Wireless Access Point and router, for example) or a computer running a service to provide NAT.</span></span> <span data-ttu-id="e7b0a-116">Zařízení nebo službu, aby tato veřejná IP adresa překládá síťových paketů IP mezi veřejného Internetu a privátní sítě Intranet.</span><span class="sxs-lookup"><span data-stu-id="e7b0a-116">A device or service for this public IP address translates IP network packets between the public Internet and the private Intranet.</span></span>  
  
 <span data-ttu-id="e7b0a-117">Toto schéma funguje dobře pro klientské aplikace spuštěné v soukromé síti Intranet, které odesílat požadavky na jiné adresy IP (obvykle servery) na Internetu.</span><span class="sxs-lookup"><span data-stu-id="e7b0a-117">This scheme works well for client applications running on the private Intranet that send requests to other IP addresses (usually servers) on the Internet.</span></span> <span data-ttu-id="e7b0a-118">Zařízení NAT nebo serveru můžete ponechat mapování požadavků od klientů, pokud odpověď se vrátí, bude vědět, kam má posílat odpovědi.</span><span class="sxs-lookup"><span data-stu-id="e7b0a-118">The NAT device or server can keep a mapping of client requests so when a response is returned it knows where to send the response.</span></span> <span data-ttu-id="e7b0a-119">Ale toto schéma činí problémy pro aplikace spuštěné v privátním intranetu za zařízením NAT, které mají poskytovat služby, přijímat pakety a reagovat.</span><span class="sxs-lookup"><span data-stu-id="e7b0a-119">But this scheme poses problems for applications running in the private Intranet behind the NAT device that want to provide services, listen for packets, and respond.</span></span> <span data-ttu-id="e7b0a-120">Jde zejména v případě aplikací peer-to-peer.</span><span class="sxs-lookup"><span data-stu-id="e7b0a-120">This is particularly the case for peer-to-peer applications.</span></span>  
  
 <span data-ttu-id="e7b0a-121">Protokol IPv6 adresu IPv4 definován jako 128 bitů.</span><span class="sxs-lookup"><span data-stu-id="e7b0a-121">The IPv6 protocol defined an IPv4 address as 128 bits long.</span></span> <span data-ttu-id="e7b0a-122">V důsledku toho podporuje protokol IPv6 a velmi velký adresní prostor IP adres 3.2 × 10 ^ 38 jedinečných adres (2 ^ 128 znaků).</span><span class="sxs-lookup"><span data-stu-id="e7b0a-122">As a result, IPv6 supports very a large IP address space of 3.2 x 10^38 unique addresses (2^128).</span></span> <span data-ttu-id="e7b0a-123">S adresním prostorem této velikosti je možné pro každé zařízení připojené k Internetu, aby bylo možné přidělit jedinečnou adresu.</span><span class="sxs-lookup"><span data-stu-id="e7b0a-123">With an address space of this size, it is possible for every device connected to the Internet to be given a unique address.</span></span> <span data-ttu-id="e7b0a-124">Ale dochází k problémům.</span><span class="sxs-lookup"><span data-stu-id="e7b0a-124">But there are problems.</span></span> <span data-ttu-id="e7b0a-125">Velká část světě pořád používá pouze protokol IPv4.</span><span class="sxs-lookup"><span data-stu-id="e7b0a-125">Much of the world is still using only IPv4.</span></span> <span data-ttu-id="e7b0a-126">Konkrétně řadu existující směrovače a bezdrátové přístupové body, které používá malé společností, organizací a domácnostech nepodporují IPv6.</span><span class="sxs-lookup"><span data-stu-id="e7b0a-126">In particular, many of the existing routers and wireless access points used by small companies, organizations, and households do not support IPv6.</span></span> <span data-ttu-id="e7b0a-127">Také některé poskytovatelům internetových služeb, které slouží těchto zákazníků buď nepodporují nebo nenakonfigurovali podpora adres IPv6.</span><span class="sxs-lookup"><span data-stu-id="e7b0a-127">Also some Internet service providers that serve these customers either do not support or have not configured support for IPv6.</span></span>  
  
 <span data-ttu-id="e7b0a-128">Tunelové propojení IPv6 adresy v paketu IPv4 bylo vyvinuto několik přechodové technologie IPv6.</span><span class="sxs-lookup"><span data-stu-id="e7b0a-128">Several IPv6 transition technologies have been developed to tunnel IPv6 addresses in an IPv4 packet.</span></span> <span data-ttu-id="e7b0a-129">K těmto technologiím patří 6to4, ISATAP, a Teredo tunelových propojení, které poskytují přiřazení adresy a automatické tunelové propojení typu hostitel hostitel pro přenosy protokolu IPv6 jednosměrového vysílání když hostitele IPv6 musí procházejí sítí IP4 k dosažení další sítě IPv6.</span><span class="sxs-lookup"><span data-stu-id="e7b0a-129">These technologies include 6to4, ISATAP, and Teredo tunnels that provide address assignment and host-to-host automatic tunneling for unicast IPv6 traffic when IPv6 hosts must traverse IP4 networks to reach other IPv6 networks.</span></span> <span data-ttu-id="e7b0a-130">Pakety IPv6 odesílají tunelových jako paketů IPv4.</span><span class="sxs-lookup"><span data-stu-id="e7b0a-130">IPv6 packets are sent tunneled as IPv4 packets.</span></span> <span data-ttu-id="e7b0a-131">Několik tunelu techniky jsou používány umožňujících prostřednictvím zařízení NAT traversal NAT pro adresy IPv6.</span><span class="sxs-lookup"><span data-stu-id="e7b0a-131">Several tunneling techniques are being used that allow NAT traversal for IPv6 addresses through a NAT device.</span></span>  
  
 <span data-ttu-id="e7b0a-132">Teredo je jedním z přechodové technologie IPv6, které přináší připojení IPv6 do sítě IPv4.</span><span class="sxs-lookup"><span data-stu-id="e7b0a-132">Teredo is one of the IPv6 transition technologies which brings IPv6 connectivity to IPv4 networks.</span></span> <span data-ttu-id="e7b0a-133">Teredo je popsané v dokumentu RFC 4380 publikovaná Internet Engineering Task Force (IETF).</span><span class="sxs-lookup"><span data-stu-id="e7b0a-133">Teredo is documented in RFC 4380 published by the Internet Engineering Task Force (IETF).</span></span> <span data-ttu-id="e7b0a-134">Windows XP SP2 a novější poskytovat podporu pro virtuální adaptér Teredo, které můžou poskytovat veřejnou adresu IPv6 v rozsahu 2001:0:: / 32.</span><span class="sxs-lookup"><span data-stu-id="e7b0a-134">Windows XP SP2 and later provide support for a virtual Teredo adapter which can provide a public IPv6 address in the range 2001:0::/32.</span></span> <span data-ttu-id="e7b0a-135">Tato adresa IPv6 lze přijímat příchozí připojení z Internetu a může být poskytnut klientům pro protokol IPv6, které chcete připojit ke službě naslouchání.</span><span class="sxs-lookup"><span data-stu-id="e7b0a-135">This IPv6 address can be used to listen for incoming connections from the Internet and can be provided to IPv6 enabled clients that wish to connect to the listening service.</span></span> <span data-ttu-id="e7b0a-136">Tím se uvolní aplikace z starostí o tom, jak vyřešit počítači za zařízením NAT, protože aplikace můžete jednoduše připojte se pomocí adresy IPv6 Teredo.</span><span class="sxs-lookup"><span data-stu-id="e7b0a-136">This frees an application from worrying about how to address a computer behind a NAT device, since the application can just connect to it using its IPv6 Teredo address.</span></span>  
  
## <a name="enhancements-to-support-nat-traversal-and-teredo"></a><span data-ttu-id="e7b0a-137">Vylepšení podpory NAT Traversal a Teredo</span><span class="sxs-lookup"><span data-stu-id="e7b0a-137">Enhancements to Support NAT Traversal and Teredo</span></span>  
 <span data-ttu-id="e7b0a-138">Vylepšení jsou přidány do <xref:System.Net>, <xref:System.Net.NetworkInformation>, a <xref:System.Net.Sockets> obory názvů pro podporu NAT traversal používající protokoly IPv6 a Teredo.</span><span class="sxs-lookup"><span data-stu-id="e7b0a-138">Enhancements are added to the <xref:System.Net>, <xref:System.Net.NetworkInformation>, and <xref:System.Net.Sockets> namespaces for supporting NAT traversal using IPv6 and Teredo.</span></span>  
  
 <span data-ttu-id="e7b0a-139">Existuje několik metod, které jsou přidány do <xref:System.Net.NetworkInformation.IPGlobalProperties?displayProperty=nameWithType> třídy pro získání seznamu jednosměrového vysílání IP adresy na hostiteli.</span><span class="sxs-lookup"><span data-stu-id="e7b0a-139">Several methods are added to the <xref:System.Net.NetworkInformation.IPGlobalProperties?displayProperty=nameWithType> class to get the list of unicast IP addresses on the host.</span></span> <span data-ttu-id="e7b0a-140"><xref:System.Net.NetworkInformation.IPGlobalProperties.BeginGetUnicastAddresses%2A> Metoda zahájí Asynchronní požadavek k načtení tabulky stabilní jednosměrového vysílání IP adres v místním počítači.</span><span class="sxs-lookup"><span data-stu-id="e7b0a-140">The <xref:System.Net.NetworkInformation.IPGlobalProperties.BeginGetUnicastAddresses%2A> method begins an asynchronous request to retrieve the stable unicast IP address table on the local computer.</span></span> <span data-ttu-id="e7b0a-141"><xref:System.Net.NetworkInformation.IPGlobalProperties.EndGetUnicastAddresses%2A> Metoda končí čekající asynchronní požadavek na načtení tabulky stabilní jednosměrového vysílání IP adres v místním počítači.</span><span class="sxs-lookup"><span data-stu-id="e7b0a-141">The <xref:System.Net.NetworkInformation.IPGlobalProperties.EndGetUnicastAddresses%2A> method ends a pending asynchronous request to retrieve the stable unicast IP address table on the local computer.</span></span> <span data-ttu-id="e7b0a-142"><xref:System.Net.NetworkInformation.IPGlobalProperties.GetUnicastAddresses%2A> Metoda je synchronní požadavek na načtení tabulky stabilní jednosměrového vysílání IP adres v místním počítači, počkejte, až tabulky adres nestabilizuje v případě potřeby.</span><span class="sxs-lookup"><span data-stu-id="e7b0a-142">The <xref:System.Net.NetworkInformation.IPGlobalProperties.GetUnicastAddresses%2A> method is a synchronous request to retrieve the stable unicast IP address table on the local computer, waiting until the address table stabilizes if necessary.</span></span>  
  
 <span data-ttu-id="e7b0a-143"><xref:System.Net.IPAddress.IsIPv6Teredo%2A?displayProperty=nameWithType> Vlastnost lze použít k určení, zda <xref:System.Net.IPAddress> je adresa IPv6 Teredo.</span><span class="sxs-lookup"><span data-stu-id="e7b0a-143">The <xref:System.Net.IPAddress.IsIPv6Teredo%2A?displayProperty=nameWithType> property can be used to determine if an <xref:System.Net.IPAddress> is an IPv6 Teredo address.</span></span>  
  
 <span data-ttu-id="e7b0a-144">Použití těchto nových <xref:System.Net.NetworkInformation.IPGlobalProperties> metody v kombinaci s třídy <xref:System.Net.IPAddress.IsIPv6Teredo%2A> vlastnost umožňuje aplikaci snadno najít adresu Teredo.</span><span class="sxs-lookup"><span data-stu-id="e7b0a-144">Using these new <xref:System.Net.NetworkInformation.IPGlobalProperties> class methods in combination with the <xref:System.Net.IPAddress.IsIPv6Teredo%2A> property allows an application to easily find the Teredo address.</span></span> <span data-ttu-id="e7b0a-145">Aplikace obvykle pouze musí znát místní adresu Teredo, pokud komunikuje tyto informace do vzdálené aplikace.</span><span class="sxs-lookup"><span data-stu-id="e7b0a-145">An application normally only needs to know the local Teredo address if it is communicating this information to remote applications.</span></span> <span data-ttu-id="e7b0a-146">Například peer-to-peer aplikace může odesílat všech adres IPv6 k serveru matchmaking, který pak je předat dál ostatním partnerský vztah k povolení přímé komunikaci.</span><span class="sxs-lookup"><span data-stu-id="e7b0a-146">For example, a peer-to-peer application might send all of its IPv6 addresses to a matchmaking server which can then forward them to others peers to enable direct communication.</span></span>  
  
 <span data-ttu-id="e7b0a-147">Aplikace by měl obvykle nastavit jeho naslouchání služby tak, aby naslouchala na <xref:System.Net.IPAddress.IPv6Any?displayProperty=nameWithType> ne na místní adresu Teredo.</span><span class="sxs-lookup"><span data-stu-id="e7b0a-147">An application should normally set its listening service to listen on <xref:System.Net.IPAddress.IPv6Any?displayProperty=nameWithType> rather than on the local Teredo address.</span></span> <span data-ttu-id="e7b0a-148">Takže pokud vzdáleného klienta nebo sdílené má přímé trasy IPv6 na hostitele naslouchání služby, můžete připojit se přímo pomocí protokolu IPv6 a není nutné používat Teredo pro tunelové propojení paketů klienta nebo partnera.</span><span class="sxs-lookup"><span data-stu-id="e7b0a-148">So if a remote client or peer has a direct IPv6 route to the host of the listening service, the client or peer can connect directly using IPv6 and not have to use Teredo to tunnel packets.</span></span>  
  
 <span data-ttu-id="e7b0a-149">U aplikací, TCP <xref:System.Net.Sockets.TcpListener?displayProperty=nameWithType> třída má <xref:System.Net.Sockets.TcpListener.AllowNatTraversal%2A> způsob povolení NAT traversal.</span><span class="sxs-lookup"><span data-stu-id="e7b0a-149">For TCP applications, the <xref:System.Net.Sockets.TcpListener?displayProperty=nameWithType> class has an <xref:System.Net.Sockets.TcpListener.AllowNatTraversal%2A> method to enable NAT traversal.</span></span> <span data-ttu-id="e7b0a-150">U aplikací, UDP <xref:System.Net.Sockets.UdpClient?displayProperty=nameWithType> třída má <xref:System.Net.Sockets.UdpClient.AllowNatTraversal%2A> způsob povolení NAT traversal.</span><span class="sxs-lookup"><span data-stu-id="e7b0a-150">For UDP applications, the <xref:System.Net.Sockets.UdpClient?displayProperty=nameWithType> class has an <xref:System.Net.Sockets.UdpClient.AllowNatTraversal%2A> method to enable NAT traversal.</span></span>  
  
 <span data-ttu-id="e7b0a-151">Pro aplikace, které používají <xref:System.Net.Sockets.Socket?displayProperty=nameWithType> a souvisejících tříd <xref:System.Net.Sockets.Socket.GetSocketOption%2A> a <xref:System.Net.Sockets.Socket.SetSocketOption%2A> metody lze použít s <xref:System.Net.Sockets.SocketOptionName.IPProtectionLevel?displayProperty=nameWithType> soketu možnost dotazu, povolit nebo zakázat NAT traversal.</span><span class="sxs-lookup"><span data-stu-id="e7b0a-151">For applications that use the <xref:System.Net.Sockets.Socket?displayProperty=nameWithType> and related classes, the <xref:System.Net.Sockets.Socket.GetSocketOption%2A> and <xref:System.Net.Sockets.Socket.SetSocketOption%2A> methods can be used with the <xref:System.Net.Sockets.SocketOptionName.IPProtectionLevel?displayProperty=nameWithType> socket option to query, enable, or disable NAT traversal.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="e7b0a-152">Viz také</span><span class="sxs-lookup"><span data-stu-id="e7b0a-152">See Also</span></span>  
 <xref:System.Net.IPAddress.IsIPv6Teredo%2A?displayProperty=nameWithType>  
 <xref:System.Net.NetworkInformation.IPGlobalProperties.BeginGetUnicastAddresses%2A?displayProperty=nameWithType>  
 <xref:System.Net.NetworkInformation.IPGlobalProperties.EndGetUnicastAddresses%2A?displayProperty=nameWithType>  
 <xref:System.Net.NetworkInformation.IPGlobalProperties.GetUnicastAddresses%2A?displayProperty=nameWithType>  
 <xref:System.Net.Sockets.IPProtectionLevel?displayProperty=nameWithType>  
 <xref:System.Net.Sockets.Socket.SetIPProtectionLevel%2A?displayProperty=nameWithType>  
 <xref:System.Net.Sockets.TcpListener.AllowNatTraversal%2A?displayProperty=nameWithType>  
 <xref:System.Net.Sockets.UdpClient.AllowNatTraversal%2A?displayProperty=nameWithType>
