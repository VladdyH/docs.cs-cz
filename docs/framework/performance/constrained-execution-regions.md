---
title: "Oblasti omezeného provádění"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- constrained execution regions
- CERs
ms.assetid: 99354547-39c1-4b0b-8553-938e8f8d1808
caps.latest.revision: "9"
author: mairaw
ms.author: mairaw
manager: wpickett
ms.workload: dotnet
ms.openlocfilehash: 4f046f26391d581bc1663e9a7041225ede99bd31
ms.sourcegitcommit: 16186c34a957fdd52e5db7294f291f7530ac9d24
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 12/22/2017
---
# <a name="constrained-execution-regions"></a><span data-ttu-id="5a6e4-102">Oblasti omezeného provádění</span><span class="sxs-lookup"><span data-stu-id="5a6e4-102">Constrained Execution Regions</span></span>
<span data-ttu-id="5a6e4-103">Oblasti omezeného provádění (CER) je součástí mechanismus pro vytváření spolehlivé spravovaného kódu.</span><span class="sxs-lookup"><span data-stu-id="5a6e4-103">A constrained execution region (CER) is part of a mechanism for authoring reliable managed code.</span></span> <span data-ttu-id="5a6e4-104">CER definuje oblast, ve kterém je omezené common language runtime (CLR) z vyvolání out-of-band výjimek, které by bránily provádění v celé jeho šíři kód v oblasti.</span><span class="sxs-lookup"><span data-stu-id="5a6e4-104">A CER defines an area in which the common language runtime (CLR) is constrained from throwing out-of-band exceptions that would prevent the code in the area from executing in its entirety.</span></span> <span data-ttu-id="5a6e4-105">V rámci oblasti je ve spouštění kódu, který by mělo za následek vyvolání výjimky out-of-band omezené uživatelského kódu.</span><span class="sxs-lookup"><span data-stu-id="5a6e4-105">Within that region, user code is constrained from executing code that would result in the throwing of out-of-band exceptions.</span></span> <span data-ttu-id="5a6e4-106"><xref:System.Runtime.CompilerServices.RuntimeHelpers.PrepareConstrainedRegions%2A> Metoda musí předcházet okamžitě `try` bloku a označí `catch`, `finally`, a `fault` bloky jako omezené oblasti provádění.</span><span class="sxs-lookup"><span data-stu-id="5a6e4-106">The <xref:System.Runtime.CompilerServices.RuntimeHelpers.PrepareConstrainedRegions%2A> method must immediately precede a `try` block and marks `catch`, `finally`, and `fault` blocks as constrained execution regions.</span></span> <span data-ttu-id="5a6e4-107">Jakmile označeno v omezené oblasti, kód musí volat pouze s kontrakty spolehlivosti silné jiný kód a kód by neměl přidělit nebo provádět virtuální volání metod neupravený nebo nespolehlivé, pokud kód je připravený pro zpracování chyby.</span><span class="sxs-lookup"><span data-stu-id="5a6e4-107">Once marked as a constrained region, code must only call other code with strong reliability contracts, and code should not allocate or make virtual calls to unprepared or unreliable methods unless the code is prepared to handle failures.</span></span> <span data-ttu-id="5a6e4-108">Vlákno zpoždění CLR zruší pro kód, který spouští v CER.</span><span class="sxs-lookup"><span data-stu-id="5a6e4-108">The CLR delays thread aborts for code that is executing in a CER.</span></span>  
  
 <span data-ttu-id="5a6e4-109">Omezené oblasti provádění se používají v různých formulářů v modulu CLR kromě poznámkami `try` blokovat, zejména kritické finalizační provádění v třídy odvozené z metody <xref:System.Runtime.ConstrainedExecution.CriticalFinalizerObject> třídy a kódu spouštěných pomocí <xref:System.Runtime.CompilerServices.RuntimeHelpers.ExecuteCodeWithGuaranteedCleanup%2A> metoda.</span><span class="sxs-lookup"><span data-stu-id="5a6e4-109">Constrained execution regions are used in different forms in the CLR in addition to an annotated `try` block, notably critical finalizers executing in classes derived from the <xref:System.Runtime.ConstrainedExecution.CriticalFinalizerObject> class and code executed using the <xref:System.Runtime.CompilerServices.RuntimeHelpers.ExecuteCodeWithGuaranteedCleanup%2A> method.</span></span>  
  
## <a name="cer-advance-preparation"></a><span data-ttu-id="5a6e4-110">Předběžná příprava CER</span><span class="sxs-lookup"><span data-stu-id="5a6e4-110">CER Advance Preparation</span></span>  
 <span data-ttu-id="5a6e4-111">Modul CLR připraví CERs předem, aby se zabránilo podmínky z důvodu nedostatku paměti.</span><span class="sxs-lookup"><span data-stu-id="5a6e4-111">The CLR prepares CERs in advance to avoid out-of-memory conditions.</span></span> <span data-ttu-id="5a6e4-112">Předběžná příprava je vyžadován, takže modulu CLR nezpůsobí nedostatku paměti při načítání kompilace nebo typu za běhu.</span><span class="sxs-lookup"><span data-stu-id="5a6e4-112">Advance preparation is required so the CLR does not cause an out of memory condition during just-in-time compilation or type loading.</span></span>  
  
 <span data-ttu-id="5a6e4-113">Vývojář je potřeba znamenat, že kód oblasti CER:</span><span class="sxs-lookup"><span data-stu-id="5a6e4-113">The developer is required to indicate that a code region is a CER:</span></span>  
  
-   <span data-ttu-id="5a6e4-114">Nejvyšší úrovni oblasti CER a metody v tomto grafu úplné volání, které mají <xref:System.Runtime.ConstrainedExecution.ReliabilityContractAttribute> atribut použitý předem připravené.</span><span class="sxs-lookup"><span data-stu-id="5a6e4-114">The top level CER region and methods in the full call graph that have the <xref:System.Runtime.ConstrainedExecution.ReliabilityContractAttribute> attribute applied are prepared in advance.</span></span> <span data-ttu-id="5a6e4-115"><xref:System.Runtime.ConstrainedExecution.ReliabilityContractAttribute> Můžete pouze stav záruky <xref:System.Runtime.ConstrainedExecution.Cer.Success> nebo <xref:System.Runtime.ConstrainedExecution.Cer.MayFail>.</span><span class="sxs-lookup"><span data-stu-id="5a6e4-115">The <xref:System.Runtime.ConstrainedExecution.ReliabilityContractAttribute> can only state guarantees of <xref:System.Runtime.ConstrainedExecution.Cer.Success> or <xref:System.Runtime.ConstrainedExecution.Cer.MayFail>.</span></span>  
  
-   <span data-ttu-id="5a6e4-116">Předběžná příprava nelze provést pro volání, které nelze staticky určit, jako je například virtuální odesílání.</span><span class="sxs-lookup"><span data-stu-id="5a6e4-116">Advance preparation cannot be performed for calls that cannot be statically determined, such as virtual dispatch.</span></span> <span data-ttu-id="5a6e4-117">Použití <xref:System.Runtime.CompilerServices.RuntimeHelpers.PrepareMethod%2A> metoda v těchto případech.</span><span class="sxs-lookup"><span data-stu-id="5a6e4-117">Use the <xref:System.Runtime.CompilerServices.RuntimeHelpers.PrepareMethod%2A> method in these cases.</span></span> <span data-ttu-id="5a6e4-118">Při použití <xref:System.Runtime.CompilerServices.RuntimeHelpers.ExecuteCodeWithGuaranteedCleanup%2A> metody <xref:System.Runtime.ConstrainedExecution.PrePrepareMethodAttribute> atribut má být použita na čištění kódu.</span><span class="sxs-lookup"><span data-stu-id="5a6e4-118">When using the <xref:System.Runtime.CompilerServices.RuntimeHelpers.ExecuteCodeWithGuaranteedCleanup%2A> method, the <xref:System.Runtime.ConstrainedExecution.PrePrepareMethodAttribute> attribute should be applied to the clean up code.</span></span>  
  
## <a name="constraints"></a><span data-ttu-id="5a6e4-119">Omezení</span><span class="sxs-lookup"><span data-stu-id="5a6e4-119">Constraints</span></span>  
 <span data-ttu-id="5a6e4-120">Uživatelé jsou omezené v typu kód, který může zapisovat v CER.</span><span class="sxs-lookup"><span data-stu-id="5a6e4-120">Users are constrained in the type of code they can write in a CER.</span></span> <span data-ttu-id="5a6e4-121">Kód nelze způsobit výjimku out-of-band, jako například může být výsledkem následující operace:</span><span class="sxs-lookup"><span data-stu-id="5a6e4-121">The code cannot cause an out-of-band exception, such as might result from the following operations:</span></span>  
  
-   <span data-ttu-id="5a6e4-122">Explicitní přidělení.</span><span class="sxs-lookup"><span data-stu-id="5a6e4-122">Explicit allocation.</span></span>  
  
-   <span data-ttu-id="5a6e4-123">Zabalení.</span><span class="sxs-lookup"><span data-stu-id="5a6e4-123">Boxing.</span></span>  
  
-   <span data-ttu-id="5a6e4-124">Získávání zámku.</span><span class="sxs-lookup"><span data-stu-id="5a6e4-124">Acquiring a lock.</span></span>  
  
-   <span data-ttu-id="5a6e4-125">Volání metody neupravený prakticky.</span><span class="sxs-lookup"><span data-stu-id="5a6e4-125">Calling unprepared methods virtually.</span></span>  
  
-   <span data-ttu-id="5a6e4-126">Volání metody s kontraktu spolehlivost slabé, nebo neexistuje.</span><span class="sxs-lookup"><span data-stu-id="5a6e4-126">Calling methods with a weak or nonexistent reliability contract.</span></span>  
  
 <span data-ttu-id="5a6e4-127">V rozhraní .NET Framework verze 2.0 jsou tato omezení pokyny.</span><span class="sxs-lookup"><span data-stu-id="5a6e4-127">In the .NET Framework version 2.0, these constraints are guidelines.</span></span> <span data-ttu-id="5a6e4-128">Diagnostika je zajišťována prostřednictvím nástrojů pro analýzu kódu.</span><span class="sxs-lookup"><span data-stu-id="5a6e4-128">Diagnostics are provided through code analysis tools.</span></span>  
  
## <a name="reliability-contracts"></a><span data-ttu-id="5a6e4-129">Kontrakty spolehlivosti</span><span class="sxs-lookup"><span data-stu-id="5a6e4-129">Reliability Contracts</span></span>  
 <span data-ttu-id="5a6e4-130"><xref:System.Runtime.ConstrainedExecution.ReliabilityContractAttribute> Je vlastní atribut, který dokumenty záruky spolehlivost a stav poškození dané metody.</span><span class="sxs-lookup"><span data-stu-id="5a6e4-130">The <xref:System.Runtime.ConstrainedExecution.ReliabilityContractAttribute> is a custom attribute that documents the reliability guarantees and the corruption state of a given method.</span></span>  
  
### <a name="reliability-guarantees"></a><span data-ttu-id="5a6e4-131">Spolehlivost záruky</span><span class="sxs-lookup"><span data-stu-id="5a6e4-131">Reliability Guarantees</span></span>  
 <span data-ttu-id="5a6e4-132">Spolehlivost záruky, reprezentována <xref:System.Runtime.ConstrainedExecution.Cer> hodnoty výčtu, znamenat stupeň spolehlivost dané metody:</span><span class="sxs-lookup"><span data-stu-id="5a6e4-132">Reliability guarantees, represented by <xref:System.Runtime.ConstrainedExecution.Cer> enumeration values, indicate the degree of reliability of a given method:</span></span>  
  
-   <span data-ttu-id="5a6e4-133"><xref:System.Runtime.ConstrainedExecution.Cer.MayFail>.</span><span class="sxs-lookup"><span data-stu-id="5a6e4-133"><xref:System.Runtime.ConstrainedExecution.Cer.MayFail>.</span></span> <span data-ttu-id="5a6e4-134">Za výjimečných podmínek se nemusí podařit metodu.</span><span class="sxs-lookup"><span data-stu-id="5a6e4-134">Under exceptional conditions, the method might fail.</span></span> <span data-ttu-id="5a6e4-135">V takovém případě metodu sestavy zpět do volání metody jestli ho byla úspěšná nebo neúspěšná.</span><span class="sxs-lookup"><span data-stu-id="5a6e4-135">In this case, the method reports back to the calling method whether it succeeded or failed.</span></span> <span data-ttu-id="5a6e4-136">Metoda musí být obsažena v CER zajistit, že se může hlásit návratovou hodnotu.</span><span class="sxs-lookup"><span data-stu-id="5a6e4-136">The method must be contained in a CER to ensure that it can report the return value.</span></span>  
  
-   <span data-ttu-id="5a6e4-137"><xref:System.Runtime.ConstrainedExecution.Cer.None>.</span><span class="sxs-lookup"><span data-stu-id="5a6e4-137"><xref:System.Runtime.ConstrainedExecution.Cer.None>.</span></span> <span data-ttu-id="5a6e4-138">Metoda, typ nebo sestavení neobsahuje žádná koncepce CER a pravděpodobně není bezpečné volat v rámci CER bez významné zmírnění poškozené stavu.</span><span class="sxs-lookup"><span data-stu-id="5a6e4-138">The method, type, or assembly has no concept of a CER and is most likely not safe to call within a CER without substantial mitigation from state corruption.</span></span> <span data-ttu-id="5a6e4-139">Tato možnost nevyžaduje výhod CER záruky.</span><span class="sxs-lookup"><span data-stu-id="5a6e4-139">It does not take advantage of CER guarantees.</span></span> <span data-ttu-id="5a6e4-140">To znamená následující:</span><span class="sxs-lookup"><span data-stu-id="5a6e4-140">This implies the following:</span></span>  
  
    1.  <span data-ttu-id="5a6e4-141">Za výjimečných podmínek může selhat metodu.</span><span class="sxs-lookup"><span data-stu-id="5a6e4-141">Under exceptional conditions the method might fail.</span></span>  
  
    2.  <span data-ttu-id="5a6e4-142">Metoda může nebo nemusí informovat, že se nezdařilo.</span><span class="sxs-lookup"><span data-stu-id="5a6e4-142">The method might or might not report that it failed.</span></span>  
  
    3.  <span data-ttu-id="5a6e4-143">Metoda zapisuje na použití CER, nejpravděpodobnější scénář.</span><span class="sxs-lookup"><span data-stu-id="5a6e4-143">The method is not written to use a CER, the most likely scenario.</span></span>  
  
    4.  <span data-ttu-id="5a6e4-144">Pokud metoda, typ nebo sestavení není explicitně identifikovaná proběhla úspěšně, je implicitně identifikován jako <xref:System.Runtime.ConstrainedExecution.Cer.None>.</span><span class="sxs-lookup"><span data-stu-id="5a6e4-144">If a method, type, or assembly is not explicitly identified to succeed, it is implicitly identified as <xref:System.Runtime.ConstrainedExecution.Cer.None>.</span></span>  
  
-   <span data-ttu-id="5a6e4-145"><xref:System.Runtime.ConstrainedExecution.Cer.Success>.</span><span class="sxs-lookup"><span data-stu-id="5a6e4-145"><xref:System.Runtime.ConstrainedExecution.Cer.Success>.</span></span> <span data-ttu-id="5a6e4-146">Za výjimečných podmínek metoda záruku, že proběhla úspěšně.</span><span class="sxs-lookup"><span data-stu-id="5a6e4-146">Under exceptional conditions, the method is guaranteed to succeed.</span></span> <span data-ttu-id="5a6e4-147">K dosažení tato úroveň spolehlivosti vytvoříte vždy CER kolem metodu, která je volána, i když se označuje jako z v rámci oblasti bez CER.</span><span class="sxs-lookup"><span data-stu-id="5a6e4-147">To achieve this level of reliability you should always construct a CER around the method that is called, even when it is called from within a non-CER region.</span></span> <span data-ttu-id="5a6e4-148">Metoda je úspěšné, pokud to je možné díky co je určený, i když lze zobrazit subjektivně rozlišitelná úspěch.</span><span class="sxs-lookup"><span data-stu-id="5a6e4-148">A method is successful if it accomplishes what is intended, although success can be viewed subjectively.</span></span> <span data-ttu-id="5a6e4-149">Například označení počet se `ReliabilityContractAttribute(Cer.Success)` znamená, že při spuštění v rámci CER, vždy vrátí počet prvků v <xref:System.Collections.ArrayList> a nikdy ho můžete nechat interní pole v neurčeném stavu.</span><span class="sxs-lookup"><span data-stu-id="5a6e4-149">For example, marking Count with `ReliabilityContractAttribute(Cer.Success)` implies that when it is run under a CER, it always returns a count of the number of elements in the <xref:System.Collections.ArrayList> and it can never leave the internal fields in an undetermined state.</span></span>  <span data-ttu-id="5a6e4-150">Ale <xref:System.Threading.Interlocked.CompareExchange%2A> metoda je označena jako úspěšné i, s tím, že úspěch může to znamenat hodnotu nelze nahradit, s novou hodnotou z důvodu časování.</span><span class="sxs-lookup"><span data-stu-id="5a6e4-150">However, the <xref:System.Threading.Interlocked.CompareExchange%2A> method is marked as success as well, with the understanding that success may mean the value could not be replaced with a new value due to a race condition.</span></span>  <span data-ttu-id="5a6e4-151">Klíče bod je, že metoda chová způsobem, jakým je popsána chovat a kód CER nepotřebuje k zapsání očekávat jakékoli neobvyklé chování nad rámec jaké správné ale nespolehlivé kód bude vypadat.</span><span class="sxs-lookup"><span data-stu-id="5a6e4-151">The key point is that the method behaves in the way it is documented to behave, and CER code does not need to be written to expect any unusual behavior beyond what correct but unreliable code would look like.</span></span>  
  
### <a name="corruption-levels"></a><span data-ttu-id="5a6e4-152">Poškození úrovně</span><span class="sxs-lookup"><span data-stu-id="5a6e4-152">Corruption levels</span></span>  
 <span data-ttu-id="5a6e4-153">Poškození úrovně reprezentována <xref:System.Runtime.ConstrainedExecution.Consistency> hodnoty výčtu, určit, kolik stavu může být poškozený v daném prostředí:</span><span class="sxs-lookup"><span data-stu-id="5a6e4-153">Corruption levels, represented by <xref:System.Runtime.ConstrainedExecution.Consistency> enumeration values, indicate how much state may be corrupted in a given environment:</span></span>  
  
-   <span data-ttu-id="5a6e4-154"><xref:System.Runtime.ConstrainedExecution.Consistency.MayCorruptAppDomain>.</span><span class="sxs-lookup"><span data-stu-id="5a6e4-154"><xref:System.Runtime.ConstrainedExecution.Consistency.MayCorruptAppDomain>.</span></span> <span data-ttu-id="5a6e4-155">Za výjimečných podmínek modul CLR (CLR) umožňuje žádné záruky týkající se stavu konzistence v aktuální doméně aplikace.</span><span class="sxs-lookup"><span data-stu-id="5a6e4-155">Under exceptional conditions, the common language runtime (CLR) makes no guarantees regarding state consistency in the current application domain.</span></span>  
  
-   <span data-ttu-id="5a6e4-156"><xref:System.Runtime.ConstrainedExecution.Consistency.MayCorruptInstance>.</span><span class="sxs-lookup"><span data-stu-id="5a6e4-156"><xref:System.Runtime.ConstrainedExecution.Consistency.MayCorruptInstance>.</span></span> <span data-ttu-id="5a6e4-157">Za výjimečných podmínek metoda záruku, že se k omezení stavu poškození na aktuální instanci.</span><span class="sxs-lookup"><span data-stu-id="5a6e4-157">Under exceptional conditions, the method is guaranteed to limit state corruption to the current instance.</span></span>  
  
-   <span data-ttu-id="5a6e4-158"><xref:System.Runtime.ConstrainedExecution.Consistency.MayCorruptProcess>, Za výjimečných podmínek modulu CLR Díky žádné záruky týkající se stavu konzistence; To znamená stavu může dojít k poškození proces.</span><span class="sxs-lookup"><span data-stu-id="5a6e4-158"><xref:System.Runtime.ConstrainedExecution.Consistency.MayCorruptProcess>, Under exceptional conditions, the CLR makes no guarantees regarding state consistency; that is, the condition might corrupt the process.</span></span>  
  
-   <span data-ttu-id="5a6e4-159"><xref:System.Runtime.ConstrainedExecution.Consistency.WillNotCorruptState>.</span><span class="sxs-lookup"><span data-stu-id="5a6e4-159"><xref:System.Runtime.ConstrainedExecution.Consistency.WillNotCorruptState>.</span></span> <span data-ttu-id="5a6e4-160">Za výjimečných podmínek metoda záruku, že nejsou poškozené stavu.</span><span class="sxs-lookup"><span data-stu-id="5a6e4-160">Under exceptional conditions, the method is guaranteed not to corrupt state.</span></span>  
  
## <a name="reliability-trycatchfinally"></a><span data-ttu-id="5a6e4-161">Spolehlivost try/catch/finally</span><span class="sxs-lookup"><span data-stu-id="5a6e4-161">Reliability try/catch/finally</span></span>  
 <span data-ttu-id="5a6e4-162">Spolehlivost `try/catch/finally` je mechanismus se stejnou úroveň záruky předvídatelnost jako nespravované verze zpracování výjimek.</span><span class="sxs-lookup"><span data-stu-id="5a6e4-162">The reliability `try/catch/finally` is an exception handling mechanism with the same level of predictability guarantees as the unmanaged version.</span></span> <span data-ttu-id="5a6e4-163">`catch/finally` Blok je CER.</span><span class="sxs-lookup"><span data-stu-id="5a6e4-163">The `catch/finally` block is the CER.</span></span> <span data-ttu-id="5a6e4-164">Metody v bloku vyžadují předběžná příprava a musí být noninterruptible.</span><span class="sxs-lookup"><span data-stu-id="5a6e4-164">Methods in the block require advance preparation and must be noninterruptible.</span></span>  
  
 <span data-ttu-id="5a6e4-165">V rozhraní .NET Framework verze 2.0, kód informuje o tom modul runtime, zkuste je spolehlivá voláním <xref:System.Runtime.CompilerServices.RuntimeHelpers.PrepareConstrainedRegions%2A> bezprostředně před bloku try.</span><span class="sxs-lookup"><span data-stu-id="5a6e4-165">In the .NET Framework version 2.0, code informs the runtime that a try is reliable by calling <xref:System.Runtime.CompilerServices.RuntimeHelpers.PrepareConstrainedRegions%2A> immediately preceding a try block.</span></span> <span data-ttu-id="5a6e4-166"><xref:System.Runtime.CompilerServices.RuntimeHelpers.PrepareConstrainedRegions%2A>je členem skupiny <xref:System.Runtime.CompilerServices.RuntimeHelpers>, třídy podpory kompilátoru.</span><span class="sxs-lookup"><span data-stu-id="5a6e4-166"><xref:System.Runtime.CompilerServices.RuntimeHelpers.PrepareConstrainedRegions%2A> is a member of <xref:System.Runtime.CompilerServices.RuntimeHelpers>, a compiler support class.</span></span> <span data-ttu-id="5a6e4-167">Volání <xref:System.Runtime.CompilerServices.RuntimeHelpers.PrepareConstrainedRegions%2A> přímo čeká na jeho dostupnost prostřednictvím kompilátory.</span><span class="sxs-lookup"><span data-stu-id="5a6e4-167">Call <xref:System.Runtime.CompilerServices.RuntimeHelpers.PrepareConstrainedRegions%2A> directly pending its availability through compilers.</span></span>  
  
## <a name="noninterruptible-regions"></a><span data-ttu-id="5a6e4-168">Noninterruptible oblastí</span><span class="sxs-lookup"><span data-stu-id="5a6e4-168">Noninterruptible Regions</span></span>  
 <span data-ttu-id="5a6e4-169">V oblasti noninterruptible skupiny sada pokynů do CER.</span><span class="sxs-lookup"><span data-stu-id="5a6e4-169">A noninterruptible region groups a set of instructions into a CER.</span></span>  
  
 <span data-ttu-id="5a6e4-170">V rozhraní .NET Framework verze 2.0, čeká na dostupnost prostřednictvím podpory kompilátoru uživatelský kód vytvoří-přerušitelné oblasti s spolehlivé try/catch/finally obsahující bloku try/catch – prázdný před sebou <xref:System.Runtime.CompilerServices.RuntimeHelpers.PrepareConstrainedRegions%2A> volání metody.</span><span class="sxs-lookup"><span data-stu-id="5a6e4-170">In .NET Framework version 2.0, pending availability through compiler support, user code creates non-interruptible regions with a reliable try/catch/finally that contains an empty try/catch block preceded by a <xref:System.Runtime.CompilerServices.RuntimeHelpers.PrepareConstrainedRegions%2A> method call.</span></span>  
  
## <a name="critical-finalizer-object"></a><span data-ttu-id="5a6e4-171">Kritické finalizační metodu objektu</span><span class="sxs-lookup"><span data-stu-id="5a6e4-171">Critical Finalizer Object</span></span>  
 <span data-ttu-id="5a6e4-172">A <xref:System.Runtime.ConstrainedExecution.CriticalFinalizerObject> zaručuje, že uvolňování paměti spustí finalizační metodu.</span><span class="sxs-lookup"><span data-stu-id="5a6e4-172">A <xref:System.Runtime.ConstrainedExecution.CriticalFinalizerObject> guarantees that garbage collection will execute the finalizer.</span></span> <span data-ttu-id="5a6e4-173">Při přidělení finalizační metodu a jeho volání grafu jsou předem připravit.</span><span class="sxs-lookup"><span data-stu-id="5a6e4-173">Upon allocation, the finalizer and its call graph are prepared in advance.</span></span> <span data-ttu-id="5a6e4-174">Metoda finalizační metodu spustí CER a musí orientují všechna omezení na CERs a finalizační metody.</span><span class="sxs-lookup"><span data-stu-id="5a6e4-174">The finalizer method executes in a CER, and must obey all the constraints on CERs and finalizers.</span></span>  
  
 <span data-ttu-id="5a6e4-175">Všechny typy, která dědí z <xref:System.Runtime.InteropServices.SafeHandle> a <xref:System.Runtime.InteropServices.CriticalHandle> kombinace obsahuje jejich finalizační metodu provést v rámci CER.</span><span class="sxs-lookup"><span data-stu-id="5a6e4-175">Any types inheriting from <xref:System.Runtime.InteropServices.SafeHandle> and <xref:System.Runtime.InteropServices.CriticalHandle> are guaranteed to have their finalizer execute within a CER.</span></span> <span data-ttu-id="5a6e4-176">Implementace <xref:System.Runtime.InteropServices.SafeHandle.ReleaseHandle%2A> v <xref:System.Runtime.InteropServices.SafeHandle> odvozených třídách k provedení kód, který je potřeba uvolnit popisovač.</span><span class="sxs-lookup"><span data-stu-id="5a6e4-176">Implement <xref:System.Runtime.InteropServices.SafeHandle.ReleaseHandle%2A> in <xref:System.Runtime.InteropServices.SafeHandle> derived classes to execute any code that is required to free the handle.</span></span>  
  
## <a name="code-not-permitted-in-cers"></a><span data-ttu-id="5a6e4-177">Kód není povolený v CERs</span><span class="sxs-lookup"><span data-stu-id="5a6e4-177">Code Not Permitted in CERs</span></span>  
 <span data-ttu-id="5a6e4-178">V CERs nejsou povoleny následující operace:</span><span class="sxs-lookup"><span data-stu-id="5a6e4-178">The following operations are not permitted in CERs:</span></span>  
  
-   <span data-ttu-id="5a6e4-179">Explicitní přidělení.</span><span class="sxs-lookup"><span data-stu-id="5a6e4-179">Explicit allocations.</span></span>  
  
-   <span data-ttu-id="5a6e4-180">Získávání zámku.</span><span class="sxs-lookup"><span data-stu-id="5a6e4-180">Acquiring a lock.</span></span>  
  
-   <span data-ttu-id="5a6e4-181">Zabalení.</span><span class="sxs-lookup"><span data-stu-id="5a6e4-181">Boxing.</span></span>  
  
-   <span data-ttu-id="5a6e4-182">Multidimenzionální pole přístup.</span><span class="sxs-lookup"><span data-stu-id="5a6e4-182">Multidimensional array access.</span></span>  
  
-   <span data-ttu-id="5a6e4-183">Volání metody prostřednictvím reflexe.</span><span class="sxs-lookup"><span data-stu-id="5a6e4-183">Method calls through reflection.</span></span>  
  
-   <span data-ttu-id="5a6e4-184"><xref:System.Threading.Monitor.Enter%2A>nebo <xref:System.IO.FileStream.Lock%2A>.</span><span class="sxs-lookup"><span data-stu-id="5a6e4-184"><xref:System.Threading.Monitor.Enter%2A> or <xref:System.IO.FileStream.Lock%2A>.</span></span>  
  
-   <span data-ttu-id="5a6e4-185">Kontroly zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="5a6e4-185">Security checks.</span></span> <span data-ttu-id="5a6e4-186">Není provádět požadavky, pouze požadavky na propojení.</span><span class="sxs-lookup"><span data-stu-id="5a6e4-186">Do not perform demands, only link demands.</span></span>  
  
-   <span data-ttu-id="5a6e4-187"><xref:System.Reflection.Emit.OpCodes.Isinst>a <xref:System.Reflection.Emit.OpCodes.Castclass> pro objekty modelu COM a proxy servery</span><span class="sxs-lookup"><span data-stu-id="5a6e4-187"><xref:System.Reflection.Emit.OpCodes.Isinst> and <xref:System.Reflection.Emit.OpCodes.Castclass> for COM objects and proxies</span></span>  
  
-   <span data-ttu-id="5a6e4-188">Získání nebo nastavení polí na transparentní proxy server.</span><span class="sxs-lookup"><span data-stu-id="5a6e4-188">Getting or setting fields on a transparent proxy.</span></span>  
  
-   <span data-ttu-id="5a6e4-189">Serializace.</span><span class="sxs-lookup"><span data-stu-id="5a6e4-189">Serialization.</span></span>  
  
-   <span data-ttu-id="5a6e4-190">Ukazatele na funkce a delegáti.</span><span class="sxs-lookup"><span data-stu-id="5a6e4-190">Function pointers and delegates.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="5a6e4-191">Viz také</span><span class="sxs-lookup"><span data-stu-id="5a6e4-191">See Also</span></span>  
 [<span data-ttu-id="5a6e4-192">Spolehlivost – doporučené postupy</span><span class="sxs-lookup"><span data-stu-id="5a6e4-192">Reliability Best Practices</span></span>](../../../docs/framework/performance/reliability-best-practices.md)
