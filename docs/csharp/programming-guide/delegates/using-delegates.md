---
title: "Použití delegátů (Průvodce programováním v C#)"
ms.date: 07/20/2015
ms.prod: .net
ms.technology:
- devlang-csharp
ms.topic: article
helpviewer_keywords:
- delegates [C#], how to use
ms.assetid: 99a2fc27-a32e-4a34-921c-e65497520eec
caps.latest.revision: 
author: BillWagner
ms.author: wiwagn
ms.openlocfilehash: cef62448388299f310fa26ecb632485b6538c032
ms.sourcegitcommit: 4f3fef493080a43e70e951223894768d36ce430a
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 11/21/2017
---
# <a name="using-delegates-c-programming-guide"></a><span data-ttu-id="5485f-102">Použití delegátů (Průvodce programováním v C#)</span><span class="sxs-lookup"><span data-stu-id="5485f-102">Using Delegates (C# Programming Guide)</span></span>
<span data-ttu-id="5485f-103">A [delegovat](../../../csharp/language-reference/keywords/delegate.md) je typu, který zapouzdřuje bezpečně metodu, podobně jako ukazatel na funkci jazyka C a C++.</span><span class="sxs-lookup"><span data-stu-id="5485f-103">A [delegate](../../../csharp/language-reference/keywords/delegate.md) is a type that safely encapsulates a method, similar to a function pointer in C and C++.</span></span> <span data-ttu-id="5485f-104">Na rozdíl od ukazatelů na funkce C Delegáti jsou objektově orientované, zadejte bezpečné a zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="5485f-104">Unlike C function pointers, delegates are object-oriented, type safe, and secure.</span></span> <span data-ttu-id="5485f-105">Název delegát je definován typ delegáta.</span><span class="sxs-lookup"><span data-stu-id="5485f-105">The type of a delegate is defined by the name of the delegate.</span></span> <span data-ttu-id="5485f-106">Následující příklad deklaruje delegáta s názvem `Del` který může zapouzdřit metody, která přijímá [řetězec](../../../csharp/language-reference/keywords/string.md) jako argument a vrátí [void](../../../csharp/language-reference/keywords/void.md):</span><span class="sxs-lookup"><span data-stu-id="5485f-106">The following example declares a delegate named `Del` that can encapsulate a method that takes a [string](../../../csharp/language-reference/keywords/string.md) as an argument and returns [void](../../../csharp/language-reference/keywords/void.md):</span></span>  
  
 [!code-csharp[csProgGuideDelegates#21](../../../csharp/programming-guide/delegates/codesnippet/CSharp/using-delegates_1.cs)]  
  
 <span data-ttu-id="5485f-107">Objekt delegáta normálně vytvořená pomocí Pokud budou zahrnovat název metody delegáta, nebo se [anonymní metoda](../../../csharp/programming-guide/statements-expressions-operators/anonymous-methods.md).</span><span class="sxs-lookup"><span data-stu-id="5485f-107">A delegate object is normally constructed by providing the name of the method the delegate will wrap, or with an [anonymous Method](../../../csharp/programming-guide/statements-expressions-operators/anonymous-methods.md).</span></span> <span data-ttu-id="5485f-108">Po vytvoření instance delegáta volání metody delegáta provedené se předá delegátem dané metody.</span><span class="sxs-lookup"><span data-stu-id="5485f-108">Once a delegate is instantiated, a method call made to the delegate will be passed by the delegate to that method.</span></span> <span data-ttu-id="5485f-109">Parametry delegátovi předaná volající funkcí je předaný metodě a návratovou hodnotu, pokud existuje, metoda vrátí volajícímu delegáta.</span><span class="sxs-lookup"><span data-stu-id="5485f-109">The parameters passed to the delegate by the caller are passed to the method, and the return value, if any, from the method is returned to the caller by the delegate.</span></span> <span data-ttu-id="5485f-110">To se označuje jako vyvolání delegáta.</span><span class="sxs-lookup"><span data-stu-id="5485f-110">This is known as invoking the delegate.</span></span> <span data-ttu-id="5485f-111">Delegáta instancí mohou být vyvolány, jako by šlo zabalené metoda sama.</span><span class="sxs-lookup"><span data-stu-id="5485f-111">An instantiated delegate can be invoked as if it were the wrapped method itself.</span></span> <span data-ttu-id="5485f-112">Příklad:</span><span class="sxs-lookup"><span data-stu-id="5485f-112">For example:</span></span>  
  
 [!code-csharp[csProgGuideDelegates#22](../../../csharp/programming-guide/delegates/codesnippet/CSharp/using-delegates_2.cs)]  
  
 [!code-csharp[csProgGuideDelegates#23](../../../csharp/programming-guide/delegates/codesnippet/CSharp/using-delegates_3.cs)]  
  
 <span data-ttu-id="5485f-113">Delegát typy jsou odvozeny od <xref:System.Delegate> – třída v rozhraní .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="5485f-113">Delegate types are derived from the <xref:System.Delegate> class in the .NET Framework.</span></span> <span data-ttu-id="5485f-114">Delegát typy jsou [zapečetěné](../../../csharp/language-reference/keywords/sealed.md)– nemůže být odvozen od – a není možné vlastní odvozovat z <xref:System.Delegate>.</span><span class="sxs-lookup"><span data-stu-id="5485f-114">Delegate types are [sealed](../../../csharp/language-reference/keywords/sealed.md)—they cannot be derived from— and it is not possible to derive custom classes from <xref:System.Delegate>.</span></span> <span data-ttu-id="5485f-115">Protože instancí delegát je objekt, může být předána jako parametr, nebo přiřadit k vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="5485f-115">Because the instantiated delegate is an object, it can be passed as a parameter, or assigned to a property.</span></span> <span data-ttu-id="5485f-116">To umožňuje metoda přijmout delegáta jako parametr a volání delegáta později.</span><span class="sxs-lookup"><span data-stu-id="5485f-116">This allows a method to accept a delegate as a parameter, and call the delegate at some later time.</span></span> <span data-ttu-id="5485f-117">To se označuje jako asynchronní zpětné volání a je běžnou metodu, jak po dokončení dlouho proces upozornění volající.</span><span class="sxs-lookup"><span data-stu-id="5485f-117">This is known as an asynchronous callback, and is a common method of notifying a caller when a long process has completed.</span></span> <span data-ttu-id="5485f-118">Při použití delegáta tímto způsobem kódu pomocí delegát nemusí vůbec dozvěděl o provádění použité metody.</span><span class="sxs-lookup"><span data-stu-id="5485f-118">When a delegate is used in this fashion, the code using the delegate does not need any knowledge of the implementation of the method being used.</span></span> <span data-ttu-id="5485f-119">Funkce je podobná zapouzdření, které poskytují rozhraní.</span><span class="sxs-lookup"><span data-stu-id="5485f-119">The functionality is similar to the encapsulation interfaces provide.</span></span>  
  
 <span data-ttu-id="5485f-120">Další běžné použití zpětná volání je definování vlastní porovnání metoda a předání přidělíte metoda řazení.</span><span class="sxs-lookup"><span data-stu-id="5485f-120">Another common use of callbacks is defining a custom comparison method and passing that delegate to a sort method.</span></span> <span data-ttu-id="5485f-121">To umožňuje volajícího kódu, který se stane součástí algoritmus řazení.</span><span class="sxs-lookup"><span data-stu-id="5485f-121">It allows the caller's code to become part of the sort algorithm.</span></span> <span data-ttu-id="5485f-122">Následující příklad metoda používá `Del` typ jako parametr:</span><span class="sxs-lookup"><span data-stu-id="5485f-122">The following example method uses the `Del` type as a parameter:</span></span>  
  
 [!code-csharp[csProgGuideDelegates#24](../../../csharp/programming-guide/delegates/codesnippet/CSharp/using-delegates_4.cs)]  
  
 <span data-ttu-id="5485f-123">Potom můžete předat delegáta vytvořili výše této metody:</span><span class="sxs-lookup"><span data-stu-id="5485f-123">You can then pass the delegate created above to that method:</span></span>  
  
 [!code-csharp[csProgGuideDelegates#25](../../../csharp/programming-guide/delegates/codesnippet/CSharp/using-delegates_5.cs)]  
  
 <span data-ttu-id="5485f-124">a zobrazit následující výstup do konzoly:</span><span class="sxs-lookup"><span data-stu-id="5485f-124">and receive the following output to the console:</span></span>  
  
 `The number is: 3`  
  
 <span data-ttu-id="5485f-125">Použití delegáta jako abstrakci, `MethodWithCallback` není nutné volat přímo konzole – nemusí se měly navrhovat s konzolou v paměti.</span><span class="sxs-lookup"><span data-stu-id="5485f-125">Using the delegate as an abstraction, `MethodWithCallback` does not need to call the console directly—it does not have to be designed with a console in mind.</span></span> <span data-ttu-id="5485f-126">Co `MethodWithCallback` nemá je jednoduše Příprava řetězec a předejte řetězec na jinou metodu.</span><span class="sxs-lookup"><span data-stu-id="5485f-126">What `MethodWithCallback` does is simply prepare a string and pass the string to another method.</span></span> <span data-ttu-id="5485f-127">To je zvláště efektivní, protože delegované metodu můžete použít libovolný počet parametrů.</span><span class="sxs-lookup"><span data-stu-id="5485f-127">This is especially powerful since a delegated method can use any number of parameters.</span></span>  
  
 <span data-ttu-id="5485f-128">Když se delegáta zabalit metody instance, odkazuje na instanci a metodu delegáta.</span><span class="sxs-lookup"><span data-stu-id="5485f-128">When a delegate is constructed to wrap an instance method, the delegate references both the instance and the method.</span></span> <span data-ttu-id="5485f-129">Delegát nemá žádné informace o instanci typu bez ohledu na metodu, kterou se zabalí, proto delegáta může být jakéhokoli typu objektu, dokud je metodu na tento objekt, který odpovídá delegáta.</span><span class="sxs-lookup"><span data-stu-id="5485f-129">A delegate has no knowledge of the instance type aside from the method it wraps, so a delegate can refer to any type of object as long as there is a method on that object that matches the delegate signature.</span></span> <span data-ttu-id="5485f-130">Když se k zabalení statickou metodu delegáta, pouze odkazuje na metodu.</span><span class="sxs-lookup"><span data-stu-id="5485f-130">When a delegate is constructed to wrap a static method, it only references the method.</span></span> <span data-ttu-id="5485f-131">Vezměte v úvahu následující deklarace:</span><span class="sxs-lookup"><span data-stu-id="5485f-131">Consider the following declarations:</span></span>  
  
 [!code-csharp[csProgGuideDelegates#26](../../../csharp/programming-guide/delegates/codesnippet/CSharp/using-delegates_6.cs)]  
  
 <span data-ttu-id="5485f-132">Společně s statických `DelegateMethod` uvedený výše, nyní je k dispozici tři metody, které může být zabalen `Del` instance.</span><span class="sxs-lookup"><span data-stu-id="5485f-132">Along with the static `DelegateMethod` shown previously, we now have three methods that can be wrapped by a `Del` instance.</span></span>  
  
 <span data-ttu-id="5485f-133">Delegát můžete volat více než jedna metoda po vyvolání.</span><span class="sxs-lookup"><span data-stu-id="5485f-133">A delegate can call more than one method when invoked.</span></span> <span data-ttu-id="5485f-134">To se označuje jako vícesměrového vysílání.</span><span class="sxs-lookup"><span data-stu-id="5485f-134">This is referred to as multicasting.</span></span> <span data-ttu-id="5485f-135">Můžete přidat další metodu do seznamu delegáta metod – seznamu vyvolání – jednoduše vyžaduje přidání dvě delegáti pomocí přidání nebo přidání operátory přiřazení ('+' nebo '+=').</span><span class="sxs-lookup"><span data-stu-id="5485f-135">To add an extra method to the delegate's list of methods—the invocation list—simply requires adding two delegates using the addition or addition assignment operators ('+' or '+=').</span></span> <span data-ttu-id="5485f-136">Příklad:</span><span class="sxs-lookup"><span data-stu-id="5485f-136">For example:</span></span>  
  
 [!code-csharp[csProgGuideDelegates#27](../../../csharp/programming-guide/delegates/codesnippet/CSharp/using-delegates_7.cs)]  
  
 <span data-ttu-id="5485f-137">V tomto okamžiku `allMethodsDelegate` obsahuje tři metody, které ve svém seznamu volání –`Method1`, `Method2`, a `DelegateMethod`.</span><span class="sxs-lookup"><span data-stu-id="5485f-137">At this point `allMethodsDelegate` contains three methods in its invocation list—`Method1`, `Method2`, and `DelegateMethod`.</span></span> <span data-ttu-id="5485f-138">Původní tři delegáty `d1`, `d2`, a `d3`, zůstanou beze změny.</span><span class="sxs-lookup"><span data-stu-id="5485f-138">The original three delegates, `d1`, `d2`, and `d3`, remain unchanged.</span></span> <span data-ttu-id="5485f-139">Když `allMethodsDelegate` je vyvolána, všechny tři metody se nazývají v pořadí.</span><span class="sxs-lookup"><span data-stu-id="5485f-139">When `allMethodsDelegate` is invoked, all three methods are called in order.</span></span> <span data-ttu-id="5485f-140">Pokud delegát používá parametry odkaz, odkaz je předán postupně všechny tři metody zase, a všechny změny pomocí jedné metody jsou viditelné pro další metodou.</span><span class="sxs-lookup"><span data-stu-id="5485f-140">If the delegate uses reference parameters, the reference is passed sequentially to each of the three methods in turn, and any changes by one method are visible to the next method.</span></span> <span data-ttu-id="5485f-141">Pokud některou z metod vyvolá výjimku, která není zachycena v rámci metody, výjimka je předán volající delegát a žádná další metody v seznamu volání se nazývají.</span><span class="sxs-lookup"><span data-stu-id="5485f-141">When any of the methods throws an exception that is not caught within the method, that exception is passed to the caller of the delegate and no subsequent methods in the invocation list are called.</span></span> <span data-ttu-id="5485f-142">Pokud delegát má návratovou hodnotu a/nebo výstupní parametry, vrátí návratovou hodnotu a parametry poslední volaná metoda.</span><span class="sxs-lookup"><span data-stu-id="5485f-142">If the delegate has a return value and/or out parameters, it returns the return value and parameters of the last method invoked.</span></span> <span data-ttu-id="5485f-143">Chcete-li odebrat ze seznamu volání metody, použijte snížení nebo snížení operátor přiřazení ('-' nebo ' '-='').</span><span class="sxs-lookup"><span data-stu-id="5485f-143">To remove a method from the invocation list, use the decrement or decrement assignment operator ('-' or '-=').</span></span> <span data-ttu-id="5485f-144">Příklad:</span><span class="sxs-lookup"><span data-stu-id="5485f-144">For example:</span></span>  
  
 [!code-csharp[csProgGuideDelegates#28](../../../csharp/programming-guide/delegates/codesnippet/CSharp/using-delegates_8.cs)]  
  
 <span data-ttu-id="5485f-145">Protože delegáta typy jsou odvozeny od `System.Delegate`, lze volat metody a vlastnosti definované třídy u delegát.</span><span class="sxs-lookup"><span data-stu-id="5485f-145">Because delegate types are derived from `System.Delegate`, the methods and properties defined by that class can be called on the delegate.</span></span> <span data-ttu-id="5485f-146">Například počet metod najdete v seznamu vyvolání tohoto delegáta může napíšete:</span><span class="sxs-lookup"><span data-stu-id="5485f-146">For example, to find the number of methods in a delegate's invocation list, you may write:</span></span>  
  
 [!code-csharp[csProgGuideDelegates#29](../../../csharp/programming-guide/delegates/codesnippet/CSharp/using-delegates_9.cs)]  
  
 <span data-ttu-id="5485f-147">Delegáti s více než jedna metoda v jejich seznamu volání odvozena od <xref:System.MulticastDelegate>, což je podtřídou třídy `System.Delegate`.</span><span class="sxs-lookup"><span data-stu-id="5485f-147">Delegates with more than one method in their invocation list derive from <xref:System.MulticastDelegate>, which is a subclass of `System.Delegate`.</span></span> <span data-ttu-id="5485f-148">Ve výše uvedeném kódu funguje v obou případech, protože obě třídy podporují `GetInvocationList`.</span><span class="sxs-lookup"><span data-stu-id="5485f-148">The above code works in either case because both classes support `GetInvocationList`.</span></span>  
  
 <span data-ttu-id="5485f-149">Vícesměroví Delegáti jsou používány při zpracování událostí.</span><span class="sxs-lookup"><span data-stu-id="5485f-149">Multicast delegates are used extensively in event handling.</span></span> <span data-ttu-id="5485f-150">Objekty zdroje událostí odesílání oznámení o událostech příjemce objekty, které mají registrovaná pro příjem tuto událost.</span><span class="sxs-lookup"><span data-stu-id="5485f-150">Event source objects send event notifications to recipient objects that have registered to receive that event.</span></span> <span data-ttu-id="5485f-151">Registrace pro událost, příjemce vytvoří metodu navržený tak, aby zpracovat událost, pak vytvoří delegáta pro danou metodu a předá delegát zdroj události.</span><span class="sxs-lookup"><span data-stu-id="5485f-151">To register for an event, the recipient creates a method designed to handle the event, then creates a delegate for that method and passes the delegate to the event source.</span></span> <span data-ttu-id="5485f-152">Zdroj vyvolá delegáta, dojde k události.</span><span class="sxs-lookup"><span data-stu-id="5485f-152">The source calls the delegate when the event occurs.</span></span> <span data-ttu-id="5485f-153">Delegát pak zavolá metodu na straně příjemce doručování data události zpracování událostí.</span><span class="sxs-lookup"><span data-stu-id="5485f-153">The delegate then calls the event handling method on the recipient, delivering the event data.</span></span> <span data-ttu-id="5485f-154">Typ delegáta pro danou událost je definována podle zdroje události.</span><span class="sxs-lookup"><span data-stu-id="5485f-154">The delegate type for a given event is defined by the event source.</span></span> <span data-ttu-id="5485f-155">Další informace najdete v tématu [události](../../../csharp/programming-guide/events/index.md).</span><span class="sxs-lookup"><span data-stu-id="5485f-155">For more, see [Events](../../../csharp/programming-guide/events/index.md).</span></span>  
  
 <span data-ttu-id="5485f-156">Porovnání delegáti dva různé typy přiřazen při kompilaci způsobí chybu kompilace.</span><span class="sxs-lookup"><span data-stu-id="5485f-156">Comparing delegates of two different types assigned at compile-time will result in a compilation error.</span></span> <span data-ttu-id="5485f-157">Pokud delegát instance jsou staticky typu `System.Delegate`, pak je povolené porovnání, spustí se však isfocusineditor hodnotu false na čas.</span><span class="sxs-lookup"><span data-stu-id="5485f-157">If the delegate instances are statically of the type `System.Delegate`, then the comparison is allowed, but will return false at run time.</span></span> <span data-ttu-id="5485f-158">Příklad:</span><span class="sxs-lookup"><span data-stu-id="5485f-158">For example:</span></span>  
  
 [!code-csharp[csProgGuideDelegates#30](../../../csharp/programming-guide/delegates/codesnippet/CSharp/using-delegates_10.cs)]  
  
## <a name="see-also"></a><span data-ttu-id="5485f-159">Viz také</span><span class="sxs-lookup"><span data-stu-id="5485f-159">See Also</span></span>  
 [<span data-ttu-id="5485f-160">Průvodce programováním v C#</span><span class="sxs-lookup"><span data-stu-id="5485f-160">C# Programming Guide</span></span>](../../../csharp/programming-guide/index.md)  
 [<span data-ttu-id="5485f-161">Delegáti</span><span class="sxs-lookup"><span data-stu-id="5485f-161">Delegates</span></span>](../../../csharp/programming-guide/delegates/index.md)  
 [<span data-ttu-id="5485f-162">Použití odchylek v delegátech</span><span class="sxs-lookup"><span data-stu-id="5485f-162">Using Variance in Delegates</span></span>](http://msdn.microsoft.com/library/e6acad03-93e0-4efb-a158-8696d5eb4ecf)  
 [<span data-ttu-id="5485f-163">Odchylky v delegátech</span><span class="sxs-lookup"><span data-stu-id="5485f-163">Variance in Delegates</span></span>](http://msdn.microsoft.com/library/e3b98197-6c5b-4e55-9c6e-9739b60645ca)  
 [<span data-ttu-id="5485f-164">Použití odchylek pro Func a akce obecní delegáti</span><span class="sxs-lookup"><span data-stu-id="5485f-164">Using Variance for Func and Action Generic Delegates</span></span>](http://msdn.microsoft.com/library/e69c4f39-09aa-4c6d-a752-08cc767d8290)  
 [<span data-ttu-id="5485f-165">Události</span><span class="sxs-lookup"><span data-stu-id="5485f-165">Events</span></span>](../../../csharp/programming-guide/events/index.md)
