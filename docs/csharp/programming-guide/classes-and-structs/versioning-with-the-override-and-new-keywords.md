---
title: "Správa verzí pomocí klíčových slov override a new (Průvodce programováním v C#)"
ms.date: 07/20/2015
ms.prod: .net
ms.technology: devlang-csharp
ms.topic: article
helpviewer_keywords:
- C# language, versioning
- C# language, override and new
ms.assetid: 88247d07-bd0d-49e9-a619-45ccbbfdf0c5
caps.latest.revision: "25"
author: BillWagner
ms.author: wiwagn
ms.openlocfilehash: be51a5b3d3eecc58d43dcbbcb0802cce7fd16c45
ms.sourcegitcommit: 4f3fef493080a43e70e951223894768d36ce430a
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 11/21/2017
---
# <a name="versioning-with-the-override-and-new-keywords-c-programming-guide"></a><span data-ttu-id="f50e4-102">Správa verzí pomocí klíčových slov override a new (Průvodce programováním v C#)</span><span class="sxs-lookup"><span data-stu-id="f50e4-102">Versioning with the Override and New Keywords (C# Programming Guide)</span></span>
<span data-ttu-id="f50e4-103">Jazyka C# je navržen tak, aby Správa verzí mezi [základní](../../../csharp/language-reference/keywords/base.md) a odvozené třídy v různé knihovny můžete vyvíjet a zachování zpětné kompatibility.</span><span class="sxs-lookup"><span data-stu-id="f50e4-103">The C# language is designed so that versioning between [base](../../../csharp/language-reference/keywords/base.md) and derived classes in different libraries can evolve and maintain backward compatibility.</span></span> <span data-ttu-id="f50e4-104">To znamená, například, že zavedení nového člena v na základní [třída](../../../csharp/language-reference/keywords/class.md) se stejným názvem jako člen v odvozené třídě je zcela podporované v jazyce C# a nevede k neočekávanému chování.</span><span class="sxs-lookup"><span data-stu-id="f50e4-104">This means, for example, that the introduction of a new member in a base [class](../../../csharp/language-reference/keywords/class.md) with the same name as a member in a derived class is completely supported by C# and does not lead to unexpected behavior.</span></span> <span data-ttu-id="f50e4-105">Taky to znamená, že třídu musí explicitně stavu zda metoda je určena k přepsání zděděnou metodu, nebo zda je metoda nové metodu, která skryje s podobným názvem zděděna metoda.</span><span class="sxs-lookup"><span data-stu-id="f50e4-105">It also means that a class must explicitly state whether a method is intended to override an inherited method, or whether a method is a new method that hides a similarly named inherited method.</span></span>  
  
 <span data-ttu-id="f50e4-106">V jazyce C# odvozené třídy může obsahovat metody se stejným názvem jako metody třídy base.</span><span class="sxs-lookup"><span data-stu-id="f50e4-106">In C#, derived classes can contain methods with the same name as base class methods.</span></span>  
  
-   <span data-ttu-id="f50e4-107">Metoda základní třídy musí být definován [virtuální](../../../csharp/language-reference/keywords/virtual.md).</span><span class="sxs-lookup"><span data-stu-id="f50e4-107">The base class method must be defined [virtual](../../../csharp/language-reference/keywords/virtual.md).</span></span>  
  
-   <span data-ttu-id="f50e4-108">Pokud metoda v odvozené třídě nepředchází [nové](../../../csharp/language-reference/keywords/new.md) nebo [přepsat](../../../csharp/language-reference/keywords/override.md) klíčová slova, kompilátor vydá upozornění a metodu budou chovat jako kdyby `new` – klíčové slovo nebyly nalezeny.</span><span class="sxs-lookup"><span data-stu-id="f50e4-108">If the method in the derived class is not preceded by [new](../../../csharp/language-reference/keywords/new.md) or [override](../../../csharp/language-reference/keywords/override.md) keywords, the compiler will issue a warning and the method will behave as if the `new` keyword were present.</span></span>  
  
-   <span data-ttu-id="f50e4-109">Pokud metoda v odvozené třídě předchází `new` – klíčové slovo, metoda je definován jako je nezávislé na metodu v základní třídě.</span><span class="sxs-lookup"><span data-stu-id="f50e4-109">If the method in the derived class is preceded with the `new` keyword, the method is defined as being independent of the method in the base class.</span></span>  
  
-   <span data-ttu-id="f50e4-110">Pokud metoda v odvozené třídě předchází `override` – klíčové slovo, objekty odvozené třídy bude volat tuto metodu místo metody třídy base.</span><span class="sxs-lookup"><span data-stu-id="f50e4-110">If the method in the derived class is preceded with the `override` keyword, objects of the derived class will call that method instead of the base class method.</span></span>  
  
-   <span data-ttu-id="f50e4-111">Základní třída metodu lze volat z v odvozené třídě pomocí `base` – klíčové slovo.</span><span class="sxs-lookup"><span data-stu-id="f50e4-111">The base class method can be called from within the derived class using the `base` keyword.</span></span>  
  
-   <span data-ttu-id="f50e4-112">`override`, `virtual`, A `new` klíčová slova lze použít také k vlastnostem, indexery a události.</span><span class="sxs-lookup"><span data-stu-id="f50e4-112">The `override`, `virtual`, and `new` keywords can also be applied to properties, indexers, and events.</span></span>  
  
 <span data-ttu-id="f50e4-113">Ve výchozím nastavení nejsou virtuální metody C#.</span><span class="sxs-lookup"><span data-stu-id="f50e4-113">By default, C# methods are not virtual.</span></span> <span data-ttu-id="f50e4-114">Pokud metoda je deklarován jako virtuální, všechny třídu, která dědí metodu můžete implementovat vlastní verzi.</span><span class="sxs-lookup"><span data-stu-id="f50e4-114">If a method is declared as virtual, any class inheriting the method can implement its own version.</span></span> <span data-ttu-id="f50e4-115">Chcete-li metodu virtuální, `virtual` modifikátor se používá v deklaraci metoda základní třídy.</span><span class="sxs-lookup"><span data-stu-id="f50e4-115">To make a method virtual, the `virtual` modifier is used in the method declaration of the base class.</span></span> <span data-ttu-id="f50e4-116">Odvozené třídy lze přepsat metodu základní virtuální pak pomocí `override` – klíčové slovo nebo skrýt virtuální metody v základní třídě. pomocí `new` – klíčové slovo.</span><span class="sxs-lookup"><span data-stu-id="f50e4-116">The derived class can then override the base virtual method by using the `override` keyword or hide the virtual method in the base class by using the `new` keyword.</span></span> <span data-ttu-id="f50e4-117">Pokud `override` – klíčové slovo ani `new` je zadané klíčové slovo, kompilátor vydá upozornění a metoda v odvozené třídě skryje metodu v základní třídě.</span><span class="sxs-lookup"><span data-stu-id="f50e4-117">If neither the `override` keyword nor the `new` keyword is specified, the compiler will issue a warning and the method in the derived class will hide the method in the base class.</span></span>  
  
 <span data-ttu-id="f50e4-118">Ukazuje to v praxi, předpokládá na chvíli společnosti A má vytvořený třídy s názvem `GraphicsClass`, který program používá.</span><span class="sxs-lookup"><span data-stu-id="f50e4-118">To demonstrate this in practice, assume for a moment that Company A has created a class named `GraphicsClass`, which your program uses.</span></span> <span data-ttu-id="f50e4-119">Toto je `GraphicsClass`:</span><span class="sxs-lookup"><span data-stu-id="f50e4-119">The following is `GraphicsClass`:</span></span>  
  
 [!code-csharp[csProgGuideInheritance#27](../../../csharp/programming-guide/classes-and-structs/codesnippet/CSharp/versioning-with-the-override-and-new-keywords_1.cs)]  
  
 <span data-ttu-id="f50e4-120">Vaše společnost používá tuto třídu a můžete použít k odvození vlastní třídu přidání nové metody:</span><span class="sxs-lookup"><span data-stu-id="f50e4-120">Your company uses this class, and you use it to derive your own class, adding a new method:</span></span>  
  
 [!code-csharp[csProgGuideInheritance#28](../../../csharp/programming-guide/classes-and-structs/codesnippet/CSharp/versioning-with-the-override-and-new-keywords_2.cs)]  
  
 <span data-ttu-id="f50e4-121">Aplikace se používá bez problémů, dokud společnosti A uvolní novou verzi `GraphicsClass`, která se podobá následující kód:</span><span class="sxs-lookup"><span data-stu-id="f50e4-121">Your application is used without problems, until Company A releases a new version of `GraphicsClass`, which resembles the following code:</span></span>  
  
 [!code-csharp[csProgGuideInheritance#29](../../../csharp/programming-guide/classes-and-structs/codesnippet/CSharp/versioning-with-the-override-and-new-keywords_3.cs)]  
  
 <span data-ttu-id="f50e4-122">Nové verze `GraphicsClass` nyní obsahuje metodu s názvem `DrawRectangle`.</span><span class="sxs-lookup"><span data-stu-id="f50e4-122">The new version of `GraphicsClass` now contains a method named `DrawRectangle`.</span></span> <span data-ttu-id="f50e4-123">Na začátku nedojde k žádné akci.</span><span class="sxs-lookup"><span data-stu-id="f50e4-123">Initially, nothing occurs.</span></span> <span data-ttu-id="f50e4-124">Nová verze je stále binární kompatibilní s předchozí verzi aplikace.</span><span class="sxs-lookup"><span data-stu-id="f50e4-124">The new version is still binary compatible with the old version.</span></span> <span data-ttu-id="f50e4-125">Veškerý software, který jste nasadili se bude nadále fungovat, i v případě, že nová třída je nainstalován na těchto počítačích.</span><span class="sxs-lookup"><span data-stu-id="f50e4-125">Any software that you have deployed will continue to work, even if the new class is installed on those computer systems.</span></span> <span data-ttu-id="f50e4-126">Všechny existující volání do metody `DrawRectangle` budou dál odkazovat vaší verzí v odvozené třídě.</span><span class="sxs-lookup"><span data-stu-id="f50e4-126">Any existing calls to the method `DrawRectangle` will continue to reference your version, in your derived class.</span></span>  
  
 <span data-ttu-id="f50e4-127">Ale co nejdříve překompilovat vaší aplikace pomocí nové verze `GraphicsClass`, zobrazí se upozornění z kompilátoru CS0108.</span><span class="sxs-lookup"><span data-stu-id="f50e4-127">However, as soon as you recompile your application by using the new version of `GraphicsClass`, you will receive a warning from the compiler, CS0108.</span></span> <span data-ttu-id="f50e4-128">Toto upozornění vás upozorní, že budete muset zvážit, jakým způsobem chcete vaší `DrawRectangle` metoda chovat ve vaší aplikaci.</span><span class="sxs-lookup"><span data-stu-id="f50e4-128">This warning informs you that you have to consider how you want your `DrawRectangle` method to behave in your application.</span></span>  
  
 <span data-ttu-id="f50e4-129">Pokud chcete metodu přepsat metodu nové základní třídy, použijte `override` – klíčové slovo:</span><span class="sxs-lookup"><span data-stu-id="f50e4-129">If you want your method to override the new base class method, use the `override` keyword:</span></span>  
  
 [!code-csharp[csProgGuideInheritance#30](../../../csharp/programming-guide/classes-and-structs/codesnippet/CSharp/versioning-with-the-override-and-new-keywords_4.cs)]  
  
 <span data-ttu-id="f50e4-130">`override` – Klíčové slovo zajišťuje, že všechny objekty odvozené od `YourDerivedGraphicsClass` bude používat verzi odvozené třídy `DrawRectangle`.</span><span class="sxs-lookup"><span data-stu-id="f50e4-130">The `override` keyword makes sure that any objects derived from `YourDerivedGraphicsClass` will use the derived class version of `DrawRectangle`.</span></span> <span data-ttu-id="f50e4-131">Odvozené objekty z `YourDerivedGraphicsClass` pořád přístup k základní třída verzi `DrawRectangle` pomocí base – klíčové slovo:</span><span class="sxs-lookup"><span data-stu-id="f50e4-131">Objects derived from `YourDerivedGraphicsClass` can still access the base class version of `DrawRectangle` by using the base keyword:</span></span>  
  
 [!code-csharp[csProgGuideInheritance#44](../../../csharp/programming-guide/classes-and-structs/codesnippet/CSharp/versioning-with-the-override-and-new-keywords_5.cs)]  
  
 <span data-ttu-id="f50e4-132">Pokud nechcete, aby se vaše metoda přepsat metodu nové základní třídy, platí následující aspekty.</span><span class="sxs-lookup"><span data-stu-id="f50e4-132">If you do not want your method to override the new base class method, the following considerations apply.</span></span> <span data-ttu-id="f50e4-133">Aby nedocházelo k záměně mezi tyto dvě metody, můžete přejmenovat metodu.</span><span class="sxs-lookup"><span data-stu-id="f50e4-133">To avoid confusion between the two methods, you can rename your method.</span></span> <span data-ttu-id="f50e4-134">To může být zvlášť zdlouhavé a náchylné a právě není praktické v některých případech.</span><span class="sxs-lookup"><span data-stu-id="f50e4-134">This can be time-consuming and error-prone, and just not practical in some cases.</span></span> <span data-ttu-id="f50e4-135">Pokud váš projekt je poměrně malý, můžete přejmenovat metodu můžete použít možnosti Refactoring Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="f50e4-135">However, if your project is relatively small, you can use Visual Studio's Refactoring options to rename the method.</span></span> <span data-ttu-id="f50e4-136">Další informace najdete v tématu [refaktoring tříd a typů (návrhář tříd)](/visualstudio/ide/refactoring-classes-and-types-class-designer).</span><span class="sxs-lookup"><span data-stu-id="f50e4-136">For more information, see [Refactoring Classes and Types (Class Designer)](/visualstudio/ide/refactoring-classes-and-types-class-designer).</span></span>  
  
 <span data-ttu-id="f50e4-137">Alternativně můžete zabránit upozornění pomocí klíčového slova `new` v definici vaší odvozené třídy:</span><span class="sxs-lookup"><span data-stu-id="f50e4-137">Alternatively, you can prevent the warning by using the keyword `new` in your derived class definition:</span></span>  
  
 [!code-csharp[csProgGuideInheritance#31](../../../csharp/programming-guide/classes-and-structs/codesnippet/CSharp/versioning-with-the-override-and-new-keywords_6.cs)]  
  
 <span data-ttu-id="f50e4-138">Pomocí `new` – klíčové slovo říká kompilátoru, že vaše definice skryje definici, který je obsažen v základní třídě.</span><span class="sxs-lookup"><span data-stu-id="f50e4-138">Using the `new` keyword tells the compiler that your definition hides the definition that is contained in the base class.</span></span> <span data-ttu-id="f50e4-139">Toto je výchozí chování.</span><span class="sxs-lookup"><span data-stu-id="f50e4-139">This is the default behavior.</span></span>  
  
## <a name="override-and-method-selection"></a><span data-ttu-id="f50e4-140">Přepsání a výběr metody</span><span class="sxs-lookup"><span data-stu-id="f50e4-140">Override and Method Selection</span></span>  
 <span data-ttu-id="f50e4-141">Když metoda názvem třídy, kompilátor jazyka C# vybere nejlepší metody zavolat, když je více než jedna metoda kompatibilní s volání, jako když existují dvě metody se stejným názvem a parametry, které jsou kompatibilní s Předaný parametr.</span><span class="sxs-lookup"><span data-stu-id="f50e4-141">When a method is named on a class, the C# compiler selects the best method to call if more than one method is compatible with the call, such as when there are two methods with the same name, and parameters that are compatible with the parameter passed.</span></span> <span data-ttu-id="f50e4-142">Kompatibilní by byly následující metody:</span><span class="sxs-lookup"><span data-stu-id="f50e4-142">The following methods would be compatible:</span></span>  
  
 [!code-csharp[csProgGuideInheritance#32](../../../csharp/programming-guide/classes-and-structs/codesnippet/CSharp/versioning-with-the-override-and-new-keywords_7.cs)]  
  
 <span data-ttu-id="f50e4-143">Když `DoWork` se volá na instanci `Derived`, kompilátor jazyka C# se nejdřív pokusí použít, může volat kompatibilní s verzemi systému `DoWork` původně deklarovaná u `Derived`.</span><span class="sxs-lookup"><span data-stu-id="f50e4-143">When `DoWork` is called on an instance of `Derived`, the C# compiler will first try to make the call compatible with the versions of `DoWork` declared originally on `Derived`.</span></span> <span data-ttu-id="f50e4-144">Přepsání metody nejsou považované za deklarovaných na třídu, jsou nové implementace metody deklarovaný na základní třídě.</span><span class="sxs-lookup"><span data-stu-id="f50e4-144">Override methods are not considered as declared on a class, they are new implementations of a method declared on a base class.</span></span> <span data-ttu-id="f50e4-145">Pouze v případě, že kompilátor jazyka C# se nemůže shodovat volání metody pro metodu původní na `Derived` se pokusí k přiřazení volání pro metodu přepsaného se stejným názvem a kompatibilní parametry.</span><span class="sxs-lookup"><span data-stu-id="f50e4-145">Only if the C# compiler cannot match the method call to an original method on `Derived` will it try to match the call to an overridden method with the same name and compatible parameters.</span></span> <span data-ttu-id="f50e4-146">Příklad:</span><span class="sxs-lookup"><span data-stu-id="f50e4-146">For example:</span></span>  
  
 [!code-csharp[csProgGuideInheritance#33](../../../csharp/programming-guide/classes-and-structs/codesnippet/CSharp/versioning-with-the-override-and-new-keywords_8.cs)]  
  
 <span data-ttu-id="f50e4-147">Protože proměnnou `val` lze převést na datový typ double implicitně, volání kompilátoru C# `DoWork(double)` místo `DoWork(int)`.</span><span class="sxs-lookup"><span data-stu-id="f50e4-147">Because the variable `val` can be converted to a double implicitly, the C# compiler calls `DoWork(double)` instead of `DoWork(int)`.</span></span> <span data-ttu-id="f50e4-148">Existují dva způsoby, abyste tomu předešli.</span><span class="sxs-lookup"><span data-stu-id="f50e4-148">There are two ways to avoid this.</span></span> <span data-ttu-id="f50e4-149">Vyhněte se nejprve deklarace nové metody se stejným názvem jako virtuální metody.</span><span class="sxs-lookup"><span data-stu-id="f50e4-149">First, avoid declaring new methods with the same name as virtual methods.</span></span> <span data-ttu-id="f50e4-150">Druhý, můžete určit, aby kompilátor jazyka C# k volání metody virtuální tím, že v seznamu metoda základní třída hledat přetypování instanci `Derived` k `Base`.</span><span class="sxs-lookup"><span data-stu-id="f50e4-150">Second, you can instruct the C# compiler to call the virtual method by making it search the base class method list by casting the instance of `Derived` to `Base`.</span></span> <span data-ttu-id="f50e4-151">Vzhledem k tomu, že je metoda virtuální, provádění `DoWork(int)` na `Derived` bude volána.</span><span class="sxs-lookup"><span data-stu-id="f50e4-151">Because the method is virtual, the implementation of `DoWork(int)` on `Derived` will be called.</span></span> <span data-ttu-id="f50e4-152">Příklad:</span><span class="sxs-lookup"><span data-stu-id="f50e4-152">For example:</span></span>  
  
 [!code-csharp[csProgGuideInheritance#34](../../../csharp/programming-guide/classes-and-structs/codesnippet/CSharp/versioning-with-the-override-and-new-keywords_9.cs)]  
  
 <span data-ttu-id="f50e4-153">Další příklady `new` a `override`, najdete v části [zároveň budete vědět, při použití přepsání a nová klíčová slova](../../../csharp/programming-guide/classes-and-structs/knowing-when-to-use-override-and-new-keywords.md).</span><span class="sxs-lookup"><span data-stu-id="f50e4-153">For more examples of `new` and `override`, see [Knowing When to Use Override and New Keywords](../../../csharp/programming-guide/classes-and-structs/knowing-when-to-use-override-and-new-keywords.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="f50e4-154">Viz také</span><span class="sxs-lookup"><span data-stu-id="f50e4-154">See Also</span></span>  
 [<span data-ttu-id="f50e4-155">Průvodce programováním v C#</span><span class="sxs-lookup"><span data-stu-id="f50e4-155">C# Programming Guide</span></span>](../../../csharp/programming-guide/index.md)  
 [<span data-ttu-id="f50e4-156">Třídy a struktury</span><span class="sxs-lookup"><span data-stu-id="f50e4-156">Classes and Structs</span></span>](../../../csharp/programming-guide/classes-and-structs/index.md)  
 [<span data-ttu-id="f50e4-157">Metody</span><span class="sxs-lookup"><span data-stu-id="f50e4-157">Methods</span></span>](../../../csharp/programming-guide/classes-and-structs/methods.md)  
 [<span data-ttu-id="f50e4-158">Dědičnost</span><span class="sxs-lookup"><span data-stu-id="f50e4-158">Inheritance</span></span>](../../../csharp/programming-guide/classes-and-structs/inheritance.md)
