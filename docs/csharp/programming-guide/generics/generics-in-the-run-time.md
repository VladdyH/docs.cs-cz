---
title: "Obecné typy v běhovém prostředí (Průvodce programováním v C#)"
ms.date: 07/20/2015
ms.prod: .net
ms.technology: devlang-csharp
ms.topic: article
helpviewer_keywords: generics [C#], at run time
ms.assetid: 119df7e6-9ceb-49df-af36-24f8f8c0747f
caps.latest.revision: "18"
author: BillWagner
ms.author: wiwagn
ms.openlocfilehash: 5ef0b63b293ec277ebf9331e8f282ce2c1692d31
ms.sourcegitcommit: 4f3fef493080a43e70e951223894768d36ce430a
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 11/21/2017
---
# <a name="generics-in-the-run-time-c-programming-guide"></a><span data-ttu-id="40e67-102">Obecné typy v běhovém prostředí (Průvodce programováním v C#)</span><span class="sxs-lookup"><span data-stu-id="40e67-102">Generics in the Run Time (C# Programming Guide)</span></span>
<span data-ttu-id="40e67-103">Když je obecný typ nebo metoda zkompilován Microsoft (MSIL intermediate language), obsahuje metadata, která ji identifikuje jako s parametry typu.</span><span class="sxs-lookup"><span data-stu-id="40e67-103">When a generic type or method is compiled into Microsoft intermediate language (MSIL), it contains metadata that identifies it as having type parameters.</span></span> <span data-ttu-id="40e67-104">Jak MSIL pro obecný typ se používá, se liší podle toho, zda zadaný typ parametru hodnotu typu nebo typu odkazu.</span><span class="sxs-lookup"><span data-stu-id="40e67-104">How the MSIL for a generic type is used differs based on whether the supplied type parameter is a value type or reference type.</span></span>  
  
 <span data-ttu-id="40e67-105">-Li obecného typu nejprve vytvořená s typem hodnotu jako parametr, modul runtime vytvoří specializované obecného typu s zadaný parametrem nebo nahrazena v vhodného umístění v MSIL parametry.</span><span class="sxs-lookup"><span data-stu-id="40e67-105">When a generic type is first constructed with a value type as a parameter, the runtime creates a specialized generic type with the supplied parameter or parameters substituted in the appropriate locations in the MSIL.</span></span> <span data-ttu-id="40e67-106">Specializované obecné typy jsou vytvořeny jednou pro každou jedinečnou hodnotu typ, který se používá jako parametr.</span><span class="sxs-lookup"><span data-stu-id="40e67-106">Specialized generic types are created one time for each unique value type that is used as a parameter.</span></span>  
  
 <span data-ttu-id="40e67-107">Předpokládejme například, program kódu deklarovaný zásobníku, který je sestavený celých čísel:</span><span class="sxs-lookup"><span data-stu-id="40e67-107">For example, suppose your program code declared a stack that is constructed of integers:</span></span>  
  
 [!code-csharp[csProgGuideGenerics#42](../../../csharp/programming-guide/generics/codesnippet/CSharp/generics-in-the-run-time_1.cs)]  
  
 <span data-ttu-id="40e67-108">V tomto okamžiku modul runtime generuje specializovanou verzi <xref:System.Collections.Generic.Stack%601> třídu, která je nahrazena příslušným způsobem pro její parametr celé číslo.</span><span class="sxs-lookup"><span data-stu-id="40e67-108">At this point, the runtime generates a specialized version of the <xref:System.Collections.Generic.Stack%601> class that has the integer substituted appropriately for its parameter.</span></span> <span data-ttu-id="40e67-109">Nyní, vždy, když program kód používá zásobník celých čísel, vygenerovaného runtime opětné specializuje <xref:System.Collections.Generic.Stack%601> třídy.</span><span class="sxs-lookup"><span data-stu-id="40e67-109">Now, whenever your program code uses a stack of integers, the runtime reuses the generated specialized <xref:System.Collections.Generic.Stack%601> class.</span></span> <span data-ttu-id="40e67-110">V následujícím příkladu jsou vytvořeny dva instance zásobníku celých čísel a sdílejí jednu instanci `Stack<int>` kódu:</span><span class="sxs-lookup"><span data-stu-id="40e67-110">In the following example, two instances of a stack of integers are created, and they share a single instance of the `Stack<int>` code:</span></span>  
  
 [!code-csharp[csProgGuideGenerics#43](../../../csharp/programming-guide/generics/codesnippet/CSharp/generics-in-the-run-time_2.cs)]  
  
 <span data-ttu-id="40e67-111">Však Předpokládejme, že jiný <xref:System.Collections.Generic.Stack%601> třídy s typem jinou hodnotu, jako `long` nebo strukturou uživatelem definované jako její parametr bude vytvořena na jiné místo v kódu.</span><span class="sxs-lookup"><span data-stu-id="40e67-111">However, suppose that another <xref:System.Collections.Generic.Stack%601> class with a different value type such as a `long` or a user-defined structure as its parameter is created at another point in your code.</span></span> <span data-ttu-id="40e67-112">V důsledku toho modul runtime generuje jinou verzi aplikace obecného typu a nahradí `long` do vhodného umístění v MSIL.</span><span class="sxs-lookup"><span data-stu-id="40e67-112">As a result, the runtime generates another version of the generic type and substitutes a `long` in the appropriate locations in MSIL.</span></span> <span data-ttu-id="40e67-113">Převody již nejsou potřebné protože každá specializované obecná třída nativně obsahuje typ hodnoty.</span><span class="sxs-lookup"><span data-stu-id="40e67-113">Conversions are no longer necessary because each specialized generic class natively contains the value type.</span></span>  
  
 <span data-ttu-id="40e67-114">Obecné typy fungují trochu jinak pro odkazové typy.</span><span class="sxs-lookup"><span data-stu-id="40e67-114">Generics work somewhat differently for reference types.</span></span> <span data-ttu-id="40e67-115">Při prvním obecného typu je vytvořený pomocí libovolného typu odkaz, modul runtime vytvoří s odkazy na objekty nahrazena pro parametry v MSIL specializované obecného typu.</span><span class="sxs-lookup"><span data-stu-id="40e67-115">The first time a generic type is constructed with any reference type, the runtime creates a specialized generic type with object references substituted for the parameters in the MSIL.</span></span> <span data-ttu-id="40e67-116">Potom pokaždé, když vytvoření instance typu sestavené s typu odkaz jako svůj parametr bez ohledu na to, jaký typ je modul runtime opětovně používá dříve vytvořenou specializovanou verzi obecného typu.</span><span class="sxs-lookup"><span data-stu-id="40e67-116">Then, every time that a constructed type is instantiated with a reference type as its parameter, regardless of what type it is, the runtime reuses the previously created specialized version of the generic type.</span></span> <span data-ttu-id="40e67-117">To je možné, protože všechny odkazy mají stejnou velikost.</span><span class="sxs-lookup"><span data-stu-id="40e67-117">This is possible because all references are the same size.</span></span>  
  
 <span data-ttu-id="40e67-118">Předpokládejme například, že jste měli dva typy odkazů `Customer` třídy a `Order` třídy a také Předpokládejme, že jste vytvořili více `Customer` typy:</span><span class="sxs-lookup"><span data-stu-id="40e67-118">For example, suppose you had two reference types, a `Customer` class and an `Order` class, and also suppose that you created a stack of `Customer` types:</span></span>  
  
 [!code-csharp[csProgGuideGenerics#47](../../../csharp/programming-guide/generics/codesnippet/CSharp/generics-in-the-run-time_3.cs)]  
  
 [!code-csharp[csProgGuideGenerics#44](../../../csharp/programming-guide/generics/codesnippet/CSharp/generics-in-the-run-time_4.cs)]  
  
 <span data-ttu-id="40e67-119">V tomto okamžiku modul runtime generuje specializovanou verzi <xref:System.Collections.Generic.Stack%601> třídu, která ukládá odkazy na objekty, které budou vyplněna později místo ukládání dat.</span><span class="sxs-lookup"><span data-stu-id="40e67-119">At this point, the runtime generates a specialized version of the <xref:System.Collections.Generic.Stack%601> class that stores object references that will be filled in later instead of storing data.</span></span> <span data-ttu-id="40e67-120">Předpokládejme, že dalším řádku kódu vytvoří zásobníku jiného typu odkaz, který se nazývá `Order`:</span><span class="sxs-lookup"><span data-stu-id="40e67-120">Suppose the next line of code creates a stack of another reference type, which is named `Order`:</span></span>  
  
 [!code-csharp[csProgGuideGenerics#45](../../../csharp/programming-guide/generics/codesnippet/CSharp/generics-in-the-run-time_5.cs)]  
  
 <span data-ttu-id="40e67-121">Na rozdíl od s typy hodnot, jiné specializuje verzi <xref:System.Collections.Generic.Stack%601> třída není vytvořena pro `Order` typu.</span><span class="sxs-lookup"><span data-stu-id="40e67-121">Unlike with value types, another specialized version of the <xref:System.Collections.Generic.Stack%601> class is not created for the `Order` type.</span></span> <span data-ttu-id="40e67-122">Místo toho instanci specializovanou verzi <xref:System.Collections.Generic.Stack%601> vytvořit třídu a `orders` proměnná je nastavená na něj odkazovat.</span><span class="sxs-lookup"><span data-stu-id="40e67-122">Instead, an instance of the specialized version of the <xref:System.Collections.Generic.Stack%601> class is created and the `orders` variable is set to reference it.</span></span> <span data-ttu-id="40e67-123">Předpokládejme, pak zjistil řádek kód k vytvoření zásobník `Customer` typu:</span><span class="sxs-lookup"><span data-stu-id="40e67-123">Suppose that you then encountered a line of code to create a stack of a `Customer` type:</span></span>  
  
 [!code-csharp[csProgGuideGenerics#46](../../../csharp/programming-guide/generics/codesnippet/CSharp/generics-in-the-run-time_6.cs)]  
  
 <span data-ttu-id="40e67-124">Stejně jako u předchozí použití <xref:System.Collections.Generic.Stack%601> třída vytvořili pomocí `Order` zadejte jinou instanci specializované <xref:System.Collections.Generic.Stack%601> vytvořit třídu.</span><span class="sxs-lookup"><span data-stu-id="40e67-124">As with the previous use of the <xref:System.Collections.Generic.Stack%601> class created by using the `Order` type, another instance of the specialized <xref:System.Collections.Generic.Stack%601> class is created.</span></span> <span data-ttu-id="40e67-125">Ukazatele, které jsou obsaženy v něm jsou nastavené tak, aby odkazovaly na oblast paměti velikost `Customer` typu.</span><span class="sxs-lookup"><span data-stu-id="40e67-125">The pointers that are contained therein are set to reference an area of memory the size of a `Customer` type.</span></span> <span data-ttu-id="40e67-126">Vzhledem k tomu, že počet typů odkaz se může měnit programu velkým, implementace C# obecných typů výrazně snižuje velikost kód na jedno snížením počtu specializované tříd vytvořené kompilátoru pro obecné třídy odkazové typy.</span><span class="sxs-lookup"><span data-stu-id="40e67-126">Because the number of reference types can vary wildly from program to program, the C# implementation of generics greatly reduces the amount of code by reducing to one the number of specialized classes created by the compiler for generic classes of reference types.</span></span>  
  
 <span data-ttu-id="40e67-127">Kromě toho při vytváření instance obecné třídy jazyka C# s použitím parametru hodnoty typu nebo odkaz na typ reflexe můžete dotazovat za běhu a jeho skutečný typ a její typ parametru lze zjistit.</span><span class="sxs-lookup"><span data-stu-id="40e67-127">Moreover, when a generic C# class is instantiated by using a value type or reference type parameter, reflection can query it at runtime and both its actual type and its type parameter can be ascertained.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="40e67-128">Viz také</span><span class="sxs-lookup"><span data-stu-id="40e67-128">See Also</span></span>  
 <xref:System.Collections.Generic>  
 [<span data-ttu-id="40e67-129">Průvodce programováním v C#</span><span class="sxs-lookup"><span data-stu-id="40e67-129">C# Programming Guide</span></span>](../../../csharp/programming-guide/index.md)  
 [<span data-ttu-id="40e67-130">Úvod do obecných typů</span><span class="sxs-lookup"><span data-stu-id="40e67-130">Introduction to Generics</span></span>](../../../csharp/programming-guide/generics/introduction-to-generics.md)  
 [<span data-ttu-id="40e67-131">Obecné typy</span><span class="sxs-lookup"><span data-stu-id="40e67-131">Generics</span></span>](~/docs/standard/generics/index.md)
