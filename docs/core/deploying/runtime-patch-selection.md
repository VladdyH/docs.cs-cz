---
title: Samostatná nasazení runtime dopředné posunutí
description: Další informace o dotnet publikování změn pro samostatný nasazení.
author: jralexander
ms.author: kdollard
ms.date: 05/31/2018
ms.openlocfilehash: 40d28e81e2ac1b27e7fd89e16d2d906a080fd18b
ms.sourcegitcommit: bbf70abe6b46073148f78cbf0619de6092b5800c
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 06/04/2018
ms.locfileid: "34697249"
---
# <a name="self-contained-deployment-runtime-roll-forward"></a><span data-ttu-id="ea203-103">Samostatná nasazení runtime dopředné posunutí</span><span class="sxs-lookup"><span data-stu-id="ea203-103">Self-contained deployment runtime roll forward</span></span>

<span data-ttu-id="ea203-104">.NET core [nasazení nezávislý aplikací](index.md) zahrnují knihovny .NET Core a na .NET Core runtime.</span><span class="sxs-lookup"><span data-stu-id="ea203-104">.NET Core [self-contained application deployments](index.md) include both the .NET Core libraries and the .NET Core runtime.</span></span> <span data-ttu-id="ea203-105">Od verze rozhraní .NET Core SDK 2.1.300 (.NET Core 2.1), k nasazení aplikace nezávislý na [nyní publikuje nejvyšší runtime opravy na váš počítač](https://github.com/dotnet/designs/pull/36).</span><span class="sxs-lookup"><span data-stu-id="ea203-105">Starting in .NET Core SDK 2.1.300 (.NET Core 2.1), a self-contained application deployment [now publishes the highest patch runtime on your machine](https://github.com/dotnet/designs/pull/36).</span></span> <span data-ttu-id="ea203-106">Ve výchozím nastavení[ `dotnet publish` ](../tools/dotnet-publish.md) pro samostatný nasazení vybere jako součást sady SDK na publikování počítači nainstalovanou nejnovější verzi.</span><span class="sxs-lookup"><span data-stu-id="ea203-106">By default,[`dotnet publish`](../tools/dotnet-publish.md) for a self-contained deployment selects the latest version installed as part of the SDK on the publishing machine.</span></span> <span data-ttu-id="ea203-107">To umožňuje nasazené aplikace na spouštění pomocí oprav zabezpečení (a ostatní opravy) k dispozici během `publish`.</span><span class="sxs-lookup"><span data-stu-id="ea203-107">This enables your deployed application to run with security fixes (and other fixes) available during `publish`.</span></span> <span data-ttu-id="ea203-108">Aplikace musí být znovu publikován získání nového opravy.</span><span class="sxs-lookup"><span data-stu-id="ea203-108">The application must be re-published to obtain a new patch.</span></span> <span data-ttu-id="ea203-109">Samostatná aplikace, které jsou vytvořené tak, že zadáte `-r <RID>` na `dotnet publish` příkazu nebo zadáním [runtime identifikátorů (RID)](../rid-catalog.md) v souboru projektu (csproj nebo vbproj) nebo na příkazovém řádku.</span><span class="sxs-lookup"><span data-stu-id="ea203-109">Self-contained applications are created by specifying `-r <RID>` on `dotnet publish` command or by specifying the [runtime identifier (RID)](../rid-catalog.md) in the project file (csproj / vbproj) or on the command line.</span></span>

## <a name="patch-version-roll-forward-overview"></a><span data-ttu-id="ea203-110">Oprava verze kumulativní dopředného přehled</span><span class="sxs-lookup"><span data-stu-id="ea203-110">Patch version roll forward overview</span></span>

<span data-ttu-id="ea203-111">[`restore`](../tools/dotnet-restore.md), [ `build` ](../tools/dotnet-build.md) a [ `publish` ](../tools/dotnet-publish.md) jsou `dotnet` příkazy, které můžete spustit odděleně.</span><span class="sxs-lookup"><span data-stu-id="ea203-111">[`restore`](../tools/dotnet-restore.md), [`build`](../tools/dotnet-build.md) and [`publish`](../tools/dotnet-publish.md) are `dotnet` commands that can run separately.</span></span> <span data-ttu-id="ea203-112">Volba runtime je součástí `restore` operaci, není `publish` nebo `build`.</span><span class="sxs-lookup"><span data-stu-id="ea203-112">The runtime choice is part of the `restore` operation, not `publish` or `build`.</span></span> <span data-ttu-id="ea203-113">Když zavoláte `publish`, bude vybrána na nejnovější verzi opravy.</span><span class="sxs-lookup"><span data-stu-id="ea203-113">If you call `publish`, the latest patch version will be chosen.</span></span> <span data-ttu-id="ea203-114">Když zavoláte `publish` s `--no-restore` argument a potom nelze získat požadovaný oprav verze, protože před `restore` nebyla spuštěna s Nová samostatná aplikace publikování zásady.</span><span class="sxs-lookup"><span data-stu-id="ea203-114">If you call `publish` with the `--no-restore` argument, then you may not get the desired patch version because a prior `restore` may not have been executed with the new self-contained application publishing policy.</span></span> <span data-ttu-id="ea203-115">V takovém případě je generována chyba sestavení s textem podobný následujícímu:</span><span class="sxs-lookup"><span data-stu-id="ea203-115">In this case, a build error is generated with text similar to the following:</span></span>

  <span data-ttu-id="ea203-116">"Projektu se obnovil pomocí Microsoft.NETCore.App verze 2.0.0, ale s aktuální nastavení, bude místo toho použít verzi 2.0.6.</span><span class="sxs-lookup"><span data-stu-id="ea203-116">"The project was restored using Microsoft.NETCore.App version 2.0.0, but with current settings, version 2.0.6 would be used instead.</span></span> <span data-ttu-id="ea203-117">Chcete-li vyřešit tento problém, ujistěte se, že stejné nastavení se používají pro obnovení a pro následující operace, jako je například sestavení nebo publikování.</span><span class="sxs-lookup"><span data-stu-id="ea203-117">To resolve this issue, make sure the same settings are used for restore and for subsequent operations such as build or publish.</span></span> <span data-ttu-id="ea203-118">Obvykle tomuto problému může dojít, pokud RuntimeIdentifier vlastnost se nastavuje během sestavení nebo publikovat, ale ne během obnovení."</span><span class="sxs-lookup"><span data-stu-id="ea203-118">Typically this issue can occur if the RuntimeIdentifier property is set during build or publish but not during restore."</span></span>

> [!NOTE]
> <span data-ttu-id="ea203-119">`restore` a `build` lze spustit implicitně jako součást jiného příkazu, jako je třeba `publish`.</span><span class="sxs-lookup"><span data-stu-id="ea203-119">`restore` and `build` can be run implicitly as part of another command, like `publish`.</span></span> <span data-ttu-id="ea203-120">Při spuštění implicitně jako součást jiného příkazu, že jsou k dispozici s další kontext tak, aby vytváří správné artefakty.</span><span class="sxs-lookup"><span data-stu-id="ea203-120">When run implicitly as part of another command, they are provided with additional context so that the right artifacts are produced.</span></span> <span data-ttu-id="ea203-121">Při jste `publish` s runtime (například `dotnet publish -r linux-x64`), implicitní `restore` obnoví balíčky pro linux x64 runtime.</span><span class="sxs-lookup"><span data-stu-id="ea203-121">When you `publish` with a runtime (for example, `dotnet publish -r linux-x64`), the implicit `restore` restores packages for the linux-x64 runtime.</span></span> <span data-ttu-id="ea203-122">Když zavoláte `restore` explicitně, se neobnoví runtime balíčků ve výchozím nastavení, protože nemá tohoto kontextu.</span><span class="sxs-lookup"><span data-stu-id="ea203-122">If you call `restore` explicitly, it does not restore runtime packages by default, because it doesn't have that context.</span></span>

## <a name="how-to-avoid-restore-during-publish"></a><span data-ttu-id="ea203-123">Jak se vyhnout obnovení během publikování</span><span class="sxs-lookup"><span data-stu-id="ea203-123">How to avoid restore during publish</span></span>

<span data-ttu-id="ea203-124">Spuštění `restore` jako součást `publish` operace může být žádoucí pro váš scénář.</span><span class="sxs-lookup"><span data-stu-id="ea203-124">Running `restore` as part of the `publish` operation may be undesirable for your scenario.</span></span> <span data-ttu-id="ea203-125">Aby se zabránilo `restore` během `publish` při vytváření samostatná aplikace, postupujte takto:</span><span class="sxs-lookup"><span data-stu-id="ea203-125">To avoid `restore` during `publish` while creating self-contained applications, do the following:</span></span>

* <span data-ttu-id="ea203-126">Nastavte `RuntimeIdentifiers` vlastnost středníky oddělený seznam všech [identifikátorů RID](../rid-catalog.md) k publikování</span><span class="sxs-lookup"><span data-stu-id="ea203-126">Set the `RuntimeIdentifiers` property to a semicolon-separated list of all the [RIDs](../rid-catalog.md) to be published</span></span>
* <span data-ttu-id="ea203-127">Nastavte `TargetLatestRuntimePatch` vlastnosti `true`</span><span class="sxs-lookup"><span data-stu-id="ea203-127">Set the `TargetLatestRuntimePatch` property to `true`</span></span>

## <a name="no-restore-argument-with-dotnet-publish-options"></a><span data-ttu-id="ea203-128">Možnosti publikování ne – obnovení argument dotnet.</span><span class="sxs-lookup"><span data-stu-id="ea203-128">No-restore argument with dotnet publish options</span></span>

<span data-ttu-id="ea203-129">Pokud chcete vytvořit samostatná aplikace, a [framework závislé aplikace](index.md) s ke stejnému souboru projektu, a chcete použít `--no-restore` argument s `dotnet publish`, pak vyberte jednu z následujících akcí:</span><span class="sxs-lookup"><span data-stu-id="ea203-129">If you want to create both self-contained applications and [framework-dependent applications](index.md) with the same project file, and you want to use the `--no-restore` argument with `dotnet publish`, then choose one of the following:</span></span>

1. <span data-ttu-id="ea203-130">Dáváte přednost chování framework závislé.</span><span class="sxs-lookup"><span data-stu-id="ea203-130">Prefer the framework-dependent behavior.</span></span> <span data-ttu-id="ea203-131">Pokud aplikace je závislá na framework, což je výchozí chování.</span><span class="sxs-lookup"><span data-stu-id="ea203-131">If the application is framework-dependent, this is the default behavior.</span></span> <span data-ttu-id="ea203-132">Pokud je samostatná aplikace a můžete použít neopravené 2.1.0 místní modul runtime, nastavte `TargetLatestRuntimePatch` k `false` v souboru projektu (csproj nebo vbproj).</span><span class="sxs-lookup"><span data-stu-id="ea203-132">If the application is self-contained, and can use an unpatched 2.1.0 local runtime, set the `TargetLatestRuntimePatch` to `false` in the project file (csproj / vbproj).</span></span>

2. <span data-ttu-id="ea203-133">Dáváte přednost nezávislý chování.</span><span class="sxs-lookup"><span data-stu-id="ea203-133">Prefer the self-contained behavior.</span></span> <span data-ttu-id="ea203-134">Pokud je samostatná aplikace, což je výchozí chování.</span><span class="sxs-lookup"><span data-stu-id="ea203-134">If the application is self-contained, this is the default behavior.</span></span> <span data-ttu-id="ea203-135">Pokud je aplikace závislé na framework a vyžaduje instalace nejnovější opravy, nastavte `TargetLatestRuntimePatch` k `true` v souboru projektu (csproj nebo vbproj).</span><span class="sxs-lookup"><span data-stu-id="ea203-135">If the application is framework-dependent, and requires the latest patch installed, set `TargetLatestRuntimePatch` to `true` in the project file (csproj / vbproj).</span></span>

3. <span data-ttu-id="ea203-136">Převzetí řízení explicitní framework verze modulu runtime nastavením `RuntimeFrameworkVersion` na verzi konkrétní opravy v souboru projektu (csproj nebo vbproj).</span><span class="sxs-lookup"><span data-stu-id="ea203-136">Take explicit control of the runtime framework version by setting `RuntimeFrameworkVersion` to the specific patch version in the project file (csproj / vbproj).</span></span>