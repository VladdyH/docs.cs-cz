---
title: Nasazení jedním kontejnerem na základě webových aplikací .NET Core v Linuxu nebo Windows hostiteli s Nano serverem
description: Architektura Mikroslužeb .NET pro Kontejnerizované aplikace .NET | Nasazení jedním kontejnerem na základě webových aplikací .NET Core v Linuxu nebo Windows hostiteli s Nano serverem
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 06/27/2018
ms.openlocfilehash: 45be99a86a52ed450b795ca5f91c01ab82c7da47
ms.sourcegitcommit: 3c1c3ba79895335ff3737934e39372555ca7d6d0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 09/05/2018
ms.locfileid: "43778000"
---
# <a name="deploying-single-container-based-net-core-web-applications-on-linux-or-windows-nano-server-hosts"></a><span data-ttu-id="0d592-103">Nasazování webových aplikací na základě jednoho kontejneru .NET Core v Linuxu nebo Windows hostiteli s Nano serverem</span><span class="sxs-lookup"><span data-stu-id="0d592-103">Deploying Single-Container-Based .NET Core Web Applications on Linux or Windows Nano Server Hosts</span></span>

<span data-ttu-id="0d592-104">_Kontejnery Dockeru můžete použít pro monolitické nasazení jednodušší webových aplikací. Tím se zlepšuje průběžnou integraci a průběžné nasazování kanálů a pomáhá dosahovat úspěšnosti nasazení do produkčního prostředí. Už to funguje"v počítači, proč to nebude fungovat v produkčním prostředí?"_</span><span class="sxs-lookup"><span data-stu-id="0d592-104">_You can use Docker containers for monolithic deployment of simpler web applications. This improves continuous integration and continuous deployment pipelines and helps achieve deployment-to-production success. No more “It works in my machine, why does it not work in production?”_</span></span>

<span data-ttu-id="0d592-105">Architektura založená na mikroslužbách má spoustu výhod, ale tyto výhody pocházet za cenu zvýšení složitosti.</span><span class="sxs-lookup"><span data-stu-id="0d592-105">A microservices-based architecture has many benefits, but those benefits come at a cost of increased complexity.</span></span> <span data-ttu-id="0d592-106">V některých případech se náklady převažují nad přínosy a monolitické nasazení aplikací spouštěných v kontejnerech jedné nebo několika je lepší volbou.</span><span class="sxs-lookup"><span data-stu-id="0d592-106">In some cases, the costs outweigh the benefits and a monolithic deployment application running in one or a few containers is a better option.</span></span>

<span data-ttu-id="0d592-107">Monolitické aplikace nemusí být snadno decomposable do jasně oddělené mikroslužeb.</span><span class="sxs-lookup"><span data-stu-id="0d592-107">A monolithic application might not be easily decomposable into well-separated microservices.</span></span> <span data-ttu-id="0d592-108">Když jste se naučili, že tyto mikroslužby by měly být rozdělené podle funkce: by měly fungovat nezávisle na sobě zajistit odolnost aplikace.</span><span class="sxs-lookup"><span data-stu-id="0d592-108">You've learned that these microservices should be partitioned by function: they should work independently of each other to provide a more resilient application.</span></span> <span data-ttu-id="0d592-109">Pokud nelze doručit řezy funkce aplikace, oddělení pouze zvyšuje složitost.</span><span class="sxs-lookup"><span data-stu-id="0d592-109">If you can't deliver feature slices of the application, separating it only adds complexity.</span></span>

<span data-ttu-id="0d592-110">Aplikace nemusí potřebovat ještě nezávisle škálovat funkce.</span><span class="sxs-lookup"><span data-stu-id="0d592-110">An application might not yet need to scale features independently.</span></span> <span data-ttu-id="0d592-111">Předpokládejme, který v počátečních fázích `eShopOnContainers` odkazovat na aplikace, provoz neměli zarovnání, rozdělení funkcí do různých mikroslužeb.</span><span class="sxs-lookup"><span data-stu-id="0d592-111">Let’s suppose that in the early stages of the `eShopOnContainers` reference application, the traffic didn't justify separating features into different microservices.</span></span> <span data-ttu-id="0d592-112">Provoz byla dostatečně malá, přidávání prostředků do jedné služby obvykle určena přidávání prostředků do všech služeb.</span><span class="sxs-lookup"><span data-stu-id="0d592-112">Traffic was small enough that adding resources to one service typically meant adding resources to all services.</span></span> <span data-ttu-id="0d592-113">Další práci pro oddělení aplikací do samostatných služeb k dispozici minimální výhodu.</span><span class="sxs-lookup"><span data-stu-id="0d592-113">The additional work to separate the application into discrete services provided minimal benefit.</span></span>

<span data-ttu-id="0d592-114">Také již v rané fázi při vývoji aplikace možná nebudete mít jasnou představu kde jsou přirozené hranice funkční.</span><span class="sxs-lookup"><span data-stu-id="0d592-114">Also, early in the development of an application you might not have a clear idea where the natural functional boundaries are.</span></span> <span data-ttu-id="0d592-115">Při vývoji minimální přijatelné produktu, nemusí mít ještě umístila fyzické oddělení.</span><span class="sxs-lookup"><span data-stu-id="0d592-115">As you develop a minimum viable product, the natural separation might not yet have emerged.</span></span>

<span data-ttu-id="0d592-116">Některé z těchto podmínek může být dočasné.</span><span class="sxs-lookup"><span data-stu-id="0d592-116">Some of these conditions might be temporary.</span></span> <span data-ttu-id="0d592-117">Může být začněte vytvořením jednotlivou aplikaci a později oddělení několik funkcí, které vyvinul a nasadit jako mikroslužeb.</span><span class="sxs-lookup"><span data-stu-id="0d592-117">You might start by creating a monolithic application, and later separate some features to be developed and deployed as microservices.</span></span> <span data-ttu-id="0d592-118">Další podmínky může být nezbytné pro aplikace problém místa, což znamená, že aplikace může být nikdy rozdělená do několika mikroslužeb.</span><span class="sxs-lookup"><span data-stu-id="0d592-118">Other conditions might be essential to the application’s problem space, meaning that the application might never be broken into multiple microservices.</span></span>

<span data-ttu-id="0d592-119">Oddělení aplikace do mnoha samostatné procesy také zavádí režijní náklady.</span><span class="sxs-lookup"><span data-stu-id="0d592-119">Separating an application into many discrete processes also introduces overhead.</span></span> <span data-ttu-id="0d592-120">Rozdělení funkcí do různých procesů je složitější.</span><span class="sxs-lookup"><span data-stu-id="0d592-120">There's more complexity in separating features into different processes.</span></span> <span data-ttu-id="0d592-121">Komunikační protokoly budou složitější.</span><span class="sxs-lookup"><span data-stu-id="0d592-121">The communication protocols become more complex.</span></span> <span data-ttu-id="0d592-122">Namísto volání metody je nutné použít asynchronní komunikace mezi službami.</span><span class="sxs-lookup"><span data-stu-id="0d592-122">Instead of method calls, you must use asynchronous communications between services.</span></span> <span data-ttu-id="0d592-123">Při přesunu na architekturu mikroslužeb, budete muset přidat řadu stavební bloky implementované ve verzi mikroslužeb `eShopOnContainers` aplikace: zpracování událostí Service bus, zprávy odolnost proti chybám a opakovaných pokusů, konečnou konzistenci a další.</span><span class="sxs-lookup"><span data-stu-id="0d592-123">As you move to a microservices architecture, you need to add many of the building blocks implemented in the microservices version of the `eShopOnContainers` application: event bus handling, message resiliency and retries, eventual consistency, and more.</span></span>

<span data-ttu-id="0d592-124">Velmi zjednodušené verzi aplikaci eShopOnContainers (s názvem [eShopWeb](https://github.com/dotnet-architecture/eShopOnContainers/tree/master/src/Web/WebMonolithic) a je zahrnuté ve stejném úložišti Githubu) spouští jako monolitické aplikace MVC.</span><span class="sxs-lookup"><span data-stu-id="0d592-124">A much-simplified version of eShopOnContainers (named [eShopWeb](https://github.com/dotnet-architecture/eShopOnContainers/tree/master/src/Web/WebMonolithic) and included in the same GitHub repository) runs as a monolithic MVC application.</span></span> <span data-ttu-id="0d592-125">Jak je popsáno, existují výhody, které nabízí široké možnosti volby návrhu.</span><span class="sxs-lookup"><span data-stu-id="0d592-125">As described, there are advantages offered by that design choice.</span></span> <span data-ttu-id="0d592-126">Můžete zdroj pro tuto aplikaci stáhnout z webu GitHub a spustit ho místně.</span><span class="sxs-lookup"><span data-stu-id="0d592-126">You can download the source for this application from GitHub and run it locally.</span></span> <span data-ttu-id="0d592-127">Tato monolitické aplikace využívá výhod nasazení v prostředí kontejneru.</span><span class="sxs-lookup"><span data-stu-id="0d592-127">Even this monolithic application benefits from being deployed in a container environment.</span></span>

<span data-ttu-id="0d592-128">Za prvé nasazení kontejnerizované znamená, že každá instance aplikace běží ve stejném prostředí.</span><span class="sxs-lookup"><span data-stu-id="0d592-128">For one, the containerized deployment means that every instance of the application runs in the same environment.</span></span> <span data-ttu-id="0d592-129">Jedná se o prostředí pro vývojáře, kde vývoj a testování již v rané fázi probíhat.</span><span class="sxs-lookup"><span data-stu-id="0d592-129">This includes the developer environment where early testing and development take place.</span></span> <span data-ttu-id="0d592-130">Vývojový tým můžete spustit aplikaci v kontejnerizovaných prostředí, která odpovídá produkčního prostředí.</span><span class="sxs-lookup"><span data-stu-id="0d592-130">The development team can run the application in a containerized environment that matches the production environment.</span></span>

<span data-ttu-id="0d592-131">Navíc kontejnerizovaných aplikací horizontální navýšení kapacity za nižší cenu.</span><span class="sxs-lookup"><span data-stu-id="0d592-131">Also, containerized applications scale out at lower cost.</span></span> <span data-ttu-id="0d592-132">Jak jste viděli již dříve kontejnerové prostředí umožňuje větší prostředků sdílení než tradiční prostředí virtuálních počítačů.</span><span class="sxs-lookup"><span data-stu-id="0d592-132">As you saw earlier, the container environment enables greater resource sharing than traditional VM environments.</span></span>

<span data-ttu-id="0d592-133">Nakonec se uzavření aplikace do kontejneru vynutí oddělení mezi obchodní logiku a storage server.</span><span class="sxs-lookup"><span data-stu-id="0d592-133">Finally, containerizing the application forces a separation between the business logic and the storage server.</span></span> <span data-ttu-id="0d592-134">Jak aplikace horizontálně navýší kapacitu, budou různé kontejnery spoléhat na střední jednoho fyzického úložiště.</span><span class="sxs-lookup"><span data-stu-id="0d592-134">As the application scales out, the various containers will all rely on a single physical storage medium.</span></span> <span data-ttu-id="0d592-135">Toto úložiště by obvykle vysokou dostupnost serveru databáze SQL serveru.</span><span class="sxs-lookup"><span data-stu-id="0d592-135">This storage would typically be a high-availability server running a SQL Server database.</span></span>

## <a name="application-tour"></a><span data-ttu-id="0d592-136">Přehled aplikace</span><span class="sxs-lookup"><span data-stu-id="0d592-136">Application tour</span></span>

<span data-ttu-id="0d592-137">[EShopWeb](https://github.com/dotnet-architecture/eShopOnContainers/tree/master/src/Web/WebMonolithic) aplikace představuje některé aplikace aplikaci eShopOnContainers spuštěné jako monolitické aplikace – aplikace založené na technologii ASP.NET Core MVC spouštění v .NET Core.</span><span class="sxs-lookup"><span data-stu-id="0d592-137">The [eShopWeb](https://github.com/dotnet-architecture/eShopOnContainers/tree/master/src/Web/WebMonolithic) application represents some of the eShopOnContainers application running as a monolithic application — an ASP.NET Core MVC-based application running on .NET Core.</span></span> <span data-ttu-id="0d592-138">Zejména poskytuje katalogu možnosti procházení, jak je popsáno v předchozí části.</span><span class="sxs-lookup"><span data-stu-id="0d592-138">It mainly provides the catalog browsing capabilities as described in earlier sections.</span></span>

<span data-ttu-id="0d592-139">Aplikace používá pro ukládání katalogu do databáze SQL serveru.</span><span class="sxs-lookup"><span data-stu-id="0d592-139">The application uses a SQL Server database for the catalog storage.</span></span> <span data-ttu-id="0d592-140">V kontejnerových nasazení této monolitické aplikace mohly přistupovat k úložišti dat jako aplikací založených na mikroslužbách.</span><span class="sxs-lookup"><span data-stu-id="0d592-140">In container-based deployments, this monolithic application can access the same data store as the microservices-based application.</span></span> <span data-ttu-id="0d592-141">Aplikace je nakonfigurovaná pro spuštění systému SQL Server v kontejneru spolu s monolitickými aplikacemi.</span><span class="sxs-lookup"><span data-stu-id="0d592-141">The application is configured to run SQL Server in a container alongside the monolithic application.</span></span> <span data-ttu-id="0d592-142">V produkčním prostředí SQL Server spustí na počítači s vysokou dostupností mimo hostitele Dockeru.</span><span class="sxs-lookup"><span data-stu-id="0d592-142">In a production environment, SQL Server would run on a high-availability machine, outside of the Docker host.</span></span> <span data-ttu-id="0d592-143">Pro usnadnění práce v prostředí vývoj nebo testování se doporučuje systémem SQL Server do vlastního kontejneru.</span><span class="sxs-lookup"><span data-stu-id="0d592-143">For convenience, in a development or test environment, running SQL Server in its own container is recommended.</span></span>

<span data-ttu-id="0d592-144">Počáteční sada pouze funkcí povolí procházení katalogu.</span><span class="sxs-lookup"><span data-stu-id="0d592-144">The initial feature set only enables browsing the catalog.</span></span> <span data-ttu-id="0d592-145">Aktualizace by umožňují úplná sada funkcí kontejnerizované aplikace.</span><span class="sxs-lookup"><span data-stu-id="0d592-145">Updates would enable the full feature set of the containerized application.</span></span> <span data-ttu-id="0d592-146">A další pokročilé architektura pro webové monolitické aplikace je popsána v [postupy architektury webové aplikace ASP.NET](https://aka.ms/webappebook) e kniha a související [eShopOnWeb ukázkovou aplikaci](https://aka.ms/WebAppArchitecture).</span><span class="sxs-lookup"><span data-stu-id="0d592-146">A more advanced monolithic web application architecture is described in the [ASP.NET Web Application architecture practices](https://aka.ms/webappebook) e-book and related [eShopOnWeb sample application](https://aka.ms/WebAppArchitecture).</span></span>

## <a name="docker-support"></a><span data-ttu-id="0d592-147">Podpora dockeru</span><span class="sxs-lookup"><span data-stu-id="0d592-147">Docker support</span></span>

<span data-ttu-id="0d592-148">Projekt eShopOnWeb poběží v .NET Core.</span><span class="sxs-lookup"><span data-stu-id="0d592-148">The eShopOnWeb project runs on .NET Core.</span></span> <span data-ttu-id="0d592-149">To znamená, že můžete spustit v kontejnerech založených na Linuxu nebo založené na Windows.</span><span class="sxs-lookup"><span data-stu-id="0d592-149">That means it can run in either Linux-based or Windows-based containers.</span></span> <span data-ttu-id="0d592-150">Všimněte si, že pro nasazení prostředí Docker, chcete použít stejný typ hostitele pro SQL Server.</span><span class="sxs-lookup"><span data-stu-id="0d592-150">Note that for Docker deployment, you want to use the same host type for SQL Server.</span></span> <span data-ttu-id="0d592-151">Kontejnery založené na Linuxu povolit menší nároky na místo a jsou upřednostňované.</span><span class="sxs-lookup"><span data-stu-id="0d592-151">Linux-based containers allow a smaller footprint and are preferred.</span></span>

<span data-ttu-id="0d592-152">Visual Studio poskytuje šablony projektu, který se přidá podpora pro Docker do řešení.</span><span class="sxs-lookup"><span data-stu-id="0d592-152">Visual Studio provides a project template that adds support for Docker to a solution.</span></span> <span data-ttu-id="0d592-153">Klikněte pravým tlačítkem na projekt, klikněte na tlačítko **přidat** následovaný **podporu Dockeru**.</span><span class="sxs-lookup"><span data-stu-id="0d592-153">You right-click the project, click **Add** followed by **Docker Support**.</span></span> <span data-ttu-id="0d592-154">Šablona přidá do projektu a nový soubor Dockerfile **docker-compose** projekt, který poskytuje starter *docker-compose.yml* souboru.</span><span class="sxs-lookup"><span data-stu-id="0d592-154">The template adds a Dockerfile to your project, and a new **docker-compose** project that provides a starter *docker-compose.yml* file.</span></span> <span data-ttu-id="0d592-155">Tento krok již byla provedena v projektu eShopOnWeb stáhnou z Githubu.</span><span class="sxs-lookup"><span data-stu-id="0d592-155">This step has already been done in the eShopOnWeb project downloaded from GitHub.</span></span> <span data-ttu-id="0d592-156">Uvidíte, že obsahuje řešení **eShopOnWeb** projektu a **docker-compose** projektu jak je znázorněno v obrázek 6-1.</span><span class="sxs-lookup"><span data-stu-id="0d592-156">You can see that the solution contains the **eShopOnWeb** project and the **docker-compose** project as shown in Figure 6-1.</span></span>

![](./media/image1.png)

<span data-ttu-id="0d592-157">**Obrázek 6-1**.</span><span class="sxs-lookup"><span data-stu-id="0d592-157">**Figure 6-1**.</span></span> <span data-ttu-id="0d592-158">**Docker-compose** projektu v aplikaci web jeden kontejner</span><span class="sxs-lookup"><span data-stu-id="0d592-158">The **docker-compose** project in a single-container web application</span></span>

<span data-ttu-id="0d592-159">Tyto soubory jsou standardní docker-compose soubory, které jsou konzistentní s žádným projektem Dockeru.</span><span class="sxs-lookup"><span data-stu-id="0d592-159">These files are standard docker-compose files, consistent with any Docker project.</span></span> <span data-ttu-id="0d592-160">Můžete je pomocí sady Visual Studio nebo z příkazového řádku.</span><span class="sxs-lookup"><span data-stu-id="0d592-160">You can use them with Visual Studio or from the command line.</span></span> <span data-ttu-id="0d592-161">Tato aplikace běží na .NET Core a používá kontejnery Linuxu.</span><span class="sxs-lookup"><span data-stu-id="0d592-161">This application runs on .NET Core and uses Linux containers.</span></span> <span data-ttu-id="0d592-162">Ano můžete také kódu, sestavení a ho spustit na počítači Mac nebo na počítači s Linuxem.</span><span class="sxs-lookup"><span data-stu-id="0d592-162">So, you can also code, build, and run it on a Mac or on a Linux machine.</span></span>

<span data-ttu-id="0d592-163">*Docker-compose.yml* soubor obsahuje informace o co k sestavení Image a jaké kontejnery ke spuštění.</span><span class="sxs-lookup"><span data-stu-id="0d592-163">The *docker-compose.yml* file contains information about what images to build and what containers to launch.</span></span> <span data-ttu-id="0d592-164">Tyto šablony určit způsob sestavení `eshopweb` obrázků a spuštění aplikace kontejnery.</span><span class="sxs-lookup"><span data-stu-id="0d592-164">The templates specify how to build the `eshopweb` image and launch the application’s containers.</span></span> <span data-ttu-id="0d592-165">Je třeba přidat závislost na SQL serveru zahrnutím bitovou kopii pro něj (například `mssql-server-linux`) a služby pro sql.data bitovou kopii pro sestavení a spuštění kontejneru Dockeru.</span><span class="sxs-lookup"><span data-stu-id="0d592-165">You need to add the dependency on SQL Server by including an image for it (for example, `mssql-server-linux`), and a service for the sql.data image for Docker to build and launch that container.</span></span> <span data-ttu-id="0d592-166">Tato nastavení jsou uvedeny v následujícím příkladu:</span><span class="sxs-lookup"><span data-stu-id="0d592-166">These settings are shown in the following example:</span></span>

```yml
version: '2'

services:
  eshopweb:
    image: eshop/web
    build:
    context: ./eShopWeb
    dockerfile: Dockerfile
    depends_on:
      - sql.data

  sql.data:
    image: microsoft/mssql-server-linux
```

<span data-ttu-id="0d592-167">`depends_on` – Direktiva říká Dockeru, eShopWeb image závisí na imagi sql.data.</span><span class="sxs-lookup"><span data-stu-id="0d592-167">The `depends_on` directive tells Docker that the eShopWeb image depends on the sql.data image.</span></span> <span data-ttu-id="0d592-168">Níže uvedené řádky `depends_on` jsou pokyny k sestavení image označit `sql.data` pomocí `microsoft/mssql-server-linux` bitové kopie.</span><span class="sxs-lookup"><span data-stu-id="0d592-168">The lines below `depends_on` are the instructions to build an image tagged `sql.data` using the `microsoft/mssql-server-linux` image.</span></span>

<span data-ttu-id="0d592-169">**Docker-compose** projektu zobrazí další docker-compose soubory pod hlavním *docker-compose.yml* uzel poskytují vizuální označení, že se vztahují tyto soubory.</span><span class="sxs-lookup"><span data-stu-id="0d592-169">The **docker-compose** project displays the other docker-compose files under the main *docker-compose.yml* node to provide a visual indication that these files are related.</span></span> <span data-ttu-id="0d592-170">*Docker compose override.yml* soubor obsahuje nastavení pro obě služby, jako je například připojovací řetězce a další nastavení aplikace.</span><span class="sxs-lookup"><span data-stu-id="0d592-170">The *docker-compose-override.yml* file contains settings for both services, such as connection strings and other application settings.</span></span>

<span data-ttu-id="0d592-171">Následující příklad ukazuje *docker compose.vs.debug.yml* soubor, který obsahuje nastavení používaná pro ladění v sadě Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="0d592-171">The following example shows the *docker-compose.vs.debug.yml* file, which contains settings used for debugging in Visual Studio.</span></span> <span data-ttu-id="0d592-172">V tomto souboru eshopweb image má značku dev, připojí k němu.</span><span class="sxs-lookup"><span data-stu-id="0d592-172">In that file, the eshopweb image has the dev tag appended to it.</span></span> <span data-ttu-id="0d592-173">Který pomáhá samostatný ladicí verzi Image tak, aby se nenasazují omylem informace o ladění do produkčního prostředí:</span><span class="sxs-lookup"><span data-stu-id="0d592-173">That helps separate debug from release images so that you don't accidentally deploy the debug information to a production environment:</span></span>

```yml
version: '2'

services:
  eshopweb:
    image: eshop/web:dev
    build:
    args:
    source: ${DOCKER_BUILD_SOURCE}
    environment:
      - DOTNET_USE_POLLING_FILE_WATCHER=1
    volumes:
      - ./eShopWeb:/app
      - ~/.nuget/packages:/root/.nuget/packages:ro
      - ~/clrdbg:/clrdbg:ro
    entrypoint: tail -f /dev/null
    labels:
      - "com.microsoft.visualstudio.targetoperatingsystem=linux"
```

<span data-ttu-id="0d592-174">Poslední soubor přidán *docker-compose.ci.build.yml*.</span><span class="sxs-lookup"><span data-stu-id="0d592-174">The last file added is *docker-compose.ci.build.yml*.</span></span> <span data-ttu-id="0d592-175">Tento soubor se použije z příkazového řádku pro sestavení projektu z položek konfigurace serveru.</span><span class="sxs-lookup"><span data-stu-id="0d592-175">This file would be used from the command line to build the project from a CI server.</span></span> <span data-ttu-id="0d592-176">Tento soubor compose spustí kontejner Dockeru, který sestaví Image vaše aplikace potřebuje.</span><span class="sxs-lookup"><span data-stu-id="0d592-176">This compose file starts a Docker container that builds the images needed for your application.</span></span> <span data-ttu-id="0d592-177">Následující příklad ukazuje obsah *docker-compose.ci.build.yml* souboru:</span><span class="sxs-lookup"><span data-stu-id="0d592-177">The following example shows the contents of the *docker-compose.ci.build.yml* file:</span></span>

```yml
version: '2'

services:
  ci-build:
    image: microsoft/aspnetcore-build:latest
    volumes:
      - .:/src
    working_dir: /src
  command: /bin/bash -c "dotnet restore ./eShopWeb.sln && dotnet publish  ./eShopWeb.sln -c Release -o ./obj/Docker/publish"
```

> [!NOTE]
> <span data-ttu-id="0d592-178">Od verze rozhraní .NET Core SDK 2.0 [dotnet restore](../../../core/tools/dotnet-restore.md) příkaz spustí automaticky při [dotnet publikovat](../../../core/tools/dotnet-publish.md) provádí.</span><span class="sxs-lookup"><span data-stu-id="0d592-178">Starting with .NET Core SDK 2.0, the [dotnet restore](../../../core/tools/dotnet-restore.md) command executes automatically when [dotnet publish](../../../core/tools/dotnet-publish.md) is executed.</span></span>

<span data-ttu-id="0d592-179">Všimněte si, že na obrázku je v ASP.NET Core, sestavte image.</span><span class="sxs-lookup"><span data-stu-id="0d592-179">Notice that the image is an ASP.NET Core build image.</span></span> <span data-ttu-id="0d592-180">Tento image obsahuje nástroje pro sadu SDK a sestavení k sestavení aplikace a vytvořte požadované Image.</span><span class="sxs-lookup"><span data-stu-id="0d592-180">That image includes the SDK and build tools to build your application and create the required images.</span></span> <span data-ttu-id="0d592-181">Spuštění **docker-compose** projekt pomocí tohoto souboru z této image spustí kontejner sestavení a poté sestaví image vaší aplikace v tomto kontejneru.</span><span class="sxs-lookup"><span data-stu-id="0d592-181">Running the **docker-compose** project using this file starts the build container from the image, then builds your application’s image in that container.</span></span> <span data-ttu-id="0d592-182">Můžete určit, že *docker-compose* souboru jako součást příkazového řádku pro sestavení aplikace v kontejneru Dockeru, a spusťte jej.</span><span class="sxs-lookup"><span data-stu-id="0d592-182">You specify that *docker-compose* file as part of the command line to build your application in a Docker container, then launch it.</span></span>

<span data-ttu-id="0d592-183">V sadě Visual Studio, můžete tak, že vyberete spuštění aplikace v kontejnerech Dockeru **docker-compose** projekt jako spouštěný projekt a následným stisknutím klávesy Ctrl + F5 (F5 pro ladění), jako u jakékoli jiné aplikace.</span><span class="sxs-lookup"><span data-stu-id="0d592-183">In Visual Studio, you can run your application in Docker containers by selecting the **docker-compose** project as the startup project, and then pressing Ctrl+F5 (F5 to debug), as you can with any other application.</span></span> <span data-ttu-id="0d592-184">Při spuštění **docker-compose** projektu sady Visual Studio spustí **docker-compose** pomocí *docker-compose.yml* souboru  *docker-compose.override.yml* souboru a ten příkazu docker-compose.vs.\* soubory.</span><span class="sxs-lookup"><span data-stu-id="0d592-184">When you start the **docker-compose** project, Visual Studio runs **docker-compose** using the *docker-compose.yml* file, the *docker-compose.override.yml* file, and one of the docker-compose.vs.\* files.</span></span> <span data-ttu-id="0d592-185">Po zahájení aplikace Visual Studio spustí prohlížeč pro vás.</span><span class="sxs-lookup"><span data-stu-id="0d592-185">Once the application has started, Visual Studio launches the browser for you.</span></span>

<span data-ttu-id="0d592-186">Pokud spuštění aplikace v ladicím programu sady Visual Studio připojí k běžící aplikaci v Dockeru.</span><span class="sxs-lookup"><span data-stu-id="0d592-186">If you launch the application in the debugger, Visual Studio attaches to the running application in Docker.</span></span>

## <a name="troubleshooting"></a><span data-ttu-id="0d592-187">Poradce při potížích</span><span class="sxs-lookup"><span data-stu-id="0d592-187">Troubleshooting</span></span>

<span data-ttu-id="0d592-188">Tato část popisuje několik problémů, které mohou nastat při spuštění kontejnerů místně a navrhne některé opravy.</span><span class="sxs-lookup"><span data-stu-id="0d592-188">This section describes a few issues that might arise when your run containers locally and suggests some fixes.</span></span>

### <a name="stop-docker-containers"></a><span data-ttu-id="0d592-189">Zastavit kontejnery Dockeru</span><span class="sxs-lookup"><span data-stu-id="0d592-189">Stop Docker containers</span></span>

<span data-ttu-id="0d592-190">Po spuštění kontejnerizované aplikace i nadále spouštět, i po zastavení ladění kontejnerů.</span><span class="sxs-lookup"><span data-stu-id="0d592-190">After you launch the containerized application, the containers continue to run, even after you have stopped debugging.</span></span> <span data-ttu-id="0d592-191">Můžete spustit `docker ps` příkazu z příkazového řádku zobrazíte, které kontejnery běží.</span><span class="sxs-lookup"><span data-stu-id="0d592-191">You can run the `docker ps` command from the command line to see which containers are running.</span></span> <span data-ttu-id="0d592-192">`docker stop` Příkaz zastaví spuštěný kontejner, jak je znázorněno v obrázek 6-2.</span><span class="sxs-lookup"><span data-stu-id="0d592-192">The `docker stop` command stops a running container, as shown in Figure 6-2.</span></span>

![](./media/image2.png)

<span data-ttu-id="0d592-193">**Obrázek 6 – 2**.</span><span class="sxs-lookup"><span data-stu-id="0d592-193">**Figure 6-2**.</span></span> <span data-ttu-id="0d592-194">Výpis a zastavuje kontejnery docker a docker ps zastavit příkazy rozhraní příkazového řádku</span><span class="sxs-lookup"><span data-stu-id="0d592-194">Listing and stopping containers with the docker ps and docker stop CLI commands</span></span>

<span data-ttu-id="0d592-195">Můžete potřebovat ukončené procesy při přepínání mezi různé konfigurace.</span><span class="sxs-lookup"><span data-stu-id="0d592-195">You might need to stop running processes when you switch between different configurations.</span></span> <span data-ttu-id="0d592-196">V opačném případě kontejneru, na kterém běží webová aplikace používá port, který pro vaši aplikaci (5106 v tomto příkladu).</span><span class="sxs-lookup"><span data-stu-id="0d592-196">Otherwise, the container that is running the web application is using the port for your application (5106 in this example).</span></span>

### <a name="add-docker-to-your-projects"></a><span data-ttu-id="0d592-197">Přidat do vašich projektů Dockeru</span><span class="sxs-lookup"><span data-stu-id="0d592-197">Add Docker to your projects</span></span>

<span data-ttu-id="0d592-198">Průvodce, který přidává podporu Dockeru komunikuje se spuštěným procesem Dockeru.</span><span class="sxs-lookup"><span data-stu-id="0d592-198">The wizard that adds Docker support communicates with the running Docker process.</span></span> <span data-ttu-id="0d592-199">Pokud Docker není spuštěná, když spustíte průvodce, průvodce nespustí správně.</span><span class="sxs-lookup"><span data-stu-id="0d592-199">If Docker isn't running when you start the wizard, the wizard won't run correctly.</span></span> <span data-ttu-id="0d592-200">Průvodce zkontroluje zvoleného aktuálního kontejneru pro přidání správné podpory Dockeru.</span><span class="sxs-lookup"><span data-stu-id="0d592-200">The wizard examines your current container choice to add the correct Docker support.</span></span> <span data-ttu-id="0d592-201">Přidání podpory pro kontejnery Windows, spusťte Průvodce mají Dockeru s kontejnery Windows nakonfigurovaný.</span><span class="sxs-lookup"><span data-stu-id="0d592-201">To add support for Windows Containers, run the wizard while you have Docker running with Windows Containers configured.</span></span> <span data-ttu-id="0d592-202">Přidání podpory pro Linuxové kontejnery, spusťte Průvodce mají Dockeru s kontejnery Linuxu, které jsou nakonfigurované.</span><span class="sxs-lookup"><span data-stu-id="0d592-202">To add support for Linux containers, run the wizard while you have Docker running with Linux containers configured.</span></span>

>[!div class="step-by-step"]
<span data-ttu-id="0d592-203">[Předchozí](../docker-application-development-process/docker-app-development-workflow.md)
[další](../containerize-net-framework-applications/index.md)</span><span class="sxs-lookup"><span data-stu-id="0d592-203">[Previous](../docker-application-development-process/docker-app-development-workflow.md)
[Next](../containerize-net-framework-applications/index.md)</span></span>
