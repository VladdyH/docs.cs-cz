---
title: "Stav a data v aplikacích Docker"
description: "Architektura Mikroslužeb .NET pro aplikace .NET Kontejnerizované | Stav a data v aplikacích Docker"
keywords: "Docker Mikroslužeb, ASP.NET, kontejner, SQL, CosmosDB a Docker"
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 10/18/2017
ms.prod: .net-core
ms.technology: dotnet-docker
ms.topic: article
ms.workload:
- dotnet
- dotnetcore
ms.openlocfilehash: ef11d89c39ee02d52dab29f949d1ac6be981d87f
ms.sourcegitcommit: e7f04439d78909229506b56935a1105a4149ff3d
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 12/23/2017
---
# <a name="state-and-data-in-docker-applications"></a><span data-ttu-id="f8a49-104">Stav a data v aplikacích Docker</span><span class="sxs-lookup"><span data-stu-id="f8a49-104">State and data in Docker applications</span></span>

<span data-ttu-id="f8a49-105">Ve většině případů si můžete představit kontejneru jako instance procesu.</span><span class="sxs-lookup"><span data-stu-id="f8a49-105">In most cases, you can think of a container as an instance of a process.</span></span> <span data-ttu-id="f8a49-106">Proces neudržuje trvalý stav.</span><span class="sxs-lookup"><span data-stu-id="f8a49-106">A process does not maintain persistent state.</span></span> <span data-ttu-id="f8a49-107">Při kontejner může zapsat do své místní úložiště, za předpokladu, že instance bude přibližně po neomezenou dobu bude třeba za předpokladu, že bude jedno umístění v paměti trvanlivý.</span><span class="sxs-lookup"><span data-stu-id="f8a49-107">While a container can write to its local storage, assuming that an instance will be around indefinitely would be like assuming that a single location in memory will be durable.</span></span> <span data-ttu-id="f8a49-108">Kontejner imagí, stejně jako procesy, by měl být předpokládá, že mít více instancí nebo které se budou nakonec ukončeny; Pokud jste se spravovat s nástrojem orchestrator kontejneru, by měl předpokládá, že se může získat z jednoho uzlu nebo virtuální počítač na jiný přesunout.</span><span class="sxs-lookup"><span data-stu-id="f8a49-108">Container images, like processes, should be assumed to have multiple instances or that they will eventually be killed; if they’re managed with a container orchestrator, it should be assumed that they might get moved from one node or VM to another.</span></span>

<span data-ttu-id="f8a49-109">Docker nabízí funkci s názvem *překrytí systém souborů*.</span><span class="sxs-lookup"><span data-stu-id="f8a49-109">Docker provides a feature named the *overlay file system*.</span></span> <span data-ttu-id="f8a49-110">To implementuje úlohu kopírování při zápisu, že úložiště aktualizované informace k systému souborů kořenovém kontejneru.</span><span class="sxs-lookup"><span data-stu-id="f8a49-110">This implements a copy-on-write task that stores updated information to the root file system of the container.</span></span> <span data-ttu-id="f8a49-111">Tyto informace je navíc k původní bitové kopie, na kterých je založena kontejneru.</span><span class="sxs-lookup"><span data-stu-id="f8a49-111">That information is in addition to the original image on which the container is based.</span></span> <span data-ttu-id="f8a49-112">Pokud je ze systému odstraněn kontejneru, tyto změny budou ztraceny.</span><span class="sxs-lookup"><span data-stu-id="f8a49-112">If the container is deleted from the system, those changes are lost.</span></span> <span data-ttu-id="f8a49-113">Proto i když je možné uložit stav kontejneru v rámci své místní úložiště, návrhu systému řešení by byl v konfliktu s místní návrhu kontejneru, který ve výchozím nastavení je bezstavové.</span><span class="sxs-lookup"><span data-stu-id="f8a49-113">Therefore, while it is possible to save the state of a container within its local storage, designing a system around this would conflict with the premise of container design, which by default is stateless.</span></span>

<span data-ttu-id="f8a49-114">Následující řešení se používají ke správě dat v aplikacích Docker:</span><span class="sxs-lookup"><span data-stu-id="f8a49-114">The following solutions are used to manage persistent data in Docker applications:</span></span>

-   <span data-ttu-id="f8a49-115">[Datové svazky](https://docs.docker.com/engine/tutorials/dockervolumes/) , připojit k hostiteli.</span><span class="sxs-lookup"><span data-stu-id="f8a49-115">[Data volumes](https://docs.docker.com/engine/tutorials/dockervolumes/) that mount to the host.</span></span>

-   <span data-ttu-id="f8a49-116">[Kontejnery svazků data](https://docs.docker.com/engine/tutorials/dockervolumes/#creating-and-mounting-a-data-volume-container) , poskytovat sdílené úložiště mezi kontejnery pomocí externí kontejneru.</span><span class="sxs-lookup"><span data-stu-id="f8a49-116">[Data volume containers](https://docs.docker.com/engine/tutorials/dockervolumes/#creating-and-mounting-a-data-volume-container) that provide shared storage across containers using an external container.</span></span>

-   <span data-ttu-id="f8a49-117">[Moduly plug-in svazku](https://docs.docker.com/engine/tutorials/dockervolumes/) , připojte svazky, které mají vzdálené poskytuje dlouhodobé trvalost.</span><span class="sxs-lookup"><span data-stu-id="f8a49-117">[Volume plugins](https://docs.docker.com/engine/tutorials/dockervolumes/) that mount volumes to remote services, providing long-term persistence.</span></span>

-   <span data-ttu-id="f8a49-118">[Úložiště Azure](https://docs.microsoft.com/azure/storage/), který poskytuje geograficky distribuovatelného úložiště, poskytuje dobrým řešením dlouhodobé trvalosti pro kontejnery.</span><span class="sxs-lookup"><span data-stu-id="f8a49-118">[Azure Storage](https://docs.microsoft.com/azure/storage/), which provides geo-distributable storage, providing a good long-term persistence solution for containers.</span></span>

-   <span data-ttu-id="f8a49-119">Vzdálené relační databáze jako [Azure SQL Database](https://azure.microsoft.com/services/sql-database/) nebo jako databáze NoSQL [Azure Cosmos DB](https://docs.microsoft.com/azure/cosmos-db/introduction), nebo do mezipaměti služby, jako je [Redis](https://redis.io/).</span><span class="sxs-lookup"><span data-stu-id="f8a49-119">Remote relational databases like [Azure SQL Database](https://azure.microsoft.com/services/sql-database/) or NoSQL databases like [Azure Cosmos DB](https://docs.microsoft.com/azure/cosmos-db/introduction), or cache services like [Redis](https://redis.io/).</span></span>

<span data-ttu-id="f8a49-120">Následují další podrobnosti o těchto možnostech.</span><span class="sxs-lookup"><span data-stu-id="f8a49-120">The following provides more detail about these options.</span></span>

<span data-ttu-id="f8a49-121">**Datové svazky** jsou adresáře mapovat z hostitelský operační systém na adresáře v kontejnerech.</span><span class="sxs-lookup"><span data-stu-id="f8a49-121">**Data volumes** are directories mapped from the host OS to directories in containers.</span></span> <span data-ttu-id="f8a49-122">Když kód v kontejneru má přístup k adresáři, který je ve skutečnosti přístup k adresáři na hostitelský operační systém.</span><span class="sxs-lookup"><span data-stu-id="f8a49-122">When code in the container has access to the directory, that access is actually to a directory on the host OS.</span></span> <span data-ttu-id="f8a49-123">Tento adresář není vázaný na dobu životnosti kontejneru samostatně a adresář je přístupná z kód spuštěný přímo na operační systém hostitele nebo v jiném kontejneru který mapuje stejný adresář hostitele na sebe sama.</span><span class="sxs-lookup"><span data-stu-id="f8a49-123">This directory is not tied to the lifetime of the container itself, and the directory can be accessed from code running directly on the host OS or by another container that maps the same host directory to itself.</span></span> <span data-ttu-id="f8a49-124">Proto vám datové svazky mají zachovat data nezávisle na dobu životnosti kontejneru.</span><span class="sxs-lookup"><span data-stu-id="f8a49-124">Thus, data volumes are designed to persist data independently of the life of the container.</span></span> <span data-ttu-id="f8a49-125">Pokud odstraníte kontejner nebo bitové kopie z hostitelů Docker, data uchovávané v datový svazek se neodstraní.</span><span class="sxs-lookup"><span data-stu-id="f8a49-125">If you delete a container or an image from the Docker host, the data persisted in the data volume is not deleted.</span></span> <span data-ttu-id="f8a49-126">Data na svazku je přístupná z hostitele operačního systému a.</span><span class="sxs-lookup"><span data-stu-id="f8a49-126">The data in a volume can be accessed from the host OS as well.</span></span>

<span data-ttu-id="f8a49-127">**Kontejnery svazků data** jsou vývoje regulární datové svazky.</span><span class="sxs-lookup"><span data-stu-id="f8a49-127">**Data volume containers** are an evolution of regular data volumes.</span></span> <span data-ttu-id="f8a49-128">Kontejner svazků dat je jednoduchý kontejner, který má jeden nebo více svazků dat v něm.</span><span class="sxs-lookup"><span data-stu-id="f8a49-128">A data volume container is a simple container that has one or more data volumes within it.</span></span> <span data-ttu-id="f8a49-129">Kontejner svazků dat poskytuje přístup k kontejnery z centrální přípojný bod.</span><span class="sxs-lookup"><span data-stu-id="f8a49-129">The data volume container provides access to containers from a central mount point.</span></span> <span data-ttu-id="f8a49-130">Tato metoda přístup k datům je vhodné, protože ho abstrahuje umístění původní data.</span><span class="sxs-lookup"><span data-stu-id="f8a49-130">This method of data access is convenient because it abstracts the location of the original data.</span></span> <span data-ttu-id="f8a49-131">Než tu, která je podobná regulární datový svazek, své chování, takže data přetrvají v tomto kontejneru vyhrazené nezávisle na životního cyklu aplikace kontejnerů.</span><span class="sxs-lookup"><span data-stu-id="f8a49-131">Other than that, its behavior is similar to that of a regular data volume, so data is persisted in this dedicated container independently of the lifecycle of the application’s containers.</span></span>

<span data-ttu-id="f8a49-132">Jak ukazuje obrázek 4-5, regulární Docker svazky mohou být uloženy mimo kontejnery sami, ale v rámci fyzické hranic hostitelský server nebo virtuální počítač.</span><span class="sxs-lookup"><span data-stu-id="f8a49-132">As shown in Figure 4-5, regular Docker volumes can be stored outside of the containers themselves but within the physical boundaries of the host server or VM.</span></span> <span data-ttu-id="f8a49-133">Však nelze Docker kontejnery přístup svazku z jeden hostitelský server nebo virtuální počítač do jiného.</span><span class="sxs-lookup"><span data-stu-id="f8a49-133">However, Docker containers cannot access a volume from one host server or VM to another.</span></span> <span data-ttu-id="f8a49-134">Jinými slovy tyto svazky clusteru, není možné spravovat data sdílena mezi kontejnery, které běží na různých hostitelích Docker</span><span class="sxs-lookup"><span data-stu-id="f8a49-134">In other words, with these volumes, it is not possible to manage data shared between containers that run on different Docker hosts</span></span>

![](./media/image5.png)

<span data-ttu-id="f8a49-135">**Obrázek 4 – 5**.</span><span class="sxs-lookup"><span data-stu-id="f8a49-135">**Figure 4-5**.</span></span> <span data-ttu-id="f8a49-136">Datové svazky a externí zdroje dat pro aplikace založené na kontejneru</span><span class="sxs-lookup"><span data-stu-id="f8a49-136">Data volumes and external data sources for container-based applications</span></span>

<span data-ttu-id="f8a49-137">Kromě toho když Docker kontejnery spravuje orchestrator, kontejnery může "přesunout" mezi hostiteli, v závislosti na optimalizace provádí clusteru.</span><span class="sxs-lookup"><span data-stu-id="f8a49-137">In addition, when Docker containers are managed by an orchestrator, containers might “move” between hosts, depending on the optimizations performed by the cluster.</span></span> <span data-ttu-id="f8a49-138">Proto není doporučeno, abyste používali datové svazky pro obchodní data.</span><span class="sxs-lookup"><span data-stu-id="f8a49-138">Therefore, it is not recommended that you use data volumes for business data.</span></span> <span data-ttu-id="f8a49-139">Ale jsou dobrou mechanismus pro práci s trasovací soubory dočasné soubory, nebo podobný, nebude mít vliv na konzistenci dat firmy.</span><span class="sxs-lookup"><span data-stu-id="f8a49-139">But they are a good mechanism to work with trace files, temporal files, or similar that will not impact business data consistency.</span></span>

<span data-ttu-id="f8a49-140">**Moduly plug-in svazku** jako [Flocker](https://clusterhq.com/flocker/) poskytovat přístup k datům ve všech hostitelích v clusteru.</span><span class="sxs-lookup"><span data-stu-id="f8a49-140">**Volume plugins** like [Flocker](https://clusterhq.com/flocker/) provide data access across all hosts in a cluster.</span></span> <span data-ttu-id="f8a49-141">Zatímco všechny moduly plug-in svazku vytvářejí stejně, moduly plug-in svazku obvykle poskytují externalized trvalé spolehlivé úložiště z neměnné kontejnerů.</span><span class="sxs-lookup"><span data-stu-id="f8a49-141">While not all volume plugins are created equally, volume plugins typically provide externalized persistent reliable storage from immutable containers.</span></span>

<span data-ttu-id="f8a49-142">**Vzdálené zdroje dat. a mezipaměti** nástroje, například Azure SQL Database, Azure Cosmos DB nebo vzdálené mezipaměti jako mohou být používány Redis kontejnerizované aplikace stejným způsobem jako se používají při vývoji bez kontejnery.</span><span class="sxs-lookup"><span data-stu-id="f8a49-142">**Remote data sources and cache** tools like Azure SQL Database, Azure Cosmos DB, or a remote cache like Redis can be used in containerized applications the same way they are used when developing without containers.</span></span> <span data-ttu-id="f8a49-143">Toto je Principy sloužit k ukládání dat obchodní aplikace.</span><span class="sxs-lookup"><span data-stu-id="f8a49-143">This is a proven way to store business application data.</span></span>

<span data-ttu-id="f8a49-144">**Úložiště Azure.**</span><span class="sxs-lookup"><span data-stu-id="f8a49-144">**Azure Storage.**</span></span> <span data-ttu-id="f8a49-145">Obchodní data obvykle nutné umístit do externích zdrojů nebo databáze, jako je Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="f8a49-145">Business data usually will need to be placed in external resources or databases, like Azure Storage.</span></span> <span data-ttu-id="f8a49-146">Úložiště Azure v konkrétních, poskytuje tyto služby v cloudu:</span><span class="sxs-lookup"><span data-stu-id="f8a49-146">Azure Storage, in concrete, provides the following services in the cloud:</span></span>

-   <span data-ttu-id="f8a49-147">BLOB storage ukládá nestrukturované datové objekty.</span><span class="sxs-lookup"><span data-stu-id="f8a49-147">Blob storage stores unstructured object data.</span></span> <span data-ttu-id="f8a49-148">Objekt blob mohou být jakéhokoli typu textu nebo binárních dat, například dokumentu nebo médium (soubory obrázků, audio a video).</span><span class="sxs-lookup"><span data-stu-id="f8a49-148">A blob can be any type of text or binary data, such as document or media files (images, audio, and video files).</span></span> <span data-ttu-id="f8a49-149">Úložiště objektů blob se také označuje jako úložiště objektů.</span><span class="sxs-lookup"><span data-stu-id="f8a49-149">Blob storage is also referred to as Object storage.</span></span>

-   <span data-ttu-id="f8a49-150">File storage nabízí sdílené úložiště pro starší verze aplikace pomocí standardního protokol SMB.</span><span class="sxs-lookup"><span data-stu-id="f8a49-150">File storage offers shared storage for legacy applications using standard SMB protocol.</span></span> <span data-ttu-id="f8a49-151">Cloudových služeb a virtuálních počítačích Azure můžou sdílet souborová data mezi komponentami aplikace přes sdílené složky.</span><span class="sxs-lookup"><span data-stu-id="f8a49-151">Azure virtual machines and cloud services can share file data across application components via mounted shares.</span></span> <span data-ttu-id="f8a49-152">Místní aplikace můžou k souborovým datům ve sdílené složce prostřednictvím REST API služby File.</span><span class="sxs-lookup"><span data-stu-id="f8a49-152">On-premises applications can access file data in a share via the File service REST API.</span></span>

-   <span data-ttu-id="f8a49-153">Table storage ukládá strukturované datové sady.</span><span class="sxs-lookup"><span data-stu-id="f8a49-153">Table storage stores structured datasets.</span></span> <span data-ttu-id="f8a49-154">Úložiště Table je úložiště dat klíč atribut typu NoSQL, která umožňuje rychlý vývoj a rychlý přístup k velkým objemům dat.</span><span class="sxs-lookup"><span data-stu-id="f8a49-154">Table storage is a NoSQL key-attribute data store, which allows rapid development and fast access to large quantities of data.</span></span>

<span data-ttu-id="f8a49-155">**Relační databáze a databáze NoSQL.**</span><span class="sxs-lookup"><span data-stu-id="f8a49-155">**Relational databases and NoSQL databases.**</span></span> <span data-ttu-id="f8a49-156">Existuje mnoho možností pro externí databáze, z relační databáze jako jsou databáze systému SQL Server, PostgreSQL, Oracle nebo NoSQL Azure Cosmos DB, MongoDB, atd. Tyto databáze nejsou chystáte vysvětlit v rámci tohoto průvodce vzhledem k tomu, že jsou v úplně jiných předmětu.</span><span class="sxs-lookup"><span data-stu-id="f8a49-156">There are many choices for external databases, from relational databases like SQL Server, PostgreSQL, Oracle, or NoSQL databases like Azure Cosmos DB, MongoDB, etc. These databases are not going to be explained as part of this guide since they are in a completely different subject.</span></span>


>[!div class="step-by-step"]
<span data-ttu-id="f8a49-157">[Předchozí] (containerize-monolithic-applications.md) [Další] (service-oriented-architecture.md)</span><span class="sxs-lookup"><span data-stu-id="f8a49-157">[Previous] (containerize-monolithic-applications.md) [Next] (service-oriented-architecture.md)</span></span>
