---
title: Brána rozhraní API vzor versus přímou komunikaci klienta mikroslužbu
description: Architektura Mikroslužeb .NET pro aplikace .NET Kontejnerizované | Brána rozhraní API vzor versus přímou komunikaci klienta mikroslužbu
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 06/07/2018
ms.openlocfilehash: 83ec054239814ba20ebeec1f3d50b9f7e6dcdd87
ms.sourcegitcommit: 979597cd8055534b63d2c6ee8322938a27d0c87b
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 06/29/2018
ms.locfileid: "37106275"
---
# <a name="the-api-gateway-pattern-versus-the-direct-client-to-microservice-communication"></a><span data-ttu-id="81428-103">Brána rozhraní API vzor versus přímou komunikaci klienta mikroslužbu</span><span class="sxs-lookup"><span data-stu-id="81428-103">The API Gateway pattern versus the Direct client-to-microservice communication</span></span>

<span data-ttu-id="81428-104">V architektuře mikroslužeb každý mikroslužbu zpřístupňuje řadu (obvykle) fine‑grained koncové body.</span><span class="sxs-lookup"><span data-stu-id="81428-104">In a microservices architecture, each microservice exposes a set of (typically) fine‑grained endpoints.</span></span> <span data-ttu-id="81428-105">Tato skutečnost může mít vliv client‑to‑microservice komunikaci, jak je popsáno v této části.</span><span class="sxs-lookup"><span data-stu-id="81428-105">This fact can impact the client‑to‑microservice communication, as explained in this section.</span></span>

## <a name="direct-client-to-microservice-communication"></a><span data-ttu-id="81428-106">Přímé komunikaci klienta mikroslužbu</span><span class="sxs-lookup"><span data-stu-id="81428-106">Direct client-to-microservice communication</span></span>

<span data-ttu-id="81428-107">Možných přístupů je používat architekturu přímou komunikaci klienta mikroslužby.</span><span class="sxs-lookup"><span data-stu-id="81428-107">A possible approach is to use a direct client-to-microservice communication architecture.</span></span> <span data-ttu-id="81428-108">V tomto přístupu klientskou aplikaci můžete provést požadavky přímo některé mikroslužeb, jak ukazuje obrázek 4 – 12.</span><span class="sxs-lookup"><span data-stu-id="81428-108">In this approach, a client app can make requests directly to some of the microservices, as shown in Figure 4-12.</span></span>

![Diagram zobrazující přímou komunikaci klienta mikroslužbu architektura](./media/image12.png)

<span data-ttu-id="81428-110">**Obrázek 4 – 12**.</span><span class="sxs-lookup"><span data-stu-id="81428-110">**Figure 4-12**.</span></span> <span data-ttu-id="81428-111">Pomocí architektury přímou komunikaci klienta mikroslužbu</span><span class="sxs-lookup"><span data-stu-id="81428-111">Using a direct client-to-microservice communication architecture</span></span>

<span data-ttu-id="81428-112">V tomto přístupu.</span><span class="sxs-lookup"><span data-stu-id="81428-112">In this approach.</span></span> <span data-ttu-id="81428-113">Každý mikroslužbu má veřejný koncový bod, někdy s jiný port TCP pro každou mikroslužby.</span><span class="sxs-lookup"><span data-stu-id="81428-113">each microservice has a public endpoint, sometimes with a different TCP port for each microservice.</span></span> <span data-ttu-id="81428-114">Příklad adresy URL pro konkrétní službu, může být následující adresu URL v Azure:</span><span class="sxs-lookup"><span data-stu-id="81428-114">An example of a URL for a particular service could be the following URL in Azure:</span></span>

<http://eshoponcontainers.westus.cloudapp.azure.com:88/>

<span data-ttu-id="81428-115">V produkčním prostředí založené na clusteru, která umožní mapování adresy URL pro vyrovnávání zatížení použít v clusteru, který naopak rozděluje požadavky na mikroslužeb.</span><span class="sxs-lookup"><span data-stu-id="81428-115">In a production environment based on a cluster, that URL would map to the load balancer used in the cluster, which in turn distributes the requests across the microservices.</span></span> <span data-ttu-id="81428-116">V produkčním prostředí, můžete mít aplikaci doručení řadiče (ADC) jako [Azure Application Gateway](https://docs.microsoft.com/azure/application-gateway/application-gateway-introduction) mezi vaší mikroslužeb a Internetem.</span><span class="sxs-lookup"><span data-stu-id="81428-116">In production environments, you could have an Application Delivery Controller (ADC) like [Azure Application Gateway](https://docs.microsoft.com/azure/application-gateway/application-gateway-introduction) between your microservices and the Internet.</span></span> <span data-ttu-id="81428-117">To funguje jako transparentní vrstvy, která pouze provede Vyrovnávání zatížení, ale zabezpečuje vašim službám prostřednictvím nabídky ukončení protokolu SSL.</span><span class="sxs-lookup"><span data-stu-id="81428-117">This acts as a transparent tier that not only performs load balancing, but secures your services by offering SSL termination.</span></span> <span data-ttu-id="81428-118">To zvyšuje zatížení hostitele, protože snižování zátěže ukončení protokolu SSL náročná na prostředky procesoru a další směrování dávky do služby Azure Application Gateway.</span><span class="sxs-lookup"><span data-stu-id="81428-118">This improves the load of your hosts by offloading CPU-intensive SSL termination and other routing duties to the Azure Application Gateway.</span></span> <span data-ttu-id="81428-119">Nástroj pro vyrovnávání zatížení a ADC jsou v každém případě transparentní z hlediska of Architektura logické aplikace.</span><span class="sxs-lookup"><span data-stu-id="81428-119">In any case, a load balancer and ADC are transparent from a logical application architecture point of view.</span></span>

<span data-ttu-id="81428-120">Architektura přímou komunikaci klienta mikroslužbu může být vhodné dostatečně pro malá na základě mikroslužbu aplikace, zejména pokud je aplikace klienta webové serverové aplikace jako aplikace rozhraní ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="81428-120">A direct client-to-microservice communication architecture could be good enough for a small microservice-based application, especially if the client app is a server-side web application like an ASP.NET MVC app.</span></span> <span data-ttu-id="81428-121">Při vytváření velké a komplexní na základě mikroslužbu aplikací (například při zpracování desítek mikroslužbu typy) a zejména v případě, že jsou klientské aplikace vzdálené mobilní aplikace nebo SPA webových aplikací, ale tento přístup otočená několik problémů.</span><span class="sxs-lookup"><span data-stu-id="81428-121">However, when you build large and complex microservice-based applications (for example, when handling dozens of microservice types), and especially when the client apps are remote mobile apps or SPA web applications, that approach faces a few issues.</span></span>

<span data-ttu-id="81428-122">Při vývoji rozsáhlé aplikace založené na mikroslužeb, zvažte následující otázky:</span><span class="sxs-lookup"><span data-stu-id="81428-122">Consider the following questions when developing a large application based on microservices:</span></span>

- <span data-ttu-id="81428-123">*Jak aplikace klienta minimalizovat počet žádostí pro back-end a snížit chatty komunikaci s více mikroslužeb?*</span><span class="sxs-lookup"><span data-stu-id="81428-123">*How can client apps minimize the number of requests to the backend and reduce chatty communication to multiple microservices?*</span></span>

<span data-ttu-id="81428-124">Interakci s více mikroslužeb k vytvoření jedné obrazovce uživatelského rozhraní zvyšuje počet zpátečních cest přes Internet.</span><span class="sxs-lookup"><span data-stu-id="81428-124">Interacting with multiple microservices to build a single UI screen increases the number of round trips across the Internet.</span></span> <span data-ttu-id="81428-125">Tím se zvyšuje latenci a složitost na straně uživatelského rozhraní.</span><span class="sxs-lookup"><span data-stu-id="81428-125">This increases latency and complexity on the UI side.</span></span> <span data-ttu-id="81428-126">Odpovědi v ideálním případě by měl být efektivně agregován, na straně serveru.</span><span class="sxs-lookup"><span data-stu-id="81428-126">Ideally, responses should be efficiently aggregated in the server side.</span></span> <span data-ttu-id="81428-127">To snižuje latence, protože data na více místech vraťte paralelně a některé uživatelského rozhraní můžete zobrazit data, jakmile je připraven.</span><span class="sxs-lookup"><span data-stu-id="81428-127">This reduces latency, since multiple pieces of data come back in parallel and some UI can show data as soon as it is ready.</span></span>

- <span data-ttu-id="81428-128">*Jak může zpracovat mezi vyjímání otázky, jako je například autorizace, transformace dat a dynamické žádost o odeslání?*</span><span class="sxs-lookup"><span data-stu-id="81428-128">*How can you handle cross-cutting concerns such as authorization, data transformations, and dynamic request dispatching?*</span></span>

<span data-ttu-id="81428-129">Implementace zabezpečení a aspekty mezi vyjímání jako zabezpečení a autorizace na každý mikroslužbu může vyžadovat významné vývoj úsilí.</span><span class="sxs-lookup"><span data-stu-id="81428-129">Implementing security and cross-cutting concerns like security and authorization on every microservice can require significant development effort.</span></span> <span data-ttu-id="81428-130">Možných přístupů je mít těchto služeb v rámci hostitelů Docker nebo interní clusteru, které nemají přímý přístup k nim z vnějšku a implementovat tyto otázky mezi vyjímání v centrálním umístění, jako je brána rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="81428-130">A possible approach is to have those services within the Docker host or internal cluster to restrict direct access to them from the outside and to implement those cross-cutting concerns in a centralized place, like an API Gateway.</span></span>

- <span data-ttu-id="81428-131">*Jak může klientské aplikace komunikovat s služby, které používají protokoly Internetu popisný?*</span><span class="sxs-lookup"><span data-stu-id="81428-131">*How can client apps communicate with services that use non-Internet-friendly protocols?*</span></span>

<span data-ttu-id="81428-132">Protokoly používá na straně serveru (například AMQP nebo binární protokoly) nepodporuje obvykle klientské aplikace.</span><span class="sxs-lookup"><span data-stu-id="81428-132">Protocols used on the server side (like AMQP or binary protocols) are usually not supported in client apps.</span></span> <span data-ttu-id="81428-133">Proto musí být požadavky provést prostřednictvím protokolů jako protokolu HTTP nebo HTTPS a převedeny na ostatní protokoly později.</span><span class="sxs-lookup"><span data-stu-id="81428-133">Therefore, requests must be performed through protocols like HTTP/HTTPS and translated to the other protocols afterwards.</span></span> <span data-ttu-id="81428-134">A *man-in-the-middle* postup může pomoci v této situaci.</span><span class="sxs-lookup"><span data-stu-id="81428-134">A *man-in-the-middle* approach can help in this situation.</span></span>

- <span data-ttu-id="81428-135">*Jak budete utvářejí průčelí za zejména provedené pro mobilní aplikace?*</span><span class="sxs-lookup"><span data-stu-id="81428-135">*How can you shape a façade especially made for mobile apps?*</span></span>

<span data-ttu-id="81428-136">Rozhraní API více mikroslužeb nemusí dobře navrženy pro potřeby různých klientských aplikací.</span><span class="sxs-lookup"><span data-stu-id="81428-136">The API of multiple microservices might not be well designed for the needs of different client applications.</span></span> <span data-ttu-id="81428-137">Například potřebám mobilní aplikace může být jiná než potřebám webové aplikace.</span><span class="sxs-lookup"><span data-stu-id="81428-137">For instance, the needs of a mobile app might be different than the needs of a web app.</span></span> <span data-ttu-id="81428-138">Pro mobilní aplikace možná budete muset i další optimalizace tak, aby data odpovědí může být efektivnější.</span><span class="sxs-lookup"><span data-stu-id="81428-138">For mobile apps, you might need to optimize even further so that data responses can be more efficient.</span></span> <span data-ttu-id="81428-139">Můžete to třeba udělat tak, že agregaci dat z více mikroslužeb a vrací jednu sadu dat a někdy odstranění všech dat v odpovědi, která není potřeba mobilní aplikace.</span><span class="sxs-lookup"><span data-stu-id="81428-139">You might do this by aggregating data from multiple microservices and returning a single set of data, and sometimes eliminating any data in the response that is not needed by the mobile app.</span></span> <span data-ttu-id="81428-140">A samozřejmě může komprimovat data.</span><span class="sxs-lookup"><span data-stu-id="81428-140">And, of course, you might compress that data.</span></span> <span data-ttu-id="81428-141">Znovu průčelí za nebo API mezi mobilní aplikaci a mikroslužeb může být vhodné pro tento scénář.</span><span class="sxs-lookup"><span data-stu-id="81428-141">Again, a façade or API in between the mobile app and the microservices can be convenient for this scenario.</span></span>

## <a name="why-consider-api-gateways-instead-of-direct-client-to-microservice-communication"></a><span data-ttu-id="81428-142">Proč místo přímé komunikaci klienta mikroslužby zvažte brány rozhraní API</span><span class="sxs-lookup"><span data-stu-id="81428-142">Why consider API Gateways instead of direct client-to-microservice communication</span></span>

<span data-ttu-id="81428-143">V architektuře mikroslužeb klientské aplikace obvykle nutné využívat funkce z více než jeden mikroslužby.</span><span class="sxs-lookup"><span data-stu-id="81428-143">In a microservices architecture, the client apps usually need to consume functionality from more than one microservice.</span></span> <span data-ttu-id="81428-144">V případě, že využití provádí přímo, klient musí pro zpracování více volání do koncových bodů mikroslužby.</span><span class="sxs-lookup"><span data-stu-id="81428-144">If that consumption is performed directly, the client needs to handle multiple calls to microservice endpoints.</span></span> <span data-ttu-id="81428-145">Co se stane při zpracovaní aplikace a byly zavedeny nové mikroslužeb nebo aktualizaci existujícího mikroslužeb?</span><span class="sxs-lookup"><span data-stu-id="81428-145">What happens when the application evolves and new microservices are introduced or existing microservices are updated?</span></span> <span data-ttu-id="81428-146">Pokud aplikace obsahuje mnoho mikroslužeb, může být zpracování tolika koncových bodů z klientských aplikací při důvodů.</span><span class="sxs-lookup"><span data-stu-id="81428-146">If your application has many microservices, handling so many endpoints from the client apps can be a nightmare.</span></span> <span data-ttu-id="81428-147">Vzhledem k tomu, že klientská aplikace by se lze připojit do těchto interní koncových bodů, mikroslužeb vyvíjející se v budoucnu může způsobit vysoký dopad pro klientské aplikace.</span><span class="sxs-lookup"><span data-stu-id="81428-147">Since the client app would be coupled to those internal endpoints, evolving the microservices in the future can cause high impact for the client apps.</span></span>

<span data-ttu-id="81428-148">Proto pokročilou úroveň nebo vrstvě dereference (brány) může být velmi vhodné pro aplikace založené na mikroslužby.</span><span class="sxs-lookup"><span data-stu-id="81428-148">Therefore, having an intermediate level or tier of indirection (Gateway) can be very convenient for microservice-based applications.</span></span> <span data-ttu-id="81428-149">Pokud nemáte brány rozhraní API, klientské aplikace musí odesílat požadavky přímo mikroslužeb a který vyvolá problémy, jako je například následující problémy:</span><span class="sxs-lookup"><span data-stu-id="81428-149">If you don't have API Gateways, the client apps must send requests directly to the microservices and that raises problems, such as the following issues:</span></span>

- <span data-ttu-id="81428-150">**Vazební**: bez vzoru Brána rozhraní API jsou pro interní mikroslužeb doplněná klientské aplikace.</span><span class="sxs-lookup"><span data-stu-id="81428-150">**Coupling**: Without the API Gateway pattern, the client apps are coupled to the internal microservices.</span></span> <span data-ttu-id="81428-151">Musíte vědět, jak se více oblastí aplikace rozloží v mikroslužeb klientské aplikace.</span><span class="sxs-lookup"><span data-stu-id="81428-151">The client apps need to know how the multiple areas of the application are decomposed in microservices.</span></span> <span data-ttu-id="81428-152">Když vyvíjejí a refaktoring interní mikroslužeb, vliv na tyto akce údržby velmi chybně protože způsobí nejnovější změny do klientské aplikace z důvodu přímý odkaz na interní mikroslužeb z klienta aplikace.</span><span class="sxs-lookup"><span data-stu-id="81428-152">When evolving and refactoring the internal microservices, those actions impact maintenance pretty badly because they cause breaking changes to the client apps due to the direct reference to the internal microservices from the client apps.</span></span> <span data-ttu-id="81428-153">Klientské aplikace je nutné aktualizovat často, což těžší vyvíjí řešení.</span><span class="sxs-lookup"><span data-stu-id="81428-153">Client apps need to be updated frequently, making the solution harder to evolve.</span></span>

- <span data-ttu-id="81428-154">**Moc velký počet zpátečních cest**: jednu stránku nebo obrazovku v aplikaci klienta může vyžadovat několik volání na více služeb.</span><span class="sxs-lookup"><span data-stu-id="81428-154">**Too many round trips**: A single page/screen in the client app might require several calls to multiple services.</span></span> <span data-ttu-id="81428-155">Aby výsledek v síti více zaokrouhlí odezvy mezi klientem a serverem, přidání významné latence.</span><span class="sxs-lookup"><span data-stu-id="81428-155">That can result in multiple network round trips between the client and the server, adding significant latency.</span></span> <span data-ttu-id="81428-156">Agregace, které jsou zpracovány v pokročilou úroveň může zvýšit výkon a uživatelské prostředí pro klientské aplikace.</span><span class="sxs-lookup"><span data-stu-id="81428-156">Aggregation handled in an intermediate level could improve the performance and user experience for the client app.</span></span>

- <span data-ttu-id="81428-157">**Problémy se zabezpečením**: bez bránu, musí být všechny mikroslužeb zpřístupněny "externí světa", provedení prostor pro útoky na větší než skryjete interní mikroslužeb používá není přímo klientských aplikací.</span><span class="sxs-lookup"><span data-stu-id="81428-157">**Security issues**: Without a gateway, all the microservices must be exposed to the “external world”, making the attack surface larger than if you hide internal microservices not directly used by the client apps.</span></span> <span data-ttu-id="81428-158">Tím menší je prostor pro útoky, tím víc zabezpečit vaše aplikace může být.</span><span class="sxs-lookup"><span data-stu-id="81428-158">The smaller the attack surface is, the more secure your application can be.</span></span>

- <span data-ttu-id="81428-159">**Mezi vyjímání obavy**: každý veřejně publikovaných mikroslužbu musí zpracovávat obavy jako je například autorizace, SSL, atd. V mnoha situacích může tyto otázky zpracovávat, v jedné vrstvě, jsou zjednodušené interní mikroslužeb.</span><span class="sxs-lookup"><span data-stu-id="81428-159">**Cross-cutting concerns**: Each publicly published microservice must handle concerns such as authorization, SSL, etc. In many situations, those concerns could be handled in a single tier so the internal microservices are simplified.</span></span>

## <a name="what-is-the-api-gateway-pattern"></a><span data-ttu-id="81428-160">Co je vzor Brána rozhraní API?</span><span class="sxs-lookup"><span data-stu-id="81428-160">What is the API Gateway pattern?</span></span>

<span data-ttu-id="81428-161">Při návrhu a vytvářet velká nebo složitá na základě mikroslužbu aplikace s více klientských aplikací, může být dobrým přístupem vzít v úvahu [Brána rozhraní API](https://microservices.io/patterns/apigateway.html).</span><span class="sxs-lookup"><span data-stu-id="81428-161">When you design and build large or complex microservice-based applications with multiple client apps, a good approach to consider can be an [API Gateway](https://microservices.io/patterns/apigateway.html).</span></span> <span data-ttu-id="81428-162">Toto je služba, která poskytuje jeden vstupní bod pro určité skupiny mikroslužeb.</span><span class="sxs-lookup"><span data-stu-id="81428-162">This is a service that provides a single entry point for certain groups of microservices.</span></span> <span data-ttu-id="81428-163">Je podobná [Facade vzor](https://en.wikipedia.org/wiki/Facade_pattern) z object‑oriented návrhu, ale v takovém případě ji je součástí distribuovaného systému.</span><span class="sxs-lookup"><span data-stu-id="81428-163">It's similar to the [Facade pattern](https://en.wikipedia.org/wiki/Facade_pattern) from object‑oriented design, but in this case, it's part of a distributed system.</span></span>
<span data-ttu-id="81428-164">Vzor Brána rozhraní API se také někdy označuje jako "back-end pro front-endové" [(BFF)](https://samnewman.io/patterns/architectural/bff/) vzhledem k tomu, že vytvoříte při přemýšlení o potřebám klientské aplikace.</span><span class="sxs-lookup"><span data-stu-id="81428-164">The API Gateway pattern is also sometimes known as the “backend for frontend” [(BFF)](https://samnewman.io/patterns/architectural/bff/) because you build it while thinking about the needs of the client app.</span></span>

<span data-ttu-id="81428-165">Brána rozhraní API je proto umístěna mezi klientské aplikace a mikroslužeb.</span><span class="sxs-lookup"><span data-stu-id="81428-165">Therefore, the API gateway sits between the client apps and the microservices.</span></span> <span data-ttu-id="81428-166">Slouží jako reverzní proxy server, směrování požadavky od klientů ke službám.</span><span class="sxs-lookup"><span data-stu-id="81428-166">It acts as a reverse proxy, routing requests from clients to services.</span></span> <span data-ttu-id="81428-167">Také můžete získat další vyjímání mezi funkce, například ověřování, ukončení protokolu SSL a mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="81428-167">It can also provide additional cross-cutting features such as authentication, SSL termination, and cache.</span></span>

<span data-ttu-id="81428-168">Obrázek 4 – 13 ukazuje, jak můžete začlenit vlastní Brána rozhraní API do zjednodušené architektura založená na mikroslužbu s několika mikroslužeb.</span><span class="sxs-lookup"><span data-stu-id="81428-168">Figure 4-13 shows how a custom API Gateway can fit into a simplified microservice-based architecture with just a few microservices.</span></span>

![Diagram znázorňující, že bránu rozhraní API implementovaný jako vlastní služby](./media/image13.png)

<span data-ttu-id="81428-170">**Obrázek 4 – 13**.</span><span class="sxs-lookup"><span data-stu-id="81428-170">**Figure 4-13**.</span></span> <span data-ttu-id="81428-171">Pomocí služby API Gateway implementovaný jako vlastní služby</span><span class="sxs-lookup"><span data-stu-id="81428-171">Using an API Gateway implemented as a custom service</span></span>

<span data-ttu-id="81428-172">V tomto příkladu by být bránou rozhraní API implementovaný jako vlastní ASP.NET Core tomuto webovému hostiteli služby spuštěné jako kontejner.</span><span class="sxs-lookup"><span data-stu-id="81428-172">In this example, the API Gateway would be implemented as a custom ASP.NET Core WebHost service running as a container.</span></span>

<span data-ttu-id="81428-173">Je důležité, abyste měli na očích, v tomto diagramu, budete používat jeden vlastní Brána rozhraní API služby čelí více a jiné klientské aplikace.</span><span class="sxs-lookup"><span data-stu-id="81428-173">It is important to highlight that in that diagram, you would be using a single custom API Gateway service facing multiple and different client apps.</span></span> <span data-ttu-id="81428-174">Aby fakt může být důležité riziko, protože brána rozhraní API služby bude rostoucí a vyvíjející se na základě mnoho různých požadavků z klientské aplikace.</span><span class="sxs-lookup"><span data-stu-id="81428-174">That fact can be an important risk because your API Gateway service will be growing and evolving based on many different requirements from the client apps.</span></span> <span data-ttu-id="81428-175">Nakonec se z důvodu těchto různé potřeby bude opakovaném a efektivně může být poměrně podobná monolitický aplikace nebo monolitický služby.</span><span class="sxs-lookup"><span data-stu-id="81428-175">Eventually, it will be bloated because of those different needs and effectively it could be pretty similar to a monolithic application or monolithic service.</span></span> <span data-ttu-id="81428-176">To je proto velmi mnohem se doporučuje Brána rozhraní API v několika služeb nebo více menší API bran, jeden pro každý typ faktor formuláře aplikace klienta, například rozdělení.</span><span class="sxs-lookup"><span data-stu-id="81428-176">That is why it is very much recommended to split the API Gateway in multiple services or multiple smaller API Gateways, one per client app form-factor type, for instance.</span></span>

<span data-ttu-id="81428-177">Budete muset buďte opatrní při implementaci vzoru Brána rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="81428-177">You need to be careful when implementing the API Gateway pattern.</span></span> <span data-ttu-id="81428-178">Obvykle je vhodné jedinou Brána rozhraní API agregování všechny interní mikroslužeb vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="81428-178">Usually it isn’t a good idea to have a single API Gateway aggregating all the internal microservices of your application.</span></span> <span data-ttu-id="81428-179">Pokud ano, funguje jako monolitický agregátoru nebo orchestrator a spojovacích všechny mikroslužeb porušuje mikroslužbu nezávislé.</span><span class="sxs-lookup"><span data-stu-id="81428-179">If it does, it acts as a monolithic aggregator or orchestrator and violates microservice autonomy by coupling all the microservices.</span></span>

<span data-ttu-id="81428-180">Proto brány rozhraní API by měl být oddělené na základě obchodní hranice a klientské aplikace a není act jako jeden agregátor pro všechny interní mikroslužeb.</span><span class="sxs-lookup"><span data-stu-id="81428-180">Therefore, the API Gateways should be segregated based on business boundaries and the client apps and not act as a single aggregator for all the internal microservices.</span></span>

<span data-ttu-id="81428-181">Při rozdělování vrstvě Brána rozhraní API do více bran rozhraní API, pokud vaše aplikace obsahuje více klientských aplikací, které se dají na primární pivot při identifikaci více typů brány rozhraní API, tak, aby může mít různé průčelí za pro potřeby každou klientskou aplikaci.</span><span class="sxs-lookup"><span data-stu-id="81428-181">When splitting the API Gateway tier into multiple API Gateways, if your application has multiple client apps, that can be a primary pivot when identifying the multiple API Gateways types, so that you can have a different façade for the needs of each client app.</span></span> <span data-ttu-id="81428-182">Tento případ je vzor s názvem "Back-end pro Frontend" ([BFF](http://samnewman.io/patterns/architectural/bff/)) tam, kde každý Brána rozhraní API můžete zadat různé API přizpůsobit pro každý typ klienta aplikace, které by mohly mít i na základě faktor formuláře klienta implementací konkrétní adaptér kód který dole volá více interní mikroslužeb, jak je znázorněno na následujícím obrázku:</span><span class="sxs-lookup"><span data-stu-id="81428-182">This case is a pattern named “Backend for Frontend” ([BFF](http://samnewman.io/patterns/architectural/bff/)) where each API Gateway can provide a different API tailored for each client app type, possibly even based on the client form factor by implementing specific adapter code which underneath calls multiple internal microservices, as shown in the following image:</span></span>

![Diagram zobrazující více bran vlastní rozhraní API](./media/image13.1.png)

<span data-ttu-id="81428-184">**Obrázek 4-13.1**.</span><span class="sxs-lookup"><span data-stu-id="81428-184">**Figure 4-13.1**.</span></span> <span data-ttu-id="81428-185">Použití více bran vlastní rozhraní API</span><span class="sxs-lookup"><span data-stu-id="81428-185">Using multiple custom API Gateways</span></span>

<span data-ttu-id="81428-186">Předchozí obrázek ukazuje zjednodušení architektury s více bran podrobných rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="81428-186">The previous image shows a simplified architecture with multiple fine-grained API Gateways.</span></span> <span data-ttu-id="81428-187">V takovém případě jsou hranice identifikovat pro každý Brána rozhraní API založené výhradně na "back-end pro Frontend" ([BFF](http://samnewman.io/patterns/architectural/bff/)) vzor, proto na základě jenom na rozhraní API potřebné pro klientské aplikace.</span><span class="sxs-lookup"><span data-stu-id="81428-187">In this case, the boundaries identified for each API Gateway are based purely on the “Backend for Frontend” ([BFF](http://samnewman.io/patterns/architectural/bff/)) pattern, hence based just on the API needed per client app.</span></span> <span data-ttu-id="81428-188">Ale v větší aplikace by měl taky přejít na další a vytvořit další rozhraní API brány založené na hranicích obchodní jako druhý pivot návrhu.</span><span class="sxs-lookup"><span data-stu-id="81428-188">But in larger applications you should also go further and create additional API Gateways based on business boundaries as a second design pivot.</span></span>

## <a name="main-features-in-the-api-gateway-pattern"></a><span data-ttu-id="81428-189">Hlavní funkce ve vzoru Brána rozhraní API</span><span class="sxs-lookup"><span data-stu-id="81428-189">Main features in the API Gateway pattern</span></span>

<span data-ttu-id="81428-190">Bránu rozhraní API nabízí více funkcí.</span><span class="sxs-lookup"><span data-stu-id="81428-190">An API Gateway can offer multiple features.</span></span> <span data-ttu-id="81428-191">V závislosti na produktu může nabízet bohatší nebo jednodušší funkce, ale většina důležité a základní funkce pro všechny brány rozhraní API jsou tyto vzory návrhu:</span><span class="sxs-lookup"><span data-stu-id="81428-191">Depending on the product it might offer richer or simpler features, however, the most important and foundational features for any API Gateway are the following design patterns:</span></span>

<span data-ttu-id="81428-192">**Reverse server proxy nebo brány směrování**.</span><span class="sxs-lookup"><span data-stu-id="81428-192">**Reverse proxy or gateway routing**.</span></span> <span data-ttu-id="81428-193">Brána rozhraní API nabízí reverzní proxy server pro přesměrování nebo směrování požadavků (vrstvy 7 směrování, obvykle požadavky Http) ke koncovým bodům interní mikroslužeb.</span><span class="sxs-lookup"><span data-stu-id="81428-193">The API Gateway offers a reverse proxy to redirect or route requests (layer 7 routing, usually Http requests) to the endpoints of the internal microservices.</span></span> <span data-ttu-id="81428-194">Brána poskytuje jeden koncový bod nebo adresa URL pro klienta, aplikací a interně mapuje požadavky na skupinu interní mikroslužeb.</span><span class="sxs-lookup"><span data-stu-id="81428-194">The gateway provides a single endpoint or URL for the client apps and then internally maps the requests to a group of internal microservices.</span></span> <span data-ttu-id="81428-195">Tato funkce směrování vám pomůže oddělit klientských aplikací z mikroslužeb je však také poměrně vhodné při modernizing monolitický rozhraní API pomocí uložený bránou rozhraní API mezi monolitický rozhraní API a klientské aplikace, pak je můžete přidat nové rozhraní API jako nový mikroslužeb nadále pomocí starší verze rozhraní API monolitický, dokud ho je rozdělená do mnoha mikroslužeb v budoucnu.</span><span class="sxs-lookup"><span data-stu-id="81428-195">This routing feature helps to decouple the client apps from the microservices but it is also pretty convenient when modernizing a monolithic API by sitting the API Gateway in between the monolithic API and the client apps, then you can add new APIs as new microservices while still using the legacy monolithic API until it is split into many microservices in the future.</span></span> <span data-ttu-id="81428-196">Z důvodu bránou rozhraní API klienta aplikace nebude Všimněte si, pokud rozhraní API používá jsou implementované jako interní mikroslužeb nebo monolitický rozhraní API a je důležité, když vyvíjejí a refaktoring monolitický rozhraní API do mikroslužeb, díky bránou rozhraní API směrování , nebude mít vliv klientských aplikací s všechny změny identifikátoru URI.</span><span class="sxs-lookup"><span data-stu-id="81428-196">Because of the API Gateway, the client apps won’t notice if the APIs being used are implemented as internal microservices or a monolithic API and more importantly, when evolving and refactoring the monolithic API into microservices, thanks to the API Gateway routing, client apps won’t be impacted with any URI change.</span></span>

<span data-ttu-id="81428-197">Další informace najdete v tématu [brány směrování vzor](https://docs.microsoft.com/azure/architecture/patterns/gateway-routing).</span><span class="sxs-lookup"><span data-stu-id="81428-197">For more information, see [Gateway routing pattern](https://docs.microsoft.com/azure/architecture/patterns/gateway-routing).</span></span>

<span data-ttu-id="81428-198">**Požadavky agregace**.</span><span class="sxs-lookup"><span data-stu-id="81428-198">**Requests aggregation**.</span></span> <span data-ttu-id="81428-199">Jako součást vzoru brány můžete agregovat více žádostí klienta (obvykle požadavků Http) cílení na více interní mikroslužeb do požadavek jednoho klienta.</span><span class="sxs-lookup"><span data-stu-id="81428-199">As part of the gateway pattern you can aggregate multiple client requests (usually Http requests) targeting multiple internal microservices into a single client request.</span></span> <span data-ttu-id="81428-200">Tento vzor je zvlášť vhodné, pokud na stránce nebo obrazovky klienta potřebuje informace z několika mikroslužeb.</span><span class="sxs-lookup"><span data-stu-id="81428-200">This pattern is especially convenient when a client page/screen needs information from several microservices.</span></span> <span data-ttu-id="81428-201">Klientská aplikace s tímto přístupem odešle jednu žádost bránou rozhraní API, která odešle zprávu několik požadavků na interní mikroslužeb a agreguje výsledky a odešle všechno zpět do klientské aplikace.</span><span class="sxs-lookup"><span data-stu-id="81428-201">With this approach, the client app sends a single request to the API Gateway that dispatches several requests to the internal microservices and then aggregates the results and sends everything back to the client app.</span></span> <span data-ttu-id="81428-202">Hlavní výhody a cílem tohoto vzoru návrhu je ke snížení chattiness mezi klientské aplikace a rozhraní API, back-end, který je obzvláště důležité pro vzdálené aplikace mimo datového centra, kde mikroslužeb live, jako je mobilní aplikace nebo požadavky přicházející z SPA aplikací, pocházet z jazyka Javascript v prohlížečích vzdáleného klienta.</span><span class="sxs-lookup"><span data-stu-id="81428-202">The main benefit and goal of this design pattern is to reduce chattiness between the client apps and the backend API, which is especially important for remote apps out of the datacenter where the microservices live, like mobile apps or requests coming from SPA apps that come from Javascript in client remote browsers.</span></span> <span data-ttu-id="81428-203">Pro provedení žádosti v prostředí serveru (jako jsou webové aplikace ASP.NET MVC základní) regulární webové aplikace není tento vzor tak důležité, protože latence je velmi mnohem menší než pro aplikace vzdáleného klienta.</span><span class="sxs-lookup"><span data-stu-id="81428-203">For regular web apps performing the requests in the server environment (like an ASP.NET Core MVC web app), this pattern is not so important as the latency is very much smaller than for remote client apps.</span></span>

<span data-ttu-id="81428-204">V závislosti na produkt Brána rozhraní API, který používáte může být schopni provést tato agregace.</span><span class="sxs-lookup"><span data-stu-id="81428-204">Depending on the API Gateway product you use, it might be able to perform this aggregation.</span></span> <span data-ttu-id="81428-205">V mnoha případech je však flexibilnější vytvoření agregace mikroslužeb v oboru bránou rozhraní API, můžete definovat agregace v kódu (to znamená, kód C#).</span><span class="sxs-lookup"><span data-stu-id="81428-205">However, in many cases it's more flexible to create aggregation microservices under the scope of the API Gateway, so you define the aggregation in code (that is, C# code).</span></span>

<span data-ttu-id="81428-206">Další informace najdete v tématu [brány agregace vzor](https://docs.microsoft.com/azure/architecture/patterns/gateway-aggregation).</span><span class="sxs-lookup"><span data-stu-id="81428-206">For more information, see [Gateway aggregation pattern](https://docs.microsoft.com/azure/architecture/patterns/gateway-aggregation).</span></span>

<span data-ttu-id="81428-207">**Mezi vyjímání obavy nebo snižování zátěže brány**.</span><span class="sxs-lookup"><span data-stu-id="81428-207">**Cross-cutting concerns or gateway offloading**.</span></span> <span data-ttu-id="81428-208">V závislosti na funkce, které nabízí každý produkt Brána rozhraní API může převzít funkci z jednotlivých mikroslužeb k bráně, kterou zjednodušuje provádění jednotlivých mikroslužbu tím, že konsolidují mezi vyjímání obavy do jedné vrstvy.</span><span class="sxs-lookup"><span data-stu-id="81428-208">Depending on the features offered by each API Gateway product, you can offload functionality from individual microservices to the gateway, which simplifies the implementation of each microservice by consolidating cross-cutting concerns into one tier.</span></span> <span data-ttu-id="81428-209">To je zvlášť vhodné pro speciální funkce, které může být složité implementace správně v každé interní mikroslužbu, jako jsou následující funkce:</span><span class="sxs-lookup"><span data-stu-id="81428-209">This is especially convenient for specialized features that can be complex to implement properly in every internal microservice, such as the following functionality:</span></span>

- <span data-ttu-id="81428-210">Ověřování a autorizace</span><span class="sxs-lookup"><span data-stu-id="81428-210">Authentication and authorization</span></span>
- <span data-ttu-id="81428-211">Integrace služby zjišťování</span><span class="sxs-lookup"><span data-stu-id="81428-211">Service discovery integration</span></span>
- <span data-ttu-id="81428-212">Ukládání odpovědí do mezipaměti</span><span class="sxs-lookup"><span data-stu-id="81428-212">Response caching</span></span>
- <span data-ttu-id="81428-213">Opakujte zásady, jistič a technologie QoS</span><span class="sxs-lookup"><span data-stu-id="81428-213">Retry policies, circuit breaker, and QoS</span></span>
- <span data-ttu-id="81428-214">Omezení rychlosti a omezování</span><span class="sxs-lookup"><span data-stu-id="81428-214">Rate limiting and throttling</span></span>
- <span data-ttu-id="81428-215">Vyrovnávání zatížení</span><span class="sxs-lookup"><span data-stu-id="81428-215">Load balancing</span></span>
- <span data-ttu-id="81428-216">Protokolování, trasování, korelace</span><span class="sxs-lookup"><span data-stu-id="81428-216">Logging, tracing, correlation</span></span>
- <span data-ttu-id="81428-217">Záhlaví, řetězce dotazu a transformaci deklarací identity</span><span class="sxs-lookup"><span data-stu-id="81428-217">Headers, query strings, and claims transformation</span></span>
- <span data-ttu-id="81428-218">Vytvoření seznamu povolených IP</span><span class="sxs-lookup"><span data-stu-id="81428-218">IP whitelisting</span></span>

<span data-ttu-id="81428-219">Další informace najdete v tématu [brány snižování zátěže vzor](https://docs.microsoft.com/azure/architecture/patterns/gateway-offloading).</span><span class="sxs-lookup"><span data-stu-id="81428-219">For more information, see [Gateway offloading pattern](https://docs.microsoft.com/azure/architecture/patterns/gateway-offloading).</span></span>

## <a name="using-products-with-api-gateway-features"></a><span data-ttu-id="81428-220">Produkty pomocí funkce Brána rozhraní API</span><span class="sxs-lookup"><span data-stu-id="81428-220">Using products with API Gateway features</span></span>

<span data-ttu-id="81428-221">Může být mnoho další otázky mezi vyjímání nabízené produkty brány rozhraní API v závislosti na každou implementaci.</span><span class="sxs-lookup"><span data-stu-id="81428-221">There can be many more cross-cutting concerns offered by the API Gateways products depending on each implementation.</span></span> <span data-ttu-id="81428-222">Například [Azure API Management](https://azure.microsoft.com/services/api-management/) (jak je znázorněno v obrázek 4-14) nejen řeší potřeb Brána rozhraní API, ale poskytuje funkce, jako je shromažďování přehledy z vašich rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="81428-222">For instance, [Azure API Management](https://azure.microsoft.com/services/api-management/) (as shown in Figure 4-14) not only solves your API Gateway needs but provides features like gathering insights from your APIs.</span></span> <span data-ttu-id="81428-223">Pokud používáte do řešení pro správu rozhraní API, bránu rozhraní API je pouze součástí v rámci tohoto řešení pro správu úplné rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="81428-223">If you are using an API management solution, an API Gateway is only a component within that full API management solution.</span></span>

![Diagram zobrazující Brána rozhraní API s architekturou Azure API management](./media/image14.png)

<span data-ttu-id="81428-225">**Obrázek 4-14**.</span><span class="sxs-lookup"><span data-stu-id="81428-225">**Figure 4-14**.</span></span> <span data-ttu-id="81428-226">Pro bránu rozhraní API pomocí Azure API Management</span><span class="sxs-lookup"><span data-stu-id="81428-226">Using Azure API Management for your API Gateway</span></span>

<span data-ttu-id="81428-227">V takovém případě při používání produktu, jako je Azure API Management, fakt, že můžete mít jeden Brána rozhraní API není tak rizikové, protože tyto druhy brány rozhraní API jsou "užší", což znamená, že nebudete implementovat vlastní C# kód, který by mohl vyvíjet monolitický komponenta.</span><span class="sxs-lookup"><span data-stu-id="81428-227">In this case, when using a product like Azure API Management, the fact that you might have a single API Gateway is not so risky because these kinds of API Gateways are "thinner", meaning that you don't implement custom C# code that could evolve towards a monolithic component.</span></span>

<span data-ttu-id="81428-228">Brána rozhraní API produkty obvykle fungují jako reverzní proxy server pro příchozí komunikaci, kde je můžete také filtrovat rozhraní API z interní mikroslužeb plus autorizace provádí publikovaných rozhraní API v této jedné úrovni.</span><span class="sxs-lookup"><span data-stu-id="81428-228">The API Gateway products usually act like a reverse proxy for ingress communication, where you can also filter the APIs from the internal microservices plus apply authorization to the published APIs in this single tier.</span></span>

<span data-ttu-id="81428-229">Pomocí API Management systému nápovědy k dispozici statistiky získat představu o tom, jak jsou používány vaše rozhraní API a jak jsou provádění.</span><span class="sxs-lookup"><span data-stu-id="81428-229">The insights available from an API Management system help you get an understanding of how your APIs are being used and how they are performing.</span></span> <span data-ttu-id="81428-230">Je to tak, že umožňují zobrazit téměř sestavy analýzy v reálném čase a identifikaci trendů, které může mít vliv na vaši firmu.</span><span class="sxs-lookup"><span data-stu-id="81428-230">They do this by letting you view near real-time analytics reports and identifying trends that might impact your business.</span></span> <span data-ttu-id="81428-231">Plus může mít protokoly o žádosti a odpovědi aktivity pro další analýzu online a offline.</span><span class="sxs-lookup"><span data-stu-id="81428-231">Plus, you can have logs about request and response activity for further online and offline analysis.</span></span>

<span data-ttu-id="81428-232">S Azure API Management můžete zabezpečit vaše rozhraní API pomocí klíče, token a filtrování protokolu IP.</span><span class="sxs-lookup"><span data-stu-id="81428-232">With Azure API Management, you can secure your APIs using a key, a token, and IP filtering.</span></span> <span data-ttu-id="81428-233">Tyto funkce umožňují vynutit flexibilní a podrobných kvóty a omezení přenosové rychlosti, upravit tvar a chování vaše rozhraní API pomocí zásad a zlepšují výkon při ukládání odpovědí do mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="81428-233">These features let you enforce flexible and fine-grained quotas and rate limits, modify the shape and behavior of your APIs using policies, and improve performance with response caching.</span></span>

<span data-ttu-id="81428-234">V této příručce a referenční dokumentace ukázkovou aplikaci (eShopOnContainers) architektura je omezený na jednodušší a vlastní kontejnerizované architektura s cílem zaměřit na prostý kontejnery bez použití PaaS produkty, jako je Azure API Management.</span><span class="sxs-lookup"><span data-stu-id="81428-234">In this guide and the reference sample application (eShopOnContainers), the architecture is limited to a simpler and custom-made containerized architecture in order to focus on plain containers without using PaaS products like Azure API Management.</span></span> <span data-ttu-id="81428-235">Ale pro velké aplikace na základě mikroslužbu, které jsou nasazeny do Microsoft Azure, doporučujeme, abyste vyhodnotit Azure API Management jako základ pro vaše rozhraní API brány v produkčním prostředí.</span><span class="sxs-lookup"><span data-stu-id="81428-235">But for large microservice-based applications that are deployed into Microsoft Azure, we encourage you to evaluate Azure API Management as the base for your API Gateways in production.</span></span>

<span data-ttu-id="81428-236">**Ocelot.**</span><span class="sxs-lookup"><span data-stu-id="81428-236">**Ocelot.**</span></span> <span data-ttu-id="81428-237">Pro jednodušší přístupy lehké Brána rozhraní API jako Ocelot se doporučuje.</span><span class="sxs-lookup"><span data-stu-id="81428-237">For simpler approaches, a lightweight API Gateway like Ocelot is recommended.</span></span> <span data-ttu-id="81428-238">[Ocelot](https://github.com/ThreeMammals/Ocelot) otevřeným zdrojem brána založená na .NET Core API zejména přišla pro architekturu mikroslužeb, vyžadující jednotná body vstupu v jejich systému.</span><span class="sxs-lookup"><span data-stu-id="81428-238">[Ocelot](https://github.com/ThreeMammals/Ocelot) is an open-source .NET Core-based API Gateway especially made for microservices architecture that need unified points of entry into their system.</span></span> <span data-ttu-id="81428-239">Je jednoduché, rychlá a škálovatelná a poskytuje směrování a ověřování mezi řadu dalších funkcí.</span><span class="sxs-lookup"><span data-stu-id="81428-239">It's lightweight, fast, scalable and provides routing and authentication among many other features.</span></span>

<span data-ttu-id="81428-240">Hlavním důvodem, proč se v použil Ocelot [eShopOnContainers odkazovat aplikace](https://github.com/dotnet-architecture/eShopOnContainers) totiž Ocelot je .NET Core jednoduché rozhraní API bránu, kterou můžete nasadit do stejné prostředí nasazení aplikace, které nasazujete mikroslužeb/kontejnerů, jako je například hostitelů Docker, Kubernetes, Service Fabric, atd. A vzhledem k tomu, že je založena na .NET Core, je díky tomu můžete nasadit na systému Linux nebo Windows napříč platformami.</span><span class="sxs-lookup"><span data-stu-id="81428-240">The main reason why Ocelot was used in the [eShopOnContainers reference application](https://github.com/dotnet-architecture/eShopOnContainers) is because Ocelot is a .NET Core lightweight API Gateway that you can deploy into the same application deployment environment where you're deploying your microservices/containers, such as a Docker Host, Kubernetes, Service Fabric, etc. And since it's based on .NET Core, it's cross-platform allowing you to deploy on Linux or Windows.</span></span>

<span data-ttu-id="81428-241">Předchozích diagramech zobrazuje vlastní rozhraní API Gateway spuštěná v kontejnerech přesněji jsou, jak můžete také spustit Ocelot v kontejneru a aplikace založené na mikroslužby.</span><span class="sxs-lookup"><span data-stu-id="81428-241">The previous diagrams showing custom API Gateways running in containers are precisely how you can also run Ocelot in a container and microservice-based application.</span></span>

<span data-ttu-id="81428-242">Kromě toho existuje mnoho dalších produktů na trhu nabídky brány rozhraní API funkce, jako je Apigee, Kong, MuleSoft, WSO2, a další produkty jako Linkerd a Istio služby OK sítě příchozího řadiče funkce.</span><span class="sxs-lookup"><span data-stu-id="81428-242">In addition, there are many other products in the market offering API Gateways features, such as Apigee, Kong, MuleSoft, WSO2, and other products like Linkerd and Istio for service mesh ingress controller features.</span></span>

<span data-ttu-id="81428-243">Po počáteční architektura a vzory vysvětlení části Další části popisují, jak implementovat rozhraní API brány s [Ocelot](https://github.com/ThreeMammals/Ocelot).</span><span class="sxs-lookup"><span data-stu-id="81428-243">After the initial architecture and patterns explanation sections, the next sections explain how to implement API Gateways with [Ocelot](https://github.com/ThreeMammals/Ocelot).</span></span>

## <a name="drawbacks-of-the-api-gateway-pattern"></a><span data-ttu-id="81428-244">Nevýhody vzoru Brána rozhraní API</span><span class="sxs-lookup"><span data-stu-id="81428-244">Drawbacks of the API Gateway pattern</span></span>

- <span data-ttu-id="81428-245">Nejdůležitější nevýhodou je, že při implementaci bránu rozhraní API se spojovacím této vrstvě s interní mikroslužeb.</span><span class="sxs-lookup"><span data-stu-id="81428-245">The most important drawback is that when you implement an API Gateway, you're coupling that tier with the internal microservices.</span></span> <span data-ttu-id="81428-246">Párování jako to může způsobit vážné problémy pro aplikaci.</span><span class="sxs-lookup"><span data-stu-id="81428-246">Coupling like this might introduce serious difficulties for your application.</span></span> <span data-ttu-id="81428-247">Vaster od Clemense architekti na tým Azure Service Bus, odkazuje na tato potenciální potíže jako "nové ESB" v "[zasílání zpráv a Mikroslužeb](https://www.youtube.com/watch?v=rXi5CLjIQ9k)" relace v GOTO 2016.</span><span class="sxs-lookup"><span data-stu-id="81428-247">Clemens Vaster, architect at the Azure Service Bus team, refers to this potential difficulty as “the new ESB” in the "[Messaging and Microservices](https://www.youtube.com/watch?v=rXi5CLjIQ9k)" session at GOTO 2016.</span></span>

- <span data-ttu-id="81428-248">Brána rozhraní API mikroslužeb pomocí vytvoří další možné jediný bod selhání.</span><span class="sxs-lookup"><span data-stu-id="81428-248">Using a microservices API Gateway creates an additional possible single point of failure.</span></span>

- <span data-ttu-id="81428-249">Bránu rozhraní API můžete zavést prodloužení doby odezvy z důvodu další síťové volání.</span><span class="sxs-lookup"><span data-stu-id="81428-249">An API Gateway can introduce increased response time due to the additional network call.</span></span> <span data-ttu-id="81428-250">Toto volání navíc má však obvykle menší dopad, než by byl klient rozhraní, která je příliš chatty přímo volání interní mikroslužeb.</span><span class="sxs-lookup"><span data-stu-id="81428-250">However, this extra call usually has less impact than having a client interface that is too chatty directly calling the internal microservices.</span></span>

- <span data-ttu-id="81428-251">Pokud není škálovat na více systémů správně, bránou rozhraní API se může stát úzkým místem.</span><span class="sxs-lookup"><span data-stu-id="81428-251">If not scaled out properly, the API Gateway can become a bottleneck.</span></span>

- <span data-ttu-id="81428-252">Bránu rozhraní API vyžaduje další vývoj náklady a budoucí údržby, pokud obsahuje vlastní logiky a agregace dat.</span><span class="sxs-lookup"><span data-stu-id="81428-252">An API Gateway requires additional development cost and future maintenance if it includes custom logic and data aggregation.</span></span> <span data-ttu-id="81428-253">Vývojáři musí aktualizovat bránou rozhraní API tak, aby získal každý mikroslužbu koncové body.</span><span class="sxs-lookup"><span data-stu-id="81428-253">Developers must update the API Gateway in order to expose each microservice’s endpoints.</span></span> <span data-ttu-id="81428-254">Implementace změny v interní mikroslužeb kromě toho může způsobit změny kódu na úrovni Brána rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="81428-254">Moreover, implementation changes in the internal microservices might cause code changes at the API Gateway level.</span></span> <span data-ttu-id="81428-255">Ale pokud brána rozhraní API právě aplikuje zabezpečení, protokolování a správa verzí (stejně jako při použití Azure API Management), nemusí tato náklady na vývoj pro další použití.</span><span class="sxs-lookup"><span data-stu-id="81428-255">However, if the API Gateway is just applying security, logging, and versioning (as when using Azure API Management), this additional development cost might not apply.</span></span>

- <span data-ttu-id="81428-256">Pokud brána rozhraní API je vyvinuté jeden tým, může být úzkým místem vývoj.</span><span class="sxs-lookup"><span data-stu-id="81428-256">If the API Gateway is developed by a single team, there can be a development bottleneck.</span></span> <span data-ttu-id="81428-257">To je další důvod, proč je vhodnější je několik pokutu podrobných API brány, které reagují na požadavky jiného klienta.</span><span class="sxs-lookup"><span data-stu-id="81428-257">This is another reason why a better approach is to have several fined-grained API Gateways that respond to different client needs.</span></span> <span data-ttu-id="81428-258">Brána rozhraní API může také oddělit interně do několika oblastem nebo vrstvy, které jsou vlastněny různé týmy pracující na interní mikroslužeb.</span><span class="sxs-lookup"><span data-stu-id="81428-258">You could also segregate the API Gateway internally into multiple areas or layers that are owned by the different teams working on the internal microservices.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="81428-259">Další zdroje</span><span class="sxs-lookup"><span data-stu-id="81428-259">Additional resources</span></span>

- <span data-ttu-id="81428-260">**Charlese Ryšánková. Vzor: Brána rozhraní API / back-end pro front-endu** [*https://microservices.io/patterns/apigateway.html*](https://microservices.io/patterns/apigateway.html)</span><span class="sxs-lookup"><span data-stu-id="81428-260">**Charles Richardson. Pattern: API Gateway / Backend for Front-End** [*https://microservices.io/patterns/apigateway.html*](https://microservices.io/patterns/apigateway.html)</span></span>

- <span data-ttu-id="81428-261">**Brána rozhraní API vzor** [*https://docs.microsoft.com/azure/architecture/microservices/gateway*](https://docs.microsoft.com/azure/architecture/microservices/gateway)</span><span class="sxs-lookup"><span data-stu-id="81428-261">**API Gateway pattern** [*https://docs.microsoft.com/azure/architecture/microservices/gateway*](https://docs.microsoft.com/azure/architecture/microservices/gateway)</span></span>

- <span data-ttu-id="81428-262">**Agregace a složení vzor** [*http://microservices.io/patterns/data/api-composition.html*](http://microservices.io/patterns/data/api-composition.html)</span><span class="sxs-lookup"><span data-stu-id="81428-262">**Aggregation and composition pattern** [*http://microservices.io/patterns/data/api-composition.html*](http://microservices.io/patterns/data/api-composition.html)</span></span>

- <span data-ttu-id="81428-263">**Azure API Management** [*https://azure.microsoft.com/services/api-management/*](https://azure.microsoft.com/services/api-management/)</span><span class="sxs-lookup"><span data-stu-id="81428-263">**Azure API Management** [*https://azure.microsoft.com/services/api-management/*](https://azure.microsoft.com/services/api-management/)</span></span>

- <span data-ttu-id="81428-264">**Udi Dahan. Složení orientované na služby**\\</span><span class="sxs-lookup"><span data-stu-id="81428-264">**Udi Dahan. Service-Oriented Composition**\\</span></span>
    [*http://udidahan.com/2014/07/30/service-oriented-composition-with-video/*](http://udidahan.com/2014/07/30/service-oriented-composition-with-video/)

- <span data-ttu-id="81428-265">**Od Clemense Vasters. Zasílání zpráv a Mikroslužeb v GOTO 2016** (video)   [*https://www.youtube.com/watch?v=rXi5CLjIQ9k*](https://www.youtube.com/watch?v=rXi5CLjIQ9k)</span><span class="sxs-lookup"><span data-stu-id="81428-265">**Clemens Vasters. Messaging and Microservices at GOTO 2016** (video)   [*https://www.youtube.com/watch?v=rXi5CLjIQ9k*](https://www.youtube.com/watch?v=rXi5CLjIQ9k)</span></span>

>[!div class="step-by-step"]
<span data-ttu-id="81428-266">[Předchozí](identify-microservice-domain-model-boundaries.md)
[další](communication-in-microservice-architecture.md)</span><span class="sxs-lookup"><span data-stu-id="81428-266">[Previous](identify-microservice-domain-model-boundaries.md)
[Next](communication-in-microservice-architecture.md)</span></span>
