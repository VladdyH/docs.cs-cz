---
title: "Přímé komunikaci klienta mikroslužbu versus vzoru Brána rozhraní API"
description: "Architektura Mikroslužeb .NET pro aplikace .NET Kontejnerizované | Přímé komunikaci klienta mikroslužbu versus vzoru Brána rozhraní API"
keywords: "Docker Mikroslužeb, ASP.NET, kontejner, brána rozhraní API"
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 10/18/2017
ms.prod: .net-core
ms.technology: dotnet-docker
ms.topic: article
ms.openlocfilehash: c8227ec47888c7cf361f34c4c85a09c0666f886e
ms.sourcegitcommit: c2e216692ef7576a213ae16af2377cd98d1a67fa
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/22/2017
---
# <a name="direct-client-to-microservice-communication-versus-the-api-gateway-pattern"></a><span data-ttu-id="7d3b0-104">Přímé komunikaci klienta mikroslužbu versus vzoru Brána rozhraní API</span><span class="sxs-lookup"><span data-stu-id="7d3b0-104">Direct client-to-microservice communication versus the API Gateway pattern</span></span>

<span data-ttu-id="7d3b0-105">V architektuře mikroslužeb každý mikroslužbu zpřístupňuje řadu (obvykle) fine‑grained koncové body.</span><span class="sxs-lookup"><span data-stu-id="7d3b0-105">In a microservices architecture, each microservice exposes a set of (typically) fine‑grained endpoints.</span></span> <span data-ttu-id="7d3b0-106">Tato skutečnost může mít vliv client‑to‑microservice komunikaci, jak je popsáno v této části.</span><span class="sxs-lookup"><span data-stu-id="7d3b0-106">This fact can impact the client‑to‑microservice communication, as explained in this section.</span></span>

## <a name="direct-client-to-microservice-communication"></a><span data-ttu-id="7d3b0-107">Přímé komunikaci klienta mikroslužbu</span><span class="sxs-lookup"><span data-stu-id="7d3b0-107">Direct client-to-microservice communication</span></span>

<span data-ttu-id="7d3b0-108">Možných přístupů je používat architekturu přímou komunikaci klienta mikroslužby.</span><span class="sxs-lookup"><span data-stu-id="7d3b0-108">A possible approach is to use a direct client-to-microservice communication architecture.</span></span> <span data-ttu-id="7d3b0-109">V tomto přístupu klientskou aplikaci můžete provést požadavky přímo některé mikroslužeb, jak ukazuje obrázek 4 – 12.</span><span class="sxs-lookup"><span data-stu-id="7d3b0-109">In this approach, a client app can make requests directly to some of the microservices, as shown in Figure 4-12.</span></span>

![](./media/image12.png)

<span data-ttu-id="7d3b0-110">**Obrázek 4 – 12**.</span><span class="sxs-lookup"><span data-stu-id="7d3b0-110">**Figure 4-12**.</span></span> <span data-ttu-id="7d3b0-111">Pomocí architektury přímou komunikaci klienta mikroslužbu</span><span class="sxs-lookup"><span data-stu-id="7d3b0-111">Using a direct client-to-microservice communication architecture</span></span>

<span data-ttu-id="7d3b0-112">V tomto přístupu.</span><span class="sxs-lookup"><span data-stu-id="7d3b0-112">In this approach.</span></span> <span data-ttu-id="7d3b0-113">Každý mikroslužbu má veřejný koncový bod, někdy s jiný port TCP pro každou mikroslužby.</span><span class="sxs-lookup"><span data-stu-id="7d3b0-113">each microservice has a public endpoint, sometimes with a different TCP port for each microservice.</span></span> <span data-ttu-id="7d3b0-114">Příklad adresy URL pro konkrétní službu, může být následující adresu URL v Azure:</span><span class="sxs-lookup"><span data-stu-id="7d3b0-114">An example of a URL for a particular service could be the following URL in Azure:</span></span>

<span data-ttu-id="7d3b0-115"><http://eshoponcontainers.westus.cloudapp.Azure.com:88 /></span><span class="sxs-lookup"><span data-stu-id="7d3b0-115"><http://eshoponcontainers.westus.cloudapp.azure.com:88/></span></span>

<span data-ttu-id="7d3b0-116">V produkčním prostředí založené na clusteru, která umožní mapování adresy URL pro vyrovnávání zatížení použít v clusteru, který naopak rozděluje požadavky na mikroslužeb.</span><span class="sxs-lookup"><span data-stu-id="7d3b0-116">In a production environment based on a cluster, that URL would map to the load balancer used in the cluster, which in turn distributes the requests across the microservices.</span></span> <span data-ttu-id="7d3b0-117">V produkčním prostředí, můžete mít aplikaci doručení řadiče (ADC) jako [Azure Application Gateway](https://docs.microsoft.com/azure/application-gateway/application-gateway-introduction) mezi vaší mikroslužeb a Internetem.</span><span class="sxs-lookup"><span data-stu-id="7d3b0-117">In production environments, you could have an Application Delivery Controller (ADC) like [Azure Application Gateway](https://docs.microsoft.com/azure/application-gateway/application-gateway-introduction) between your microservices and the Internet.</span></span> <span data-ttu-id="7d3b0-118">To funguje jako transparentní vrstvy, která pouze provede Vyrovnávání zatížení, ale zabezpečuje vašim službám prostřednictvím nabídky ukončení protokolu SSL.</span><span class="sxs-lookup"><span data-stu-id="7d3b0-118">This acts as a transparent tier that not only performs load balancing, but secures your services by offering SSL termination.</span></span> <span data-ttu-id="7d3b0-119">To zvyšuje zatížení hostitele, protože snižování zátěže ukončení protokolu SSL náročná na prostředky procesoru a další směrování dávky do služby Azure Application Gateway.</span><span class="sxs-lookup"><span data-stu-id="7d3b0-119">This improves the load of your hosts by offloading CPU-intensive SSL termination and other routing duties to the Azure Application Gateway.</span></span> <span data-ttu-id="7d3b0-120">Nástroj pro vyrovnávání zatížení a ADC jsou v každém případě transparentní z hlediska of Architektura logické aplikace.</span><span class="sxs-lookup"><span data-stu-id="7d3b0-120">In any case, a load balancer and ADC are transparent from a logical application architecture point of view.</span></span>

<span data-ttu-id="7d3b0-121">Architektura přímou komunikaci klienta mikroslužbu může být vhodné dostatečně pro malá na základě mikroslužbu aplikace, zejména pokud je aplikace klienta webové serverové aplikace jako aplikace rozhraní ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="7d3b0-121">A direct client-to-microservice communication architecture could be good enough for a small microservice-based application, especially if the client app is a server-side web application like an ASP.NET MVC app.</span></span> <span data-ttu-id="7d3b0-122">Při vytváření velké a komplexní na základě mikroslužbu aplikací (například při zpracování desítek mikroslužbu typy) a zejména v případě, že jsou klientské aplikace vzdálené mobilní aplikace nebo SPA webových aplikací, ale tento přístup otočená několik problémů.</span><span class="sxs-lookup"><span data-stu-id="7d3b0-122">However, when you build large and complex microservice-based applications (for example, when handling dozens of microservice types), and especially when the client apps are remote mobile apps or SPA web applications, that approach faces a few issues.</span></span>

<span data-ttu-id="7d3b0-123">Při vývoji rozsáhlé aplikace založené na mikroslužeb, zvažte následující otázky:</span><span class="sxs-lookup"><span data-stu-id="7d3b0-123">Consider the following questions when developing a large application based on microservices:</span></span>

-   <span data-ttu-id="7d3b0-124">*Jak aplikace klienta minimalizovat počet žádostí pro back-end a snížit chatty komunikaci s více mikroslužeb?*</span><span class="sxs-lookup"><span data-stu-id="7d3b0-124">*How can client apps minimize the number of requests to the backend and reduce chatty communication to multiple microservices?*</span></span>

<span data-ttu-id="7d3b0-125">Interakci s více mikroslužeb k vytvoření jedné obrazovce uživatelského rozhraní zvyšuje počet zbytečné komunikace přes Internet.</span><span class="sxs-lookup"><span data-stu-id="7d3b0-125">Interacting with multiple microservices to build a single UI screen increases the number of roundtrips across the Internet.</span></span> <span data-ttu-id="7d3b0-126">Tím se zvyšuje latenci a složitost na straně uživatelského rozhraní.</span><span class="sxs-lookup"><span data-stu-id="7d3b0-126">This increases latency and complexity on the UI side.</span></span> <span data-ttu-id="7d3b0-127">V ideálním případě odpovědí by měl být efektivně agregován v na straně serveru – tím se snižuje latence, protože data na více místech vraťte paralelně a některé uživatelského rozhraní můžete zobrazit data, jakmile je připraven.</span><span class="sxs-lookup"><span data-stu-id="7d3b0-127">Ideally, responses should be efficiently aggregated in the server side—this reduces latency, since multiple pieces of data come back in parallel and some UI can show data as soon as it is ready.</span></span>

-   <span data-ttu-id="7d3b0-128">*Jak může zpracovat mezi vyjímání otázky, jako je například autorizace, transformace dat a dynamické žádost o odeslání?*</span><span class="sxs-lookup"><span data-stu-id="7d3b0-128">*How can you handle cross-cutting concerns such as authorization, data transformations, and dynamic request dispatching?*</span></span>

<span data-ttu-id="7d3b0-129">Implementace zabezpečení a aspekty mezi vyjímání jako zabezpečení a autorizace na každý mikroslužbu může vyžadovat významné vývoj úsilí.</span><span class="sxs-lookup"><span data-stu-id="7d3b0-129">Implementing security and cross-cutting concerns like security and authorization on every microservice can require significant development effort.</span></span> <span data-ttu-id="7d3b0-130">Možných přístupů je mít těchto služeb v rámci hostitelů Docker nebo interní clusteru, aby bylo možné omezit přímý přístup k nim z vnějšku a implementovat tyto otázky mezi vyjímání v centrálním umístění, jako je brána rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="7d3b0-130">A possible approach is to have those services within the Docker host or internal cluster, in order to restrict direct access to them from the outside, and to implement those cross-cutting concerns in a centralized place, like an API Gateway.</span></span>

-   <span data-ttu-id="7d3b0-131">*Jak může klientské aplikace komunikovat s služby, které používají protokoly Internetu popisný?*</span><span class="sxs-lookup"><span data-stu-id="7d3b0-131">*How can client apps communicate with services that use non-Internet-friendly protocols?*</span></span>

<span data-ttu-id="7d3b0-132">Protokoly používá na straně serveru (například AMQP nebo binární protokoly) nepodporuje obvykle klientské aplikace.</span><span class="sxs-lookup"><span data-stu-id="7d3b0-132">Protocols used on the server side (like AMQP or binary protocols) are usually not supported in client apps.</span></span> <span data-ttu-id="7d3b0-133">Proto musí být požadavky provést prostřednictvím protokolů jako protokolu HTTP nebo HTTPS a převedeny na ostatní protokoly později.</span><span class="sxs-lookup"><span data-stu-id="7d3b0-133">Therefore, requests must be performed through protocols like HTTP/HTTPS and translated to the other protocols afterwards.</span></span> <span data-ttu-id="7d3b0-134">A *man-in-the-middle* postup může pomoci v této situaci.</span><span class="sxs-lookup"><span data-stu-id="7d3b0-134">A *man-in-the-middle* approach can help in this situation.</span></span>

-   <span data-ttu-id="7d3b0-135">*Jak budete utvářejí průčelí za zejména provedené pro mobilní aplikace?*</span><span class="sxs-lookup"><span data-stu-id="7d3b0-135">*How can you shape a façade especially made for mobile apps?*</span></span>

<span data-ttu-id="7d3b0-136">Rozhraní API více mikroslužeb nemusí dobře navrženy pro potřeby různých klientských aplikací.</span><span class="sxs-lookup"><span data-stu-id="7d3b0-136">The API of multiple microservices might not be well designed for the needs of different client applications.</span></span> <span data-ttu-id="7d3b0-137">Například potřebám mobilní aplikace může být jiná než potřebám webové aplikace.</span><span class="sxs-lookup"><span data-stu-id="7d3b0-137">For instance, the needs of a mobile app might be different than the needs of a web app.</span></span> <span data-ttu-id="7d3b0-138">Pro mobilní aplikace možná budete muset i další optimalizace tak, aby data odpovědí může být efektivnější.</span><span class="sxs-lookup"><span data-stu-id="7d3b0-138">For mobile apps, you might need to optimize even further so that data responses can be more efficient.</span></span> <span data-ttu-id="7d3b0-139">Můžete to třeba udělat tak, že agregaci dat z více mikroslužeb a vrací jednu sadu dat a někdy odstranění všech dat v odpovědi, která není potřeba mobilní aplikace.</span><span class="sxs-lookup"><span data-stu-id="7d3b0-139">You might do this by aggregating data from multiple microservices and returning a single set of data, and sometimes eliminating any data in the response that is not needed by the mobile app.</span></span> <span data-ttu-id="7d3b0-140">A samozřejmě může komprimovat data.</span><span class="sxs-lookup"><span data-stu-id="7d3b0-140">And, of course, you might compress that data.</span></span> <span data-ttu-id="7d3b0-141">Znovu průčelí za nebo API mezi mobilní aplikaci a mikroslužeb může být vhodné pro tento scénář.</span><span class="sxs-lookup"><span data-stu-id="7d3b0-141">Again, a façade or API in between the mobile app and the microservices can be convenient for this scenario.</span></span>

## <a name="using-an-api-gateway"></a><span data-ttu-id="7d3b0-142">Pomocí služby Gateway rozhraní API</span><span class="sxs-lookup"><span data-stu-id="7d3b0-142">Using an API Gateway</span></span>

<span data-ttu-id="7d3b0-143">Při návrhu a vytvářet velká nebo složitá na základě mikroslužbu aplikace s více klientských aplikací, může být dobrým přístupem vzít v úvahu [Brána rozhraní API](http://microservices.io/patterns/apigateway.html).</span><span class="sxs-lookup"><span data-stu-id="7d3b0-143">When you design and build large or complex microservice-based applications with multiple client apps, a good approach to consider can be an [API Gateway](http://microservices.io/patterns/apigateway.html).</span></span> <span data-ttu-id="7d3b0-144">Toto je služba, která poskytuje jeden vstupní bod pro určité skupiny mikroslužeb.</span><span class="sxs-lookup"><span data-stu-id="7d3b0-144">This is a service that provides a single entry point for certain groups of microservices.</span></span> <span data-ttu-id="7d3b0-145">Je podobná [Facade vzor](https://en.wikipedia.org/wiki/Facade_pattern) z object‑oriented návrhu, ale v takovém případě je součástí distribuovaného systému.</span><span class="sxs-lookup"><span data-stu-id="7d3b0-145">It is similar to the [Facade pattern](https://en.wikipedia.org/wiki/Facade_pattern) from object‑oriented design, but in this case, it is part of a distributed system.</span></span> <span data-ttu-id="7d3b0-146">Vzor Brána rozhraní API se také někdy označuje jako "back-end pro front-endové" [(BFF)](http://samnewman.io/patterns/architectural/bff/) vzhledem k tomu, že vytvoříte při přemýšlení o potřebám klientské aplikace.</span><span class="sxs-lookup"><span data-stu-id="7d3b0-146">The API Gateway pattern is also sometimes known as the “backend for frontend” [(BFF)](http://samnewman.io/patterns/architectural/bff/) because you build it while thinking about the needs of the client app.</span></span>

<span data-ttu-id="7d3b0-147">Obrázek 4 – 13 ukazuje, jak můžete začlenit vlastní Brána rozhraní API do architektury založené na mikroslužby.</span><span class="sxs-lookup"><span data-stu-id="7d3b0-147">Figure 4-13 shows how a custom API Gateway can fit into a microservice-based architecture.</span></span>
<span data-ttu-id="7d3b0-148">Je důležité, abyste měli na očích, v tomto diagramu, budete používat jeden vlastní Brána rozhraní API služby čelí více a jiné klientské aplikace.</span><span class="sxs-lookup"><span data-stu-id="7d3b0-148">It is important to highlight that in that diagram, you would be using a single custom API Gateway service facing multiple and different client apps.</span></span> <span data-ttu-id="7d3b0-149">Aby fakt může být důležité riziko, protože brána rozhraní API služby bude rostoucí a vyvíjející se na základě mnoho různých požadavků z klientské aplikace.</span><span class="sxs-lookup"><span data-stu-id="7d3b0-149">That fact can be an important risk because your API Gateway service will be growing and evolving based on many different requirements from the client apps.</span></span> <span data-ttu-id="7d3b0-150">Nakonec se z důvodu těchto různé potřeby bude opakovaném a efektivně může být poměrně podobná monolitický aplikace nebo monolitický služby.</span><span class="sxs-lookup"><span data-stu-id="7d3b0-150">Eventually, it will be bloated because of those different needs and effectively it could be pretty similar to a monolithic application or monolithic service.</span></span> <span data-ttu-id="7d3b0-151">To je proto velmi výrazně se doporučuje rozdělení bránou rozhraní API v několika služeb nebo více menší API bran, jeden pro každý typ faktor formuláře pro instanci.</span><span class="sxs-lookup"><span data-stu-id="7d3b0-151">That is why it is very much recommended to split the API Gateway in multiple services or multiple smaller API Gateways, one per form-factor type, for instance.</span></span>

![](./media/image13.png)

<span data-ttu-id="7d3b0-152">**Obrázek 4 – 13**.</span><span class="sxs-lookup"><span data-stu-id="7d3b0-152">**Figure 4-13**.</span></span> <span data-ttu-id="7d3b0-153">Pomocí služby API Gateway implementovaný jako vlastní webového rozhraní API služby</span><span class="sxs-lookup"><span data-stu-id="7d3b0-153">Using an API Gateway implemented as a custom Web API service</span></span>

<span data-ttu-id="7d3b0-154">V tomto příkladu by být bránou rozhraní API implementovaný jako vlastní webového rozhraní API služby spuštěné jako kontejner.</span><span class="sxs-lookup"><span data-stu-id="7d3b0-154">In this example, the API Gateway would be implemented as a custom Web API service running as a container.</span></span>

<span data-ttu-id="7d3b0-155">Jak je uvedeno, měli byste implementovat několik rozhraní API brány tak, aby může mít různé průčelí za pro potřeby každou klientskou aplikaci.</span><span class="sxs-lookup"><span data-stu-id="7d3b0-155">As mentioned, you should implement several API Gateways so that you can have a different façade for the needs of each client app.</span></span> <span data-ttu-id="7d3b0-156">Každý Brána rozhraní API můžete zadat jinou API přizpůsobené pro každou klientskou aplikaci, případně i na základě faktor formuláře klienta implementací konkrétní adaptér kód, který dole volá více interní mikroslužeb.</span><span class="sxs-lookup"><span data-stu-id="7d3b0-156">Each API Gateway can provide a different API tailored for each client app, possibly even based on the client form factor by implementing specific adapter code which underneath calls multiple internal microservices.</span></span>

<span data-ttu-id="7d3b0-157">Vzhledem k tomu, že vlastní Brána rozhraní API je obvykle data agregátoru, musíte pečlivě s ním.</span><span class="sxs-lookup"><span data-stu-id="7d3b0-157">Since a custom API Gateway is usually a data aggregator, you need to be careful with it.</span></span> <span data-ttu-id="7d3b0-158">Obvykle je vhodné jedinou Brána rozhraní API agregování všechny interní mikroslužeb vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="7d3b0-158">Usually it isn't a good idea to have a single API Gateway aggregating all the internal microservices of your application.</span></span> <span data-ttu-id="7d3b0-159">Pokud ano, funguje jako monolitický agregátoru nebo orchestrator a spojovacích všechny mikroslužeb porušuje mikroslužbu nezávislé.</span><span class="sxs-lookup"><span data-stu-id="7d3b0-159">If it does, it acts as a monolithic aggregator or orchestrator and violates microservice autonomy by coupling all the microservices.</span></span> <span data-ttu-id="7d3b0-160">Proto brány rozhraní API by měl být oddělené na základě obchodní hranice a není act jako agregátoru pro celou aplikaci.</span><span class="sxs-lookup"><span data-stu-id="7d3b0-160">Therefore, the API Gateways should be segregated based on business boundaries and not act as an aggregator for the whole application.</span></span>

<span data-ttu-id="7d3b0-161">Někdy granulární Brána rozhraní API můžete také být mikroslužbu sama o sobě a i domény nebo název firmy a související data.</span><span class="sxs-lookup"><span data-stu-id="7d3b0-161">Sometimes a granular API Gateway can also be a microservice by itself, and even have a domain or business name and related data.</span></span> <span data-ttu-id="7d3b0-162">S bránou rozhraní API hranice závisí na podnik nebo doméně vám pomůže získat lepší návrhu.</span><span class="sxs-lookup"><span data-stu-id="7d3b0-162">Having the API Gateway’s boundaries dictated by the business or domain will help you to get a better design.</span></span>

<span data-ttu-id="7d3b0-163">Členitost ve vrstvě Brána rozhraní API může být užitečné zejména pro pokročilejší kompozitních aplikací uživatelského rozhraní založené na mikroslužeb, protože koncept podrobných Brána rozhraní API je podobná služby složení uživatelského rozhraní.</span><span class="sxs-lookup"><span data-stu-id="7d3b0-163">Granularity in the API Gateway tier can be especially useful for more advanced composite UI applications based on microservices, because the concept of a fine-grained API Gateway is similar to a UI composition service.</span></span> <span data-ttu-id="7d3b0-164">To později probereme [vytváření složených uživatelského rozhraní založené na mikroslužeb](#creating-composite-ui-based-on-microservices-including-visual-ui-shape-and-layout-generated-by-multiple-microservices).</span><span class="sxs-lookup"><span data-stu-id="7d3b0-164">We discuss this later in the [Creating composite UI based on microservices](#creating-composite-ui-based-on-microservices-including-visual-ui-shape-and-layout-generated-by-multiple-microservices).</span></span>

<span data-ttu-id="7d3b0-165">Proto pro mnoho aplikací, střední a velké velikosti, pomocí uživatelské rozhraní API brány je obvykle dobrou přístup, ale ne jako jeden monolitický agregátoru nebo jedinečný centrální vlastní Brána rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="7d3b0-165">Therefore, for many medium- and large-size applications, using a custom-built API Gateway is usually a good approach, but not as a single monolithic aggregator or unique central custom API Gateway.</span></span>

<span data-ttu-id="7d3b0-166">Další možností je použít produkt jako [Azure API Management](https://azure.microsoft.com/services/api-management/) jak ukazuje obrázek 4-14.</span><span class="sxs-lookup"><span data-stu-id="7d3b0-166">Another approach is to use a product like [Azure API Management](https://azure.microsoft.com/services/api-management/) as shown in Figure 4-14.</span></span> <span data-ttu-id="7d3b0-167">Tento přístup pouze řeší potřeb Brána rozhraní API, ale poskytuje funkce, jako je shromažďování přehledy z vašich rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="7d3b0-167">This approach not only solves your API Gateway needs, but provides features like gathering insights from your APIs.</span></span> <span data-ttu-id="7d3b0-168">Pokud používáte do řešení pro správu rozhraní API, bránu rozhraní API je pouze součástí v rámci tohoto řešení pro správu úplné rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="7d3b0-168">If you are using an API management solution, an API Gateway is only a component within that full API management solution.</span></span>

![](./media/image14.png)

<span data-ttu-id="7d3b0-169">**Obrázek 4-14**.</span><span class="sxs-lookup"><span data-stu-id="7d3b0-169">**Figure 4-14**.</span></span> <span data-ttu-id="7d3b0-170">Pro bránu rozhraní API pomocí Azure API Management</span><span class="sxs-lookup"><span data-stu-id="7d3b0-170">Using Azure API Management for your API Gateway</span></span>

<span data-ttu-id="7d3b0-171">V takovém případě při používání produktu, jako je Azure API Management, fakt, že můžete mít jeden Brána rozhraní API není tak rizikové, protože tyto druhy brány rozhraní API jsou "užší", což znamená, že nebudete implementovat vlastní C# kód, který by mohl vyvíjet monolitický komponenta.</span><span class="sxs-lookup"><span data-stu-id="7d3b0-171">In this case, when using a product like Azure API Management, the fact that you might have a single API Gateway is not so risky because these kinds of API Gateways are "thinner", meaning that you don't implement custom C# code that could evolve towards a monolithic component.</span></span> 

<span data-ttu-id="7d3b0-172">Tento typ produktu pracuje jako reverzní proxy server pro příchozí komunikaci, kde je můžete také filtrovat rozhraní API z interní mikroslužeb plus autorizace provádí publikovaných rozhraní API v této jedné úrovni.</span><span class="sxs-lookup"><span data-stu-id="7d3b0-172">This type of product acts more like a reverse proxy for ingress communication, where you can also filter the APIs from the internal microservices plus apply authorization to the published APIs in this single tier.</span></span>

<span data-ttu-id="7d3b0-173">Pomocí API Management systému nápovědy k dispozici statistiky získat představu o tom, jak jsou používány vaše rozhraní API a jak jsou provádění.</span><span class="sxs-lookup"><span data-stu-id="7d3b0-173">The insights available from an API Management system help you get an understanding of how your APIs are being used and how they are performing.</span></span> <span data-ttu-id="7d3b0-174">Je to tak, že umožňují zobrazit téměř sestavy analýzy v reálném čase a identifikaci trendů, které může mít vliv na vaši firmu.</span><span class="sxs-lookup"><span data-stu-id="7d3b0-174">They do this by letting you view near real-time analytics reports and identifying trends that might impact your business.</span></span> <span data-ttu-id="7d3b0-175">Plus může mít protokoly o žádosti a odpovědi aktivity pro další analýzu online a offline.</span><span class="sxs-lookup"><span data-stu-id="7d3b0-175">Plus, you can have logs about request and response activity for further online and offline analysis.</span></span>

<span data-ttu-id="7d3b0-176">S Azure API Management můžete zabezpečit vaše rozhraní API pomocí klíče, token a filtrování protokolu IP.</span><span class="sxs-lookup"><span data-stu-id="7d3b0-176">With Azure API Management, you can secure your APIs using a key, a token, and IP filtering.</span></span> <span data-ttu-id="7d3b0-177">Tyto funkce umožňují vynutit flexibilní a podrobných kvóty a omezení přenosové rychlosti, upravit tvar a chování vaše rozhraní API pomocí zásad a zlepšují výkon při ukládání odpovědí do mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="7d3b0-177">These features let you enforce flexible and fine-grained quotas and rate limits, modify the shape and behavior of your APIs using policies, and improve performance with response caching.</span></span>

<span data-ttu-id="7d3b0-178">V této příručce a referenční dokumentace ukázkovou aplikaci (eShopOnContainers) jsme jsou omezení architekturu pro jednodušší a vlastní kontejnerizované architektura s cílem zaměřit na prostý kontejnery bez použití PaaS produkty, jako je Azure API Management.</span><span class="sxs-lookup"><span data-stu-id="7d3b0-178">In this guide and the reference sample application (eShopOnContainers), we are limiting the architecture to a simpler and custom-made containerized architecture in order to focus on plain containers without using PaaS products like Azure API Management.</span></span> <span data-ttu-id="7d3b0-179">Ale pro velké aplikace na základě mikroslužbu, které jsou nasazeny do Microsoft Azure, doporučujeme, abyste ke kontrole a přijmout službu Azure API Management jako základ pro vaše rozhraní API brány.</span><span class="sxs-lookup"><span data-stu-id="7d3b0-179">But for large microservice-based applications that are deployed into Microsoft Azure, we encourage you to review and adopt Azure API Management as the base for your API Gateways.</span></span>

## <a name="drawbacks-of-the-api-gateway-pattern"></a><span data-ttu-id="7d3b0-180">Nevýhody vzoru Brána rozhraní API</span><span class="sxs-lookup"><span data-stu-id="7d3b0-180">Drawbacks of the API Gateway pattern</span></span>

-   <span data-ttu-id="7d3b0-181">Nejdůležitější nevýhodou je, že při implementaci bránu rozhraní API jsou spojovacích této vrstvě s interní mikroslužeb.</span><span class="sxs-lookup"><span data-stu-id="7d3b0-181">The most important drawback is that when you implement an API Gateway, you are coupling that tier with the internal microservices.</span></span> <span data-ttu-id="7d3b0-182">Párování jako to může způsobit vážné problémy pro aplikaci.</span><span class="sxs-lookup"><span data-stu-id="7d3b0-182">Coupling like this might introduce serious difficulties for your application.</span></span> <span data-ttu-id="7d3b0-183">Vaster od Clemense architekti na tým Azure Service Bus, odkazuje na tato potenciální potíže jako "nové ESB" v svůj "[zasílání zpráv a Mikroslužeb](https://www.youtube.com/watch?v=rXi5CLjIQ9k)" relace v GOTO 2016.</span><span class="sxs-lookup"><span data-stu-id="7d3b0-183">Clemens Vaster, architect at the Azure Service Bus team, refers to this potential difficulty as “the new ESB” in his "[Messaging and Microservices](https://www.youtube.com/watch?v=rXi5CLjIQ9k)" session at GOTO 2016.</span></span>

-   <span data-ttu-id="7d3b0-184">Brána rozhraní API mikroslužeb pomocí vytvoří další možné jediný bod selhání.</span><span class="sxs-lookup"><span data-stu-id="7d3b0-184">Using a microservices API Gateway creates an additional possible single point of failure.</span></span>

-   <span data-ttu-id="7d3b0-185">Bránu rozhraní API můžete zavést prodloužení doby odezvy z důvodu další síťové volání.</span><span class="sxs-lookup"><span data-stu-id="7d3b0-185">An API Gateway can introduce increased response time due to the additional network call.</span></span> <span data-ttu-id="7d3b0-186">Toto volání navíc má však obvykle menší dopad, než by byl klient rozhraní, která je příliš chatty přímo volání interní mikroslužeb.</span><span class="sxs-lookup"><span data-stu-id="7d3b0-186">However, this extra call usually has less impact than having a client interface that is too chatty directly calling the internal microservices.</span></span>

-   <span data-ttu-id="7d3b0-187">Pokud není škálovat na více systémů správně, bránou rozhraní API se může stát úzkým místem.</span><span class="sxs-lookup"><span data-stu-id="7d3b0-187">If not scaled out properly, the API Gateway can become a bottleneck.</span></span>

-   <span data-ttu-id="7d3b0-188">Bránu rozhraní API vyžaduje další vývoj náklady a budoucí údržby, pokud obsahuje vlastní logiky a agregace dat.</span><span class="sxs-lookup"><span data-stu-id="7d3b0-188">An API Gateway requires additional development cost and future maintenance if it includes custom logic and data aggregation.</span></span> <span data-ttu-id="7d3b0-189">Vývojáři musí aktualizovat bránou rozhraní API tak, aby získal každý mikroslužbu koncové body.</span><span class="sxs-lookup"><span data-stu-id="7d3b0-189">Developers must update the API Gateway in order to expose each microservice’s endpoints.</span></span> <span data-ttu-id="7d3b0-190">Implementace změny v interní mikroslužeb kromě toho může způsobit změny kódu na úrovni Brána rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="7d3b0-190">Moreover, implementation changes in the internal microservices might cause code changes at the API Gateway level.</span></span> <span data-ttu-id="7d3b0-191">Ale pokud brána rozhraní API právě aplikuje zabezpečení, protokolování a správa verzí (stejně jako při použití Azure API Management), nemusí tato náklady na vývoj pro další použití.</span><span class="sxs-lookup"><span data-stu-id="7d3b0-191">However, if the API Gateway is just applying security, logging, and versioning (as when using Azure API Management), this additional development cost might not apply.</span></span>

-   <span data-ttu-id="7d3b0-192">Pokud brána rozhraní API je vyvinuté jeden tým, může být úzkým místem vývoj.</span><span class="sxs-lookup"><span data-stu-id="7d3b0-192">If the API Gateway is developed by a single team, there can be a development bottleneck.</span></span> <span data-ttu-id="7d3b0-193">To je další důvod, proč je vhodnější je několik pokutu podrobných API brány, které reagují na požadavky jiného klienta.</span><span class="sxs-lookup"><span data-stu-id="7d3b0-193">This is another reason why a better approach is to have several fined-grained API Gateways that respond to different client needs.</span></span> <span data-ttu-id="7d3b0-194">Brána rozhraní API může také oddělit interně do několika oblastem nebo vrstvy, které jsou vlastněny různé týmy pracující na interní mikroslužeb.</span><span class="sxs-lookup"><span data-stu-id="7d3b0-194">You could also segregate the API Gateway internally into multiple areas or layers that are owned by the different teams working on the internal microservices.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="7d3b0-195">Další zdroje</span><span class="sxs-lookup"><span data-stu-id="7d3b0-195">Additional resources</span></span>

-   <span data-ttu-id="7d3b0-196">**Charlese Ryšánková. Vzor: Brána rozhraní API / back-end pro front-endu**
    [*http://microservices.io/patterns/apigateway.html*](http://microservices.io/patterns/apigateway.html)</span><span class="sxs-lookup"><span data-stu-id="7d3b0-196">**Charles Richardson. Pattern: API Gateway / Backend for Front-End**
[*http://microservices.io/patterns/apigateway.html*](http://microservices.io/patterns/apigateway.html)</span></span>

-   <span data-ttu-id="7d3b0-197">**Azure API Management**
    [*https://azure.microsoft.com/services/api-management/*](https://azure.microsoft.com/services/api-management/)</span><span class="sxs-lookup"><span data-stu-id="7d3b0-197">**Azure API Management**
[*https://azure.microsoft.com/services/api-management/*](https://azure.microsoft.com/services/api-management/)</span></span>

-   <span data-ttu-id="7d3b0-198">**UDI Dahan. Služba zaměřené na konkrétní složení**\\</span><span class="sxs-lookup"><span data-stu-id="7d3b0-198">**Udi Dahan. Service Oriented Composition**\\</span></span>
    [<span data-ttu-id="7d3b0-199">*http://udidahan.com/2014/07/30/Service-Oriented-Composition-with-video/*</span><span class="sxs-lookup"><span data-stu-id="7d3b0-199">*http://udidahan.com/2014/07/30/service-oriented-composition-with-video/*</span></span>](http://udidahan.com/2014/07/30/service-oriented-composition-with-video/)

-   <span data-ttu-id="7d3b0-200">**Od Clemense Vasters. Zasílání zpráv a Mikroslužeb v GOTO 2016** (video) [ *https://www.youtube.com/watch?v=rXi5CLjIQ9k*](https://www.youtube.com/watch?v=rXi5CLjIQ9k)</span><span class="sxs-lookup"><span data-stu-id="7d3b0-200">**Clemens Vasters. Messaging and Microservices at GOTO 2016** (video) [*https://www.youtube.com/watch?v=rXi5CLjIQ9k*](https://www.youtube.com/watch?v=rXi5CLjIQ9k)</span></span>


>[!div class="step-by-step"]
<span data-ttu-id="7d3b0-201">[Předchozí] (identifikovat mikroslužbu domain modelu boundaries.md) [Další] (komunikace v mikroslužbu architecture.md)</span><span class="sxs-lookup"><span data-stu-id="7d3b0-201">[Previous] (identify-microservice-domain-model-boundaries.md) [Next] (communication-in-microservice-architecture.md)</span></span>
