---
title: Identifikace modelu domény hranice pro každou mikroslužbu
description: Architektura Mikroslužeb .NET pro aplikace .NET Kontejnerizované | Identifikace modelu domény hranice pro každou mikroslužbu
keywords: Docker, Mikroslužeb, ASP.NET, kontejneru
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 05/26/2017
ms.prod: .net-core
ms.technology: dotnet-docker
ms.topic: article
ms.workload:
- dotnet
- dotnetcore
ms.openlocfilehash: 23b5ebafc5ea037568f168426d76b3ec9839040e
ms.sourcegitcommit: 2e8acae16ae802f2d6d04e3ce0a6dbf04e476513
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 04/18/2018
---
# <a name="identify-domain-model-boundaries-for-each-microservice"></a><span data-ttu-id="9cc4c-104">Určení modelu domény hranice pro každou mikroslužbu</span><span class="sxs-lookup"><span data-stu-id="9cc4c-104">Identify domain-model boundaries for each microservice</span></span>

<span data-ttu-id="9cc4c-105">Cílem při identifikaci hranice modelu a velikost každé mikroslužbu je nechcete dostávat nejvíce granulární oddělení možné, i když má mívají směrem k malé mikroslužeb Pokud je to možné.</span><span class="sxs-lookup"><span data-stu-id="9cc4c-105">The goal when identifying model boundaries and size for each microservice is not to get to the most granular separation possible, although you should tend toward small microservices if possible.</span></span> <span data-ttu-id="9cc4c-106">Místo toho vaším cílem mělo být pro zajištění smysluplných oddělení provést podle vašich znalostí domény.</span><span class="sxs-lookup"><span data-stu-id="9cc4c-106">Instead, your goal should be to get to the most meaningful separation guided by your domain knowledge.</span></span> <span data-ttu-id="9cc4c-107">Důraz na velikost, ale místo toho na není obchodní možnosti.</span><span class="sxs-lookup"><span data-stu-id="9cc4c-107">The emphasis is not on the size, but instead on business capabilities.</span></span> <span data-ttu-id="9cc4c-108">Kromě toho pokud je zrušte soudržnost potřebné pro určité oblasti aplikace založené na velký počet závislostí, určující potřebu jeden mikroslužbu, příliš.</span><span class="sxs-lookup"><span data-stu-id="9cc4c-108">In addition, if there is clear cohesion needed for a certain area of the application based on a high number of dependencies, that indicates the need for a single microservice, too.</span></span> <span data-ttu-id="9cc4c-109">Soudržnost je způsob, jak identifikovat tom, jak rozdělit nebo skupiny společně mikroslužeb.</span><span class="sxs-lookup"><span data-stu-id="9cc4c-109">Cohesion is a way to identify how to break apart or group together microservices.</span></span> <span data-ttu-id="9cc4c-110">Nakonec zatímco, získáte další informace o doméně, přizpůsobte velikost vašeho mikroslužbu interaktivně.</span><span class="sxs-lookup"><span data-stu-id="9cc4c-110">Ultimately, while you gain more knowledge about the domain, you should adapt the size of your microservice, iteratively.</span></span> <span data-ttu-id="9cc4c-111">Hledání správnou velikost není jednorázové procesu.</span><span class="sxs-lookup"><span data-stu-id="9cc4c-111">Finding the right size is not a one-shot process.</span></span>

<span data-ttu-id="9cc4c-112">[SAM Newman](https://samnewman.io/), rozpoznaný vykonavatel mikroslužeb a autor knihy [vytváření Mikroslužeb](https://samnewman.io/books/building_microservices/), označuje, měli byste navrhnout vaše mikroslužeb na základě vzoru ohraničenou kontextu (BC) (součást řízené domény návrhu), zavedeném dříve.</span><span class="sxs-lookup"><span data-stu-id="9cc4c-112">[Sam Newman](https://samnewman.io/), a recognized promoter of microservices and author of the book [Building Microservices](https://samnewman.io/books/building_microservices/), highlights that you should design your microservices based on the Bounded Context (BC) pattern (part of domain-driven design), as introduced earlier.</span></span> <span data-ttu-id="9cc4c-113">V některých případech může BC skládá z několika fyzických služeb, ale ne naopak.</span><span class="sxs-lookup"><span data-stu-id="9cc4c-113">Sometimes, a BC could be composed of several physical services, but not vice versa.</span></span>

<span data-ttu-id="9cc4c-114">Model domény s konkrétní doménu entity lze použít v rámci konkrétní BC nebo mikroslužby.</span><span class="sxs-lookup"><span data-stu-id="9cc4c-114">A domain model with specific domain entities applies within a concrete BC or microservice.</span></span> <span data-ttu-id="9cc4c-115">BC vymezuje použitelnost modelu domény a vývojáře poskytuje členové týmu, zrušte a sdílené vysvětlení, co musí být získá na ucelenosti a co mohou být vytvořeny nezávisle.</span><span class="sxs-lookup"><span data-stu-id="9cc4c-115">A BC delimits the applicability of a domain model and gives developer team members a clear and shared understanding of what must be cohesive and what can be developed independently.</span></span> <span data-ttu-id="9cc4c-116">Jedná se o stejné cíle pro mikroslužeb.</span><span class="sxs-lookup"><span data-stu-id="9cc4c-116">These are the same goals for microservices.</span></span>

<span data-ttu-id="9cc4c-117">Jiný nástroj, který informuje zvoleného návrhu se [na Conwayovu zákonem](https://en.wikipedia.org/wiki/Conway%27s_law), který uvádí, že aplikace bude odrážet sociálních hranice organizace, která je vytvořena.</span><span class="sxs-lookup"><span data-stu-id="9cc4c-117">Another tool that informs your design choice is [Conway’s law](https://en.wikipedia.org/wiki/Conway%27s_law), which states that an application will reflect the social boundaries of the organization that produced it.</span></span> <span data-ttu-id="9cc4c-118">Ale v některých případech je true jako opak – společnosti organizace je vytvořen softwarem.</span><span class="sxs-lookup"><span data-stu-id="9cc4c-118">But sometimes the opposite is true—the company’s organization is formed by the software.</span></span> <span data-ttu-id="9cc4c-119">Může musíte obrátit na Conwayovu zákony a vytvoření hranice způsob, jakým chcete společnosti k uspořádání, leaning směrem k poradě obchodní proces.</span><span class="sxs-lookup"><span data-stu-id="9cc4c-119">You might need to reverse Conway’s law and build the boundaries the way you want the company to be organized, leaning toward business process consulting.</span></span>

<span data-ttu-id="9cc4c-120">Aby bylo možné identifikovat ohraničené kontexty, DDD vzor, který lze použít pro toto je [kontextu mapování vzor](https://www.infoq.com/articles/ddd-contextmapping).</span><span class="sxs-lookup"><span data-stu-id="9cc4c-120">In order to identify bounded contexts, a DDD pattern that can be used for this is the [Context Mapping pattern](https://www.infoq.com/articles/ddd-contextmapping).</span></span> <span data-ttu-id="9cc4c-121">Pomocí kontextu mapování identifikujete různé kontexty v aplikaci a jejich hranice.</span><span class="sxs-lookup"><span data-stu-id="9cc4c-121">With Context Mapping, you identify the various contexts in the application and their boundaries.</span></span> <span data-ttu-id="9cc4c-122">Je běžně používají různé kontextu a hranice pro každou malé subsystém pro instanci.</span><span class="sxs-lookup"><span data-stu-id="9cc4c-122">It is common to have a different context and boundary for each small subsystem, for instance.</span></span> <span data-ttu-id="9cc4c-123">Mapa kontextu je způsob, jak definovat a proveďte explicitní tyto hranice mezi doménami.</span><span class="sxs-lookup"><span data-stu-id="9cc4c-123">The Context Map is a way to define and make explicit those boundaries between domains.</span></span> <span data-ttu-id="9cc4c-124">Autonomní a zahrnuje podrobnosti o na jednu doménu BC – podrobnosti, jako entity domény – a definuje kontrakty integrace s další BCs.</span><span class="sxs-lookup"><span data-stu-id="9cc4c-124">A BC is autonomous and includes the details of a single domain—details like the domain entities—and defines integration contracts with other BCs.</span></span> <span data-ttu-id="9cc4c-125">Toto je podobná definici mikroslužbu: je autonomního, implementuje určité funkce domény a je nutné zadat rozhraní.</span><span class="sxs-lookup"><span data-stu-id="9cc4c-125">This is similar to the definition of a microservice: it is autonomous, it implements certain domain capability, and it must provide interfaces.</span></span> <span data-ttu-id="9cc4c-126">Z tohoto důvodu mapování kontextu a vzoru ohraničenou kontextu jsou dobrou přístupy k identifikaci hranice vaší mikroslužeb modelu domény.</span><span class="sxs-lookup"><span data-stu-id="9cc4c-126">This is why Context Mapping and the Bounded Context pattern are good approaches for identifying the domain model boundaries of your microservices.</span></span>

<span data-ttu-id="9cc4c-127">Při navrhování rozsáhlé aplikace, se zobrazí, jak může být jeho modelu domény fragmentované – expert domény z domény katalog bude název entity jinak v doménách katalogu a inventáře než odborné, přesouvání domény pro instanci.</span><span class="sxs-lookup"><span data-stu-id="9cc4c-127">When designing a large application, you will see how its domain model can be fragmented — a domain expert from the catalog domain will name entities differently in the catalog and inventory domains than a shipping domain expert, for instance.</span></span> <span data-ttu-id="9cc4c-128">Nebo může být při plánování práce s odborné CRM, který chce uložit všechny podrobnosti o zákazníkovi, než pro řazení expert domény, který právě potřebuje částečná data o zákazníkovi liší velikost a počet atributů entita domény uživatele.</span><span class="sxs-lookup"><span data-stu-id="9cc4c-128">Or the user domain entity might be different in size and number of attributes when dealing with a CRM expert who wants to store every detail about the customer than for an ordering domain expert who just needs partial data about the customer.</span></span> <span data-ttu-id="9cc4c-129">Je velmi obtížné rozlišení podmínky pro všechny domény napříč všemi doménami související s rozsáhlé aplikace.</span><span class="sxs-lookup"><span data-stu-id="9cc4c-129">It is very hard to disambiguate all domain terms across all the domains related to a large application.</span></span> <span data-ttu-id="9cc4c-130">Ale většina důležité je, že by se neměl pokoušet sjednocení podmínky; Místo toho přijměte rozdíly a bohatost poskytované každou doménu.</span><span class="sxs-lookup"><span data-stu-id="9cc4c-130">But the most important thing is that you should not try to unify the terms; instead, accept the differences and richness provided by each domain.</span></span> <span data-ttu-id="9cc4c-131">Pokud se pokusíte mít jednotná databázi pro celou aplikaci, pokusů na jednotné termínů bude nevhodných a nebude zvukových správné k některému z více odborníky domény.</span><span class="sxs-lookup"><span data-stu-id="9cc4c-131">If you try to have a unified database for the whole application, attempts at a unified vocabulary will be awkward and will not sound right to any of the multiple domain experts.</span></span> <span data-ttu-id="9cc4c-132">Proto BCs (implementovaný jako mikroslužeb) vám pomůže o vysvětlení, kde můžete použít určité podmínky domény a kde budete muset rozdělení systému a vytvořte další BCs v různých doménách.</span><span class="sxs-lookup"><span data-stu-id="9cc4c-132">Therefore, BCs (implemented as microservices) will help you to clarify where you can use certain domain terms and where you will need to split the system and create additional BCs with different domains.</span></span>

<span data-ttu-id="9cc4c-133">Budete vědět, že jste získali správné hranic a velikosti jednotlivých BC a modelu domény Pokud máte několik silné vztahy mezi modely domény, a proveďte není obvykle nutné sloučit informace z více modelů domény při provádění Typická aplikace operace.</span><span class="sxs-lookup"><span data-stu-id="9cc4c-133">You will know that you got the right boundaries and sizes of each BC and domain model if you have few strong relationships between domain models, and you do not usually need to merge information from multiple domain models when performing typical application operations.</span></span>

<span data-ttu-id="9cc4c-134">Možná nejlepší odpověď na otázku, jak velký má být model domény pro každou mikroslužbu je následující: autonomní BC, musí mít jako izolované nejdříve, který umožňuje pracovat bez nutnosti neustále přepnout do jiných kontextech (jiné mikroslužbu na modelů).</span><span class="sxs-lookup"><span data-stu-id="9cc4c-134">Perhaps the best answer to the question of how big a domain model for each microservice should be is the following: it should have an autonomous BC, as isolated as possible, that enables you to work without having to constantly switch to other contexts (other microservice’s models).</span></span> <span data-ttu-id="9cc4c-135">Obrázek 4 – 10 uvidíte jak více mikroslužeb (více BCs) každou mají své vlastní modelu a jak lze definovat jejich entity, v závislosti na konkrétních požadavcích pro každý zjištěný domén ve vaší aplikaci.</span><span class="sxs-lookup"><span data-stu-id="9cc4c-135">In Figure 4-10 you can see how multiple microservices (multiple BCs) each have their own model and how their entities can be defined, depending on the specific requirements for each of the identified domains in your application.</span></span>

![](./media/image10.png)

<span data-ttu-id="9cc4c-136">**Obrázek 4 – 10**.</span><span class="sxs-lookup"><span data-stu-id="9cc4c-136">**Figure 4-10**.</span></span> <span data-ttu-id="9cc4c-137">Identifikace entity a mikroslužbu modelu hranice</span><span class="sxs-lookup"><span data-stu-id="9cc4c-137">Identifying entities and microservice model boundaries</span></span>

<span data-ttu-id="9cc4c-138">Obrázek 4 – 10 znázorňuje vzorový scénář související do systému správy online konference.</span><span class="sxs-lookup"><span data-stu-id="9cc4c-138">Figure 4-10 illustrates a sample scenario related to an online conference management system.</span></span> <span data-ttu-id="9cc4c-139">Určili jste několik BCs, které by mohly být implementovány jako mikroslužeb, podle domén, které domény odborníky definované za vás.</span><span class="sxs-lookup"><span data-stu-id="9cc4c-139">You have identified several BCs that could be implemented as microservices, based on domains that domain experts defined for you.</span></span> <span data-ttu-id="9cc4c-140">Jak je vidět, existují entit, které jsou k dispozici jenom v jedné mikroslužbu modelu, jako plateb v mikroslužbu platebních.</span><span class="sxs-lookup"><span data-stu-id="9cc4c-140">As you can see, there are entities that are present just in a single microservice model, like Payments in the Payment microservice.</span></span> <span data-ttu-id="9cc4c-141">Budou snadno implementovat.</span><span class="sxs-lookup"><span data-stu-id="9cc4c-141">Those will be easy to implement.</span></span>

<span data-ttu-id="9cc4c-142">Můžete však také může mít entit, které mají různé obrazce ale sdílejí stejnou identitu napříč více modelů domény z více mikroslužeb.</span><span class="sxs-lookup"><span data-stu-id="9cc4c-142">However, you might also have entities that have a different shape but share the same identity across the multiple domain models from the multiple microservices.</span></span> <span data-ttu-id="9cc4c-143">Například entitu uživatele je definovaný v mikroslužbu konferencí správy.</span><span class="sxs-lookup"><span data-stu-id="9cc4c-143">For example, the User entity is identified in the Conferences Management microservice.</span></span> <span data-ttu-id="9cc4c-144">Tomuto uživateli, se stejnou identitou, je ten s názvem kupující v mikroslužbu řazení, nebo jednu s názvem plátce v mikroslužbu platby a i jednu s názvem zákazníka v oddělení služeb zákazníkům mikroslužby.</span><span class="sxs-lookup"><span data-stu-id="9cc4c-144">That same user, with the same identity, is the one named Buyers in the Ordering microservice, or the one named Payer in the Payment microservice, and even the one named Customer in the Customer Service microservice.</span></span> <span data-ttu-id="9cc4c-145">Důvodem je, že v závislosti na [všudypřítomný jazyk](https://martinfowler.com/bliki/UbiquitousLanguage.html) , používá expert každé domény, uživatel může mít různé perspektivy i přes různé atributy.</span><span class="sxs-lookup"><span data-stu-id="9cc4c-145">This is because, depending on the [ubiquitous language](https://martinfowler.com/bliki/UbiquitousLanguage.html) that each domain expert is using, a user might have a different perspective even with different attributes.</span></span> <span data-ttu-id="9cc4c-146">Entitu uživatele v modelu mikroslužbu s názvem konferencí správu mít asi většinu jeho atributy osobní data.</span><span class="sxs-lookup"><span data-stu-id="9cc4c-146">The user entity in the microservice model named Conferences Management might have most of its personal data attributes.</span></span> <span data-ttu-id="9cc4c-147">Tomuto uživateli ve tvaru plátce v mikroslužbu platebních nebo ve tvaru zákazníka v mikroslužbu oddělení služeb zákazníkům však nemusí stejný seznam atributů.</span><span class="sxs-lookup"><span data-stu-id="9cc4c-147">However, that same user in the shape of Payer in the microservice Payment or in the shape of Customer in the microservice Customer Service might not need the same list of attributes.</span></span>

<span data-ttu-id="9cc4c-148">Podobný postup je zobrazená v obrázek 4-11.</span><span class="sxs-lookup"><span data-stu-id="9cc4c-148">A similar approach is illustrated in Figure 4-11.</span></span>

![](./media/image11.png)

<span data-ttu-id="9cc4c-149">**Obrázek 4-11**.</span><span class="sxs-lookup"><span data-stu-id="9cc4c-149">**Figure 4-11**.</span></span> <span data-ttu-id="9cc4c-150">Decomposing tradiční datové modely do více domény modelů</span><span class="sxs-lookup"><span data-stu-id="9cc4c-150">Decomposing traditional data models into multiple domain models</span></span>

<span data-ttu-id="9cc4c-151">Uvidíte, jak uživatel nachází v modelu správy konferencí mikroslužbu jako entitu uživatele a také se nachází ve formě kupujících entity v cenová mikroslužbu, s alternativní atributy nebo podrobnosti o uživateli, pokud je ve skutečnosti kupujících.</span><span class="sxs-lookup"><span data-stu-id="9cc4c-151">You can see how the user is present in the Conferences Management microservice model as the User entity and is also present in the form of the Buyer entity in the Pricing microservice, with alternate attributes or details about the user when it is actually a buyer.</span></span> <span data-ttu-id="9cc4c-152">Každé mikroslužbu nebo BC nemusí všechna data související s entitu uživatele, právě součástí, podle toho, problém lze vyřešit nebo kontextu.</span><span class="sxs-lookup"><span data-stu-id="9cc4c-152">Each microservice or BC might not need all the data related to a User entity, just part of it, depending on the problem to solve or the context.</span></span> <span data-ttu-id="9cc4c-153">Například v modelu mikroslužbu cenová, není nutné adresu nebo ID uživatele, stačí ID (identity) a stav, který bude mít dopad na slevy při ceny licencí za kupujících.</span><span class="sxs-lookup"><span data-stu-id="9cc4c-153">For instance, in the Pricing microservice model, you do not need the address or the ID of the user, just ID (as identity) and Status, which will have an impact on discounts when pricing the seats per buyer.</span></span>

<span data-ttu-id="9cc4c-154">Stanici entita, která má stejný název ale různé atributy v každém modelu domény.</span><span class="sxs-lookup"><span data-stu-id="9cc4c-154">The Seat entity has the same name but different attributes in each domain model.</span></span> <span data-ttu-id="9cc4c-155">Ale stanici sdílí identity na základě stejné ID, jak se stane s uživatelů a kupujících.</span><span class="sxs-lookup"><span data-stu-id="9cc4c-155">However, Seat shares identity based on the same ID, as happens with User and Buyer.</span></span>

<span data-ttu-id="9cc4c-156">V podstatě je sdílený koncept uživatele, který v několika služeb (domény), které sdílet identitu tohoto uživatele existuje.</span><span class="sxs-lookup"><span data-stu-id="9cc4c-156">Basically, there is a shared concept of a user that exists in multiple services (domains), which all share the identity of that user.</span></span> <span data-ttu-id="9cc4c-157">Ale v každé doméně modelu může být další nebo jiné podrobnosti o entitu uživatele.</span><span class="sxs-lookup"><span data-stu-id="9cc4c-157">But in each domain model there might be additional or different details about the user entity.</span></span> <span data-ttu-id="9cc4c-158">Proto je potřeba mapováním entitu uživatele z jedné domény (mikroslužbu) do jiné.</span><span class="sxs-lookup"><span data-stu-id="9cc4c-158">Therefore, there needs to be a way to map a user entity from one domain (microservice) to another.</span></span>

<span data-ttu-id="9cc4c-159">Existuje několik výhod není sdílení stejnou entitu uživatele se stejným číslem atributů napříč doménami.</span><span class="sxs-lookup"><span data-stu-id="9cc4c-159">There are several benefits to not sharing the same user entity with the same number of attributes across domains.</span></span> <span data-ttu-id="9cc4c-160">Jedním z důvodů je snížit duplikaci tak, aby modely mikroslužbu neobsahuje žádná data, která není nutné.</span><span class="sxs-lookup"><span data-stu-id="9cc4c-160">One benefit is to reduce duplication, so that microservice models do not have any data that they do not need.</span></span> <span data-ttu-id="9cc4c-161">Mezi další výhody má hlavní mikroslužbu, vlastnící určitý typ dat na entity tak, aby aktualizace a dotazů pro tento typ dat se řídí pouze tento mikroslužby.</span><span class="sxs-lookup"><span data-stu-id="9cc4c-161">Another benefit is having a master microservice that owns a certain type of data per entity so that updates and queries for that type of data are driven only by that microservice.</span></span>


>[!div class="step-by-step"]
<span data-ttu-id="9cc4c-162">[Předchozí] (distributed-data-management.md) [Další] (direct-client-to-microservice-communication-versus-the-api-gateway-pattern.md)</span><span class="sxs-lookup"><span data-stu-id="9cc4c-162">[Previous] (distributed-data-management.md) [Next] (direct-client-to-microservice-communication-versus-the-api-gateway-pattern.md)</span></span>
