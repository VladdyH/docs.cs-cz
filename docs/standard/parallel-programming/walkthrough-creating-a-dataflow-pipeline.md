---
title: "Postupy: Vytvoření kanálu toku dat"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-standard
ms.tgt_pltfrm: 
ms.topic: article
dev_langs:
- csharp
- vb
helpviewer_keywords:
- dataflow pipelines, creating with TPL
- Task Parallel Library, dataflows
- TPL dataflow library, creating dataflow pipeline
ms.assetid: 69308f82-aa22-4ac5-833d-e748533b58e8
caps.latest.revision: "11"
author: rpetrusha
ms.author: ronpet
manager: wpickett
ms.workload:
- dotnet
- dotnetcore
ms.openlocfilehash: 6cc65464248ec27c4bda4934408a9bafc823a80c
ms.sourcegitcommit: e7f04439d78909229506b56935a1105a4149ff3d
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 12/23/2017
---
# <a name="walkthrough-creating-a-dataflow-pipeline"></a><span data-ttu-id="5b5aa-102">Postupy: Vytvoření kanálu toku dat</span><span class="sxs-lookup"><span data-stu-id="5b5aa-102">Walkthrough: Creating a Dataflow Pipeline</span></span>
<span data-ttu-id="5b5aa-103">Přestože je možné použít <xref:System.Threading.Tasks.Dataflow.DataflowBlock.Receive%2A?displayProperty=nameWithType>, <xref:System.Threading.Tasks.Dataflow.DataflowBlock.ReceiveAsync%2A?displayProperty=nameWithType>, a <xref:System.Threading.Tasks.Dataflow.DataflowBlock.TryReceive%2A?displayProperty=nameWithType> metody pro příjem zpráv z zdroje bloky, bloky zpráv může připojit i k formuláře *kanálu toku dat*.</span><span class="sxs-lookup"><span data-stu-id="5b5aa-103">Although you can use the <xref:System.Threading.Tasks.Dataflow.DataflowBlock.Receive%2A?displayProperty=nameWithType>, <xref:System.Threading.Tasks.Dataflow.DataflowBlock.ReceiveAsync%2A?displayProperty=nameWithType>, and <xref:System.Threading.Tasks.Dataflow.DataflowBlock.TryReceive%2A?displayProperty=nameWithType> methods to receive messages from source blocks, you can also connect message blocks to form a *dataflow pipeline*.</span></span> <span data-ttu-id="5b5aa-104">Kanálu toku dat je několika komponent, nebo *bloků toku dat*, z nichž každá provádí konkrétní úlohu, která přispívá ke větší cíl.</span><span class="sxs-lookup"><span data-stu-id="5b5aa-104">A dataflow pipeline is a series of components, or *dataflow blocks*, each of which performs a specific task that contributes to a larger goal.</span></span> <span data-ttu-id="5b5aa-105">Každý bloku toku dat v kanálu toku dat provede práci při přijetí zprávy z jiného bloku toku dat.</span><span class="sxs-lookup"><span data-stu-id="5b5aa-105">Every dataflow block in a dataflow pipeline performs work when it receives a message from another dataflow block.</span></span> <span data-ttu-id="5b5aa-106">Analogie k tomuto je sestavení pro automobilů výrobní.</span><span class="sxs-lookup"><span data-stu-id="5b5aa-106">An analogy to this is an assembly line for automobile manufacturing.</span></span> <span data-ttu-id="5b5aa-107">Při každém vehicle průchodu řádku sestavení, jedné stanici sestaví rámečku, dalšímu nainstaluje modul a tak dále.</span><span class="sxs-lookup"><span data-stu-id="5b5aa-107">As each vehicle passes through the assembly line, one station assembles the frame, the next one installs the engine, and so on.</span></span> <span data-ttu-id="5b5aa-108">Vzhledem sestavení řádku umožňuje více vozidel pro sestavení ve stejnou dobu, poskytuje lepší propustnost než ty dokončení vozidel jeden najednou.</span><span class="sxs-lookup"><span data-stu-id="5b5aa-108">Because an assembly line enables multiple vehicles to be assembled at the same time, it provides better throughput than assembling complete vehicles one at a time.</span></span>  
  
> [!TIP]
>  <span data-ttu-id="5b5aa-109">Knihovna toku dat TPL (<xref:System.Threading.Tasks.Dataflow?displayProperty=nameWithType> oboru názvů) není distribuované s [!INCLUDE[net_v45](../../../includes/net-v45-md.md)].</span><span class="sxs-lookup"><span data-stu-id="5b5aa-109">The TPL Dataflow Library (<xref:System.Threading.Tasks.Dataflow?displayProperty=nameWithType> namespace) is not distributed with the [!INCLUDE[net_v45](../../../includes/net-v45-md.md)].</span></span> <span data-ttu-id="5b5aa-110">K instalaci <xref:System.Threading.Tasks.Dataflow> obor názvů, otevřete projekt v [!INCLUDE[vs_dev11_long](../../../includes/vs-dev11-long-md.md)], zvolte **spravovat balíčky NuGet** z nabídky projektu a vyhledejte online `Microsoft.Tpl.Dataflow` balíčku.</span><span class="sxs-lookup"><span data-stu-id="5b5aa-110">To install the <xref:System.Threading.Tasks.Dataflow> namespace, open your project in [!INCLUDE[vs_dev11_long](../../../includes/vs-dev11-long-md.md)], choose **Manage NuGet Packages** from the Project menu, and search online for the `Microsoft.Tpl.Dataflow` package.</span></span>  
  
 <span data-ttu-id="5b5aa-111">Tento dokument ukazuje, kanálů toku dat, což seznam *Iliad Homer* z webu a hledání text tak, aby odpovídaly jednotlivých slov s slova tohoto zpětného znaků první slova.</span><span class="sxs-lookup"><span data-stu-id="5b5aa-111">This document demonstrates a dataflow pipeline that downloads the book *The Iliad of Homer* from a website and searches the text to match individual words with words that reverse the first word's characters.</span></span> <span data-ttu-id="5b5aa-112">Vytvoření kanálu toku dat v tomto dokumentu se skládá z následujících kroků:</span><span class="sxs-lookup"><span data-stu-id="5b5aa-112">The formation of the dataflow pipeline in this document consists of the following steps:</span></span>  
  
1.  <span data-ttu-id="5b5aa-113">Vytvořte bloků toku dat, které se účastní v kanálu.</span><span class="sxs-lookup"><span data-stu-id="5b5aa-113">Create the dataflow blocks that participate in the pipeline.</span></span>  
  
2.  <span data-ttu-id="5b5aa-114">Připojení každého bloku toku dat k další blok v kanálu.</span><span class="sxs-lookup"><span data-stu-id="5b5aa-114">Connect each dataflow block to the next block in the pipeline.</span></span> <span data-ttu-id="5b5aa-115">Každý blok přijme jako vstup výstupu k předchozímu bloku v kanálu.</span><span class="sxs-lookup"><span data-stu-id="5b5aa-115">Each block receives as input the output of the previous block in the pipeline.</span></span>  
  
3.  <span data-ttu-id="5b5aa-116">Pro každého bloku toku dat vytvořte pokračování úlohu, která nastaví další blok do stavu dokončení, po dokončení k předchozímu bloku.</span><span class="sxs-lookup"><span data-stu-id="5b5aa-116">For each dataflow block, create a continuation task that sets the next block to the completed state after the previous block finishes.</span></span>  
  
4.  <span data-ttu-id="5b5aa-117">Odesílání dat na head kanálu.</span><span class="sxs-lookup"><span data-stu-id="5b5aa-117">Post data to the head of the pipeline.</span></span>  
  
5.  <span data-ttu-id="5b5aa-118">Označení hlavního kanálu jako dokončenou.</span><span class="sxs-lookup"><span data-stu-id="5b5aa-118">Mark the head of the pipeline as completed.</span></span>  
  
6.  <span data-ttu-id="5b5aa-119">Počkejte, než pro kanál pro dokončení veškeré práce.</span><span class="sxs-lookup"><span data-stu-id="5b5aa-119">Wait for the pipeline to complete all work.</span></span>  
  
## <a name="prerequisites"></a><span data-ttu-id="5b5aa-120">Požadavky</span><span class="sxs-lookup"><span data-stu-id="5b5aa-120">Prerequisites</span></span>  
 <span data-ttu-id="5b5aa-121">Čtení [toku dat](../../../docs/standard/parallel-programming/dataflow-task-parallel-library.md) před spuštěním tohoto průvodce.</span><span class="sxs-lookup"><span data-stu-id="5b5aa-121">Read [Dataflow](../../../docs/standard/parallel-programming/dataflow-task-parallel-library.md) before you start this walkthrough.</span></span>  
  
## <a name="creating-a-console-application"></a><span data-ttu-id="5b5aa-122">Vytvoření aplikace konzoly</span><span class="sxs-lookup"><span data-stu-id="5b5aa-122">Creating a Console Application</span></span>  
 <span data-ttu-id="5b5aa-123">V [!INCLUDE[vsprvs](../../../includes/vsprvs-md.md)], vytvoření [!INCLUDE[csprcs](../../../includes/csprcs-md.md)] nebo [!INCLUDE[vbprvb](../../../includes/vbprvb-md.md)] projekt konzolové aplikace.</span><span class="sxs-lookup"><span data-stu-id="5b5aa-123">In [!INCLUDE[vsprvs](../../../includes/vsprvs-md.md)], create a [!INCLUDE[csprcs](../../../includes/csprcs-md.md)] or [!INCLUDE[vbprvb](../../../includes/vbprvb-md.md)] Console Application project.</span></span> <span data-ttu-id="5b5aa-124">Přidáte odkaz na System.Threading.Tasks.Dataflow.dll.</span><span class="sxs-lookup"><span data-stu-id="5b5aa-124">Add a reference to System.Threading.Tasks.Dataflow.dll.</span></span>  
  
 <span data-ttu-id="5b5aa-125">Alternativně vytvořte soubor s názvem `ReverseWords.cs` (`ReverseWords.vb` pro [!INCLUDE[vbprvb](../../../includes/vbprvb-md.md)]), a poté spusťte následující příkaz v okně příkazového řádku Visual Studia kompilace projektu.</span><span class="sxs-lookup"><span data-stu-id="5b5aa-125">Alternatively, create a file and name it `ReverseWords.cs` (`ReverseWords.vb` for [!INCLUDE[vbprvb](../../../includes/vbprvb-md.md)]), and then run the following command in a Visual Studio Command Prompt window to compile the project.</span></span>  
  
 [!INCLUDE[csprcs](../../../includes/csprcs-md.md)]  
  
 <span data-ttu-id="5b5aa-126">**csc.exe /r:System.Threading.Tasks.Dataflow.dll ReverseWords.cs**</span><span class="sxs-lookup"><span data-stu-id="5b5aa-126">**csc.exe /r:System.Threading.Tasks.Dataflow.dll ReverseWords.cs**</span></span>  
  
 [!INCLUDE[vbprvb](../../../includes/vbprvb-md.md)]  
  
 <span data-ttu-id="5b5aa-127">**Vbc.exe /r:System.Threading.Tasks.Dataflow.dll ReverseWords.vb**</span><span class="sxs-lookup"><span data-stu-id="5b5aa-127">**vbc.exe /r:System.Threading.Tasks.Dataflow.dll ReverseWords.vb**</span></span>  
  
 <span data-ttu-id="5b5aa-128">Přidejte následující kód do projektu pro vytvoření základní aplikace.</span><span class="sxs-lookup"><span data-stu-id="5b5aa-128">Add the following code to your project to create the basic application.</span></span>  
  
 [!code-csharp[TPLDataflow_Palindromes#2](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_palindromes/cs/dataflowpalindromes.cs#2)]
 [!code-vb[TPLDataflow_Palindromes#2](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_palindromes/vb/dataflowpalindromes.vb#2)]  
  
## <a name="creating-the-dataflow-blocks"></a><span data-ttu-id="5b5aa-129">Vytváření bloků toku dat</span><span class="sxs-lookup"><span data-stu-id="5b5aa-129">Creating the Dataflow Blocks</span></span>  
 <span data-ttu-id="5b5aa-130">Přidejte následující kód, který `Main` metodu pro vytvoření bloků toku dat, které se účastní v kanálu.</span><span class="sxs-lookup"><span data-stu-id="5b5aa-130">Add the following code to the `Main` method to create the dataflow blocks that participate in the pipeline.</span></span> <span data-ttu-id="5b5aa-131">Následující tabulky shrnuje roli každý člen kanálu.</span><span class="sxs-lookup"><span data-stu-id="5b5aa-131">The table that follows summarizes the role of each member of the pipeline.</span></span>  
  
 [!code-csharp[TPLDataflow_Palindromes#3](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_palindromes/cs/dataflowpalindromes.cs#3)]
 [!code-vb[TPLDataflow_Palindromes#3](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_palindromes/vb/dataflowpalindromes.vb#3)]  
  
|<span data-ttu-id="5b5aa-132">Člen</span><span class="sxs-lookup"><span data-stu-id="5b5aa-132">Member</span></span>|<span data-ttu-id="5b5aa-133">Typ</span><span class="sxs-lookup"><span data-stu-id="5b5aa-133">Type</span></span>|<span data-ttu-id="5b5aa-134">Popis</span><span class="sxs-lookup"><span data-stu-id="5b5aa-134">Description</span></span>|  
|------------|----------|-----------------|  
|`downloadString`|<xref:System.Threading.Tasks.Dataflow.TransformBlock%602>|<span data-ttu-id="5b5aa-135">Stáhne kniha text z webu.</span><span class="sxs-lookup"><span data-stu-id="5b5aa-135">Downloads the book text from the Web.</span></span>|  
|`createWordList`|<xref:System.Threading.Tasks.Dataflow.TransformBlock%602>|<span data-ttu-id="5b5aa-136">Do pole slova odděluje text adresáře.</span><span class="sxs-lookup"><span data-stu-id="5b5aa-136">Separates the book text into an array of words.</span></span>|  
|`filterWordList`|<xref:System.Threading.Tasks.Dataflow.TransformBlock%602>|<span data-ttu-id="5b5aa-137">Odebere z slovo krátká slova pole, objednávky výsledné slova abecedně a odeberte duplicitní položky.</span><span class="sxs-lookup"><span data-stu-id="5b5aa-137">Removes short words from the word array, orders the resulting words alphabetically, and remove duplicates.</span></span>|  
|`findReversedWords`|<xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602>|<span data-ttu-id="5b5aa-138">Vyhledá všechny slova v kolekci filtrované word pole, jejichž zpětného dochází také v poli aplikace word.</span><span class="sxs-lookup"><span data-stu-id="5b5aa-138">Finds all words in the filtered word array collection whose reverse also occurs in the word array.</span></span>|  
|`printReversedWords`|<xref:System.Threading.Tasks.Dataflow.ActionBlock%601>|<span data-ttu-id="5b5aa-139">Zobrazí slova a odpovídající zpětného vyhledávání do konzoly.</span><span class="sxs-lookup"><span data-stu-id="5b5aa-139">Displays words and the corresponding reverse words to the console.</span></span>|  
  
 <span data-ttu-id="5b5aa-140">I když můžete sloučit více kroků v kanálu toku dat v tomto příkladu do jeden krok, příklad ukazuje, koncept skládání více nezávislých toku dat úlohy musíte provést úlohu větší.</span><span class="sxs-lookup"><span data-stu-id="5b5aa-140">Although you could combine multiple steps in the dataflow pipeline in this example into one step, the example illustrates the concept of composing multiple independent dataflow tasks to perform a larger task.</span></span> <span data-ttu-id="5b5aa-141">Tento příklad používá <xref:System.Threading.Tasks.Dataflow.TransformBlock%602> aby každý člen kanálu pro provádění operací na jeho vstupních dat a odesílání výsledky na další krok v kanálu.</span><span class="sxs-lookup"><span data-stu-id="5b5aa-141">The example uses <xref:System.Threading.Tasks.Dataflow.TransformBlock%602> to enable each member of the pipeline to perform an operation on its input data and send the results to the next step in the pipeline.</span></span> <span data-ttu-id="5b5aa-142">`findReversedWords` Člen kanálu <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602> objekt, protože vytváří několik nezávislých výstupů pro každý vstupní.</span><span class="sxs-lookup"><span data-stu-id="5b5aa-142">The `findReversedWords` member of the pipeline is a <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602> object because it produces multiple independent outputs for each input.</span></span> <span data-ttu-id="5b5aa-143">Tail kanálu `printReversedWords`, je <xref:System.Threading.Tasks.Dataflow.ActionBlock%601> objekt, protože vstupní provádí akce a nevytváří výsledku.</span><span class="sxs-lookup"><span data-stu-id="5b5aa-143">The tail of the pipeline, `printReversedWords`, is a <xref:System.Threading.Tasks.Dataflow.ActionBlock%601> object because it performs an action on its input, and does not produce a result.</span></span>  
  
## <a name="forming-the-pipeline"></a><span data-ttu-id="5b5aa-144">Které tvoří kanálu</span><span class="sxs-lookup"><span data-stu-id="5b5aa-144">Forming the Pipeline</span></span>  
 <span data-ttu-id="5b5aa-145">Přidejte následující kód k připojení každého bloku k další blok v kanálu.</span><span class="sxs-lookup"><span data-stu-id="5b5aa-145">Add the following code to connect each block to the next block in the pipeline.</span></span>  
  
 <span data-ttu-id="5b5aa-146">Při volání <xref:System.Threading.Tasks.Dataflow.DataflowBlock.LinkTo%2A> metoda pro připojení k cílové bloku toku dat bloku toku dat zdroj bloku toku dat zdroj rozšíří dat na cílový blok, jakmile data k dispozici.</span><span class="sxs-lookup"><span data-stu-id="5b5aa-146">When you call the <xref:System.Threading.Tasks.Dataflow.DataflowBlock.LinkTo%2A> method to connect a source dataflow block to a target dataflow block, the source dataflow block propagates data to the target block as data becomes available.</span></span>  
  
 [!code-csharp[TPLDataflow_Palindromes#4](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_palindromes/cs/dataflowpalindromes.cs#4)]
 [!code-vb[TPLDataflow_Palindromes#4](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_palindromes/vb/dataflowpalindromes.vb#4)]  
  
## <a name="creating-the-completion-tasks"></a><span data-ttu-id="5b5aa-147">Vytvoření úlohy dokončení</span><span class="sxs-lookup"><span data-stu-id="5b5aa-147">Creating the Completion Tasks</span></span>  
 <span data-ttu-id="5b5aa-148">Přidejte následující kód k povolení jednotlivých bloků toku dat k provedení konečné akce, poté, co zpracuje všechna data.</span><span class="sxs-lookup"><span data-stu-id="5b5aa-148">Add the following code to enable each dataflow block to perform a final action after it processes all data.</span></span>  
  
 [!code-csharp[TPLDataflow_Palindromes#5](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_palindromes/cs/dataflowpalindromes.cs#5)]
 [!code-vb[TPLDataflow_Palindromes#5](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_palindromes/vb/dataflowpalindromes.vb#5)]  
  
 <span data-ttu-id="5b5aa-149">Každý úkol dokončení potřebný k šíření dokončení prostřednictvím kanálu, nastaví další blok toku dat stavu dokončení.</span><span class="sxs-lookup"><span data-stu-id="5b5aa-149">To propagate completion through the pipeline, each completion task sets the next dataflow block to the completed state.</span></span> <span data-ttu-id="5b5aa-150">Například pokud head kanálu je nastaven na stavu dokončení, ho zpracovává všechny zbývající zprávy ve vyrovnávací paměti a pak spustí jeho dokončení úkolu, který nastaví druhý člen kanálu stavu dokončení.</span><span class="sxs-lookup"><span data-stu-id="5b5aa-150">For example, when the head of the pipeline is set to the completed state, it processes any remaining buffered messages and then runs its completion task, which sets the second member of the pipeline to the completed state.</span></span> <span data-ttu-id="5b5aa-151">Druhý člen kanálu zase zpracovává všechny zbývající zprávy ve vyrovnávací paměti a poté spustí jeho dokončení úkolu, který nastaví třetí člena kanálu do stavu dokončení.</span><span class="sxs-lookup"><span data-stu-id="5b5aa-151">The second member of the pipeline in turn processes any remaining buffered messages and then runs its completion task, which sets the third member of the pipeline to the completed state.</span></span> <span data-ttu-id="5b5aa-152">Tento proces pokračuje, dokud nedokončí všichni členové kanálu.</span><span class="sxs-lookup"><span data-stu-id="5b5aa-152">This process continues until all members of the pipeline finish.</span></span> <span data-ttu-id="5b5aa-153">Tento příklad používá `delegate` – klíčové slovo (`Function` v [!INCLUDE[vbprvb](../../../includes/vbprvb-md.md)]) k definování úloh pokračování.</span><span class="sxs-lookup"><span data-stu-id="5b5aa-153">This example uses the `delegate` keyword (`Function` in [!INCLUDE[vbprvb](../../../includes/vbprvb-md.md)]) to define the continuation tasks.</span></span>  
  
## <a name="posting-data-to-the-pipeline"></a><span data-ttu-id="5b5aa-154">Odesílání dat do kanálu</span><span class="sxs-lookup"><span data-stu-id="5b5aa-154">Posting Data to the Pipeline</span></span>  
 <span data-ttu-id="5b5aa-155">Přidejte následující kód o vystavení adresy URL knihy *Iliad Homer* do hlavního kanálu toku dat.</span><span class="sxs-lookup"><span data-stu-id="5b5aa-155">Add the following code to post the URL of the book *The Iliad of Homer* to the head of the dataflow pipeline.</span></span>  
  
 [!code-csharp[TPLDataflow_Palindromes#6](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_palindromes/cs/dataflowpalindromes.cs#6)]
 [!code-vb[TPLDataflow_Palindromes#6](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_palindromes/vb/dataflowpalindromes.vb#6)]  
  
 <span data-ttu-id="5b5aa-156">Tento příklad používá <xref:System.Threading.Tasks.Dataflow.DataflowBlock.Post%2A?displayProperty=nameWithType> synchronně posílat data do hlavního kanálu.</span><span class="sxs-lookup"><span data-stu-id="5b5aa-156">This example uses <xref:System.Threading.Tasks.Dataflow.DataflowBlock.Post%2A?displayProperty=nameWithType> to synchronously send data to the head of the pipeline.</span></span> <span data-ttu-id="5b5aa-157">Použití <xref:System.Threading.Tasks.Dataflow.DataflowBlock.SendAsync%2A?displayProperty=nameWithType> metoda při asynchronně musíte odesílat data do toku dat uzlu.</span><span class="sxs-lookup"><span data-stu-id="5b5aa-157">Use the <xref:System.Threading.Tasks.Dataflow.DataflowBlock.SendAsync%2A?displayProperty=nameWithType> method when you must asynchronously send data to a dataflow node.</span></span>  
  
## <a name="completing-pipeline-activity"></a><span data-ttu-id="5b5aa-158">Dokončení aktivity kanálu</span><span class="sxs-lookup"><span data-stu-id="5b5aa-158">Completing Pipeline Activity</span></span>  
 <span data-ttu-id="5b5aa-159">Přidejte následující kód k označení hlavního kanálu jako dokončenou.</span><span class="sxs-lookup"><span data-stu-id="5b5aa-159">Add the following code to mark the head of the pipeline as completed.</span></span> <span data-ttu-id="5b5aa-160">Head kanálu spustí úkolu pokračování po zpracovává všechny uložené ve vyrovnávací paměti zpráv.</span><span class="sxs-lookup"><span data-stu-id="5b5aa-160">The head of the pipeline runs its continuation task after it processes all buffered messages.</span></span> <span data-ttu-id="5b5aa-161">Tato úloha pokračování rozšíří stavu dokončení prostřednictvím kanálu.</span><span class="sxs-lookup"><span data-stu-id="5b5aa-161">This continuation task propagates the completed state through the pipeline.</span></span>  
  
 [!code-csharp[TPLDataflow_Palindromes#7](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_palindromes/cs/dataflowpalindromes.cs#7)]
 [!code-vb[TPLDataflow_Palindromes#7](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_palindromes/vb/dataflowpalindromes.vb#7)]  
  
 <span data-ttu-id="5b5aa-162">Tento příklad odešle jednu adresu URL prostřednictvím kanálu toku dat mají být zpracovány.</span><span class="sxs-lookup"><span data-stu-id="5b5aa-162">This example sends one URL through the dataflow pipeline to be processed.</span></span> <span data-ttu-id="5b5aa-163">Pokud odešlete více než jeden vstup prostřednictvím kanálu, zavolejte <xref:System.Threading.Tasks.Dataflow.IDataflowBlock.Complete%2A?displayProperty=nameWithType> metoda po odeslání veškerý vstup.</span><span class="sxs-lookup"><span data-stu-id="5b5aa-163">If you send more than one input through a pipeline, call the <xref:System.Threading.Tasks.Dataflow.IDataflowBlock.Complete%2A?displayProperty=nameWithType> method after you submit all the input.</span></span> <span data-ttu-id="5b5aa-164">Tento krok můžete vynechat, pokud vaše aplikace nemá žádný dobře definovaný bod, ve kterém dat již není k dispozici nebo není nutné čekat na kanálu ukončíte aplikace.</span><span class="sxs-lookup"><span data-stu-id="5b5aa-164">You can omit this step if your application has no well-defined point at which data is no longer available or the application does not have to wait for the pipeline to finish.</span></span>  
  
## <a name="waiting-for-the-pipeline-to-finish"></a><span data-ttu-id="5b5aa-165">Čekání na kanálu, který má být dokončit</span><span class="sxs-lookup"><span data-stu-id="5b5aa-165">Waiting for the Pipeline to Finish</span></span>  
 <span data-ttu-id="5b5aa-166">Přidejte následující kód čekat kanálu ukončíte.</span><span class="sxs-lookup"><span data-stu-id="5b5aa-166">Add the following code to wait for the pipeline to finish.</span></span> <span data-ttu-id="5b5aa-167">Protože tento příklad používá úloh pokračování potřebný k šíření dokončení prostřednictvím kanálu, celkový operace je dokončena po dokončení tail kanálu.</span><span class="sxs-lookup"><span data-stu-id="5b5aa-167">Because this example uses continuation tasks to propagate completion through the pipeline, the overall operation is finished when the tail of the pipeline finishes.</span></span>  
  
 [!code-csharp[TPLDataflow_Palindromes#8](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_palindromes/cs/dataflowpalindromes.cs#8)]
 [!code-vb[TPLDataflow_Palindromes#8](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_palindromes/vb/dataflowpalindromes.vb#8)]  
  
 <span data-ttu-id="5b5aa-168">Můžete počkat na dokončení toku dat z libovolného vlákna nebo z více vláken ve stejnou dobu.</span><span class="sxs-lookup"><span data-stu-id="5b5aa-168">You can wait for dataflow completion from any thread or from multiple threads at the same time.</span></span>  
  
## <a name="the-complete-example"></a><span data-ttu-id="5b5aa-169">Kompletní příklad</span><span class="sxs-lookup"><span data-stu-id="5b5aa-169">The Complete Example</span></span>  
 <span data-ttu-id="5b5aa-170">Následující příklad ukazuje kompletní kód v tomto návodu.</span><span class="sxs-lookup"><span data-stu-id="5b5aa-170">The following example shows the complete code for this walkthrough.</span></span>  
  
 [!code-csharp[TPLDataflow_Palindromes#1](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_palindromes/cs/dataflowpalindromes.cs#1)]
 [!code-vb[TPLDataflow_Palindromes#1](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_palindromes/vb/dataflowpalindromes.vb#1)]  
  
## <a name="next-steps"></a><span data-ttu-id="5b5aa-171">Další kroky</span><span class="sxs-lookup"><span data-stu-id="5b5aa-171">Next Steps</span></span>  
 <span data-ttu-id="5b5aa-172">Tento příklad odešle jednu adresu URL prostřednictvím kanálu toku dat zpracovat.</span><span class="sxs-lookup"><span data-stu-id="5b5aa-172">This example sends one URL to process through the dataflow pipeline.</span></span> <span data-ttu-id="5b5aa-173">Odešlete více než jednu vstupní hodnotu prostřednictvím kanálu, lze do aplikace, který vypadá takto: jak může částí pohyb objekt pro vytváření automobilů zavádět formuláře paralelního zpracování.</span><span class="sxs-lookup"><span data-stu-id="5b5aa-173">If you send more than one input value through a pipeline, you can introduce a form of parallelism into your application that resembles how parts might move through an automobile factory.</span></span> <span data-ttu-id="5b5aa-174">Při prvním členem kanálu odešle svůj výsledek na druhý člen, může zpracovat jiné položce paralelně jako druhý člen zpracovává první výsledku.</span><span class="sxs-lookup"><span data-stu-id="5b5aa-174">When the first member of the pipeline sends its result to the second member, it can process another item in parallel as the second member processes the first result.</span></span>  
  
 <span data-ttu-id="5b5aa-175">Paralelismus, které je dosaženo pomocí kanály toku dat se označuje jako *hrubý paralelismus* vzhledem k tomu, že se obvykle skládá z méně, větší úlohy.</span><span class="sxs-lookup"><span data-stu-id="5b5aa-175">The parallelism that is achieved by using dataflow pipelines is known as *coarse-grained parallelism* because it typically consists of fewer, larger tasks.</span></span> <span data-ttu-id="5b5aa-176">Můžete také dalších *podrobných paralelismus* menší, krátce běžící úlohy v kanálu toku dat.</span><span class="sxs-lookup"><span data-stu-id="5b5aa-176">You can also use a more *fine-grained parallelism* of smaller, short-running tasks in a dataflow pipeline.</span></span> <span data-ttu-id="5b5aa-177">V tomto příkladu `findReversedWords` člen kanálu používá <xref:System.Threading.Tasks.Parallel.ForEach%2A?displayProperty=nameWithType> metoda zpracovat více položek v seznamu pracovní paralelně.</span><span class="sxs-lookup"><span data-stu-id="5b5aa-177">In this example, the `findReversedWords` member of the pipeline uses the <xref:System.Threading.Tasks.Parallel.ForEach%2A?displayProperty=nameWithType> method to process multiple items in the work list in parallel.</span></span> <span data-ttu-id="5b5aa-178">Použití podrobného paralelismu v hrubý kanálu lze vylepšit celkovou propustnost.</span><span class="sxs-lookup"><span data-stu-id="5b5aa-178">The use of fine-grained parallelism in a coarse-grained pipeline can improve overall throughput.</span></span>  
  
 <span data-ttu-id="5b5aa-179">Zdroj bloku toku dat může připojit i k více bloků cíl k vytvoření *toku dat sítě*.</span><span class="sxs-lookup"><span data-stu-id="5b5aa-179">You can also connect a source dataflow block to multiple target blocks to create a *dataflow network*.</span></span> <span data-ttu-id="5b5aa-180">Přetížené verze <xref:System.Threading.Tasks.Dataflow.DataflowBlock.LinkTo%2A> metoda trvá <xref:System.Predicate%601> objekt, který definuje, zda cílový blok přijímá každou zprávu na základě jeho hodnoty.</span><span class="sxs-lookup"><span data-stu-id="5b5aa-180">The overloaded version of the <xref:System.Threading.Tasks.Dataflow.DataflowBlock.LinkTo%2A> method takes a <xref:System.Predicate%601> object that defines whether the target block accepts each message based on its value.</span></span> <span data-ttu-id="5b5aa-181">Většina bloku typů toku dat, které se chovají jako zdroje nabízejí zprávy na všech připojených cíl bloky, v pořadí, ve kterém byli připojeni, dokud jeden bloků přijímá zprávy.</span><span class="sxs-lookup"><span data-stu-id="5b5aa-181">Most dataflow block types that act as sources offer messages to all connected target blocks, in the order in which they were connected, until one of the blocks accepts that message.</span></span> <span data-ttu-id="5b5aa-182">Když použijete tento filtrování mechanismus, můžete vytvořit systémy bloků toku dat připojené, které budou řídit určitá data prostřednictvím jednu cestu a další data prostřednictvím jiné cesty.</span><span class="sxs-lookup"><span data-stu-id="5b5aa-182">By using this filtering mechanism, you can create systems of connected dataflow blocks that direct certain data through one path and other data through another path.</span></span> <span data-ttu-id="5b5aa-183">Příklad, který používá filtrování vytvořit síť toku dat, naleznete v části [návod: použití toku dat ve formulářové aplikaci Windows](../../../docs/standard/parallel-programming/walkthrough-using-dataflow-in-a-windows-forms-application.md).</span><span class="sxs-lookup"><span data-stu-id="5b5aa-183">For an example that uses filtering to create a dataflow network, see [Walkthrough: Using Dataflow in a Windows Forms Application](../../../docs/standard/parallel-programming/walkthrough-using-dataflow-in-a-windows-forms-application.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="5b5aa-184">Viz také</span><span class="sxs-lookup"><span data-stu-id="5b5aa-184">See Also</span></span>  
 [<span data-ttu-id="5b5aa-185">Tok dat</span><span class="sxs-lookup"><span data-stu-id="5b5aa-185">Dataflow</span></span>](../../../docs/standard/parallel-programming/dataflow-task-parallel-library.md)
