---
title: Kroky v pracovním postupu vnější smyčky DevOps pro aplikaci Docker
description: Kontejnerizované Docker životního cyklu aplikací s Microsoft platforma a nástroje
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 09/22/2017
ms.openlocfilehash: b88eb5637bf266ab2e0a6d255f2e83f6aadc8af2
ms.sourcegitcommit: 979597cd8055534b63d2c6ee8322938a27d0c87b
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 06/29/2018
ms.locfileid: "37106159"
---
# <a name="steps-in-the-outer-loop-devops-workflow-for-a-docker-application"></a><span data-ttu-id="3df7c-103">Kroky v pracovním postupu vnější smyčky DevOps pro aplikaci Docker</span><span class="sxs-lookup"><span data-stu-id="3df7c-103">Steps in the outer-loop DevOps workflow for a Docker application</span></span>

<span data-ttu-id="3df7c-104">Obrázek 5-1 uvede začátku do konce Popis shromažďování kroky zahrnující pracovního postupu DevOps vnější smyčky.</span><span class="sxs-lookup"><span data-stu-id="3df7c-104">Figure 5-1 presents an end-to-end depiction of the steps comprising the DevOps outer-loop workflow.</span></span>

![](./media/image1.png)

<span data-ttu-id="3df7c-105">Obrázek 5-1: pracovní postup vnější smyčky DevOps pro Docker aplikací pomocí nástroje společnosti Microsoft</span><span class="sxs-lookup"><span data-stu-id="3df7c-105">Figure 5-1: DevOps outer-loop workflow for Docker applications with Microsoft tools</span></span>

<span data-ttu-id="3df7c-106">Nyní se podívejme se na každý z těchto kroků podrobněji.</span><span class="sxs-lookup"><span data-stu-id="3df7c-106">Now, let's examine each of these steps in greater detail.</span></span>

## <a name="step-1-inner-loop-development-workflow"></a><span data-ttu-id="3df7c-107">Krok 1: Pracovní postup vývoje vnitřní smyčky</span><span class="sxs-lookup"><span data-stu-id="3df7c-107">Step 1: Inner-loop development workflow</span></span>

<span data-ttu-id="3df7c-108">Tento krok je podrobně vysvětleny v kapitole 4, ale recap, zde je kde vnější smyčky začne, v okamžiku, kdy vývojář nabízených oznámení kódu do systému správy správy zdrojů (např. Git) inicializaci CI kanálu akce.</span><span class="sxs-lookup"><span data-stu-id="3df7c-108">This step is explained in detail in Chapter 4, but, to recap, here is where the outer-loop begins, the moment at which a developer pushes code to the source control management system (like Git) initiating CI pipeline actions.</span></span>

## <a name="step-2-source-code-control-integration-and-management-with-visual-studio-team-services-and-git"></a><span data-ttu-id="3df7c-109">Krok 2: Integrace ovládacích prvků zdrojového kódu a správy pomocí nástroje Visual Studio Team Services a Git</span><span class="sxs-lookup"><span data-stu-id="3df7c-109">Step 2: Source-Code Control integration and management with Visual Studio Team Services and Git</span></span>

<span data-ttu-id="3df7c-110">V tomto kroku musíte mít systém správy verzí získat konsolidované verzi všechny kód pocházejících z různých vývojáři v týmu.</span><span class="sxs-lookup"><span data-stu-id="3df7c-110">At this step, you need to have a version-control system to gather a consolidated version of all the code coming from the different developers in the team.</span></span>

<span data-ttu-id="3df7c-111">I když řízení zdrojového kódu (SCC) a správy zdrojového kódu zdát sekundu povaze na Většina vývojářů, při vytváření aplikací pro Docker v DevOps životní cyklus, je velmi důležité zdůraznit, že nesmí odeslat imagí Dockeru s aplikací přímo do globální Docker registru (například Azure kontejneru registru nebo úložiště Docker Hub) z počítače pro vývojáře.</span><span class="sxs-lookup"><span data-stu-id="3df7c-111">Even though source-code control (SCC) and source-code management might seem second-nature to most developers, when creating Docker applications in a DevOps life cycle, it is critical to emphasize that you must not submit the Docker images with the application directly to the global Docker Registry (like Azure Container Registry or Docker Hub) from the developer's machine.</span></span> <span data-ttu-id="3df7c-112">Naopak imagí Dockeru vydání a nasazovány do provozních prostředí musí být vytvořeny pouze na zdrojový kód, který je právě integrován v globální sestavení nebo kanálu CI podle vašeho úložiště zdrojového kódu (např. Git).</span><span class="sxs-lookup"><span data-stu-id="3df7c-112">On the contrary, the Docker images to be released and deployed to production environments must be created solely on the source code that is being integrated in your global build or CI pipeline based on your source-code repository (like Git).</span></span>

<span data-ttu-id="3df7c-113">Místní obrázky vygenerována vývojáři sami má být používána pouze vývojáři při testování v rámci své vlastní počítače.</span><span class="sxs-lookup"><span data-stu-id="3df7c-113">The local images generated by the developers themselves should be used just by the developers when testing within their own machines.</span></span> <span data-ttu-id="3df7c-114">Z tohoto důvodu je důležité mít aktivovaný z kódu SCC DevOps kanálu.</span><span class="sxs-lookup"><span data-stu-id="3df7c-114">This is why it is critical to have the DevOps pipeline activated from the SCC code.</span></span>

<span data-ttu-id="3df7c-115">Visual Studio Team Services a serveru Team Foundation Server podporují Git a správy verzí Team Foundation.</span><span class="sxs-lookup"><span data-stu-id="3df7c-115">Visual Studio Team Services and Team Foundation Server support Git and Team Foundation Version Control.</span></span> <span data-ttu-id="3df7c-116">Můžete vybrat mezi nimi a použít jej pro prostředí Microsoft začátku do konce.</span><span class="sxs-lookup"><span data-stu-id="3df7c-116">You can choose between them and use it for an end-to-end Microsoft experience.</span></span> <span data-ttu-id="3df7c-117">Ale můžete také spravovat kód do externího úložiště (například Githubu, místní úložiště Git nebo Subversion) a stále možné se k nim připojit a získat kód jako výchozí bod pro svůj DevOps CI kanál.</span><span class="sxs-lookup"><span data-stu-id="3df7c-117">However, you also can manage your code in external repositories (like GitHub, on-premises Git repositories, or Subversion) and still be able to connect to it and get the code as the starting point for your DevOps CI pipeline.</span></span>

## <a name="step-3-build-ci-integrate-and-test-with-visual-studio-team-services-and-docker"></a><span data-ttu-id="3df7c-118">Krok 3: Sestavení, CI, integrace a testování pomocí sady Visual Studio Team Services a Docker</span><span class="sxs-lookup"><span data-stu-id="3df7c-118">Step 3: Build, CI, Integrate, and Test with Visual Studio Team Services and Docker</span></span>

<span data-ttu-id="3df7c-119">CI vyplývá jako standard pro testování moderní softwaru a doručení.</span><span class="sxs-lookup"><span data-stu-id="3df7c-119">CI has emerged as a standard for modern software testing and delivery.</span></span> <span data-ttu-id="3df7c-120">Řešení Docker udržuje jasně oddělené oblasti zájmu mezi týmy vývoj a provoz.</span><span class="sxs-lookup"><span data-stu-id="3df7c-120">The Docker solution maintains a clear separation of concerns between the development and operations teams.</span></span> <span data-ttu-id="3df7c-121">Neměnitelnosti imagí Dockeru zajišťuje opakovatelných nasazení mezi co vyvinuté, testovat prostřednictvím položky konfigurace a spuštění v produkčním prostředí.</span><span class="sxs-lookup"><span data-stu-id="3df7c-121">The immutability of Docker images ensures a repeatable deployment between what's developed, tested through CI, and run in production.</span></span> <span data-ttu-id="3df7c-122">Modul docker nasazený na vývojáře přenosných počítačů a infrastruktury testovací zajišťuje kontejnery přenosné prostředích.</span><span class="sxs-lookup"><span data-stu-id="3df7c-122">Docker Engine deployed across the developer laptops and test infrastructure makes the containers portable across environments.</span></span>

<span data-ttu-id="3df7c-123">V tomto okamžiku až budete mít systém správy verzí s správný kód odeslat, musíte *sestavení service* vyzvednutí kód a spusťte testy a globální sestavení.</span><span class="sxs-lookup"><span data-stu-id="3df7c-123">At this point, after you have a version-control system with the correct code submitted, you need a *build service* to pick up the code and run the global build and tests.</span></span>

<span data-ttu-id="3df7c-124">Interní pracovní postup pro tento krok (CI, sestavení, testovací) je o vytváření položek konfigurace kanálu skládající se z vašeho kódu úložiště (Git, atd.), vašem serveru sestavení (Visual Studio Team Services), modul Docker a Docker registru.</span><span class="sxs-lookup"><span data-stu-id="3df7c-124">The internal workflow for this step (CI, build, test) is about the construction of a CI pipeline consisting of your code repository (Git, etc.), your build server (Visual Studio Team Services), Docker Engine, and a Docker Registry.</span></span>

<span data-ttu-id="3df7c-125">Můžete Visual Studio Team Services jako základ pro vytváření aplikací a nastavení svůj kanál položek konfigurace a publikování integrovaný "artefakty" "artefakty úložiště," které je popsané v dalším kroku.</span><span class="sxs-lookup"><span data-stu-id="3df7c-125">You can use Visual Studio Team Services as the foundation for building your applications and setting your CI pipeline, and for publishing the built "artifacts" to an "artifacts repository," which is explained in the next step.</span></span>

<span data-ttu-id="3df7c-126">Při použití Docker pro nasazení "poslední artefakty" k nasazení jsou imagí Dockeru vaší aplikace nebo služby vložených v nich.</span><span class="sxs-lookup"><span data-stu-id="3df7c-126">When using Docker for the deployment, the "final artifacts" to be deployed are Docker images with your application or services embedded within them.</span></span> <span data-ttu-id="3df7c-127">K publikování nebo poslat tyto bitové kopie *Docker registru* (privátní úložiště jako ty, které může mít v registru kontejner Azure nebo veřejné jeden jako Docker Hub registru, který se běžně používá pro oficiální základní Image).</span><span class="sxs-lookup"><span data-stu-id="3df7c-127">Those images are pushed or published to a *Docker Registry* (a private repository like the ones you can have in Azure Container Registry, or a public one like Docker Hub Registry, which is commonly used for official base images).</span></span>

<span data-ttu-id="3df7c-128">Tady je základní princip: CI kanálu bude spuštěna vypnout potvrzení změn do úložiště SCC jako Git.</span><span class="sxs-lookup"><span data-stu-id="3df7c-128">Here is the basic concept: The CI pipeline will be kicked-off by a commit to an SCC repository like Git.</span></span> <span data-ttu-id="3df7c-129">Potvrzení způsobí, že Visual Studio Team Services a spusťte úlohu sestavení v rámci kontejner Docker, po úspěšném dokončení této úlohy, nabízená bitovou kopii Docker Docker registru, jak je znázorněno na obrázku 5-2.</span><span class="sxs-lookup"><span data-stu-id="3df7c-129">The commit will cause Visual Studio Team Services to run a build job within a Docker container and, upon successful completion of that job, push a Docker image to the Docker Registry, as illustrated in Figure 5-2.</span></span>

![](./media/image2.png)

<span data-ttu-id="3df7c-130">Obrázek 5 – 2: kroky ve službě CI</span><span class="sxs-lookup"><span data-stu-id="3df7c-130">Figure 5-2: The steps involved in CI</span></span>

<span data-ttu-id="3df7c-131">Zde jsou základní kroky konfigurace pracovního postupu s Docker a Visual Studio Team Services:</span><span class="sxs-lookup"><span data-stu-id="3df7c-131">Here are the basic CI workflow steps with Docker and Visual Studio Team Services:</span></span>

1.  <span data-ttu-id="3df7c-132">Vývojář doručí potvrzení změn do úložiště SCC (Git/Visual Studio Team Services, GitHub, atd.).</span><span class="sxs-lookup"><span data-stu-id="3df7c-132">The developer pushes a commit to an SCC repository (Git/Visual Studio Team Services, GitHub, etc.).</span></span>

2.  <span data-ttu-id="3df7c-133">Pokud používáte Visual Studio Team Services nebo Git, CI je součástí, což znamená, že je stejně jednoduché jako výběrem zaškrtávacího políčka v sadě Visual Studio Team Services.</span><span class="sxs-lookup"><span data-stu-id="3df7c-133">If you're using Visual Studio Team Services or Git, CI is built in, which means that it is as simple as selecting a check box in Visual Studio Team Services.</span></span> <span data-ttu-id="3df7c-134">Pokud používáte externí SCC (např. Githubu), *webhooku* bude oznámit Visual Studio Team Services aktualizace nebo nabízená Git/Githubu.</span><span class="sxs-lookup"><span data-stu-id="3df7c-134">If you're using an external SCC (like GitHub), a *webhook* will notify Visual Studio Team Services of the update or push to Git/GitHub.</span></span>

3.  <span data-ttu-id="3df7c-135">Visual Studio Team Services vrátí SCC úložiště, včetně soubor Docker popisující bitovou kopii, jakož i kód aplikace a testování.</span><span class="sxs-lookup"><span data-stu-id="3df7c-135">Visual Studio Team Services pulls the SCC repository, including the DockerFile describing the image as well as the application and test code.</span></span>

4.  <span data-ttu-id="3df7c-136">Visual Studio Team Services popisky s číslo sestavení a sestavení Docker image.</span><span class="sxs-lookup"><span data-stu-id="3df7c-136">Visual Studio Team Services builds a Docker image and labels it with a build number.</span></span>

5.  <span data-ttu-id="3df7c-137">Visual Studio Team Services vytvoří kontejner Docker v rámci zřízené Docker hostitele a spustí příslušné testy.</span><span class="sxs-lookup"><span data-stu-id="3df7c-137">Visual Studio Team Services instantiates the Docker container within the provisioned Docker Host, and runs the appropriate tests.</span></span>

6.  <span data-ttu-id="3df7c-138">Pokud jsou testy úspěšné, bitovou kopii je nejdřív relabeled smysluplný název, abyste věděli, je "blessed sestavení" (například "/ 1.0.0" nebo jiné štítek) a pak instaluje do vaší Docker registru (úložiště Docker Hub, Azure kontejneru registru, DTR atd.)</span><span class="sxs-lookup"><span data-stu-id="3df7c-138">If the tests are successful, the image is first relabeled to a meaningful name so that you know it is a "blessed build" (like "/1.0.0" or any other label), and then pushed up to your Docker Registry (Docker Hub, Azure Container Registry, DTR, etc.)</span></span>

### <a name="implementing-the-ci-pipeline-with-visual-studio-team-services-and-the-docker-extension-for-visual-studio-team-services"></a><span data-ttu-id="3df7c-139">Implementace CI kanálu s Visual Studio Team Services a Docker rozšíření pro Visual Studio Team Services</span><span class="sxs-lookup"><span data-stu-id="3df7c-139">Implementing the CI pipeline with Visual Studio Team Services and the Docker extension for Visual Studio Team Services</span></span>

<span data-ttu-id="3df7c-140">[Rozšíření Visual Studio Team Services Docker](https://aka.ms/vstsdockerextension) přidá do kanálu CI se kterým můžete vytvářet bitové kopie Docker, nabízená imagí Dockeru ověření Docker registru, spustit imagí Dockeru nebo spuštění jiné operace, které nabízí úlohu Docker rozhraní příkazového řádku.</span><span class="sxs-lookup"><span data-stu-id="3df7c-140">The [Visual Studio Team Services Docker extension](https://aka.ms/vstsdockerextension) adds a task to your CI pipeline with which you can build Docker images, push Docker images to an authenticated Docker registry, run Docker images, or run other operations offered by the Docker CLI.</span></span> <span data-ttu-id="3df7c-141">Také přidá Docker Compose úloh, které můžete použít k sestavení, push a spouštět aplikace multicontainer Docker nebo spuštění jiné operace, které nabízí Docker Compose CLI, jak je znázorněno v obrázku 5-3.</span><span class="sxs-lookup"><span data-stu-id="3df7c-141">It also adds a Docker Compose task that you can use to build, push, and run multicontainer Docker applications, or run other operations offered by the Docker Compose CLI, as shown in Figure 5-3.</span></span>

![](./media/image3.png)

<span data-ttu-id="3df7c-142">Obrázek 5 – 3: kanálu Docker CI ve Visual Studio Team Services</span><span class="sxs-lookup"><span data-stu-id="3df7c-142">Figure 5-3: The Docker CI pipeline in Visual Studio Team Services</span></span>

<span data-ttu-id="3df7c-143">Rozšíření Docker pomocí koncových bodů služby pro hostitelů Docker a pro kontejner nebo registrech bitové kopie.</span><span class="sxs-lookup"><span data-stu-id="3df7c-143">The Docker extension can use service endpoints for Docker hosts and for container or image registries.</span></span> <span data-ttu-id="3df7c-144">Výchozí úlohy pomocí místního hostitele Docker, pokud je k dispozici (to aktuálně vyžaduje vlastní agenta Visual Studio Team Services); jinak vyžadují připojení hostitelů Docker zadat.</span><span class="sxs-lookup"><span data-stu-id="3df7c-144">The tasks default to using a local Docker host if available (this currently requires a custom Visual Studio Team Services agent); otherwise, they require that you provide a Docker host connection.</span></span> <span data-ttu-id="3df7c-145">Akce, které jsou závislé na ověřovaného s Docker registru, například když zavedete bitovou kopii, vyžadují, abyste zadali Docker registru připojení.</span><span class="sxs-lookup"><span data-stu-id="3df7c-145">Actions that depend on being authenticated with a Docker registry, such as pushing an image, require that you provide a Docker registry connection.</span></span>

<span data-ttu-id="3df7c-146">Ve vašem účtu Visual Studio Team Services instalaci rozšíření je Visual Studio Team Services Docker následující součásti:</span><span class="sxs-lookup"><span data-stu-id="3df7c-146">The Visual Studio Team Services Docker extension installs the following components in your Visual Studio Team Services account:</span></span>

-   <span data-ttu-id="3df7c-147">Koncový bod služby pro připojení k registru Docker</span><span class="sxs-lookup"><span data-stu-id="3df7c-147">A service endpoint for connecting to a Docker registry</span></span>

-   <span data-ttu-id="3df7c-148">Koncový bod služby pro připojení k hostiteli kontejner Docker</span><span class="sxs-lookup"><span data-stu-id="3df7c-148">A service endpoint for connecting to a Docker Container Host</span></span>

-   <span data-ttu-id="3df7c-149">Úloha Docker proveďte následující:</span><span class="sxs-lookup"><span data-stu-id="3df7c-149">A Docker task to do the following:</span></span>

-   <span data-ttu-id="3df7c-150">Vytvoření obrázku</span><span class="sxs-lookup"><span data-stu-id="3df7c-150">Build an image</span></span>

-   <span data-ttu-id="3df7c-151">Odešlete bitovou kopii nebo úložiště do registru</span><span class="sxs-lookup"><span data-stu-id="3df7c-151">Push an image or a repository to a registry</span></span>

-   <span data-ttu-id="3df7c-152">Spustit bitovou kopii v kontejneru</span><span class="sxs-lookup"><span data-stu-id="3df7c-152">Run an image in a container</span></span>

-   <span data-ttu-id="3df7c-153">Spusťte příkaz Docker</span><span class="sxs-lookup"><span data-stu-id="3df7c-153">Run a Docker command</span></span>

-   <span data-ttu-id="3df7c-154">Úloha Docker Compose spustit příkaz Docker Compose</span><span class="sxs-lookup"><span data-stu-id="3df7c-154">A Docker Compose task to run a Docker Compose command</span></span>

<span data-ttu-id="3df7c-155">Tyto úlohy Visual Studio Team Services sestavení hostitele nebo virtuálních počítačů Linux Docker zřízené v Azure a vaše upřednostňované Docker registru (registru kontejner Azure, úložiště Docker Hub, privátní DTR Docker nebo jiných Docker registru) můžete sestavit svůj Docker CI kanál v velmi konzistentní způsob.</span><span class="sxs-lookup"><span data-stu-id="3df7c-155">With these Visual Studio Team Services tasks, a build Linux-Docker Host/VM provisioned in Azure and your preferred Docker registry (Azure Container Registry, Docker Hub, private Docker DTR, or any other Docker registry) you can assemble your Docker CI pipeline in a very consistent way.</span></span>

<span data-ttu-id="3df7c-156">***Požadavky:***</span><span class="sxs-lookup"><span data-stu-id="3df7c-156">***Requirements:***</span></span>

-   <span data-ttu-id="3df7c-157">Visual Studio Team Services, nebo na místní instalace, Team Foundation Server 2015 Update 3 nebo novější.</span><span class="sxs-lookup"><span data-stu-id="3df7c-157">Visual Studio Team Services, or for on-premises installations, Team Foundation Server 2015 Update 3 or later.</span></span>

-   <span data-ttu-id="3df7c-158">Visual Studio Team Services agenta, který má Docker binární soubory.</span><span class="sxs-lookup"><span data-stu-id="3df7c-158">A Visual Studio Team Services agent that has the Docker binaries.</span></span>

<span data-ttu-id="3df7c-159">Snadný způsob, jak vytvořit jednu z těchto je se použije ke spuštění na základě bitové kopie Visual Studio Team Services agenta Docker kontejner Docker.</span><span class="sxs-lookup"><span data-stu-id="3df7c-159">An easy way to create one of these is to use Docker to run a container based on the Visual Studio Team Services agent Docker image.</span></span>

<span data-ttu-id="3df7c-160">**Další informace o** číst informace o kompletace CI služby Docker sady Visual Studio Team kanálu a návody najdete na následujících serverech:</span><span class="sxs-lookup"><span data-stu-id="3df7c-160">**More info** To read more about assembling a Visual Studio Team Services Docker CI pipeline and to view walkthroughs, visit the following sites:</span></span>

<span data-ttu-id="3df7c-161">Spuštění agenta Visual Studio Team Services jako kontejner Docker: [ https://hub.docker.com/r/\ microsoft nebo služby vsts-agent nebo](https://hub.docker.com/r/microsoft/vsts-agent/)</span><span class="sxs-lookup"><span data-stu-id="3df7c-161">Running a Visual Studio Team Services agent as a Docker container: [https://hub.docker.com/r/\ microsoft/vsts-agent/](https://hub.docker.com/r/microsoft/vsts-agent/)</span></span>

<span data-ttu-id="3df7c-162">Služby VSTS Docker rozšíření: <https://aka.ms/vstsdockerextension></span><span class="sxs-lookup"><span data-stu-id="3df7c-162">VSTS Docker extension: <https://aka.ms/vstsdockerextension></span></span>

<span data-ttu-id="3df7c-163">Vytváření bitových kopií .NET Core Linux Docker s Visual Studio Team Services: <https://blogs.msdn.microsoft.com/stevelasker/2016/06/13/building-net-core-linux-docker-images-with-visual-studio-team-services/></span><span class="sxs-lookup"><span data-stu-id="3df7c-163">Building .NET Core Linux Docker images with Visual Studio Team Services: <https://blogs.msdn.microsoft.com/stevelasker/2016/06/13/building-net-core-linux-docker-images-with-visual-studio-team-services/></span></span>

<span data-ttu-id="3df7c-164">Vytváření sestavení počítač založený na Linuxu Visual Studio Team služby s Docker podpory: <http://donovanbrown.com/post/2016/06/03/Building-a-Linux-Based-Visual-Studio-Team-Service-Build-Machine-with-Docker-Support></span><span class="sxs-lookup"><span data-stu-id="3df7c-164">Building a Linux-based Visual Studio Team Service build machine with Docker support: <http://donovanbrown.com/post/2016/06/03/Building-a-Linux-Based-Visual-Studio-Team-Service-Build-Machine-with-Docker-Support></span></span>

### <a name="integrate-test-and-validate-multicontainer-docker-applications"></a><span data-ttu-id="3df7c-165">Integrace, testování a ověření multicontainer Docker aplikace</span><span class="sxs-lookup"><span data-stu-id="3df7c-165">Integrate, test, and validate multicontainer Docker applications</span></span>

<span data-ttu-id="3df7c-166">Většina aplikací Docker se obvykle skládají z několika kontejnerů než jednoho kontejneru.</span><span class="sxs-lookup"><span data-stu-id="3df7c-166">Typically, most Docker applications are composed of multiple containers rather than a single container.</span></span> <span data-ttu-id="3df7c-167">Dobrým příkladem je orientované mikroslužeb aplikace, pro které byste měli jednoho kontejneru typu jedné mikroslužby.</span><span class="sxs-lookup"><span data-stu-id="3df7c-167">A good example is a microservices-oriented application for which you would have one container per microservice.</span></span> <span data-ttu-id="3df7c-168">Ale i bez výhradně následující vzory mikroslužeb přístup, je velmi pravděpodobné, že by aplikace Docker skládá z více kontejnerů nebo služby.</span><span class="sxs-lookup"><span data-stu-id="3df7c-168">But, even without strictly following the microservices approach patterns, it is very probable that your Docker application would be composed of multiple containers or services.</span></span>

<span data-ttu-id="3df7c-169">Proto po vytvoření aplikace kontejnerů v kanálu CI, musíte také nasadit, integrace a testování aplikace jako celek se všemi jeho kontejnery v rámci hostitele integraci Docker nebo i do na zkušební cluster, do které jsou kontejnerů distribuován.</span><span class="sxs-lookup"><span data-stu-id="3df7c-169">Therefore, after building the application containers in the CI pipeline, you also need to deploy, integrate, and test the application as a whole with all of its containers within an integration Docker host or even into a test cluster to which your containers are distributed.</span></span>

<span data-ttu-id="3df7c-170">Pokud používáte jednoho hostitele, můžete použít příkazy Docker jako docker-tvoří k vytváření a nasazování související kontejnery pro otestování a ověření prostředí Docker v jeden virtuální počítač.</span><span class="sxs-lookup"><span data-stu-id="3df7c-170">If you're using a single host, you can use Docker commands such as docker-compose to build and deploy related containers to test and validate the Docker environment in a single VM.</span></span> <span data-ttu-id="3df7c-171">Ale pokud pracujete s clusteru služby orchestrator jako DC/OS, Kubernetes nebo Docker Swarm, budete muset nasazení kontejnerů přes jiný mechanismus nebo orchestrator, v závislosti na vybrané clusteru nebo plánovače.</span><span class="sxs-lookup"><span data-stu-id="3df7c-171">But, if you are working with an orchestrator cluster like DC/OS, Kubernetes, or Docker Swarm, you need to deploy your containers through a different mechanism or orchestrator, depending on your selected cluster/scheduler.</span></span>

<span data-ttu-id="3df7c-172">Následují několik typů testů, které se dají spouštět i proti Docker kontejnerů:</span><span class="sxs-lookup"><span data-stu-id="3df7c-172">Following are several types of tests that you can run against Docker containers:</span></span>

-   <span data-ttu-id="3df7c-173">Testování částí pro Docker kontejnery</span><span class="sxs-lookup"><span data-stu-id="3df7c-173">Unit tests for Docker containers</span></span>

-   <span data-ttu-id="3df7c-174">Testování skupiny vzájemně souvisejících aplikací nebo mikroslužeb</span><span class="sxs-lookup"><span data-stu-id="3df7c-174">Testing groups of interrelated applications or microservices</span></span>

-   <span data-ttu-id="3df7c-175">Testování v produkčním a "Kanárských" verzích</span><span class="sxs-lookup"><span data-stu-id="3df7c-175">Test in production and "canary" releases</span></span>

<span data-ttu-id="3df7c-176">Důležité je, že při spuštění, integrace a funkčních testů, musíte spustit tyto testy z mimo kontejnery.</span><span class="sxs-lookup"><span data-stu-id="3df7c-176">The important point is that when running integration and functional tests, you must run those tests from outside of the containers.</span></span> <span data-ttu-id="3df7c-177">Testy nesmí být definována a spustit v rámci kontejnerů, které nasazujete, protože kontejnery jsou založené na statických bitových kopií, které by měly být úplně stejně jako ty, které budete nasazovat do produkčního prostředí.</span><span class="sxs-lookup"><span data-stu-id="3df7c-177">Tests must not be defined and run within the containers that you are deploying, because the containers are based on static images that should be exactly like those that you will be deploying into production.</span></span>

<span data-ttu-id="3df7c-178">Velmi vhodná možnost při testování pokročilejší scénáře jako testování několik clusterů (test clusteru, cluster pracovní a provozní cluster), je publikovat bitové kopie do registru k testování v různých clusterech.</span><span class="sxs-lookup"><span data-stu-id="3df7c-178">A very feasible option when testing more advanced scenarios like testing several clusters (test cluster, staging cluster, and production cluster) is to publish the images to a registry to test in various clusters.</span></span>

### <a name="push-the-custom-application-docker-image-into-your-global-docker-registry"></a><span data-ttu-id="3df7c-179">Push bitovou kopii Docker vlastní aplikaci do globální registru Docker</span><span class="sxs-lookup"><span data-stu-id="3df7c-179">Push the custom application Docker image into your global Docker Registry</span></span>

<span data-ttu-id="3df7c-180">Po imagí Dockeru byly testovány a ověřit, budete chtít značky a publikovat je do vašeho Docker registru.</span><span class="sxs-lookup"><span data-stu-id="3df7c-180">After the Docker images have been tested and validated, you'll want to tag and publish them to your Docker registry.</span></span> <span data-ttu-id="3df7c-181">Docker registru je důležitých typů v životním cyklu aplikace Docker, protože je centrálním místem, kde ukládáte svůj vlastní test (neboli "blessed Image") k nasazení do QA a provozní prostředí.</span><span class="sxs-lookup"><span data-stu-id="3df7c-181">The Docker registry is a critical piece in the Docker application life cycle because it is the central place where you store your custom test (aka "blessed images") to be deployed into QA and production environments.</span></span>

<span data-ttu-id="3df7c-182">Podobně jako jak kód aplikace, které jsou uložené v úložišti SCC (Git atd.) je "zdrojem pravdivosti", Docker registru je vaše "zdrojem pravdivosti" binární aplikace nebo služba bits k nasazení do QA nebo produkční prostředí.</span><span class="sxs-lookup"><span data-stu-id="3df7c-182">Similar to how the application code stored in your SCC repository (Git, etc.) is your "source of truth," the Docker registry is your "source of truth" for your binary application or bits to be deployed to the QA or production environments.</span></span>

<span data-ttu-id="3df7c-183">Obvykle můžete chtít mít vaší privátní úložiště pro vaše vlastní Image, buď v privátní úložiště v registru kontejner Azure nebo místní registru jako důvěryhodné registru Docker nebo veřejného cloudu registru s omezeným přístupem (např. Úložiště docker Hub), i když v tomto případě Pokud váš kód není otevřený zdroj, musí důvěřovat zabezpečení od dodavatele.</span><span class="sxs-lookup"><span data-stu-id="3df7c-183">Typically, you might want to have your private repositories for your custom images either in a private repository in Azure Container Registry or in an on-premises registry like Docker Trusted Registry, or in a public-cloud registry with restricted access (like Docker Hub), although in this last case if your code is not open source, you must trust the vendor's security.</span></span> <span data-ttu-id="3df7c-184">V obou případech metodu, pomocí kterého můžete to udělat je poměrně podobné a nakonec podle docker nabízené příkaz, jak je to znázorněno na obrázku 5-4.</span><span class="sxs-lookup"><span data-stu-id="3df7c-184">Either way, the method by which you do this is pretty similar and ultimately based on the docker push command, as depicted in Figure 5-4.</span></span>

![](./media/image4.png)

<span data-ttu-id="3df7c-185">Obrázek 5-4: publikování vlastních bitových kopií do registru Docker</span><span class="sxs-lookup"><span data-stu-id="3df7c-185">Figure 5-4: Publishing custom images to Docker Registry</span></span>

<span data-ttu-id="3df7c-186">Existuje více nabídek Docker registrech od dodavatelů cloud jako registru kontejner Azure, Amazon Web Services kontejneru registru, Google kontejneru registru, molo registru a tak dále.</span><span class="sxs-lookup"><span data-stu-id="3df7c-186">There are multiple offerings of Docker registries from cloud vendors like Azure Container Registry, Amazon Web Services Container Registry, Google Container Registry, Quay Registry, and so on.</span></span>

<span data-ttu-id="3df7c-187">Pomocí rozšíření Visual Studio Team Services Docker, můžete nabízet sadu bitové kopie služby definované soubor docker-compose.yml s více značek ověření registru Docker (např. Azure registru kontejneru), jak je znázorněno v obrázku 5-5.</span><span class="sxs-lookup"><span data-stu-id="3df7c-187">Using the Visual Studio Team Services Docker extension, you can push a set of service images defined by a docker-compose.yml file, with multiple tags, to an authenticated Docker registry (like Azure Container Registry), as shown in Figure 5-5.</span></span>

![](./media/image5.png)

<span data-ttu-id="3df7c-188">Obrázek 5 – 5: použití Visual Studio Team Services k publikování vlastních bitových kopií do registru Docker</span><span class="sxs-lookup"><span data-stu-id="3df7c-188">Figure 5-5: Using Visual Studio Team Services to publishing custom images to a Docker Registry</span></span>

<span data-ttu-id="3df7c-189">**Další informace o** Další informace o Docker rozšíření pro Visual Studio Team Services, přejděte na <https://aka.ms/vstsdockerextension>.</span><span class="sxs-lookup"><span data-stu-id="3df7c-189">**More info** To read more about the Docker extension for Visual Studio Team Services, go to <https://aka.ms/vstsdockerextension>.</span></span> <span data-ttu-id="3df7c-190">Další informace o registru kontejner Azure, přejděte na <https://aka.ms/azurecontainerregistry>.</span><span class="sxs-lookup"><span data-stu-id="3df7c-190">To learn more about Azure Container Registry, go to <https://aka.ms/azurecontainerregistry>.</span></span>

## <a name="step-4-cd-deploy"></a><span data-ttu-id="3df7c-191">Krok 4: CD, nasazení</span><span class="sxs-lookup"><span data-stu-id="3df7c-191">Step 4: CD, Deploy</span></span>

<span data-ttu-id="3df7c-192">Neměnitelnosti imagí Dockeru zajišťuje opakovatelných nasazení co vyvinuté, testovat prostřednictvím položky konfigurace a spuštění v produkčním prostředí.</span><span class="sxs-lookup"><span data-stu-id="3df7c-192">The immutability of Docker images ensures a repeatable deployment with what's developed, tested through CI, and run in production.</span></span> <span data-ttu-id="3df7c-193">Až budete mít imagí Dockeru aplikace publikována v registru systému Docker (privátní nebo veřejné), můžete je nasadit do několika prostředí, které by mohly mít (produkční, kontrolu kvality, pracovní, apod.) z vaší CD kanálu pomocí Visual Studio Team Services úlohy v kanálu nebo Visual Studio Team Services Release Management.</span><span class="sxs-lookup"><span data-stu-id="3df7c-193">After you have the application Docker images published in your Docker registry (either private or public), you can deploy them to the several environments that you might have (production, QA, staging, etc.) from your CD pipeline by using Visual Studio Team Services pipeline tasks or Visual Studio Team Services Release Management.</span></span>

<span data-ttu-id="3df7c-194">Ale v tuto chvíli to závisí na jaký druh Docker aplikace, kterou nasazujete.</span><span class="sxs-lookup"><span data-stu-id="3df7c-194">However, at this point it depends on what kind of Docker application you are deploying.</span></span> <span data-ttu-id="3df7c-195">Nasazení jednoduchou aplikaci (z sestavení a nasazení hlediska) jako monolitický aplikace, která zahrnuje několik kontejnery nebo služeb a nasazené na několika serverech nebo virtuálních počítačů je příliš neliší od nasazení složitější aplikaci jako aplikace orientované mikroslužeb s možností hyperškálovatelný systém.</span><span class="sxs-lookup"><span data-stu-id="3df7c-195">Deploying a simple application (from a composition and deployment point of view) like a monolithic application comprising a few containers or services and deployed to a few servers or VMs is very different from deploying a more complex application like a microservices-oriented application with hyperscale capabilities.</span></span> <span data-ttu-id="3df7c-196">Tyto dva scénáře jsou vysvětlené v následujících částech.</span><span class="sxs-lookup"><span data-stu-id="3df7c-196">These two scenarios are explained in the following sections.</span></span>

### <a name="deploying-composed-docker-applications-to-multiple-docker-environments"></a><span data-ttu-id="3df7c-197">Nasazení skládá Docker aplikace pro prostředí s více Docker</span><span class="sxs-lookup"><span data-stu-id="3df7c-197">Deploying composed Docker applications to multiple Docker environments</span></span>

<span data-ttu-id="3df7c-198">Podívejme se na méně komplexní scénář první: nasazení jednoduché hostitelů Docker (virtuální počítače nebo servery) v prostředí jednoho nebo několika prostředí (QA, přípravné nebo produkční prostředí).</span><span class="sxs-lookup"><span data-stu-id="3df7c-198">Let's look first at the less-complex scenario: deploying to simple Docker hosts (VMs or servers) in a single environment or multiple environments (QA, staging, and production).</span></span> <span data-ttu-id="3df7c-199">V tomto scénáři interně svůj CD kanál můžete použít docker-tvoří (z úloh nasazení Visual Studio Team Services) pro nasazení aplikací Docker pomocí jeho související sady kontejnery nebo služeb, jak ukazuje následující obrázek 5 a 6.</span><span class="sxs-lookup"><span data-stu-id="3df7c-199">In this scenario, internally your CD pipeline can use docker-compose (from your Visual Studio Team Services deployment tasks) to deploy the Docker applications with its related set of containers or services, as illustrated in Figure 5-6.</span></span>

![](./media/image6.png)

<span data-ttu-id="3df7c-200">Obrázek 5 – 6: nasazení kontejnery aplikací jednoduché registru prostředí hostitelů Docker</span><span class="sxs-lookup"><span data-stu-id="3df7c-200">Figure 5-6: Deploying application containers to simple Docker host environments registry</span></span>

<span data-ttu-id="3df7c-201">Obrázek 5 – 7 označuje, jak připojit vaše CI sestavení do QA a testovací prostředí pomocí sady Visual Studio Team Services kliknutím Docker Compose v dialogovém okně Přidat úloha.</span><span class="sxs-lookup"><span data-stu-id="3df7c-201">Figure 5-7 highlights how you can connect your build CI to QA/test environments via Visual Studio Team Services by clicking Docker Compose in the Add Task dialog box.</span></span> <span data-ttu-id="3df7c-202">Ale při nasazení v pracovním nebo produkčním prostředí, obvykle použijete zpracování prostředí s více funkcí správy verzí (jako kontrolu kvality, přípravné nebo produkční prostředí).</span><span class="sxs-lookup"><span data-stu-id="3df7c-202">However, when deploying to staging or production environments, you would usually use Release Management features handling multiple environments (like QA, staging, and production).</span></span> <span data-ttu-id="3df7c-203">Pokud nasazujete jednu hostitelů Docker, používá Visual Studio Team Services úkolů "Docker Compose" (což je vyvolání docker-tvoří až příkaz pod pokličkou).</span><span class="sxs-lookup"><span data-stu-id="3df7c-203">If you're deploying to single Docker hosts, it is using the Visual Studio Team Services "Docker Compose" task (which is invoking the docker-compose up command under the hood).</span></span> <span data-ttu-id="3df7c-204">Pokud nasazujete do Azure Container Service, použije úloha Docker nasazení, jak je popsáno v následující části.</span><span class="sxs-lookup"><span data-stu-id="3df7c-204">If you're deploying to Azure Container Service, it uses the Docker Deployment task, as explained in the section that follows.</span></span>

![](./media/image7.png)

<span data-ttu-id="3df7c-205">Obrázek 5 – 7: Přidání Docker Compose úlohy v kanálu Visual Studio Team Services</span><span class="sxs-lookup"><span data-stu-id="3df7c-205">Figure 5-7: Adding a Docker Compose task in a Visual Studio Team Services pipeline</span></span>

<span data-ttu-id="3df7c-206">Když vytvoříte verze ve Visual Studio Team Services, trvá sadu vstupní artefakty.</span><span class="sxs-lookup"><span data-stu-id="3df7c-206">When you create a release in Visual Studio Team Services, it takes a set of input artifacts.</span></span> <span data-ttu-id="3df7c-207">To by měla být neměnný po celou dobu verze ve více prostředích.</span><span class="sxs-lookup"><span data-stu-id="3df7c-207">These are intended to be immutable throughout the lifetime of the release across multiple environments.</span></span> <span data-ttu-id="3df7c-208">Když zavedete kontejnery, identifikujte vstupní artefakty bitové kopie v registru pro nasazení.</span><span class="sxs-lookup"><span data-stu-id="3df7c-208">When you introduce containers, the input artifacts identify images in a registry to deploy.</span></span> <span data-ttu-id="3df7c-209">V závislosti na tom, jak tyto identifikovat budou se nezaručuje, zůstane po dobu trvání verze nejobvyklejší je případ se, když odkazujete "myimage:latest" ze souboru docker-compose.</span><span class="sxs-lookup"><span data-stu-id="3df7c-209">Depending on how these are identified, they are not guaranteed to remain the same throughout the duration of the release, the most obvious case being when you reference "myimage:latest" from a docker-compose file.</span></span>

<span data-ttu-id="3df7c-210">Docker rozšíření pro Visual Studio Team Services vám dává, které umožňuje vygenerovat artefaktů sestavení, které obsahují konkrétní registru image hodnoty Digest který zaručeně k jednoznačné identifikaci binární stejnou bitovou kopii.</span><span class="sxs-lookup"><span data-stu-id="3df7c-210">The Docker extension for Visual Studio Team Services gives you the ability to generate build artifacts that contain specific registry image digests that are guaranteed to uniquely identify the same image binary.</span></span> <span data-ttu-id="3df7c-211">Jsou to, co Opravdu chcete použít jako vstup pro vydání.</span><span class="sxs-lookup"><span data-stu-id="3df7c-211">These are what you really want to use as input to a release.</span></span>

### <a name="managing-releases-to-docker-environments-by-using-visual-studio-team-services-release-management"></a><span data-ttu-id="3df7c-212">Správa verzí do prostředí Docker pomocí Visual Studio Team Services Release Management</span><span class="sxs-lookup"><span data-stu-id="3df7c-212">Managing releases to Docker environments by using Visual Studio Team Services Release Management</span></span>

<span data-ttu-id="3df7c-213">Prostřednictvím rozšíření Visual Studio Team Services, můžete vytvořit novou bitovou kopii, publikování do registru Docker, spusťte ho na hostitele se systémem Linux nebo Windows a použijte příkazy jako docker-tvoří k nasazení několika kontejnerů jako celá aplikace, to vše Vizuálu Možnosti správy verzí Team Services Studio určený pro prostředí s více, jak je znázorněno v obrázku 5 až 8.</span><span class="sxs-lookup"><span data-stu-id="3df7c-213">Through the Visual Studio Team Services extensions, you can build a new image, publish it to a Docker registry, run it on Linux or Windows hosts, and use commands such as docker-compose to deploy multiple containers as an entire application, all through the Visual Studio Team Services Release Management capabilities intended for multiple environments, as shown in Figure 5-8.</span></span>

![](./media/image8.png)

<span data-ttu-id="3df7c-214">Obrázek 5 – 8: konfigurace Visual Studio Team Services Docker Compose úlohy z Visual Studio Team Services Release Management</span><span class="sxs-lookup"><span data-stu-id="3df7c-214">Figure 5-8: Configuring Visual Studio Team Services Docker Compose tasks from Visual Studio Team Services Release Management</span></span>

<span data-ttu-id="3df7c-215">Ale mějte na paměti, že scénář zobrazují v obrázku 5 a 6 a je implementována v obrázku 5 až 8 je poměrně základní (nasazení jednoduché hostitelů Docker a virtuální počítače a bude jediný kontejner nebo instance pro každý image) a pravděpodobně by měl být použity pouze pro vývoj nebo testování sc enarios.</span><span class="sxs-lookup"><span data-stu-id="3df7c-215">However, keep in mind that the scenario shown in Figure 5-6 and implemented in Figure 5-8 is pretty basic (it is deploying to simple Docker hosts and VMs, and there will be a single container or instance per image) and probably should be used only for development or test scenarios.</span></span> <span data-ttu-id="3df7c-216">Ve většině scénářů produkční enterprise by budete chtít mít vysokou dostupnost (HA) a snadno spravovat škálovatelnost pomocí vyrovnávání zatížení napříč více uzly, serverů a virtuálních počítačů a "inteligentního převzetí služeb při selhání" proto, pokud server nebo uzel selže, jejích služeb a kontejnery přesune do jiného serveru hostitele nebo virtuálního počítače.</span><span class="sxs-lookup"><span data-stu-id="3df7c-216">In most enterprise production scenarios, you would want to have High Availability (HA) and easy-to-manage scalability by load balancing across multiple nodes, servers, and VMs, plus "intelligent failovers" so that if a server or node fails, its services and containers will be moved to another host server or VM.</span></span> <span data-ttu-id="3df7c-217">V takovém případě musíte pokročilejší technologie, jako je kontejner clustery, orchestrators a plánovače.</span><span class="sxs-lookup"><span data-stu-id="3df7c-217">In that case, you need more advanced technologies like container clusters, orchestrators, and schedulers.</span></span> <span data-ttu-id="3df7c-218">Proto je způsob, jak nasadit do těchto clusterů přesněji prostřednictvím pokročilých scénářích vysvětlené v další části.</span><span class="sxs-lookup"><span data-stu-id="3df7c-218">Thus, the way to deploy to those clusters is precisely through the advanced scenarios explained in the next section.</span></span>

### <a name="deploying-complex-docker-applications-to-docker-clusters-dcos-kubernetes-and-docker-swarm"></a><span data-ttu-id="3df7c-219">Nasazení aplikací komplexní Docker do clusterů Docker (DC/OS, Kubernetes a Docker Swarm)</span><span class="sxs-lookup"><span data-stu-id="3df7c-219">Deploying complex Docker applications to Docker clusters (DC/OS, Kubernetes, and Docker Swarm)</span></span>

<span data-ttu-id="3df7c-220">Povaze distribuovaných aplikací vyžaduje výpočetní prostředky, které se taky distribuují.</span><span class="sxs-lookup"><span data-stu-id="3df7c-220">The nature of distributed applications requires compute resources that are also distributed.</span></span> <span data-ttu-id="3df7c-221">Do mají funkce pro produkční škálování, je potřeba mít clustering možnosti, které zajišťují vysokou škálovatelnost a vysokou DOSTUPNOSTÍ na základě ve fondu prostředků.</span><span class="sxs-lookup"><span data-stu-id="3df7c-221">To have production-scale capabilities, you need to have clustering capabilities that provide high scalability and HA based on pooled resources.</span></span>

<span data-ttu-id="3df7c-222">Můžete nasadit kontejnery ručně do těchto clusterů z rozhraní příkazového řádku nástroje, jako je například Docker Swarm (například pomocí [vytvoření služby docker](https://docs.docker.com/engine/swarm/swarm-tutorial/deploy-service/)) nebo webového uživatelského rozhraní, jako [Mesosphere Marathon](https://mesosphere.github.io/marathon/docs/marathon-ui.html) pro DC/OS clustery, ale měli Rezervujte, který pouze pro testování včasnou nasazení nebo pro účely správy jako škálování na více systémů nebo účely monitorování.</span><span class="sxs-lookup"><span data-stu-id="3df7c-222">You could deploy containers manually to those clusters from a CLI tool such as Docker Swarm (like using [docker service create](https://docs.docker.com/engine/swarm/swarm-tutorial/deploy-service/)) or a web UI such as [Mesosphere Marathon](https://mesosphere.github.io/marathon/docs/marathon-ui.html) for DC/OS clusters, but you should reserve that only for punctual deployment testing or for management purposes like scaling-out or monitoring purposes.</span></span>

<span data-ttu-id="3df7c-223">Z hlediska CD a Visual Studio Team Services konkrétně můžete spustit úlohy speciálně učiněna nasazení z vašeho prostředí Visual Studio Team Services Release Management, které bude nasadit kontejnerizované aplikací pro distribuované clustery v Kontejner služby, jak ukazuje následující obrázek 5-9.</span><span class="sxs-lookup"><span data-stu-id="3df7c-223">From a CD point of view, and Visual Studio Team Services specifically, you can run specially made deployment tasks from your Visual Studio Team Services Release Management environments which will deploy your containerized applications to distributed clusters in Container Service, as illustrated in Figure 5-9.</span></span>

![](./media/image9.png)

<span data-ttu-id="3df7c-224">Obrázek 5 – 9: nasazení distribuované aplikace do kontejneru služby</span><span class="sxs-lookup"><span data-stu-id="3df7c-224">Figure 5-9: Deploying distributed applications to Container Service</span></span>

<span data-ttu-id="3df7c-225">Na začátku při nasazení v určité clustery nebo orchestrators, tradičně použijete skriptů konkrétní nasazení a mechanismy pro každý orchestrator (tedy Mesosphere DC/OS nebo Kubernetes mechanismů jiné nasazení než Docker a Docker Swarm) místo jednodušší a snadno použitelné docker tvoří nástroj podle definice soubor docker-compose.yml.</span><span class="sxs-lookup"><span data-stu-id="3df7c-225">Initially, when deploying to certain clusters or orchestrators, you would traditionally use specific deployment scripts and mechanisms per each orchestrator (that is, Mesosphere DC/OS or Kubernetes have different deployment mechanisms than Docker and Docker Swarm) instead of the simpler and easy-to-use docker-compose tool based on the docker-compose.yml definition file.</span></span> <span data-ttu-id="3df7c-226">Však díky úlohy nasazení webu společnosti Microsoft Visual Studio Team Services Docker, zobrazí obrázek 5-10 nyní také můžete nasadit na DC/OS právě pomocí souboru známé docker-compose.yml, protože Microsoft provádí pro vás tento "překlad" (z vaší soubor docker-compose.yml do jiných formátů vyžaduje DC/OS).</span><span class="sxs-lookup"><span data-stu-id="3df7c-226">However, thanks to the Microsoft Visual Studio Team Services Docker Deploy task, shown in Figure 5-10, you now also can deploy to DC/OS by just using your familiar docker-compose.yml file because Microsoft performs that "translation" for you (from your docker-compose.yml file to other formats needed by DC/OS).</span></span>

![](./media/image10.png)

<span data-ttu-id="3df7c-227">Obrázek 5-10: Přidání úloha Docker nasazení do vašeho prostředí RM</span><span class="sxs-lookup"><span data-stu-id="3df7c-227">Figure 5-10: Adding the Docker Deploy task to your Environment RM</span></span>

<span data-ttu-id="3df7c-228">Obrázek 5-11 ukazuje, jak můžete upravit úloha Docker nasazení a zadat typ cíle (Azure Container Service DC/OS, v tomto případě), váš soubor Docker Compose a připojení k registru Docker (např. Azure kontejneru registru nebo úložiště Docker Hub).</span><span class="sxs-lookup"><span data-stu-id="3df7c-228">Figure 5-11 demonstrates how you can edit the Docker Deploy task and specify the Target Type (Azure Container Service DC/OS, in this case), your Docker Compose File, and the Docker Registry connection (like Azure Container Registry or Docker Hub).</span></span> <span data-ttu-id="3df7c-229">Toto je, kde úloha načte připravené k použití vlastních Docker bitových kopií pro nasazení jako kontejnery v clusteru DC/OS.</span><span class="sxs-lookup"><span data-stu-id="3df7c-229">This is where the task will retrieve your ready-to-use custom Docker images to be deployed as containers in the DC/OS cluster.</span></span>

![](./media/image11.png)

<span data-ttu-id="3df7c-230">Obrázek 5 – 11: Docker nasazení úloh definice nasazení Azure Container Service DC/OS</span><span class="sxs-lookup"><span data-stu-id="3df7c-230">Figure 5-11: Docker Deploy task definition deploying to Azure Container Service DC/OS</span></span>

<span data-ttu-id="3df7c-231">**Další informace o** Další informace o kanálu disku CD s Visual Studio Team Services a Docker, najdete na následujících stránkách:</span><span class="sxs-lookup"><span data-stu-id="3df7c-231">**More info** To read more about the CD pipeline with Visual Studio Team Services and Docker, visit the following sites:</span></span>

<span data-ttu-id="3df7c-232">Rozšíření sady Visual Studio Team Services pro Docker a Azure Container Service: [ https://aka.ms/\ vstsdockerextension](https://aka.ms/vstsdockerextension)</span><span class="sxs-lookup"><span data-stu-id="3df7c-232">Visual Studio Team Services extension for Docker and Azure Container Service: [https://aka.ms/\ vstsdockerextension](https://aka.ms/vstsdockerextension)</span></span>

<span data-ttu-id="3df7c-233">Azure Container Service: <https://aka.ms/azurecontainerservice></span><span class="sxs-lookup"><span data-stu-id="3df7c-233">Azure Container Service: <https://aka.ms/azurecontainerservice></span></span>

<span data-ttu-id="3df7c-234">Mesosphere DC/OS: <https://mesosphere.com/product/></span><span class="sxs-lookup"><span data-stu-id="3df7c-234">Mesosphere DC/OS: <https://mesosphere.com/product/></span></span>

## <a name="step-5-run-and-manage"></a><span data-ttu-id="3df7c-235">Krok 5: Spuštění a Správa</span><span class="sxs-lookup"><span data-stu-id="3df7c-235">Step 5: Run and manage</span></span>

<span data-ttu-id="3df7c-236">Vzhledem k tomu spouštění a správu aplikací v podniku produkční úroveň je hlavní předmět při sám sebe a z důvodu typ operace a lidí pracujících na této úrovni (IT oddělení) a také velký rozsah této oblasti, budeme mít odeberte celý další kapitoly k vysvětlením ho.</span><span class="sxs-lookup"><span data-stu-id="3df7c-236">Because running and managing applications at enterprise-production level is a major subject in and of itself, and due to the type of operations and people working at that level (IT operations) as well as the large scope of this area, we have devoted the entire next chapter to explaining it.</span></span>

## <a name="step-6-monitor-and-diagnose"></a><span data-ttu-id="3df7c-237">Krok 6: Sledování a Diagnostika</span><span class="sxs-lookup"><span data-stu-id="3df7c-237">Step 6: Monitor and diagnose</span></span>

<span data-ttu-id="3df7c-238">Toto téma taky je popsaná v další kapitoly jako součást úlohy, které IT oddělení provádí v produkční systémy; je ale důležité ukázat, že statistiky získat v tomto kroku musí kanálu zpět do vývojového týmu tak, aby je neustále vylepšené aplikace.</span><span class="sxs-lookup"><span data-stu-id="3df7c-238">This topic also is covered in the next chapter as part of the tasks that IT operations performs in production systems; however, is important to highlight that the insights obtained in this step must feed back to the development team so that the application is constantly improved.</span></span> <span data-ttu-id="3df7c-239">Z tohoto hlediska, je také součástí DevOps, i když operace a úlohy jsou obvykle provádí IT.</span><span class="sxs-lookup"><span data-stu-id="3df7c-239">From that point of view, it is also part of DevOps, although the tasks and operations are usually performed by IT.</span></span>

<span data-ttu-id="3df7c-240">Jenom v případě, že monitorování a Diagnostika jsou 100 procent v rámci sféru DevOps jsou monitorování procesů a analýzy provádí vývojový tým, proti prostředí testování nebo beta.</span><span class="sxs-lookup"><span data-stu-id="3df7c-240">Only when monitoring and diagnostics are 100 percent within the realm of DevOps are the monitoring processes and analytics performed by the development team against testing or beta environments.</span></span> <span data-ttu-id="3df7c-241">To se provádí tak, že provedete zátěžové testování nebo jednoduše tak, že monitorování beta nebo QA prostředí, kde beta testery zkoušíte nové verze.</span><span class="sxs-lookup"><span data-stu-id="3df7c-241">This is done either by performing load testing or simply by monitoring beta or QA environments, where beta testers are trying the new versions.</span></span>

>[!div class="step-by-step"]
<span data-ttu-id="3df7c-242">[Předchozí](index.md)
[další](../run-manage-monitor-docker-environments/index.md)</span><span class="sxs-lookup"><span data-stu-id="3df7c-242">[Previous](index.md)
[Next](../run-manage-monitor-docker-environments/index.md)</span></span>
