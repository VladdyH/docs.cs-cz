---
title: Model asynchronního programování (APM)
ms.date: 03/30/2017
ms.technology: dotnet-standard
helpviewer_keywords:
- ending asynchronous operations
- starting asynchronous operations
- beginning asynchronous operations
- asynchronous programming, ending operations
- asynchronous programming
- stopping asynchronous operations
- asynchronous programming, beginning operations
ms.assetid: c9b3501e-6bc6-40f9-8efd-4b6d9e39ccf0
author: rpetrusha
ms.author: ronpet
ms.openlocfilehash: 992cc1f60ee3f08131b478d2336321bf87d7ef89
ms.sourcegitcommit: 3d5d33f384eeba41b2dff79d096f47ccc8d8f03d
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 05/04/2018
ms.locfileid: "33573786"
---
# <a name="asynchronous-programming-model-apm"></a><span data-ttu-id="f6493-102">Model asynchronního programování (APM)</span><span class="sxs-lookup"><span data-stu-id="f6493-102">Asynchronous Programming Model (APM)</span></span>
<span data-ttu-id="f6493-103">Asynchronní operace, která používá <xref:System.IAsyncResult> vzoru návrhu je implementovaný jako dvě metody s názvem **Begin *** OperationName* a **End *** OperationName* , začínat a končit asynchronní operace *OperationName* v uvedeném pořadí.</span><span class="sxs-lookup"><span data-stu-id="f6493-103">An asynchronous operation that uses the <xref:System.IAsyncResult> design pattern is implemented as two methods named **Begin***OperationName* and **End***OperationName* that begin and end the asynchronous operation *OperationName* respectively.</span></span> <span data-ttu-id="f6493-104">Například <xref:System.IO.FileStream> třída poskytuje <xref:System.IO.FileStream.BeginRead%2A> a <xref:System.IO.FileStream.EndRead%2A> metody asynchronně číst bajty ze souboru.</span><span class="sxs-lookup"><span data-stu-id="f6493-104">For example, the <xref:System.IO.FileStream> class provides the <xref:System.IO.FileStream.BeginRead%2A> and <xref:System.IO.FileStream.EndRead%2A> methods to asynchronously read bytes from a file.</span></span> <span data-ttu-id="f6493-105">Tyto metody implementovat asynchronní verzi <xref:System.IO.FileStream.Read%2A> metoda.</span><span class="sxs-lookup"><span data-stu-id="f6493-105">These methods implement the asynchronous version of the <xref:System.IO.FileStream.Read%2A> method.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="f6493-106">Od verze rozhraní .NET Framework 4, Task Parallel Library poskytuje nový model pro asynchronní a paralelní programování.</span><span class="sxs-lookup"><span data-stu-id="f6493-106">Starting with the .NET Framework 4, the Task Parallel Library provides a new model for asynchronous and parallel programming.</span></span> <span data-ttu-id="f6493-107">Další informace najdete v tématu [Task Parallel Library (TPL)](../../../docs/standard/parallel-programming/task-parallel-library-tpl.md) a [založený na úlohách asynchronní vzor (TAP)](../../../docs/standard/asynchronous-programming-patterns/task-based-asynchronous-pattern-tap.md)).</span><span class="sxs-lookup"><span data-stu-id="f6493-107">For more information, see [Task Parallel Library (TPL)](../../../docs/standard/parallel-programming/task-parallel-library-tpl.md) and [Task-based Asynchronous Pattern (TAP)](../../../docs/standard/asynchronous-programming-patterns/task-based-asynchronous-pattern-tap.md)).</span></span>  
  
 <span data-ttu-id="f6493-108">Po volání **začít *** OperationName*, aplikace můžete pokračovat v provádění instrukcí na volající vlákno, zatímco probíhá asynchronní operaci na jiném podprocesu.</span><span class="sxs-lookup"><span data-stu-id="f6493-108">After calling **Begin***OperationName*, an application can continue executing instructions on the calling thread while the asynchronous operation takes place on a different thread.</span></span> <span data-ttu-id="f6493-109">Pro každé volání **začít *** OperationName*, aplikace by měly volat také **End *** OperationName* získat výsledky operace.</span><span class="sxs-lookup"><span data-stu-id="f6493-109">For each call to **Begin***OperationName*, the application should also call **End***OperationName* to get the results of the operation.</span></span>  
  
## <a name="beginning-an-asynchronous-operation"></a><span data-ttu-id="f6493-110">Od asynchronní operace</span><span class="sxs-lookup"><span data-stu-id="f6493-110">Beginning an Asynchronous Operation</span></span>  
 <span data-ttu-id="f6493-111">**Začít *** OperationName* metoda zahájí asynchronní operaci *OperationName* a vrátí objekt, který implementuje <xref:System.IAsyncResult> rozhraní.</span><span class="sxs-lookup"><span data-stu-id="f6493-111">The **Begin***OperationName* method begins asynchronous operation *OperationName* and returns an object that implements the <xref:System.IAsyncResult> interface.</span></span> <span data-ttu-id="f6493-112"><xref:System.IAsyncResult> objekty ukládat informace o asynchronní operaci.</span><span class="sxs-lookup"><span data-stu-id="f6493-112"><xref:System.IAsyncResult> objects store information about an asynchronous operation.</span></span> <span data-ttu-id="f6493-113">V následující tabulce jsou uvedeny informace o asynchronní operaci.</span><span class="sxs-lookup"><span data-stu-id="f6493-113">The following table shows information about an asynchronous operation.</span></span>  
  
|<span data-ttu-id="f6493-114">Člen</span><span class="sxs-lookup"><span data-stu-id="f6493-114">Member</span></span>|<span data-ttu-id="f6493-115">Popis</span><span class="sxs-lookup"><span data-stu-id="f6493-115">Description</span></span>|  
|------------|-----------------|  
|<xref:System.IAsyncResult.AsyncState%2A>|<span data-ttu-id="f6493-116">Volitelné objekt specifické pro aplikace, který obsahuje informace o asynchronní operaci.</span><span class="sxs-lookup"><span data-stu-id="f6493-116">An optional application-specific object that contains information about the asynchronous operation.</span></span>|  
|<xref:System.IAsyncResult.AsyncWaitHandle%2A>|<span data-ttu-id="f6493-117">A <xref:System.Threading.WaitHandle> , můžete se používá k blokování provádění aplikací, až do dokončení asynchronní operaci.</span><span class="sxs-lookup"><span data-stu-id="f6493-117">A <xref:System.Threading.WaitHandle> that can be used to block application execution until the asynchronous operation completes.</span></span>|  
|<xref:System.IAsyncResult.CompletedSynchronously%2A>|<span data-ttu-id="f6493-118">Hodnotu, která určuje, zda asynchronní operace byla dokončena ve vlákně používá k volání **začít *** OperationName* místo dokončení na samostatném <xref:System.Threading.ThreadPool> přístup z více vláken.</span><span class="sxs-lookup"><span data-stu-id="f6493-118">A value that indicates whether the asynchronous operation completed on the thread used to call **Begin***OperationName* instead of completing on a separate <xref:System.Threading.ThreadPool> thread.</span></span>|  
|<xref:System.IAsyncResult.IsCompleted%2A>|<span data-ttu-id="f6493-119">Hodnota, která označuje, zda asynchronní operace byla dokončena.</span><span class="sxs-lookup"><span data-stu-id="f6493-119">A value that indicates whether the asynchronous operation has completed.</span></span>|  
  
 <span data-ttu-id="f6493-120">A **začít *** OperationName* metoda přebírá parametry deklarované v podpis synchronní verzi metody, které se předávají hodnotou nebo odkazem.</span><span class="sxs-lookup"><span data-stu-id="f6493-120">A **Begin***OperationName* method takes any parameters declared in the signature of the synchronous version of the method that are passed by value or by reference.</span></span> <span data-ttu-id="f6493-121">Žádné výstupní parametry nejsou součástí **začít *** OperationName* podpis metody.</span><span class="sxs-lookup"><span data-stu-id="f6493-121">Any out parameters are not part of the **Begin***OperationName* method signature.</span></span> <span data-ttu-id="f6493-122">**Začít *** OperationName* podpis metody také obsahuje dva další parametry.</span><span class="sxs-lookup"><span data-stu-id="f6493-122">The **Begin***OperationName* method signature also includes two additional parameters.</span></span> <span data-ttu-id="f6493-123">Určuje první z nich <xref:System.AsyncCallback> delegáta, který odkazuje na metodu, která je volána při dokončení asynchronní operace.</span><span class="sxs-lookup"><span data-stu-id="f6493-123">The first of these defines an <xref:System.AsyncCallback> delegate that references a method that is called when the asynchronous operation completes.</span></span> <span data-ttu-id="f6493-124">Můžete zadat volající `null` (`Nothing` v jazyce Visual Basic) Pokud nechce metoda volána, když se dokončí.</span><span class="sxs-lookup"><span data-stu-id="f6493-124">The caller can specify `null` (`Nothing` in Visual Basic) if it does not want a method invoked when the operation completes.</span></span> <span data-ttu-id="f6493-125">Druhý parametr další je objekt definovaný uživatelem.</span><span class="sxs-lookup"><span data-stu-id="f6493-125">The second additional parameter is a user-defined object.</span></span> <span data-ttu-id="f6493-126">Tento objekt umožňuje předat informace o stavu specifické pro aplikaci metoda volána, když dokončení asynchronní operace.</span><span class="sxs-lookup"><span data-stu-id="f6493-126">This object can be used to pass application-specific state information to the method invoked when the asynchronous operation completes.</span></span> <span data-ttu-id="f6493-127">Pokud **začít *** OperationName* metoda přebírá další parametry specifické pro operaci, jako je například bajtové pole pro uložení bajtů přečtených ze souboru, <xref:System.AsyncCallback> a objekt stavu aplikace jsou poslední parametry v **Začít *** OperationName* podpis metody.</span><span class="sxs-lookup"><span data-stu-id="f6493-127">If a **Begin***OperationName* method takes additional operation-specific parameters, such as a byte array to store bytes read from a file, the <xref:System.AsyncCallback> and application state object are the last parameters in the **Begin***OperationName* method signature.</span></span>  
  
 <span data-ttu-id="f6493-128">**Začněte *** OperationName* vrátí prvek na volající vlákno okamžitě.</span><span class="sxs-lookup"><span data-stu-id="f6493-128">**Begin***OperationName* returns control to the calling thread immediately.</span></span> <span data-ttu-id="f6493-129">Pokud **začít *** OperationName* metoda vyvolá výjimek, jsou výjimky vyvolány před spuštěním asynchronní operace.</span><span class="sxs-lookup"><span data-stu-id="f6493-129">If the **Begin***OperationName* method throws exceptions, the exceptions are thrown before the asynchronous operation is started.</span></span> <span data-ttu-id="f6493-130">Pokud **začít *** OperationName* metoda vyvolá výjimek, není vyvolána metoda zpětného volání.</span><span class="sxs-lookup"><span data-stu-id="f6493-130">If the **Begin***OperationName* method throws exceptions, the callback method is not invoked.</span></span>  
  
## <a name="ending-an-asynchronous-operation"></a><span data-ttu-id="f6493-131">Ukončení asynchronní operace</span><span class="sxs-lookup"><span data-stu-id="f6493-131">Ending an Asynchronous Operation</span></span>  
 <span data-ttu-id="f6493-132">**End *** OperationName* metoda ukončí asynchronní operaci *OperationName*.</span><span class="sxs-lookup"><span data-stu-id="f6493-132">The **End***OperationName* method ends asynchronous operation *OperationName*.</span></span> <span data-ttu-id="f6493-133">Vrátí hodnotu, která **End *** OperationName* metoda je stejný typ vrácený jeho protějšku synchronní a je specifická pro asynchronní operace.</span><span class="sxs-lookup"><span data-stu-id="f6493-133">The return value of the **End***OperationName* method is the same type returned by its synchronous counterpart and is specific to the asynchronous operation.</span></span> <span data-ttu-id="f6493-134">Například <xref:System.IO.FileStream.EndRead%2A> metoda vrátí počet bajtů přečtených z <xref:System.IO.FileStream> a <xref:System.Net.Dns.EndGetHostByName%2A> metoda vrátí <xref:System.Net.IPHostEntry> objekt, který obsahuje informace o hostitelském počítači.</span><span class="sxs-lookup"><span data-stu-id="f6493-134">For example, the <xref:System.IO.FileStream.EndRead%2A> method returns the number of bytes read from a <xref:System.IO.FileStream> and the <xref:System.Net.Dns.EndGetHostByName%2A> method returns an <xref:System.Net.IPHostEntry> object that contains information about a host computer.</span></span> <span data-ttu-id="f6493-135">**End *** OperationName* metoda přebírá žádný, nebo parametry ref deklarované v podpis synchronní verzi metody.</span><span class="sxs-lookup"><span data-stu-id="f6493-135">The **End***OperationName* method takes any out or ref parameters declared in the signature of the synchronous version of the method.</span></span> <span data-ttu-id="f6493-136">Kromě parametrů z synchronní metoda **End *** OperationName* metoda zahrnuje také <xref:System.IAsyncResult> parametr.</span><span class="sxs-lookup"><span data-stu-id="f6493-136">In addition to the parameters from the synchronous method, the **End***OperationName* method also includes an <xref:System.IAsyncResult> parameter.</span></span> <span data-ttu-id="f6493-137">Volající musí projít instance vrácený odpovídající volání **začít *** OperationName*.</span><span class="sxs-lookup"><span data-stu-id="f6493-137">Callers must pass the instance returned by the corresponding call to **Begin***OperationName*.</span></span>  
  
 <span data-ttu-id="f6493-138">Pokud reprezentována asynchronní operaci <xref:System.IAsyncResult> objekt nebyl dokončen při **End *** OperationName* je volána, **End *** OperationName* blokuje volající vlákno až asynchronní operace byla dokončena.</span><span class="sxs-lookup"><span data-stu-id="f6493-138">If the asynchronous operation represented by the <xref:System.IAsyncResult> object has not completed when **End***OperationName* is called, **End***OperationName* blocks the calling thread until the asynchronous operation is complete.</span></span> <span data-ttu-id="f6493-139">Výjimky vyvolané asynchronní operace jsou vyvolány z **End *** OperationName* metoda.</span><span class="sxs-lookup"><span data-stu-id="f6493-139">Exceptions thrown by the asynchronous operation are thrown from the **End***OperationName* method.</span></span> <span data-ttu-id="f6493-140">Účinek volání **End *** OperationName* metoda víckrát se stejným <xref:System.IAsyncResult> není definován.</span><span class="sxs-lookup"><span data-stu-id="f6493-140">The effect of calling the **End***OperationName* method multiple times with the same <xref:System.IAsyncResult> is not defined.</span></span> <span data-ttu-id="f6493-141">Podobně volání **End *** OperationName* metoda s <xref:System.IAsyncResult> nebyl vrácený související Begin metoda také není definován.</span><span class="sxs-lookup"><span data-stu-id="f6493-141">Likewise, calling the **End***OperationName* method with an <xref:System.IAsyncResult> that was not returned by the related Begin method is also not defined.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="f6493-142">Pro buď nedefinované scénářů, zvažte implementátory vyvolání <xref:System.InvalidOperationException>.</span><span class="sxs-lookup"><span data-stu-id="f6493-142">For either of the undefined scenarios, implementers should consider throwing <xref:System.InvalidOperationException>.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="f6493-143">Implementátory tohoto vzoru návrhu měli oznámit volající, který asynchronní operaci dokončit nastavení <xref:System.IAsyncResult.IsCompleted%2A> na hodnotu true, volání asynchronní zpětné volání metody (Pokud byl zadán) a signalizace <xref:System.IAsyncResult.AsyncWaitHandle%2A>.</span><span class="sxs-lookup"><span data-stu-id="f6493-143">Implementers of this design pattern should notify the caller that the asynchronous operation completed by setting <xref:System.IAsyncResult.IsCompleted%2A> to true, calling the asynchronous callback method (if one was specified) and signaling the <xref:System.IAsyncResult.AsyncWaitHandle%2A>.</span></span>  
  
 <span data-ttu-id="f6493-144">Vývojáři aplikace k dispozici několik možností návrhu pro přístup k výsledky asynchronní operaci.</span><span class="sxs-lookup"><span data-stu-id="f6493-144">Application developers have several design choices for accessing the results of the asynchronous operation.</span></span> <span data-ttu-id="f6493-145">Správný výběr závisí na tom, jestli má aplikace pokyny, které můžete provést při dokončení operace.</span><span class="sxs-lookup"><span data-stu-id="f6493-145">The correct choice depends on whether the application has instructions that can execute while the operation completes.</span></span> <span data-ttu-id="f6493-146">Pokud aplikaci nelze provést žádné další kroky, dokud neobdrží výsledky asynchronní operaci, musí aplikace zablokuje, dokud se výsledky jsou k dispozici.</span><span class="sxs-lookup"><span data-stu-id="f6493-146">If an application cannot perform any additional work until it receives the results of the asynchronous operation, the application must block until the results are available.</span></span> <span data-ttu-id="f6493-147">Blokování až do dokončení asynchronní operaci, můžete použít jednu z následujících postupů:</span><span class="sxs-lookup"><span data-stu-id="f6493-147">To block until an asynchronous operation completes, you can use one of the following approaches:</span></span>  
  
-   <span data-ttu-id="f6493-148">Volání **End *** OperationName* z hlavního vlákna aplikace, je blokování provádění aplikací, dokud operace dokončena.</span><span class="sxs-lookup"><span data-stu-id="f6493-148">Call **End***OperationName* from the application’s main thread, blocking application execution until the operation is complete.</span></span> <span data-ttu-id="f6493-149">Příklad, který tento postup ukazuje, naleznete v části [blokování provádění aplikace ukončením asynchronní operace](../../../docs/standard/asynchronous-programming-patterns/blocking-application-execution-by-ending-an-async-operation.md).</span><span class="sxs-lookup"><span data-stu-id="f6493-149">For an example that illustrates this technique, see [Blocking Application Execution by Ending an Async Operation](../../../docs/standard/asynchronous-programming-patterns/blocking-application-execution-by-ending-an-async-operation.md).</span></span>  
  
-   <span data-ttu-id="f6493-150">Použití <xref:System.IAsyncResult.AsyncWaitHandle%2A> k blokování provádění aplikací, dokud nebudou dokončeny jednu nebo více operací.</span><span class="sxs-lookup"><span data-stu-id="f6493-150">Use the <xref:System.IAsyncResult.AsyncWaitHandle%2A> to block application execution until one or more operations are complete.</span></span> <span data-ttu-id="f6493-151">Příklad, který tento postup ukazuje, naleznete v části [blokování aplikace provádění pomocí vlastnosti AsyncWaitHandle](../../../docs/standard/asynchronous-programming-patterns/blocking-application-execution-using-an-asyncwaithandle.md).</span><span class="sxs-lookup"><span data-stu-id="f6493-151">For an example that illustrates this technique, see [Blocking Application Execution Using an AsyncWaitHandle](../../../docs/standard/asynchronous-programming-patterns/blocking-application-execution-using-an-asyncwaithandle.md).</span></span>  
  
 <span data-ttu-id="f6493-152">Aplikace, které není potřeba blokovat při dokončení asynchronní operace můžete použít jednu z následujících postupů:</span><span class="sxs-lookup"><span data-stu-id="f6493-152">Applications that do not need to block while the asynchronous operation completes can use one of the following approaches:</span></span>  
  
-   <span data-ttu-id="f6493-153">Dotazování pro stav dokončení operace kontrolou <xref:System.IAsyncResult.IsCompleted%2A> vlastnost pravidelně a volání **End *** OperationName* po dokončení operace.</span><span class="sxs-lookup"><span data-stu-id="f6493-153">Poll for operation completion status by checking the <xref:System.IAsyncResult.IsCompleted%2A> property periodically and calling **End***OperationName* when the operation is complete.</span></span> <span data-ttu-id="f6493-154">Příklad, který tento postup ukazuje, naleznete v části [dotazování na stav asynchronní operace](../../../docs/standard/asynchronous-programming-patterns/polling-for-the-status-of-an-asynchronous-operation.md).</span><span class="sxs-lookup"><span data-stu-id="f6493-154">For an example that illustrates this technique, see [Polling for the Status of an Asynchronous Operation](../../../docs/standard/asynchronous-programming-patterns/polling-for-the-status-of-an-asynchronous-operation.md).</span></span>  
  
-   <span data-ttu-id="f6493-155">Použijte <xref:System.AsyncCallback> delegáta zadat metodu má být volána po dokončení operace.</span><span class="sxs-lookup"><span data-stu-id="f6493-155">Use an <xref:System.AsyncCallback> delegate to specify a method to be invoked when the operation is complete.</span></span> <span data-ttu-id="f6493-156">Příklad, který tento postup ukazuje, naleznete v části [použití delegáta AsyncCallback k ukončení asynchronní operace](../../../docs/standard/asynchronous-programming-patterns/using-an-asynccallback-delegate-to-end-an-asynchronous-operation.md).</span><span class="sxs-lookup"><span data-stu-id="f6493-156">For an example that illustrates this technique, see [Using an AsyncCallback Delegate to End an Asynchronous Operation](../../../docs/standard/asynchronous-programming-patterns/using-an-asynccallback-delegate-to-end-an-asynchronous-operation.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="f6493-157">Viz také</span><span class="sxs-lookup"><span data-stu-id="f6493-157">See Also</span></span>  
 [<span data-ttu-id="f6493-158">Asynchronní vzor založený na událostech (EAP)</span><span class="sxs-lookup"><span data-stu-id="f6493-158">Event-based Asynchronous Pattern (EAP)</span></span>](../../../docs/standard/asynchronous-programming-patterns/event-based-asynchronous-pattern-eap.md)  
 [<span data-ttu-id="f6493-159">Asynchronní volání synchronních metod</span><span class="sxs-lookup"><span data-stu-id="f6493-159">Calling Synchronous Methods Asynchronously</span></span>](../../../docs/standard/asynchronous-programming-patterns/calling-synchronous-methods-asynchronously.md)  
 [<span data-ttu-id="f6493-160">Použití delegáta AsyncCallback a stavového objektu</span><span class="sxs-lookup"><span data-stu-id="f6493-160">Using an AsyncCallback Delegate and State Object</span></span>](../../../docs/standard/asynchronous-programming-patterns/using-an-asynccallback-delegate-and-state-object.md)
