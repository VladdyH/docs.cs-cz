---
title: "Pokyny pro zabezpečené kódování"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-standard
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- managed wrapper to native code implementation
- secure coding
- reusable components
- library code that exposes protected resources
- code, security
- code security
- secure coding, options
- components [.NET Framework], security
- code security, options
- security-neutral code
- security [.NET Framework], coding guidelines
ms.assetid: 4f882d94-262b-4494-b0a6-ba9ba1f5f177
caps.latest.revision: "20"
author: mairaw
ms.author: mairaw
manager: wpickett
ms.workload:
- dotnet
- dotnetcore
ms.openlocfilehash: 3e75f3c74c5966ce5ce22b23f7ba179e903d37aa
ms.sourcegitcommit: e7f04439d78909229506b56935a1105a4149ff3d
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 12/23/2017
---
# <a name="secure-coding-guidelines"></a><span data-ttu-id="b2bfc-102">Pokyny pro zabezpečené kódování</span><span class="sxs-lookup"><span data-stu-id="b2bfc-102">Secure Coding Guidelines</span></span>
<span data-ttu-id="b2bfc-103">Zabezpečení na základě důkaz a zabezpečení přístupu kódu poskytují velmi výkonné, explicitní mechanismy pro implementaci zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="b2bfc-103">Evidence-based security and code access security provide very powerful, explicit mechanisms to implement security.</span></span> <span data-ttu-id="b2bfc-104">Většinu kódu aplikace můžete jednoduše používat infrastrukturu implementované rozhraní .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="b2bfc-104">Most application code can simply use the infrastructure implemented by the .NET Framework.</span></span> <span data-ttu-id="b2bfc-105">V některých případech další bezpečnostní specifické pro aplikaci je nutné, vytvořené pomocí rozšíření zabezpečení systému nebo pomocí nových ad hoc metod.</span><span class="sxs-lookup"><span data-stu-id="b2bfc-105">In some cases, additional application-specific security is required, built either by extending the security system or by using new ad hoc methods.</span></span>  
  
 <span data-ttu-id="b2bfc-106">Pomocí oprávnění vyžadované rozhraní .NET Framework a jiných vynucení ve vašem kódu, by měl postavit překážek, aby se zabránilo škodlivý kód získávat informace, že nechcete, aby ji tak, aby měl nebo provádět jiné nežádoucí akce.</span><span class="sxs-lookup"><span data-stu-id="b2bfc-106">Using the .NET Framework-enforced permissions and other enforcement in your code, you should erect barriers to prevent malicious code from obtaining information that you do not want it to have or performing other undesirable actions.</span></span> <span data-ttu-id="b2bfc-107">Kromě toho musí vytvořit rovnováhu mezi zabezpečením a použitelnost ve všech scénářích očekávané pomocí důvěryhodný kód.</span><span class="sxs-lookup"><span data-stu-id="b2bfc-107">Additionally, you must strike a balance between security and usability in all the expected scenarios using trusted code.</span></span>  
  
 <span data-ttu-id="b2bfc-108">Tento přehled popisuje různé způsoby, jakými kód může být navrženy pro práci s zabezpečení systému.</span><span class="sxs-lookup"><span data-stu-id="b2bfc-108">This overview describes the different ways code can be designed to work with the security system.</span></span>  
  
## <a name="securing-resource-access"></a><span data-ttu-id="b2bfc-109">Zabezpečení přístupu k prostředkům</span><span class="sxs-lookup"><span data-stu-id="b2bfc-109">Securing Resource Access</span></span>  
 <span data-ttu-id="b2bfc-110">Při návrhu a psaní kódu, musíte k ochraně a omezit přístup ke kódu, který má k prostředkům, zejména v případě, že pomocí nebo vyvolání kódem neznámého původu.</span><span class="sxs-lookup"><span data-stu-id="b2bfc-110">When designing and writing your code, you need to protect and limit the access that code has to resources, especially when using or invoking code of unknown origin.</span></span> <span data-ttu-id="b2bfc-111">Ano mějte na paměti následující postupy k zajištění bezpečnosti kódu:</span><span class="sxs-lookup"><span data-stu-id="b2bfc-111">So, keep in mind the following techniques to ensure your code is secure:</span></span>  
  
-   <span data-ttu-id="b2bfc-112">Nepoužívejte zabezpečení přístupu kódu (CAS).</span><span class="sxs-lookup"><span data-stu-id="b2bfc-112">Do not use Code Access Security (CAS).</span></span>  
  
-   <span data-ttu-id="b2bfc-113">Nepoužívejte částečně důvěryhodným kódem.</span><span class="sxs-lookup"><span data-stu-id="b2bfc-113">Do not use partial trusted code.</span></span>  
  
-   <span data-ttu-id="b2bfc-114">Nepoužívejte .NET Remoting.</span><span class="sxs-lookup"><span data-stu-id="b2bfc-114">Do not use .NET Remoting.</span></span>  
  
-   <span data-ttu-id="b2bfc-115">Nepoužívejte objektu modelu DCOM (Distributed Component).</span><span class="sxs-lookup"><span data-stu-id="b2bfc-115">Do not use Distributed Component Object Model (DCOM).</span></span>  
  
-   <span data-ttu-id="b2bfc-116">Nepoužívejte binární formátování.</span><span class="sxs-lookup"><span data-stu-id="b2bfc-116">Do not use binary formatters.</span></span>  
  
 <span data-ttu-id="b2bfc-117">Zabezpečení přístupu kódu a kód transparentní pro zabezpečení se nebudou podporovat jako hranice zabezpečení s částečně důvěryhodným kódem.</span><span class="sxs-lookup"><span data-stu-id="b2bfc-117">Code Access Security and Security-Transparent Code will not be supported as a security boundary with partially trusted code.</span></span> <span data-ttu-id="b2bfc-118">Kód neznámého původu nedoporučujeme načítat ani spouštět, pokud nejsou nastavená alternativní bezpečnostní opatření.</span><span class="sxs-lookup"><span data-stu-id="b2bfc-118">We advise against loading and executing code of unknown origins without putting alternative security measures in place.</span></span> <span data-ttu-id="b2bfc-119">Alternativní bezpečnostní opatření jsou:</span><span class="sxs-lookup"><span data-stu-id="b2bfc-119">The alternative security measures are:</span></span>  
  
-   <span data-ttu-id="b2bfc-120">Virtualizace</span><span class="sxs-lookup"><span data-stu-id="b2bfc-120">Virtualization</span></span>  
  
-   <span data-ttu-id="b2bfc-121">AppContainers</span><span class="sxs-lookup"><span data-stu-id="b2bfc-121">AppContainers</span></span>  
  
-   <span data-ttu-id="b2bfc-122">Operační systém (OS) uživatele a oprávnění</span><span class="sxs-lookup"><span data-stu-id="b2bfc-122">Operating system (OS) users and permissions</span></span>  
  
-   <span data-ttu-id="b2bfc-123">Kontejnery technologie Hyper-V</span><span class="sxs-lookup"><span data-stu-id="b2bfc-123">Hyper-V containers</span></span>  
  
## <a name="security-neutral-code"></a><span data-ttu-id="b2bfc-124">Neutrální kód zabezpečení</span><span class="sxs-lookup"><span data-stu-id="b2bfc-124">Security-Neutral Code</span></span>  
 <span data-ttu-id="b2bfc-125">Neutrální kód zabezpečení neodpovídá nic explicitní systémem zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="b2bfc-125">Security-neutral code does nothing explicit with the security system.</span></span> <span data-ttu-id="b2bfc-126">Je spuštěna s všechna oprávnění ji obdrží.</span><span class="sxs-lookup"><span data-stu-id="b2bfc-126">It runs with whatever permissions it receives.</span></span> <span data-ttu-id="b2bfc-127">I když se aplikace, které se nepodařilo zachytit výjimky zabezpečení přidružené k chráněné operací (například s použitím souborů, sítě a tak dále) může být k neošetřené výjimce, neutrální kód zabezpečení stále využívá výhod zabezpečení rozhraní .NET Framework technologie.</span><span class="sxs-lookup"><span data-stu-id="b2bfc-127">Although applications that fail to catch security exceptions associated with protected operations (such as using files, networking, and so on) can result in an unhandled exception, security-neutral code still takes advantage of the .NET Framework security technologies.</span></span>  
  
 <span data-ttu-id="b2bfc-128">Knihovnu zabezpečení jazykově neutrální má speciální vlastnosti, které byste měli vědět.</span><span class="sxs-lookup"><span data-stu-id="b2bfc-128">A security-neutral library has special characteristics that you should understand.</span></span> <span data-ttu-id="b2bfc-129">Předpokládejme, že vaše knihovna obsahuje prvky rozhraní API, které soubory použít nebo volat nespravovaný kód. Pokud váš kód nemá odpovídající oprávnění, se nespustí, jak je popsáno.</span><span class="sxs-lookup"><span data-stu-id="b2bfc-129">Suppose your library provides API elements that use files or call unmanaged code; if your code does not have the corresponding permission, it will not run as described.</span></span> <span data-ttu-id="b2bfc-130">Ale i v případě, že kód má oprávnění, kód aplikace, který jej volá musí mít stejné oprávnění fungování.</span><span class="sxs-lookup"><span data-stu-id="b2bfc-130">However, even if the code has the permission, any application code that calls it must have the same permission in order to work.</span></span> <span data-ttu-id="b2bfc-131">Pokud kód volání nemá správné oprávnění, <xref:System.Security.SecurityException> se zobrazí v důsledku procházení zásobníku zabezpečení přístupu kódu.</span><span class="sxs-lookup"><span data-stu-id="b2bfc-131">If the calling code does not have the right permission, a <xref:System.Security.SecurityException> appears as a result of the code access security stack walk.</span></span>  
  
## <a name="application-code-that-is-not-a-reusable-component"></a><span data-ttu-id="b2bfc-132">Aplikační kód, který není opakovaně použitelné součásti</span><span class="sxs-lookup"><span data-stu-id="b2bfc-132">Application Code That Is Not a Reusable Component</span></span>  
 <span data-ttu-id="b2bfc-133">Pokud váš kód je součástí aplikace, která nebude volána jiným kódem, zabezpečení je snadná a speciální kódování nemusí být požadována.</span><span class="sxs-lookup"><span data-stu-id="b2bfc-133">If your code is part of an application that will not be called by other code, security is simple and special coding might not be required.</span></span> <span data-ttu-id="b2bfc-134">Nezapomeňte však, že škodlivý kód můžete volat váš kód.</span><span class="sxs-lookup"><span data-stu-id="b2bfc-134">However, remember that malicious code can call your code.</span></span> <span data-ttu-id="b2bfc-135">Při zabezpečení přístupu kódu může přestat škodlivý kód v přístupu k prostředkům, může takový kód stále načíst hodnoty polí nebo vlastnosti, které můžou obsahovat citlivé informace.</span><span class="sxs-lookup"><span data-stu-id="b2bfc-135">While code access security might stop malicious code from accessing resources, such code could still read values of your fields or properties that might contain sensitive information.</span></span>  
  
 <span data-ttu-id="b2bfc-136">Kromě toho pokud váš kód přijímá uživatelského vstupu z Internetu nebo jiné nespolehlivé zdroje, musíte být opatrní škodlivý vstup.</span><span class="sxs-lookup"><span data-stu-id="b2bfc-136">Additionally, if your code accepts user input from the Internet or other unreliable sources, you must be careful about malicious input.</span></span>  
  
## <a name="managed-wrapper-to-native-code-implementation"></a><span data-ttu-id="b2bfc-137">Spravovaná obálka pro implementaci nativního kódu</span><span class="sxs-lookup"><span data-stu-id="b2bfc-137">Managed Wrapper to Native Code Implementation</span></span>  
 <span data-ttu-id="b2bfc-138">V tomto scénáři obvykle některé užitečné funkce je implementována v nativním kódu, které mají být k dispozici do spravovaného kódu.</span><span class="sxs-lookup"><span data-stu-id="b2bfc-138">Typically in this scenario, some useful functionality is implemented in native code that you want to make available to managed code.</span></span> <span data-ttu-id="b2bfc-139">Spravované obálky se snadno zápisu pomocí vyvolání buď platformy nebo zprostředkovatel komunikace s objekty COM.</span><span class="sxs-lookup"><span data-stu-id="b2bfc-139">Managed wrappers are easy to write using either platform invoke or COM interop.</span></span> <span data-ttu-id="b2bfc-140">Ale pokud to uděláte, volající vašich obálek musí mít práva nespravovaného kódu, aby bylo možné úspěšně.</span><span class="sxs-lookup"><span data-stu-id="b2bfc-140">However, if you do this, callers of your wrappers must have unmanaged code rights in order to succeed.</span></span> <span data-ttu-id="b2bfc-141">Ve výchozích zásadách to znamená, že kód stáhnout z intranetu nebo Internetu nebude fungovat se obálky.</span><span class="sxs-lookup"><span data-stu-id="b2bfc-141">Under default policy, this means that code downloaded from an intranet or the Internet will not work with the wrappers.</span></span>  
  
 <span data-ttu-id="b2bfc-142">Namísto udělení všechny aplikace, které používají tato práva nespravovaného kódu obálky, je lepší přidělit tato práva pouze na kód obálky.</span><span class="sxs-lookup"><span data-stu-id="b2bfc-142">Instead of giving all applications that use these wrappers unmanaged code rights, it is better to give these rights only to the wrapper code.</span></span> <span data-ttu-id="b2bfc-143">Pokud základní funkce zpřístupňuje žádné prostředky a implementace je obdobně bezpečná, obálku pouze potřebuje uplatnit její práva, která umožňuje žádný kód volání prostřednictvím.</span><span class="sxs-lookup"><span data-stu-id="b2bfc-143">If the underlying functionality exposes no resources and the implementation is likewise safe, the wrapper only needs to assert its rights, which enables any code to call through it.</span></span> <span data-ttu-id="b2bfc-144">Pokud se jedná o prostředky kódování zabezpečení, musí to být stejný jako v případě kódu knihovny popsané v další části.</span><span class="sxs-lookup"><span data-stu-id="b2bfc-144">When resources are involved, security coding should be the same as the library code case described in the next section.</span></span> <span data-ttu-id="b2bfc-145">Protože obálku potenciálně vystavuje volající na tyto prostředky, je nutné pozor, ověření bezpečnosti nativního kódu a je za to obálka.</span><span class="sxs-lookup"><span data-stu-id="b2bfc-145">Because the wrapper is potentially exposing callers to these resources, careful verification of the safety of the native code is necessary and is the wrapper's responsibility.</span></span>  
  
## <a name="library-code-that-exposes-protected-resources"></a><span data-ttu-id="b2bfc-146">Kód knihovny vystavující chráněné zdroje</span><span class="sxs-lookup"><span data-stu-id="b2bfc-146">Library Code That Exposes Protected Resources</span></span>  
 <span data-ttu-id="b2bfc-147">Toto je nejvýkonnější a proto potenciálně nebezpečný (Pokud je nesprávně provedeno) přístup pro kódování zabezpečení: vaše knihovna slouží jako rozhraní pro jiný kód pro přístup k určitým prostředkům, které jinak nejsou k dispozici, stejně jako třídy rozhraní .NET Framework Vynuťte oprávnění pro prostředky, které používají.</span><span class="sxs-lookup"><span data-stu-id="b2bfc-147">This is the most powerful and hence potentially dangerous (if done incorrectly) approach for security coding: Your library serves as an interface for other code to access certain resources that are not otherwise available, just as the classes of the .NET Framework enforce permissions for the resources they use.</span></span> <span data-ttu-id="b2bfc-148">Bez ohledu na vystavit prostředek kódu musí nejprve požádat o oprávnění k příslušnému prostředku (to znamená, musí provést kontrolu zabezpečení) a poté obvykle uplatní jeho práva k provedení aktuální operace.</span><span class="sxs-lookup"><span data-stu-id="b2bfc-148">Wherever you expose a resource, your code must first demand the permission appropriate to the resource (that is, it must perform a security check) and then typically assert its rights to perform the actual operation.</span></span>  
  
## <a name="related-topics"></a><span data-ttu-id="b2bfc-149">Související témata</span><span class="sxs-lookup"><span data-stu-id="b2bfc-149">Related Topics</span></span>  
  
|<span data-ttu-id="b2bfc-150">Název</span><span class="sxs-lookup"><span data-stu-id="b2bfc-150">Title</span></span>|<span data-ttu-id="b2bfc-151">Popis</span><span class="sxs-lookup"><span data-stu-id="b2bfc-151">Description</span></span>|  
|-----------|-----------------|  
|[<span data-ttu-id="b2bfc-152">Zabezpečení stavových dat</span><span class="sxs-lookup"><span data-stu-id="b2bfc-152">Securing State Data</span></span>](../../../docs/standard/security/securing-state-data.md)|<span data-ttu-id="b2bfc-153">Popisuje, jak chránit soukromé členy.</span><span class="sxs-lookup"><span data-stu-id="b2bfc-153">Describes how to protect private members.</span></span>|  
|[<span data-ttu-id="b2bfc-154">Zabezpečení a uživatelský vstup</span><span class="sxs-lookup"><span data-stu-id="b2bfc-154">Security and User Input</span></span>](../../../docs/standard/security/security-and-user-input.md)|<span data-ttu-id="b2bfc-155">Popisuje otázky zabezpečení pro aplikace, které přijímají vstup uživatele.</span><span class="sxs-lookup"><span data-stu-id="b2bfc-155">Describes security concerns for applications that accept user input.</span></span>|  
|[<span data-ttu-id="b2bfc-156">Zabezpečení a konflikty časování</span><span class="sxs-lookup"><span data-stu-id="b2bfc-156">Security and Race Conditions</span></span>](../../../docs/standard/security/security-and-race-conditions.md)|<span data-ttu-id="b2bfc-157">Popisuje, jak se vyhnout časování ve vašem kódu.</span><span class="sxs-lookup"><span data-stu-id="b2bfc-157">Describes how to avoid race conditions in your code.</span></span>|  
|[<span data-ttu-id="b2bfc-158">Zabezpečení a průběžné vytváření kódu</span><span class="sxs-lookup"><span data-stu-id="b2bfc-158">Security and On-the-Fly Code Generation</span></span>](../../../docs/standard/security/security-and-on-the-fly-code-generation.md)|<span data-ttu-id="b2bfc-159">Popisuje otázky zabezpečení pro aplikace, které generují dynamický kód.</span><span class="sxs-lookup"><span data-stu-id="b2bfc-159">Describes security concerns for applications that generate dynamic code.</span></span>|  
|[<span data-ttu-id="b2bfc-160">Zabezpečení na základě rolí</span><span class="sxs-lookup"><span data-stu-id="b2bfc-160">Role-Based Security</span></span>](../../../docs/standard/security/role-based-security.md)|<span data-ttu-id="b2bfc-161">Popisuje podrobně zabezpečení na základě rolí rozhraní .NET Framework a poskytuje pokyny pro použití v kódu.</span><span class="sxs-lookup"><span data-stu-id="b2bfc-161">Describes .NET Framework role-based security in detail and provides instructions for using it in your code.</span></span>|
