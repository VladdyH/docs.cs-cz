### <a name="cspparametersparentwindowhandle-now-expects-hwnd-value"></a><span data-ttu-id="d224a-101">CspParameters.ParentWindowHandle nyní očekává hodnotu HWND</span><span class="sxs-lookup"><span data-stu-id="d224a-101">CspParameters.ParentWindowHandle now expects HWND value</span></span>

|   |   |
|---|---|
|<span data-ttu-id="d224a-102">Podrobnosti</span><span class="sxs-lookup"><span data-stu-id="d224a-102">Details</span></span>|<span data-ttu-id="d224a-103"><xref:System.Security.Cryptography.CspParameters.ParentWindowHandle> Hodnotu, která byla zavedená v rozhraní .NET Framework 2.0, umožňuje aplikaci zaregistrovat hodnotu nadřazené okno popisovač tak, aby žádné uživatelské rozhraní vyžaduje přístup ke klíči (například PIN kódu výzva nebo souhlas dialogové okno) otevře jako modální podřízené vybrané okno. Počínaje aplikací, které cílí rozhraní .NET Framework 4.7, můžete nastavit aplikaci Windows Forms <xref:System.Security.Cryptography.CspParameters.ParentWindowHandle> vlastnost s kódem takto:</span><span class="sxs-lookup"><span data-stu-id="d224a-103">The <xref:System.Security.Cryptography.CspParameters.ParentWindowHandle> value, introduced in .NET Framework 2.0, allows an application to register a parent window handle value such that any UI required to access the key (such as a PIN prompt or consent dialog) opens as a modal child to the specified window.Starting with apps that target the .NET Framework 4.7, a Windows Forms application can set the <xref:System.Security.Cryptography.CspParameters.ParentWindowHandle> property with code like the following:</span></span><pre><code class="lang-csharp">cspParameters.ParentWindowHandle = form.Handle;&#13;&#10;</code></pre><span data-ttu-id="d224a-104">V předchozích verzích rozhraní .NET Framework se očekávala se hodnota <xref:System.IntPtr?displayProperty=name> představující místo v paměti kde [HWND](https://msdn.microsoft.com/library/windows/desktop/aa383751.aspx#HWND) bydleli hodnotu.</span><span class="sxs-lookup"><span data-stu-id="d224a-104">In previous versions of the .NET Framework, the value was expected to be an <xref:System.IntPtr?displayProperty=name> representing a location in memory where the [HWND](https://msdn.microsoft.com/library/windows/desktop/aa383751.aspx#HWND) value resided.</span></span> <span data-ttu-id="d224a-105">Nastavení vlastnosti formuláře. Zpracování ve Windows 7 a dřívějších verzí nemělo žádný vliv, ale ve Windows 8 a novějších verzích, výsledkem je to &quot; <xref:System.Security.Cryptography.CryptographicException?displayProperty=name>: parametr je nesprávný.&quot;</span><span class="sxs-lookup"><span data-stu-id="d224a-105">Setting the property to form.Handle on Windows 7 and earlier versions had no effect, but on Windows 8 and later versions, it results in a &quot;<xref:System.Security.Cryptography.CryptographicException?displayProperty=name>: The parameter is incorrect.&quot;</span></span>|
|<span data-ttu-id="d224a-106">Návrh</span><span class="sxs-lookup"><span data-stu-id="d224a-106">Suggestion</span></span>|<span data-ttu-id="d224a-107">Aplikace nebo cílením na rozhraní .NET Framework 4.7 vyšší chtějí zaregistrovat vztahu nadřazené okno se doporučuje použít zjednodušený formuláře:</span><span class="sxs-lookup"><span data-stu-id="d224a-107">Applications targeting .NET Framework 4.7 or higher wishing to register a parent window relationship are encouraged to use the simplified form:</span></span><pre><code class="lang-csharp">cspParameters.ParentWindowHandle = form.Handle;&#13;&#10;</code></pre><span data-ttu-id="d224a-108">Uživatelé, kteří měli identifikuje, že bylo správnou hodnotu předávání na adresu paměti umístění, které uchovávat hodnota <code>form.Handle</code> můžete vyjádření výslovného nesouhlasu změny chování nastavením přepínač AppContext <code>Switch.System.Security.Cryptography.DoNotAddrOfCspParentWindowHandle</code> k <code>true</code>.</span><span class="sxs-lookup"><span data-stu-id="d224a-108">Users who had identified that the correct value to pass was the address of a memory location which held the value <code>form.Handle</code> can opt out of the behavior change by setting the AppContext switch <code>Switch.System.Security.Cryptography.DoNotAddrOfCspParentWindowHandle</code> to <code>true</code>.</span></span><ol><li><span data-ttu-id="d224a-109">Prostřednictvím kódu programu nastavením compat přepne na AppContext, jak je popsáno [sem](http://blogs.msdn.com/b/dotnet/archive/2015/04/29/net-announcements-at-build-2015.aspx#dotnet46)</span><span class="sxs-lookup"><span data-stu-id="d224a-109">By programmatically setting compat switches on the AppContext, as explained [here](http://blogs.msdn.com/b/dotnet/archive/2015/04/29/net-announcements-at-build-2015.aspx#dotnet46)</span></span></li><li><span data-ttu-id="d224a-110">Přidáním následující řádek na <code>&lt;runtime&gt;</code> v souboru app.config:</span><span class="sxs-lookup"><span data-stu-id="d224a-110">By adding the following line to the <code>&lt;runtime&gt;</code> section of the app.config file:</span></span></li></ol><pre><code class="lang-xml">&lt;runtime&gt;&#13;&#10;&lt;AppContextSwitchOverrides value=&quot;Switch.System.Security.Cryptography.DoNotAddrOfCspParentWindowHandle=true&quot;/&gt;&#13;&#10;&lt;/runtime&gt;&#13;&#10;</code></pre><span data-ttu-id="d224a-111">Naopak Přepnout uživatele, kteří chtějí povolit nové chování na modul runtime rozhraní .NET Framework 4.7 při načítání aplikace pod starší verze rozhraní .NET Framework, můžete nastavit AppContext <code>false</code>.</span><span class="sxs-lookup"><span data-stu-id="d224a-111">Conversely, users who wish to opt in to the new behavior on the .NET Framework 4.7 runtime when the application loads under older .NET Framework versions can set the AppContext switch to <code>false</code>.</span></span>|
|<span data-ttu-id="d224a-112">Rozsah</span><span class="sxs-lookup"><span data-stu-id="d224a-112">Scope</span></span>|<span data-ttu-id="d224a-113">Vedlejší</span><span class="sxs-lookup"><span data-stu-id="d224a-113">Minor</span></span>|
|<span data-ttu-id="d224a-114">Version</span><span class="sxs-lookup"><span data-stu-id="d224a-114">Version</span></span>|<span data-ttu-id="d224a-115">4.7</span><span class="sxs-lookup"><span data-stu-id="d224a-115">4.7</span></span>|
|<span data-ttu-id="d224a-116">Typ</span><span class="sxs-lookup"><span data-stu-id="d224a-116">Type</span></span>|<span data-ttu-id="d224a-117">Změna orientace</span><span class="sxs-lookup"><span data-stu-id="d224a-117">Retargeting</span></span>|
|<span data-ttu-id="d224a-118">Ovlivněné rozhraní API</span><span class="sxs-lookup"><span data-stu-id="d224a-118">Affected APIs</span></span>|<ul><li><xref:System.Security.Cryptography.CspParameters.ParentWindowHandle?displayProperty=nameWithType></li></ul>|

