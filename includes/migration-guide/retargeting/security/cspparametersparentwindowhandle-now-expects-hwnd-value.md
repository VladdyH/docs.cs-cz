### <a name="cspparametersparentwindowhandle-now-expects-hwnd-value"></a><span data-ttu-id="78b4c-101">CspParameters.ParentWindowHandle nyní očekává hodnotu HWND</span><span class="sxs-lookup"><span data-stu-id="78b4c-101">CspParameters.ParentWindowHandle now expects HWND value</span></span>

|   |   |
|---|---|
|<span data-ttu-id="78b4c-102">Podrobnosti</span><span class="sxs-lookup"><span data-stu-id="78b4c-102">Details</span></span>|<span data-ttu-id="78b4c-103"><xref:System.Security.Cryptography.CspParameters.ParentWindowHandle> Hodnotu zavedena v rozhraní .NET Framework 2.0, umožňuje aplikaci zaregistrovat hodnotu popisovač nadřazené okno tak, aby všem prvkům uživatelského rozhraní pro přístup k klíč (jako je například PIN výzvu nebo souhlas dialogového okna) otevře jako modální podřízené určené okno. Počínaje aplikací určených pro rozhraní .NET Framework 4.7, můžete nastavit aplikaci Windows Forms <xref:System.Security.Cryptography.CspParameters.ParentWindowHandle> vlastnost s kódem, jako je následující:</span><span class="sxs-lookup"><span data-stu-id="78b4c-103">The <xref:System.Security.Cryptography.CspParameters.ParentWindowHandle> value, introduced in .NET Framework 2.0, allows an application to register a parent window handle value such that any UI required to access the key (such as a PIN prompt or consent dialog) opens as a modal child to the specified window.Starting with apps that target the .NET Framework 4.7, a Windows Forms application can set the <xref:System.Security.Cryptography.CspParameters.ParentWindowHandle> property with code like the following:</span></span><pre><code class="lang-csharp">cspParameters.ParentWindowHandle = form.Handle;&#13;&#10;</code></pre><span data-ttu-id="78b4c-104">V předchozích verzích rozhraní .NET Framework, byla očekávána hodnota bude <xref:System.IntPtr?displayProperty=name> představující umístění v paměti, kde [HWND](https://msdn.microsoft.com/library/windows/desktop/aa383751.aspx#HWND) hodnotu nacházejí.</span><span class="sxs-lookup"><span data-stu-id="78b4c-104">In previous versions of the .NET Framework, the value was expected to be an <xref:System.IntPtr?displayProperty=name> representing a location in memory where the [HWND](https://msdn.microsoft.com/library/windows/desktop/aa383751.aspx#HWND) value resided.</span></span> <span data-ttu-id="78b4c-105">Nastavení vlastnosti formuláře. Zpracování ve Windows 7 a starší verze nemělo žádný vliv, ale ve Windows 8 a novějších verzích je výsledkem &quot; <xref:System.Security.Cryptography.CryptographicException?displayProperty=name>: parametr je nesprávný.&quot;</span><span class="sxs-lookup"><span data-stu-id="78b4c-105">Setting the property to form.Handle on Windows 7 and earlier versions had no effect, but on Windows 8 and later versions, it results in a &quot;<xref:System.Security.Cryptography.CryptographicException?displayProperty=name>: The parameter is incorrect.&quot;</span></span>|
|<span data-ttu-id="78b4c-106">Návrh</span><span class="sxs-lookup"><span data-stu-id="78b4c-106">Suggestion</span></span>|<span data-ttu-id="78b4c-107">Aplikace cílí na .NET Framework 4.7 nebo vyšší se chtějí registrovat nadřazené okno relace se doporučuje použít zjednodušený formulář:</span><span class="sxs-lookup"><span data-stu-id="78b4c-107">Applications targeting .NET Framework 4.7 or higher wishing to register a parent window relationship are encouraged to use the simplified form:</span></span><pre><code class="lang-csharp">cspParameters.ParentWindowHandle = form.Handle;&#13;&#10;</code></pre><span data-ttu-id="78b4c-108">Uživatelé, kteří měli zjistili, že se správnou hodnotu pro předání adresy umístění v paměti, která je uložená hodnota <code>form.Handle</code> můžete vyjádřit výslovný nesouhlas Změna chování tak, že nastavíte přepínač AppContext <code>Switch.System.Security.Cryptography.DoNotAddrOfCspParentWindowHandle</code> k <code>true</code>.</span><span class="sxs-lookup"><span data-stu-id="78b4c-108">Users who had identified that the correct value to pass was the address of a memory location which held the value <code>form.Handle</code> can opt out of the behavior change by setting the AppContext switch <code>Switch.System.Security.Cryptography.DoNotAddrOfCspParentWindowHandle</code> to <code>true</code>.</span></span><ol><li><span data-ttu-id="78b4c-109">Prostřednictvím kódu programu nastavením compat přepne na AppContext, jak je vysvětleno [zde](https://blogs.msdn.com/b/dotnet/archive/2015/04/29/net-announcements-at-build-2015.aspx#dotnet46)</span><span class="sxs-lookup"><span data-stu-id="78b4c-109">By programmatically setting compat switches on the AppContext, as explained [here](https://blogs.msdn.com/b/dotnet/archive/2015/04/29/net-announcements-at-build-2015.aspx#dotnet46)</span></span></li><li><span data-ttu-id="78b4c-110">Přidejte následující řádek, který <code>&lt;runtime&gt;</code> část souboru app.config:</span><span class="sxs-lookup"><span data-stu-id="78b4c-110">By adding the following line to the <code>&lt;runtime&gt;</code> section of the app.config file:</span></span></li></ol><pre><code class="lang-xml">&lt;runtime&gt;&#13;&#10;&lt;AppContextSwitchOverrides value=&quot;Switch.System.Security.Cryptography.DoNotAddrOfCspParentWindowHandle=true&quot;/&gt;&#13;&#10;&lt;/runtime&gt;&#13;&#10;</code></pre><span data-ttu-id="78b4c-111">Naopak, uživatelé, kteří chtějí výslovný souhlas se nové chování na modul runtime rozhraní .NET Framework 4.7 při zatížení aplikací v rámci starší verze rozhraní .NET Framework můžete nastavit AppContext přepnout na <code>false</code>.</span><span class="sxs-lookup"><span data-stu-id="78b4c-111">Conversely, users who wish to opt in to the new behavior on the .NET Framework 4.7 runtime when the application loads under older .NET Framework versions can set the AppContext switch to <code>false</code>.</span></span>|
|<span data-ttu-id="78b4c-112">Rozsah</span><span class="sxs-lookup"><span data-stu-id="78b4c-112">Scope</span></span>|<span data-ttu-id="78b4c-113">Vedlejší</span><span class="sxs-lookup"><span data-stu-id="78b4c-113">Minor</span></span>|
|<span data-ttu-id="78b4c-114">Version</span><span class="sxs-lookup"><span data-stu-id="78b4c-114">Version</span></span>|<span data-ttu-id="78b4c-115">4.7</span><span class="sxs-lookup"><span data-stu-id="78b4c-115">4.7</span></span>|
|<span data-ttu-id="78b4c-116">Typ</span><span class="sxs-lookup"><span data-stu-id="78b4c-116">Type</span></span>|<span data-ttu-id="78b4c-117">Mění se cílení</span><span class="sxs-lookup"><span data-stu-id="78b4c-117">Retargeting</span></span>|
|<span data-ttu-id="78b4c-118">Ovlivněné rozhraní API</span><span class="sxs-lookup"><span data-stu-id="78b4c-118">Affected APIs</span></span>|<ul><li><xref:System.Security.Cryptography.CspParameters.ParentWindowHandle?displayProperty=nameWithType></li></ul>|

