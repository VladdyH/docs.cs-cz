### <a name="sslstream-supports-tls-alerts"></a>SslStream podporuje TLS výstrah

|   |   |
|---|---|
|Podrobnosti|Po selhání TLS handshake <xref:System.IO.IOException?displayProperty=name> s vnitřní <xref:System.ComponentModel.Win32Exception?displayProperty=name> první vstupně-výstupních operací čtení/zápisu operace bude vyvolána výjimka. <xref:System.ComponentModel.Win32Exception.NativeErrorCode?displayProperty=name> Kód <xref:System.ComponentModel.Win32Exception?displayProperty=name> lze mapovat na TLS výstrah ze vzdálené strany pomocí této [Schannel dokumentaci](https://msdn.microsoft.com/library/windows/desktop/dd721886%28v=vs.85%29.aspx). Další informace najdete v tématu [dokument RFC 2246: výstrahu o chybě. oddíl 7.2.2](https://tools.ietf.org/html/rfc2246#section-7.2.2)chování v rozhraní .NET 4.6.2 a pod ním je, že kanál přenosu (obvykle připojení TCP) bude vypršení časového limitu během zápisu nebo čtení, když se nezdařilo druhou stranou ověření typu handshake a okamžitě později odmítl připojení.|
|Návrh|Aplikace volání síťová rozhraní API vstupně-výstupních operací, jako <xref:System.IO.Stream.Read(System.Byte[],System.Int32,System.Int32)> / <xref:System.IO.Stream.Write(System.Byte[],System.Int32,System.Int32)> by měla řídit <xref:System.IO.IOException> nebo <xref:System.TimeoutException?displayProperty=name>. Ve výchozím nastavení od verze .NET 4.7 je povolena funkce TLS výstrah. Cílení na rozhraní .NET 4.0 - .NET 4.6.2 aplikace spuštěné na rozhraní .NET 4.7 nebo vyšší systému bude mít tato funkce zakázaná zachování kompatibility. Je možné povolit nebo zakázat funkci pro .NET 4.6 a vyšší aplikací běžících na rozhraní .NET 4.7 nebo vyšší framework následující konfigurace rozhraní API.<ul><li>Prostřednictvím kódu programu:</li></ul>Musí být úplně první věcí, kterou aplikace nemá vzhledem k tomu, že bude ServicePointManager – inicializovat pouze jednou:<pre><code class="language-C#">AppContext.SetSwitch(&quot;TestSwitch.LocalAppContext.DisableCaching&quot;, true);&#13;&#10;AppContext.SetSwitch(&quot;Switch.System.Net.DontEnableTlsAlerts&quot;, true); // Set to &#39;false&#39; to enable the feature in .NET 4.6 - 4.6.2.&#13;&#10;</code></pre><ul><li>AppConfig:</li></ul><pre><code class="language-XML">&lt;runtime&gt;&#13;&#10;&lt;AppContextSwitchOverrides value=&quot;Switch.System.Net.DontEnableTlsAlerts=true&quot;/&gt;&#13;&#10;&lt;!-- Set to &#39;false&#39; to enable the feature in .NET 4.6 - 4.6.2. --&gt;&#13;&#10;&lt;/runtime&gt;&#13;&#10;</code></pre><ul><li>Klíč registru (počítače globální):</li></ul>Nastavte hodnotu na hodnotu "false" k povolení této funkce v rozhraní .NET 4.6 - 4.6.2.<pre><code>Key = HKLM\SOFTWARE\[Wow6432Node\]Microsoft\.NETFramework\AppContext\Switch.System.Net.DontEnableTlsAlerts&#13;&#10;Type = String&#13;&#10;Value = &quot;true&quot;&#13;&#10;</code></pre>|
|Rozsah|Edge|
|Version|4.7|
|Typ|Změna orientace|
|Ovlivněné rozhraní API|<ul><li><xref:System.Net.Security.SslStream?displayProperty=nameWithType></li><li><xref:System.Net.WebRequest?displayProperty=nameWithType></li><li><xref:System.Net.HttpWebRequest?displayProperty=nameWithType></li><li><xref:System.Net.FtpWebRequest?displayProperty=nameWithType></li><li><xref:System.Net.Mail.SmtpClient?displayProperty=nameWithType></li><li><xref:System.Net.Http?displayProperty=nameWithType></li></ul>|

