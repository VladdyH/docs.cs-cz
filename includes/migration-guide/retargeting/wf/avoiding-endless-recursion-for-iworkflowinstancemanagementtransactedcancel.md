### <a name="avoiding-endless-recursion-for-iworkflowinstancemanagementtransactedcancel-and-iworkflowinstancemanagementtransactedterminate"></a>Zamezení nekonečná rekurze IWorkflowInstanceManagement.TransactedCancel a IWorkflowInstanceManagement.TransactedTerminate

|   |   |
|---|---|
|Podrobnosti|Za určitých okolností při použití <xref:System.ServiceModel.Activities.IWorkflowInstanceManagement.TransactedCancel%2A?displayProperty=nameWithType> nebo <xref:System.ServiceModel.Activities.IWorkflowInstanceManagement.TransactedTerminate%2A?displayProperty=nameWithType> rozhraní API pro zrušení nebo ukončení pracovní postup služby instance, instance pracovního postupu může dojít k přetečení zásobníku kvůli nekonečná rekurze při <code>Workflow</code> runtime pokusí zachovat instance služby v rámci zpracování požadavku. K problému dochází, pokud se k instanci pracovního postupu je ve stavu, kde se čeká na některé další zbývající WCF k jiné službě k dokončení žádosti. <code>TransactedCancel</code> a <code>TransactedTerminate</code> operace vytvoření pracovní položky, které jsou zařazeny do fronty pro instanci služby pracovního postupu. Tyto pracovní položky nejsou provést v rámci zpracování <code>TransactedCancel/TransactedTerminate</code> požadavku. Protože k instanci pracovního postupu služby je zaneprázdněný, čekání na další zbývající požadavek WCF k dokončení, pracovní položky vytvořené zůstane zařazených do fronty. <code>TransactedCancel/TransactedTerminate</code> Dokončení operace a ovládací prvek se vrátí zpět do klienta. Když se transakce přidružené <code>TransactedCancel/TransactedTerminate</code> operace provede pokus o potvrzení, musí se zachovat stav instance pracovního postupu služby. Ale protože je nezpracovaných <code>WCF</code> požadavků pro instanci modulu runtime pracovního postupu nelze uložit instanci služby pracovního postupu a smyčky nekonečná rekurze vede k přetečení zásobníku. Protože <code>TransactedCancel</code> a <code>TransactedTerminate</code> pouze vytvoření pracovní položky v paměti, fakt, že transakce existuje nemá žádný vliv. Vrácení transakce není zahodit pracovní položku. Chcete-li vyřešit tento problém, od verze rozhraní .NET Framework 4.7.2, jsme zavedli <code>AppSetting</code> mohou být přidány do <code>web.config/app.config</code> služby pracovního postupu, která oznamuje ho ignorovat transakce <code>TransactedCancel</code> a <code>TransactedTerminate</code>. To umožňuje potvrzení bez čekání na instanci pracovního postupu se zachovat transakce. AppSetting pro tuto funkci jmenuje <code>microsoft:WorkflowServices:IgnoreTransactionsForTransactedCancelAndTransactedTerminate</code>. Hodnota <code>true</code> označuje, že transakce by měl být ignorovány, tedy není zpomalován přetečení zásobníku. Výchozí hodnota této AppSetting je <code>false</code>, takže neovlivní existující instance služby pracovního postupu.|
|Návrh|Pokud používáte AppFabric nebo jiné <xref:System.ServiceModel.Activities.IWorkflowInstanceManagement> klienta a jsou během k přetečení zásobníku v instanci služby pracovního postupu, při pokusu o zrušení nebo ukončení instance pracovního postupu, můžete přidat následující <code>&lt;appSettings&gt;</code> části web.config/ soubor App.config pro služby pracovního postupu:<pre><code class="lang-xml">&lt;add key=&quot;microsoft:WorkflowServices:IgnoreTransactionsForTransactedCancelAndTransactedTerminate&quot; value=&quot;true&quot;/&gt;&#13;&#10;</code></pre>Pokud nejsou k problému dochází, není potřeba to udělat.|
|Rozsah|Edge|
|Version|4.7.2|
|Typ|Změna orientace|

